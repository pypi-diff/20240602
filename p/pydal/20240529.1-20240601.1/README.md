# Comparing `tmp/pydal-20240529.1.tar.gz` & `tmp/pydal-20240601.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "pydal-20240529.1.tar", last modified: Thu May 30 07:13:20 2024, max compression
+gzip compressed data, was "pydal-20240601.1.tar", last modified: Sun Jun  2 04:29:57 2024, max compression
```

## Comparing `pydal-20240529.1.tar` & `pydal-20240601.1.tar`

### file list

```diff
@@ -1,149 +1,154 @@
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.661271 pydal-20240529.1/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      344 2022-10-17 00:44:46.000000 pydal-20240529.1/AUTHORS
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6546 2022-10-17 00:44:46.000000 pydal-20240529.1/CHANGES
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1555 2022-10-17 00:44:46.000000 pydal-20240529.1/LICENSE.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      170 2022-11-11 06:37:56.000000 pydal-20240529.1/MANIFEST.in
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-05-30 07:13:20.661271 pydal-20240529.1/PKG-INFO
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2034 2022-10-17 00:44:46.000000 pydal-20240529.1/README.md
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.607936 pydal-20240529.1/docs/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6758 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/Makefile
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8083 2023-05-07 23:00:04.000000 pydal-20240529.1/docs/conf.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      833 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/index.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2834 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/pydal.adapters.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      664 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/pydal.helpers.rst
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       29 2022-10-17 00:44:46.000000 pydal-20240529.1/docs/requirements.txt
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.614603 pydal-20240529.1/pydal/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      179 2024-05-30 07:11:38.000000 pydal-20240529.1/pydal/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5440 2023-11-15 07:07:33.000000 pydal-20240529.1/pydal/_compat.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      466 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_gae.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      208 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_globals.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      396 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/_load.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.624603 pydal-20240529.1/pydal/adapters/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2372 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38911 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/adapters/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5691 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2000 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3145 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/firebird.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    18365 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2076 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1882 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/ingres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    37772 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6161 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3412 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9172 2023-11-12 03:29:21.000000 pydal-20240529.1/pydal/adapters/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9327 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/postgres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1460 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/sap.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4894 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/snowflake.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4392 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      799 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/adapters/teradata.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38529 2023-12-28 08:14:12.000000 pydal-20240529.1/pydal/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6427 2023-05-07 22:57:59.000000 pydal-20240529.1/pydal/connection.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.627937 pydal-20240529.1/pydal/contrib/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    44546 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/contrib/imap_adapter.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    79360 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/contrib/ipaddress.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10686 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/mockimaplib.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4071 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/ordereddict.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5584 2023-05-07 22:58:06.000000 pydal-20240529.1/pydal/contrib/portalocker.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    33372 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/contrib/reserved_sql_keywords.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3532 2023-05-07 22:58:07.000000 pydal-20240529.1/pydal/default_validators.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.634604 pydal-20240529.1/pydal/dialects/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3803 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    23464 2023-05-07 22:58:13.000000 pydal-20240529.1/pydal/dialects/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1390 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3374 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4307 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/firebird.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5953 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3275 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3929 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/ingres.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22110 2023-05-07 22:58:11.000000 pydal-20240529.1/pydal/dialects/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    15763 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/dialects/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3413 2023-05-07 22:51:50.000000 pydal-20240529.1/pydal/dialects/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8928 2023-05-07 22:58:13.000000 pydal-20240529.1/pydal/dialects/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14406 2023-11-12 03:31:51.000000 pydal-20240529.1/pydal/dialects/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3001 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/sap.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12077 2023-05-07 22:58:18.000000 pydal-20240529.1/pydal/dialects/snowflake.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4295 2023-05-07 22:52:12.000000 pydal-20240529.1/pydal/dialects/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3400 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/dialects/teradata.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3180 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/drivers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      347 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/exceptions.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.637937 pydal-20240529.1/pydal/helpers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      652 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/_internals.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16544 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/helpers/classes.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      971 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/gae.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14816 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/helpers/methods.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1144 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/regex.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16447 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/rest.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1839 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/helpers/serializers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    27287 2023-05-07 22:58:25.000000 pydal-20240529.1/pydal/migrator.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   130609 2024-05-30 06:35:31.000000 pydal-20240529.1/pydal/objects.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.641270 pydal-20240529.1/pydal/parsers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3394 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4718 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      360 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1605 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      815 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/parsers/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1043 2023-11-15 07:07:34.000000 pydal-20240529.1/pydal/parsers/sqlite.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.644604 pydal-20240529.1/pydal/representers/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8806 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/representers/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8793 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/representers/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1210 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/couchdb.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      680 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/db2.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1446 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/google.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      884 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/informix.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1757 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mongo.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      948 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mssql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      214 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/mysql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1286 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/oracle.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1643 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/postgre.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      752 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/representers/sqlite.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22855 2023-11-15 07:07:35.000000 pydal-20240529.1/pydal/restapi.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.644604 pydal-20240529.1/pydal/tools/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/tools/__init__.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2120 2023-11-15 06:54:34.000000 pydal-20240529.1/pydal/tools/tags.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1904 2022-10-17 00:44:46.000000 pydal-20240529.1/pydal/utils.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   159354 2024-05-30 07:10:48.000000 pydal-20240529.1/pydal/validators.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.617937 pydal-20240529.1/pydal.egg-info/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/PKG-INFO
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3430 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/SOURCES.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/dependency_links.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        6 2024-05-30 07:13:20.000000 pydal-20240529.1/pydal.egg-info/top_level.txt
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      905 2024-05-30 07:11:56.000000 pydal-20240529.1/pyproject.toml
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       99 2024-05-30 07:13:20.661271 pydal-20240529.1/setup.cfg
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.651271 pydal-20240529.1/tests/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      355 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/__init__.py
-drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-05-30 07:13:20.657938 pydal-20240529.1/tests/__pycache__/
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      631 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_adapt.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      305 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_compat.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2003 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/_helpers.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    17052 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/base.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6523 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/caching.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12218 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/contribs.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5671 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/indexes.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38722 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/is_url_validators.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10851 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/restapi.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     7660 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/smart_query.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   283906 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/sql.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2560 2024-05-30 06:17:49.000000 pydal-20240529.1/tests/__pycache__/tags.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9720 2024-05-30 06:37:38.000000 pydal-20240529.1/tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9585 2024-05-30 06:52:14.000000 pydal-20240529.1/tests/__pycache__/validation.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   107134 2024-05-30 07:02:29.000000 pydal-20240529.1/tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   102242 2024-05-30 07:12:10.000000 pydal-20240529.1/tests/__pycache__/validators.cpython-311.pyc
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      954 2022-10-17 00:44:46.000000 pydal-20240529.1/tests/_adapt.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       95 2022-10-17 00:44:46.000000 pydal-20240529.1/tests/_compat.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      765 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/_helpers.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8103 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/base.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2554 2023-05-07 23:00:03.000000 pydal-20240529.1/tests/caching.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4954 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/contribs.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2279 2023-05-07 23:00:03.000000 pydal-20240529.1/tests/indexes.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    29359 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/is_url_validators.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    99826 2023-11-15 07:07:14.000000 pydal-20240529.1/tests/nosql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14072 2023-11-15 07:07:11.000000 pydal-20240529.1/tests/restapi.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12552 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/smart_query.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   137750 2023-11-15 07:07:15.000000 pydal-20240529.1/tests/sql.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      990 2023-05-07 23:00:04.000000 pydal-20240529.1/tests/tags.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5270 2024-05-30 06:37:37.000000 pydal-20240529.1/tests/validation.py
--rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    67571 2024-05-30 07:02:13.000000 pydal-20240529.1/tests/validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.862163 pydal-20240601.1/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      344 2022-10-17 00:44:46.000000 pydal-20240601.1/AUTHORS
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6546 2022-10-17 00:44:46.000000 pydal-20240601.1/CHANGES
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1555 2022-10-17 00:44:46.000000 pydal-20240601.1/LICENSE.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      170 2022-11-11 06:37:56.000000 pydal-20240601.1/MANIFEST.in
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-06-02 04:29:57.862163 pydal-20240601.1/PKG-INFO
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2034 2022-10-17 00:44:46.000000 pydal-20240601.1/README.md
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.828829 pydal-20240601.1/docs/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6758 2022-10-17 00:44:46.000000 pydal-20240601.1/docs/Makefile
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8083 2023-05-07 23:00:04.000000 pydal-20240601.1/docs/conf.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      833 2022-10-17 00:44:46.000000 pydal-20240601.1/docs/index.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2834 2022-10-17 00:44:46.000000 pydal-20240601.1/docs/pydal.adapters.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      664 2022-10-17 00:44:46.000000 pydal-20240601.1/docs/pydal.helpers.rst
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       29 2022-10-17 00:44:46.000000 pydal-20240601.1/docs/requirements.txt
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.832162 pydal-20240601.1/pydal/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      179 2024-06-02 04:29:34.000000 pydal-20240601.1/pydal/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5440 2023-11-15 07:07:33.000000 pydal-20240601.1/pydal/_compat.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      466 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/_gae.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      208 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/_globals.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      396 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/_load.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.838829 pydal-20240601.1/pydal/adapters/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2372 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38911 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/adapters/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5691 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2000 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3145 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/firebird.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    18365 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2076 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1882 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/ingres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    37772 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6161 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3412 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9172 2023-11-12 03:29:21.000000 pydal-20240601.1/pydal/adapters/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9327 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/postgres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1460 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/sap.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4894 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/snowflake.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4392 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      799 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/adapters/teradata.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38529 2023-12-28 08:14:12.000000 pydal-20240601.1/pydal/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6427 2023-05-07 22:57:59.000000 pydal-20240601.1/pydal/connection.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.838829 pydal-20240601.1/pydal/contrib/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/contrib/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    44546 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/contrib/imap_adapter.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    79360 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/contrib/ipaddress.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10686 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/contrib/mockimaplib.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4071 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/contrib/ordereddict.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5584 2023-05-07 22:58:06.000000 pydal-20240601.1/pydal/contrib/portalocker.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    33372 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/contrib/reserved_sql_keywords.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3532 2023-05-07 22:58:07.000000 pydal-20240601.1/pydal/default_validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.842163 pydal-20240601.1/pydal/dialects/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3803 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    23464 2023-05-07 22:58:13.000000 pydal-20240601.1/pydal/dialects/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1390 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3374 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4307 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/firebird.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5953 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3275 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3929 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/ingres.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22110 2023-05-07 22:58:11.000000 pydal-20240601.1/pydal/dialects/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    15763 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/dialects/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3413 2023-05-07 22:51:50.000000 pydal-20240601.1/pydal/dialects/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8928 2023-05-07 22:58:13.000000 pydal-20240601.1/pydal/dialects/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14406 2023-11-12 03:31:51.000000 pydal-20240601.1/pydal/dialects/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3001 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/sap.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12077 2023-05-07 22:58:18.000000 pydal-20240601.1/pydal/dialects/snowflake.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4295 2023-05-07 22:52:12.000000 pydal-20240601.1/pydal/dialects/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3400 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/dialects/teradata.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3180 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/drivers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      347 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/exceptions.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.845496 pydal-20240601.1/pydal/helpers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      652 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/_internals.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16544 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/helpers/classes.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      971 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/gae.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14816 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/helpers/methods.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1144 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/regex.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    16447 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/rest.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1839 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/helpers/serializers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    27287 2023-05-07 22:58:25.000000 pydal-20240601.1/pydal/migrator.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   130609 2024-06-02 02:44:27.000000 pydal-20240601.1/pydal/objects.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.848829 pydal-20240601.1/pydal/parsers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3394 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4718 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      360 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1605 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      815 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/parsers/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1043 2023-11-15 07:07:34.000000 pydal-20240601.1/pydal/parsers/sqlite.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.848829 pydal-20240601.1/pydal/representers/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8806 2023-11-15 07:07:35.000000 pydal-20240601.1/pydal/representers/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8793 2023-11-15 07:07:35.000000 pydal-20240601.1/pydal/representers/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1210 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/couchdb.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      680 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/db2.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1446 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/google.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      884 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/informix.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1757 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/mongo.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      948 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/mssql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      214 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/mysql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1286 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/oracle.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1643 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/postgre.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      752 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/representers/sqlite.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    22855 2023-11-15 07:07:35.000000 pydal-20240601.1/pydal/restapi.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.852163 pydal-20240601.1/pydal/tools/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/tools/__init__.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    15007 2024-06-02 03:10:30.000000 pydal-20240601.1/pydal/tools/scheduler.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2120 2023-11-15 06:54:34.000000 pydal-20240601.1/pydal/tools/tags.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1904 2022-10-17 00:44:46.000000 pydal-20240601.1/pydal/utils.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   160782 2024-06-02 04:27:43.000000 pydal-20240601.1/pydal/validators.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.835496 pydal-20240601.1/pydal.egg-info/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2903 2024-06-02 04:29:57.000000 pydal-20240601.1/pydal.egg-info/PKG-INFO
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     3595 2024-06-02 04:29:57.000000 pydal-20240601.1/pydal.egg-info/SOURCES.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        1 2024-06-02 04:29:57.000000 pydal-20240601.1/pydal.egg-info/dependency_links.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)        6 2024-06-02 04:29:57.000000 pydal-20240601.1/pydal.egg-info/top_level.txt
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      905 2024-06-02 04:29:20.000000 pydal-20240601.1/pyproject.toml
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       99 2024-06-02 04:29:57.862163 pydal-20240601.1/setup.cfg
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.855496 pydal-20240601.1/tests/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      380 2024-06-02 04:28:09.000000 pydal-20240601.1/tests/__init__.py
+drwxr-xr-x   0 mdipierro  (1000) mdipierro  (1000)        0 2024-06-02 04:29:57.862163 pydal-20240601.1/tests/__pycache__/
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      662 2024-06-02 04:28:11.000000 pydal-20240601.1/tests/__pycache__/__init__.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     1654 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/_adapt.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      305 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/_compat.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2003 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/_helpers.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    17052 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/base.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     6523 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/caching.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12218 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/contribs.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5671 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/indexes.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    38722 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/is_url_validators.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    10851 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/restapi.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4801 2024-06-02 04:26:22.000000 pydal-20240601.1/tests/__pycache__/scheduler.cpython-311-pytest-8.2.1.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4666 2024-06-02 04:28:11.000000 pydal-20240601.1/tests/__pycache__/scheduler.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     7660 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/smart_query.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   283906 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/sql.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2560 2024-05-30 06:17:49.000000 pydal-20240601.1/tests/__pycache__/tags.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9720 2024-05-30 06:37:38.000000 pydal-20240601.1/tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     9585 2024-05-30 06:52:14.000000 pydal-20240601.1/tests/__pycache__/validation.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   108882 2024-06-02 04:26:31.000000 pydal-20240601.1/tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   103228 2024-06-02 04:28:11.000000 pydal-20240601.1/tests/__pycache__/validators.cpython-311.pyc
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      954 2022-10-17 00:44:46.000000 pydal-20240601.1/tests/_adapt.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)       95 2022-10-17 00:44:46.000000 pydal-20240601.1/tests/_compat.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      765 2023-05-07 23:00:04.000000 pydal-20240601.1/tests/_helpers.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     8103 2023-11-15 07:07:11.000000 pydal-20240601.1/tests/base.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2554 2023-05-07 23:00:03.000000 pydal-20240601.1/tests/caching.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     4954 2023-11-15 07:07:11.000000 pydal-20240601.1/tests/contribs.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2279 2023-05-07 23:00:03.000000 pydal-20240601.1/tests/indexes.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    29359 2023-11-15 07:07:11.000000 pydal-20240601.1/tests/is_url_validators.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    99826 2023-11-15 07:07:14.000000 pydal-20240601.1/tests/nosql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    14072 2023-11-15 07:07:11.000000 pydal-20240601.1/tests/restapi.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2552 2024-06-02 03:11:01.000000 pydal-20240601.1/tests/scheduler.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     2529 2024-06-02 03:06:09.000000 pydal-20240601.1/tests/scheduler.py~
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    12552 2023-05-07 23:00:04.000000 pydal-20240601.1/tests/smart_query.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)   137750 2023-11-15 07:07:15.000000 pydal-20240601.1/tests/sql.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)      990 2023-05-07 23:00:04.000000 pydal-20240601.1/tests/tags.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)     5270 2024-05-30 06:37:37.000000 pydal-20240601.1/tests/validation.py
+-rw-r--r--   0 mdipierro  (1000) mdipierro  (1000)    68332 2024-06-02 04:27:52.000000 pydal-20240601.1/tests/validators.py
```

### Comparing `pydal-20240529.1/CHANGES` & `pydal-20240601.1/CHANGES`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/LICENSE.txt` & `pydal-20240601.1/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/PKG-INFO` & `pydal-20240601.1/PKG-INFO`

 * *Files 5% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pydal
-Version: 20240529.1
+Version: 20240601.1
 Summary: pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")
 Author-email: Massimo Di Pierro <massimo.dipierro@gmail.com>
 Project-URL: Homepage, https://github.com/web2py/pydal
 Project-URL: Bug Tracker, https://github.com/web2py/pydal/issues
 Project-URL: Documentation, https://py4web.com/_documentation/static/en/chapter-07.html
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: BSD License
```

### Comparing `pydal-20240529.1/README.md` & `pydal-20240601.1/README.md`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/docs/Makefile` & `pydal-20240601.1/docs/Makefile`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/docs/conf.py` & `pydal-20240601.1/docs/conf.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/docs/index.rst` & `pydal-20240601.1/docs/index.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/docs/pydal.adapters.rst` & `pydal-20240601.1/docs/pydal.adapters.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/docs/pydal.helpers.rst` & `pydal-20240601.1/docs/pydal.helpers.rst`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/_compat.py` & `pydal-20240601.1/pydal/_compat.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/__init__.py` & `pydal-20240601.1/pydal/adapters/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/base.py` & `pydal-20240601.1/pydal/adapters/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/couchdb.py` & `pydal-20240601.1/pydal/adapters/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/db2.py` & `pydal-20240601.1/pydal/adapters/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/firebird.py` & `pydal-20240601.1/pydal/adapters/firebird.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/google.py` & `pydal-20240601.1/pydal/adapters/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/informix.py` & `pydal-20240601.1/pydal/adapters/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/ingres.py` & `pydal-20240601.1/pydal/adapters/ingres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/mongo.py` & `pydal-20240601.1/pydal/adapters/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/mssql.py` & `pydal-20240601.1/pydal/adapters/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/mysql.py` & `pydal-20240601.1/pydal/adapters/mysql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/oracle.py` & `pydal-20240601.1/pydal/adapters/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/postgres.py` & `pydal-20240601.1/pydal/adapters/postgres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/sap.py` & `pydal-20240601.1/pydal/adapters/sap.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/snowflake.py` & `pydal-20240601.1/pydal/adapters/snowflake.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/sqlite.py` & `pydal-20240601.1/pydal/adapters/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/adapters/teradata.py` & `pydal-20240601.1/pydal/adapters/teradata.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/base.py` & `pydal-20240601.1/pydal/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/connection.py` & `pydal-20240601.1/pydal/connection.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/imap_adapter.py` & `pydal-20240601.1/pydal/contrib/imap_adapter.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/ipaddress.py` & `pydal-20240601.1/pydal/contrib/ipaddress.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/mockimaplib.py` & `pydal-20240601.1/pydal/contrib/mockimaplib.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/ordereddict.py` & `pydal-20240601.1/pydal/contrib/ordereddict.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/portalocker.py` & `pydal-20240601.1/pydal/contrib/portalocker.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/contrib/reserved_sql_keywords.py` & `pydal-20240601.1/pydal/contrib/reserved_sql_keywords.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/default_validators.py` & `pydal-20240601.1/pydal/default_validators.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/__init__.py` & `pydal-20240601.1/pydal/dialects/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/base.py` & `pydal-20240601.1/pydal/dialects/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/couchdb.py` & `pydal-20240601.1/pydal/dialects/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/db2.py` & `pydal-20240601.1/pydal/dialects/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/firebird.py` & `pydal-20240601.1/pydal/dialects/firebird.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/google.py` & `pydal-20240601.1/pydal/dialects/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/informix.py` & `pydal-20240601.1/pydal/dialects/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/ingres.py` & `pydal-20240601.1/pydal/dialects/ingres.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/mongo.py` & `pydal-20240601.1/pydal/dialects/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/mssql.py` & `pydal-20240601.1/pydal/dialects/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/mysql.py` & `pydal-20240601.1/pydal/dialects/mysql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/oracle.py` & `pydal-20240601.1/pydal/dialects/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/postgre.py` & `pydal-20240601.1/pydal/dialects/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/sap.py` & `pydal-20240601.1/pydal/dialects/sap.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/snowflake.py` & `pydal-20240601.1/pydal/dialects/snowflake.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/sqlite.py` & `pydal-20240601.1/pydal/dialects/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/dialects/teradata.py` & `pydal-20240601.1/pydal/dialects/teradata.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/drivers.py` & `pydal-20240601.1/pydal/drivers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/_internals.py` & `pydal-20240601.1/pydal/helpers/_internals.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/classes.py` & `pydal-20240601.1/pydal/helpers/classes.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/gae.py` & `pydal-20240601.1/pydal/helpers/gae.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/methods.py` & `pydal-20240601.1/pydal/helpers/methods.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/regex.py` & `pydal-20240601.1/pydal/helpers/regex.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/rest.py` & `pydal-20240601.1/pydal/helpers/rest.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/helpers/serializers.py` & `pydal-20240601.1/pydal/helpers/serializers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/migrator.py` & `pydal-20240601.1/pydal/migrator.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/objects.py` & `pydal-20240601.1/pydal/objects.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/__init__.py` & `pydal-20240601.1/pydal/parsers/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/base.py` & `pydal-20240601.1/pydal/parsers/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/mongo.py` & `pydal-20240601.1/pydal/parsers/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/oracle.py` & `pydal-20240601.1/pydal/parsers/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/postgre.py` & `pydal-20240601.1/pydal/parsers/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/parsers/sqlite.py` & `pydal-20240601.1/pydal/parsers/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/__init__.py` & `pydal-20240601.1/pydal/representers/__init__.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/base.py` & `pydal-20240601.1/pydal/representers/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/couchdb.py` & `pydal-20240601.1/pydal/representers/couchdb.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/db2.py` & `pydal-20240601.1/pydal/representers/db2.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/google.py` & `pydal-20240601.1/pydal/representers/google.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/informix.py` & `pydal-20240601.1/pydal/representers/informix.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/mongo.py` & `pydal-20240601.1/pydal/representers/mongo.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/mssql.py` & `pydal-20240601.1/pydal/representers/mssql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/oracle.py` & `pydal-20240601.1/pydal/representers/oracle.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/postgre.py` & `pydal-20240601.1/pydal/representers/postgre.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/representers/sqlite.py` & `pydal-20240601.1/pydal/representers/sqlite.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/restapi.py` & `pydal-20240601.1/pydal/restapi.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/tools/tags.py` & `pydal-20240601.1/pydal/tools/tags.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/utils.py` & `pydal-20240601.1/pydal/utils.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/pydal/validators.py` & `pydal-20240601.1/pydal/validators.py`

 * *Files 2% similar despite different names*

```diff
@@ -86,9875 +86,9964 @@
 00000550: 4953 545f 4f46 222c 0a20 2020 2022 4953  IST_OF",.    "IS
 00000560: 5f4c 4f57 4552 222c 0a20 2020 2022 4953  _LOWER",.    "IS
 00000570: 5f4d 4154 4348 222c 0a20 2020 2022 4953  _MATCH",.    "IS
 00000580: 5f45 5155 414c 5f54 4f22 2c0a 2020 2020  _EQUAL_TO",.    
 00000590: 2249 535f 4e4f 545f 454d 5054 5922 2c0a  "IS_NOT_EMPTY",.
 000005a0: 2020 2020 2249 535f 4e4f 545f 494e 5f44      "IS_NOT_IN_D
 000005b0: 4222 2c0a 2020 2020 2249 535f 4e55 4c4c  B",.    "IS_NULL
-000005c0: 5f4f 5222 2c0a 2020 2020 2249 535f 534c  _OR",.    "IS_SL
-000005d0: 5547 222c 0a20 2020 2022 4953 5f53 5452  UG",.    "IS_STR
-000005e0: 4f4e 4722 2c0a 2020 2020 2249 535f 5449  ONG",.    "IS_TI
-000005f0: 4d45 222c 0a20 2020 2022 4953 5f55 504c  ME",.    "IS_UPL
-00000600: 4f41 445f 4649 4c45 4e41 4d45 222c 0a20  OAD_FILENAME",. 
-00000610: 2020 2022 4953 5f55 5050 4552 222c 0a20     "IS_UPPER",. 
-00000620: 2020 2022 4953 5f55 524c 222c 0a20 2020     "IS_URL",.   
-00000630: 2022 4953 5f4a 534f 4e22 2c0a 5d0a 0a0a   "IS_JSON",.]...
-00000640: 6465 6620 6f70 7469 6f6e 735f 736f 7274  def options_sort
-00000650: 6572 2878 2c20 7929 3a0a 2020 2020 7265  er(x, y):.    re
-00000660: 7475 726e 2028 7374 7228 785b 315d 292e  turn (str(x[1]).
-00000670: 7570 7065 7228 2920 3e20 7374 7228 795b  upper() > str(y[
-00000680: 315d 292e 7570 7065 7228 2920 616e 6420  1]).upper() and 
-00000690: 3129 206f 7220 2d31 0a0a 0a64 6566 2074  1) or -1...def t
-000006a0: 7261 6e73 6c61 7465 2874 6578 7429 3a0a  ranslate(text):.
-000006b0: 2020 2020 7265 7475 726e 2056 616c 6964      return Valid
-000006c0: 6174 6f72 2e74 7261 6e73 6c61 746f 7228  ator.translator(
-000006d0: 7465 7874 290a 0a0a 636c 6173 7320 5661  text)...class Va
-000006e0: 6c69 6461 7469 6f6e 4572 726f 7228 4578  lidationError(Ex
-000006f0: 6365 7074 696f 6e29 3a0a 2020 2020 6465  ception):.    de
-00000700: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00000710: 206d 6573 7361 6765 293a 0a20 2020 2020   message):.     
-00000720: 2020 2045 7863 6570 7469 6f6e 2e5f 5f69     Exception.__i
-00000730: 6e69 745f 5f28 7365 6c66 2c20 6d65 7373  nit__(self, mess
-00000740: 6167 6529 0a20 2020 2020 2020 2073 656c  age).        sel
-00000750: 662e 6d65 7373 6167 6520 3d20 6d65 7373  f.message = mess
-00000760: 6167 650a 0a0a 636c 6173 7320 5661 6c69  age...class Vali
-00000770: 6461 746f 7228 6f62 6a65 6374 293a 0a20  dator(object):. 
-00000780: 2020 2022 2222 0a20 2020 2052 6f6f 7420     """.    Root 
-00000790: 666f 7220 616c 6c20 7661 6c69 6461 746f  for all validato
-000007a0: 7273 2c20 6d61 696e 6c79 2066 6f72 2064  rs, mainly for d
-000007b0: 6f63 756d 656e 7461 7469 6f6e 2070 7572  ocumentation pur
-000007c0: 706f 7365 732e 0a0a 2020 2020 5661 6c69  poses...    Vali
-000007d0: 6461 746f 7273 2061 7265 2063 6c61 7373  dators are class
-000007e0: 6573 2075 7365 6420 746f 2076 616c 6964  es used to valid
-000007f0: 6174 6520 696e 7075 7420 6669 656c 6473  ate input fields
-00000800: 2028 696e 636c 7564 696e 6720 666f 726d   (including form
-00000810: 730a 2020 2020 6765 6e65 7261 7465 6420  s.    generated 
-00000820: 6672 6f6d 2064 6174 6162 6173 6520 7461  from database ta
-00000830: 626c 6573 292e 0a0a 2020 2020 4865 7265  bles)...    Here
-00000840: 2069 7320 616e 2065 7861 6d70 6c65 206f   is an example o
-00000850: 6620 7573 696e 6720 6120 7661 6c69 6461  f using a valida
-00000860: 746f 7220 7769 7468 2061 2046 4f52 4d3a  tor with a FORM:
-00000870: 3a0a 0a20 2020 2020 2020 2049 4e50 5554  :..        INPUT
-00000880: 285f 6e61 6d65 3d27 6127 2c20 7265 7175  (_name='a', requ
-00000890: 6972 6573 3d49 535f 494e 545f 494e 5f52  ires=IS_INT_IN_R
-000008a0: 414e 4745 2830 2c20 3130 2929 0a0a 2020  ANGE(0, 10))..  
-000008b0: 2020 4865 7265 2069 7320 616e 2065 7861    Here is an exa
-000008c0: 6d70 6c65 206f 6620 686f 7720 746f 2072  mple of how to r
-000008d0: 6571 7569 7265 2061 2076 616c 6964 6174  equire a validat
-000008e0: 6f72 2066 6f72 2061 2074 6162 6c65 2066  or for a table f
-000008f0: 6965 6c64 3a3a 0a0a 2020 2020 2020 2020  ield::..        
-00000900: 6462 2e64 6566 696e 655f 7461 626c 6528  db.define_table(
-00000910: 2770 6572 736f 6e27 2c20 4669 656c 6428  'person', Field(
-00000920: 276e 616d 6527 2929 0a20 2020 2020 2020  'name')).       
-00000930: 2064 622e 7065 7273 6f6e 2e6e 616d 652e   db.person.name.
-00000940: 7265 7175 6972 6573 3d49 535f 4e4f 545f  requires=IS_NOT_
-00000950: 454d 5054 5928 290a 0a20 2020 2056 616c  EMPTY()..    Val
-00000960: 6964 6174 6f72 7320 6172 6520 616c 7761  idators are alwa
-00000970: 7973 2061 7373 6967 6e65 6420 7573 696e  ys assigned usin
-00000980: 6720 7468 6520 7265 7175 6972 6573 2061  g the requires a
-00000990: 7474 7269 6275 7465 206f 6620 6120 6669  ttribute of a fi
-000009a0: 656c 642e 2041 0a20 2020 2066 6965 6c64  eld. A.    field
-000009b0: 2063 616e 2068 6176 6520 6120 7369 6e67   can have a sing
-000009c0: 6c65 2076 616c 6964 6174 6f72 206f 7220  le validator or 
-000009d0: 6d75 6c74 6970 6c65 2076 616c 6964 6174  multiple validat
-000009e0: 6f72 732e 204d 756c 7469 706c 650a 2020  ors. Multiple.  
-000009f0: 2020 7661 6c69 6461 746f 7273 2061 7265    validators are
-00000a00: 206d 6164 6520 7061 7274 206f 6620 6120   made part of a 
-00000a10: 6c69 7374 3a3a 0a0a 2020 2020 2020 2020  list::..        
-00000a20: 6462 2e70 6572 736f 6e2e 6e61 6d65 2e72  db.person.name.r
-00000a30: 6571 7569 7265 733d 5b49 535f 4e4f 545f  equires=[IS_NOT_
-00000a40: 454d 5054 5928 292c 2049 535f 4e4f 545f  EMPTY(), IS_NOT_
-00000a50: 494e 5f44 4228 6462 2c20 2770 6572 736f  IN_DB(db, 'perso
-00000a60: 6e2e 6964 2729 5d0a 0a20 2020 2056 616c  n.id')]..    Val
-00000a70: 6964 6174 6f72 7320 6172 6520 6361 6c6c  idators are call
-00000a80: 6564 2062 7920 7468 6520 6675 6e63 7469  ed by the functi
-00000a90: 6f6e 2061 6363 6570 7473 206f 6e20 6120  on accepts on a 
-00000aa0: 464f 524d 206f 7220 6f74 6865 7220 4854  FORM or other HT
-00000ab0: 4d4c 0a20 2020 2068 656c 7065 7220 6f62  ML.    helper ob
-00000ac0: 6a65 6374 2074 6861 7420 636f 6e74 6169  ject that contai
-00000ad0: 6e73 2061 2066 6f72 6d2e 2054 6865 7920  ns a form. They 
-00000ae0: 6172 6520 616c 7761 7973 2063 616c 6c65  are always calle
-00000af0: 6420 696e 2074 6865 206f 7264 6572 2069  d in the order i
-00000b00: 6e0a 2020 2020 7768 6963 6820 7468 6579  n.    which they
-00000b10: 2061 7265 206c 6973 7465 642e 0a0a 2020   are listed...  
-00000b20: 2020 4275 696c 742d 696e 2076 616c 6964    Built-in valid
-00000b30: 6174 6f72 7320 6861 7665 2063 6f6e 7374  ators have const
-00000b40: 7275 6374 6f72 7320 7468 6174 2074 616b  ructors that tak
-00000b50: 6520 7468 6520 6f70 7469 6f6e 616c 2061  e the optional a
-00000b60: 7267 756d 656e 7420 6572 726f 720a 2020  rgument error.  
-00000b70: 2020 6d65 7373 6167 6520 7768 6963 6820    message which 
-00000b80: 616c 6c6f 7773 2079 6f75 2074 6f20 6368  allows you to ch
-00000b90: 616e 6765 2074 6865 2064 6566 6175 6c74  ange the default
-00000ba0: 2065 7272 6f72 206d 6573 7361 6765 2e0a   error message..
-00000bb0: 2020 2020 4865 7265 2069 7320 616e 2065      Here is an e
-00000bc0: 7861 6d70 6c65 206f 6620 6120 7661 6c69  xample of a vali
-00000bd0: 6461 746f 7220 6f6e 2061 2064 6174 6162  dator on a datab
-00000be0: 6173 6520 7461 626c 653a 3a0a 0a20 2020  ase table::..   
-00000bf0: 2020 2020 2064 622e 7065 7273 6f6e 2e6e       db.person.n
-00000c00: 616d 652e 7265 7175 6972 6573 3d49 535f  ame.requires=IS_
-00000c10: 4e4f 545f 454d 5054 5928 6572 726f 725f  NOT_EMPTY(error_
-00000c20: 6d65 7373 6167 653d 5428 2746 696c 6c20  message=T('Fill 
-00000c30: 7468 6973 2729 290a 0a20 2020 2077 6865  this'))..    whe
-00000c40: 7265 2077 6520 6861 7665 2075 7365 6420  re we have used 
-00000c50: 7468 6520 7472 616e 736c 6174 696f 6e20  the translation 
-00000c60: 6f70 6572 6174 6f72 2054 2074 6f20 616c  operator T to al
-00000c70: 6c6f 7720 666f 720a 2020 2020 696e 7465  low for.    inte
-00000c80: 726e 6174 696f 6e61 6c69 7a61 7469 6f6e  rnationalization
-00000c90: 2e0a 0a20 2020 204e 6f74 6963 6520 7468  ...    Notice th
-00000ca0: 6174 2064 6566 6175 6c74 2065 7272 6f72  at default error
-00000cb0: 206d 6573 7361 6765 7320 6172 6520 6e6f   messages are no
-00000cc0: 7420 7472 616e 736c 6174 6564 2e0a 2020  t translated..  
-00000cd0: 2020 2222 220a 0a20 2020 2074 7261 6e73    """..    trans
-00000ce0: 6c61 746f 7220 3d20 7374 6174 6963 6d65  lator = staticme
-00000cf0: 7468 6f64 286c 616d 6264 6120 7465 7874  thod(lambda text
-00000d00: 3a20 7465 7874 290a 0a20 2020 2064 6566  : text)..    def
-00000d10: 2066 6f72 6d61 7474 6572 2873 656c 662c   formatter(self,
-00000d20: 2076 616c 7565 293a 0a20 2020 2020 2020   value):.       
-00000d30: 2022 2222 0a20 2020 2020 2020 2046 6f72   """.        For
-00000d40: 2073 6f6d 6520 7661 6c69 6461 746f 7273   some validators
-00000d50: 2072 6574 7572 6e73 2061 2066 6f72 6d61   returns a forma
-00000d60: 7474 6564 2076 6572 7369 6f6e 2028 6d61  tted version (ma
-00000d70: 7463 6869 6e67 2074 6865 2076 616c 6964  tching the valid
-00000d80: 6174 6f72 290a 2020 2020 2020 2020 6f66  ator).        of
-00000d90: 2076 616c 7565 2e20 4f74 6865 7277 6973   value. Otherwis
-00000da0: 6520 6a75 7374 2072 6574 7572 6e73 2074  e just returns t
-00000db0: 6865 2076 616c 7565 2e0a 2020 2020 2020  he value..      
-00000dc0: 2020 2222 220a 2020 2020 2020 2020 7265    """.        re
-00000dd0: 7475 726e 2076 616c 7565 0a0a 2020 2020  turn value..    
-00000de0: 4073 7461 7469 636d 6574 686f 640a 2020  @staticmethod.  
-00000df0: 2020 6465 6620 7661 6c69 6461 7465 2876    def validate(v
-00000e00: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00000e10: 4e6f 6e65 293a 0a20 2020 2020 2020 2072  None):.        r
-00000e20: 6169 7365 204e 6f74 496d 706c 656d 656e  aise NotImplemen
-00000e30: 7465 6445 7272 6f72 0a0a 2020 2020 6465  tedError..    de
-00000e40: 6620 5f5f 6361 6c6c 5f5f 2873 656c 662c  f __call__(self,
-00000e50: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
-00000e60: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
-00000e70: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00000e80: 2020 7265 7475 726e 2073 656c 662e 7661    return self.va
-00000e90: 6c69 6461 7465 2876 616c 7565 2c20 7265  lidate(value, re
-00000ea0: 636f 7264 5f69 6429 2c20 4e6f 6e65 0a20  cord_id), None. 
-00000eb0: 2020 2020 2020 2065 7863 6570 7420 5661         except Va
-00000ec0: 6c69 6461 7469 6f6e 4572 726f 7220 6173  lidationError as
-00000ed0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-00000ee0: 7265 7475 726e 2076 616c 7565 2c20 652e  return value, e.
-00000ef0: 6d65 7373 6167 650a 0a0a 6465 6620 7661  message...def va
-00000f00: 6c69 6461 746f 725f 6361 6c6c 6572 2866  lidator_caller(f
-00000f10: 756e 632c 2076 616c 7565 2c20 7265 636f  unc, value, reco
-00000f20: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00000f30: 2076 616c 6964 6174 6520 3d20 6765 7461   validate = geta
-00000f40: 7474 7228 6675 6e63 2c20 2276 616c 6964  ttr(func, "valid
-00000f50: 6174 6522 2c20 4e6f 6e65 290a 2020 2020  ate", None).    
-00000f60: 6966 2076 616c 6964 6174 6520 616e 6420  if validate and 
-00000f70: 7661 6c69 6461 7465 2069 7320 6e6f 7420  validate is not 
-00000f80: 5661 6c69 6461 746f 722e 7661 6c69 6461  Validator.valida
-00000f90: 7465 3a0a 2020 2020 2020 2020 7265 7475  te:.        retu
-00000fa0: 726e 2076 616c 6964 6174 6528 7661 6c75  rn validate(valu
-00000fb0: 652c 2072 6563 6f72 645f 6964 290a 2020  e, record_id).  
-00000fc0: 2020 7661 6c75 652c 2065 7272 6f72 203d    value, error =
-00000fd0: 2066 756e 6328 7661 6c75 6529 0a20 2020   func(value).   
-00000fe0: 2069 6620 6572 726f 7220 6973 206e 6f74   if error is not
-00000ff0: 204e 6f6e 653a 0a20 2020 2020 2020 2072   None:.        r
-00001000: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00001010: 7272 6f72 2865 7272 6f72 290a 2020 2020  rror(error).    
-00001020: 7265 7475 726e 2076 616c 7565 0a0a 0a63  return value...c
-00001030: 6c61 7373 2049 535f 4d41 5443 4828 5661  lass IS_MATCH(Va
-00001040: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
-00001050: 220a 2020 2020 4578 616d 706c 653a 0a20  ".    Example:. 
-00001060: 2020 2020 2020 2055 7365 6420 6173 3a3a         Used as::
-00001070: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-00001080: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
-00001090: 2c20 5f6e 616d 653d 276e 616d 6527 2c20  , _name='name', 
-000010a0: 7265 7175 6972 6573 3d49 535f 4d41 5443  requires=IS_MATC
-000010b0: 4828 272e 2b27 2929 0a0a 2020 2020 5468  H('.+'))..    Th
-000010c0: 6520 6172 6775 6d65 6e74 206f 6620 4953  e argument of IS
-000010d0: 5f4d 4154 4348 2069 7320 6120 7265 6775  _MATCH is a regu
-000010e0: 6c61 7220 6578 7072 6573 7369 6f6e 3a3a  lar expression::
-000010f0: 0a0a 2020 2020 2020 2020 3e3e 3e20 4953  ..        >>> IS
-00001100: 5f4d 4154 4348 2827 2e2b 2729 2827 6865  _MATCH('.+')('he
-00001110: 6c6c 6f27 290a 2020 2020 2020 2020 2827  llo').        ('
-00001120: 6865 6c6c 6f27 2c20 4e6f 6e65 290a 0a20  hello', None).. 
-00001130: 2020 2020 2020 203e 3e3e 2049 535f 4d41         >>> IS_MA
-00001140: 5443 4828 2768 656c 6c27 2928 2768 656c  TCH('hell')('hel
-00001150: 6c6f 2729 0a20 2020 2020 2020 2028 2768  lo').        ('h
-00001160: 656c 6c6f 272c 204e 6f6e 6529 0a0a 2020  ello', None)..  
-00001170: 2020 2020 2020 3e3e 3e20 4953 5f4d 4154        >>> IS_MAT
-00001180: 4348 2827 6865 6c6c 2e2a 272c 2073 7472  CH('hell.*', str
-00001190: 6963 743d 4661 6c73 6529 2827 6865 6c6c  ict=False)('hell
-000011a0: 6f27 290a 2020 2020 2020 2020 2827 6865  o').        ('he
-000011b0: 6c6c 6f27 2c20 4e6f 6e65 290a 0a20 2020  llo', None)..   
-000011c0: 2020 2020 203e 3e3e 2049 535f 4d41 5443       >>> IS_MATC
-000011d0: 4828 2768 656c 6c6f 2729 2827 7368 656c  H('hello')('shel
-000011e0: 6c6f 2729 0a20 2020 2020 2020 2028 2773  lo').        ('s
-000011f0: 6865 6c6c 6f27 2c20 2769 6e76 616c 6964  hello', 'invalid
-00001200: 2065 7870 7265 7373 696f 6e27 290a 0a20   expression').. 
-00001210: 2020 2020 2020 203e 3e3e 2049 535f 4d41         >>> IS_MA
-00001220: 5443 4828 2768 656c 6c6f 272c 2073 6561  TCH('hello', sea
-00001230: 7263 683d 5472 7565 2928 2773 6865 6c6c  rch=True)('shell
-00001240: 6f27 290a 2020 2020 2020 2020 2827 7368  o').        ('sh
-00001250: 656c 6c6f 272c 204e 6f6e 6529 0a0a 2020  ello', None)..  
-00001260: 2020 2020 2020 3e3e 3e20 4953 5f4d 4154        >>> IS_MAT
-00001270: 4348 2827 6865 6c6c 6f27 2c20 7365 6172  CH('hello', sear
-00001280: 6368 3d54 7275 652c 2073 7472 6963 743d  ch=True, strict=
-00001290: 4661 6c73 6529 2827 7368 656c 6c6f 7827  False)('shellox'
-000012a0: 290a 2020 2020 2020 2020 2827 7368 656c  ).        ('shel
-000012b0: 6c6f 7827 2c20 4e6f 6e65 290a 0a20 2020  lox', None)..   
-000012c0: 2020 2020 203e 3e3e 2049 535f 4d41 5443       >>> IS_MATC
-000012d0: 4828 272e 2a68 656c 6c6f 2e2a 272c 2073  H('.*hello.*', s
-000012e0: 6561 7263 683d 5472 7565 2c20 7374 7269  earch=True, stri
-000012f0: 6374 3d46 616c 7365 2928 2773 6865 6c6c  ct=False)('shell
-00001300: 6f78 2729 0a20 2020 2020 2020 2028 2773  ox').        ('s
-00001310: 6865 6c6c 6f78 272c 204e 6f6e 6529 0a0a  hellox', None)..
-00001320: 2020 2020 2020 2020 3e3e 3e20 4953 5f4d          >>> IS_M
-00001330: 4154 4348 2827 2e2b 2729 2827 2729 0a20  ATCH('.+')(''). 
-00001340: 2020 2020 2020 2028 2727 2c20 2769 6e76         ('', 'inv
-00001350: 616c 6964 2065 7870 7265 7373 696f 6e27  alid expression'
-00001360: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
-00001370: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-00001380: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00001390: 2020 2020 6578 7072 6573 7369 6f6e 2c0a      expression,.
-000013a0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-000013b0: 7373 6167 653d 2249 6e76 616c 6964 2065  ssage="Invalid e
-000013c0: 7870 7265 7373 696f 6e22 2c0a 2020 2020  xpression",.    
-000013d0: 2020 2020 7374 7269 6374 3d46 616c 7365      strict=False
-000013e0: 2c0a 2020 2020 2020 2020 7365 6172 6368  ,.        search
-000013f0: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00001400: 6578 7472 6163 743d 4661 6c73 652c 0a20  extract=False,. 
-00001410: 2020 2020 2020 2069 735f 756e 6963 6f64         is_unicod
-00001420: 653d 4661 6c73 652c 0a20 2020 2029 3a0a  e=False,.    ):.
-00001430: 2020 2020 2020 2020 6966 2073 7472 6963          if stric
-00001440: 7420 6f72 206e 6f74 2073 6561 7263 683a  t or not search:
-00001450: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00001460: 6e6f 7420 6578 7072 6573 7369 6f6e 2e73  not expression.s
-00001470: 7461 7274 7377 6974 6828 225e 2229 3a0a  tartswith("^"):.
-00001480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001490: 6578 7072 6573 7369 6f6e 203d 2022 5e28  expression = "^(
-000014a0: 2573 2922 2025 2065 7870 7265 7373 696f  %s)" % expressio
-000014b0: 6e0a 2020 2020 2020 2020 6966 2073 7472  n.        if str
-000014c0: 6963 743a 0a20 2020 2020 2020 2020 2020  ict:.           
-000014d0: 2069 6620 6e6f 7420 6578 7072 6573 7369   if not expressi
-000014e0: 6f6e 2e65 6e64 7377 6974 6828 2224 2229  on.endswith("$")
-000014f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00001500: 2020 6578 7072 6573 7369 6f6e 203d 2022    expression = "
-00001510: 2825 7329 2422 2025 2065 7870 7265 7373  (%s)$" % express
-00001520: 696f 6e0a 2020 2020 2020 2020 6966 2069  ion.        if i
-00001530: 735f 756e 6963 6f64 653a 0a20 2020 2020  s_unicode:.     
-00001540: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-00001550: 696e 7374 616e 6365 2865 7870 7265 7373  instance(express
-00001560: 696f 6e2c 2075 6e69 636f 6465 5429 3a0a  ion, unicodeT):.
-00001570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001580: 6578 7072 6573 7369 6f6e 203d 2065 7870  expression = exp
-00001590: 7265 7373 696f 6e2e 6465 636f 6465 2822  ression.decode("
-000015a0: 7574 6638 2229 0a20 2020 2020 2020 2020  utf8").         
-000015b0: 2020 2073 656c 662e 7265 6765 7820 3d20     self.regex = 
-000015c0: 7265 2e63 6f6d 7069 6c65 2865 7870 7265  re.compile(expre
-000015d0: 7373 696f 6e2c 2072 652e 554e 4943 4f44  ssion, re.UNICOD
-000015e0: 4529 0a20 2020 2020 2020 2065 6c73 653a  E).        else:
-000015f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00001600: 662e 7265 6765 7820 3d20 7265 2e63 6f6d  f.regex = re.com
-00001610: 7069 6c65 2865 7870 7265 7373 696f 6e29  pile(expression)
-00001620: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
-00001630: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
-00001640: 726f 725f 6d65 7373 6167 650a 2020 2020  ror_message.    
-00001650: 2020 2020 7365 6c66 2e65 7874 7261 6374      self.extract
-00001660: 203d 2065 7874 7261 6374 0a20 2020 2020   = extract.     
-00001670: 2020 2073 656c 662e 6973 5f75 6e69 636f     self.is_unico
-00001680: 6465 203d 2069 735f 756e 6963 6f64 6520  de = is_unicode 
-00001690: 6f72 206e 6f74 2050 5932 0a0a 2020 2020  or not PY2..    
-000016a0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-000016b0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-000016c0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-000016d0: 2020 2069 6620 6e6f 7420 5059 323a 2020     if not PY2:  
-000016e0: 2320 5059 3320 636f 6e76 6572 7420 6279  # PY3 convert by
-000016f0: 7465 7320 746f 2075 6e69 636f 6465 0a20  tes to unicode. 
-00001700: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00001710: 203d 2074 6f5f 756e 6963 6f64 6528 7661   = to_unicode(va
-00001720: 6c75 6529 0a0a 2020 2020 2020 2020 6966  lue)..        if
-00001730: 2073 656c 662e 6973 5f75 6e69 636f 6465   self.is_unicode
-00001740: 206f 7220 6e6f 7420 5059 323a 0a20 2020   or not PY2:.   
-00001750: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00001760: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
-00001770: 2c20 756e 6963 6f64 6554 293a 0a20 2020  , unicodeT):.   
-00001780: 2020 2020 2020 2020 2020 2020 206d 6174               mat
-00001790: 6368 203d 2073 656c 662e 7265 6765 782e  ch = self.regex.
-000017a0: 7365 6172 6368 2873 7472 2876 616c 7565  search(str(value
-000017b0: 292e 6465 636f 6465 2822 7574 6638 2229  ).decode("utf8")
-000017c0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-000017d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000017e0: 2020 2020 6d61 7463 6820 3d20 7365 6c66      match = self
-000017f0: 2e72 6567 6578 2e73 6561 7263 6828 7661  .regex.search(va
-00001800: 6c75 6529 0a20 2020 2020 2020 2065 6c73  lue).        els
-00001810: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00001820: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-00001830: 2876 616c 7565 2c20 756e 6963 6f64 6554  (value, unicodeT
-00001840: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00001850: 2020 206d 6174 6368 203d 2073 656c 662e     match = self.
-00001860: 7265 6765 782e 7365 6172 6368 2873 7472  regex.search(str
-00001870: 2876 616c 7565 2929 0a20 2020 2020 2020  (value)).       
-00001880: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00001890: 2020 2020 2020 2020 2020 206d 6174 6368             match
-000018a0: 203d 2073 656c 662e 7265 6765 782e 7365   = self.regex.se
-000018b0: 6172 6368 2876 616c 7565 2e65 6e63 6f64  arch(value.encod
-000018c0: 6528 2275 7466 3822 2929 0a20 2020 2020  e("utf8")).     
-000018d0: 2020 2069 6620 6d61 7463 6820 6973 206e     if match is n
-000018e0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000018f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00001900: 2e65 7874 7261 6374 2061 6e64 206d 6174  .extract and mat
-00001910: 6368 2e67 726f 7570 2829 206f 7220 7661  ch.group() or va
-00001920: 6c75 650a 2020 2020 2020 2020 7261 6973  lue.        rais
-00001930: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-00001940: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-00001950: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-00001960: 7361 6765 2929 0a0a 0a63 6c61 7373 2049  sage))...class I
-00001970: 535f 4551 5541 4c5f 544f 2856 616c 6964  S_EQUAL_TO(Valid
-00001980: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
-00001990: 2020 2045 7861 6d70 6c65 3a0a 2020 2020     Example:.    
-000019a0: 2020 2020 5573 6564 2061 733a 3a0a 0a20      Used as::.. 
-000019b0: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-000019c0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-000019d0: 6e61 6d65 3d27 7061 7373 776f 7264 2729  name='password')
-000019e0: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-000019f0: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-00001a00: 205f 6e61 6d65 3d27 7061 7373 776f 7264   _name='password
-00001a10: 3227 2c0a 2020 2020 2020 2020 2020 2020  2',.            
-00001a20: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
-00001a30: 535f 4551 5541 4c5f 544f 2872 6571 7565  S_EQUAL_TO(reque
-00001a40: 7374 2e76 6172 732e 7061 7373 776f 7264  st.vars.password
-00001a50: 2929 0a0a 2020 2020 5468 6520 6172 6775  ))..    The argu
-00001a60: 6d65 6e74 206f 6620 4953 5f45 5155 414c  ment of IS_EQUAL
-00001a70: 5f54 4f20 6973 2061 2073 7472 696e 673a  _TO is a string:
-00001a80: 3a0a 0a20 2020 2020 2020 203e 3e3e 2049  :..        >>> I
-00001a90: 535f 4551 5541 4c5f 544f 2827 6161 6127  S_EQUAL_TO('aaa'
-00001aa0: 2928 2761 6161 2729 0a20 2020 2020 2020  )('aaa').       
-00001ab0: 2028 2761 6161 272c 204e 6f6e 6529 0a0a   ('aaa', None)..
-00001ac0: 2020 2020 2020 2020 3e3e 3e20 4953 5f45          >>> IS_E
-00001ad0: 5155 414c 5f54 4f28 2761 6161 2729 2827  QUAL_TO('aaa')('
-00001ae0: 6161 6227 290a 2020 2020 2020 2020 2827  aab').        ('
-00001af0: 6161 6227 2c20 276e 6f20 6d61 7463 6827  aab', 'no match'
-00001b00: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
-00001b10: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00001b20: 662c 2065 7870 7265 7373 696f 6e2c 2065  f, expression, e
-00001b30: 7272 6f72 5f6d 6573 7361 6765 3d22 4e6f  rror_message="No
-00001b40: 206d 6174 6368 2229 3a0a 2020 2020 2020   match"):.      
-00001b50: 2020 7365 6c66 2e65 7870 7265 7373 696f    self.expressio
-00001b60: 6e20 3d20 6578 7072 6573 7369 6f6e 0a20  n = expression. 
-00001b70: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-00001b80: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
-00001b90: 725f 6d65 7373 6167 650a 0a20 2020 2064  r_message..    d
-00001ba0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-00001bb0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-00001bc0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-00001bd0: 2020 6966 2076 616c 7565 2021 3d20 7365    if value != se
-00001be0: 6c66 2e65 7870 7265 7373 696f 6e3a 0a20  lf.expression:. 
-00001bf0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00001c00: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00001c10: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-00001c20: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00001c30: 6167 6529 290a 2020 2020 2020 2020 7265  age)).        re
-00001c40: 7475 726e 2076 616c 7565 0a0a 0a63 6c61  turn value...cla
-00001c50: 7373 2049 535f 4558 5052 2856 616c 6964  ss IS_EXPR(Valid
-00001c60: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
-00001c70: 2020 2045 7861 6d70 6c65 3a0a 2020 2020     Example:.    
-00001c80: 2020 2020 5573 6564 2061 733a 3a0a 0a20      Used as::.. 
-00001c90: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-00001ca0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-00001cb0: 6e61 6d65 3d27 6e61 6d65 272c 0a20 2020  name='name',.   
-00001cc0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00001cd0: 7569 7265 733d 4953 5f45 5850 5228 2735  uires=IS_EXPR('5
-00001ce0: 203c 2069 6e74 2876 616c 7565 2920 3c20   < int(value) < 
-00001cf0: 3130 2729 290a 0a20 2020 2054 6865 2061  10'))..    The a
-00001d00: 7267 756d 656e 7420 6f66 2049 535f 4558  rgument of IS_EX
-00001d10: 5052 206d 7573 7420 6265 2070 7974 686f  PR must be pytho
-00001d20: 6e20 636f 6e64 6974 696f 6e3a 3a0a 0a20  n condition::.. 
-00001d30: 2020 2020 2020 203e 3e3e 2049 535f 4558         >>> IS_EX
-00001d40: 5052 2827 696e 7428 7661 6c75 6529 203c  PR('int(value) <
-00001d50: 2032 2729 2827 3127 290a 2020 2020 2020   2')('1').      
-00001d60: 2020 2827 3127 2c20 4e6f 6e65 290a 0a20    ('1', None).. 
-00001d70: 2020 2020 2020 203e 3e3e 2049 535f 4558         >>> IS_EX
-00001d80: 5052 2827 696e 7428 7661 6c75 6529 203c  PR('int(value) <
-00001d90: 2032 2729 2827 3227 290a 2020 2020 2020   2')('2').      
-00001da0: 2020 2827 3227 2c20 2769 6e76 616c 6964    ('2', 'invalid
-00001db0: 2065 7870 7265 7373 696f 6e27 290a 0a20   expression').. 
-00001dc0: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
-00001dd0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
-00001de0: 2020 7365 6c66 2c20 6578 7072 6573 7369    self, expressi
-00001df0: 6f6e 2c20 6572 726f 725f 6d65 7373 6167  on, error_messag
-00001e00: 653d 2249 6e76 616c 6964 2065 7870 7265  e="Invalid expre
-00001e10: 7373 696f 6e22 2c20 656e 7669 726f 6e6d  ssion", environm
-00001e20: 656e 743d 4e6f 6e65 0a20 2020 2029 3a0a  ent=None.    ):.
-00001e30: 2020 2020 2020 2020 7365 6c66 2e65 7870          self.exp
-00001e40: 7265 7373 696f 6e20 3d20 6578 7072 6573  ression = expres
-00001e50: 7369 6f6e 0a20 2020 2020 2020 2073 656c  sion.        sel
-00001e60: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
-00001e70: 3d20 6572 726f 725f 6d65 7373 6167 650a  = error_message.
-00001e80: 2020 2020 2020 2020 7365 6c66 2e65 6e76          self.env
-00001e90: 6972 6f6e 6d65 6e74 203d 2065 6e76 6972  ironment = envir
-00001ea0: 6f6e 6d65 6e74 206f 7220 7b7d 0a0a 2020  onment or {}..  
-00001eb0: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00001ec0: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00001ed0: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00001ee0: 2020 2020 2069 6620 6361 6c6c 6162 6c65       if callable
-00001ef0: 2873 656c 662e 6578 7072 6573 7369 6f6e  (self.expression
-00001f00: 293a 0a20 2020 2020 2020 2020 2020 206d  ):.            m
-00001f10: 6573 7361 6765 203d 2073 656c 662e 6578  essage = self.ex
-00001f20: 7072 6573 7369 6f6e 2876 616c 7565 290a  pression(value).
-00001f30: 2020 2020 2020 2020 2020 2020 6966 206d              if m
-00001f40: 6573 7361 6765 3a0a 2020 2020 2020 2020  essage:.        
-00001f50: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00001f60: 6c69 6461 7469 6f6e 4572 726f 7228 6d65  lidationError(me
-00001f70: 7373 6167 6529 0a20 2020 2020 2020 2020  ssage).         
-00001f80: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
-00001f90: 2020 2020 2020 2020 2320 666f 7220 6261          # for ba
-00001fa0: 636b 7761 7264 2063 6f6d 7061 7469 6269  ckward compatibi
-00001fb0: 6c69 7479 0a20 2020 2020 2020 2073 656c  lity.        sel
-00001fc0: 662e 656e 7669 726f 6e6d 656e 742e 7570  f.environment.up
-00001fd0: 6461 7465 2876 616c 7565 3d76 616c 7565  date(value=value
-00001fe0: 290a 2020 2020 2020 2020 6578 6563 2822  ).        exec("
-00001ff0: 5f5f 7265 745f 5f3d 2220 2b20 7365 6c66  __ret__=" + self
-00002000: 2e65 7870 7265 7373 696f 6e2c 2073 656c  .expression, sel
-00002010: 662e 656e 7669 726f 6e6d 656e 7429 0a20  f.environment). 
-00002020: 2020 2020 2020 2069 6620 7365 6c66 2e65         if self.e
-00002030: 6e76 6972 6f6e 6d65 6e74 5b22 5f5f 7265  nvironment["__re
-00002040: 745f 5f22 5d3a 0a20 2020 2020 2020 2020  t__"]:.         
-00002050: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
-00002060: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00002070: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
-00002080: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
-00002090: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-000020a0: 2929 0a0a 0a63 6c61 7373 2049 535f 4c45  ))...class IS_LE
-000020b0: 4e47 5448 2856 616c 6964 6174 6f72 293a  NGTH(Validator):
-000020c0: 0a20 2020 2022 2222 0a20 2020 2043 6865  .    """.    Che
-000020d0: 636b 7320 6966 206c 656e 6774 6820 6f66  cks if length of
-000020e0: 2066 6965 6c64 2773 2076 616c 7565 2066   field's value f
-000020f0: 6974 7320 6265 7477 6565 6e20 6769 7665  its between give
-00002100: 6e20 626f 756e 6461 7269 6573 2e20 576f  n boundaries. Wo
-00002110: 726b 730a 2020 2020 666f 7220 626f 7468  rks.    for both
-00002120: 2074 6578 7420 616e 6420 6669 6c65 2069   text and file i
-00002130: 6e70 7574 732e 0a0a 2020 2020 4172 6773  nputs...    Args
-00002140: 3a0a 2020 2020 2020 2020 6d61 7873 697a  :.        maxsiz
-00002150: 653a 206d 6178 696d 756d 2061 6c6c 6f77  e: maximum allow
-00002160: 6564 206c 656e 6774 6820 2f20 7369 7a65  ed length / size
-00002170: 0a20 2020 2020 2020 206d 696e 7369 7a65  .        minsize
-00002180: 3a20 6d69 6e69 6d75 6d20 616c 6c6f 7765  : minimum allowe
-00002190: 6420 6c65 6e67 7468 202f 2073 697a 650a  d length / size.
-000021a0: 0a20 2020 2045 7861 6d70 6c65 733a 0a20  .    Examples:. 
-000021b0: 2020 2020 2020 2043 6865 636b 2069 6620         Check if 
-000021c0: 7465 7874 2073 7472 696e 6720 6973 2073  text string is s
-000021d0: 686f 7274 6572 2074 6861 6e20 3333 2063  horter than 33 c
-000021e0: 6861 7261 6374 6572 733a 3a0a 0a20 2020  haracters::..   
-000021f0: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
-00002200: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
-00002210: 6d65 3d27 6e61 6d65 272c 2072 6571 7569  me='name', requi
-00002220: 7265 733d 4953 5f4c 454e 4754 4828 3332  res=IS_LENGTH(32
-00002230: 2929 0a0a 2020 2020 2020 2020 4368 6563  ))..        Chec
-00002240: 6b20 6966 2070 6173 7377 6f72 6420 7374  k if password st
-00002250: 7269 6e67 2069 7320 6c6f 6e67 6572 2074  ring is longer t
-00002260: 6861 6e20 3520 6368 6172 6163 7465 7273  han 5 characters
-00002270: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
-00002280: 494e 5055 5428 5f74 7970 653d 2770 6173  INPUT(_type='pas
-00002290: 7377 6f72 6427 2c20 5f6e 616d 653d 276e  sword', _name='n
-000022a0: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
-000022b0: 535f 4c45 4e47 5448 286d 696e 7369 7a65  S_LENGTH(minsize
-000022c0: 3d36 2929 0a0a 2020 2020 2020 2020 4368  =6))..        Ch
-000022d0: 6563 6b20 6966 2075 706c 6f61 6465 6420  eck if uploaded 
-000022e0: 6669 6c65 2068 6173 2073 697a 6520 6265  file has size be
-000022f0: 7477 6565 6e20 314b 4220 616e 6420 314d  tween 1KB and 1M
-00002300: 423a 3a0a 0a20 2020 2020 2020 2020 2020  B::..           
-00002310: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
-00002320: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
-00002330: 272c 2072 6571 7569 7265 733d 4953 5f4c  ', requires=IS_L
-00002340: 454e 4754 4828 3130 3438 3537 362c 2031  ENGTH(1048576, 1
-00002350: 3032 3429 290a 0a20 2020 2020 2020 204f  024))..        O
-00002360: 7468 6572 2065 7861 6d70 6c65 733a 3a0a  ther examples::.
-00002370: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00002380: 2049 535f 4c45 4e47 5448 2829 2827 2729   IS_LENGTH()('')
-00002390: 0a20 2020 2020 2020 2020 2020 2028 2727  .            (''
-000023a0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-000023b0: 2020 2020 3e3e 3e20 4953 5f4c 454e 4754      >>> IS_LENGT
-000023c0: 4828 2928 2731 3233 3435 3637 3839 3027  H()('1234567890'
-000023d0: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-000023e0: 3132 3334 3536 3738 3930 272c 204e 6f6e  1234567890', Non
-000023f0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00002400: 3e3e 2049 535f 4c45 4e47 5448 286d 6178  >> IS_LENGTH(max
-00002410: 7369 7a65 3d35 2c20 6d69 6e73 697a 653d  size=5, minsize=
-00002420: 3029 2827 3132 3334 3536 3738 3930 2729  0)('1234567890')
-00002430: 2020 2320 746f 6f20 6c6f 6e67 0a20 2020    # too long.   
-00002440: 2020 2020 2020 2020 2028 2731 3233 3435           ('12345
-00002450: 3637 3839 3027 2c20 2765 6e74 6572 2066  67890', 'enter f
-00002460: 726f 6d20 3020 746f 2035 2063 6861 7261  rom 0 to 5 chara
-00002470: 6374 6572 7327 290a 2020 2020 2020 2020  cters').        
-00002480: 2020 2020 3e3e 3e20 4953 5f4c 454e 4754      >>> IS_LENGT
-00002490: 4828 6d61 7873 697a 653d 3530 2c20 6d69  H(maxsize=50, mi
-000024a0: 6e73 697a 653d 3230 2928 2731 3233 3435  nsize=20)('12345
-000024b0: 3637 3839 3027 2920 2023 2074 6f6f 2073  67890')  # too s
-000024c0: 686f 7274 0a20 2020 2020 2020 2020 2020  hort.           
-000024d0: 2028 2731 3233 3435 3637 3839 3027 2c20   ('1234567890', 
-000024e0: 2765 6e74 6572 2066 726f 6d20 3230 2074  'enter from 20 t
-000024f0: 6f20 3530 2063 6861 7261 6374 6572 7327  o 50 characters'
-00002500: 290a 2020 2020 2222 220a 0a20 2020 2064  ).    """..    d
-00002510: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-00002520: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00002530: 2020 206d 6178 7369 7a65 3d32 3535 2c0a     maxsize=255,.
-00002540: 2020 2020 2020 2020 6d69 6e73 697a 653d          minsize=
-00002550: 302c 0a20 2020 2020 2020 2065 7272 6f72  0,.        error
-00002560: 5f6d 6573 7361 6765 3d22 456e 7465 7220  _message="Enter 
-00002570: 6672 6f6d 2025 286d 696e 2967 2074 6f20  from %(min)g to 
-00002580: 2528 6d61 7829 6720 6368 6172 6163 7465  %(max)g characte
-00002590: 7273 222c 0a20 2020 2029 3a0a 2020 2020  rs",.    ):.    
-000025a0: 2020 2020 7365 6c66 2e6d 6178 7369 7a65      self.maxsize
-000025b0: 203d 206d 6178 7369 7a65 0a20 2020 2020   = maxsize.     
-000025c0: 2020 2073 656c 662e 6d69 6e73 697a 6520     self.minsize 
-000025d0: 3d20 6d69 6e73 697a 650a 2020 2020 2020  = minsize.      
-000025e0: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-000025f0: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-00002600: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
-00002610: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-00002620: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-00002630: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
-00002640: 7661 6c75 6520 6973 204e 6f6e 653a 0a20  value is None:. 
-00002650: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
-00002660: 6820 3d20 300a 2020 2020 2020 2020 656c  h = 0.        el
-00002670: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00002680: 6c75 652c 2073 7472 293a 0a20 2020 2020  lue, str):.     
-00002690: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-000026a0: 2020 2020 2020 2020 2020 2020 6c65 6e67              leng
-000026b0: 7468 203d 206c 656e 2874 6f5f 756e 6963  th = len(to_unic
-000026c0: 6f64 6528 7661 6c75 6529 290a 2020 2020  ode(value)).    
-000026d0: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-000026e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000026f0: 6c65 6e67 7468 203d 206c 656e 2876 616c  length = len(val
-00002700: 7565 290a 2020 2020 2020 2020 656c 6966  ue).        elif
-00002710: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
-00002720: 652c 2075 6e69 636f 6465 5429 3a0a 2020  e, unicodeT):.  
-00002730: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
-00002740: 203d 206c 656e 2876 616c 7565 290a 2020   = len(value).  
-00002750: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
-00002760: 3d20 7661 6c75 652e 656e 636f 6465 2822  = value.encode("
-00002770: 7574 6638 2229 0a20 2020 2020 2020 2065  utf8").        e
-00002780: 6c69 6620 6973 696e 7374 616e 6365 2876  lif isinstance(v
-00002790: 616c 7565 2c20 2862 7974 6573 2c20 6279  alue, (bytes, by
-000027a0: 7465 6172 7261 792c 2074 7570 6c65 2c20  tearray, tuple, 
-000027b0: 6c69 7374 2929 3a0a 2020 2020 2020 2020  list)):.        
-000027c0: 2020 2020 6c65 6e67 7468 203d 206c 656e      length = len
-000027d0: 2876 616c 7565 290a 2020 2020 2020 2020  (value).        
-000027e0: 656c 6966 2069 7369 6e73 7461 6e63 6528  elif isinstance(
-000027f0: 7661 6c75 652c 2063 6769 2e46 6965 6c64  value, cgi.Field
-00002800: 5374 6f72 6167 6529 3a0a 2020 2020 2020  Storage):.      
-00002810: 2020 2020 2020 6966 2076 616c 7565 2e66        if value.f
-00002820: 696c 653a 0a20 2020 2020 2020 2020 2020  ile:.           
-00002830: 2020 2020 2076 616c 7565 2e66 696c 652e       value.file.
-00002840: 7365 656b 2830 2c20 6f73 2e53 4545 4b5f  seek(0, os.SEEK_
-00002850: 454e 4429 0a20 2020 2020 2020 2020 2020  END).           
-00002860: 2020 2020 206c 656e 6774 6820 3d20 7661       length = va
-00002870: 6c75 652e 6669 6c65 2e74 656c 6c28 290a  lue.file.tell().
-00002880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002890: 7661 6c75 652e 6669 6c65 2e73 6565 6b28  value.file.seek(
-000028a0: 302c 206f 732e 5345 454b 5f53 4554 290a  0, os.SEEK_SET).
-000028b0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000028c0: 2068 6173 6174 7472 2876 616c 7565 2c20   hasattr(value, 
-000028d0: 2276 616c 7565 2229 3a0a 2020 2020 2020  "value"):.      
-000028e0: 2020 2020 2020 2020 2020 7661 6c20 3d20            val = 
-000028f0: 7661 6c75 652e 7661 6c75 650a 2020 2020  value.value.    
-00002900: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00002910: 616c 3a0a 2020 2020 2020 2020 2020 2020  al:.            
-00002920: 2020 2020 2020 2020 6c65 6e67 7468 203d          length =
-00002930: 206c 656e 2876 616c 290a 2020 2020 2020   len(val).      
-00002940: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00002950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002960: 2020 2020 6c65 6e67 7468 203d 2030 0a20      length = 0. 
-00002970: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00002980: 2020 2020 2020 2020 2076 616c 7565 203d           value =
-00002990: 2073 7472 2876 616c 7565 290a 2020 2020   str(value).    
-000029a0: 2020 2020 2020 2020 6c65 6e67 7468 203d          length =
-000029b0: 206c 656e 2873 7472 2876 616c 7565 2929   len(str(value))
-000029c0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000029d0: 2e6d 696e 7369 7a65 203c 3d20 6c65 6e67  .minsize <= leng
-000029e0: 7468 203c 3d20 7365 6c66 2e6d 6178 7369  th <= self.maxsi
-000029f0: 7a65 3a0a 2020 2020 2020 2020 2020 2020  ze:.            
-00002a00: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
-00002a10: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00002a20: 6174 696f 6e45 7272 6f72 280a 2020 2020  ationError(.    
-00002a30: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-00002a40: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-00002a50: 6f72 5f6d 6573 7361 6765 290a 2020 2020  or_message).    
-00002a60: 2020 2020 2020 2020 2520 6469 6374 286d          % dict(m
-00002a70: 696e 3d73 656c 662e 6d69 6e73 697a 652c  in=self.minsize,
-00002a80: 206d 6178 3d73 656c 662e 6d61 7873 697a   max=self.maxsiz
-00002a90: 6529 0a20 2020 2020 2020 2029 0a0a 0a63  e).        )...c
-00002aa0: 6c61 7373 2049 535f 4a53 4f4e 2856 616c  lass IS_JSON(Val
-00002ab0: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
-00002ac0: 0a20 2020 2045 7861 6d70 6c65 3a0a 2020  .    Example:.  
-00002ad0: 2020 2020 2020 5573 6564 2061 733a 3a0a        Used as::.
-00002ae0: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
-00002af0: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-00002b00: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
-00002b10: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00002b20: 6571 7569 7265 733d 4953 5f4a 534f 4e28  equires=IS_JSON(
-00002b30: 6572 726f 725f 6d65 7373 6167 653d 2254  error_message="T
-00002b40: 6869 7320 6973 206e 6f74 2061 2076 616c  his is not a val
-00002b50: 6964 206a 736f 6e20 696e 7075 7422 290a  id json input").
-00002b60: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00002b70: 2049 535f 4a53 4f4e 2829 2827 7b22 6122   IS_JSON()('{"a"
-00002b80: 3a20 3130 307d 2729 0a20 2020 2020 2020  : 100}').       
-00002b90: 2020 2020 2028 7b75 2761 273a 2031 3030       ({u'a': 100
-00002ba0: 7d2c 204e 6f6e 6529 0a0a 2020 2020 2020  }, None)..      
-00002bb0: 2020 2020 2020 3e3e 3e20 4953 5f4a 534f        >>> IS_JSO
-00002bc0: 4e28 2928 2773 7061 6d31 3233 3427 290a  N()('spam1234').
-00002bd0: 2020 2020 2020 2020 2020 2020 2827 7370              ('sp
-00002be0: 616d 3132 3334 272c 2027 696e 7661 6c69  am1234', 'invali
-00002bf0: 6420 6a73 6f6e 2729 0a20 2020 2022 2222  d json').    """
-00002c00: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00002c10: 5f5f 2873 656c 662c 2065 7272 6f72 5f6d  __(self, error_m
-00002c20: 6573 7361 6765 3d22 496e 7661 6c69 6420  essage="Invalid 
-00002c30: 6a73 6f6e 222c 206e 6174 6976 655f 6a73  json", native_js
-00002c40: 6f6e 3d46 616c 7365 293a 0a20 2020 2020  on=False):.     
-00002c50: 2020 2073 656c 662e 6e61 7469 7665 5f6a     self.native_j
-00002c60: 736f 6e20 3d20 6e61 7469 7665 5f6a 736f  son = native_jso
-00002c70: 6e0a 2020 2020 2020 2020 7365 6c66 2e65  n.        self.e
-00002c80: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
-00002c90: 7272 6f72 5f6d 6573 7361 6765 0a0a 2020  rror_message..  
-00002ca0: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00002cb0: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00002cc0: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00002cd0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00002ce0: 6365 2876 616c 7565 2c20 2873 7472 2c20  ce(value, (str, 
-00002cf0: 6279 7465 7329 293a 0a20 2020 2020 2020  bytes)):.       
-00002d00: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00002d10: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-00002d20: 662e 6e61 7469 7665 5f6a 736f 6e3a 0a20  f.native_json:. 
-00002d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d40: 2020 206a 736f 6e2e 6c6f 6164 7328 7661     json.loads(va
-00002d50: 6c75 6529 2020 2320 7261 6973 6573 2065  lue)  # raises e
-00002d60: 7272 6f72 2069 6e20 6361 7365 206f 6620  rror in case of 
-00002d70: 6d61 6c66 6f72 6d65 6420 6a73 6f6e 0a20  malformed json. 
-00002d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002d90: 2020 2072 6574 7572 6e20 7661 6c75 6520     return value 
-00002da0: 2023 2074 6865 2073 6572 6961 6c69 7a65   # the serialize
-00002db0: 6420 7661 6c75 6520 6973 206e 6f74 2070  d value is not p
-00002dc0: 6173 7365 640a 2020 2020 2020 2020 2020  assed.          
-00002dd0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00002de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002df0: 7265 7475 726e 206a 736f 6e2e 6c6f 6164  return json.load
-00002e00: 7328 7661 6c75 6529 0a20 2020 2020 2020  s(value).       
-00002e10: 2020 2020 2065 7863 6570 7420 4a53 4f4e       except JSON
-00002e20: 4572 726f 7273 3a0a 2020 2020 2020 2020  Errors:.        
-00002e30: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00002e40: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
-00002e50: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
-00002e60: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-00002e70: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
-00002e80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002e90: 7572 6e20 7661 6c75 650a 0a20 2020 2064  urn value..    d
-00002ea0: 6566 2066 6f72 6d61 7474 6572 2873 656c  ef formatter(sel
-00002eb0: 662c 2076 616c 7565 293a 0a20 2020 2020  f, value):.     
-00002ec0: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
-00002ed0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00002ee0: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
-00002ef0: 2020 2020 2069 6620 7365 6c66 2e6e 6174       if self.nat
-00002f00: 6976 655f 6a73 6f6e 3a0a 2020 2020 2020  ive_json:.      
-00002f10: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00002f20: 7565 0a20 2020 2020 2020 2065 6c73 653a  ue.        else:
-00002f30: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00002f40: 7572 6e20 6a73 6f6e 2e64 756d 7073 2876  urn json.dumps(v
-00002f50: 616c 7565 290a 0a0a 636c 6173 7320 4953  alue)...class IS
-00002f60: 5f49 4e5f 5345 5428 5661 6c69 6461 746f  _IN_SET(Validato
-00002f70: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
-00002f80: 4578 616d 706c 653a 0a20 2020 2020 2020  Example:.       
-00002f90: 2055 7365 6420 6173 3a3a 0a0a 2020 2020   Used as::..    
-00002fa0: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
-00002fb0: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
-00002fc0: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
-00002fd0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00002fe0: 6972 6573 3d49 535f 494e 5f53 4554 285b  ires=IS_IN_SET([
-00002ff0: 276d 6178 272c 2027 6a6f 686e 275d 2c7a  'max', 'john'],z
-00003000: 6572 6f3d 2727 2929 0a0a 2020 2020 5468  ero=''))..    Th
-00003010: 6520 6172 6775 6d65 6e74 206f 6620 4953  e argument of IS
-00003020: 5f49 4e5f 5345 5420 6d75 7374 2062 6520  _IN_SET must be 
-00003030: 6120 6c69 7374 206f 7220 7365 743a 3a0a  a list or set::.
-00003040: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00003050: 494e 5f53 4554 285b 276d 6178 272c 2027  IN_SET(['max', '
-00003060: 6a6f 686e 275d 2928 276d 6178 2729 0a20  john'])('max'). 
-00003070: 2020 2020 2020 2028 276d 6178 272c 204e         ('max', N
-00003080: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00003090: 2049 535f 494e 5f53 4554 285b 276d 6178   IS_IN_SET(['max
-000030a0: 272c 2027 6a6f 686e 275d 2928 276d 6173  ', 'john'])('mas
-000030b0: 7369 6d6f 2729 0a20 2020 2020 2020 2028  simo').        (
-000030c0: 276d 6173 7369 6d6f 272c 2027 7661 6c75  'massimo', 'valu
-000030d0: 6520 6e6f 7420 616c 6c6f 7765 6427 290a  e not allowed').
-000030e0: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-000030f0: 4e5f 5345 5428 5b27 6d61 7827 2c20 276a  N_SET(['max', 'j
-00003100: 6f68 6e27 5d2c 206d 756c 7469 706c 653d  ohn'], multiple=
-00003110: 5472 7565 2928 2827 6d61 7827 2c20 276a  True)(('max', 'j
-00003120: 6f68 6e27 2929 0a20 2020 2020 2020 2028  ohn')).        (
-00003130: 2827 6d61 7827 2c20 276a 6f68 6e27 292c  ('max', 'john'),
-00003140: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
-00003150: 3e3e 2049 535f 494e 5f53 4554 285b 276d  >> IS_IN_SET(['m
-00003160: 6178 272c 2027 6a6f 686e 275d 2c20 6d75  ax', 'john'], mu
-00003170: 6c74 6970 6c65 3d54 7275 6529 2828 2762  ltiple=True)(('b
-00003180: 696c 6c27 2c20 276a 6f68 6e27 2929 0a20  ill', 'john')). 
-00003190: 2020 2020 2020 2028 2827 6269 6c6c 272c         (('bill',
-000031a0: 2027 6a6f 686e 2729 2c20 2776 616c 7565   'john'), 'value
-000031b0: 206e 6f74 2061 6c6c 6f77 6564 2729 0a20   not allowed'). 
-000031c0: 2020 2020 2020 203e 3e3e 2049 535f 494e         >>> IS_IN
-000031d0: 5f53 4554 2828 2769 6431 272c 2769 6432  _SET(('id1','id2
-000031e0: 2729 2c20 5b27 6669 7273 7420 6c61 6265  '), ['first labe
-000031f0: 6c27 2c27 7365 636f 6e64 206c 6162 656c  l','second label
-00003200: 275d 2928 2769 6431 2729 2023 2054 7261  '])('id1') # Tra
-00003210: 6469 7469 6f6e 616c 2077 6179 0a20 2020  ditional way.   
-00003220: 2020 2020 2028 2769 6431 272c 204e 6f6e       ('id1', Non
-00003230: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-00003240: 535f 494e 5f53 4554 287b 2769 6431 273a  S_IN_SET({'id1':
-00003250: 2766 6972 7374 206c 6162 656c 272c 2027  'first label', '
-00003260: 6964 3227 3a27 7365 636f 6e64 206c 6162  id2':'second lab
-00003270: 656c 277d 2928 2769 6431 2729 0a20 2020  el'})('id1').   
-00003280: 2020 2020 2028 2769 6431 272c 204e 6f6e       ('id1', Non
-00003290: 6529 0a20 2020 2020 2020 203e 3e3e 2069  e).        >>> i
-000032a0: 6d70 6f72 7420 6974 6572 746f 6f6c 730a  mport itertools.
-000032b0: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-000032c0: 4e5f 5345 5428 6974 6572 746f 6f6c 732e  N_SET(itertools.
-000032d0: 6368 6169 6e28 5b27 3127 2c27 3327 2c27  chain(['1','3','
-000032e0: 3527 5d2c 5b27 3227 2c27 3427 2c27 3627  5'],['2','4','6'
-000032f0: 5d29 2928 2731 2729 0a20 2020 2020 2020  ]))('1').       
-00003300: 2028 2731 272c 204e 6f6e 6529 0a20 2020   ('1', None).   
-00003310: 2020 2020 203e 3e3e 2049 535f 494e 5f53       >>> IS_IN_S
-00003320: 4554 285b 2827 6964 3127 2c27 6669 7273  ET([('id1','firs
-00003330: 7420 6c61 6265 6c27 292c 2028 2769 6432  t label'), ('id2
-00003340: 272c 2773 6563 6f6e 6420 6c61 6265 6c27  ','second label'
-00003350: 295d 2928 2769 6431 2729 2023 2052 6564  )])('id1') # Red
-00003360: 756e 6461 6e74 2077 6179 0a20 2020 2020  undant way.     
-00003370: 2020 2028 2769 6431 272c 204e 6f6e 6529     ('id1', None)
-00003380: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
-00003390: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-000033a0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000033b0: 2020 2074 6865 7365 742c 0a20 2020 2020     theset,.     
-000033c0: 2020 206c 6162 656c 733d 4e6f 6e65 2c0a     labels=None,.
-000033d0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-000033e0: 7373 6167 653d 2256 616c 7565 206e 6f74  ssage="Value not
-000033f0: 2061 6c6c 6f77 6564 222c 0a20 2020 2020   allowed",.     
-00003400: 2020 206d 756c 7469 706c 653d 4661 6c73     multiple=Fals
-00003410: 652c 0a20 2020 2020 2020 207a 6572 6f3d  e,.        zero=
-00003420: 2222 2c0a 2020 2020 2020 2020 736f 7274  "",.        sort
-00003430: 3d46 616c 7365 2c0a 2020 2020 293a 0a20  =False,.    ):. 
-00003440: 2020 2020 2020 2073 656c 662e 6d75 6c74         self.mult
-00003450: 6970 6c65 203d 206d 756c 7469 706c 650a  iple = multiple.
-00003460: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00003470: 7461 6e63 6528 7468 6573 6574 2c20 6469  tance(theset, di
-00003480: 6374 293a 0a20 2020 2020 2020 2020 2020  ct):.           
-00003490: 2073 656c 662e 7468 6573 6574 203d 205b   self.theset = [
-000034a0: 7374 7228 6974 656d 2920 666f 7220 6974  str(item) for it
-000034b0: 656d 2069 6e20 7468 6573 6574 5d0a 2020  em in theset].  
-000034c0: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-000034d0: 6162 656c 7320 3d20 6c69 7374 2874 6865  abels = list(the
-000034e0: 7365 742e 7661 6c75 6573 2829 290a 2020  set.values()).  
-000034f0: 2020 2020 2020 656c 6966 2028 0a20 2020        elif (.   
-00003500: 2020 2020 2020 2020 2074 6865 7365 740a           theset.
-00003510: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-00003520: 6973 696e 7374 616e 6365 2874 6865 7365  isinstance(these
-00003530: 742c 2028 7475 706c 652c 206c 6973 7429  t, (tuple, list)
-00003540: 290a 2020 2020 2020 2020 2020 2020 616e  ).            an
-00003550: 6420 6973 696e 7374 616e 6365 2874 6865  d isinstance(the
-00003560: 7365 745b 305d 2c20 2874 7570 6c65 2c20  set[0], (tuple, 
-00003570: 6c69 7374 2929 0a20 2020 2020 2020 2020  list)).         
-00003580: 2020 2061 6e64 206c 656e 2874 6865 7365     and len(these
-00003590: 745b 305d 2920 3d3d 2032 0a20 2020 2020  t[0]) == 2.     
-000035a0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-000035b0: 2020 7365 6c66 2e74 6865 7365 7420 3d20    self.theset = 
-000035c0: 5b73 7472 2869 7465 6d29 2066 6f72 2069  [str(item) for i
-000035d0: 7465 6d2c 206c 6162 656c 2069 6e20 7468  tem, label in th
-000035e0: 6573 6574 5d0a 2020 2020 2020 2020 2020  eset].          
-000035f0: 2020 7365 6c66 2e6c 6162 656c 7320 3d20    self.labels = 
-00003600: 5b73 7472 286c 6162 656c 2920 666f 7220  [str(label) for 
-00003610: 6974 656d 2c20 6c61 6265 6c20 696e 2074  item, label in t
-00003620: 6865 7365 745d 0a20 2020 2020 2020 2065  heset].        e
-00003630: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00003640: 2073 656c 662e 7468 6573 6574 203d 205b   self.theset = [
-00003650: 7374 7228 6974 656d 2920 666f 7220 6974  str(item) for it
-00003660: 656d 2069 6e20 7468 6573 6574 5d0a 2020  em in theset].  
-00003670: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00003680: 6162 656c 7320 3d20 6c61 6265 6c73 0a20  abels = labels. 
-00003690: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-000036a0: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
-000036b0: 725f 6d65 7373 6167 650a 2020 2020 2020  r_message.      
-000036c0: 2020 7365 6c66 2e7a 6572 6f20 3d20 7a65    self.zero = ze
-000036d0: 726f 0a20 2020 2020 2020 2073 656c 662e  ro.        self.
-000036e0: 736f 7274 203d 2073 6f72 740a 0a20 2020  sort = sort..   
-000036f0: 2064 6566 206f 7074 696f 6e73 2873 656c   def options(sel
-00003700: 662c 207a 6572 6f3d 5472 7565 293a 0a20  f, zero=True):. 
-00003710: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
-00003720: 6c66 2e6c 6162 656c 733a 0a20 2020 2020  lf.labels:.     
-00003730: 2020 2020 2020 2069 7465 6d73 203d 205b         items = [
-00003740: 286b 2c20 6b29 2066 6f72 2028 692c 206b  (k, k) for (i, k
-00003750: 2920 696e 2065 6e75 6d65 7261 7465 2873  ) in enumerate(s
-00003760: 656c 662e 7468 6573 6574 295d 0a20 2020  elf.theset)].   
-00003770: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00003780: 2020 2020 2020 2069 7465 6d73 203d 205b         items = [
-00003790: 286b 2c20 6c69 7374 2873 656c 662e 6c61  (k, list(self.la
-000037a0: 6265 6c73 295b 695d 2920 666f 7220 2869  bels)[i]) for (i
-000037b0: 2c20 6b29 2069 6e20 656e 756d 6572 6174  , k) in enumerat
-000037c0: 6528 7365 6c66 2e74 6865 7365 7429 5d0a  e(self.theset)].
-000037d0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000037e0: 736f 7274 3a0a 2020 2020 2020 2020 2020  sort:.          
-000037f0: 2020 6974 656d 732e 736f 7274 286b 6579    items.sort(key
-00003800: 3d6c 616d 6264 6120 6f3a 2073 7472 286f  =lambda o: str(o
-00003810: 5b31 5d29 2e75 7070 6572 2829 290a 2020  [1]).upper()).  
-00003820: 2020 2020 2020 6966 207a 6572 6f20 616e        if zero an
-00003830: 6420 7365 6c66 2e7a 6572 6f20 6973 206e  d self.zero is n
-00003840: 6f74 204e 6f6e 6520 616e 6420 6e6f 7420  ot None and not 
-00003850: 7365 6c66 2e6d 756c 7469 706c 653a 0a20  self.multiple:. 
-00003860: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-00003870: 2e69 6e73 6572 7428 302c 2028 2222 2c20  .insert(0, ("", 
-00003880: 7365 6c66 2e7a 6572 6f29 290a 2020 2020  self.zero)).    
-00003890: 2020 2020 7265 7475 726e 2069 7465 6d73      return items
-000038a0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-000038b0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-000038c0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-000038d0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000038e0: 2e6d 756c 7469 706c 653a 0a20 2020 2020  .multiple:.     
-000038f0: 2020 2020 2020 2023 2069 6620 6265 6c6f         # if belo
-00003900: 7720 7761 7320 7661 6c75 6573 203d 2072  w was values = r
-00003910: 652e 636f 6d70 696c 6528 225b 5c77 5c2d  e.compile("[\w\-
-00003920: 3a5d 2b22 292e 6669 6e64 616c 6c28 7374  :]+").findall(st
-00003930: 7228 7661 6c75 6529 290a 2020 2020 2020  r(value)).      
-00003940: 2020 2020 2020 6966 206e 6f74 2076 616c        if not val
-00003950: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-00003960: 2020 2020 7661 6c75 6573 203d 205b 5d0a      values = [].
-00003970: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00003980: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
-00003990: 652c 2028 7475 706c 652c 206c 6973 7429  e, (tuple, list)
-000039a0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-000039b0: 2020 2076 616c 7565 7320 3d20 7661 6c75     values = valu
-000039c0: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
-000039d0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-000039e0: 2020 2020 7661 6c75 6573 203d 205b 7661      values = [va
-000039f0: 6c75 655d 0a20 2020 2020 2020 2065 6c73  lue].        els
-00003a00: 653a 0a20 2020 2020 2020 2020 2020 2076  e:.            v
-00003a10: 616c 7565 7320 3d20 5b76 616c 7565 5d0a  alues = [value].
-00003a20: 2020 2020 2020 2020 7468 6573 7472 7365          thestrse
-00003a30: 7420 3d20 5b73 7472 2878 2920 666f 7220  t = [str(x) for 
-00003a40: 7820 696e 2073 656c 662e 7468 6573 6574  x in self.theset
-00003a50: 5d0a 2020 2020 2020 2020 6661 696c 7572  ].        failur
-00003a60: 6573 203d 205b 7820 666f 7220 7820 696e  es = [x for x in
-00003a70: 2076 616c 7565 7320 6966 206e 6f74 2073   values if not s
-00003a80: 7472 2878 2920 696e 2074 6865 7374 7273  tr(x) in thestrs
-00003a90: 6574 5d0a 2020 2020 2020 2020 6966 2066  et].        if f
-00003aa0: 6169 6c75 7265 7320 616e 6420 7365 6c66  ailures and self
-00003ab0: 2e74 6865 7365 743a 0a20 2020 2020 2020  .theset:.       
-00003ac0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00003ad0: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00003ae0: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00003af0: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
-00003b00: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00003b10: 6d75 6c74 6970 6c65 3a0a 2020 2020 2020  multiple:.      
-00003b20: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
-00003b30: 2020 2020 2020 2020 2020 2069 7369 6e73             isins
-00003b40: 7461 6e63 6528 7365 6c66 2e6d 756c 7469  tance(self.multi
-00003b50: 706c 652c 2028 7475 706c 652c 206c 6973  ple, (tuple, lis
-00003b60: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
-00003b70: 2020 2020 616e 6420 6e6f 7420 7365 6c66      and not self
-00003b80: 2e6d 756c 7469 706c 655b 305d 203c 3d20  .multiple[0] <= 
-00003b90: 6c65 6e28 7661 6c75 6573 2920 3c20 7365  len(values) < se
-00003ba0: 6c66 2e6d 756c 7469 706c 655b 315d 0a20  lf.multiple[1]. 
-00003bb0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-00003bc0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00003bd0: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-00003be0: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
-00003bf0: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
-00003c00: 6573 7361 6765 2929 0a20 2020 2020 2020  essage)).       
-00003c10: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-00003c20: 6573 0a20 2020 2020 2020 2072 6574 7572  es.        retur
-00003c30: 6e20 7661 6c75 650a 0a0a 636c 6173 7320  n value...class 
-00003c40: 4953 5f49 4e5f 4442 2856 616c 6964 6174  IS_IN_DB(Validat
-00003c50: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
-00003c60: 2045 7861 6d70 6c65 3a0a 2020 2020 2020   Example:.      
-00003c70: 2020 5573 6564 2061 733a 3a0a 0a20 2020    Used as::..   
-00003c80: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
-00003c90: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
-00003ca0: 6d65 3d27 6e61 6d65 272c 0a20 2020 2020  me='name',.     
-00003cb0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00003cc0: 7569 7265 733d 4953 5f49 4e5f 4442 2864  uires=IS_IN_DB(d
-00003cd0: 622c 2064 622e 6d79 7461 626c 652e 6d79  b, db.mytable.my
-00003ce0: 6669 656c 642c 207a 6572 6f3d 2727 2929  field, zero=''))
-00003cf0: 0a0a 2020 2020 7573 6564 2066 6f72 2072  ..    used for r
-00003d00: 6566 6572 656e 6365 2066 6965 6c64 732c  eference fields,
-00003d10: 2072 656e 6465 7265 6420 6173 2061 2064   rendered as a d
-00003d20: 726f 7062 6f78 0a20 2020 2022 2222 0a0a  ropbox.    """..
-00003d30: 2020 2020 5245 4745 585f 5441 424c 455f      REGEX_TABLE_
-00003d40: 444f 545f 4649 454c 4420 3d20 7222 5e28  DOT_FIELD = r"^(
-00003d50: 5c77 2b29 5c2e 285c 772b 2924 220a 2020  \w+)\.(\w+)$".  
-00003d60: 2020 5245 4745 585f 494e 5445 5250 5f43    REGEX_INTERP_C
-00003d70: 4f4e 565f 5350 4543 4946 4945 5220 3d20  ONV_SPECIFIER = 
-00003d80: 7222 255c 2828 5c77 2b29 5c29 5c64 2a28  r"%\((\w+)\)\d*(
-00003d90: 3f3a 5c2e 5c64 2b29 3f5b 612d 7a41 2d5a  ?:\.\d+)?[a-zA-Z
-00003da0: 5d22 0a0a 2020 2020 6465 6620 5f5f 696e  ]"..    def __in
-00003db0: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00003dc0: 6c66 2c0a 2020 2020 2020 2020 6462 7365  lf,.        dbse
-00003dd0: 742c 0a20 2020 2020 2020 2066 6965 6c64  t,.        field
-00003de0: 2c0a 2020 2020 2020 2020 6c61 6265 6c3d  ,.        label=
-00003df0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6572  None,.        er
-00003e00: 726f 725f 6d65 7373 6167 653d 2256 616c  ror_message="Val
-00003e10: 7565 206e 6f74 2069 6e20 6461 7461 6261  ue not in databa
-00003e20: 7365 222c 0a20 2020 2020 2020 206f 7264  se",.        ord
-00003e30: 6572 6279 3d4e 6f6e 652c 0a20 2020 2020  erby=None,.     
-00003e40: 2020 2067 726f 7570 6279 3d4e 6f6e 652c     groupby=None,
-00003e50: 0a20 2020 2020 2020 2064 6973 7469 6e63  .        distinc
-00003e60: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
-00003e70: 6361 6368 653d 4e6f 6e65 2c0a 2020 2020  cache=None,.    
-00003e80: 2020 2020 6d75 6c74 6970 6c65 3d46 616c      multiple=Fal
-00003e90: 7365 2c0a 2020 2020 2020 2020 7a65 726f  se,.        zero
-00003ea0: 3d22 222c 0a20 2020 2020 2020 2073 6f72  ="",.        sor
-00003eb0: 743d 4661 6c73 652c 0a20 2020 2020 2020  t=False,.       
-00003ec0: 205f 616e 643d 4e6f 6e65 2c0a 2020 2020   _and=None,.    
-00003ed0: 2020 2020 6c65 6674 3d4e 6f6e 652c 0a20      left=None,. 
-00003ee0: 2020 2020 2020 2064 656c 696d 6974 6572         delimiter
-00003ef0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2061  =None,.        a
-00003f00: 7574 6f5f 6164 643d 4661 6c73 652c 0a20  uto_add=False,. 
-00003f10: 2020 2029 3a0a 2020 2020 2020 2020 6966     ):.        if
-00003f20: 2068 6173 6174 7472 2864 6273 6574 2c20   hasattr(dbset, 
-00003f30: 2264 6566 696e 655f 7461 626c 6522 293a  "define_table"):
-00003f40: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00003f50: 662e 6462 7365 7420 3d20 6462 7365 7428  f.dbset = dbset(
-00003f60: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00003f70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00003f80: 2e64 6273 6574 203d 2064 6273 6574 0a0a  .dbset = dbset..
-00003f90: 2020 2020 2020 2020 7461 626c 6520 3d20          table = 
-00003fa0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00003fb0: 6973 696e 7374 616e 6365 2866 6965 6c64  isinstance(field
-00003fc0: 2c20 5461 626c 6529 3a0a 2020 2020 2020  , Table):.      
-00003fd0: 2020 2020 2020 7461 626c 6520 3d20 6669        table = fi
-00003fe0: 656c 640a 2020 2020 2020 2020 2020 2020  eld.            
-00003ff0: 6669 656c 6420 3d20 7461 626c 652e 5f69  field = table._i
-00004000: 640a 2020 2020 2020 2020 2020 2020 666e  d.            fn
-00004010: 616d 6520 3d20 7374 7228 6669 656c 6429  ame = str(field)
-00004020: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00004030: 7374 616e 6365 2866 6965 6c64 2c20 4669  stance(field, Fi
-00004040: 656c 6429 3a0a 2020 2020 2020 2020 2020  eld):.          
-00004050: 2020 666e 616d 6520 3d20 7374 7228 6669    fname = str(fi
-00004060: 656c 6429 0a20 2020 2020 2020 2065 6c69  eld).        eli
-00004070: 6620 6973 696e 7374 616e 6365 2866 6965  f isinstance(fie
-00004080: 6c64 2c20 7374 7229 3a0a 2020 2020 2020  ld, str):.      
-00004090: 2020 2020 2020 6974 656d 7320 3d20 6669        items = fi
-000040a0: 656c 642e 7370 6c69 7428 222e 2229 0a20  eld.split("."). 
-000040b0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
-000040c0: 6e28 6974 656d 7329 203d 3d20 3120 6f72  n(items) == 1 or
-000040d0: 2069 7465 6d73 5b31 5d20 3d3d 2022 6964   items[1] == "id
-000040e0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-000040f0: 2020 2074 6162 6c65 203d 2073 656c 662e     table = self.
-00004100: 6462 7365 742e 5f64 622e 6765 7428 6974  dbset._db.get(it
-00004110: 656d 735b 305d 290a 2020 2020 2020 2020  ems[0]).        
-00004120: 2020 2020 2020 2020 666e 616d 6520 3d20          fname = 
-00004130: 6974 656d 735b 305d 202b 2022 2e69 6422  items[0] + ".id"
-00004140: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00004150: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00004160: 2020 2066 6e61 6d65 203d 2066 6965 6c64     fname = field
-00004170: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00004180: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00004190: 2052 756e 7469 6d65 4572 726f 7228 2249   RuntimeError("I
-000041a0: 535f 494e 5f44 423a 2061 2066 6965 6c64  S_IN_DB: a field
-000041b0: 2061 7267 756d 656e 7420 6d75 7374 2062   argument must b
-000041c0: 6520 7370 6563 6966 6965 6422 290a 2020  e specified").  
-000041d0: 2020 2020 2020 286b 7461 626c 652c 206b        (ktable, k
-000041e0: 6669 656c 6429 203d 2066 6e61 6d65 2e73  field) = fname.s
-000041f0: 706c 6974 2822 2e22 290a 2020 2020 2020  plit(".").      
-00004200: 2020 6966 206e 6f74 206c 6162 656c 3a0a    if not label:.
-00004210: 2020 2020 2020 2020 2020 2020 2320 6966              # if
-00004220: 2077 6520 6861 7665 2061 2074 6162 6c65   we have a table
-00004230: 2061 6e64 2069 7420 6861 7320 6120 5f66   and it has a _f
-00004240: 6f72 6d61 742c 2075 7365 2069 740a 2020  ormat, use it.  
-00004250: 2020 2020 2020 2020 2020 6966 2074 6162            if tab
-00004260: 6c65 2061 6e64 2074 6162 6c65 2e5f 666f  le and table._fo
-00004270: 726d 6174 3a0a 2020 2020 2020 2020 2020  rmat:.          
-00004280: 2020 2020 2020 6c61 6265 6c20 3d20 7461        label = ta
-00004290: 626c 652e 5f66 6f72 6d61 740a 2020 2020  ble._format.    
-000042a0: 2020 2020 2020 2020 2320 656c 7365 2066          # else f
-000042b0: 6f72 6d61 7420 7573 696e 6720 7468 6520  ormat using the 
-000042c0: 6669 656c 6420 7661 6c75 650a 2020 2020  field value.    
-000042d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-000042e0: 2020 2020 2020 2020 2020 2020 2020 6c61                la
-000042f0: 6265 6c20 3d20 2225 2528 2573 2973 2220  bel = "%%(%s)s" 
-00004300: 2520 6b66 6965 6c64 0a20 2020 2020 2020  % kfield.       
-00004310: 2069 6620 6973 696e 7374 616e 6365 286c   if isinstance(l
-00004320: 6162 656c 2c20 7374 7229 3a0a 2020 2020  abel, str):.    
-00004330: 2020 2020 2020 2020 6d20 3d20 7265 2e6d          m = re.m
-00004340: 6174 6368 2873 656c 662e 5245 4745 585f  atch(self.REGEX_
-00004350: 5441 424c 455f 444f 545f 4649 454c 442c  TABLE_DOT_FIELD,
-00004360: 206c 6162 656c 290a 2020 2020 2020 2020   label).        
-00004370: 2020 2020 6966 206d 3a0a 2020 2020 2020      if m:.      
-00004380: 2020 2020 2020 2020 2020 6c61 6265 6c20            label 
-00004390: 3d20 2225 2528 2573 2973 2220 2520 6d2e  = "%%(%s)s" % m.
-000043a0: 6772 6f75 7028 3229 0a20 2020 2020 2020  group(2).       
-000043b0: 2020 2020 2066 6965 6c64 6e61 6d65 7320       fieldnames 
-000043c0: 3d20 7265 2e66 696e 6461 6c6c 2873 656c  = re.findall(sel
-000043d0: 662e 5245 4745 585f 494e 5445 5250 5f43  f.REGEX_INTERP_C
-000043e0: 4f4e 565f 5350 4543 4946 4945 522c 206c  ONV_SPECIFIER, l
-000043f0: 6162 656c 290a 2020 2020 2020 2020 2020  abel).          
-00004400: 2020 6966 206b 6669 656c 6420 6e6f 7420    if kfield not 
-00004410: 696e 2066 6965 6c64 6e61 6d65 733a 0a20  in fieldnames:. 
-00004420: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00004430: 6965 6c64 6e61 6d65 732e 6170 7065 6e64  ieldnames.append
-00004440: 286b 6669 656c 6429 2020 2320 6b66 6965  (kfield)  # kfie
-00004450: 6c64 206d 7573 7420 6265 206c 6173 740a  ld must be last.
-00004460: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00004470: 6e73 7461 6e63 6528 6c61 6265 6c2c 2046  nstance(label, F
-00004480: 6965 6c64 293a 0a20 2020 2020 2020 2020  ield):.         
-00004490: 2020 2066 6965 6c64 6e61 6d65 7320 3d20     fieldnames = 
-000044a0: 5b6c 6162 656c 2e6e 616d 652c 206b 6669  [label.name, kfi
-000044b0: 656c 645d 2020 2320 6b66 6965 6c64 206d  eld]  # kfield m
-000044c0: 7573 7420 6265 206c 6173 740a 2020 2020  ust be last.    
-000044d0: 2020 2020 2020 2020 6c61 6265 6c20 3d20          label = 
-000044e0: 2225 2528 2573 2973 2220 2520 6c61 6265  "%%(%s)s" % labe
-000044f0: 6c2e 6e61 6d65 0a20 2020 2020 2020 2065  l.name.        e
-00004500: 6c69 6620 6361 6c6c 6162 6c65 286c 6162  lif callable(lab
-00004510: 656c 293a 0a20 2020 2020 2020 2020 2020  el):.           
-00004520: 2066 6965 6c64 6e61 6d65 7320 3d20 222a   fieldnames = "*
-00004530: 220a 2020 2020 2020 2020 656c 7365 3a0a  ".        else:.
-00004540: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00004550: 6520 4e6f 7449 6d70 6c65 6d65 6e74 6564  e NotImplemented
-00004560: 4572 726f 720a 0a20 2020 2020 2020 2073  Error..        s
-00004570: 656c 662e 6669 656c 646e 616d 6573 203d  elf.fieldnames =
-00004580: 2066 6965 6c64 6e61 6d65 7320 2023 2066   fieldnames  # f
-00004590: 6965 6c64 7320 7265 7175 6972 6573 2074  ields requires t
-000045a0: 6f20 6275 696c 6420 7468 6520 666f 726d  o build the form
-000045b0: 6174 7469 6e67 0a20 2020 2020 2020 2073  atting.        s
-000045c0: 656c 662e 6c61 6265 6c20 3d20 6c61 6265  elf.label = labe
-000045d0: 6c0a 2020 2020 2020 2020 7365 6c66 2e6b  l.        self.k
-000045e0: 7461 626c 6520 3d20 6b74 6162 6c65 0a20  table = ktable. 
-000045f0: 2020 2020 2020 2073 656c 662e 6b66 6965         self.kfie
-00004600: 6c64 203d 206b 6669 656c 640a 2020 2020  ld = kfield.    
-00004610: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-00004620: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
-00004630: 6573 7361 6765 0a20 2020 2020 2020 2073  essage.        s
-00004640: 656c 662e 7468 6573 6574 203d 204e 6f6e  elf.theset = Non
-00004650: 650a 2020 2020 2020 2020 7365 6c66 2e6f  e.        self.o
-00004660: 7264 6572 6279 203d 206f 7264 6572 6279  rderby = orderby
-00004670: 0a20 2020 2020 2020 2073 656c 662e 6772  .        self.gr
-00004680: 6f75 7062 7920 3d20 6772 6f75 7062 790a  oupby = groupby.
-00004690: 2020 2020 2020 2020 7365 6c66 2e64 6973          self.dis
-000046a0: 7469 6e63 7420 3d20 6469 7374 696e 6374  tinct = distinct
-000046b0: 0a20 2020 2020 2020 2073 656c 662e 6361  .        self.ca
-000046c0: 6368 6520 3d20 6361 6368 650a 2020 2020  che = cache.    
-000046d0: 2020 2020 7365 6c66 2e6d 756c 7469 706c      self.multipl
-000046e0: 6520 3d20 6d75 6c74 6970 6c65 0a20 2020  e = multiple.   
-000046f0: 2020 2020 2073 656c 662e 7a65 726f 203d       self.zero =
-00004700: 207a 6572 6f0a 2020 2020 2020 2020 7365   zero.        se
-00004710: 6c66 2e73 6f72 7420 3d20 736f 7274 0a20  lf.sort = sort. 
-00004720: 2020 2020 2020 2073 656c 662e 5f61 6e64         self._and
-00004730: 203d 205f 616e 640a 2020 2020 2020 2020   = _and.        
-00004740: 7365 6c66 2e6c 6566 7420 3d20 6c65 6674  self.left = left
-00004750: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
-00004760: 6c69 6d69 7465 7220 3d20 6465 6c69 6d69  limiter = delimi
-00004770: 7465 720a 2020 2020 2020 2020 7365 6c66  ter.        self
-00004780: 2e61 7574 6f5f 6164 6420 3d20 6175 746f  .auto_add = auto
-00004790: 5f61 6464 0a0a 2020 2020 6465 6620 7365  _add..    def se
-000047a0: 745f 7365 6c66 5f69 6428 7365 6c66 2c20  t_self_id(self, 
-000047b0: 6964 293a 0a20 2020 2020 2020 2069 6620  id):.        if 
-000047c0: 7365 6c66 2e5f 616e 643a 0a20 2020 2020  self._and:.     
-000047d0: 2020 2020 2020 2073 656c 662e 5f61 6e64         self._and
-000047e0: 2e72 6563 6f72 645f 6964 203d 2069 640a  .record_id = id.
-000047f0: 0a20 2020 2064 6566 2062 7569 6c64 5f73  .    def build_s
-00004800: 6574 2873 656c 6629 3a0a 2020 2020 2020  et(self):.      
-00004810: 2020 7461 626c 6520 3d20 7365 6c66 2e64    table = self.d
-00004820: 6273 6574 2e64 625b 7365 6c66 2e6b 7461  bset.db[self.kta
-00004830: 626c 655d 0a20 2020 2020 2020 2069 6620  ble].        if 
-00004840: 7365 6c66 2e66 6965 6c64 6e61 6d65 7320  self.fieldnames 
-00004850: 3d3d 2022 2a22 3a0a 2020 2020 2020 2020  == "*":.        
-00004860: 2020 2020 6669 656c 6473 203d 205b 6620      fields = [f 
-00004870: 666f 7220 6620 696e 2074 6162 6c65 5d0a  for f in table].
-00004880: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00004890: 2020 2020 2020 2020 2020 6669 656c 6473            fields
-000048a0: 203d 205b 7461 626c 655b 6b5d 2066 6f72   = [table[k] for
-000048b0: 206b 2069 6e20 7365 6c66 2e66 6965 6c64   k in self.field
-000048c0: 6e61 6d65 735d 0a20 2020 2020 2020 2069  names].        i
-000048d0: 676e 6f72 6520 3d20 2846 6965 6c64 5669  gnore = (FieldVi
-000048e0: 7274 7561 6c2c 2046 6965 6c64 4d65 7468  rtual, FieldMeth
-000048f0: 6f64 290a 2020 2020 2020 2020 6669 656c  od).        fiel
-00004900: 6473 203d 205b 6620 666f 7220 6620 696e  ds = [f for f in
-00004910: 2066 6965 6c64 7320 6966 206e 6f74 2069   fields if not i
-00004920: 7369 6e73 7461 6e63 6528 662c 2069 676e  sinstance(f, ign
-00004930: 6f72 6529 5d0a 2020 2020 2020 2020 6966  ore)].        if
-00004940: 2073 656c 662e 6462 7365 742e 6462 2e5f   self.dbset.db._
-00004950: 6462 6e61 6d65 2021 3d20 2267 6165 223a  dbname != "gae":
-00004960: 0a20 2020 2020 2020 2020 2020 206f 7264  .            ord
-00004970: 6572 6279 203d 2073 656c 662e 6f72 6465  erby = self.orde
-00004980: 7262 7920 6f72 2072 6564 7563 6528 6c61  rby or reduce(la
-00004990: 6d62 6461 2061 2c20 623a 2061 207c 2062  mbda a, b: a | b
-000049a0: 2c20 6669 656c 6473 290a 2020 2020 2020  , fields).      
-000049b0: 2020 2020 2020 6772 6f75 7062 7920 3d20        groupby = 
-000049c0: 7365 6c66 2e67 726f 7570 6279 0a20 2020  self.groupby.   
-000049d0: 2020 2020 2020 2020 2064 6973 7469 6e63           distinc
-000049e0: 7420 3d20 7365 6c66 2e64 6973 7469 6e63  t = self.distinc
-000049f0: 740a 2020 2020 2020 2020 2020 2020 6c65  t.            le
-00004a00: 6674 203d 2073 656c 662e 6c65 6674 0a20  ft = self.left. 
-00004a10: 2020 2020 2020 2020 2020 2064 6420 3d20             dd = 
-00004a20: 6469 6374 280a 2020 2020 2020 2020 2020  dict(.          
-00004a30: 2020 2020 2020 6f72 6465 7262 793d 6f72        orderby=or
-00004a40: 6465 7262 792c 0a20 2020 2020 2020 2020  derby,.         
-00004a50: 2020 2020 2020 2067 726f 7570 6279 3d67         groupby=g
-00004a60: 726f 7570 6279 2c0a 2020 2020 2020 2020  roupby,.        
-00004a70: 2020 2020 2020 2020 6469 7374 696e 6374          distinct
-00004a80: 3d64 6973 7469 6e63 742c 0a20 2020 2020  =distinct,.     
-00004a90: 2020 2020 2020 2020 2020 2063 6163 6865             cache
-00004aa0: 3d73 656c 662e 6361 6368 652c 0a20 2020  =self.cache,.   
-00004ab0: 2020 2020 2020 2020 2020 2020 2063 6163               cac
-00004ac0: 6865 6162 6c65 3d54 7275 652c 0a20 2020  heable=True,.   
-00004ad0: 2020 2020 2020 2020 2020 2020 206c 6566               lef
-00004ae0: 743d 6c65 6674 2c0a 2020 2020 2020 2020  t=left,.        
-00004af0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00004b00: 2020 7265 636f 7264 7320 3d20 7365 6c66    records = self
-00004b10: 2e64 6273 6574 2874 6162 6c65 292e 7365  .dbset(table).se
-00004b20: 6c65 6374 282a 6669 656c 6473 2c20 2a2a  lect(*fields, **
-00004b30: 6464 290a 2020 2020 2020 2020 656c 7365  dd).        else
-00004b40: 3a0a 2020 2020 2020 2020 2020 2020 6f72  :.            or
-00004b50: 6465 7262 7920 3d20 7365 6c66 2e6f 7264  derby = self.ord
-00004b60: 6572 6279 206f 7220 7265 6475 6365 280a  erby or reduce(.
-00004b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b80: 6c61 6d62 6461 2061 2c20 623a 2061 207c  lambda a, b: a |
-00004b90: 2062 2c20 2866 2066 6f72 2066 2069 6e20   b, (f for f in 
-00004ba0: 6669 656c 6473 2069 6620 6e6f 7420 662e  fields if not f.
-00004bb0: 6e61 6d65 203d 3d20 2269 6422 290a 2020  name == "id").  
-00004bc0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00004bd0: 2020 2020 2020 2020 6464 203d 2064 6963          dd = dic
-00004be0: 7428 6f72 6465 7262 793d 6f72 6465 7262  t(orderby=orderb
-00004bf0: 792c 2063 6163 6865 3d73 656c 662e 6361  y, cache=self.ca
-00004c00: 6368 652c 2063 6163 6865 6162 6c65 3d54  che, cacheable=T
-00004c10: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
-00004c20: 2072 6563 6f72 6473 203d 2073 656c 662e   records = self.
-00004c30: 6462 7365 7428 7461 626c 6529 2e73 656c  dbset(table).sel
-00004c40: 6563 7428 7461 626c 652e 414c 4c2c 202a  ect(table.ALL, *
-00004c50: 2a64 6429 0a20 2020 2020 2020 2073 656c  *dd).        sel
-00004c60: 662e 7468 6573 6574 203d 205b 7374 7228  f.theset = [str(
-00004c70: 725b 7365 6c66 2e6b 6669 656c 645d 2920  r[self.kfield]) 
-00004c80: 666f 7220 7220 696e 2072 6563 6f72 6473  for r in records
-00004c90: 5d0a 2020 2020 2020 2020 6966 2069 7369  ].        if isi
-00004ca0: 6e73 7461 6e63 6528 7365 6c66 2e6c 6162  nstance(self.lab
-00004cb0: 656c 2c20 7374 7229 3a0a 2020 2020 2020  el, str):.      
-00004cc0: 2020 2020 2020 7365 6c66 2e6c 6162 656c        self.label
-00004cd0: 7320 3d20 5b73 656c 662e 6c61 6265 6c20  s = [self.label 
-00004ce0: 2520 7220 666f 7220 7220 696e 2072 6563  % r for r in rec
-00004cf0: 6f72 6473 5d0a 2020 2020 2020 2020 656c  ords].        el
-00004d00: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00004d10: 7365 6c66 2e6c 6162 656c 7320 3d20 5b73  self.labels = [s
-00004d20: 656c 662e 6c61 6265 6c28 7229 2066 6f72  elf.label(r) for
-00004d30: 2072 2069 6e20 7265 636f 7264 735d 0a0a   r in records]..
-00004d40: 2020 2020 6465 6620 6f70 7469 6f6e 7328      def options(
-00004d50: 7365 6c66 2c20 7a65 726f 3d54 7275 6529  self, zero=True)
-00004d60: 3a0a 2020 2020 2020 2020 7365 6c66 2e62  :.        self.b
-00004d70: 7569 6c64 5f73 6574 2829 0a20 2020 2020  uild_set().     
-00004d80: 2020 2069 7465 6d73 203d 205b 286b 2c20     items = [(k, 
-00004d90: 7365 6c66 2e6c 6162 656c 735b 695d 2920  self.labels[i]) 
-00004da0: 666f 7220 2869 2c20 6b29 2069 6e20 656e  for (i, k) in en
-00004db0: 756d 6572 6174 6528 7365 6c66 2e74 6865  umerate(self.the
-00004dc0: 7365 7429 5d0a 2020 2020 2020 2020 6966  set)].        if
-00004dd0: 2073 656c 662e 736f 7274 3a0a 2020 2020   self.sort:.    
-00004de0: 2020 2020 2020 2020 6974 656d 732e 736f          items.so
-00004df0: 7274 286b 6579 3d6c 616d 6264 6120 6f3a  rt(key=lambda o:
-00004e00: 2073 7472 286f 5b31 5d29 2e75 7070 6572   str(o[1]).upper
-00004e10: 2829 290a 2020 2020 2020 2020 6966 207a  ()).        if z
-00004e20: 6572 6f20 616e 6420 7365 6c66 2e7a 6572  ero and self.zer
-00004e30: 6f20 6973 206e 6f74 204e 6f6e 6520 616e  o is not None an
-00004e40: 6420 6e6f 7420 7365 6c66 2e6d 756c 7469  d not self.multi
-00004e50: 706c 653a 0a20 2020 2020 2020 2020 2020  ple:.           
-00004e60: 2069 7465 6d73 2e69 6e73 6572 7428 302c   items.insert(0,
-00004e70: 2028 2222 2c20 7365 6c66 2e7a 6572 6f29   ("", self.zero)
-00004e80: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00004e90: 2069 7465 6d73 0a0a 2020 2020 6465 6620   items..    def 
-00004ea0: 6d61 7962 655f 6164 6428 7365 6c66 2c20  maybe_add(self, 
-00004eb0: 7461 626c 652c 2066 6965 6c64 6e61 6d65  table, fieldname
-00004ec0: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
-00004ed0: 2020 6420 3d20 7b66 6965 6c64 6e61 6d65    d = {fieldname
-00004ee0: 3a20 7661 6c75 657d 0a20 2020 2020 2020  : value}.       
-00004ef0: 2072 6563 6f72 6420 3d20 7461 626c 6528   record = table(
-00004f00: 2a2a 6429 0a20 2020 2020 2020 2069 6620  **d).        if 
-00004f10: 7265 636f 7264 3a0a 2020 2020 2020 2020  record:.        
-00004f20: 2020 2020 7265 7475 726e 2072 6563 6f72      return recor
-00004f30: 642e 6964 0a20 2020 2020 2020 2065 6c73  d.id.        els
-00004f40: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00004f50: 6574 7572 6e20 7461 626c 652e 696e 7365  eturn table.inse
-00004f60: 7274 282a 2a64 290a 0a20 2020 2064 6566  rt(**d)..    def
-00004f70: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
-00004f80: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-00004f90: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00004fa0: 7461 626c 6520 3d20 7365 6c66 2e64 6273  table = self.dbs
-00004fb0: 6574 2e64 625b 7365 6c66 2e6b 7461 626c  et.db[self.ktabl
-00004fc0: 655d 0a20 2020 2020 2020 2066 6965 6c64  e].        field
-00004fd0: 203d 2074 6162 6c65 5b73 656c 662e 6b66   = table[self.kf
-00004fe0: 6965 6c64 5d0a 0a20 2020 2020 2020 2069  ield]..        i
-00004ff0: 6620 7365 6c66 2e6d 756c 7469 706c 653a  f self.multiple:
-00005000: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005010: 7365 6c66 2e5f 616e 643a 0a20 2020 2020  self._and:.     
-00005020: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00005030: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
-00005040: 7272 6f72 0a20 2020 2020 2020 2020 2020  rror.           
-00005050: 2069 6620 6973 696e 7374 616e 6365 2876   if isinstance(v
-00005060: 616c 7565 2c20 6c69 7374 293a 0a20 2020  alue, list):.   
-00005070: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00005080: 7565 7320 3d20 7661 6c75 650a 2020 2020  ues = value.    
-00005090: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-000050a0: 662e 6465 6c69 6d69 7465 723a 0a20 2020  f.delimiter:.   
-000050b0: 2020 2020 2020 2020 2020 2020 2076 616c               val
-000050c0: 7565 7320 3d20 7661 6c75 652e 7370 6c69  ues = value.spli
-000050d0: 7428 7365 6c66 2e64 656c 696d 6974 6572  t(self.delimiter
-000050e0: 2920 2023 2062 6563 6175 7365 206f 6620  )  # because of 
-000050f0: 6175 746f 636f 6d70 6c65 7465 0a20 2020  autocomplete.   
-00005100: 2020 2020 2020 2020 2065 6c69 6620 7661           elif va
-00005110: 6c75 653a 0a20 2020 2020 2020 2020 2020  lue:.           
-00005120: 2020 2020 2076 616c 7565 7320 3d20 5b76       values = [v
-00005130: 616c 7565 5d0a 2020 2020 2020 2020 2020  alue].          
-00005140: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00005150: 2020 2020 2020 2020 7661 6c75 6573 203d          values =
-00005160: 205b 5d0a 0a20 2020 2020 2020 2020 2020   []..           
-00005170: 2069 6620 6669 656c 642e 7479 7065 2069   if field.type i
-00005180: 6e20 2822 6964 222c 2022 696e 7465 6765  n ("id", "intege
-00005190: 7222 293a 0a20 2020 2020 2020 2020 2020  r"):.           
-000051a0: 2020 2020 206e 6577 5f76 616c 7565 7320       new_values 
-000051b0: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
-000051c0: 2020 2020 2066 6f72 2076 616c 7565 2069       for value i
-000051d0: 6e20 7661 6c75 6573 3a0a 2020 2020 2020  n values:.      
-000051e0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000051f0: 206e 6f74 2028 6973 696e 7374 616e 6365   not (isinstance
-00005200: 2876 616c 7565 2c20 696e 7465 6765 725f  (value, integer_
-00005210: 7479 7065 7329 206f 7220 7661 6c75 652e  types) or value.
-00005220: 6973 6469 6769 7428 2929 3a0a 2020 2020  isdigit()):.    
-00005230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005240: 2020 2020 6966 2073 656c 662e 6175 746f      if self.auto
-00005250: 5f61 6464 3a0a 2020 2020 2020 2020 2020  _add:.          
-00005260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005270: 2020 7661 6c75 6520 3d20 7374 7228 0a20    value = str(. 
-00005280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005290: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000052a0: 656c 662e 6d61 7962 655f 6164 6428 7461  elf.maybe_add(ta
-000052b0: 626c 652c 2073 656c 662e 6669 656c 646e  ble, self.fieldn
-000052c0: 616d 6573 5b30 5d2c 2076 616c 7565 290a  ames[0], value).
-000052d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000052e0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000005c0: 5f4f 5222 2c0a 2020 2020 2249 535f 5341  _OR",.    "IS_SA
+000005d0: 4645 222c 0a20 2020 2022 4953 5f53 4c55  FE",.    "IS_SLU
+000005e0: 4722 2c0a 2020 2020 2249 535f 5354 524f  G",.    "IS_STRO
+000005f0: 4e47 222c 0a20 2020 2022 4953 5f54 494d  NG",.    "IS_TIM
+00000600: 4522 2c0a 2020 2020 2249 535f 5550 4c4f  E",.    "IS_UPLO
+00000610: 4144 5f46 494c 454e 414d 4522 2c0a 2020  AD_FILENAME",.  
+00000620: 2020 2249 535f 5550 5045 5222 2c0a 2020    "IS_UPPER",.  
+00000630: 2020 2249 535f 5552 4c22 2c0a 2020 2020    "IS_URL",.    
+00000640: 2249 535f 4a53 4f4e 222c 0a5d 0a0a 0a64  "IS_JSON",.]...d
+00000650: 6566 206f 7074 696f 6e73 5f73 6f72 7465  ef options_sorte
+00000660: 7228 782c 2079 293a 0a20 2020 2072 6574  r(x, y):.    ret
+00000670: 7572 6e20 2873 7472 2878 5b31 5d29 2e75  urn (str(x[1]).u
+00000680: 7070 6572 2829 203e 2073 7472 2879 5b31  pper() > str(y[1
+00000690: 5d29 2e75 7070 6572 2829 2061 6e64 2031  ]).upper() and 1
+000006a0: 2920 6f72 202d 310a 0a0a 6465 6620 7472  ) or -1...def tr
+000006b0: 616e 736c 6174 6528 7465 7874 293a 0a20  anslate(text):. 
+000006c0: 2020 2072 6574 7572 6e20 5661 6c69 6461     return Valida
+000006d0: 746f 722e 7472 616e 736c 6174 6f72 2874  tor.translator(t
+000006e0: 6578 7429 0a0a 0a63 6c61 7373 2056 616c  ext)...class Val
+000006f0: 6964 6174 696f 6e45 7272 6f72 2845 7863  idationError(Exc
+00000700: 6570 7469 6f6e 293a 0a20 2020 2064 6566  eption):.    def
+00000710: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+00000720: 6d65 7373 6167 6529 3a0a 2020 2020 2020  message):.      
+00000730: 2020 4578 6365 7074 696f 6e2e 5f5f 696e    Exception.__in
+00000740: 6974 5f5f 2873 656c 662c 206d 6573 7361  it__(self, messa
+00000750: 6765 290a 2020 2020 2020 2020 7365 6c66  ge).        self
+00000760: 2e6d 6573 7361 6765 203d 206d 6573 7361  .message = messa
+00000770: 6765 0a0a 0a63 6c61 7373 2056 616c 6964  ge...class Valid
+00000780: 6174 6f72 286f 626a 6563 7429 3a0a 2020  ator(object):.  
+00000790: 2020 2222 220a 2020 2020 526f 6f74 2066    """.    Root f
+000007a0: 6f72 2061 6c6c 2076 616c 6964 6174 6f72  or all validator
+000007b0: 732c 206d 6169 6e6c 7920 666f 7220 646f  s, mainly for do
+000007c0: 6375 6d65 6e74 6174 696f 6e20 7075 7270  cumentation purp
+000007d0: 6f73 6573 2e0a 0a20 2020 2056 616c 6964  oses...    Valid
+000007e0: 6174 6f72 7320 6172 6520 636c 6173 7365  ators are classe
+000007f0: 7320 7573 6564 2074 6f20 7661 6c69 6461  s used to valida
+00000800: 7465 2069 6e70 7574 2066 6965 6c64 7320  te input fields 
+00000810: 2869 6e63 6c75 6469 6e67 2066 6f72 6d73  (including forms
+00000820: 0a20 2020 2067 656e 6572 6174 6564 2066  .    generated f
+00000830: 726f 6d20 6461 7461 6261 7365 2074 6162  rom database tab
+00000840: 6c65 7329 2e0a 0a20 2020 2048 6572 6520  les)...    Here 
+00000850: 6973 2061 6e20 6578 616d 706c 6520 6f66  is an example of
+00000860: 2075 7369 6e67 2061 2076 616c 6964 6174   using a validat
+00000870: 6f72 2077 6974 6820 6120 464f 524d 3a3a  or with a FORM::
+00000880: 0a0a 2020 2020 2020 2020 494e 5055 5428  ..        INPUT(
+00000890: 5f6e 616d 653d 2761 272c 2072 6571 7569  _name='a', requi
+000008a0: 7265 733d 4953 5f49 4e54 5f49 4e5f 5241  res=IS_INT_IN_RA
+000008b0: 4e47 4528 302c 2031 3029 290a 0a20 2020  NGE(0, 10))..   
+000008c0: 2048 6572 6520 6973 2061 6e20 6578 616d   Here is an exam
+000008d0: 706c 6520 6f66 2068 6f77 2074 6f20 7265  ple of how to re
+000008e0: 7175 6972 6520 6120 7661 6c69 6461 746f  quire a validato
+000008f0: 7220 666f 7220 6120 7461 626c 6520 6669  r for a table fi
+00000900: 656c 643a 3a0a 0a20 2020 2020 2020 2064  eld::..        d
+00000910: 622e 6465 6669 6e65 5f74 6162 6c65 2827  b.define_table('
+00000920: 7065 7273 6f6e 272c 2046 6965 6c64 2827  person', Field('
+00000930: 6e61 6d65 2729 290a 2020 2020 2020 2020  name')).        
+00000940: 6462 2e70 6572 736f 6e2e 6e61 6d65 2e72  db.person.name.r
+00000950: 6571 7569 7265 733d 4953 5f4e 4f54 5f45  equires=IS_NOT_E
+00000960: 4d50 5459 2829 0a0a 2020 2020 5661 6c69  MPTY()..    Vali
+00000970: 6461 746f 7273 2061 7265 2061 6c77 6179  dators are alway
+00000980: 7320 6173 7369 676e 6564 2075 7369 6e67  s assigned using
+00000990: 2074 6865 2072 6571 7569 7265 7320 6174   the requires at
+000009a0: 7472 6962 7574 6520 6f66 2061 2066 6965  tribute of a fie
+000009b0: 6c64 2e20 410a 2020 2020 6669 656c 6420  ld. A.    field 
+000009c0: 6361 6e20 6861 7665 2061 2073 696e 676c  can have a singl
+000009d0: 6520 7661 6c69 6461 746f 7220 6f72 206d  e validator or m
+000009e0: 756c 7469 706c 6520 7661 6c69 6461 746f  ultiple validato
+000009f0: 7273 2e20 4d75 6c74 6970 6c65 0a20 2020  rs. Multiple.   
+00000a00: 2076 616c 6964 6174 6f72 7320 6172 6520   validators are 
+00000a10: 6d61 6465 2070 6172 7420 6f66 2061 206c  made part of a l
+00000a20: 6973 743a 3a0a 0a20 2020 2020 2020 2064  ist::..        d
+00000a30: 622e 7065 7273 6f6e 2e6e 616d 652e 7265  b.person.name.re
+00000a40: 7175 6972 6573 3d5b 4953 5f4e 4f54 5f45  quires=[IS_NOT_E
+00000a50: 4d50 5459 2829 2c20 4953 5f4e 4f54 5f49  MPTY(), IS_NOT_I
+00000a60: 4e5f 4442 2864 622c 2027 7065 7273 6f6e  N_DB(db, 'person
+00000a70: 2e69 6427 295d 0a0a 2020 2020 5661 6c69  .id')]..    Vali
+00000a80: 6461 746f 7273 2061 7265 2063 616c 6c65  dators are calle
+00000a90: 6420 6279 2074 6865 2066 756e 6374 696f  d by the functio
+00000aa0: 6e20 6163 6365 7074 7320 6f6e 2061 2046  n accepts on a F
+00000ab0: 4f52 4d20 6f72 206f 7468 6572 2048 544d  ORM or other HTM
+00000ac0: 4c0a 2020 2020 6865 6c70 6572 206f 626a  L.    helper obj
+00000ad0: 6563 7420 7468 6174 2063 6f6e 7461 696e  ect that contain
+00000ae0: 7320 6120 666f 726d 2e20 5468 6579 2061  s a form. They a
+00000af0: 7265 2061 6c77 6179 7320 6361 6c6c 6564  re always called
+00000b00: 2069 6e20 7468 6520 6f72 6465 7220 696e   in the order in
+00000b10: 0a20 2020 2077 6869 6368 2074 6865 7920  .    which they 
+00000b20: 6172 6520 6c69 7374 6564 2e0a 0a20 2020  are listed...   
+00000b30: 2042 7569 6c74 2d69 6e20 7661 6c69 6461   Built-in valida
+00000b40: 746f 7273 2068 6176 6520 636f 6e73 7472  tors have constr
+00000b50: 7563 746f 7273 2074 6861 7420 7461 6b65  uctors that take
+00000b60: 2074 6865 206f 7074 696f 6e61 6c20 6172   the optional ar
+00000b70: 6775 6d65 6e74 2065 7272 6f72 0a20 2020  gument error.   
+00000b80: 206d 6573 7361 6765 2077 6869 6368 2061   message which a
+00000b90: 6c6c 6f77 7320 796f 7520 746f 2063 6861  llows you to cha
+00000ba0: 6e67 6520 7468 6520 6465 6661 756c 7420  nge the default 
+00000bb0: 6572 726f 7220 6d65 7373 6167 652e 0a20  error message.. 
+00000bc0: 2020 2048 6572 6520 6973 2061 6e20 6578     Here is an ex
+00000bd0: 616d 706c 6520 6f66 2061 2076 616c 6964  ample of a valid
+00000be0: 6174 6f72 206f 6e20 6120 6461 7461 6261  ator on a databa
+00000bf0: 7365 2074 6162 6c65 3a3a 0a0a 2020 2020  se table::..    
+00000c00: 2020 2020 6462 2e70 6572 736f 6e2e 6e61      db.person.na
+00000c10: 6d65 2e72 6571 7569 7265 733d 4953 5f4e  me.requires=IS_N
+00000c20: 4f54 5f45 4d50 5459 2865 7272 6f72 5f6d  OT_EMPTY(error_m
+00000c30: 6573 7361 6765 3d54 2827 4669 6c6c 2074  essage=T('Fill t
+00000c40: 6869 7327 2929 0a0a 2020 2020 7768 6572  his'))..    wher
+00000c50: 6520 7765 2068 6176 6520 7573 6564 2074  e we have used t
+00000c60: 6865 2074 7261 6e73 6c61 7469 6f6e 206f  he translation o
+00000c70: 7065 7261 746f 7220 5420 746f 2061 6c6c  perator T to all
+00000c80: 6f77 2066 6f72 0a20 2020 2069 6e74 6572  ow for.    inter
+00000c90: 6e61 7469 6f6e 616c 697a 6174 696f 6e2e  nationalization.
+00000ca0: 0a0a 2020 2020 4e6f 7469 6365 2074 6861  ..    Notice tha
+00000cb0: 7420 6465 6661 756c 7420 6572 726f 7220  t default error 
+00000cc0: 6d65 7373 6167 6573 2061 7265 206e 6f74  messages are not
+00000cd0: 2074 7261 6e73 6c61 7465 642e 0a20 2020   translated..   
+00000ce0: 2022 2222 0a0a 2020 2020 7472 616e 736c   """..    transl
+00000cf0: 6174 6f72 203d 2073 7461 7469 636d 6574  ator = staticmet
+00000d00: 686f 6428 6c61 6d62 6461 2074 6578 743a  hod(lambda text:
+00000d10: 2074 6578 7429 0a0a 2020 2020 6465 6620   text)..    def 
+00000d20: 666f 726d 6174 7465 7228 7365 6c66 2c20  formatter(self, 
+00000d30: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+00000d40: 2222 220a 2020 2020 2020 2020 466f 7220  """.        For 
+00000d50: 736f 6d65 2076 616c 6964 6174 6f72 7320  some validators 
+00000d60: 7265 7475 726e 7320 6120 666f 726d 6174  returns a format
+00000d70: 7465 6420 7665 7273 696f 6e20 286d 6174  ted version (mat
+00000d80: 6368 696e 6720 7468 6520 7661 6c69 6461  ching the valida
+00000d90: 746f 7229 0a20 2020 2020 2020 206f 6620  tor).        of 
+00000da0: 7661 6c75 652e 204f 7468 6572 7769 7365  value. Otherwise
+00000db0: 206a 7573 7420 7265 7475 726e 7320 7468   just returns th
+00000dc0: 6520 7661 6c75 652e 0a20 2020 2020 2020  e value..       
+00000dd0: 2022 2222 0a20 2020 2020 2020 2072 6574   """.        ret
+00000de0: 7572 6e20 7661 6c75 650a 0a20 2020 2040  urn value..    @
+00000df0: 7374 6174 6963 6d65 7468 6f64 0a20 2020  staticmethod.   
+00000e00: 2064 6566 2076 616c 6964 6174 6528 7661   def validate(va
+00000e10: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
+00000e20: 6f6e 6529 3a0a 2020 2020 2020 2020 7261  one):.        ra
+00000e30: 6973 6520 4e6f 7449 6d70 6c65 6d65 6e74  ise NotImplement
+00000e40: 6564 4572 726f 720a 0a20 2020 2064 6566  edError..    def
+00000e50: 205f 5f63 616c 6c5f 5f28 7365 6c66 2c20   __call__(self, 
+00000e60: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
+00000e70: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00000e80: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00000e90: 2072 6574 7572 6e20 7365 6c66 2e76 616c   return self.val
+00000ea0: 6964 6174 6528 7661 6c75 652c 2072 6563  idate(value, rec
+00000eb0: 6f72 645f 6964 292c 204e 6f6e 650a 2020  ord_id), None.  
+00000ec0: 2020 2020 2020 6578 6365 7074 2056 616c        except Val
+00000ed0: 6964 6174 696f 6e45 7272 6f72 2061 7320  idationError as 
+00000ee0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00000ef0: 6574 7572 6e20 7661 6c75 652c 2065 2e6d  eturn value, e.m
+00000f00: 6573 7361 6765 0a0a 0a64 6566 2076 616c  essage...def val
+00000f10: 6964 6174 6f72 5f63 616c 6c65 7228 6675  idator_caller(fu
+00000f20: 6e63 2c20 7661 6c75 652c 2072 6563 6f72  nc, value, recor
+00000f30: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+00000f40: 7661 6c69 6461 7465 203d 2067 6574 6174  validate = getat
+00000f50: 7472 2866 756e 632c 2022 7661 6c69 6461  tr(func, "valida
+00000f60: 7465 222c 204e 6f6e 6529 0a20 2020 2069  te", None).    i
+00000f70: 6620 7661 6c69 6461 7465 2061 6e64 2076  f validate and v
+00000f80: 616c 6964 6174 6520 6973 206e 6f74 2056  alidate is not V
+00000f90: 616c 6964 6174 6f72 2e76 616c 6964 6174  alidator.validat
+00000fa0: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
+00000fb0: 6e20 7661 6c69 6461 7465 2876 616c 7565  n validate(value
+00000fc0: 2c20 7265 636f 7264 5f69 6429 0a20 2020  , record_id).   
+00000fd0: 2076 616c 7565 2c20 6572 726f 7220 3d20   value, error = 
+00000fe0: 6675 6e63 2876 616c 7565 290a 2020 2020  func(value).    
+00000ff0: 6966 2065 7272 6f72 2069 7320 6e6f 7420  if error is not 
+00001000: 4e6f 6e65 3a0a 2020 2020 2020 2020 7261  None:.        ra
+00001010: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+00001020: 726f 7228 6572 726f 7229 0a20 2020 2072  ror(error).    r
+00001030: 6574 7572 6e20 7661 6c75 650a 0a0a 636c  eturn value...cl
+00001040: 6173 7320 4953 5f4d 4154 4348 2856 616c  ass IS_MATCH(Val
+00001050: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
+00001060: 0a20 2020 2045 7861 6d70 6c65 3a0a 2020  .    Example:.  
+00001070: 2020 2020 2020 5573 6564 2061 733a 3a0a        Used as::.
+00001080: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
+00001090: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
+000010a0: 205f 6e61 6d65 3d27 6e61 6d65 272c 2072   _name='name', r
+000010b0: 6571 7569 7265 733d 4953 5f4d 4154 4348  equires=IS_MATCH
+000010c0: 2827 2e2b 2729 290a 0a20 2020 2054 6865  ('.+'))..    The
+000010d0: 2061 7267 756d 656e 7420 6f66 2049 535f   argument of IS_
+000010e0: 4d41 5443 4820 6973 2061 2072 6567 756c  MATCH is a regul
+000010f0: 6172 2065 7870 7265 7373 696f 6e3a 3a0a  ar expression::.
+00001100: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00001110: 4d41 5443 4828 272e 2b27 2928 2768 656c  MATCH('.+')('hel
+00001120: 6c6f 2729 0a20 2020 2020 2020 2028 2768  lo').        ('h
+00001130: 656c 6c6f 272c 204e 6f6e 6529 0a0a 2020  ello', None)..  
+00001140: 2020 2020 2020 3e3e 3e20 4953 5f4d 4154        >>> IS_MAT
+00001150: 4348 2827 6865 6c6c 2729 2827 6865 6c6c  CH('hell')('hell
+00001160: 6f27 290a 2020 2020 2020 2020 2827 6865  o').        ('he
+00001170: 6c6c 6f27 2c20 4e6f 6e65 290a 0a20 2020  llo', None)..   
+00001180: 2020 2020 203e 3e3e 2049 535f 4d41 5443       >>> IS_MATC
+00001190: 4828 2768 656c 6c2e 2a27 2c20 7374 7269  H('hell.*', stri
+000011a0: 6374 3d46 616c 7365 2928 2768 656c 6c6f  ct=False)('hello
+000011b0: 2729 0a20 2020 2020 2020 2028 2768 656c  ').        ('hel
+000011c0: 6c6f 272c 204e 6f6e 6529 0a0a 2020 2020  lo', None)..    
+000011d0: 2020 2020 3e3e 3e20 4953 5f4d 4154 4348      >>> IS_MATCH
+000011e0: 2827 6865 6c6c 6f27 2928 2773 6865 6c6c  ('hello')('shell
+000011f0: 6f27 290a 2020 2020 2020 2020 2827 7368  o').        ('sh
+00001200: 656c 6c6f 272c 2027 696e 7661 6c69 6420  ello', 'invalid 
+00001210: 6578 7072 6573 7369 6f6e 2729 0a0a 2020  expression')..  
+00001220: 2020 2020 2020 3e3e 3e20 4953 5f4d 4154        >>> IS_MAT
+00001230: 4348 2827 6865 6c6c 6f27 2c20 7365 6172  CH('hello', sear
+00001240: 6368 3d54 7275 6529 2827 7368 656c 6c6f  ch=True)('shello
+00001250: 2729 0a20 2020 2020 2020 2028 2773 6865  ').        ('she
+00001260: 6c6c 6f27 2c20 4e6f 6e65 290a 0a20 2020  llo', None)..   
+00001270: 2020 2020 203e 3e3e 2049 535f 4d41 5443       >>> IS_MATC
+00001280: 4828 2768 656c 6c6f 272c 2073 6561 7263  H('hello', searc
+00001290: 683d 5472 7565 2c20 7374 7269 6374 3d46  h=True, strict=F
+000012a0: 616c 7365 2928 2773 6865 6c6c 6f78 2729  alse)('shellox')
+000012b0: 0a20 2020 2020 2020 2028 2773 6865 6c6c  .        ('shell
+000012c0: 6f78 272c 204e 6f6e 6529 0a0a 2020 2020  ox', None)..    
+000012d0: 2020 2020 3e3e 3e20 4953 5f4d 4154 4348      >>> IS_MATCH
+000012e0: 2827 2e2a 6865 6c6c 6f2e 2a27 2c20 7365  ('.*hello.*', se
+000012f0: 6172 6368 3d54 7275 652c 2073 7472 6963  arch=True, stric
+00001300: 743d 4661 6c73 6529 2827 7368 656c 6c6f  t=False)('shello
+00001310: 7827 290a 2020 2020 2020 2020 2827 7368  x').        ('sh
+00001320: 656c 6c6f 7827 2c20 4e6f 6e65 290a 0a20  ellox', None).. 
+00001330: 2020 2020 2020 203e 3e3e 2049 535f 4d41         >>> IS_MA
+00001340: 5443 4828 272e 2b27 2928 2727 290a 2020  TCH('.+')('').  
+00001350: 2020 2020 2020 2827 272c 2027 696e 7661        ('', 'inva
+00001360: 6c69 6420 6578 7072 6573 7369 6f6e 2729  lid expression')
+00001370: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
+00001380: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00001390: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+000013a0: 2020 2065 7870 7265 7373 696f 6e2c 0a20     expression,. 
+000013b0: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+000013c0: 7361 6765 3d22 496e 7661 6c69 6420 6578  sage="Invalid ex
+000013d0: 7072 6573 7369 6f6e 222c 0a20 2020 2020  pression",.     
+000013e0: 2020 2073 7472 6963 743d 4661 6c73 652c     strict=False,
+000013f0: 0a20 2020 2020 2020 2073 6561 7263 683d  .        search=
+00001400: 4661 6c73 652c 0a20 2020 2020 2020 2065  False,.        e
+00001410: 7874 7261 6374 3d46 616c 7365 2c0a 2020  xtract=False,.  
+00001420: 2020 2020 2020 6973 5f75 6e69 636f 6465        is_unicode
+00001430: 3d46 616c 7365 2c0a 2020 2020 293a 0a20  =False,.    ):. 
+00001440: 2020 2020 2020 2069 6620 7374 7269 6374         if strict
+00001450: 206f 7220 6e6f 7420 7365 6172 6368 3a0a   or not search:.
+00001460: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00001470: 6f74 2065 7870 7265 7373 696f 6e2e 7374  ot expression.st
+00001480: 6172 7473 7769 7468 2822 5e22 293a 0a20  artswith("^"):. 
+00001490: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000014a0: 7870 7265 7373 696f 6e20 3d20 225e 2825  xpression = "^(%
+000014b0: 7329 2220 2520 6578 7072 6573 7369 6f6e  s)" % expression
+000014c0: 0a20 2020 2020 2020 2069 6620 7374 7269  .        if stri
+000014d0: 6374 3a0a 2020 2020 2020 2020 2020 2020  ct:.            
+000014e0: 6966 206e 6f74 2065 7870 7265 7373 696f  if not expressio
+000014f0: 6e2e 656e 6473 7769 7468 2822 2422 293a  n.endswith("$"):
+00001500: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001510: 2065 7870 7265 7373 696f 6e20 3d20 2228   expression = "(
+00001520: 2573 2924 2220 2520 6578 7072 6573 7369  %s)$" % expressi
+00001530: 6f6e 0a20 2020 2020 2020 2069 6620 6973  on.        if is
+00001540: 5f75 6e69 636f 6465 3a0a 2020 2020 2020  _unicode:.      
+00001550: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00001560: 6e73 7461 6e63 6528 6578 7072 6573 7369  nstance(expressi
+00001570: 6f6e 2c20 756e 6963 6f64 6554 293a 0a20  on, unicodeT):. 
+00001580: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00001590: 7870 7265 7373 696f 6e20 3d20 6578 7072  xpression = expr
+000015a0: 6573 7369 6f6e 2e64 6563 6f64 6528 2275  ession.decode("u
+000015b0: 7466 3822 290a 2020 2020 2020 2020 2020  tf8").          
+000015c0: 2020 7365 6c66 2e72 6567 6578 203d 2072    self.regex = r
+000015d0: 652e 636f 6d70 696c 6528 6578 7072 6573  e.compile(expres
+000015e0: 7369 6f6e 2c20 7265 2e55 4e49 434f 4445  sion, re.UNICODE
+000015f0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00001600: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00001610: 2e72 6567 6578 203d 2072 652e 636f 6d70  .regex = re.comp
+00001620: 696c 6528 6578 7072 6573 7369 6f6e 290a  ile(expression).
+00001630: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00001640: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+00001650: 6f72 5f6d 6573 7361 6765 0a20 2020 2020  or_message.     
+00001660: 2020 2073 656c 662e 6578 7472 6163 7420     self.extract 
+00001670: 3d20 6578 7472 6163 740a 2020 2020 2020  = extract.      
+00001680: 2020 7365 6c66 2e69 735f 756e 6963 6f64    self.is_unicod
+00001690: 6520 3d20 6973 5f75 6e69 636f 6465 206f  e = is_unicode o
+000016a0: 7220 6e6f 7420 5059 320a 0a20 2020 2064  r not PY2..    d
+000016b0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
+000016c0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
+000016d0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
+000016e0: 2020 6966 206e 6f74 2050 5932 3a20 2023    if not PY2:  #
+000016f0: 2050 5933 2063 6f6e 7665 7274 2062 7974   PY3 convert byt
+00001700: 6573 2074 6f20 756e 6963 6f64 650a 2020  es to unicode.  
+00001710: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
+00001720: 3d20 746f 5f75 6e69 636f 6465 2876 616c  = to_unicode(val
+00001730: 7565 290a 0a20 2020 2020 2020 2069 6620  ue)..        if 
+00001740: 7365 6c66 2e69 735f 756e 6963 6f64 6520  self.is_unicode 
+00001750: 6f72 206e 6f74 2050 5932 3a0a 2020 2020  or not PY2:.    
+00001760: 2020 2020 2020 2020 6966 206e 6f74 2069          if not i
+00001770: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
+00001780: 2075 6e69 636f 6465 5429 3a0a 2020 2020   unicodeT):.    
+00001790: 2020 2020 2020 2020 2020 2020 6d61 7463              matc
+000017a0: 6820 3d20 7365 6c66 2e72 6567 6578 2e73  h = self.regex.s
+000017b0: 6561 7263 6828 7374 7228 7661 6c75 6529  earch(str(value)
+000017c0: 2e64 6563 6f64 6528 2275 7466 3822 2929  .decode("utf8"))
+000017d0: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+000017e0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000017f0: 2020 206d 6174 6368 203d 2073 656c 662e     match = self.
+00001800: 7265 6765 782e 7365 6172 6368 2876 616c  regex.search(val
+00001810: 7565 290a 2020 2020 2020 2020 656c 7365  ue).        else
+00001820: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+00001830: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00001840: 7661 6c75 652c 2075 6e69 636f 6465 5429  value, unicodeT)
+00001850: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00001860: 2020 6d61 7463 6820 3d20 7365 6c66 2e72    match = self.r
+00001870: 6567 6578 2e73 6561 7263 6828 7374 7228  egex.search(str(
+00001880: 7661 6c75 6529 290a 2020 2020 2020 2020  value)).        
+00001890: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000018a0: 2020 2020 2020 2020 2020 6d61 7463 6820            match 
+000018b0: 3d20 7365 6c66 2e72 6567 6578 2e73 6561  = self.regex.sea
+000018c0: 7263 6828 7661 6c75 652e 656e 636f 6465  rch(value.encode
+000018d0: 2822 7574 6638 2229 290a 2020 2020 2020  ("utf8")).      
+000018e0: 2020 6966 206d 6174 6368 2069 7320 6e6f    if match is no
+000018f0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00001900: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00001910: 6578 7472 6163 7420 616e 6420 6d61 7463  extract and matc
+00001920: 682e 6772 6f75 7028 2920 6f72 2076 616c  h.group() or val
+00001930: 7565 0a20 2020 2020 2020 2072 6169 7365  ue.        raise
+00001940: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+00001950: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+00001960: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+00001970: 6167 6529 290a 0a0a 636c 6173 7320 4953  age))...class IS
+00001980: 5f45 5155 414c 5f54 4f28 5661 6c69 6461  _EQUAL_TO(Valida
+00001990: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
+000019a0: 2020 4578 616d 706c 653a 0a20 2020 2020    Example:.     
+000019b0: 2020 2055 7365 6420 6173 3a3a 0a0a 2020     Used as::..  
+000019c0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
+000019d0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
+000019e0: 616d 653d 2770 6173 7377 6f72 6427 290a  ame='password').
+000019f0: 2020 2020 2020 2020 2020 2020 494e 5055              INPU
+00001a00: 5428 5f74 7970 653d 2774 6578 7427 2c20  T(_type='text', 
+00001a10: 5f6e 616d 653d 2770 6173 7377 6f72 6432  _name='password2
+00001a20: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00001a30: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
+00001a40: 5f45 5155 414c 5f54 4f28 7265 7175 6573  _EQUAL_TO(reques
+00001a50: 742e 7661 7273 2e70 6173 7377 6f72 6429  t.vars.password)
+00001a60: 290a 0a20 2020 2054 6865 2061 7267 756d  )..    The argum
+00001a70: 656e 7420 6f66 2049 535f 4551 5541 4c5f  ent of IS_EQUAL_
+00001a80: 544f 2069 7320 6120 7374 7269 6e67 3a3a  TO is a string::
+00001a90: 0a0a 2020 2020 2020 2020 3e3e 3e20 4953  ..        >>> IS
+00001aa0: 5f45 5155 414c 5f54 4f28 2761 6161 2729  _EQUAL_TO('aaa')
+00001ab0: 2827 6161 6127 290a 2020 2020 2020 2020  ('aaa').        
+00001ac0: 2827 6161 6127 2c20 4e6f 6e65 290a 0a20  ('aaa', None).. 
+00001ad0: 2020 2020 2020 203e 3e3e 2049 535f 4551         >>> IS_EQ
+00001ae0: 5541 4c5f 544f 2827 6161 6127 2928 2761  UAL_TO('aaa')('a
+00001af0: 6162 2729 0a20 2020 2020 2020 2028 2761  ab').        ('a
+00001b00: 6162 272c 2027 6e6f 206d 6174 6368 2729  ab', 'no match')
+00001b10: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
+00001b20: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00001b30: 2c20 6578 7072 6573 7369 6f6e 2c20 6572  , expression, er
+00001b40: 726f 725f 6d65 7373 6167 653d 224e 6f20  ror_message="No 
+00001b50: 6d61 7463 6822 293a 0a20 2020 2020 2020  match"):.       
+00001b60: 2073 656c 662e 6578 7072 6573 7369 6f6e   self.expression
+00001b70: 203d 2065 7870 7265 7373 696f 6e0a 2020   = expression.  
+00001b80: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+00001b90: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+00001ba0: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
+00001bb0: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+00001bc0: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+00001bd0: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+00001be0: 2069 6620 7661 6c75 6520 213d 2073 656c   if value != sel
+00001bf0: 662e 6578 7072 6573 7369 6f6e 3a0a 2020  f.expression:.  
+00001c00: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00001c10: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+00001c20: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+00001c30: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+00001c40: 6765 2929 0a20 2020 2020 2020 2072 6574  ge)).        ret
+00001c50: 7572 6e20 7661 6c75 650a 0a0a 636c 6173  urn value...clas
+00001c60: 7320 4953 5f45 5850 5228 5661 6c69 6461  s IS_EXPR(Valida
+00001c70: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
+00001c80: 2020 4578 616d 706c 653a 0a20 2020 2020    Example:.     
+00001c90: 2020 2055 7365 6420 6173 3a3a 0a0a 2020     Used as::..  
+00001ca0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
+00001cb0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
+00001cc0: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
+00001cd0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00001ce0: 6972 6573 3d49 535f 4558 5052 2827 3520  ires=IS_EXPR('5 
+00001cf0: 3c20 696e 7428 7661 6c75 6529 203c 2031  < int(value) < 1
+00001d00: 3027 2929 0a0a 2020 2020 5468 6520 6172  0'))..    The ar
+00001d10: 6775 6d65 6e74 206f 6620 4953 5f45 5850  gument of IS_EXP
+00001d20: 5220 6d75 7374 2062 6520 7079 7468 6f6e  R must be python
+00001d30: 2063 6f6e 6469 7469 6f6e 3a3a 0a0a 2020   condition::..  
+00001d40: 2020 2020 2020 3e3e 3e20 4953 5f45 5850        >>> IS_EXP
+00001d50: 5228 2769 6e74 2876 616c 7565 2920 3c20  R('int(value) < 
+00001d60: 3227 2928 2731 2729 0a20 2020 2020 2020  2')('1').       
+00001d70: 2028 2731 272c 204e 6f6e 6529 0a0a 2020   ('1', None)..  
+00001d80: 2020 2020 2020 3e3e 3e20 4953 5f45 5850        >>> IS_EXP
+00001d90: 5228 2769 6e74 2876 616c 7565 2920 3c20  R('int(value) < 
+00001da0: 3227 2928 2732 2729 0a20 2020 2020 2020  2')('2').       
+00001db0: 2028 2732 272c 2027 696e 7661 6c69 6420   ('2', 'invalid 
+00001dc0: 6578 7072 6573 7369 6f6e 2729 0a0a 2020  expression')..  
+00001dd0: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
+00001de0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+00001df0: 2073 656c 662c 2065 7870 7265 7373 696f   self, expressio
+00001e00: 6e2c 2065 7272 6f72 5f6d 6573 7361 6765  n, error_message
+00001e10: 3d22 496e 7661 6c69 6420 6578 7072 6573  ="Invalid expres
+00001e20: 7369 6f6e 222c 2065 6e76 6972 6f6e 6d65  sion", environme
+00001e30: 6e74 3d4e 6f6e 650a 2020 2020 293a 0a20  nt=None.    ):. 
+00001e40: 2020 2020 2020 2073 656c 662e 6578 7072         self.expr
+00001e50: 6573 7369 6f6e 203d 2065 7870 7265 7373  ession = express
+00001e60: 696f 6e0a 2020 2020 2020 2020 7365 6c66  ion.        self
+00001e70: 2e65 7272 6f72 5f6d 6573 7361 6765 203d  .error_message =
+00001e80: 2065 7272 6f72 5f6d 6573 7361 6765 0a20   error_message. 
+00001e90: 2020 2020 2020 2073 656c 662e 656e 7669         self.envi
+00001ea0: 726f 6e6d 656e 7420 3d20 656e 7669 726f  ronment = enviro
+00001eb0: 6e6d 656e 7420 6f72 207b 7d0a 0a20 2020  nment or {}..   
+00001ec0: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
+00001ed0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
+00001ee0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+00001ef0: 2020 2020 6966 2063 616c 6c61 626c 6528      if callable(
+00001f00: 7365 6c66 2e65 7870 7265 7373 696f 6e29  self.expression)
+00001f10: 3a0a 2020 2020 2020 2020 2020 2020 6d65  :.            me
+00001f20: 7373 6167 6520 3d20 7365 6c66 2e65 7870  ssage = self.exp
+00001f30: 7265 7373 696f 6e28 7661 6c75 6529 0a20  ression(value). 
+00001f40: 2020 2020 2020 2020 2020 2069 6620 6d65             if me
+00001f50: 7373 6167 653a 0a20 2020 2020 2020 2020  ssage:.         
+00001f60: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00001f70: 6964 6174 696f 6e45 7272 6f72 286d 6573  idationError(mes
+00001f80: 7361 6765 290a 2020 2020 2020 2020 2020  sage).          
+00001f90: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+00001fa0: 2020 2020 2020 2023 2066 6f72 2062 6163         # for bac
+00001fb0: 6b77 6172 6420 636f 6d70 6174 6962 696c  kward compatibil
+00001fc0: 6974 790a 2020 2020 2020 2020 7365 6c66  ity.        self
+00001fd0: 2e65 6e76 6972 6f6e 6d65 6e74 2e75 7064  .environment.upd
+00001fe0: 6174 6528 7661 6c75 653d 7661 6c75 6529  ate(value=value)
+00001ff0: 0a20 2020 2020 2020 2065 7865 6328 225f  .        exec("_
+00002000: 5f72 6574 5f5f 3d22 202b 2073 656c 662e  _ret__=" + self.
+00002010: 6578 7072 6573 7369 6f6e 2c20 7365 6c66  expression, self
+00002020: 2e65 6e76 6972 6f6e 6d65 6e74 290a 2020  .environment).  
+00002030: 2020 2020 2020 6966 2073 656c 662e 656e        if self.en
+00002040: 7669 726f 6e6d 656e 745b 225f 5f72 6574  vironment["__ret
+00002050: 5f5f 225d 3a0a 2020 2020 2020 2020 2020  __"]:.          
+00002060: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+00002070: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00002080: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
+00002090: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+000020a0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+000020b0: 290a 0a0a 636c 6173 7320 4953 5f4c 454e  )...class IS_LEN
+000020c0: 4754 4828 5661 6c69 6461 746f 7229 3a0a  GTH(Validator):.
+000020d0: 2020 2020 2222 220a 2020 2020 4368 6563      """.    Chec
+000020e0: 6b73 2069 6620 6c65 6e67 7468 206f 6620  ks if length of 
+000020f0: 6669 656c 6427 7320 7661 6c75 6520 6669  field's value fi
+00002100: 7473 2062 6574 7765 656e 2067 6976 656e  ts between given
+00002110: 2062 6f75 6e64 6172 6965 732e 2057 6f72   boundaries. Wor
+00002120: 6b73 0a20 2020 2066 6f72 2062 6f74 6820  ks.    for both 
+00002130: 7465 7874 2061 6e64 2066 696c 6520 696e  text and file in
+00002140: 7075 7473 2e0a 0a20 2020 2041 7267 733a  puts...    Args:
+00002150: 0a20 2020 2020 2020 206d 6178 7369 7a65  .        maxsize
+00002160: 3a20 6d61 7869 6d75 6d20 616c 6c6f 7765  : maximum allowe
+00002170: 6420 6c65 6e67 7468 202f 2073 697a 650a  d length / size.
+00002180: 2020 2020 2020 2020 6d69 6e73 697a 653a          minsize:
+00002190: 206d 696e 696d 756d 2061 6c6c 6f77 6564   minimum allowed
+000021a0: 206c 656e 6774 6820 2f20 7369 7a65 0a0a   length / size..
+000021b0: 2020 2020 4578 616d 706c 6573 3a0a 2020      Examples:.  
+000021c0: 2020 2020 2020 4368 6563 6b20 6966 2074        Check if t
+000021d0: 6578 7420 7374 7269 6e67 2069 7320 7368  ext string is sh
+000021e0: 6f72 7465 7220 7468 616e 2033 3320 6368  orter than 33 ch
+000021f0: 6172 6163 7465 7273 3a3a 0a0a 2020 2020  aracters::..    
+00002200: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00002210: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00002220: 653d 276e 616d 6527 2c20 7265 7175 6972  e='name', requir
+00002230: 6573 3d49 535f 4c45 4e47 5448 2833 3229  es=IS_LENGTH(32)
+00002240: 290a 0a20 2020 2020 2020 2043 6865 636b  )..        Check
+00002250: 2069 6620 7061 7373 776f 7264 2073 7472   if password str
+00002260: 696e 6720 6973 206c 6f6e 6765 7220 7468  ing is longer th
+00002270: 616e 2035 2063 6861 7261 6374 6572 733a  an 5 characters:
+00002280: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+00002290: 4e50 5554 285f 7479 7065 3d27 7061 7373  NPUT(_type='pass
+000022a0: 776f 7264 272c 205f 6e61 6d65 3d27 6e61  word', _name='na
+000022b0: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+000022c0: 5f4c 454e 4754 4828 6d69 6e73 697a 653d  _LENGTH(minsize=
+000022d0: 3629 290a 0a20 2020 2020 2020 2043 6865  6))..        Che
+000022e0: 636b 2069 6620 7570 6c6f 6164 6564 2066  ck if uploaded f
+000022f0: 696c 6520 6861 7320 7369 7a65 2062 6574  ile has size bet
+00002300: 7765 656e 2031 4b42 2061 6e64 2031 4d42  ween 1KB and 1MB
+00002310: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+00002320: 494e 5055 5428 5f74 7970 653d 2766 696c  INPUT(_type='fil
+00002330: 6527 2c20 5f6e 616d 653d 276e 616d 6527  e', _name='name'
+00002340: 2c20 7265 7175 6972 6573 3d49 535f 4c45  , requires=IS_LE
+00002350: 4e47 5448 2831 3034 3835 3736 2c20 3130  NGTH(1048576, 10
+00002360: 3234 2929 0a0a 2020 2020 2020 2020 4f74  24))..        Ot
+00002370: 6865 7220 6578 616d 706c 6573 3a3a 0a0a  her examples::..
+00002380: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00002390: 4953 5f4c 454e 4754 4828 2928 2727 290a  IS_LENGTH()('').
+000023a0: 2020 2020 2020 2020 2020 2020 2827 272c              ('',
+000023b0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+000023c0: 2020 203e 3e3e 2049 535f 4c45 4e47 5448     >>> IS_LENGTH
+000023d0: 2829 2827 3132 3334 3536 3738 3930 2729  ()('1234567890')
+000023e0: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
+000023f0: 3233 3435 3637 3839 3027 2c20 4e6f 6e65  234567890', None
+00002400: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00002410: 3e20 4953 5f4c 454e 4754 4828 6d61 7873  > IS_LENGTH(maxs
+00002420: 697a 653d 352c 206d 696e 7369 7a65 3d30  ize=5, minsize=0
+00002430: 2928 2731 3233 3435 3637 3839 3027 2920  )('1234567890') 
+00002440: 2023 2074 6f6f 206c 6f6e 670a 2020 2020   # too long.    
+00002450: 2020 2020 2020 2020 2827 3132 3334 3536          ('123456
+00002460: 3738 3930 272c 2027 656e 7465 7220 6672  7890', 'enter fr
+00002470: 6f6d 2030 2074 6f20 3520 6368 6172 6163  om 0 to 5 charac
+00002480: 7465 7273 2729 0a20 2020 2020 2020 2020  ters').         
+00002490: 2020 203e 3e3e 2049 535f 4c45 4e47 5448     >>> IS_LENGTH
+000024a0: 286d 6178 7369 7a65 3d35 302c 206d 696e  (maxsize=50, min
+000024b0: 7369 7a65 3d32 3029 2827 3132 3334 3536  size=20)('123456
+000024c0: 3738 3930 2729 2020 2320 746f 6f20 7368  7890')  # too sh
+000024d0: 6f72 740a 2020 2020 2020 2020 2020 2020  ort.            
+000024e0: 2827 3132 3334 3536 3738 3930 272c 2027  ('1234567890', '
+000024f0: 656e 7465 7220 6672 6f6d 2032 3020 746f  enter from 20 to
+00002500: 2035 3020 6368 6172 6163 7465 7273 2729   50 characters')
+00002510: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+00002520: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+00002530: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+00002540: 2020 6d61 7873 697a 653d 3235 352c 0a20    maxsize=255,. 
+00002550: 2020 2020 2020 206d 696e 7369 7a65 3d30         minsize=0
+00002560: 2c0a 2020 2020 2020 2020 6572 726f 725f  ,.        error_
+00002570: 6d65 7373 6167 653d 2245 6e74 6572 2066  message="Enter f
+00002580: 726f 6d20 2528 6d69 6e29 6720 746f 2025  rom %(min)g to %
+00002590: 286d 6178 2967 2063 6861 7261 6374 6572  (max)g character
+000025a0: 7322 2c0a 2020 2020 293a 0a20 2020 2020  s",.    ):.     
+000025b0: 2020 2073 656c 662e 6d61 7873 697a 6520     self.maxsize 
+000025c0: 3d20 6d61 7873 697a 650a 2020 2020 2020  = maxsize.      
+000025d0: 2020 7365 6c66 2e6d 696e 7369 7a65 203d    self.minsize =
+000025e0: 206d 696e 7369 7a65 0a20 2020 2020 2020   minsize.       
+000025f0: 2073 656c 662e 6572 726f 725f 6d65 7373   self.error_mess
+00002600: 6167 6520 3d20 6572 726f 725f 6d65 7373  age = error_mess
+00002610: 6167 650a 0a20 2020 2064 6566 2076 616c  age..    def val
+00002620: 6964 6174 6528 7365 6c66 2c20 7661 6c75  idate(self, valu
+00002630: 652c 2072 6563 6f72 645f 6964 3d4e 6f6e  e, record_id=Non
+00002640: 6529 3a0a 2020 2020 2020 2020 6966 2076  e):.        if v
+00002650: 616c 7565 2069 7320 4e6f 6e65 3a0a 2020  alue is None:.  
+00002660: 2020 2020 2020 2020 2020 6c65 6e67 7468            length
+00002670: 203d 2030 0a20 2020 2020 2020 2065 6c69   = 0.        eli
+00002680: 6620 6973 696e 7374 616e 6365 2876 616c  f isinstance(val
+00002690: 7565 2c20 7374 7229 3a0a 2020 2020 2020  ue, str):.      
+000026a0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
+000026b0: 2020 2020 2020 2020 2020 206c 656e 6774             lengt
+000026c0: 6820 3d20 6c65 6e28 746f 5f75 6e69 636f  h = len(to_unico
+000026d0: 6465 2876 616c 7565 2929 0a20 2020 2020  de(value)).     
+000026e0: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
+000026f0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00002700: 656e 6774 6820 3d20 6c65 6e28 7661 6c75  ength = len(valu
+00002710: 6529 0a20 2020 2020 2020 2065 6c69 6620  e).        elif 
+00002720: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
+00002730: 2c20 756e 6963 6f64 6554 293a 0a20 2020  , unicodeT):.   
+00002740: 2020 2020 2020 2020 206c 656e 6774 6820           length 
+00002750: 3d20 6c65 6e28 7661 6c75 6529 0a20 2020  = len(value).   
+00002760: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+00002770: 2076 616c 7565 2e65 6e63 6f64 6528 2275   value.encode("u
+00002780: 7466 3822 290a 2020 2020 2020 2020 656c  tf8").        el
+00002790: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
+000027a0: 6c75 652c 2028 6279 7465 732c 2062 7974  lue, (bytes, byt
+000027b0: 6561 7272 6179 2c20 7475 706c 652c 206c  earray, tuple, l
+000027c0: 6973 7429 293a 0a20 2020 2020 2020 2020  ist)):.         
+000027d0: 2020 206c 656e 6774 6820 3d20 6c65 6e28     length = len(
+000027e0: 7661 6c75 6529 0a20 2020 2020 2020 2065  value).        e
+000027f0: 6c69 6620 6973 696e 7374 616e 6365 2876  lif isinstance(v
+00002800: 616c 7565 2c20 6367 692e 4669 656c 6453  alue, cgi.FieldS
+00002810: 746f 7261 6765 293a 0a20 2020 2020 2020  torage):.       
+00002820: 2020 2020 2069 6620 7661 6c75 652e 6669       if value.fi
+00002830: 6c65 3a0a 2020 2020 2020 2020 2020 2020  le:.            
+00002840: 2020 2020 7661 6c75 652e 6669 6c65 2e73      value.file.s
+00002850: 6565 6b28 302c 206f 732e 5345 454b 5f45  eek(0, os.SEEK_E
+00002860: 4e44 290a 2020 2020 2020 2020 2020 2020  ND).            
+00002870: 2020 2020 6c65 6e67 7468 203d 2076 616c      length = val
+00002880: 7565 2e66 696c 652e 7465 6c6c 2829 0a20  ue.file.tell(). 
+00002890: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+000028a0: 616c 7565 2e66 696c 652e 7365 656b 2830  alue.file.seek(0
+000028b0: 2c20 6f73 2e53 4545 4b5f 5345 5429 0a20  , os.SEEK_SET). 
+000028c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000028d0: 6861 7361 7474 7228 7661 6c75 652c 2022  hasattr(value, "
+000028e0: 7661 6c75 6522 293a 0a20 2020 2020 2020  value"):.       
+000028f0: 2020 2020 2020 2020 2076 616c 203d 2076           val = v
+00002900: 616c 7565 2e76 616c 7565 0a20 2020 2020  alue.value.     
+00002910: 2020 2020 2020 2020 2020 2069 6620 7661             if va
+00002920: 6c3a 0a20 2020 2020 2020 2020 2020 2020  l:.             
+00002930: 2020 2020 2020 206c 656e 6774 6820 3d20         length = 
+00002940: 6c65 6e28 7661 6c29 0a20 2020 2020 2020  len(val).       
+00002950: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00002960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002970: 2020 206c 656e 6774 6820 3d20 300a 2020     length = 0.  
+00002980: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00002990: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+000029a0: 7374 7228 7661 6c75 6529 0a20 2020 2020  str(value).     
+000029b0: 2020 2020 2020 206c 656e 6774 6820 3d20         length = 
+000029c0: 6c65 6e28 7374 7228 7661 6c75 6529 290a  len(str(value)).
+000029d0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+000029e0: 6d69 6e73 697a 6520 3c3d 206c 656e 6774  minsize <= lengt
+000029f0: 6820 3c3d 2073 656c 662e 6d61 7873 697a  h <= self.maxsiz
+00002a00: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00002a10: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
+00002a20: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00002a30: 7469 6f6e 4572 726f 7228 0a20 2020 2020  tionError(.     
+00002a40: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+00002a50: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+00002a60: 725f 6d65 7373 6167 6529 0a20 2020 2020  r_message).     
+00002a70: 2020 2020 2020 2025 2064 6963 7428 6d69         % dict(mi
+00002a80: 6e3d 7365 6c66 2e6d 696e 7369 7a65 2c20  n=self.minsize, 
+00002a90: 6d61 783d 7365 6c66 2e6d 6178 7369 7a65  max=self.maxsize
+00002aa0: 290a 2020 2020 2020 2020 290a 0a0a 636c  ).        )...cl
+00002ab0: 6173 7320 4953 5f4a 534f 4e28 5661 6c69  ass IS_JSON(Vali
+00002ac0: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
+00002ad0: 2020 2020 4578 616d 706c 653a 0a20 2020      Example:.   
+00002ae0: 2020 2020 2055 7365 6420 6173 3a3a 0a0a       Used as::..
+00002af0: 2020 2020 2020 2020 2020 2020 494e 5055              INPU
+00002b00: 5428 5f74 7970 653d 2774 6578 7427 2c20  T(_type='text', 
+00002b10: 5f6e 616d 653d 276e 616d 6527 2c0a 2020  _name='name',.  
+00002b20: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00002b30: 7175 6972 6573 3d49 535f 4a53 4f4e 2865  quires=IS_JSON(e
+00002b40: 7272 6f72 5f6d 6573 7361 6765 3d22 5468  rror_message="Th
+00002b50: 6973 2069 7320 6e6f 7420 6120 7661 6c69  is is not a vali
+00002b60: 6420 6a73 6f6e 2069 6e70 7574 2229 0a0a  d json input")..
+00002b70: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00002b80: 4953 5f4a 534f 4e28 2928 277b 2261 223a  IS_JSON()('{"a":
+00002b90: 2031 3030 7d27 290a 2020 2020 2020 2020   100}').        
+00002ba0: 2020 2020 287b 7527 6127 3a20 3130 307d      ({u'a': 100}
+00002bb0: 2c20 4e6f 6e65 290a 0a20 2020 2020 2020  , None)..       
+00002bc0: 2020 2020 203e 3e3e 2049 535f 4a53 4f4e       >>> IS_JSON
+00002bd0: 2829 2827 7370 616d 3132 3334 2729 0a20  ()('spam1234'). 
+00002be0: 2020 2020 2020 2020 2020 2028 2773 7061             ('spa
+00002bf0: 6d31 3233 3427 2c20 2769 6e76 616c 6964  m1234', 'invalid
+00002c00: 206a 736f 6e27 290a 2020 2020 2222 220a   json').    """.
+00002c10: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00002c20: 5f28 7365 6c66 2c20 6572 726f 725f 6d65  _(self, error_me
+00002c30: 7373 6167 653d 2249 6e76 616c 6964 206a  ssage="Invalid j
+00002c40: 736f 6e22 2c20 6e61 7469 7665 5f6a 736f  son", native_jso
+00002c50: 6e3d 4661 6c73 6529 3a0a 2020 2020 2020  n=False):.      
+00002c60: 2020 7365 6c66 2e6e 6174 6976 655f 6a73    self.native_js
+00002c70: 6f6e 203d 206e 6174 6976 655f 6a73 6f6e  on = native_json
+00002c80: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
+00002c90: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
+00002ca0: 726f 725f 6d65 7373 6167 650a 0a20 2020  ror_message..   
+00002cb0: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
+00002cc0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
+00002cd0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+00002ce0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00002cf0: 6528 7661 6c75 652c 2028 7374 722c 2062  e(value, (str, b
+00002d00: 7974 6573 2929 3a0a 2020 2020 2020 2020  ytes)):.        
+00002d10: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00002d20: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00002d30: 2e6e 6174 6976 655f 6a73 6f6e 3a0a 2020  .native_json:.  
+00002d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d50: 2020 6a73 6f6e 2e6c 6f61 6473 2876 616c    json.loads(val
+00002d60: 7565 2920 2023 2072 6169 7365 7320 6572  ue)  # raises er
+00002d70: 726f 7220 696e 2063 6173 6520 6f66 206d  ror in case of m
+00002d80: 616c 666f 726d 6564 206a 736f 6e0a 2020  alformed json.  
+00002d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002da0: 2020 7265 7475 726e 2076 616c 7565 2020    return value  
+00002db0: 2320 7468 6520 7365 7269 616c 697a 6564  # the serialized
+00002dc0: 2076 616c 7565 2069 7320 6e6f 7420 7061   value is not pa
+00002dd0: 7373 6564 0a20 2020 2020 2020 2020 2020  ssed.           
+00002de0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00002df0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00002e00: 6574 7572 6e20 6a73 6f6e 2e6c 6f61 6473  eturn json.loads
+00002e10: 2876 616c 7565 290a 2020 2020 2020 2020  (value).        
+00002e20: 2020 2020 6578 6365 7074 204a 534f 4e45      except JSONE
+00002e30: 7272 6f72 733a 0a20 2020 2020 2020 2020  rrors:.         
+00002e40: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00002e50: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
+00002e60: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+00002e70: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+00002e80: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00002e90: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002ea0: 726e 2076 616c 7565 0a0a 2020 2020 6465  rn value..    de
+00002eb0: 6620 666f 726d 6174 7465 7228 7365 6c66  f formatter(self
+00002ec0: 2c20 7661 6c75 6529 3a0a 2020 2020 2020  , value):.      
+00002ed0: 2020 6966 2076 616c 7565 2069 7320 4e6f    if value is No
+00002ee0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00002ef0: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
+00002f00: 2020 2020 6966 2073 656c 662e 6e61 7469      if self.nati
+00002f10: 7665 5f6a 736f 6e3a 0a20 2020 2020 2020  ve_json:.       
+00002f20: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
+00002f30: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+00002f40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00002f50: 726e 206a 736f 6e2e 6475 6d70 7328 7661  rn json.dumps(va
+00002f60: 6c75 6529 0a0a 0a63 6c61 7373 2049 535f  lue)...class IS_
+00002f70: 494e 5f53 4554 2856 616c 6964 6174 6f72  IN_SET(Validator
+00002f80: 293a 0a20 2020 2022 2222 0a20 2020 2045  ):.    """.    E
+00002f90: 7861 6d70 6c65 3a0a 2020 2020 2020 2020  xample:.        
+00002fa0: 5573 6564 2061 733a 3a0a 0a20 2020 2020  Used as::..     
+00002fb0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+00002fc0: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
+00002fd0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
+00002fe0: 2020 2020 2020 2020 2020 2072 6571 7569             requi
+00002ff0: 7265 733d 4953 5f49 4e5f 5345 5428 5b27  res=IS_IN_SET(['
+00003000: 6d61 7827 2c20 276a 6f68 6e27 5d2c 7a65  max', 'john'],ze
+00003010: 726f 3d27 2729 290a 0a20 2020 2054 6865  ro=''))..    The
+00003020: 2061 7267 756d 656e 7420 6f66 2049 535f   argument of IS_
+00003030: 494e 5f53 4554 206d 7573 7420 6265 2061  IN_SET must be a
+00003040: 206c 6973 7420 6f72 2073 6574 3a3a 0a0a   list or set::..
+00003050: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00003060: 4e5f 5345 5428 5b27 6d61 7827 2c20 276a  N_SET(['max', 'j
+00003070: 6f68 6e27 5d29 2827 6d61 7827 290a 2020  ohn'])('max').  
+00003080: 2020 2020 2020 2827 6d61 7827 2c20 4e6f        ('max', No
+00003090: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+000030a0: 4953 5f49 4e5f 5345 5428 5b27 6d61 7827  IS_IN_SET(['max'
+000030b0: 2c20 276a 6f68 6e27 5d29 2827 6d61 7373  , 'john'])('mass
+000030c0: 696d 6f27 290a 2020 2020 2020 2020 2827  imo').        ('
+000030d0: 6d61 7373 696d 6f27 2c20 2776 616c 7565  massimo', 'value
+000030e0: 206e 6f74 2061 6c6c 6f77 6564 2729 0a20   not allowed'). 
+000030f0: 2020 2020 2020 203e 3e3e 2049 535f 494e         >>> IS_IN
+00003100: 5f53 4554 285b 276d 6178 272c 2027 6a6f  _SET(['max', 'jo
+00003110: 686e 275d 2c20 6d75 6c74 6970 6c65 3d54  hn'], multiple=T
+00003120: 7275 6529 2828 276d 6178 272c 2027 6a6f  rue)(('max', 'jo
+00003130: 686e 2729 290a 2020 2020 2020 2020 2828  hn')).        ((
+00003140: 276d 6178 272c 2027 6a6f 686e 2729 2c20  'max', 'john'), 
+00003150: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+00003160: 3e20 4953 5f49 4e5f 5345 5428 5b27 6d61  > IS_IN_SET(['ma
+00003170: 7827 2c20 276a 6f68 6e27 5d2c 206d 756c  x', 'john'], mul
+00003180: 7469 706c 653d 5472 7565 2928 2827 6269  tiple=True)(('bi
+00003190: 6c6c 272c 2027 6a6f 686e 2729 290a 2020  ll', 'john')).  
+000031a0: 2020 2020 2020 2828 2762 696c 6c27 2c20        (('bill', 
+000031b0: 276a 6f68 6e27 292c 2027 7661 6c75 6520  'john'), 'value 
+000031c0: 6e6f 7420 616c 6c6f 7765 6427 290a 2020  not allowed').  
+000031d0: 2020 2020 2020 3e3e 3e20 4953 5f49 4e5f        >>> IS_IN_
+000031e0: 5345 5428 2827 6964 3127 2c27 6964 3227  SET(('id1','id2'
+000031f0: 292c 205b 2766 6972 7374 206c 6162 656c  ), ['first label
+00003200: 272c 2773 6563 6f6e 6420 6c61 6265 6c27  ','second label'
+00003210: 5d29 2827 6964 3127 2920 2320 5472 6164  ])('id1') # Trad
+00003220: 6974 696f 6e61 6c20 7761 790a 2020 2020  itional way.    
+00003230: 2020 2020 2827 6964 3127 2c20 4e6f 6e65      ('id1', None
+00003240: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00003250: 5f49 4e5f 5345 5428 7b27 6964 3127 3a27  _IN_SET({'id1':'
+00003260: 6669 7273 7420 6c61 6265 6c27 2c20 2769  first label', 'i
+00003270: 6432 273a 2773 6563 6f6e 6420 6c61 6265  d2':'second labe
+00003280: 6c27 7d29 2827 6964 3127 290a 2020 2020  l'})('id1').    
+00003290: 2020 2020 2827 6964 3127 2c20 4e6f 6e65      ('id1', None
+000032a0: 290a 2020 2020 2020 2020 3e3e 3e20 696d  ).        >>> im
+000032b0: 706f 7274 2069 7465 7274 6f6f 6c73 0a20  port itertools. 
+000032c0: 2020 2020 2020 203e 3e3e 2049 535f 494e         >>> IS_IN
+000032d0: 5f53 4554 2869 7465 7274 6f6f 6c73 2e63  _SET(itertools.c
+000032e0: 6861 696e 285b 2731 272c 2733 272c 2735  hain(['1','3','5
+000032f0: 275d 2c5b 2732 272c 2734 272c 2736 275d  '],['2','4','6']
+00003300: 2929 2827 3127 290a 2020 2020 2020 2020  ))('1').        
+00003310: 2827 3127 2c20 4e6f 6e65 290a 2020 2020  ('1', None).    
+00003320: 2020 2020 3e3e 3e20 4953 5f49 4e5f 5345      >>> IS_IN_SE
+00003330: 5428 5b28 2769 6431 272c 2766 6972 7374  T([('id1','first
+00003340: 206c 6162 656c 2729 2c20 2827 6964 3227   label'), ('id2'
+00003350: 2c27 7365 636f 6e64 206c 6162 656c 2729  ,'second label')
+00003360: 5d29 2827 6964 3127 2920 2320 5265 6475  ])('id1') # Redu
+00003370: 6e64 616e 7420 7761 790a 2020 2020 2020  ndant way.      
+00003380: 2020 2827 6964 3127 2c20 4e6f 6e65 290a    ('id1', None).
+00003390: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+000033a0: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
+000033b0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+000033c0: 2020 7468 6573 6574 2c0a 2020 2020 2020    theset,.      
+000033d0: 2020 6c61 6265 6c73 3d4e 6f6e 652c 0a20    labels=None,. 
+000033e0: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+000033f0: 7361 6765 3d22 5661 6c75 6520 6e6f 7420  sage="Value not 
+00003400: 616c 6c6f 7765 6422 2c0a 2020 2020 2020  allowed",.      
+00003410: 2020 6d75 6c74 6970 6c65 3d46 616c 7365    multiple=False
+00003420: 2c0a 2020 2020 2020 2020 7a65 726f 3d22  ,.        zero="
+00003430: 222c 0a20 2020 2020 2020 2073 6f72 743d  ",.        sort=
+00003440: 4661 6c73 652c 0a20 2020 2029 3a0a 2020  False,.    ):.  
+00003450: 2020 2020 2020 7365 6c66 2e74 6865 7365        self.these
+00003460: 7420 3d20 7468 6573 6574 0a20 2020 2020  t = theset.     
+00003470: 2020 2073 656c 662e 6c61 6265 6c73 203d     self.labels =
+00003480: 206c 6162 656c 730a 2020 2020 2020 2020   labels.        
+00003490: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+000034a0: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
+000034b0: 6765 0a20 2020 2020 2020 2073 656c 662e  ge.        self.
+000034c0: 6d75 6c74 6970 6c65 203d 206d 756c 7469  multiple = multi
+000034d0: 706c 650a 2020 2020 2020 2020 7365 6c66  ple.        self
+000034e0: 2e7a 6572 6f20 3d20 7a65 726f 0a20 2020  .zero = zero.   
+000034f0: 2020 2020 2073 656c 662e 736f 7274 203d       self.sort =
+00003500: 2073 6f72 740a 0a20 2020 2064 6566 206f   sort..    def o
+00003510: 7074 696f 6e73 2873 656c 662c 207a 6572  ptions(self, zer
+00003520: 6f3d 4e6f 6e65 293a 0a20 2020 2020 2020  o=None):.       
+00003530: 2023 2063 6f75 6c64 2062 6520 6120 6c61   # could be a la
+00003540: 7379 2073 6574 0a20 2020 2020 2020 2069  sy set.        i
+00003550: 7365 7420 3d20 7365 6c66 2e74 6865 7365  set = self.these
+00003560: 7428 2920 6966 2063 616c 6c61 626c 6528  t() if callable(
+00003570: 7365 6c66 2e74 6865 7365 7429 2065 6c73  self.theset) els
+00003580: 6520 7365 6c66 2e74 6865 7365 740a 2020  e self.theset.  
+00003590: 2020 2020 2020 2320 7468 6973 2063 6f75        # this cou
+000035a0: 6c64 2062 6520 616e 2069 6e74 6572 6174  ld be an interat
+000035b0: 6f72 0a20 2020 2020 2020 2069 6620 6973  or.        if is
+000035c0: 696e 7374 616e 6365 2869 7365 742c 2064  instance(iset, d
+000035d0: 6963 7429 3a0a 2020 2020 2020 2020 2020  ict):.          
+000035e0: 2020 7468 6573 6574 203d 206d 6170 2873    theset = map(s
+000035f0: 7472 2c20 6973 6574 290a 2020 2020 2020  tr, iset).      
+00003600: 2020 2020 2020 6c61 6265 6c73 203d 206c        labels = l
+00003610: 6973 7428 6973 6574 2e76 616c 7565 7328  ist(iset.values(
+00003620: 2929 0a20 2020 2020 2020 2065 6c73 653a  )).        else:
+00003630: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
+00003640: 6e20 6361 7365 2074 6865 7365 7420 6973  n case theset is
+00003650: 2061 6e20 6974 6572 6174 6f72 0a20 2020   an iterator.   
+00003660: 2020 2020 2020 2020 2069 7365 7420 3d20           iset = 
+00003670: 6c69 7374 2869 7365 7429 0a20 2020 2020  list(iset).     
+00003680: 2020 2020 2020 2069 6620 6973 6574 2061         if iset a
+00003690: 6e64 2069 7369 6e73 7461 6e63 6528 6973  nd isinstance(is
+000036a0: 6574 5b30 5d2c 2028 6c69 7374 2c20 7475  et[0], (list, tu
+000036b0: 706c 6529 2920 616e 6420 6c65 6e28 6973  ple)) and len(is
+000036c0: 6574 5b30 5d29 203d 3d20 323a 0a20 2020  et[0]) == 2:.   
+000036d0: 2020 2020 2020 2020 2020 2020 206c 6162               lab
+000036e0: 656c 7320 3d20 5b73 7472 286c 6162 656c  els = [str(label
+000036f0: 2920 666f 7220 5f2c 206c 6162 656c 2069  ) for _, label i
+00003700: 6e20 6973 6574 5d0a 2020 2020 2020 2020  n iset].        
+00003710: 2020 2020 2020 2020 7468 6573 6574 203d          theset =
+00003720: 205b 7374 7228 6b65 7929 2066 6f72 206b   [str(key) for k
+00003730: 6579 2c20 5f20 696e 2069 7365 745d 0a20  ey, _ in iset]. 
+00003740: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00003750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003760: 2074 6865 7365 7420 3d20 6d61 7028 7374   theset = map(st
+00003770: 722c 2069 7365 7429 0a20 2020 2020 2020  r, iset).       
+00003780: 2020 2020 2020 2020 206c 6162 656c 7320           labels 
+00003790: 3d20 7365 6c66 2e6c 6162 656c 730a 2020  = self.labels.  
+000037a0: 2020 2020 2020 7a65 726f 203d 2073 656c        zero = sel
+000037b0: 662e 7a65 726f 2069 6620 7a65 726f 2069  f.zero if zero i
+000037c0: 7320 4e6f 6e65 2065 6c73 6520 7a65 726f  s None else zero
+000037d0: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+000037e0: 206c 6162 656c 733a 0a20 2020 2020 2020   labels:.       
+000037f0: 2020 2020 2069 7465 6d73 203d 205b 286b       items = [(k
+00003800: 2c20 6b29 2066 6f72 2028 692c 206b 2920  , k) for (i, k) 
+00003810: 696e 2065 6e75 6d65 7261 7465 2874 6865  in enumerate(the
+00003820: 7365 7429 5d0a 2020 2020 2020 2020 656c  set)].        el
+00003830: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00003840: 6974 656d 7320 3d20 5b28 6b2c 206c 6973  items = [(k, lis
+00003850: 7428 6c61 6265 6c73 295b 695d 2920 666f  t(labels)[i]) fo
+00003860: 7220 2869 2c20 6b29 2069 6e20 656e 756d  r (i, k) in enum
+00003870: 6572 6174 6528 7468 6573 6574 295d 0a20  erate(theset)]. 
+00003880: 2020 2020 2020 2069 6620 7365 6c66 2e73         if self.s
+00003890: 6f72 743a 0a20 2020 2020 2020 2020 2020  ort:.           
+000038a0: 2069 7465 6d73 2e73 6f72 7428 6b65 793d   items.sort(key=
+000038b0: 6c61 6d62 6461 206f 3a20 7374 7228 6f5b  lambda o: str(o[
+000038c0: 315d 292e 7570 7065 7228 2929 0a20 2020  1]).upper()).   
+000038d0: 2020 2020 2069 6620 7a65 726f 2061 6e64       if zero and
+000038e0: 2073 656c 662e 7a65 726f 2069 7320 6e6f   self.zero is no
+000038f0: 7420 4e6f 6e65 2061 6e64 206e 6f74 2073  t None and not s
+00003900: 656c 662e 6d75 6c74 6970 6c65 3a0a 2020  elf.multiple:.  
+00003910: 2020 2020 2020 2020 2020 6974 656d 732e            items.
+00003920: 696e 7365 7274 2830 2c20 2822 222c 2073  insert(0, ("", s
+00003930: 656c 662e 7a65 726f 2929 0a20 2020 2020  elf.zero)).     
+00003940: 2020 2072 6574 7572 6e20 6974 656d 730a     return items.
+00003950: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+00003960: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00003970: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+00003980: 2020 2020 2020 2020 7661 6c75 656d 6170          valuemap
+00003990: 203d 2064 6963 7428 7365 6c66 2e6f 7074   = dict(self.opt
+000039a0: 696f 6e73 2829 290a 2020 2020 2020 2020  ions()).        
+000039b0: 6966 2073 656c 662e 6d75 6c74 6970 6c65  if self.multiple
+000039c0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+000039d0: 6966 2062 656c 6f77 2077 6173 2076 616c  if below was val
+000039e0: 7565 7320 3d20 7265 2e63 6f6d 7069 6c65  ues = re.compile
+000039f0: 2822 5b5c 775c 2d3a 5d2b 2229 2e66 696e  ("[\w\-:]+").fin
+00003a00: 6461 6c6c 2873 7472 2876 616c 7565 2929  dall(str(value))
+00003a10: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00003a20: 6e6f 7420 7661 6c75 653a 0a20 2020 2020  not value:.     
+00003a30: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00003a40: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
+00003a50: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00003a60: 6365 2876 616c 7565 2c20 2874 7570 6c65  ce(value, (tuple
+00003a70: 2c20 6c69 7374 2929 3a0a 2020 2020 2020  , list)):.      
+00003a80: 2020 2020 2020 2020 2020 7661 6c75 6573            values
+00003a90: 203d 2076 616c 7565 0a20 2020 2020 2020   = value.       
+00003aa0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00003ab0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00003ac0: 7320 3d20 5b76 616c 7565 5d0a 2020 2020  s = [value].    
+00003ad0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00003ae0: 7461 6e63 6528 7365 6c66 2e6d 756c 7469  tance(self.multi
+00003af0: 706c 652c 2028 7475 706c 652c 206c 6973  ple, (tuple, lis
+00003b00: 7429 293a 0a20 2020 2020 2020 2020 2020  t)):.           
+00003b10: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+00003b20: 2e6d 756c 7469 706c 655b 305d 203c 3d20  .multiple[0] <= 
+00003b30: 6c65 6e28 7661 6c75 6573 2920 3c20 7365  len(values) < se
+00003b40: 6c66 2e6d 756c 7469 706c 655b 315d 3a0a  lf.multiple[1]:.
+00003b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003b60: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00003b70: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+00003b80: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+00003b90: 7272 6f72 5f6d 6573 7361 6765 2929 0a20  rror_message)). 
+00003ba0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00003bb0: 2020 2020 2020 2020 2076 616c 7565 7320           values 
+00003bc0: 3d20 5b76 616c 7565 5d0a 2020 2020 2020  = [value].      
+00003bd0: 2020 7374 726b 6579 7320 3d20 6d61 7028    strkeys = map(
+00003be0: 7374 722c 2076 616c 7565 6d61 7029 0a20  str, valuemap). 
+00003bf0: 2020 2020 2020 2066 6169 6c75 7265 7320         failures 
+00003c00: 3d20 5b78 2066 6f72 2078 2069 6e20 7661  = [x for x in va
+00003c10: 6c75 6573 2069 6620 6e6f 7420 7374 7228  lues if not str(
+00003c20: 7829 2069 6e20 7374 726b 6579 735d 0a20  x) in strkeys]. 
+00003c30: 2020 2020 2020 2069 6620 6661 696c 7572         if failur
+00003c40: 6573 2061 6e64 2073 656c 662e 7468 6573  es and self.thes
+00003c50: 6574 3a0a 2020 2020 2020 2020 2020 2020  et:.            
+00003c60: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+00003c70: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+00003c80: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+00003c90: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+00003ca0: 2020 2072 6574 7572 6e20 7661 6c75 6573     return values
+00003cb0: 2069 6620 7365 6c66 2e6d 756c 7469 706c   if self.multipl
+00003cc0: 6520 656c 7365 2076 616c 7565 0a0a 0a63  e else value...c
+00003cd0: 6c61 7373 2049 535f 494e 5f44 4228 5661  lass IS_IN_DB(Va
+00003ce0: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
+00003cf0: 220a 2020 2020 4578 616d 706c 653a 0a20  ".    Example:. 
+00003d00: 2020 2020 2020 2055 7365 6420 6173 3a3a         Used as::
+00003d10: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
+00003d20: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
+00003d30: 2c20 5f6e 616d 653d 276e 616d 6527 2c0a  , _name='name',.
+00003d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003d50: 2020 7265 7175 6972 6573 3d49 535f 494e    requires=IS_IN
+00003d60: 5f44 4228 6462 2c20 6462 2e6d 7974 6162  _DB(db, db.mytab
+00003d70: 6c65 2e6d 7966 6965 6c64 2c20 7a65 726f  le.myfield, zero
+00003d80: 3d27 2729 290a 0a20 2020 2075 7365 6420  =''))..    used 
+00003d90: 666f 7220 7265 6665 7265 6e63 6520 6669  for reference fi
+00003da0: 656c 6473 2c20 7265 6e64 6572 6564 2061  elds, rendered a
+00003db0: 7320 6120 6472 6f70 626f 780a 2020 2020  s a dropbox.    
+00003dc0: 2222 220a 0a20 2020 2052 4547 4558 5f54  """..    REGEX_T
+00003dd0: 4142 4c45 5f44 4f54 5f46 4945 4c44 203d  ABLE_DOT_FIELD =
+00003de0: 2072 225e 285c 772b 295c 2e28 5c77 2b29   r"^(\w+)\.(\w+)
+00003df0: 2422 0a20 2020 2052 4547 4558 5f49 4e54  $".    REGEX_INT
+00003e00: 4552 505f 434f 4e56 5f53 5045 4349 4649  ERP_CONV_SPECIFI
+00003e10: 4552 203d 2072 2225 5c28 285c 772b 295c  ER = r"%\((\w+)\
+00003e20: 295c 642a 283f 3a5c 2e5c 642b 293f 5b61  )\d*(?:\.\d+)?[a
+00003e30: 2d7a 412d 5a5d 220a 0a20 2020 2064 6566  -zA-Z]"..    def
+00003e40: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
+00003e50: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+00003e60: 2064 6273 6574 2c0a 2020 2020 2020 2020   dbset,.        
+00003e70: 6669 656c 642c 0a20 2020 2020 2020 206c  field,.        l
+00003e80: 6162 656c 3d4e 6f6e 652c 0a20 2020 2020  abel=None,.     
+00003e90: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
+00003ea0: 3d22 5661 6c75 6520 6e6f 7420 696e 2064  ="Value not in d
+00003eb0: 6174 6162 6173 6522 2c0a 2020 2020 2020  atabase",.      
+00003ec0: 2020 6f72 6465 7262 793d 4e6f 6e65 2c0a    orderby=None,.
+00003ed0: 2020 2020 2020 2020 6772 6f75 7062 793d          groupby=
+00003ee0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6469  None,.        di
+00003ef0: 7374 696e 6374 3d4e 6f6e 652c 0a20 2020  stinct=None,.   
+00003f00: 2020 2020 2063 6163 6865 3d4e 6f6e 652c       cache=None,
+00003f10: 0a20 2020 2020 2020 206d 756c 7469 706c  .        multipl
+00003f20: 653d 4661 6c73 652c 0a20 2020 2020 2020  e=False,.       
+00003f30: 207a 6572 6f3d 2222 2c0a 2020 2020 2020   zero="",.      
+00003f40: 2020 736f 7274 3d46 616c 7365 2c0a 2020    sort=False,.  
+00003f50: 2020 2020 2020 5f61 6e64 3d4e 6f6e 652c        _and=None,
+00003f60: 0a20 2020 2020 2020 206c 6566 743d 4e6f  .        left=No
+00003f70: 6e65 2c0a 2020 2020 2020 2020 6465 6c69  ne,.        deli
+00003f80: 6d69 7465 723d 4e6f 6e65 2c0a 2020 2020  miter=None,.    
+00003f90: 2020 2020 6175 746f 5f61 6464 3d46 616c      auto_add=Fal
+00003fa0: 7365 2c0a 2020 2020 293a 0a20 2020 2020  se,.    ):.     
+00003fb0: 2020 2069 6620 6861 7361 7474 7228 6462     if hasattr(db
+00003fc0: 7365 742c 2022 6465 6669 6e65 5f74 6162  set, "define_tab
+00003fd0: 6c65 2229 3a0a 2020 2020 2020 2020 2020  le"):.          
+00003fe0: 2020 7365 6c66 2e64 6273 6574 203d 2064    self.dbset = d
+00003ff0: 6273 6574 2829 0a20 2020 2020 2020 2065  bset().        e
+00004000: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00004010: 2073 656c 662e 6462 7365 7420 3d20 6462   self.dbset = db
+00004020: 7365 740a 0a20 2020 2020 2020 2074 6162  set..        tab
+00004030: 6c65 203d 204e 6f6e 650a 2020 2020 2020  le = None.      
+00004040: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00004050: 6669 656c 642c 2054 6162 6c65 293a 0a20  field, Table):. 
+00004060: 2020 2020 2020 2020 2020 2074 6162 6c65             table
+00004070: 203d 2066 6965 6c64 0a20 2020 2020 2020   = field.       
+00004080: 2020 2020 2066 6965 6c64 203d 2074 6162       field = tab
+00004090: 6c65 2e5f 6964 0a20 2020 2020 2020 2020  le._id.         
+000040a0: 2020 2066 6e61 6d65 203d 2073 7472 2866     fname = str(f
+000040b0: 6965 6c64 290a 2020 2020 2020 2020 6966  ield).        if
+000040c0: 2069 7369 6e73 7461 6e63 6528 6669 656c   isinstance(fiel
+000040d0: 642c 2046 6965 6c64 293a 0a20 2020 2020  d, Field):.     
+000040e0: 2020 2020 2020 2066 6e61 6d65 203d 2073         fname = s
+000040f0: 7472 2866 6965 6c64 290a 2020 2020 2020  tr(field).      
+00004100: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00004110: 6528 6669 656c 642c 2073 7472 293a 0a20  e(field, str):. 
+00004120: 2020 2020 2020 2020 2020 2069 7465 6d73             items
+00004130: 203d 2066 6965 6c64 2e73 706c 6974 2822   = field.split("
+00004140: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
+00004150: 6966 206c 656e 2869 7465 6d73 2920 3d3d  if len(items) ==
+00004160: 2031 206f 7220 6974 656d 735b 315d 203d   1 or items[1] =
+00004170: 3d20 2269 6422 3a0a 2020 2020 2020 2020  = "id":.        
+00004180: 2020 2020 2020 2020 7461 626c 6520 3d20          table = 
+00004190: 7365 6c66 2e64 6273 6574 2e5f 6462 2e67  self.dbset._db.g
+000041a0: 6574 2869 7465 6d73 5b30 5d29 0a20 2020  et(items[0]).   
+000041b0: 2020 2020 2020 2020 2020 2020 2066 6e61               fna
+000041c0: 6d65 203d 2069 7465 6d73 5b30 5d20 2b20  me = items[0] + 
+000041d0: 222e 6964 220a 2020 2020 2020 2020 2020  ".id".          
+000041e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000041f0: 2020 2020 2020 2020 666e 616d 6520 3d20          fname = 
+00004200: 6669 656c 640a 2020 2020 2020 2020 656c  field.        el
+00004210: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00004220: 7261 6973 6520 5275 6e74 696d 6545 7272  raise RuntimeErr
+00004230: 6f72 2822 4953 5f49 4e5f 4442 3a20 6120  or("IS_IN_DB: a 
+00004240: 6669 656c 6420 6172 6775 6d65 6e74 206d  field argument m
+00004250: 7573 7420 6265 2073 7065 6369 6669 6564  ust be specified
+00004260: 2229 0a20 2020 2020 2020 2028 6b74 6162  ").        (ktab
+00004270: 6c65 2c20 6b66 6965 6c64 2920 3d20 666e  le, kfield) = fn
+00004280: 616d 652e 7370 6c69 7428 222e 2229 0a20  ame.split("."). 
+00004290: 2020 2020 2020 2069 6620 6e6f 7420 6c61         if not la
+000042a0: 6265 6c3a 0a20 2020 2020 2020 2020 2020  bel:.           
+000042b0: 2023 2069 6620 7765 2068 6176 6520 6120   # if we have a 
+000042c0: 7461 626c 6520 616e 6420 6974 2068 6173  table and it has
+000042d0: 2061 205f 666f 726d 6174 2c20 7573 6520   a _format, use 
+000042e0: 6974 0a20 2020 2020 2020 2020 2020 2069  it.            i
+000042f0: 6620 7461 626c 6520 616e 6420 7461 626c  f table and tabl
+00004300: 652e 5f66 6f72 6d61 743a 0a20 2020 2020  e._format:.     
+00004310: 2020 2020 2020 2020 2020 206c 6162 656c             label
+00004320: 203d 2074 6162 6c65 2e5f 666f 726d 6174   = table._format
+00004330: 0a20 2020 2020 2020 2020 2020 2023 2065  .            # e
+00004340: 6c73 6520 666f 726d 6174 2075 7369 6e67  lse format using
+00004350: 2074 6865 2066 6965 6c64 2076 616c 7565   the field value
+00004360: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00004370: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00004380: 2020 206c 6162 656c 203d 2022 2525 2825     label = "%%(%
+00004390: 7329 7322 2025 206b 6669 656c 640a 2020  s)s" % kfield.  
+000043a0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000043b0: 6e63 6528 6c61 6265 6c2c 2073 7472 293a  nce(label, str):
+000043c0: 0a20 2020 2020 2020 2020 2020 206d 203d  .            m =
+000043d0: 2072 652e 6d61 7463 6828 7365 6c66 2e52   re.match(self.R
+000043e0: 4547 4558 5f54 4142 4c45 5f44 4f54 5f46  EGEX_TABLE_DOT_F
+000043f0: 4945 4c44 2c20 6c61 6265 6c29 0a20 2020  IELD, label).   
+00004400: 2020 2020 2020 2020 2069 6620 6d3a 0a20           if m:. 
+00004410: 2020 2020 2020 2020 2020 2020 2020 206c                 l
+00004420: 6162 656c 203d 2022 2525 2825 7329 7322  abel = "%%(%s)s"
+00004430: 2025 206d 2e67 726f 7570 2832 290a 2020   % m.group(2).  
+00004440: 2020 2020 2020 2020 2020 6669 656c 646e            fieldn
+00004450: 616d 6573 203d 2072 652e 6669 6e64 616c  ames = re.findal
+00004460: 6c28 7365 6c66 2e52 4547 4558 5f49 4e54  l(self.REGEX_INT
+00004470: 4552 505f 434f 4e56 5f53 5045 4349 4649  ERP_CONV_SPECIFI
+00004480: 4552 2c20 6c61 6265 6c29 0a20 2020 2020  ER, label).     
+00004490: 2020 2020 2020 2069 6620 6b66 6965 6c64         if kfield
+000044a0: 206e 6f74 2069 6e20 6669 656c 646e 616d   not in fieldnam
+000044b0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+000044c0: 2020 2020 6669 656c 646e 616d 6573 2e61      fieldnames.a
+000044d0: 7070 656e 6428 6b66 6965 6c64 2920 2023  ppend(kfield)  #
+000044e0: 206b 6669 656c 6420 6d75 7374 2062 6520   kfield must be 
+000044f0: 6c61 7374 0a20 2020 2020 2020 2065 6c69  last.        eli
+00004500: 6620 6973 696e 7374 616e 6365 286c 6162  f isinstance(lab
+00004510: 656c 2c20 4669 656c 6429 3a0a 2020 2020  el, Field):.    
+00004520: 2020 2020 2020 2020 6669 656c 646e 616d          fieldnam
+00004530: 6573 203d 205b 6c61 6265 6c2e 6e61 6d65  es = [label.name
+00004540: 2c20 6b66 6965 6c64 5d20 2023 206b 6669  , kfield]  # kfi
+00004550: 656c 6420 6d75 7374 2062 6520 6c61 7374  eld must be last
+00004560: 0a20 2020 2020 2020 2020 2020 206c 6162  .            lab
+00004570: 656c 203d 2022 2525 2825 7329 7322 2025  el = "%%(%s)s" %
+00004580: 206c 6162 656c 2e6e 616d 650a 2020 2020   label.name.    
+00004590: 2020 2020 656c 6966 2063 616c 6c61 626c      elif callabl
+000045a0: 6528 6c61 6265 6c29 3a0a 2020 2020 2020  e(label):.      
+000045b0: 2020 2020 2020 6669 656c 646e 616d 6573        fieldnames
+000045c0: 203d 2022 2a22 0a20 2020 2020 2020 2065   = "*".        e
+000045d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000045e0: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+000045f0: 656e 7465 6445 7272 6f72 0a0a 2020 2020  entedError..    
+00004600: 2020 2020 7365 6c66 2e66 6965 6c64 6e61      self.fieldna
+00004610: 6d65 7320 3d20 6669 656c 646e 616d 6573  mes = fieldnames
+00004620: 2020 2320 6669 656c 6473 2072 6571 7569    # fields requi
+00004630: 7265 7320 746f 2062 7569 6c64 2074 6865  res to build the
+00004640: 2066 6f72 6d61 7474 696e 670a 2020 2020   formatting.    
+00004650: 2020 2020 7365 6c66 2e6c 6162 656c 203d      self.label =
+00004660: 206c 6162 656c 0a20 2020 2020 2020 2073   label.        s
+00004670: 656c 662e 6b74 6162 6c65 203d 206b 7461  elf.ktable = kta
+00004680: 626c 650a 2020 2020 2020 2020 7365 6c66  ble.        self
+00004690: 2e6b 6669 656c 6420 3d20 6b66 6965 6c64  .kfield = kfield
+000046a0: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
+000046b0: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
+000046c0: 726f 725f 6d65 7373 6167 650a 2020 2020  ror_message.    
+000046d0: 2020 2020 7365 6c66 2e74 6865 7365 7420      self.theset 
+000046e0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+000046f0: 656c 662e 6f72 6465 7262 7920 3d20 6f72  elf.orderby = or
+00004700: 6465 7262 790a 2020 2020 2020 2020 7365  derby.        se
+00004710: 6c66 2e67 726f 7570 6279 203d 2067 726f  lf.groupby = gro
+00004720: 7570 6279 0a20 2020 2020 2020 2073 656c  upby.        sel
+00004730: 662e 6469 7374 696e 6374 203d 2064 6973  f.distinct = dis
+00004740: 7469 6e63 740a 2020 2020 2020 2020 7365  tinct.        se
+00004750: 6c66 2e63 6163 6865 203d 2063 6163 6865  lf.cache = cache
+00004760: 0a20 2020 2020 2020 2073 656c 662e 6d75  .        self.mu
+00004770: 6c74 6970 6c65 203d 206d 756c 7469 706c  ltiple = multipl
+00004780: 650a 2020 2020 2020 2020 7365 6c66 2e7a  e.        self.z
+00004790: 6572 6f20 3d20 7a65 726f 0a20 2020 2020  ero = zero.     
+000047a0: 2020 2073 656c 662e 736f 7274 203d 2073     self.sort = s
+000047b0: 6f72 740a 2020 2020 2020 2020 7365 6c66  ort.        self
+000047c0: 2e5f 616e 6420 3d20 5f61 6e64 0a20 2020  ._and = _and.   
+000047d0: 2020 2020 2073 656c 662e 6c65 6674 203d       self.left =
+000047e0: 206c 6566 740a 2020 2020 2020 2020 7365   left.        se
+000047f0: 6c66 2e64 656c 696d 6974 6572 203d 2064  lf.delimiter = d
+00004800: 656c 696d 6974 6572 0a20 2020 2020 2020  elimiter.       
+00004810: 2073 656c 662e 6175 746f 5f61 6464 203d   self.auto_add =
+00004820: 2061 7574 6f5f 6164 640a 0a20 2020 2064   auto_add..    d
+00004830: 6566 2073 6574 5f73 656c 665f 6964 2873  ef set_self_id(s
+00004840: 656c 662c 2069 6429 3a0a 2020 2020 2020  elf, id):.      
+00004850: 2020 6966 2073 656c 662e 5f61 6e64 3a0a    if self._and:.
+00004860: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00004870: 2e5f 616e 642e 7265 636f 7264 5f69 6420  ._and.record_id 
+00004880: 3d20 6964 0a0a 2020 2020 6465 6620 6275  = id..    def bu
+00004890: 696c 645f 7365 7428 7365 6c66 293a 0a20  ild_set(self):. 
+000048a0: 2020 2020 2020 2074 6162 6c65 203d 2073         table = s
+000048b0: 656c 662e 6462 7365 742e 6462 5b73 656c  elf.dbset.db[sel
+000048c0: 662e 6b74 6162 6c65 5d0a 2020 2020 2020  f.ktable].      
+000048d0: 2020 6966 2073 656c 662e 6669 656c 646e    if self.fieldn
+000048e0: 616d 6573 203d 3d20 222a 223a 0a20 2020  ames == "*":.   
+000048f0: 2020 2020 2020 2020 2066 6965 6c64 7320           fields 
+00004900: 3d20 5b66 2066 6f72 2066 2069 6e20 7461  = [f for f in ta
+00004910: 626c 655d 0a20 2020 2020 2020 2065 6c73  ble].        els
+00004920: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+00004930: 6965 6c64 7320 3d20 5b74 6162 6c65 5b6b  ields = [table[k
+00004940: 5d20 666f 7220 6b20 696e 2073 656c 662e  ] for k in self.
+00004950: 6669 656c 646e 616d 6573 5d0a 2020 2020  fieldnames].    
+00004960: 2020 2020 6967 6e6f 7265 203d 2028 4669      ignore = (Fi
+00004970: 656c 6456 6972 7475 616c 2c20 4669 656c  eldVirtual, Fiel
+00004980: 644d 6574 686f 6429 0a20 2020 2020 2020  dMethod).       
+00004990: 2066 6965 6c64 7320 3d20 5b66 2066 6f72   fields = [f for
+000049a0: 2066 2069 6e20 6669 656c 6473 2069 6620   f in fields if 
+000049b0: 6e6f 7420 6973 696e 7374 616e 6365 2866  not isinstance(f
+000049c0: 2c20 6967 6e6f 7265 295d 0a20 2020 2020  , ignore)].     
+000049d0: 2020 2069 6620 7365 6c66 2e64 6273 6574     if self.dbset
+000049e0: 2e64 622e 5f64 626e 616d 6520 213d 2022  .db._dbname != "
+000049f0: 6761 6522 3a0a 2020 2020 2020 2020 2020  gae":.          
+00004a00: 2020 6f72 6465 7262 7920 3d20 7365 6c66    orderby = self
+00004a10: 2e6f 7264 6572 6279 206f 7220 7265 6475  .orderby or redu
+00004a20: 6365 286c 616d 6264 6120 612c 2062 3a20  ce(lambda a, b: 
+00004a30: 6120 7c20 622c 2066 6965 6c64 7329 0a20  a | b, fields). 
+00004a40: 2020 2020 2020 2020 2020 2067 726f 7570             group
+00004a50: 6279 203d 2073 656c 662e 6772 6f75 7062  by = self.groupb
+00004a60: 790a 2020 2020 2020 2020 2020 2020 6469  y.            di
+00004a70: 7374 696e 6374 203d 2073 656c 662e 6469  stinct = self.di
+00004a80: 7374 696e 6374 0a20 2020 2020 2020 2020  stinct.         
+00004a90: 2020 206c 6566 7420 3d20 7365 6c66 2e6c     left = self.l
+00004aa0: 6566 740a 2020 2020 2020 2020 2020 2020  eft.            
+00004ab0: 6464 203d 2064 6963 7428 0a20 2020 2020  dd = dict(.     
+00004ac0: 2020 2020 2020 2020 2020 206f 7264 6572             order
+00004ad0: 6279 3d6f 7264 6572 6279 2c0a 2020 2020  by=orderby,.    
+00004ae0: 2020 2020 2020 2020 2020 2020 6772 6f75              grou
+00004af0: 7062 793d 6772 6f75 7062 792c 0a20 2020  pby=groupby,.   
+00004b00: 2020 2020 2020 2020 2020 2020 2064 6973               dis
+00004b10: 7469 6e63 743d 6469 7374 696e 6374 2c0a  tinct=distinct,.
+00004b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b30: 6361 6368 653d 7365 6c66 2e63 6163 6865  cache=self.cache
+00004b40: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004b50: 2020 6361 6368 6561 626c 653d 5472 7565    cacheable=True
+00004b60: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00004b70: 2020 6c65 6674 3d6c 6566 742c 0a20 2020    left=left,.   
+00004b80: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00004b90: 2020 2020 2020 2072 6563 6f72 6473 203d         records =
+00004ba0: 2073 656c 662e 6462 7365 7428 7461 626c   self.dbset(tabl
+00004bb0: 6529 2e73 656c 6563 7428 2a66 6965 6c64  e).select(*field
+00004bc0: 732c 202a 2a64 6429 0a20 2020 2020 2020  s, **dd).       
+00004bd0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00004be0: 2020 206f 7264 6572 6279 203d 2073 656c     orderby = sel
+00004bf0: 662e 6f72 6465 7262 7920 6f72 2072 6564  f.orderby or red
+00004c00: 7563 6528 0a20 2020 2020 2020 2020 2020  uce(.           
+00004c10: 2020 2020 206c 616d 6264 6120 612c 2062       lambda a, b
+00004c20: 3a20 6120 7c20 622c 2028 6620 666f 7220  : a | b, (f for 
+00004c30: 6620 696e 2066 6965 6c64 7320 6966 206e  f in fields if n
+00004c40: 6f74 2066 2e6e 616d 6520 3d3d 2022 6964  ot f.name == "id
+00004c50: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
+00004c60: 0a20 2020 2020 2020 2020 2020 2064 6420  .            dd 
+00004c70: 3d20 6469 6374 286f 7264 6572 6279 3d6f  = dict(orderby=o
+00004c80: 7264 6572 6279 2c20 6361 6368 653d 7365  rderby, cache=se
+00004c90: 6c66 2e63 6163 6865 2c20 6361 6368 6561  lf.cache, cachea
+00004ca0: 626c 653d 5472 7565 290a 2020 2020 2020  ble=True).      
+00004cb0: 2020 2020 2020 7265 636f 7264 7320 3d20        records = 
+00004cc0: 7365 6c66 2e64 6273 6574 2874 6162 6c65  self.dbset(table
+00004cd0: 292e 7365 6c65 6374 2874 6162 6c65 2e41  ).select(table.A
+00004ce0: 4c4c 2c20 2a2a 6464 290a 2020 2020 2020  LL, **dd).      
+00004cf0: 2020 7365 6c66 2e74 6865 7365 7420 3d20    self.theset = 
+00004d00: 5b73 7472 2872 5b73 656c 662e 6b66 6965  [str(r[self.kfie
+00004d10: 6c64 5d29 2066 6f72 2072 2069 6e20 7265  ld]) for r in re
+00004d20: 636f 7264 735d 0a20 2020 2020 2020 2069  cords].        i
+00004d30: 6620 6973 696e 7374 616e 6365 2873 656c  f isinstance(sel
+00004d40: 662e 6c61 6265 6c2c 2073 7472 293a 0a20  f.label, str):. 
+00004d50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00004d60: 6c61 6265 6c73 203d 205b 7365 6c66 2e6c  labels = [self.l
+00004d70: 6162 656c 2025 2072 2066 6f72 2072 2069  abel % r for r i
+00004d80: 6e20 7265 636f 7264 735d 0a20 2020 2020  n records].     
+00004d90: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00004da0: 2020 2020 2073 656c 662e 6c61 6265 6c73       self.labels
+00004db0: 203d 205b 7365 6c66 2e6c 6162 656c 2872   = [self.label(r
+00004dc0: 2920 666f 7220 7220 696e 2072 6563 6f72  ) for r in recor
+00004dd0: 6473 5d0a 0a20 2020 2064 6566 206f 7074  ds]..    def opt
+00004de0: 696f 6e73 2873 656c 662c 207a 6572 6f3d  ions(self, zero=
+00004df0: 5472 7565 293a 0a20 2020 2020 2020 2073  True):.        s
+00004e00: 656c 662e 6275 696c 645f 7365 7428 290a  elf.build_set().
+00004e10: 2020 2020 2020 2020 6974 656d 7320 3d20          items = 
+00004e20: 5b28 6b2c 2073 656c 662e 6c61 6265 6c73  [(k, self.labels
+00004e30: 5b69 5d29 2066 6f72 2028 692c 206b 2920  [i]) for (i, k) 
+00004e40: 696e 2065 6e75 6d65 7261 7465 2873 656c  in enumerate(sel
+00004e50: 662e 7468 6573 6574 295d 0a20 2020 2020  f.theset)].     
+00004e60: 2020 2069 6620 7365 6c66 2e73 6f72 743a     if self.sort:
+00004e70: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
+00004e80: 6d73 2e73 6f72 7428 6b65 793d 6c61 6d62  ms.sort(key=lamb
+00004e90: 6461 206f 3a20 7374 7228 6f5b 315d 292e  da o: str(o[1]).
+00004ea0: 7570 7065 7228 2929 0a20 2020 2020 2020  upper()).       
+00004eb0: 2069 6620 7a65 726f 2061 6e64 2073 656c   if zero and sel
+00004ec0: 662e 7a65 726f 2069 7320 6e6f 7420 4e6f  f.zero is not No
+00004ed0: 6e65 2061 6e64 206e 6f74 2073 656c 662e  ne and not self.
+00004ee0: 6d75 6c74 6970 6c65 3a0a 2020 2020 2020  multiple:.      
+00004ef0: 2020 2020 2020 6974 656d 732e 696e 7365        items.inse
+00004f00: 7274 2830 2c20 2822 222c 2073 656c 662e  rt(0, ("", self.
+00004f10: 7a65 726f 2929 0a20 2020 2020 2020 2072  zero)).        r
+00004f20: 6574 7572 6e20 6974 656d 730a 0a20 2020  eturn items..   
+00004f30: 2064 6566 206d 6179 6265 5f61 6464 2873   def maybe_add(s
+00004f40: 656c 662c 2074 6162 6c65 2c20 6669 656c  elf, table, fiel
+00004f50: 646e 616d 652c 2076 616c 7565 293a 0a20  dname, value):. 
+00004f60: 2020 2020 2020 2064 203d 207b 6669 656c         d = {fiel
+00004f70: 646e 616d 653a 2076 616c 7565 7d0a 2020  dname: value}.  
+00004f80: 2020 2020 2020 7265 636f 7264 203d 2074        record = t
+00004f90: 6162 6c65 282a 2a64 290a 2020 2020 2020  able(**d).      
+00004fa0: 2020 6966 2072 6563 6f72 643a 0a20 2020    if record:.   
+00004fb0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00004fc0: 7265 636f 7264 2e69 640a 2020 2020 2020  record.id.      
+00004fd0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00004fe0: 2020 2020 7265 7475 726e 2074 6162 6c65      return table
+00004ff0: 2e69 6e73 6572 7428 2a2a 6429 0a0a 2020  .insert(**d)..  
+00005000: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
+00005010: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
+00005020: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
+00005030: 2020 2020 2074 6162 6c65 203d 2073 656c       table = sel
+00005040: 662e 6462 7365 742e 6462 5b73 656c 662e  f.dbset.db[self.
+00005050: 6b74 6162 6c65 5d0a 2020 2020 2020 2020  ktable].        
+00005060: 6669 656c 6420 3d20 7461 626c 655b 7365  field = table[se
+00005070: 6c66 2e6b 6669 656c 645d 0a0a 2020 2020  lf.kfield]..    
+00005080: 2020 2020 6966 2073 656c 662e 6d75 6c74      if self.mult
+00005090: 6970 6c65 3a0a 2020 2020 2020 2020 2020  iple:.          
+000050a0: 2020 6966 2073 656c 662e 5f61 6e64 3a0a    if self._and:.
+000050b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050c0: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
+000050d0: 6e74 6564 4572 726f 720a 2020 2020 2020  ntedError.      
+000050e0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+000050f0: 6e63 6528 7661 6c75 652c 206c 6973 7429  nce(value, list)
+00005100: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00005110: 2020 7661 6c75 6573 203d 2076 616c 7565    values = value
+00005120: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00005130: 6620 7365 6c66 2e64 656c 696d 6974 6572  f self.delimiter
+00005140: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00005150: 2020 7661 6c75 6573 203d 2076 616c 7565    values = value
+00005160: 2e73 706c 6974 2873 656c 662e 6465 6c69  .split(self.deli
+00005170: 6d69 7465 7229 2020 2320 6265 6361 7573  miter)  # becaus
+00005180: 6520 6f66 2061 7574 6f63 6f6d 706c 6574  e of autocomplet
+00005190: 650a 2020 2020 2020 2020 2020 2020 656c  e.            el
+000051a0: 6966 2076 616c 7565 3a0a 2020 2020 2020  if value:.      
+000051b0: 2020 2020 2020 2020 2020 7661 6c75 6573            values
+000051c0: 203d 205b 7661 6c75 655d 0a20 2020 2020   = [value].     
+000051d0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+000051e0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000051f0: 7565 7320 3d20 5b5d 0a0a 2020 2020 2020  ues = []..      
+00005200: 2020 2020 2020 6966 2066 6965 6c64 2e74        if field.t
+00005210: 7970 6520 696e 2028 2269 6422 2c20 2269  ype in ("id", "i
+00005220: 6e74 6567 6572 2229 3a0a 2020 2020 2020  nteger"):.      
+00005230: 2020 2020 2020 2020 2020 6e65 775f 7661            new_va
+00005240: 6c75 6573 203d 205b 5d0a 2020 2020 2020  lues = [].      
+00005250: 2020 2020 2020 2020 2020 666f 7220 7661            for va
+00005260: 6c75 6520 696e 2076 616c 7565 733a 0a20  lue in values:. 
+00005270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005280: 2020 2069 6620 6e6f 7420 2869 7369 6e73     if not (isins
+00005290: 7461 6e63 6528 7661 6c75 652c 2069 6e74  tance(value, int
+000052a0: 6567 6572 5f74 7970 6573 2920 6f72 2076  eger_types) or v
+000052b0: 616c 7565 2e69 7364 6967 6974 2829 293a  alue.isdigit()):
+000052c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000052d0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+000052e0: 2e61 7574 6f5f 6164 643a 0a20 2020 2020  .auto_add:.     
 000052f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005300: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00005310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005320: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00005330: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
-00005340: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
-00005350: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-00005360: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-00005370: 2020 2020 2020 206e 6577 5f76 616c 7565         new_value
-00005380: 732e 6170 7065 6e64 2876 616c 7565 290a  s.append(value).
-00005390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000053a0: 7661 6c75 6573 203d 206e 6577 5f76 616c  values = new_val
-000053b0: 7565 730a 0a20 2020 2020 2020 2020 2020  ues..           
-000053c0: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
-000053d0: 2020 2020 2020 6973 696e 7374 616e 6365        isinstance
-000053e0: 2873 656c 662e 6d75 6c74 6970 6c65 2c20  (self.multiple, 
-000053f0: 2874 7570 6c65 2c20 6c69 7374 2929 0a20  (tuple, list)). 
-00005400: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00005410: 6e64 206e 6f74 2073 656c 662e 6d75 6c74  nd not self.mult
-00005420: 6970 6c65 5b30 5d20 3c3d 206c 656e 2876  iple[0] <= len(v
-00005430: 616c 7565 7329 203c 2073 656c 662e 6d75  alues) < self.mu
-00005440: 6c74 6970 6c65 5b31 5d0a 2020 2020 2020  ltiple[1].      
-00005450: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-00005460: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00005470: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00005480: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-00005490: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-000054a0: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
-000054b0: 6966 2073 656c 662e 7468 6573 6574 3a0a  if self.theset:.
-000054c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000054d0: 6966 206e 6f74 205b 7620 666f 7220 7620  if not [v for v 
-000054e0: 696e 2076 616c 7565 7320 6966 2073 7472  in values if str
-000054f0: 2876 2920 6e6f 7420 696e 2073 656c 662e  (v) not in self.
-00005500: 7468 6573 6574 5d3a 0a20 2020 2020 2020  theset]:.       
-00005510: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00005520: 7572 6e20 7661 6c75 6573 0a20 2020 2020  urn values.     
-00005530: 2020 2020 2020 2065 6c73 653a 0a0a 2020         else:..  
-00005540: 2020 2020 2020 2020 2020 2020 2020 6465                de
-00005550: 6620 636f 756e 7428 7661 6c75 6573 2c20  f count(values, 
-00005560: 733d 7365 6c66 2e64 6273 6574 2c20 663d  s=self.dbset, f=
-00005570: 6669 656c 6429 3a0a 2020 2020 2020 2020  field):.        
-00005580: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00005590: 726e 2073 2866 2e62 656c 6f6e 6773 286c  rn s(f.belongs(l
-000055a0: 6973 7428 6d61 7028 696e 742c 2076 616c  ist(map(int, val
-000055b0: 7565 7329 2929 292e 636f 756e 7428 290a  ues)))).count().
-000055c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000055d0: 2069 6620 7365 6c66 2e64 6273 6574 2e64   if self.dbset.d
-000055e0: 622e 5f61 6461 7074 6572 2e64 6265 6e67  b._adapter.dbeng
-000055f0: 696e 6520 3d3d 2022 676f 6f67 6c65 3a64  ine == "google:d
-00005600: 6174 6173 746f 7265 223a 0a20 2020 2020  atastore":.     
-00005610: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00005620: 616e 6765 5f69 6473 203d 2072 616e 6765  ange_ids = range
-00005630: 2830 2c20 6c65 6e28 7661 6c75 6573 292c  (0, len(values),
-00005640: 2033 3029 0a20 2020 2020 2020 2020 2020   30).           
-00005650: 2020 2020 2020 2020 2074 6f74 616c 203d           total =
-00005660: 2073 756d 2863 6f75 6e74 2876 616c 7565   sum(count(value
-00005670: 735b 6920 3a20 6920 2b20 3330 5d29 2066  s[i : i + 30]) f
-00005680: 6f72 2069 2069 6e20 7261 6e67 655f 6964  or i in range_id
-00005690: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-000056a0: 2020 2020 2020 2069 6620 746f 7461 6c20         if total 
-000056b0: 3d3d 206c 656e 2876 616c 7565 7329 3a0a  == len(values):.
-000056c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000056d0: 2020 2020 2020 2020 7265 7475 726e 2076          return v
-000056e0: 616c 7565 730a 2020 2020 2020 2020 2020  alues.          
-000056f0: 2020 2020 2020 656c 6966 2063 6f75 6e74        elif count
-00005700: 2876 616c 7565 7329 203d 3d20 6c65 6e28  (values) == len(
-00005710: 7661 6c75 6573 293a 0a20 2020 2020 2020  values):.       
-00005720: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00005730: 7572 6e20 7661 6c75 6573 0a20 2020 2020  urn values.     
-00005740: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00005750: 2020 2020 2069 6620 6669 656c 642e 7479       if field.ty
-00005760: 7065 2069 6e20 2822 6964 222c 2022 696e  pe in ("id", "in
-00005770: 7465 6765 7222 293a 0a20 2020 2020 2020  teger"):.       
-00005780: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00005790: 7374 616e 6365 2876 616c 7565 2c20 696e  stance(value, in
-000057a0: 7465 6765 725f 7479 7065 7329 206f 7220  teger_types) or 
-000057b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000057c0: 2020 2020 2020 6973 696e 7374 616e 6365        isinstance
-000057d0: 2876 616c 7565 2c20 7374 7269 6e67 5f74  (value, string_t
-000057e0: 7970 6573 2920 616e 6420 7661 6c75 652e  ypes) and value.
-000057f0: 6973 6469 6769 7428 290a 2020 2020 2020  isdigit().      
-00005800: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
-00005810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005820: 2076 616c 7565 203d 2069 6e74 2876 616c   value = int(val
-00005830: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-00005840: 2020 2020 656c 6966 2073 656c 662e 6175      elif self.au
-00005850: 746f 5f61 6464 3a0a 2020 2020 2020 2020  to_add:.        
-00005860: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00005870: 6520 3d20 7365 6c66 2e6d 6179 6265 5f61  e = self.maybe_a
-00005880: 6464 2874 6162 6c65 2c20 7365 6c66 2e66  dd(table, self.f
-00005890: 6965 6c64 6e61 6d65 735b 305d 2c20 7661  ieldnames[0], va
-000058a0: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
-000058b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000058c0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000058d0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-000058e0: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-000058f0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00005900: 6d65 7373 6167 6529 290a 0a20 2020 2020  message))..     
-00005910: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
-00005920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005930: 2020 2020 7661 6c75 6520 3d20 696e 7428      value = int(
-00005940: 7661 6c75 6529 0a20 2020 2020 2020 2020  value).         
-00005950: 2020 2020 2020 2065 7863 6570 7420 5479         except Ty
-00005960: 7065 4572 726f 723a 0a20 2020 2020 2020  peError:.       
-00005970: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00005980: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
-00005990: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
-000059a0: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
-000059b0: 7373 6167 6529 290a 0a20 2020 2020 2020  ssage))..       
-000059c0: 2020 2020 2069 6620 7365 6c66 2e74 6865       if self.the
-000059d0: 7365 743a 0a20 2020 2020 2020 2020 2020  set:.           
-000059e0: 2020 2020 2069 6620 7374 7228 7661 6c75       if str(valu
-000059f0: 6529 2069 6e20 7365 6c66 2e74 6865 7365  e) in self.these
-00005a00: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00005a10: 2020 2020 2020 2069 6620 7365 6c66 2e5f         if self._
-00005a20: 616e 643a 0a20 2020 2020 2020 2020 2020  and:.           
-00005a30: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00005a40: 7572 6e20 7661 6c69 6461 746f 725f 6361  urn validator_ca
-00005a50: 6c6c 6572 2873 656c 662e 5f61 6e64 2c20  ller(self._and, 
-00005a60: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-00005a70: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00005a80: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00005a90: 7565 0a20 2020 2020 2020 2020 2020 2065  ue.            e
-00005aa0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00005ab0: 2020 2020 2069 6620 7365 6c66 2e64 6273       if self.dbs
-00005ac0: 6574 2866 6965 6c64 203d 3d20 7661 6c75  et(field == valu
-00005ad0: 6529 2e63 6f75 6e74 2829 3a0a 2020 2020  e).count():.    
-00005ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005af0: 6966 2073 656c 662e 5f61 6e64 3a0a 2020  if self._and:.  
-00005b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005b10: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-00005b20: 6964 6174 6f72 5f63 616c 6c65 7228 7365  idator_caller(se
-00005b30: 6c66 2e5f 616e 642c 2076 616c 7565 2c20  lf._and, value, 
-00005b40: 7265 636f 7264 5f69 6429 0a20 2020 2020  record_id).     
-00005b50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00005b60: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
-00005b70: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
-00005b80: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
-00005b90: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
-00005ba0: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
-00005bb0: 0a63 6c61 7373 2049 535f 4e4f 545f 494e  .class IS_NOT_IN
-00005bc0: 5f44 4228 5661 6c69 6461 746f 7229 3a0a  _DB(Validator):.
-00005bd0: 2020 2020 2222 220a 2020 2020 4578 616d      """.    Exam
-00005be0: 706c 653a 0a20 2020 2020 2020 2055 7365  ple:.        Use
-00005bf0: 6420 6173 3a3a 0a0a 2020 2020 2020 2020  d as::..        
-00005c00: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-00005c10: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
-00005c20: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
-00005c30: 535f 4e4f 545f 494e 5f44 4228 6462 2c20  S_NOT_IN_DB(db, 
-00005c40: 6462 2e74 6162 6c65 2929 0a0a 2020 2020  db.table))..    
-00005c50: 6d61 6b65 7320 7468 6520 6669 656c 6420  makes the field 
-00005c60: 756e 6971 7565 0a20 2020 2022 2222 0a0a  unique.    """..
-00005c70: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00005c80: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00005c90: 2020 2020 2020 2020 6462 7365 742c 0a20          dbset,. 
-00005ca0: 2020 2020 2020 2066 6965 6c64 2c0a 2020         field,.  
-00005cb0: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-00005cc0: 6167 653d 2256 616c 7565 2061 6c72 6561  age="Value alrea
-00005cd0: 6479 2069 6e20 6461 7461 6261 7365 206f  dy in database o
-00005ce0: 7220 656d 7074 7922 2c0a 2020 2020 2020  r empty",.      
-00005cf0: 2020 616c 6c6f 7765 645f 6f76 6572 7269    allowed_overri
-00005d00: 6465 3d5b 5d2c 0a20 2020 2020 2020 2069  de=[],.        i
-00005d10: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
-00005d20: 7465 7273 3d46 616c 7365 2c0a 2020 2020  ters=False,.    
-00005d30: 293a 0a20 2020 2020 2020 2069 6620 6973  ):.        if is
-00005d40: 696e 7374 616e 6365 2866 6965 6c64 2c20  instance(field, 
-00005d50: 5461 626c 6529 3a0a 2020 2020 2020 2020  Table):.        
-00005d60: 2020 2020 6669 656c 6420 3d20 6669 656c      field = fiel
-00005d70: 642e 5f69 640a 0a20 2020 2020 2020 2069  d._id..        i
-00005d80: 6620 6861 7361 7474 7228 6462 7365 742c  f hasattr(dbset,
-00005d90: 2022 6465 6669 6e65 5f74 6162 6c65 2229   "define_table")
-00005da0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00005db0: 6c66 2e64 6273 6574 203d 2064 6273 6574  lf.dbset = dbset
-00005dc0: 2829 0a20 2020 2020 2020 2065 6c73 653a  ().        else:
-00005dd0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00005de0: 662e 6462 7365 7420 3d20 6462 7365 740a  f.dbset = dbset.
-00005df0: 2020 2020 2020 2020 7365 6c66 2e66 6965          self.fie
-00005e00: 6c64 203d 2066 6965 6c64 0a20 2020 2020  ld = field.     
-00005e10: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
-00005e20: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
-00005e30: 7373 6167 650a 2020 2020 2020 2020 7365  ssage.        se
-00005e40: 6c66 2e72 6563 6f72 645f 6964 203d 2030  lf.record_id = 0
-00005e50: 0a20 2020 2020 2020 2073 656c 662e 616c  .        self.al
-00005e60: 6c6f 7765 645f 6f76 6572 7269 6465 203d  lowed_override =
-00005e70: 2061 6c6c 6f77 6564 5f6f 7665 7272 6964   allowed_overrid
-00005e80: 650a 2020 2020 2020 2020 7365 6c66 2e69  e.        self.i
-00005e90: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
-00005ea0: 7465 7273 203d 2069 676e 6f72 655f 636f  ters = ignore_co
-00005eb0: 6d6d 6f6e 5f66 696c 7465 7273 0a0a 2020  mmon_filters..  
-00005ec0: 2020 6465 6620 7365 745f 7365 6c66 5f69    def set_self_i
-00005ed0: 6428 7365 6c66 2c20 6964 293a 0a20 2020  d(self, id):.   
-00005ee0: 2020 2020 2023 2074 6869 7320 6973 206c       # this is l
-00005ef0: 6567 6163 7920 202d 2077 6562 3270 7920  egacy  - web2py 
-00005f00: 7573 6573 2062 7574 206e 6f62 6f64 7920  uses but nobody 
-00005f10: 656c 7365 2073 686f 756c 640a 2020 2020  else should.    
-00005f20: 2020 2020 2320 6974 2069 7320 6e6f 7420      # it is not 
-00005f30: 7361 6665 2069 6620 7468 6520 6f62 6a65  safe if the obje
-00005f40: 6374 2069 7320 7265 6379 636c 6564 0a20  ct is recycled. 
-00005f50: 2020 2020 2020 2073 656c 662e 7265 636f         self.reco
-00005f60: 7264 5f69 6420 3d20 6964 0a0a 2020 2020  rd_id = id..    
-00005f70: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-00005f80: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-00005f90: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-00005fa0: 2020 2076 616c 7565 203d 2074 6f5f 6e61     value = to_na
-00005fb0: 7469 7665 2873 7472 2876 616c 7565 2929  tive(str(value))
-00005fc0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00005fd0: 7661 6c75 652e 7374 7269 7028 293a 0a20  value.strip():. 
-00005fe0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00005ff0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-00006000: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-00006010: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-00006020: 6167 6529 290a 2020 2020 2020 2020 6966  age)).        if
-00006030: 2076 616c 7565 2069 6e20 7365 6c66 2e61   value in self.a
-00006040: 6c6c 6f77 6564 5f6f 7665 7272 6964 653a  llowed_override:
-00006050: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00006060: 7572 6e20 7661 6c75 650a 2020 2020 2020  urn value.      
-00006070: 2020 2874 6162 6c65 6e61 6d65 2c20 6669    (tablename, fi
-00006080: 656c 646e 616d 6529 203d 2073 7472 2873  eldname) = str(s
-00006090: 656c 662e 6669 656c 6429 2e73 706c 6974  elf.field).split
-000060a0: 2822 2e22 290a 2020 2020 2020 2020 7461  (".").        ta
-000060b0: 626c 6520 3d20 7365 6c66 2e64 6273 6574  ble = self.dbset
-000060c0: 2e64 625b 7461 626c 656e 616d 655d 0a20  .db[tablename]. 
-000060d0: 2020 2020 2020 2066 6965 6c64 203d 2074         field = t
-000060e0: 6162 6c65 5b66 6965 6c64 6e61 6d65 5d0a  able[fieldname].
-000060f0: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-00006100: 6669 656c 6420 3d3d 2076 616c 7565 0a0a  field == value..
-00006110: 2020 2020 2020 2020 2320 6d61 6b65 2073          # make s
-00006120: 7572 6520 6578 636c 7564 6520 7468 6520  ure exclude the 
-00006130: 7265 636f 7264 5f69 640a 2020 2020 2020  record_id.      
-00006140: 2020 6964 203d 2072 6563 6f72 645f 6964    id = record_id
-00006150: 206f 7220 7365 6c66 2e72 6563 6f72 645f   or self.record_
-00006160: 6964 0a20 2020 2020 2020 2069 6620 6973  id.        if is
-00006170: 696e 7374 616e 6365 2869 642c 2064 6963  instance(id, dic
-00006180: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-00006190: 6964 203d 2074 6162 6c65 282a 2a69 6429  id = table(**id)
-000061a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000061b0: 6964 2069 7320 4e6f 6e65 3a0a 2020 2020  id is None:.    
-000061c0: 2020 2020 2020 2020 7175 6572 7920 263d          query &=
-000061d0: 2074 6162 6c65 2e5f 6964 2021 3d20 6964   table._id != id
-000061e0: 0a20 2020 2020 2020 2073 7562 7365 7420  .        subset 
-000061f0: 3d20 7365 6c66 2e64 6273 6574 2871 7565  = self.dbset(que
-00006200: 7279 2c20 6967 6e6f 7265 5f63 6f6d 6d6f  ry, ignore_commo
-00006210: 6e5f 6669 6c74 6572 733d 7365 6c66 2e69  n_filters=self.i
-00006220: 676e 6f72 655f 636f 6d6d 6f6e 5f66 696c  gnore_common_fil
-00006230: 7465 7273 290a 2020 2020 2020 2020 6966  ters).        if
-00006240: 2073 7562 7365 742e 7365 6c65 6374 286c   subset.select(l
-00006250: 696d 6974 6279 3d28 302c 2031 2929 3a0a  imitby=(0, 1)):.
-00006260: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00006270: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-00006280: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-00006290: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-000062a0: 7361 6765 2929 0a20 2020 2020 2020 2072  sage)).        r
-000062b0: 6574 7572 6e20 7661 6c75 650a 0a0a 6465  eturn value...de
-000062c0: 6620 7261 6e67 655f 6572 726f 725f 6d65  f range_error_me
-000062d0: 7373 6167 6528 6572 726f 725f 6d65 7373  ssage(error_mess
-000062e0: 6167 652c 2077 6861 745f 746f 5f65 6e74  age, what_to_ent
-000062f0: 6572 2c20 6d69 6e69 6d75 6d2c 206d 6178  er, minimum, max
-00006300: 696d 756d 293a 0a20 2020 2022 2222 6275  imum):.    """bu
-00006310: 696c 6420 7468 6520 6572 726f 7220 6d65  ild the error me
-00006320: 7373 6167 6520 666f 7220 7468 6520 6e75  ssage for the nu
-00006330: 6d62 6572 2072 616e 6765 2076 616c 6964  mber range valid
-00006340: 6174 6f72 7322 2222 0a20 2020 2069 6620  ators""".    if 
-00006350: 6572 726f 725f 6d65 7373 6167 6520 6973  error_message is
-00006360: 204e 6f6e 653a 0a20 2020 2020 2020 2065   None:.        e
-00006370: 7272 6f72 5f6d 6573 7361 6765 203d 2022  rror_message = "
-00006380: 456e 7465 7220 2220 2b20 7768 6174 5f74  Enter " + what_t
-00006390: 6f5f 656e 7465 720a 2020 2020 2020 2020  o_enter.        
-000063a0: 6966 206d 696e 696d 756d 2069 7320 6e6f  if minimum is no
-000063b0: 7420 4e6f 6e65 2061 6e64 206d 6178 696d  t None and maxim
-000063c0: 756d 2069 7320 6e6f 7420 4e6f 6e65 3a0a  um is not None:.
-000063d0: 2020 2020 2020 2020 2020 2020 6572 726f              erro
-000063e0: 725f 6d65 7373 6167 6520 2b3d 2022 2062  r_message += " b
-000063f0: 6574 7765 656e 2025 286d 696e 2967 2061  etween %(min)g a
-00006400: 6e64 2025 286d 6178 2967 220a 2020 2020  nd %(max)g".    
-00006410: 2020 2020 656c 6966 206d 696e 696d 756d      elif minimum
-00006420: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00006430: 2020 2020 2020 2020 2020 6572 726f 725f            error_
-00006440: 6d65 7373 6167 6520 2b3d 2022 2067 7265  message += " gre
-00006450: 6174 6572 2074 6861 6e20 6f72 2065 7175  ater than or equ
-00006460: 616c 2074 6f20 2528 6d69 6e29 6722 0a20  al to %(min)g". 
-00006470: 2020 2020 2020 2065 6c69 6620 6d61 7869         elif maxi
-00006480: 6d75 6d20 6973 206e 6f74 204e 6f6e 653a  mum is not None:
-00006490: 0a20 2020 2020 2020 2020 2020 2065 7272  .            err
-000064a0: 6f72 5f6d 6573 7361 6765 202b 3d20 2220  or_message += " 
-000064b0: 6c65 7373 2074 6861 6e20 6f72 2065 7175  less than or equ
-000064c0: 616c 2074 6f20 2528 6d61 7829 6722 0a20  al to %(max)g". 
-000064d0: 2020 2069 6620 7479 7065 286d 6178 696d     if type(maxim
-000064e0: 756d 2920 696e 2069 6e74 6567 6572 5f74  um) in integer_t
-000064f0: 7970 6573 3a0a 2020 2020 2020 2020 6d61  ypes:.        ma
-00006500: 7869 6d75 6d20 2d3d 2031 0a20 2020 2072  ximum -= 1.    r
-00006510: 6574 7572 6e20 7374 7228 7472 616e 736c  eturn str(transl
-00006520: 6174 6528 6572 726f 725f 6d65 7373 6167  ate(error_messag
-00006530: 6529 2920 2520 6469 6374 286d 696e 3d6d  e)) % dict(min=m
-00006540: 696e 696d 756d 2c20 6d61 783d 6d61 7869  inimum, max=maxi
-00006550: 6d75 6d29 0a0a 0a63 6c61 7373 2049 535f  mum)...class IS_
-00006560: 494e 545f 494e 5f52 414e 4745 2856 616c  INT_IN_RANGE(Val
-00006570: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
-00006580: 0a20 2020 2044 6574 6572 6d69 6e65 7320  .    Determines 
-00006590: 7468 6174 2074 6865 2061 7267 756d 656e  that the argumen
-000065a0: 7420 6973 2028 6f72 2063 616e 2062 6520  t is (or can be 
-000065b0: 7265 7072 6573 656e 7465 6420 6173 2920  represented as) 
-000065c0: 616e 2069 6e74 2c0a 2020 2020 616e 6420  an int,.    and 
-000065d0: 7468 6174 2069 7420 6661 6c6c 7320 7769  that it falls wi
-000065e0: 7468 696e 2074 6865 2073 7065 6369 6669  thin the specifi
-000065f0: 6564 2072 616e 6765 2e20 5468 6520 7261  ed range. The ra
-00006600: 6e67 6520 6973 2069 6e74 6572 7072 6574  nge is interpret
-00006610: 6564 0a20 2020 2069 6e20 7468 6520 5079  ed.    in the Py
-00006620: 7468 6f6e 6963 2077 6179 2c20 736f 2074  thonic way, so t
-00006630: 6865 2074 6573 7420 6973 3a20 6d69 6e20  he test is: min 
-00006640: 3c3d 2076 616c 7565 203c 206d 6178 2e0a  <= value < max..
-00006650: 0a20 2020 2054 6865 206d 696e 696d 756d  .    The minimum
-00006660: 2061 6e64 206d 6178 696d 756d 206c 696d   and maximum lim
-00006670: 6974 7320 6361 6e20 6265 204e 6f6e 652c  its can be None,
-00006680: 206d 6561 6e69 6e67 206e 6f20 6c6f 7765   meaning no lowe
-00006690: 7220 6f72 2075 7070 6572 206c 696d 6974  r or upper limit
-000066a0: 2c0a 2020 2020 7265 7370 6563 7469 7665  ,.    respective
-000066b0: 6c79 2e0a 0a20 2020 2045 7861 6d70 6c65  ly...    Example
-000066c0: 3a0a 2020 2020 2020 2020 5573 6564 2061  :.        Used a
-000066d0: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-000066e0: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
-000066f0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
-00006700: 272c 2072 6571 7569 7265 733d 4953 5f49  ', requires=IS_I
-00006710: 4e54 5f49 4e5f 5241 4e47 4528 302c 2031  NT_IN_RANGE(0, 1
-00006720: 3029 290a 0a20 2020 2020 2020 2020 2020  0))..           
-00006730: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
-00006740: 414e 4745 2831 2c35 2928 2734 2729 0a20  ANGE(1,5)('4'). 
-00006750: 2020 2020 2020 2020 2020 2028 342c 204e             (4, N
-00006760: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00006770: 203e 3e3e 2049 535f 494e 545f 494e 5f52   >>> IS_INT_IN_R
-00006780: 414e 4745 2831 2c35 2928 3429 0a20 2020  ANGE(1,5)(4).   
-00006790: 2020 2020 2020 2020 2028 342c 204e 6f6e           (4, Non
-000067a0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-000067b0: 3e3e 2049 535f 494e 545f 494e 5f52 414e  >> IS_INT_IN_RAN
-000067c0: 4745 2831 2c35 2928 3129 0a20 2020 2020  GE(1,5)(1).     
-000067d0: 2020 2020 2020 2028 312c 204e 6f6e 6529         (1, None)
-000067e0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000067f0: 2049 535f 494e 545f 494e 5f52 414e 4745   IS_INT_IN_RANGE
-00006800: 2831 2c35 2928 3529 0a20 2020 2020 2020  (1,5)(5).       
-00006810: 2020 2020 2028 352c 2027 656e 7465 7220       (5, 'enter 
-00006820: 616e 2069 6e74 6567 6572 2062 6574 7765  an integer betwe
-00006830: 656e 2031 2061 6e64 2034 2729 0a20 2020  en 1 and 4').   
-00006840: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00006850: 494e 545f 494e 5f52 414e 4745 2831 2c35  INT_IN_RANGE(1,5
-00006860: 2928 3529 0a20 2020 2020 2020 2020 2020  )(5).           
-00006870: 2028 352c 2027 656e 7465 7220 616e 2069   (5, 'enter an i
-00006880: 6e74 6567 6572 2062 6574 7765 656e 2031  nteger between 1
-00006890: 2061 6e64 2034 2729 0a20 2020 2020 2020   and 4').       
-000068a0: 2020 2020 203e 3e3e 2049 535f 494e 545f       >>> IS_INT_
-000068b0: 494e 5f52 414e 4745 2831 2c35 2928 332e  IN_RANGE(1,5)(3.
-000068c0: 3529 0a20 2020 2020 2020 2020 2020 2028  5).            (
-000068d0: 332e 352c 2027 656e 7465 7220 616e 2069  3.5, 'enter an i
-000068e0: 6e74 6567 6572 2062 6574 7765 656e 2031  nteger between 1
-000068f0: 2061 6e64 2034 2729 0a20 2020 2020 2020   and 4').       
-00006900: 2020 2020 203e 3e3e 2049 535f 494e 545f       >>> IS_INT_
-00006910: 494e 5f52 414e 4745 284e 6f6e 652c 3529  IN_RANGE(None,5)
-00006920: 2827 3427 290a 2020 2020 2020 2020 2020  ('4').          
-00006930: 2020 2834 2c20 4e6f 6e65 290a 2020 2020    (4, None).    
-00006940: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00006950: 4e54 5f49 4e5f 5241 4e47 4528 4e6f 6e65  NT_IN_RANGE(None
-00006960: 2c35 2928 2736 2729 0a20 2020 2020 2020  ,5)('6').       
-00006970: 2020 2020 2028 2736 272c 2027 656e 7465       ('6', 'ente
-00006980: 7220 616e 2069 6e74 6567 6572 206c 6573  r an integer les
-00006990: 7320 7468 616e 206f 7220 6571 7561 6c20  s than or equal 
-000069a0: 746f 2034 2729 0a20 2020 2020 2020 2020  to 4').         
-000069b0: 2020 203e 3e3e 2049 535f 494e 545f 494e     >>> IS_INT_IN
-000069c0: 5f52 414e 4745 2831 2c4e 6f6e 6529 2827  _RANGE(1,None)('
-000069d0: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
-000069e0: 2834 2c20 4e6f 6e65 290a 2020 2020 2020  (4, None).      
-000069f0: 2020 2020 2020 3e3e 3e20 4953 5f49 4e54        >>> IS_INT
-00006a00: 5f49 4e5f 5241 4e47 4528 312c 4e6f 6e65  _IN_RANGE(1,None
-00006a10: 2928 2730 2729 0a20 2020 2020 2020 2020  )('0').         
-00006a20: 2020 2028 2730 272c 2027 656e 7465 7220     ('0', 'enter 
-00006a30: 616e 2069 6e74 6567 6572 2067 7265 6174  an integer great
-00006a40: 6572 2074 6861 6e20 6f72 2065 7175 616c  er than or equal
-00006a50: 2074 6f20 3127 290a 2020 2020 2020 2020   to 1').        
-00006a60: 2020 2020 3e3e 3e20 4953 5f49 4e54 5f49      >>> IS_INT_I
-00006a70: 4e5f 5241 4e47 4528 2928 3629 0a20 2020  N_RANGE()(6).   
-00006a80: 2020 2020 2020 2020 2028 362c 204e 6f6e           (6, Non
-00006a90: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00006aa0: 3e3e 2049 535f 494e 545f 494e 5f52 414e  >> IS_INT_IN_RAN
-00006ab0: 4745 2829 2827 6162 6327 290a 2020 2020  GE()('abc').    
-00006ac0: 2020 2020 2020 2020 2827 6162 6327 2c20          ('abc', 
-00006ad0: 2765 6e74 6572 2061 6e20 696e 7465 6765  'enter an intege
-00006ae0: 7227 290a 2020 2020 2222 220a 0a20 2020  r').    """..   
-00006af0: 2052 4547 4558 5f49 4e54 203d 2072 225e   REGEX_INT = r"^
-00006b00: 5b2b 2d5d 3f5c 642b 2422 0a0a 2020 2020  [+-]?\d+$"..    
-00006b10: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00006b20: 662c 206d 696e 696d 756d 3d4e 6f6e 652c  f, minimum=None,
-00006b30: 206d 6178 696d 756d 3d4e 6f6e 652c 2065   maximum=None, e
-00006b40: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
-00006b50: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
-00006b60: 2e6d 696e 696d 756d 203d 2069 6e74 286d  .minimum = int(m
-00006b70: 696e 696d 756d 2920 6966 206d 696e 696d  inimum) if minim
-00006b80: 756d 2069 7320 6e6f 7420 4e6f 6e65 2065  um is not None e
-00006b90: 6c73 6520 4e6f 6e65 0a20 2020 2020 2020  lse None.       
-00006ba0: 2073 656c 662e 6d61 7869 6d75 6d20 3d20   self.maximum = 
-00006bb0: 696e 7428 6d61 7869 6d75 6d29 2069 6620  int(maximum) if 
-00006bc0: 6d61 7869 6d75 6d20 6973 206e 6f74 204e  maximum is not N
-00006bd0: 6f6e 6520 656c 7365 204e 6f6e 650a 2020  one else None.  
-00006be0: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
-00006bf0: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
-00006c00: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
-00006c10: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
-00006c20: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
-00006c30: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
-00006c40: 2069 6620 7265 2e6d 6174 6368 2873 656c   if re.match(sel
-00006c50: 662e 5245 4745 585f 494e 542c 2073 7472  f.REGEX_INT, str
-00006c60: 2876 616c 7565 2929 3a0a 2020 2020 2020  (value)):.      
-00006c70: 2020 2020 2020 7620 3d20 696e 7428 7661        v = int(va
-00006c80: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
-00006c90: 2069 6620 2873 656c 662e 6d69 6e69 6d75   if (self.minimu
-00006ca0: 6d20 6973 204e 6f6e 6520 6f72 2076 203e  m is None or v >
-00006cb0: 3d20 7365 6c66 2e6d 696e 696d 756d 2920  = self.minimum) 
-00006cc0: 616e 6420 280a 2020 2020 2020 2020 2020  and (.          
-00006cd0: 2020 2020 2020 7365 6c66 2e6d 6178 696d        self.maxim
-00006ce0: 756d 2069 7320 4e6f 6e65 206f 7220 7620  um is None or v 
-00006cf0: 3c20 7365 6c66 2e6d 6178 696d 756d 0a20  < self.maximum. 
-00006d00: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-00006d10: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00006d20: 7475 726e 2076 0a20 2020 2020 2020 2072  turn v.        r
-00006d30: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00006d40: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
-00006d50: 2020 7261 6e67 655f 6572 726f 725f 6d65    range_error_me
-00006d60: 7373 6167 6528 0a20 2020 2020 2020 2020  ssage(.         
-00006d70: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-00006d80: 725f 6d65 7373 6167 652c 2022 616e 2069  r_message, "an i
-00006d90: 6e74 6567 6572 222c 2073 656c 662e 6d69  nteger", self.mi
-00006da0: 6e69 6d75 6d2c 2073 656c 662e 6d61 7869  nimum, self.maxi
-00006db0: 6d75 6d0a 2020 2020 2020 2020 2020 2020  mum.            
-00006dc0: 290a 2020 2020 2020 2020 290a 0a0a 6465  ).        )...de
-00006dd0: 6620 7374 7232 6465 6328 6e75 6d62 6572  f str2dec(number
-00006de0: 293a 0a20 2020 2073 203d 2073 7472 286e  ):.    s = str(n
-00006df0: 756d 6265 7229 0a20 2020 2069 6620 222e  umber).    if ".
-00006e00: 2220 6e6f 7420 696e 2073 3a0a 2020 2020  " not in s:.    
-00006e10: 2020 2020 7320 2b3d 2022 2e30 3022 0a20      s += ".00". 
-00006e20: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00006e30: 2073 202b 3d20 2230 2220 2a20 2832 202d   s += "0" * (2 -
-00006e40: 206c 656e 2873 2e73 706c 6974 2822 2e22   len(s.split("."
-00006e50: 295b 315d 2929 0a20 2020 2072 6574 7572  )[1])).    retur
-00006e60: 6e20 730a 0a0a 636c 6173 7320 4953 5f46  n s...class IS_F
-00006e70: 4c4f 4154 5f49 4e5f 5241 4e47 4528 5661  LOAT_IN_RANGE(Va
-00006e80: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
-00006e90: 220a 2020 2020 4465 7465 726d 696e 6573  ".    Determines
-00006ea0: 2074 6861 7420 7468 6520 6172 6775 6d65   that the argume
-00006eb0: 6e74 2069 7320 286f 7220 6361 6e20 6265  nt is (or can be
-00006ec0: 2072 6570 7265 7365 6e74 6564 2061 7329   represented as)
-00006ed0: 2061 2066 6c6f 6174 2c0a 2020 2020 616e   a float,.    an
-00006ee0: 6420 7468 6174 2069 7420 6661 6c6c 7320  d that it falls 
-00006ef0: 7769 7468 696e 2074 6865 2073 7065 6369  within the speci
-00006f00: 6669 6564 2069 6e63 6c75 7369 7665 2072  fied inclusive r
-00006f10: 616e 6765 2e0a 2020 2020 5468 6520 636f  ange..    The co
-00006f20: 6d70 6172 6973 6f6e 2069 7320 6d61 6465  mparison is made
-00006f30: 2077 6974 6820 6e61 7469 7665 2061 7269   with native ari
-00006f40: 7468 6d65 7469 632e 0a0a 2020 2020 5468  thmetic...    Th
-00006f50: 6520 6d69 6e69 6d75 6d20 616e 6420 6d61  e minimum and ma
-00006f60: 7869 6d75 6d20 6c69 6d69 7473 2063 616e  ximum limits can
-00006f70: 2062 6520 4e6f 6e65 2c20 6d65 616e 696e   be None, meanin
-00006f80: 6720 6e6f 206c 6f77 6572 206f 7220 7570  g no lower or up
-00006f90: 7065 7220 6c69 6d69 742c 0a20 2020 2072  per limit,.    r
-00006fa0: 6573 7065 6374 6976 656c 792e 0a0a 2020  espectively...  
-00006fb0: 2020 4578 616d 706c 653a 0a20 2020 2020    Example:.     
-00006fc0: 2020 2055 7365 6420 6173 3a3a 0a0a 2020     Used as::..  
-00006fd0: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
-00006fe0: 5f74 7970 653d 2774 6578 7427 2c20 5f6e  _type='text', _n
-00006ff0: 616d 653d 276e 616d 6527 2c20 7265 7175  ame='name', requ
-00007000: 6972 6573 3d49 535f 464c 4f41 545f 494e  ires=IS_FLOAT_IN
-00007010: 5f52 414e 4745 2830 2c20 3130 2929 0a0a  _RANGE(0, 10))..
-00007020: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00007030: 4953 5f46 4c4f 4154 5f49 4e5f 5241 4e47  IS_FLOAT_IN_RANG
-00007040: 4528 312c 3529 2827 3427 290a 2020 2020  E(1,5)('4').    
-00007050: 2020 2020 2020 2020 2834 2e30 2c20 4e6f          (4.0, No
-00007060: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00007070: 3e3e 3e20 4953 5f46 4c4f 4154 5f49 4e5f  >>> IS_FLOAT_IN_
-00007080: 5241 4e47 4528 312c 3529 2834 290a 2020  RANGE(1,5)(4).  
-00007090: 2020 2020 2020 2020 2020 2834 2e30 2c20            (4.0, 
-000070a0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-000070b0: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
-000070c0: 4e5f 5241 4e47 4528 312c 3529 2831 290a  N_RANGE(1,5)(1).
-000070d0: 2020 2020 2020 2020 2020 2020 2831 2e30              (1.0
-000070e0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-000070f0: 2020 2020 3e3e 3e20 4953 5f46 4c4f 4154      >>> IS_FLOAT
-00007100: 5f49 4e5f 5241 4e47 4528 312c 3529 2835  _IN_RANGE(1,5)(5
-00007110: 2e32 3529 0a20 2020 2020 2020 2020 2020  .25).           
-00007120: 2028 352e 3235 2c20 2765 6e74 6572 2061   (5.25, 'enter a
-00007130: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
-00007140: 3120 616e 6420 3527 290a 2020 2020 2020  1 and 5').      
-00007150: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
-00007160: 4154 5f49 4e5f 5241 4e47 4528 312c 3529  AT_IN_RANGE(1,5)
-00007170: 2836 2e30 290a 2020 2020 2020 2020 2020  (6.0).          
-00007180: 2020 2836 2e30 2c20 2765 6e74 6572 2061    (6.0, 'enter a
-00007190: 206e 756d 6265 7220 6265 7477 6565 6e20   number between 
-000071a0: 3120 616e 6420 3527 290a 2020 2020 2020  1 and 5').      
-000071b0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
-000071c0: 4154 5f49 4e5f 5241 4e47 4528 312c 3529  AT_IN_RANGE(1,5)
-000071d0: 2833 2e35 290a 2020 2020 2020 2020 2020  (3.5).          
-000071e0: 2020 2833 2e35 2c20 4e6f 6e65 290a 2020    (3.5, None).  
-000071f0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00007200: 5f46 4c4f 4154 5f49 4e5f 5241 4e47 4528  _FLOAT_IN_RANGE(
-00007210: 312c 4e6f 6e65 2928 332e 3529 0a20 2020  1,None)(3.5).   
-00007220: 2020 2020 2020 2020 2028 332e 352c 204e           (3.5, N
-00007230: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00007240: 203e 3e3e 2049 535f 464c 4f41 545f 494e   >>> IS_FLOAT_IN
-00007250: 5f52 414e 4745 284e 6f6e 652c 3529 2833  _RANGE(None,5)(3
-00007260: 2e35 290a 2020 2020 2020 2020 2020 2020  .5).            
-00007270: 2833 2e35 2c20 4e6f 6e65 290a 2020 2020  (3.5, None).    
-00007280: 2020 2020 2020 2020 3e3e 3e20 4953 5f46          >>> IS_F
-00007290: 4c4f 4154 5f49 4e5f 5241 4e47 4528 312c  LOAT_IN_RANGE(1,
-000072a0: 4e6f 6e65 2928 302e 3529 0a20 2020 2020  None)(0.5).     
-000072b0: 2020 2020 2020 2028 302e 352c 2027 656e         (0.5, 'en
-000072c0: 7465 7220 6120 6e75 6d62 6572 2067 7265  ter a number gre
-000072d0: 6174 6572 2074 6861 6e20 6f72 2065 7175  ater than or equ
-000072e0: 616c 2074 6f20 3127 290a 2020 2020 2020  al to 1').      
-000072f0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
-00007300: 4154 5f49 4e5f 5241 4e47 4528 4e6f 6e65  AT_IN_RANGE(None
-00007310: 2c35 2928 362e 3529 0a20 2020 2020 2020  ,5)(6.5).       
-00007320: 2020 2020 2028 362e 352c 2027 656e 7465       (6.5, 'ente
-00007330: 7220 6120 6e75 6d62 6572 206c 6573 7320  r a number less 
-00007340: 7468 616e 206f 7220 6571 7561 6c20 746f  than or equal to
-00007350: 2035 2729 0a20 2020 2020 2020 2020 2020   5').           
-00007360: 203e 3e3e 2049 535f 464c 4f41 545f 494e   >>> IS_FLOAT_IN
-00007370: 5f52 414e 4745 2829 2836 2e35 290a 2020  _RANGE()(6.5).  
-00007380: 2020 2020 2020 2020 2020 2836 2e35 2c20            (6.5, 
-00007390: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-000073a0: 2020 3e3e 3e20 4953 5f46 4c4f 4154 5f49    >>> IS_FLOAT_I
-000073b0: 4e5f 5241 4e47 4528 2928 2761 6263 2729  N_RANGE()('abc')
-000073c0: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
-000073d0: 6263 272c 2027 656e 7465 7220 6120 6e75  bc', 'enter a nu
-000073e0: 6d62 6572 2729 0a20 2020 2022 2222 0a0a  mber').    """..
-000073f0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00007400: 2873 656c 662c 206d 696e 696d 756d 3d4e  (self, minimum=N
-00007410: 6f6e 652c 206d 6178 696d 756d 3d4e 6f6e  one, maximum=Non
-00007420: 652c 2065 7272 6f72 5f6d 6573 7361 6765  e, error_message
-00007430: 3d4e 6f6e 652c 2064 6f74 3d22 2e22 293a  =None, dot="."):
-00007440: 0a20 2020 2020 2020 2073 656c 662e 6d69  .        self.mi
-00007450: 6e69 6d75 6d20 3d20 666c 6f61 7428 6d69  nimum = float(mi
-00007460: 6e69 6d75 6d29 2069 6620 6d69 6e69 6d75  nimum) if minimu
-00007470: 6d20 6973 206e 6f74 204e 6f6e 6520 656c  m is not None el
-00007480: 7365 204e 6f6e 650a 2020 2020 2020 2020  se None.        
-00007490: 7365 6c66 2e6d 6178 696d 756d 203d 2066  self.maximum = f
-000074a0: 6c6f 6174 286d 6178 696d 756d 2920 6966  loat(maximum) if
-000074b0: 206d 6178 696d 756d 2069 7320 6e6f 7420   maximum is not 
-000074c0: 4e6f 6e65 2065 6c73 6520 4e6f 6e65 0a20  None else None. 
-000074d0: 2020 2020 2020 2073 656c 662e 646f 7420         self.dot 
-000074e0: 3d20 7374 7228 646f 7429 0a20 2020 2020  = str(dot).     
-000074f0: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
-00007500: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
-00007510: 7373 6167 650a 0a20 2020 2064 6566 2076  ssage..    def v
-00007520: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
-00007530: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
-00007540: 6f6e 6529 3a0a 2020 2020 2020 2020 7472  one):.        tr
-00007550: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
-00007560: 6620 7365 6c66 2e64 6f74 203d 3d20 222e  f self.dot == ".
-00007570: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
-00007580: 2020 2076 203d 2066 6c6f 6174 2876 616c     v = float(val
-00007590: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-000075a0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-000075b0: 2020 2020 2020 7620 3d20 666c 6f61 7428        v = float(
-000075c0: 7374 7228 7661 6c75 6529 2e72 6570 6c61  str(value).repla
-000075d0: 6365 2873 656c 662e 646f 742c 2022 2e22  ce(self.dot, "."
-000075e0: 2929 0a20 2020 2020 2020 2020 2020 2069  )).            i
-000075f0: 6620 2873 656c 662e 6d69 6e69 6d75 6d20  f (self.minimum 
-00007600: 6973 204e 6f6e 6520 6f72 2076 203e 3d20  is None or v >= 
-00007610: 7365 6c66 2e6d 696e 696d 756d 2920 616e  self.minimum) an
-00007620: 6420 280a 2020 2020 2020 2020 2020 2020  d (.            
-00007630: 2020 2020 7365 6c66 2e6d 6178 696d 756d      self.maximum
-00007640: 2069 7320 4e6f 6e65 206f 7220 7620 3c3d   is None or v <=
-00007650: 2073 656c 662e 6d61 7869 6d75 6d0a 2020   self.maximum.  
-00007660: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
-00007670: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00007680: 7572 6e20 760a 2020 2020 2020 2020 6578  urn v.        ex
-00007690: 6365 7074 2028 5661 6c75 6545 7272 6f72  cept (ValueError
-000076a0: 2c20 5479 7065 4572 726f 7229 3a0a 2020  , TypeError):.  
-000076b0: 2020 2020 2020 2020 2020 7061 7373 0a20            pass. 
-000076c0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-000076d0: 6964 6174 696f 6e45 7272 6f72 280a 2020  idationError(.  
-000076e0: 2020 2020 2020 2020 2020 7261 6e67 655f            range_
-000076f0: 6572 726f 725f 6d65 7373 6167 6528 0a20  error_message(. 
-00007700: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007710: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00007720: 652c 2022 6120 6e75 6d62 6572 222c 2073  e, "a number", s
-00007730: 656c 662e 6d69 6e69 6d75 6d2c 2073 656c  elf.minimum, sel
-00007740: 662e 6d61 7869 6d75 6d0a 2020 2020 2020  f.maximum.      
-00007750: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00007760: 290a 0a20 2020 2064 6566 2066 6f72 6d61  )..    def forma
-00007770: 7474 6572 2873 656c 662c 2076 616c 7565  tter(self, value
-00007780: 293a 0a20 2020 2020 2020 2069 6620 7661  ):.        if va
-00007790: 6c75 6520 6973 204e 6f6e 653a 0a20 2020  lue is None:.   
-000077a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000077b0: 4e6f 6e65 0a20 2020 2020 2020 2072 6574  None.        ret
-000077c0: 7572 6e20 7374 7232 6465 6328 7661 6c75  urn str2dec(valu
-000077d0: 6529 2e72 6570 6c61 6365 2822 2e22 2c20  e).replace(".", 
-000077e0: 7365 6c66 2e64 6f74 290a 0a0a 636c 6173  self.dot)...clas
-000077f0: 7320 4953 5f44 4543 494d 414c 5f49 4e5f  s IS_DECIMAL_IN_
-00007800: 5241 4e47 4528 5661 6c69 6461 746f 7229  RANGE(Validator)
-00007810: 3a0a 2020 2020 2222 220a 2020 2020 4465  :.    """.    De
-00007820: 7465 726d 696e 6573 2074 6861 7420 7468  termines that th
-00007830: 6520 6172 6775 6d65 6e74 2069 7320 286f  e argument is (o
-00007840: 7220 6361 6e20 6265 2072 6570 7265 7365  r can be represe
-00007850: 6e74 6564 2061 7329 2061 2050 7974 686f  nted as) a Pytho
-00007860: 6e20 4465 6369 6d61 6c2c 0a20 2020 2061  n Decimal,.    a
-00007870: 6e64 2074 6861 7420 6974 2066 616c 6c73  nd that it falls
-00007880: 2077 6974 6869 6e20 7468 6520 7370 6563   within the spec
-00007890: 6966 6965 6420 696e 636c 7573 6976 6520  ified inclusive 
-000078a0: 7261 6e67 652e 0a20 2020 2054 6865 2063  range..    The c
-000078b0: 6f6d 7061 7269 736f 6e20 6973 206d 6164  omparison is mad
-000078c0: 6520 7769 7468 2050 7974 686f 6e20 4465  e with Python De
-000078d0: 6369 6d61 6c20 6172 6974 686d 6574 6963  cimal arithmetic
-000078e0: 2e0a 0a20 2020 2054 6865 206d 696e 696d  ...    The minim
-000078f0: 756d 2061 6e64 206d 6178 696d 756d 206c  um and maximum l
-00007900: 696d 6974 7320 6361 6e20 6265 204e 6f6e  imits can be Non
-00007910: 652c 206d 6561 6e69 6e67 206e 6f20 6c6f  e, meaning no lo
-00007920: 7765 7220 6f72 2075 7070 6572 206c 696d  wer or upper lim
-00007930: 6974 2c0a 2020 2020 7265 7370 6563 7469  it,.    respecti
-00007940: 7665 6c79 2e0a 0a20 2020 2045 7861 6d70  vely...    Examp
-00007950: 6c65 3a0a 2020 2020 2020 2020 5573 6564  le:.        Used
-00007960: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
-00007970: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-00007980: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
-00007990: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
-000079a0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-000079b0: 4528 302c 2031 3029 290a 0a20 2020 2020  E(0, 10))..     
-000079c0: 2020 2020 2020 203e 3e3e 2049 535f 4445         >>> IS_DE
-000079d0: 4349 4d41 4c5f 494e 5f52 414e 4745 2831  CIMAL_IN_RANGE(1
-000079e0: 2c35 2928 2734 2729 0a20 2020 2020 2020  ,5)('4').       
-000079f0: 2020 2020 2028 4465 6369 6d61 6c28 2734       (Decimal('4
-00007a00: 2729 2c20 4e6f 6e65 290a 2020 2020 2020  '), None).      
-00007a10: 2020 2020 2020 3e3e 3e20 4953 5f44 4543        >>> IS_DEC
-00007a20: 494d 414c 5f49 4e5f 5241 4e47 4528 312c  IMAL_IN_RANGE(1,
-00007a30: 3529 2834 290a 2020 2020 2020 2020 2020  5)(4).          
-00007a40: 2020 2844 6563 696d 616c 2827 3427 292c    (Decimal('4'),
-00007a50: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00007a60: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
-00007a70: 4c5f 494e 5f52 414e 4745 2831 2c35 2928  L_IN_RANGE(1,5)(
-00007a80: 3129 0a20 2020 2020 2020 2020 2020 2028  1).            (
-00007a90: 4465 6369 6d61 6c28 2731 2729 2c20 4e6f  Decimal('1'), No
-00007aa0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
-00007ab0: 3e3e 3e20 4953 5f44 4543 494d 414c 5f49  >>> IS_DECIMAL_I
-00007ac0: 4e5f 5241 4e47 4528 312c 3529 2835 2e32  N_RANGE(1,5)(5.2
-00007ad0: 3529 0a20 2020 2020 2020 2020 2020 2028  5).            (
-00007ae0: 352e 3235 2c20 2765 6e74 6572 2061 206e  5.25, 'enter a n
-00007af0: 756d 6265 7220 6265 7477 6565 6e20 3120  umber between 1 
-00007b00: 616e 6420 3527 290a 2020 2020 2020 2020  and 5').        
-00007b10: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
-00007b20: 414c 5f49 4e5f 5241 4e47 4528 352e 3235  AL_IN_RANGE(5.25
-00007b30: 2c36 2928 352e 3235 290a 2020 2020 2020  ,6)(5.25).      
-00007b40: 2020 2020 2020 2844 6563 696d 616c 2827        (Decimal('
-00007b50: 352e 3235 2729 2c20 4e6f 6e65 290a 2020  5.25'), None).  
-00007b60: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00007b70: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-00007b80: 4528 352e 3235 2c36 2928 2735 2e32 3527  E(5.25,6)('5.25'
-00007b90: 290a 2020 2020 2020 2020 2020 2020 2844  ).            (D
-00007ba0: 6563 696d 616c 2827 352e 3235 2729 2c20  ecimal('5.25'), 
-00007bb0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-00007bc0: 2020 3e3e 3e20 4953 5f44 4543 494d 414c    >>> IS_DECIMAL
-00007bd0: 5f49 4e5f 5241 4e47 4528 312c 3529 2836  _IN_RANGE(1,5)(6
-00007be0: 2e30 290a 2020 2020 2020 2020 2020 2020  .0).            
-00007bf0: 2836 2e30 2c20 2765 6e74 6572 2061 206e  (6.0, 'enter a n
-00007c00: 756d 6265 7220 6265 7477 6565 6e20 3120  umber between 1 
-00007c10: 616e 6420 3527 290a 2020 2020 2020 2020  and 5').        
-00007c20: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
-00007c30: 414c 5f49 4e5f 5241 4e47 4528 312c 3529  AL_IN_RANGE(1,5)
-00007c40: 2833 2e35 290a 2020 2020 2020 2020 2020  (3.5).          
-00007c50: 2020 2844 6563 696d 616c 2827 332e 3527    (Decimal('3.5'
-00007c60: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
-00007c70: 2020 2020 203e 3e3e 2049 535f 4445 4349       >>> IS_DECI
-00007c80: 4d41 4c5f 494e 5f52 414e 4745 2831 2e35  MAL_IN_RANGE(1.5
-00007c90: 2c35 2e35 2928 332e 3529 0a20 2020 2020  ,5.5)(3.5).     
-00007ca0: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
-00007cb0: 2733 2e35 2729 2c20 4e6f 6e65 290a 2020  '3.5'), None).  
-00007cc0: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00007cd0: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-00007ce0: 4528 312e 352c 352e 3529 2836 2e35 290a  E(1.5,5.5)(6.5).
-00007cf0: 2020 2020 2020 2020 2020 2020 2836 2e35              (6.5
-00007d00: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
-00007d10: 7220 6265 7477 6565 6e20 312e 3520 616e  r between 1.5 an
-00007d20: 6420 352e 3527 290a 2020 2020 2020 2020  d 5.5').        
-00007d30: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
-00007d40: 414c 5f49 4e5f 5241 4e47 4528 312e 352c  AL_IN_RANGE(1.5,
-00007d50: 4e6f 6e65 2928 362e 3529 0a20 2020 2020  None)(6.5).     
-00007d60: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
-00007d70: 2736 2e35 2729 2c20 4e6f 6e65 290a 2020  '6.5'), None).  
-00007d80: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00007d90: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
-00007da0: 4528 312e 352c 4e6f 6e65 2928 302e 3529  E(1.5,None)(0.5)
-00007db0: 0a20 2020 2020 2020 2020 2020 2028 302e  .            (0.
-00007dc0: 352c 2027 656e 7465 7220 6120 6e75 6d62  5, 'enter a numb
-00007dd0: 6572 2067 7265 6174 6572 2074 6861 6e20  er greater than 
-00007de0: 6f72 2065 7175 616c 2074 6f20 312e 3527  or equal to 1.5'
-00007df0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00007e00: 3e20 4953 5f44 4543 494d 414c 5f49 4e5f  > IS_DECIMAL_IN_
-00007e10: 5241 4e47 4528 4e6f 6e65 2c35 2e35 2928  RANGE(None,5.5)(
-00007e20: 342e 3529 0a20 2020 2020 2020 2020 2020  4.5).           
-00007e30: 2028 4465 6369 6d61 6c28 2734 2e35 2729   (Decimal('4.5')
-00007e40: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00007e50: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
-00007e60: 414c 5f49 4e5f 5241 4e47 4528 4e6f 6e65  AL_IN_RANGE(None
-00007e70: 2c35 2e35 2928 362e 3529 0a20 2020 2020  ,5.5)(6.5).     
-00007e80: 2020 2020 2020 2028 362e 352c 2027 656e         (6.5, 'en
-00007e90: 7465 7220 6120 6e75 6d62 6572 206c 6573  ter a number les
-00007ea0: 7320 7468 616e 206f 7220 6571 7561 6c20  s than or equal 
-00007eb0: 746f 2035 2e35 2729 0a20 2020 2020 2020  to 5.5').       
-00007ec0: 2020 2020 203e 3e3e 2049 535f 4445 4349       >>> IS_DECI
-00007ed0: 4d41 4c5f 494e 5f52 414e 4745 2829 2836  MAL_IN_RANGE()(6
-00007ee0: 2e35 290a 2020 2020 2020 2020 2020 2020  .5).            
-00007ef0: 2844 6563 696d 616c 2827 362e 3527 292c  (Decimal('6.5'),
-00007f00: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00007f10: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
-00007f20: 4c5f 494e 5f52 414e 4745 2830 2c39 3929  L_IN_RANGE(0,99)
-00007f30: 2831 3233 2e31 3233 290a 2020 2020 2020  (123.123).      
-00007f40: 2020 2020 2020 2831 3233 2e31 3233 2c20        (123.123, 
-00007f50: 2765 6e74 6572 2061 206e 756d 6265 7220  'enter a number 
-00007f60: 6265 7477 6565 6e20 3020 616e 6420 3939  between 0 and 99
-00007f70: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-00007f80: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
-00007f90: 5f52 414e 4745 2830 2c39 3929 2827 3132  _RANGE(0,99)('12
-00007fa0: 332e 3132 3327 290a 2020 2020 2020 2020  3.123').        
-00007fb0: 2020 2020 2827 3132 332e 3132 3327 2c20      ('123.123', 
-00007fc0: 2765 6e74 6572 2061 206e 756d 6265 7220  'enter a number 
-00007fd0: 6265 7477 6565 6e20 3020 616e 6420 3939  between 0 and 99
-00007fe0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-00007ff0: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
-00008000: 5f52 414e 4745 2830 2c39 3929 2827 3132  _RANGE(0,99)('12
-00008010: 2e33 3427 290a 2020 2020 2020 2020 2020  .34').          
-00008020: 2020 2844 6563 696d 616c 2827 3132 2e33    (Decimal('12.3
-00008030: 3427 292c 204e 6f6e 6529 0a20 2020 2020  4'), None).     
-00008040: 2020 2020 2020 203e 3e3e 2049 535f 4445         >>> IS_DE
-00008050: 4349 4d41 4c5f 494e 5f52 414e 4745 2829  CIMAL_IN_RANGE()
-00008060: 2827 6162 6327 290a 2020 2020 2020 2020  ('abc').        
-00008070: 2020 2020 2827 6162 6327 2c20 2765 6e74      ('abc', 'ent
-00008080: 6572 2061 206e 756d 6265 7227 290a 2020  er a number').  
-00008090: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
-000080a0: 5f69 6e69 745f 5f28 7365 6c66 2c20 6d69  _init__(self, mi
-000080b0: 6e69 6d75 6d3d 4e6f 6e65 2c20 6d61 7869  nimum=None, maxi
-000080c0: 6d75 6d3d 4e6f 6e65 2c20 6572 726f 725f  mum=None, error_
-000080d0: 6d65 7373 6167 653d 4e6f 6e65 2c20 646f  message=None, do
-000080e0: 743d 222e 2229 3a0a 2020 2020 2020 2020  t="."):.        
-000080f0: 7365 6c66 2e6d 696e 696d 756d 203d 2064  self.minimum = d
-00008100: 6563 696d 616c 2e44 6563 696d 616c 2873  ecimal.Decimal(s
-00008110: 7472 286d 696e 696d 756d 2929 2069 6620  tr(minimum)) if 
-00008120: 6d69 6e69 6d75 6d20 6973 206e 6f74 204e  minimum is not N
-00008130: 6f6e 6520 656c 7365 204e 6f6e 650a 2020  one else None.  
-00008140: 2020 2020 2020 7365 6c66 2e6d 6178 696d        self.maxim
-00008150: 756d 203d 2064 6563 696d 616c 2e44 6563  um = decimal.Dec
-00008160: 696d 616c 2873 7472 286d 6178 696d 756d  imal(str(maximum
-00008170: 2929 2069 6620 6d61 7869 6d75 6d20 6973  )) if maximum is
-00008180: 206e 6f74 204e 6f6e 6520 656c 7365 204e   not None else N
-00008190: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
-000081a0: 2e64 6f74 203d 2073 7472 2864 6f74 290a  .dot = str(dot).
-000081b0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-000081c0: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
-000081d0: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
-000081e0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-000081f0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-00008200: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-00008210: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00008220: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-00008230: 7461 6e63 6528 7661 6c75 652c 2064 6563  tance(value, dec
-00008240: 696d 616c 2e44 6563 696d 616c 293a 0a20  imal.Decimal):. 
-00008250: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-00008260: 616c 7565 203d 2064 6563 696d 616c 2e44  alue = decimal.D
-00008270: 6563 696d 616c 2873 7472 2876 616c 7565  ecimal(str(value
-00008280: 292e 7265 706c 6163 6528 7365 6c66 2e64  ).replace(self.d
-00008290: 6f74 2c20 222e 2229 290a 2020 2020 2020  ot, ".")).      
-000082a0: 2020 2020 2020 6966 2028 7365 6c66 2e6d        if (self.m
-000082b0: 696e 696d 756d 2069 7320 4e6f 6e65 206f  inimum is None o
-000082c0: 7220 7661 6c75 6520 3e3d 2073 656c 662e  r value >= self.
-000082d0: 6d69 6e69 6d75 6d29 2061 6e64 2028 0a20  minimum) and (. 
-000082e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000082f0: 656c 662e 6d61 7869 6d75 6d20 6973 204e  elf.maximum is N
-00008300: 6f6e 6520 6f72 2076 616c 7565 203c 3d20  one or value <= 
-00008310: 7365 6c66 2e6d 6178 696d 756d 0a20 2020  self.maximum.   
-00008320: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
-00008330: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00008340: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
-00008350: 2065 7863 6570 7420 2856 616c 7565 4572   except (ValueEr
-00008360: 726f 722c 2054 7970 6545 7272 6f72 2c20  ror, TypeError, 
-00008370: 6465 6369 6d61 6c2e 496e 7661 6c69 644f  decimal.InvalidO
-00008380: 7065 7261 7469 6f6e 293a 0a20 2020 2020  peration):.     
-00008390: 2020 2020 2020 2070 6173 730a 2020 2020         pass.    
-000083a0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
-000083b0: 7469 6f6e 4572 726f 7228 0a20 2020 2020  tionError(.     
-000083c0: 2020 2020 2020 2072 616e 6765 5f65 7272         range_err
-000083d0: 6f72 5f6d 6573 7361 6765 280a 2020 2020  or_message(.    
-000083e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000083f0: 2e65 7272 6f72 5f6d 6573 7361 6765 2c20  .error_message, 
-00008400: 2261 206e 756d 6265 7222 2c20 7365 6c66  "a number", self
-00008410: 2e6d 696e 696d 756d 2c20 7365 6c66 2e6d  .minimum, self.m
-00008420: 6178 696d 756d 0a20 2020 2020 2020 2020  aximum.         
-00008430: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
-00008440: 2020 2020 6465 6620 666f 726d 6174 7465      def formatte
-00008450: 7228 7365 6c66 2c20 7661 6c75 6529 3a0a  r(self, value):.
-00008460: 2020 2020 2020 2020 6966 2076 616c 7565          if value
-00008470: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00008480: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-00008490: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
-000084a0: 2073 7472 3264 6563 2876 616c 7565 292e   str2dec(value).
-000084b0: 7265 706c 6163 6528 222e 222c 2073 656c  replace(".", sel
-000084c0: 662e 646f 7429 0a0a 0a64 6566 2069 735f  f.dot)...def is_
-000084d0: 656d 7074 7928 7661 6c75 652c 2065 6d70  empty(value, emp
-000084e0: 7479 5f72 6567 6578 3d4e 6f6e 6529 3a0a  ty_regex=None):.
-000084f0: 2020 2020 5f76 616c 7565 203d 2076 616c      _value = val
-00008500: 7565 0a20 2020 2022 2222 7465 7374 2065  ue.    """test e
-00008510: 6d70 7479 2066 6965 6c64 2222 220a 2020  mpty field""".  
-00008520: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-00008530: 7661 6c75 652c 2028 7374 722c 2075 6e69  value, (str, uni
-00008540: 636f 6465 5429 293a 0a20 2020 2020 2020  codeT)):.       
-00008550: 2076 616c 7565 203d 2076 616c 7565 2e73   value = value.s
-00008560: 7472 6970 2829 0a20 2020 2020 2020 2069  trip().        i
-00008570: 6620 656d 7074 795f 7265 6765 7820 6973  f empty_regex is
-00008580: 206e 6f74 204e 6f6e 6520 616e 6420 656d   not None and em
-00008590: 7074 795f 7265 6765 782e 6d61 7463 6828  pty_regex.match(
-000085a0: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
-000085b0: 2020 2020 7661 6c75 6520 3d20 2222 0a20      value = "". 
-000085c0: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
-000085d0: 6f6e 6520 6f72 2076 616c 7565 203d 3d20  one or value == 
-000085e0: 2222 206f 7220 7661 6c75 6520 3d3d 2062  "" or value == b
-000085f0: 2222 206f 7220 7661 6c75 6520 3d3d 205b  "" or value == [
-00008600: 5d3a 0a20 2020 2020 2020 2072 6574 7572  ]:.        retur
-00008610: 6e20 285f 7661 6c75 652c 2054 7275 6529  n (_value, True)
-00008620: 0a20 2020 2072 6574 7572 6e20 285f 7661  .    return (_va
-00008630: 6c75 652c 2046 616c 7365 290a 0a0a 636c  lue, False)...cl
-00008640: 6173 7320 4953 5f4e 4f54 5f45 4d50 5459  ass IS_NOT_EMPTY
-00008650: 2856 616c 6964 6174 6f72 293a 0a20 2020  (Validator):.   
-00008660: 2022 2222 0a20 2020 2045 7861 6d70 6c65   """.    Example
-00008670: 3a0a 2020 2020 2020 2020 5573 6564 2061  :.        Used a
-00008680: 733a 3a0a 0a20 2020 2020 2020 2020 2020  s::..           
-00008690: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
-000086a0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
-000086b0: 272c 2072 6571 7569 7265 733d 4953 5f4e  ', requires=IS_N
-000086c0: 4f54 5f45 4d50 5459 2829 290a 0a20 2020  OT_EMPTY())..   
-000086d0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-000086e0: 4e4f 545f 454d 5054 5928 2928 3129 0a20  NOT_EMPTY()(1). 
-000086f0: 2020 2020 2020 2020 2020 2028 312c 204e             (1, N
-00008700: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00008710: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
-00008720: 5928 2928 3029 0a20 2020 2020 2020 2020  Y()(0).         
-00008730: 2020 2028 302c 204e 6f6e 6529 0a20 2020     (0, None).   
-00008740: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00008750: 4e4f 545f 454d 5054 5928 2928 2778 2729  NOT_EMPTY()('x')
-00008760: 0a20 2020 2020 2020 2020 2020 2028 2778  .            ('x
-00008770: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-00008780: 2020 2020 203e 3e3e 2049 535f 4e4f 545f       >>> IS_NOT_
-00008790: 454d 5054 5928 2928 2720 7820 2729 0a20  EMPTY()(' x '). 
-000087a0: 2020 2020 2020 2020 2020 2028 2778 272c             ('x',
-000087b0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-000087c0: 2020 203e 3e3e 2049 535f 4e4f 545f 454d     >>> IS_NOT_EM
-000087d0: 5054 5928 2928 4e6f 6e65 290a 2020 2020  PTY()(None).    
-000087e0: 2020 2020 2020 2020 284e 6f6e 652c 2027          (None, '
-000087f0: 656e 7465 7220 6120 7661 6c75 6527 290a  enter a value').
-00008800: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00008810: 4953 5f4e 4f54 5f45 4d50 5459 2829 2827  IS_NOT_EMPTY()('
-00008820: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00008830: 2727 2c20 2765 6e74 6572 2061 2076 616c  '', 'enter a val
-00008840: 7565 2729 0a20 2020 2020 2020 2020 2020  ue').           
-00008850: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
-00008860: 5928 2928 2720 2027 290a 2020 2020 2020  Y()('  ').      
-00008870: 2020 2020 2020 2827 272c 2027 656e 7465        ('', 'ente
-00008880: 7220 6120 7661 6c75 6527 290a 2020 2020  r a value').    
-00008890: 2020 2020 2020 2020 3e3e 3e20 4953 5f4e          >>> IS_N
-000088a0: 4f54 5f45 4d50 5459 2829 2827 205c 5c6e  OT_EMPTY()(' \\n
-000088b0: 5c5c 7427 290a 2020 2020 2020 2020 2020  \\t').          
-000088c0: 2020 2827 272c 2027 656e 7465 7220 6120    ('', 'enter a 
-000088d0: 7661 6c75 6527 290a 2020 2020 2020 2020  value').        
-000088e0: 2020 2020 3e3e 3e20 4953 5f4e 4f54 5f45      >>> IS_NOT_E
-000088f0: 4d50 5459 2829 285b 5d29 0a20 2020 2020  MPTY()([]).     
-00008900: 2020 2020 2020 2028 5b5d 2c20 2765 6e74         ([], 'ent
-00008910: 6572 2061 2076 616c 7565 2729 0a20 2020  er a value').   
-00008920: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00008930: 4e4f 545f 454d 5054 5928 656d 7074 795f  NOT_EMPTY(empty_
-00008940: 7265 6765 783d 2764 6566 2729 2827 6465  regex='def')('de
-00008950: 6627 290a 2020 2020 2020 2020 2020 2020  f').            
-00008960: 2827 272c 2027 656e 7465 7220 6120 7661  ('', 'enter a va
-00008970: 6c75 6527 290a 2020 2020 2020 2020 2020  lue').          
-00008980: 2020 3e3e 3e20 4953 5f4e 4f54 5f45 4d50    >>> IS_NOT_EMP
-00008990: 5459 2865 6d70 7479 5f72 6567 6578 3d27  TY(empty_regex='
-000089a0: 6465 5b66 675d 2729 2827 6465 6727 290a  de[fg]')('deg').
-000089b0: 2020 2020 2020 2020 2020 2020 2827 272c              ('',
-000089c0: 2027 656e 7465 7220 6120 7661 6c75 6527   'enter a value'
-000089d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-000089e0: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2865  > IS_NOT_EMPTY(e
-000089f0: 6d70 7479 5f72 6567 6578 3d27 6465 6627  mpty_regex='def'
-00008a00: 2928 2761 6263 2729 0a20 2020 2020 2020  )('abc').       
-00008a10: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
-00008a20: 6529 0a20 2020 2022 2222 0a0a 2020 2020  e).    """..    
-00008a30: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00008a40: 662c 2065 7272 6f72 5f6d 6573 7361 6765  f, error_message
-00008a50: 3d22 456e 7465 7220 6120 7661 6c75 6522  ="Enter a value"
-00008a60: 2c20 656d 7074 795f 7265 6765 783d 4e6f  , empty_regex=No
-00008a70: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
-00008a80: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
-00008a90: 3d20 6572 726f 725f 6d65 7373 6167 650a  = error_message.
-00008aa0: 2020 2020 2020 2020 6966 2065 6d70 7479          if empty
-00008ab0: 5f72 6567 6578 2069 7320 6e6f 7420 4e6f  _regex is not No
-00008ac0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00008ad0: 7365 6c66 2e65 6d70 7479 5f72 6567 6578  self.empty_regex
-00008ae0: 203d 2072 652e 636f 6d70 696c 6528 656d   = re.compile(em
-00008af0: 7074 795f 7265 6765 7829 0a20 2020 2020  pty_regex).     
-00008b00: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00008b10: 2020 2020 2073 656c 662e 656d 7074 795f       self.empty_
-00008b20: 7265 6765 7820 3d20 4e6f 6e65 0a0a 2020  regex = None..  
-00008b30: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
-00008b40: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
-00008b50: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
-00008b60: 2020 2020 2076 616c 7565 2c20 656d 7074       value, empt
-00008b70: 7920 3d20 6973 5f65 6d70 7479 2876 616c  y = is_empty(val
-00008b80: 7565 2c20 656d 7074 795f 7265 6765 783d  ue, empty_regex=
-00008b90: 7365 6c66 2e65 6d70 7479 5f72 6567 6578  self.empty_regex
-00008ba0: 290a 2020 2020 2020 2020 6966 2065 6d70  ).        if emp
-00008bb0: 7479 3a0a 2020 2020 2020 2020 2020 2020  ty:.            
-00008bc0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-00008bd0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-00008be0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-00008bf0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
-00008c00: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
-00008c10: 0a0a 636c 6173 7320 4953 5f41 4c50 4841  ..class IS_ALPHA
-00008c20: 4e55 4d45 5249 4328 4953 5f4d 4154 4348  NUMERIC(IS_MATCH
-00008c30: 293a 0a20 2020 2022 2222 0a20 2020 2045  ):.    """.    E
-00008c40: 7861 6d70 6c65 3a0a 2020 2020 2020 2020  xample:.        
-00008c50: 5573 6564 2061 733a 3a0a 0a20 2020 2020  Used as::..     
-00008c60: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-00008c70: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
-00008c80: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
-00008c90: 733d 4953 5f41 4c50 4841 4e55 4d45 5249  s=IS_ALPHANUMERI
-00008ca0: 4328 2929 0a0a 2020 2020 2020 2020 2020  C())..          
-00008cb0: 2020 3e3e 3e20 4953 5f41 4c50 4841 4e55    >>> IS_ALPHANU
-00008cc0: 4d45 5249 4328 2928 2731 2729 0a20 2020  MERIC()('1').   
-00008cd0: 2020 2020 2020 2020 2028 2731 272c 204e           ('1', N
-00008ce0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00008cf0: 203e 3e3e 2049 535f 414c 5048 414e 554d   >>> IS_ALPHANUM
-00008d00: 4552 4943 2829 2827 2729 0a20 2020 2020  ERIC()('').     
-00008d10: 2020 2020 2020 2028 2727 2c20 4e6f 6e65         ('', None
-00008d20: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00008d30: 3e20 4953 5f41 4c50 4841 4e55 4d45 5249  > IS_ALPHANUMERI
-00008d40: 4328 2928 2741 5f61 2729 0a20 2020 2020  C()('A_a').     
-00008d50: 2020 2020 2020 2028 2741 5f61 272c 204e         ('A_a', N
-00008d60: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-00008d70: 203e 3e3e 2049 535f 414c 5048 414e 554d   >>> IS_ALPHANUM
-00008d80: 4552 4943 2829 2827 2127 290a 2020 2020  ERIC()('!').    
-00008d90: 2020 2020 2020 2020 2827 2127 2c20 2765          ('!', 'e
-00008da0: 6e74 6572 206f 6e6c 7920 6c65 7474 6572  nter only letter
-00008db0: 732c 206e 756d 6265 7273 2c20 616e 6420  s, numbers, and 
-00008dc0: 756e 6465 7273 636f 7265 2729 0a20 2020  underscore').   
-00008dd0: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
-00008de0: 696e 6974 5f5f 2873 656c 662c 2065 7272  init__(self, err
-00008df0: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-00008e00: 7220 6f6e 6c79 206c 6574 7465 7273 2c20  r only letters, 
-00008e10: 6e75 6d62 6572 732c 2061 6e64 2075 6e64  numbers, and und
-00008e20: 6572 7363 6f72 6522 293a 0a20 2020 2020  erscore"):.     
-00008e30: 2020 2049 535f 4d41 5443 482e 5f5f 696e     IS_MATCH.__in
-00008e40: 6974 5f5f 2873 656c 662c 2072 225e 5b5c  it__(self, r"^[\
-00008e50: 775d 2a24 222c 2065 7272 6f72 5f6d 6573  w]*$", error_mes
-00008e60: 7361 6765 290a 0a0a 636c 6173 7320 4953  sage)...class IS
-00008e70: 5f45 4d41 494c 2856 616c 6964 6174 6f72  _EMAIL(Validator
-00008e80: 293a 0a0a 2020 2020 2222 220a 2020 2020  ):..    """.    
-00008e90: 4368 6563 6b73 2069 6620 6669 656c 6427  Checks if field'
-00008ea0: 7320 7661 6c75 6520 6973 2061 2076 616c  s value is a val
-00008eb0: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
-00008ec0: 2e20 4361 6e20 6265 2073 6574 2074 6f20  . Can be set to 
-00008ed0: 6469 7361 6c6c 6f77 0a20 2020 206f 7220  disallow.    or 
-00008ee0: 666f 7263 6520 6164 6472 6573 7365 7320  force addresses 
-00008ef0: 6672 6f6d 2063 6572 7461 696e 2064 6f6d  from certain dom
-00008f00: 6169 6e28 7329 2e0a 0a20 2020 2045 6d61  ain(s)...    Ema
-00008f10: 696c 2072 6567 6578 2061 6461 7074 6564  il regex adapted
-00008f20: 2066 726f 6d0a 2020 2020 6874 7470 3a2f   from.    http:/
-00008f30: 2f68 6161 636b 6564 2e63 6f6d 2f61 7263  /haacked.com/arc
-00008f40: 6869 7665 2f32 3030 372f 3038 2f32 312f  hive/2007/08/21/
-00008f50: 692d 6b6e 6577 2d68 6f77 2d74 6f2d 7661  i-knew-how-to-va
-00008f60: 6c69 6461 7465 2d61 6e2d 656d 6169 6c2d  lidate-an-email-
-00008f70: 6164 6472 6573 732d 756e 7469 6c2d 692e  address-until-i.
-00008f80: 6173 7078 2c0a 2020 2020 6765 6e65 7261  aspx,.    genera
-00008f90: 6c6c 7920 666f 6c6c 6f77 696e 6720 7468  lly following th
-00008fa0: 6520 5246 4373 2c20 6578 6365 7074 2074  e RFCs, except t
-00008fb0: 6861 7420 7765 2064 6973 616c 6c6f 7720  hat we disallow 
-00008fc0: 7175 6f74 6564 2073 7472 696e 6773 0a20  quoted strings. 
-00008fd0: 2020 2061 6e64 2070 6572 6d69 7420 756e     and permit un
-00008fe0: 6465 7273 636f 7265 7320 616e 6420 6c65  derscores and le
-00008ff0: 6164 696e 6720 6e75 6d65 7269 6373 2069  ading numerics i
-00009000: 6e20 7375 6264 6f6d 6169 6e20 6c61 6265  n subdomain labe
-00009010: 6c73 0a0a 2020 2020 4172 6773 3a0a 2020  ls..    Args:.  
-00009020: 2020 2020 2020 6261 6e6e 6564 3a20 7265        banned: re
-00009030: 6765 7820 7465 7874 2066 6f72 2064 6973  gex text for dis
-00009040: 616c 6c6f 7765 6420 6164 6472 6573 7320  allowed address 
-00009050: 646f 6d61 696e 730a 2020 2020 2020 2020  domains.        
-00009060: 666f 7263 6564 3a20 7265 6765 7820 7465  forced: regex te
-00009070: 7874 2066 6f72 2072 6571 7569 7265 6420  xt for required 
-00009080: 6164 6472 6573 7320 646f 6d61 696e 730a  address domains.
-00009090: 0a20 2020 2042 6f74 6820 6172 6775 6d65  .    Both argume
-000090a0: 6e74 7320 6361 6e20 616c 736f 2062 6520  nts can also be 
-000090b0: 6375 7374 6f6d 206f 626a 6563 7473 2077  custom objects w
-000090c0: 6974 6820 6120 6d61 7463 6828 7661 6c75  ith a match(valu
-000090d0: 6529 206d 6574 686f 642e 0a0a 2020 2020  e) method...    
-000090e0: 4578 616d 706c 653a 0a20 2020 2020 2020  Example:.       
-000090f0: 2043 6865 636b 2066 6f72 2076 616c 6964   Check for valid
-00009100: 2065 6d61 696c 2061 6464 7265 7373 3a3a   email address::
-00009110: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-00009120: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
-00009130: 2c20 5f6e 616d 653d 276e 616d 6527 2c0a  , _name='name',.
-00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009150: 7265 7175 6972 6573 3d49 535f 454d 4149  requires=IS_EMAI
-00009160: 4c28 2929 0a0a 2020 2020 2020 2020 4368  L())..        Ch
-00009170: 6563 6b20 666f 7220 7661 6c69 6420 656d  eck for valid em
-00009180: 6169 6c20 6164 6472 6573 7320 7468 6174  ail address that
-00009190: 2063 616e 2774 2062 6520 6672 6f6d 2061   can't be from a
-000091a0: 202e 636f 6d20 646f 6d61 696e 3a3a 0a0a   .com domain::..
-000091b0: 2020 2020 2020 2020 2020 2020 494e 5055              INPU
-000091c0: 5428 5f74 7970 653d 2774 6578 7427 2c20  T(_type='text', 
-000091d0: 5f6e 616d 653d 276e 616d 6527 2c0a 2020  _name='name',.  
-000091e0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000091f0: 7175 6972 6573 3d49 535f 454d 4149 4c28  quires=IS_EMAIL(
-00009200: 6261 6e6e 6564 3d27 5e2e 2a5c 5c2e 636f  banned='^.*\\.co
-00009210: 6d28 7c5c 5c2e 2e2a 2924 2729 290a 0a20  m(|\\..*)$')).. 
-00009220: 2020 2020 2020 2043 6865 636b 2066 6f72         Check for
-00009230: 2076 616c 6964 2065 6d61 696c 2061 6464   valid email add
-00009240: 7265 7373 2074 6861 7420 6d75 7374 2062  ress that must b
-00009250: 6520 6672 6f6d 2061 202e 6564 7520 646f  e from a .edu do
-00009260: 6d61 696e 3a3a 0a0a 2020 2020 2020 2020  main::..        
-00009270: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-00009280: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
-00009290: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
-000092a0: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
-000092b0: 535f 454d 4149 4c28 666f 7263 6564 3d27  S_EMAIL(forced='
-000092c0: 5e2e 2a5c 5c2e 6564 7528 7c5c 5c2e 2e2a  ^.*\\.edu(|\\..*
-000092d0: 2924 2729 290a 0a20 2020 2020 2020 2020  )$'))..         
-000092e0: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-000092f0: 2928 2761 4062 2e63 6f6d 2729 0a20 2020  )('a@b.com').   
-00009300: 2020 2020 2020 2020 2028 2761 4062 2e63           ('a@b.c
-00009310: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
-00009320: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009330: 4149 4c28 2928 2761 6263 4064 6566 2e63  AIL()('abc@def.c
-00009340: 6f6d 2729 0a20 2020 2020 2020 2020 2020  om').           
-00009350: 2028 2761 6263 4064 6566 2e63 6f6d 272c   ('abc@def.com',
-00009360: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00009370: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
-00009380: 2928 2761 6263 4033 6465 662e 636f 6d27  )('abc@3def.com'
-00009390: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-000093a0: 6162 6340 3364 6566 2e63 6f6d 272c 204e  abc@3def.com', N
-000093b0: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
-000093c0: 203e 3e3e 2049 535f 454d 4149 4c28 2928   >>> IS_EMAIL()(
-000093d0: 2761 6263 4064 6566 2e75 7327 290a 2020  'abc@def.us').  
-000093e0: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
-000093f0: 6465 662e 7573 272c 204e 6f6e 6529 0a20  def.us', None). 
-00009400: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00009410: 535f 454d 4149 4c28 2928 2761 6263 4064  S_EMAIL()('abc@d
-00009420: 5f2d 662e 7573 2729 0a20 2020 2020 2020  _-f.us').       
-00009430: 2020 2020 2028 2761 6263 4064 5f2d 662e       ('abc@d_-f.
-00009440: 7573 272c 204e 6f6e 6529 0a20 2020 2020  us', None).     
-00009450: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009460: 4149 4c28 2928 2740 6465 662e 636f 6d27  AIL()('@def.com'
-00009470: 2920 2020 2020 2020 2020 2020 2320 6d69  )           # mi
-00009480: 7373 696e 6720 6e61 6d65 0a20 2020 2020  ssing name.     
-00009490: 2020 2020 2020 2028 2740 6465 662e 636f         ('@def.co
-000094a0: 6d27 2c20 2765 6e74 6572 2061 2076 616c  m', 'enter a val
-000094b0: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
-000094c0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-000094d0: 3e3e 2049 535f 454d 4149 4c28 2928 2722  >> IS_EMAIL()('"
-000094e0: 6162 6340 6465 6622 2e63 6f6d 2729 2020  abc@def".com')  
-000094f0: 2020 2020 2320 7175 6f74 6564 206e 616d      # quoted nam
-00009500: 650a 2020 2020 2020 2020 2020 2020 2827  e.            ('
-00009510: 2261 6263 4064 6566 222e 636f 6d27 2c20  "abc@def".com', 
-00009520: 2765 6e74 6572 2061 2076 616c 6964 2065  'enter a valid e
-00009530: 6d61 696c 2061 6464 7265 7373 2729 0a20  mail address'). 
-00009540: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00009550: 535f 454d 4149 4c28 2928 2761 6263 2b64  S_EMAIL()('abc+d
-00009560: 6566 2e63 6f6d 2729 2020 2020 2020 2020  ef.com')        
-00009570: 2320 6e6f 2040 0a20 2020 2020 2020 2020  # no @.         
-00009580: 2020 2028 2761 6263 2b64 6566 2e63 6f6d     ('abc+def.com
-00009590: 272c 2027 656e 7465 7220 6120 7661 6c69  ', 'enter a vali
-000095a0: 6420 656d 6169 6c20 6164 6472 6573 7327  d email address'
-000095b0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-000095c0: 3e20 4953 5f45 4d41 494c 2829 2827 6162  > IS_EMAIL()('ab
-000095d0: 6340 6465 662e 7827 2920 2020 2020 2020  c@def.x')       
-000095e0: 2020 2023 206f 6e65 2d63 6861 7220 544c     # one-char TL
-000095f0: 440a 2020 2020 2020 2020 2020 2020 2827  D.            ('
-00009600: 6162 6340 6465 662e 7827 2c20 2765 6e74  abc@def.x', 'ent
-00009610: 6572 2061 2076 616c 6964 2065 6d61 696c  er a valid email
-00009620: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00009630: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009640: 4149 4c28 2928 2761 6263 4064 6566 2e31  AIL()('abc@def.1
-00009650: 3227 2920 2020 2020 2020 2020 2320 6e75  2')         # nu
-00009660: 6d65 7269 6320 544c 440a 2020 2020 2020  meric TLD.      
-00009670: 2020 2020 2020 2827 6162 6340 6465 662e        ('abc@def.
-00009680: 3132 272c 2027 656e 7465 7220 6120 7661  12', 'enter a va
-00009690: 6c69 6420 656d 6169 6c20 6164 6472 6573  lid email addres
-000096a0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-000096b0: 3e3e 3e20 4953 5f45 4d41 494c 2829 2827  >>> IS_EMAIL()('
-000096c0: 6162 6340 6465 662e 2e63 6f6d 2729 2020  abc@def..com')  
-000096d0: 2020 2020 2023 2064 6f75 626c 652d 646f       # double-do
-000096e0: 7420 696e 2064 6f6d 6169 6e0a 2020 2020  t in domain.    
-000096f0: 2020 2020 2020 2020 2827 6162 6340 6465          ('abc@de
-00009700: 662e 2e63 6f6d 272c 2027 656e 7465 7220  f..com', 'enter 
-00009710: 6120 7661 6c69 6420 656d 6169 6c20 6164  a valid email ad
-00009720: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-00009730: 2020 2020 3e3e 3e20 4953 5f45 4d41 494c      >>> IS_EMAIL
-00009740: 2829 2827 6162 6340 2e64 6566 2e63 6f6d  ()('abc@.def.com
-00009750: 2729 2020 2020 2020 2023 2064 6f74 2073  ')       # dot s
-00009760: 7461 7274 7320 646f 6d61 696e 0a20 2020  tarts domain.   
-00009770: 2020 2020 2020 2020 2028 2761 6263 402e           ('abc@.
-00009780: 6465 662e 636f 6d27 2c20 2765 6e74 6572  def.com', 'enter
-00009790: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-000097a0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-000097b0: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
-000097c0: 4c28 2928 2761 6263 4064 6566 2e63 5f6d  L()('abc@def.c_m
-000097d0: 2729 2020 2020 2020 2020 2320 756e 6465  ')        # unde
-000097e0: 7273 636f 7265 2069 6e20 544c 440a 2020  rscore in TLD.  
-000097f0: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
-00009800: 6465 662e 635f 6d27 2c20 2765 6e74 6572  def.c_m', 'enter
-00009810: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-00009820: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-00009830: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
-00009840: 4c28 2928 274e 6f74 416e 456d 6169 6c27  L()('NotAnEmail'
-00009850: 2920 2020 2020 2020 2020 2320 6d69 7373  )         # miss
-00009860: 696e 6720 400a 2020 2020 2020 2020 2020  ing @.          
-00009870: 2020 2827 4e6f 7441 6e45 6d61 696c 272c    ('NotAnEmail',
-00009880: 2027 656e 7465 7220 6120 7661 6c69 6420   'enter a valid 
-00009890: 656d 6169 6c20 6164 6472 6573 7327 290a  email address').
-000098a0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-000098b0: 4953 5f45 4d41 494c 2829 2827 6162 6340  IS_EMAIL()('abc@
-000098c0: 4e6f 7441 6e45 6d61 696c 2729 2020 2020  NotAnEmail')    
-000098d0: 2023 206d 6973 7369 6e67 2054 4c44 0a20   # missing TLD. 
-000098e0: 2020 2020 2020 2020 2020 2028 2761 6263             ('abc
-000098f0: 404e 6f74 416e 456d 6169 6c27 2c20 2765  @NotAnEmail', 'e
-00009900: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
-00009910: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
-00009920: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00009930: 454d 4149 4c28 2928 2763 7573 746f 6d65  EMAIL()('custome
-00009940: 722f 6465 7061 7274 6d65 6e74 4065 7861  r/department@exa
-00009950: 6d70 6c65 2e63 6f6d 2729 0a20 2020 2020  mple.com').     
-00009960: 2020 2020 2020 2028 2763 7573 746f 6d65         ('custome
-00009970: 722f 6465 7061 7274 6d65 6e74 4065 7861  r/department@exa
-00009980: 6d70 6c65 2e63 6f6d 272c 204e 6f6e 6529  mple.com', None)
-00009990: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-000099a0: 2049 535f 454d 4149 4c28 2928 2724 4131   IS_EMAIL()('$A1
-000099b0: 3233 3435 4065 7861 6d70 6c65 2e63 6f6d  2345@example.com
-000099c0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-000099d0: 2724 4131 3233 3435 4065 7861 6d70 6c65  '$A12345@example
-000099e0: 2e63 6f6d 272c 204e 6f6e 6529 0a20 2020  .com', None).   
-000099f0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00009a00: 454d 4149 4c28 2928 2721 6465 6621 7879  EMAIL()('!def!xy
-00009a10: 7a25 6162 6340 6578 616d 706c 652e 636f  z%abc@example.co
-00009a20: 6d27 290a 2020 2020 2020 2020 2020 2020  m').            
-00009a30: 2827 2164 6566 2178 797a 2561 6263 4065  ('!def!xyz%abc@e
-00009a40: 7861 6d70 6c65 2e63 6f6d 272c 204e 6f6e  xample.com', Non
-00009a50: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00009a60: 3e3e 2049 535f 454d 4149 4c28 2928 275f  >> IS_EMAIL()('_
-00009a70: 596f 7365 6d69 7465 2e53 616d 4065 7861  Yosemite.Sam@exa
-00009a80: 6d70 6c65 2e63 6f6d 2729 0a20 2020 2020  mple.com').     
-00009a90: 2020 2020 2020 2028 275f 596f 7365 6d69         ('_Yosemi
-00009aa0: 7465 2e53 616d 4065 7861 6d70 6c65 2e63  te.Sam@example.c
-00009ab0: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
-00009ac0: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009ad0: 4149 4c28 2928 277e 4065 7861 6d70 6c65  AIL()('~@example
-00009ae0: 2e63 6f6d 2729 0a20 2020 2020 2020 2020  .com').         
-00009af0: 2020 2028 277e 4065 7861 6d70 6c65 2e63     ('~@example.c
-00009b00: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
-00009b10: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009b20: 4149 4c28 2928 272e 776f 6f6c 7940 6578  AIL()('.wooly@ex
-00009b30: 616d 706c 652e 636f 6d27 2920 2020 2020  ample.com')     
-00009b40: 2020 2320 646f 7420 7374 6172 7473 206e    # dot starts n
-00009b50: 616d 650a 2020 2020 2020 2020 2020 2020  ame.            
-00009b60: 2827 2e77 6f6f 6c79 4065 7861 6d70 6c65  ('.wooly@example
-00009b70: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
-00009b80: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
-00009b90: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
-00009ba0: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
-00009bb0: 2827 776f 2e2e 6f6c 7940 6578 616d 706c  ('wo..oly@exampl
-00009bc0: 652e 636f 6d27 2920 2020 2020 2023 2061  e.com')      # a
-00009bd0: 646a 6163 656e 7420 646f 7473 2069 6e20  djacent dots in 
-00009be0: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
-00009bf0: 2028 2777 6f2e 2e6f 6c79 4065 7861 6d70   ('wo..oly@examp
-00009c00: 6c65 2e63 6f6d 272c 2027 656e 7465 7220  le.com', 'enter 
-00009c10: 6120 7661 6c69 6420 656d 6169 6c20 6164  a valid email ad
-00009c20: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-00009c30: 2020 2020 3e3e 3e20 4953 5f45 4d41 494c      >>> IS_EMAIL
-00009c40: 2829 2827 706f 6f74 6965 7461 6e67 2e40  ()('pootietang.@
-00009c50: 6578 616d 706c 652e 636f 6d27 2920 2023  example.com')  #
-00009c60: 2064 6f74 2065 6e64 7320 6e61 6d65 0a20   dot ends name. 
-00009c70: 2020 2020 2020 2020 2020 2028 2770 6f6f             ('poo
-00009c80: 7469 6574 616e 672e 4065 7861 6d70 6c65  tietang.@example
-00009c90: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
-00009ca0: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
-00009cb0: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
-00009cc0: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
-00009cd0: 2827 2e40 6578 616d 706c 652e 636f 6d27  ('.@example.com'
-00009ce0: 2920 2020 2020 2020 2020 2020 2023 206e  )            # n
-00009cf0: 616d 6520 6973 2062 6172 6520 646f 740a  ame is bare dot.
-00009d00: 2020 2020 2020 2020 2020 2020 2827 2e40              ('.@
-00009d10: 6578 616d 706c 652e 636f 6d27 2c20 2765  example.com', 'e
+00005300: 2020 2020 2020 2076 616c 7565 203d 2073         value = s
+00005310: 7472 280a 2020 2020 2020 2020 2020 2020  tr(.            
+00005320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005330: 2020 2020 7365 6c66 2e6d 6179 6265 5f61      self.maybe_a
+00005340: 6464 2874 6162 6c65 2c20 7365 6c66 2e66  dd(table, self.f
+00005350: 6965 6c64 6e61 6d65 735b 305d 2c20 7661  ieldnames[0], va
+00005360: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+00005370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005380: 2029 0a20 2020 2020 2020 2020 2020 2020   ).             
+00005390: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000053a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000053b0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+000053c0: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+000053d0: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+000053e0: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+000053f0: 7373 6167 6529 290a 2020 2020 2020 2020  ssage)).        
+00005400: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00005410: 7661 6c75 6573 2e61 7070 656e 6428 7661  values.append(va
+00005420: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+00005430: 2020 2020 2076 616c 7565 7320 3d20 6e65       values = ne
+00005440: 775f 7661 6c75 6573 0a0a 2020 2020 2020  w_values..      
+00005450: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+00005460: 2020 2020 2020 2020 2020 2069 7369 6e73             isins
+00005470: 7461 6e63 6528 7365 6c66 2e6d 756c 7469  tance(self.multi
+00005480: 706c 652c 2028 7475 706c 652c 206c 6973  ple, (tuple, lis
+00005490: 7429 290a 2020 2020 2020 2020 2020 2020  t)).            
+000054a0: 2020 2020 616e 6420 6e6f 7420 7365 6c66      and not self
+000054b0: 2e6d 756c 7469 706c 655b 305d 203c 3d20  .multiple[0] <= 
+000054c0: 6c65 6e28 7661 6c75 6573 2920 3c20 7365  len(values) < se
+000054d0: 6c66 2e6d 756c 7469 706c 655b 315d 0a20  lf.multiple[1]. 
+000054e0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+000054f0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00005500: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+00005510: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
+00005520: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
+00005530: 6573 7361 6765 2929 0a20 2020 2020 2020  essage)).       
+00005540: 2020 2020 2069 6620 7365 6c66 2e74 6865       if self.the
+00005550: 7365 743a 0a20 2020 2020 2020 2020 2020  set:.           
+00005560: 2020 2020 2069 6620 6e6f 7420 5b76 2066       if not [v f
+00005570: 6f72 2076 2069 6e20 7661 6c75 6573 2069  or v in values i
+00005580: 6620 7374 7228 7629 206e 6f74 2069 6e20  f str(v) not in 
+00005590: 7365 6c66 2e74 6865 7365 745d 3a0a 2020  self.theset]:.  
+000055a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000055b0: 2020 7265 7475 726e 2076 616c 7565 730a    return values.
+000055c0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000055d0: 3a0a 0a20 2020 2020 2020 2020 2020 2020  :..             
+000055e0: 2020 2064 6566 2063 6f75 6e74 2876 616c     def count(val
+000055f0: 7565 732c 2073 3d73 656c 662e 6462 7365  ues, s=self.dbse
+00005600: 742c 2066 3d66 6965 6c64 293a 0a20 2020  t, f=field):.   
+00005610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005620: 2072 6574 7572 6e20 7328 662e 6265 6c6f   return s(f.belo
+00005630: 6e67 7328 6c69 7374 286d 6170 2869 6e74  ngs(list(map(int
+00005640: 2c20 7661 6c75 6573 2929 2929 2e63 6f75  , values)))).cou
+00005650: 6e74 2829 0a0a 2020 2020 2020 2020 2020  nt()..          
+00005660: 2020 2020 2020 6966 2073 656c 662e 6462        if self.db
+00005670: 7365 742e 6462 2e5f 6164 6170 7465 722e  set.db._adapter.
+00005680: 6462 656e 6769 6e65 203d 3d20 2267 6f6f  dbengine == "goo
+00005690: 676c 653a 6461 7461 7374 6f72 6522 3a0a  gle:datastore":.
+000056a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000056b0: 2020 2020 7261 6e67 655f 6964 7320 3d20      range_ids = 
+000056c0: 7261 6e67 6528 302c 206c 656e 2876 616c  range(0, len(val
+000056d0: 7565 7329 2c20 3330 290a 2020 2020 2020  ues), 30).      
+000056e0: 2020 2020 2020 2020 2020 2020 2020 746f                to
+000056f0: 7461 6c20 3d20 7375 6d28 636f 756e 7428  tal = sum(count(
+00005700: 7661 6c75 6573 5b69 203a 2069 202b 2033  values[i : i + 3
+00005710: 305d 2920 666f 7220 6920 696e 2072 616e  0]) for i in ran
+00005720: 6765 5f69 6473 290a 2020 2020 2020 2020  ge_ids).        
+00005730: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+00005740: 6f74 616c 203d 3d20 6c65 6e28 7661 6c75  otal == len(valu
+00005750: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
+00005760: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00005770: 7572 6e20 7661 6c75 6573 0a20 2020 2020  urn values.     
+00005780: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00005790: 636f 756e 7428 7661 6c75 6573 2920 3d3d  count(values) ==
+000057a0: 206c 656e 2876 616c 7565 7329 3a0a 2020   len(values):.  
+000057b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000057c0: 2020 7265 7475 726e 2076 616c 7565 730a    return values.
+000057d0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+000057e0: 2020 2020 2020 2020 2020 6966 2066 6965            if fie
+000057f0: 6c64 2e74 7970 6520 696e 2028 2269 6422  ld.type in ("id"
+00005800: 2c20 2269 6e74 6567 6572 2229 3a0a 2020  , "integer"):.  
+00005810: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00005820: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
+00005830: 652c 2069 6e74 6567 6572 5f74 7970 6573  e, integer_types
+00005840: 2920 6f72 2028 0a20 2020 2020 2020 2020  ) or (.         
+00005850: 2020 2020 2020 2020 2020 2069 7369 6e73             isins
+00005860: 7461 6e63 6528 7661 6c75 652c 2073 7472  tance(value, str
+00005870: 696e 675f 7479 7065 7329 2061 6e64 2076  ing_types) and v
+00005880: 616c 7565 2e69 7364 6967 6974 2829 0a20  alue.isdigit(). 
+00005890: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+000058a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000058b0: 2020 2020 2020 7661 6c75 6520 3d20 696e        value = in
+000058c0: 7428 7661 6c75 6529 0a20 2020 2020 2020  t(value).       
+000058d0: 2020 2020 2020 2020 2065 6c69 6620 7365           elif se
+000058e0: 6c66 2e61 7574 6f5f 6164 643a 0a20 2020  lf.auto_add:.   
+000058f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005900: 2076 616c 7565 203d 2073 656c 662e 6d61   value = self.ma
+00005910: 7962 655f 6164 6428 7461 626c 652c 2073  ybe_add(table, s
+00005920: 656c 662e 6669 656c 646e 616d 6573 5b30  elf.fieldnames[0
+00005930: 5d2c 2076 616c 7565 290a 2020 2020 2020  ], value).      
+00005940: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+00005950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005960: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00005970: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+00005980: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+00005990: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
+000059a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000059b0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+000059c0: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+000059d0: 2069 6e74 2876 616c 7565 290a 2020 2020   int(value).    
+000059e0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+000059f0: 7074 2054 7970 6545 7272 6f72 3a0a 2020  pt TypeError:.  
+00005a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a10: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+00005a20: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
+00005a30: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
+00005a40: 6f72 5f6d 6573 7361 6765 2929 0a0a 2020  or_message))..  
+00005a50: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00005a60: 662e 7468 6573 6574 3a0a 2020 2020 2020  f.theset:.      
+00005a70: 2020 2020 2020 2020 2020 6966 2073 7472            if str
+00005a80: 2876 616c 7565 2920 696e 2073 656c 662e  (value) in self.
+00005a90: 7468 6573 6574 3a0a 2020 2020 2020 2020  theset:.        
+00005aa0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00005ab0: 656c 662e 5f61 6e64 3a0a 2020 2020 2020  elf._and:.      
+00005ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005ad0: 2020 7265 7475 726e 2076 616c 6964 6174    return validat
+00005ae0: 6f72 5f63 616c 6c65 7228 7365 6c66 2e5f  or_caller(self._
+00005af0: 616e 642c 2076 616c 7565 2c20 7265 636f  and, value, reco
+00005b00: 7264 5f69 6429 0a20 2020 2020 2020 2020  rd_id).         
+00005b10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00005b20: 6e20 7661 6c75 650a 2020 2020 2020 2020  n value.        
+00005b30: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00005b40: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00005b50: 662e 6462 7365 7428 6669 656c 6420 3d3d  f.dbset(field ==
+00005b60: 2076 616c 7565 292e 636f 756e 7428 293a   value).count():
+00005b70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005b80: 2020 2020 2069 6620 7365 6c66 2e5f 616e       if self._an
+00005b90: 643a 0a20 2020 2020 2020 2020 2020 2020  d:.             
+00005ba0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00005bb0: 6e20 7661 6c69 6461 746f 725f 6361 6c6c  n validator_call
+00005bc0: 6572 2873 656c 662e 5f61 6e64 2c20 7661  er(self._and, va
+00005bd0: 6c75 652c 2072 6563 6f72 645f 6964 290a  lue, record_id).
+00005be0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005bf0: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+00005c00: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
+00005c10: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+00005c20: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+00005c30: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+00005c40: 6529 290a 0a0a 636c 6173 7320 4953 5f4e  e))...class IS_N
+00005c50: 4f54 5f49 4e5f 4442 2856 616c 6964 6174  OT_IN_DB(Validat
+00005c60: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
+00005c70: 2045 7861 6d70 6c65 3a0a 2020 2020 2020   Example:.      
+00005c80: 2020 5573 6564 2061 733a 3a0a 0a20 2020    Used as::..   
+00005c90: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
+00005ca0: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
+00005cb0: 6d65 3d27 6e61 6d65 272c 2072 6571 7569  me='name', requi
+00005cc0: 7265 733d 4953 5f4e 4f54 5f49 4e5f 4442  res=IS_NOT_IN_DB
+00005cd0: 2864 622c 2064 622e 7461 626c 6529 290a  (db, db.table)).
+00005ce0: 0a20 2020 206d 616b 6573 2074 6865 2066  .    makes the f
+00005cf0: 6965 6c64 2075 6e69 7175 650a 2020 2020  ield unique.    
+00005d00: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
+00005d10: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+00005d20: 656c 662c 0a20 2020 2020 2020 2064 6273  elf,.        dbs
+00005d30: 6574 2c0a 2020 2020 2020 2020 6669 656c  et,.        fiel
+00005d40: 642c 0a20 2020 2020 2020 2065 7272 6f72  d,.        error
+00005d50: 5f6d 6573 7361 6765 3d22 5661 6c75 6520  _message="Value 
+00005d60: 616c 7265 6164 7920 696e 2064 6174 6162  already in datab
+00005d70: 6173 6520 6f72 2065 6d70 7479 222c 0a20  ase or empty",. 
+00005d80: 2020 2020 2020 2061 6c6c 6f77 6564 5f6f         allowed_o
+00005d90: 7665 7272 6964 653d 5b5d 2c0a 2020 2020  verride=[],.    
+00005da0: 2020 2020 6967 6e6f 7265 5f63 6f6d 6d6f      ignore_commo
+00005db0: 6e5f 6669 6c74 6572 733d 4661 6c73 652c  n_filters=False,
+00005dc0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00005dd0: 6966 2069 7369 6e73 7461 6e63 6528 6669  if isinstance(fi
+00005de0: 656c 642c 2054 6162 6c65 293a 0a20 2020  eld, Table):.   
+00005df0: 2020 2020 2020 2020 2066 6965 6c64 203d           field =
+00005e00: 2066 6965 6c64 2e5f 6964 0a0a 2020 2020   field._id..    
+00005e10: 2020 2020 6966 2068 6173 6174 7472 2864      if hasattr(d
+00005e20: 6273 6574 2c20 2264 6566 696e 655f 7461  bset, "define_ta
+00005e30: 626c 6522 293a 0a20 2020 2020 2020 2020  ble"):.         
+00005e40: 2020 2073 656c 662e 6462 7365 7420 3d20     self.dbset = 
+00005e50: 6462 7365 7428 290a 2020 2020 2020 2020  dbset().        
+00005e60: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00005e70: 2020 7365 6c66 2e64 6273 6574 203d 2064    self.dbset = d
+00005e80: 6273 6574 0a20 2020 2020 2020 2073 656c  bset.        sel
+00005e90: 662e 6669 656c 6420 3d20 6669 656c 640a  f.field = field.
+00005ea0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00005eb0: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+00005ec0: 6f72 5f6d 6573 7361 6765 0a20 2020 2020  or_message.     
+00005ed0: 2020 2073 656c 662e 7265 636f 7264 5f69     self.record_i
+00005ee0: 6420 3d20 300a 2020 2020 2020 2020 7365  d = 0.        se
+00005ef0: 6c66 2e61 6c6c 6f77 6564 5f6f 7665 7272  lf.allowed_overr
+00005f00: 6964 6520 3d20 616c 6c6f 7765 645f 6f76  ide = allowed_ov
+00005f10: 6572 7269 6465 0a20 2020 2020 2020 2073  erride.        s
+00005f20: 656c 662e 6967 6e6f 7265 5f63 6f6d 6d6f  elf.ignore_commo
+00005f30: 6e5f 6669 6c74 6572 7320 3d20 6967 6e6f  n_filters = igno
+00005f40: 7265 5f63 6f6d 6d6f 6e5f 6669 6c74 6572  re_common_filter
+00005f50: 730a 0a20 2020 2064 6566 2073 6574 5f73  s..    def set_s
+00005f60: 656c 665f 6964 2873 656c 662c 2069 6429  elf_id(self, id)
+00005f70: 3a0a 2020 2020 2020 2020 2320 7468 6973  :.        # this
+00005f80: 2069 7320 6c65 6761 6379 2020 2d20 7765   is legacy  - we
+00005f90: 6232 7079 2075 7365 7320 6275 7420 6e6f  b2py uses but no
+00005fa0: 626f 6479 2065 6c73 6520 7368 6f75 6c64  body else should
+00005fb0: 0a20 2020 2020 2020 2023 2069 7420 6973  .        # it is
+00005fc0: 206e 6f74 2073 6166 6520 6966 2074 6865   not safe if the
+00005fd0: 206f 626a 6563 7420 6973 2072 6563 7963   object is recyc
+00005fe0: 6c65 640a 2020 2020 2020 2020 7365 6c66  led.        self
+00005ff0: 2e72 6563 6f72 645f 6964 203d 2069 640a  .record_id = id.
+00006000: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+00006010: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00006020: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+00006030: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+00006040: 746f 5f6e 6174 6976 6528 7374 7228 7661  to_native(str(va
+00006050: 6c75 6529 290a 2020 2020 2020 2020 6966  lue)).        if
+00006060: 206e 6f74 2076 616c 7565 2e73 7472 6970   not value.strip
+00006070: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+00006080: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+00006090: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+000060a0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+000060b0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+000060c0: 2020 2069 6620 7661 6c75 6520 696e 2073     if value in s
+000060d0: 656c 662e 616c 6c6f 7765 645f 6f76 6572  elf.allowed_over
+000060e0: 7269 6465 3a0a 2020 2020 2020 2020 2020  ride:.          
+000060f0: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+00006100: 2020 2020 2020 2028 7461 626c 656e 616d         (tablenam
+00006110: 652c 2066 6965 6c64 6e61 6d65 2920 3d20  e, fieldname) = 
+00006120: 7374 7228 7365 6c66 2e66 6965 6c64 292e  str(self.field).
+00006130: 7370 6c69 7428 222e 2229 0a20 2020 2020  split(".").     
+00006140: 2020 2074 6162 6c65 203d 2073 656c 662e     table = self.
+00006150: 6462 7365 742e 6462 5b74 6162 6c65 6e61  dbset.db[tablena
+00006160: 6d65 5d0a 2020 2020 2020 2020 6669 656c  me].        fiel
+00006170: 6420 3d20 7461 626c 655b 6669 656c 646e  d = table[fieldn
+00006180: 616d 655d 0a20 2020 2020 2020 2071 7565  ame].        que
+00006190: 7279 203d 2066 6965 6c64 203d 3d20 7661  ry = field == va
+000061a0: 6c75 650a 0a20 2020 2020 2020 2023 206d  lue..        # m
+000061b0: 616b 6520 7375 7265 2065 7863 6c75 6465  ake sure exclude
+000061c0: 2074 6865 2072 6563 6f72 645f 6964 0a20   the record_id. 
+000061d0: 2020 2020 2020 2069 6420 3d20 7265 636f         id = reco
+000061e0: 7264 5f69 6420 6f72 2073 656c 662e 7265  rd_id or self.re
+000061f0: 636f 7264 5f69 640a 2020 2020 2020 2020  cord_id.        
+00006200: 6966 2069 7369 6e73 7461 6e63 6528 6964  if isinstance(id
+00006210: 2c20 6469 6374 293a 0a20 2020 2020 2020  , dict):.       
+00006220: 2020 2020 2069 6420 3d20 7461 626c 6528       id = table(
+00006230: 2a2a 6964 290a 2020 2020 2020 2020 6966  **id).        if
+00006240: 206e 6f74 2069 6420 6973 204e 6f6e 653a   not id is None:
+00006250: 0a20 2020 2020 2020 2020 2020 2071 7565  .            que
+00006260: 7279 2026 3d20 7461 626c 652e 5f69 6420  ry &= table._id 
+00006270: 213d 2069 640a 2020 2020 2020 2020 7375  != id.        su
+00006280: 6273 6574 203d 2073 656c 662e 6462 7365  bset = self.dbse
+00006290: 7428 7175 6572 792c 2069 676e 6f72 655f  t(query, ignore_
+000062a0: 636f 6d6d 6f6e 5f66 696c 7465 7273 3d73  common_filters=s
+000062b0: 656c 662e 6967 6e6f 7265 5f63 6f6d 6d6f  elf.ignore_commo
+000062c0: 6e5f 6669 6c74 6572 7329 0a20 2020 2020  n_filters).     
+000062d0: 2020 2069 6620 7375 6273 6574 2e73 656c     if subset.sel
+000062e0: 6563 7428 6c69 6d69 7462 793d 2830 2c20  ect(limitby=(0, 
+000062f0: 3129 293a 0a20 2020 2020 2020 2020 2020  1)):.           
+00006300: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+00006310: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
+00006320: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+00006330: 725f 6d65 7373 6167 6529 290a 2020 2020  r_message)).    
+00006340: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+00006350: 0a0a 0a64 6566 2072 616e 6765 5f65 7272  ...def range_err
+00006360: 6f72 5f6d 6573 7361 6765 2865 7272 6f72  or_message(error
+00006370: 5f6d 6573 7361 6765 2c20 7768 6174 5f74  _message, what_t
+00006380: 6f5f 656e 7465 722c 206d 696e 696d 756d  o_enter, minimum
+00006390: 2c20 6d61 7869 6d75 6d29 3a0a 2020 2020  , maximum):.    
+000063a0: 2222 2262 7569 6c64 2074 6865 2065 7272  """build the err
+000063b0: 6f72 206d 6573 7361 6765 2066 6f72 2074  or message for t
+000063c0: 6865 206e 756d 6265 7220 7261 6e67 6520  he number range 
+000063d0: 7661 6c69 6461 746f 7273 2222 220a 2020  validators""".  
+000063e0: 2020 6966 2065 7272 6f72 5f6d 6573 7361    if error_messa
+000063f0: 6765 2069 7320 4e6f 6e65 3a0a 2020 2020  ge is None:.    
+00006400: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
+00006410: 6520 3d20 2245 6e74 6572 2022 202b 2077  e = "Enter " + w
+00006420: 6861 745f 746f 5f65 6e74 6572 0a20 2020  hat_to_enter.   
+00006430: 2020 2020 2069 6620 6d69 6e69 6d75 6d20       if minimum 
+00006440: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+00006450: 6d61 7869 6d75 6d20 6973 206e 6f74 204e  maximum is not N
+00006460: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00006470: 2065 7272 6f72 5f6d 6573 7361 6765 202b   error_message +
+00006480: 3d20 2220 6265 7477 6565 6e20 2528 6d69  = " between %(mi
+00006490: 6e29 6720 616e 6420 2528 6d61 7829 6722  n)g and %(max)g"
+000064a0: 0a20 2020 2020 2020 2065 6c69 6620 6d69  .        elif mi
+000064b0: 6e69 6d75 6d20 6973 206e 6f74 204e 6f6e  nimum is not Non
+000064c0: 653a 0a20 2020 2020 2020 2020 2020 2065  e:.            e
+000064d0: 7272 6f72 5f6d 6573 7361 6765 202b 3d20  rror_message += 
+000064e0: 2220 6772 6561 7465 7220 7468 616e 206f  " greater than o
+000064f0: 7220 6571 7561 6c20 746f 2025 286d 696e  r equal to %(min
+00006500: 2967 220a 2020 2020 2020 2020 656c 6966  )g".        elif
+00006510: 206d 6178 696d 756d 2069 7320 6e6f 7420   maximum is not 
+00006520: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00006530: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
+00006540: 2b3d 2022 206c 6573 7320 7468 616e 206f  += " less than o
+00006550: 7220 6571 7561 6c20 746f 2025 286d 6178  r equal to %(max
+00006560: 2967 220a 2020 2020 6966 2074 7970 6528  )g".    if type(
+00006570: 6d61 7869 6d75 6d29 2069 6e20 696e 7465  maximum) in inte
+00006580: 6765 725f 7479 7065 733a 0a20 2020 2020  ger_types:.     
+00006590: 2020 206d 6178 696d 756d 202d 3d20 310a     maximum -= 1.
+000065a0: 2020 2020 7265 7475 726e 2073 7472 2874      return str(t
+000065b0: 7261 6e73 6c61 7465 2865 7272 6f72 5f6d  ranslate(error_m
+000065c0: 6573 7361 6765 2929 2025 2064 6963 7428  essage)) % dict(
+000065d0: 6d69 6e3d 6d69 6e69 6d75 6d2c 206d 6178  min=minimum, max
+000065e0: 3d6d 6178 696d 756d 290a 0a0a 636c 6173  =maximum)...clas
+000065f0: 7320 4953 5f49 4e54 5f49 4e5f 5241 4e47  s IS_INT_IN_RANG
+00006600: 4528 5661 6c69 6461 746f 7229 3a0a 2020  E(Validator):.  
+00006610: 2020 2222 220a 2020 2020 4465 7465 726d    """.    Determ
+00006620: 696e 6573 2074 6861 7420 7468 6520 6172  ines that the ar
+00006630: 6775 6d65 6e74 2069 7320 286f 7220 6361  gument is (or ca
+00006640: 6e20 6265 2072 6570 7265 7365 6e74 6564  n be represented
+00006650: 2061 7329 2061 6e20 696e 742c 0a20 2020   as) an int,.   
+00006660: 2061 6e64 2074 6861 7420 6974 2066 616c   and that it fal
+00006670: 6c73 2077 6974 6869 6e20 7468 6520 7370  ls within the sp
+00006680: 6563 6966 6965 6420 7261 6e67 652e 2054  ecified range. T
+00006690: 6865 2072 616e 6765 2069 7320 696e 7465  he range is inte
+000066a0: 7270 7265 7465 640a 2020 2020 696e 2074  rpreted.    in t
+000066b0: 6865 2050 7974 686f 6e69 6320 7761 792c  he Pythonic way,
+000066c0: 2073 6f20 7468 6520 7465 7374 2069 733a   so the test is:
+000066d0: 206d 696e 203c 3d20 7661 6c75 6520 3c20   min <= value < 
+000066e0: 6d61 782e 0a0a 2020 2020 5468 6520 6d69  max...    The mi
+000066f0: 6e69 6d75 6d20 616e 6420 6d61 7869 6d75  nimum and maximu
+00006700: 6d20 6c69 6d69 7473 2063 616e 2062 6520  m limits can be 
+00006710: 4e6f 6e65 2c20 6d65 616e 696e 6720 6e6f  None, meaning no
+00006720: 206c 6f77 6572 206f 7220 7570 7065 7220   lower or upper 
+00006730: 6c69 6d69 742c 0a20 2020 2072 6573 7065  limit,.    respe
+00006740: 6374 6976 656c 792e 0a0a 2020 2020 4578  ctively...    Ex
+00006750: 616d 706c 653a 0a20 2020 2020 2020 2055  ample:.        U
+00006760: 7365 6420 6173 3a3a 0a0a 2020 2020 2020  sed as::..      
+00006770: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
+00006780: 653d 2774 6578 7427 2c20 5f6e 616d 653d  e='text', _name=
+00006790: 276e 616d 6527 2c20 7265 7175 6972 6573  'name', requires
+000067a0: 3d49 535f 494e 545f 494e 5f52 414e 4745  =IS_INT_IN_RANGE
+000067b0: 2830 2c20 3130 2929 0a0a 2020 2020 2020  (0, 10))..      
+000067c0: 2020 2020 2020 3e3e 3e20 4953 5f49 4e54        >>> IS_INT
+000067d0: 5f49 4e5f 5241 4e47 4528 312c 3529 2827  _IN_RANGE(1,5)('
+000067e0: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
+000067f0: 2834 2c20 4e6f 6e65 290a 2020 2020 2020  (4, None).      
+00006800: 2020 2020 2020 3e3e 3e20 4953 5f49 4e54        >>> IS_INT
+00006810: 5f49 4e5f 5241 4e47 4528 312c 3529 2834  _IN_RANGE(1,5)(4
+00006820: 290a 2020 2020 2020 2020 2020 2020 2834  ).            (4
+00006830: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00006840: 2020 2020 3e3e 3e20 4953 5f49 4e54 5f49      >>> IS_INT_I
+00006850: 4e5f 5241 4e47 4528 312c 3529 2831 290a  N_RANGE(1,5)(1).
+00006860: 2020 2020 2020 2020 2020 2020 2831 2c20              (1, 
+00006870: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+00006880: 2020 3e3e 3e20 4953 5f49 4e54 5f49 4e5f    >>> IS_INT_IN_
+00006890: 5241 4e47 4528 312c 3529 2835 290a 2020  RANGE(1,5)(5).  
+000068a0: 2020 2020 2020 2020 2020 2835 2c20 2765            (5, 'e
+000068b0: 6e74 6572 2061 6e20 696e 7465 6765 7220  nter an integer 
+000068c0: 6265 7477 6565 6e20 3120 616e 6420 3427  between 1 and 4'
+000068d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000068e0: 3e20 4953 5f49 4e54 5f49 4e5f 5241 4e47  > IS_INT_IN_RANG
+000068f0: 4528 312c 3529 2835 290a 2020 2020 2020  E(1,5)(5).      
+00006900: 2020 2020 2020 2835 2c20 2765 6e74 6572        (5, 'enter
+00006910: 2061 6e20 696e 7465 6765 7220 6265 7477   an integer betw
+00006920: 6565 6e20 3120 616e 6420 3427 290a 2020  een 1 and 4').  
+00006930: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00006940: 5f49 4e54 5f49 4e5f 5241 4e47 4528 312c  _INT_IN_RANGE(1,
+00006950: 3529 2833 2e35 290a 2020 2020 2020 2020  5)(3.5).        
+00006960: 2020 2020 2833 2e35 2c20 2765 6e74 6572      (3.5, 'enter
+00006970: 2061 6e20 696e 7465 6765 7220 6265 7477   an integer betw
+00006980: 6565 6e20 3120 616e 6420 3427 290a 2020  een 1 and 4').  
+00006990: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+000069a0: 5f49 4e54 5f49 4e5f 5241 4e47 4528 4e6f  _INT_IN_RANGE(No
+000069b0: 6e65 2c35 2928 2734 2729 0a20 2020 2020  ne,5)('4').     
+000069c0: 2020 2020 2020 2028 342c 204e 6f6e 6529         (4, None)
+000069d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000069e0: 2049 535f 494e 545f 494e 5f52 414e 4745   IS_INT_IN_RANGE
+000069f0: 284e 6f6e 652c 3529 2827 3627 290a 2020  (None,5)('6').  
+00006a00: 2020 2020 2020 2020 2020 2827 3627 2c20            ('6', 
+00006a10: 2765 6e74 6572 2061 6e20 696e 7465 6765  'enter an intege
+00006a20: 7220 6c65 7373 2074 6861 6e20 6f72 2065  r less than or e
+00006a30: 7175 616c 2074 6f20 3427 290a 2020 2020  qual to 4').    
+00006a40: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00006a50: 4e54 5f49 4e5f 5241 4e47 4528 312c 4e6f  NT_IN_RANGE(1,No
+00006a60: 6e65 2928 2734 2729 0a20 2020 2020 2020  ne)('4').       
+00006a70: 2020 2020 2028 342c 204e 6f6e 6529 0a20       (4, None). 
+00006a80: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00006a90: 535f 494e 545f 494e 5f52 414e 4745 2831  S_INT_IN_RANGE(1
+00006aa0: 2c4e 6f6e 6529 2827 3027 290a 2020 2020  ,None)('0').    
+00006ab0: 2020 2020 2020 2020 2827 3027 2c20 2765          ('0', 'e
+00006ac0: 6e74 6572 2061 6e20 696e 7465 6765 7220  nter an integer 
+00006ad0: 6772 6561 7465 7220 7468 616e 206f 7220  greater than or 
+00006ae0: 6571 7561 6c20 746f 2031 2729 0a20 2020  equal to 1').   
+00006af0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00006b00: 494e 545f 494e 5f52 414e 4745 2829 2836  INT_IN_RANGE()(6
+00006b10: 290a 2020 2020 2020 2020 2020 2020 2836  ).            (6
+00006b20: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+00006b30: 2020 2020 3e3e 3e20 4953 5f49 4e54 5f49      >>> IS_INT_I
+00006b40: 4e5f 5241 4e47 4528 2928 2761 6263 2729  N_RANGE()('abc')
+00006b50: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
+00006b60: 6263 272c 2027 656e 7465 7220 616e 2069  bc', 'enter an i
+00006b70: 6e74 6567 6572 2729 0a20 2020 2022 2222  nteger').    """
+00006b80: 0a0a 2020 2020 5245 4745 585f 494e 5420  ..    REGEX_INT 
+00006b90: 3d20 7222 5e5b 2b2d 5d3f 5c64 2b24 220a  = r"^[+-]?\d+$".
+00006ba0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00006bb0: 5f28 7365 6c66 2c20 6d69 6e69 6d75 6d3d  _(self, minimum=
+00006bc0: 4e6f 6e65 2c20 6d61 7869 6d75 6d3d 4e6f  None, maximum=No
+00006bd0: 6e65 2c20 6572 726f 725f 6d65 7373 6167  ne, error_messag
+00006be0: 653d 4e6f 6e65 293a 0a20 2020 2020 2020  e=None):.       
+00006bf0: 2073 656c 662e 6d69 6e69 6d75 6d20 3d20   self.minimum = 
+00006c00: 696e 7428 6d69 6e69 6d75 6d29 2069 6620  int(minimum) if 
+00006c10: 6d69 6e69 6d75 6d20 6973 206e 6f74 204e  minimum is not N
+00006c20: 6f6e 6520 656c 7365 204e 6f6e 650a 2020  one else None.  
+00006c30: 2020 2020 2020 7365 6c66 2e6d 6178 696d        self.maxim
+00006c40: 756d 203d 2069 6e74 286d 6178 696d 756d  um = int(maximum
+00006c50: 2920 6966 206d 6178 696d 756d 2069 7320  ) if maximum is 
+00006c60: 6e6f 7420 4e6f 6e65 2065 6c73 6520 4e6f  not None else No
+00006c70: 6e65 0a20 2020 2020 2020 2073 656c 662e  ne.        self.
+00006c80: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
+00006c90: 6572 726f 725f 6d65 7373 6167 650a 0a20  error_message.. 
+00006ca0: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+00006cb0: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+00006cc0: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+00006cd0: 2020 2020 2020 6966 2072 652e 6d61 7463        if re.matc
+00006ce0: 6828 7365 6c66 2e52 4547 4558 5f49 4e54  h(self.REGEX_INT
+00006cf0: 2c20 7374 7228 7661 6c75 6529 293a 0a20  , str(value)):. 
+00006d00: 2020 2020 2020 2020 2020 2076 203d 2069             v = i
+00006d10: 6e74 2876 616c 7565 290a 2020 2020 2020  nt(value).      
+00006d20: 2020 2020 2020 6966 2028 7365 6c66 2e6d        if (self.m
+00006d30: 696e 696d 756d 2069 7320 4e6f 6e65 206f  inimum is None o
+00006d40: 7220 7620 3e3d 2073 656c 662e 6d69 6e69  r v >= self.mini
+00006d50: 6d75 6d29 2061 6e64 2028 0a20 2020 2020  mum) and (.     
+00006d60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00006d70: 6d61 7869 6d75 6d20 6973 204e 6f6e 6520  maximum is None 
+00006d80: 6f72 2076 203c 2073 656c 662e 6d61 7869  or v < self.maxi
+00006d90: 6d75 6d0a 2020 2020 2020 2020 2020 2020  mum.            
+00006da0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00006db0: 2020 2072 6574 7572 6e20 760a 2020 2020     return v.    
+00006dc0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00006dd0: 7469 6f6e 4572 726f 7228 0a20 2020 2020  tionError(.     
+00006de0: 2020 2020 2020 2072 616e 6765 5f65 7272         range_err
+00006df0: 6f72 5f6d 6573 7361 6765 280a 2020 2020  or_message(.    
+00006e00: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00006e10: 2e65 7272 6f72 5f6d 6573 7361 6765 2c20  .error_message, 
+00006e20: 2261 6e20 696e 7465 6765 7222 2c20 7365  "an integer", se
+00006e30: 6c66 2e6d 696e 696d 756d 2c20 7365 6c66  lf.minimum, self
+00006e40: 2e6d 6178 696d 756d 0a20 2020 2020 2020  .maximum.       
+00006e50: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
+00006e60: 0a0a 0a64 6566 2073 7472 3264 6563 286e  ...def str2dec(n
+00006e70: 756d 6265 7229 3a0a 2020 2020 7320 3d20  umber):.    s = 
+00006e80: 7374 7228 6e75 6d62 6572 290a 2020 2020  str(number).    
+00006e90: 6966 2022 2e22 206e 6f74 2069 6e20 733a  if "." not in s:
+00006ea0: 0a20 2020 2020 2020 2073 202b 3d20 222e  .        s += ".
+00006eb0: 3030 220a 2020 2020 656c 7365 3a0a 2020  00".    else:.  
+00006ec0: 2020 2020 2020 7320 2b3d 2022 3022 202a        s += "0" *
+00006ed0: 2028 3220 2d20 6c65 6e28 732e 7370 6c69   (2 - len(s.spli
+00006ee0: 7428 222e 2229 5b31 5d29 290a 2020 2020  t(".")[1])).    
+00006ef0: 7265 7475 726e 2073 0a0a 0a63 6c61 7373  return s...class
+00006f00: 2049 535f 464c 4f41 545f 494e 5f52 414e   IS_FLOAT_IN_RAN
+00006f10: 4745 2856 616c 6964 6174 6f72 293a 0a20  GE(Validator):. 
+00006f20: 2020 2022 2222 0a20 2020 2044 6574 6572     """.    Deter
+00006f30: 6d69 6e65 7320 7468 6174 2074 6865 2061  mines that the a
+00006f40: 7267 756d 656e 7420 6973 2028 6f72 2063  rgument is (or c
+00006f50: 616e 2062 6520 7265 7072 6573 656e 7465  an be represente
+00006f60: 6420 6173 2920 6120 666c 6f61 742c 0a20  d as) a float,. 
+00006f70: 2020 2061 6e64 2074 6861 7420 6974 2066     and that it f
+00006f80: 616c 6c73 2077 6974 6869 6e20 7468 6520  alls within the 
+00006f90: 7370 6563 6966 6965 6420 696e 636c 7573  specified inclus
+00006fa0: 6976 6520 7261 6e67 652e 0a20 2020 2054  ive range..    T
+00006fb0: 6865 2063 6f6d 7061 7269 736f 6e20 6973  he comparison is
+00006fc0: 206d 6164 6520 7769 7468 206e 6174 6976   made with nativ
+00006fd0: 6520 6172 6974 686d 6574 6963 2e0a 0a20  e arithmetic... 
+00006fe0: 2020 2054 6865 206d 696e 696d 756d 2061     The minimum a
+00006ff0: 6e64 206d 6178 696d 756d 206c 696d 6974  nd maximum limit
+00007000: 7320 6361 6e20 6265 204e 6f6e 652c 206d  s can be None, m
+00007010: 6561 6e69 6e67 206e 6f20 6c6f 7765 7220  eaning no lower 
+00007020: 6f72 2075 7070 6572 206c 696d 6974 2c0a  or upper limit,.
+00007030: 2020 2020 7265 7370 6563 7469 7665 6c79      respectively
+00007040: 2e0a 0a20 2020 2045 7861 6d70 6c65 3a0a  ...    Example:.
+00007050: 2020 2020 2020 2020 5573 6564 2061 733a          Used as:
+00007060: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+00007070: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+00007080: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+00007090: 2072 6571 7569 7265 733d 4953 5f46 4c4f   requires=IS_FLO
+000070a0: 4154 5f49 4e5f 5241 4e47 4528 302c 2031  AT_IN_RANGE(0, 1
+000070b0: 3029 290a 0a20 2020 2020 2020 2020 2020  0))..           
+000070c0: 203e 3e3e 2049 535f 464c 4f41 545f 494e   >>> IS_FLOAT_IN
+000070d0: 5f52 414e 4745 2831 2c35 2928 2734 2729  _RANGE(1,5)('4')
+000070e0: 0a20 2020 2020 2020 2020 2020 2028 342e  .            (4.
+000070f0: 302c 204e 6f6e 6529 0a20 2020 2020 2020  0, None).       
+00007100: 2020 2020 203e 3e3e 2049 535f 464c 4f41       >>> IS_FLOA
+00007110: 545f 494e 5f52 414e 4745 2831 2c35 2928  T_IN_RANGE(1,5)(
+00007120: 3429 0a20 2020 2020 2020 2020 2020 2028  4).            (
+00007130: 342e 302c 204e 6f6e 6529 0a20 2020 2020  4.0, None).     
+00007140: 2020 2020 2020 203e 3e3e 2049 535f 464c         >>> IS_FL
+00007150: 4f41 545f 494e 5f52 414e 4745 2831 2c35  OAT_IN_RANGE(1,5
+00007160: 2928 3129 0a20 2020 2020 2020 2020 2020  )(1).           
+00007170: 2028 312e 302c 204e 6f6e 6529 0a20 2020   (1.0, None).   
+00007180: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00007190: 464c 4f41 545f 494e 5f52 414e 4745 2831  FLOAT_IN_RANGE(1
+000071a0: 2c35 2928 352e 3235 290a 2020 2020 2020  ,5)(5.25).      
+000071b0: 2020 2020 2020 2835 2e32 352c 2027 656e        (5.25, 'en
+000071c0: 7465 7220 6120 6e75 6d62 6572 2062 6574  ter a number bet
+000071d0: 7765 656e 2031 2061 6e64 2035 2729 0a20  ween 1 and 5'). 
+000071e0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+000071f0: 535f 464c 4f41 545f 494e 5f52 414e 4745  S_FLOAT_IN_RANGE
+00007200: 2831 2c35 2928 362e 3029 0a20 2020 2020  (1,5)(6.0).     
+00007210: 2020 2020 2020 2028 362e 302c 2027 656e         (6.0, 'en
+00007220: 7465 7220 6120 6e75 6d62 6572 2062 6574  ter a number bet
+00007230: 7765 656e 2031 2061 6e64 2035 2729 0a20  ween 1 and 5'). 
+00007240: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00007250: 535f 464c 4f41 545f 494e 5f52 414e 4745  S_FLOAT_IN_RANGE
+00007260: 2831 2c35 2928 332e 3529 0a20 2020 2020  (1,5)(3.5).     
+00007270: 2020 2020 2020 2028 332e 352c 204e 6f6e         (3.5, Non
+00007280: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00007290: 3e3e 2049 535f 464c 4f41 545f 494e 5f52  >> IS_FLOAT_IN_R
+000072a0: 414e 4745 2831 2c4e 6f6e 6529 2833 2e35  ANGE(1,None)(3.5
+000072b0: 290a 2020 2020 2020 2020 2020 2020 2833  ).            (3
+000072c0: 2e35 2c20 4e6f 6e65 290a 2020 2020 2020  .5, None).      
+000072d0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
+000072e0: 4154 5f49 4e5f 5241 4e47 4528 4e6f 6e65  AT_IN_RANGE(None
+000072f0: 2c35 2928 332e 3529 0a20 2020 2020 2020  ,5)(3.5).       
+00007300: 2020 2020 2028 332e 352c 204e 6f6e 6529       (3.5, None)
+00007310: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00007320: 2049 535f 464c 4f41 545f 494e 5f52 414e   IS_FLOAT_IN_RAN
+00007330: 4745 2831 2c4e 6f6e 6529 2830 2e35 290a  GE(1,None)(0.5).
+00007340: 2020 2020 2020 2020 2020 2020 2830 2e35              (0.5
+00007350: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
+00007360: 7220 6772 6561 7465 7220 7468 616e 206f  r greater than o
+00007370: 7220 6571 7561 6c20 746f 2031 2729 0a20  r equal to 1'). 
+00007380: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00007390: 535f 464c 4f41 545f 494e 5f52 414e 4745  S_FLOAT_IN_RANGE
+000073a0: 284e 6f6e 652c 3529 2836 2e35 290a 2020  (None,5)(6.5).  
+000073b0: 2020 2020 2020 2020 2020 2836 2e35 2c20            (6.5, 
+000073c0: 2765 6e74 6572 2061 206e 756d 6265 7220  'enter a number 
+000073d0: 6c65 7373 2074 6861 6e20 6f72 2065 7175  less than or equ
+000073e0: 616c 2074 6f20 3527 290a 2020 2020 2020  al to 5').      
+000073f0: 2020 2020 2020 3e3e 3e20 4953 5f46 4c4f        >>> IS_FLO
+00007400: 4154 5f49 4e5f 5241 4e47 4528 2928 362e  AT_IN_RANGE()(6.
+00007410: 3529 0a20 2020 2020 2020 2020 2020 2028  5).            (
+00007420: 362e 352c 204e 6f6e 6529 0a20 2020 2020  6.5, None).     
+00007430: 2020 2020 2020 203e 3e3e 2049 535f 464c         >>> IS_FL
+00007440: 4f41 545f 494e 5f52 414e 4745 2829 2827  OAT_IN_RANGE()('
+00007450: 6162 6327 290a 2020 2020 2020 2020 2020  abc').          
+00007460: 2020 2827 6162 6327 2c20 2765 6e74 6572    ('abc', 'enter
+00007470: 2061 206e 756d 6265 7227 290a 2020 2020   a number').    
+00007480: 2222 220a 0a20 2020 2064 6566 205f 5f69  """..    def __i
+00007490: 6e69 745f 5f28 7365 6c66 2c20 6d69 6e69  nit__(self, mini
+000074a0: 6d75 6d3d 4e6f 6e65 2c20 6d61 7869 6d75  mum=None, maximu
+000074b0: 6d3d 4e6f 6e65 2c20 6572 726f 725f 6d65  m=None, error_me
+000074c0: 7373 6167 653d 4e6f 6e65 2c20 646f 743d  ssage=None, dot=
+000074d0: 222e 2229 3a0a 2020 2020 2020 2020 7365  "."):.        se
+000074e0: 6c66 2e6d 696e 696d 756d 203d 2066 6c6f  lf.minimum = flo
+000074f0: 6174 286d 696e 696d 756d 2920 6966 206d  at(minimum) if m
+00007500: 696e 696d 756d 2069 7320 6e6f 7420 4e6f  inimum is not No
+00007510: 6e65 2065 6c73 6520 4e6f 6e65 0a20 2020  ne else None.   
+00007520: 2020 2020 2073 656c 662e 6d61 7869 6d75       self.maximu
+00007530: 6d20 3d20 666c 6f61 7428 6d61 7869 6d75  m = float(maximu
+00007540: 6d29 2069 6620 6d61 7869 6d75 6d20 6973  m) if maximum is
+00007550: 206e 6f74 204e 6f6e 6520 656c 7365 204e   not None else N
+00007560: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+00007570: 2e64 6f74 203d 2073 7472 2864 6f74 290a  .dot = str(dot).
+00007580: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00007590: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+000075a0: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
+000075b0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+000075c0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+000075d0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+000075e0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+000075f0: 2020 2020 6966 2073 656c 662e 646f 7420      if self.dot 
+00007600: 3d3d 2022 2e22 3a0a 2020 2020 2020 2020  == ".":.        
+00007610: 2020 2020 2020 2020 7620 3d20 666c 6f61          v = floa
+00007620: 7428 7661 6c75 6529 0a20 2020 2020 2020  t(value).       
+00007630: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00007640: 2020 2020 2020 2020 2020 2076 203d 2066             v = f
+00007650: 6c6f 6174 2873 7472 2876 616c 7565 292e  loat(str(value).
+00007660: 7265 706c 6163 6528 7365 6c66 2e64 6f74  replace(self.dot
+00007670: 2c20 222e 2229 290a 2020 2020 2020 2020  , ".")).        
+00007680: 2020 2020 6966 2028 7365 6c66 2e6d 696e      if (self.min
+00007690: 696d 756d 2069 7320 4e6f 6e65 206f 7220  imum is None or 
+000076a0: 7620 3e3d 2073 656c 662e 6d69 6e69 6d75  v >= self.minimu
+000076b0: 6d29 2061 6e64 2028 0a20 2020 2020 2020  m) and (.       
+000076c0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+000076d0: 7869 6d75 6d20 6973 204e 6f6e 6520 6f72  ximum is None or
+000076e0: 2076 203c 3d20 7365 6c66 2e6d 6178 696d   v <= self.maxim
+000076f0: 756d 0a20 2020 2020 2020 2020 2020 2029  um.            )
+00007700: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00007710: 2020 7265 7475 726e 2076 0a20 2020 2020    return v.     
+00007720: 2020 2065 7863 6570 7420 2856 616c 7565     except (Value
+00007730: 4572 726f 722c 2054 7970 6545 7272 6f72  Error, TypeError
+00007740: 293a 0a20 2020 2020 2020 2020 2020 2070  ):.            p
+00007750: 6173 730a 2020 2020 2020 2020 7261 6973  ass.        rais
+00007760: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
+00007770: 7228 0a20 2020 2020 2020 2020 2020 2072  r(.            r
+00007780: 616e 6765 5f65 7272 6f72 5f6d 6573 7361  ange_error_messa
+00007790: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
+000077a0: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+000077b0: 6573 7361 6765 2c20 2261 206e 756d 6265  essage, "a numbe
+000077c0: 7222 2c20 7365 6c66 2e6d 696e 696d 756d  r", self.minimum
+000077d0: 2c20 7365 6c66 2e6d 6178 696d 756d 0a20  , self.maximum. 
+000077e0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000077f0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00007800: 666f 726d 6174 7465 7228 7365 6c66 2c20  formatter(self, 
+00007810: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+00007820: 6966 2076 616c 7565 2069 7320 4e6f 6e65  if value is None
+00007830: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00007840: 7475 726e 204e 6f6e 650a 2020 2020 2020  turn None.      
+00007850: 2020 7265 7475 726e 2073 7472 3264 6563    return str2dec
+00007860: 2876 616c 7565 292e 7265 706c 6163 6528  (value).replace(
+00007870: 222e 222c 2073 656c 662e 646f 7429 0a0a  ".", self.dot)..
+00007880: 0a63 6c61 7373 2049 535f 4445 4349 4d41  .class IS_DECIMA
+00007890: 4c5f 494e 5f52 414e 4745 2856 616c 6964  L_IN_RANGE(Valid
+000078a0: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
+000078b0: 2020 2044 6574 6572 6d69 6e65 7320 7468     Determines th
+000078c0: 6174 2074 6865 2061 7267 756d 656e 7420  at the argument 
+000078d0: 6973 2028 6f72 2063 616e 2062 6520 7265  is (or can be re
+000078e0: 7072 6573 656e 7465 6420 6173 2920 6120  presented as) a 
+000078f0: 5079 7468 6f6e 2044 6563 696d 616c 2c0a  Python Decimal,.
+00007900: 2020 2020 616e 6420 7468 6174 2069 7420      and that it 
+00007910: 6661 6c6c 7320 7769 7468 696e 2074 6865  falls within the
+00007920: 2073 7065 6369 6669 6564 2069 6e63 6c75   specified inclu
+00007930: 7369 7665 2072 616e 6765 2e0a 2020 2020  sive range..    
+00007940: 5468 6520 636f 6d70 6172 6973 6f6e 2069  The comparison i
+00007950: 7320 6d61 6465 2077 6974 6820 5079 7468  s made with Pyth
+00007960: 6f6e 2044 6563 696d 616c 2061 7269 7468  on Decimal arith
+00007970: 6d65 7469 632e 0a0a 2020 2020 5468 6520  metic...    The 
+00007980: 6d69 6e69 6d75 6d20 616e 6420 6d61 7869  minimum and maxi
+00007990: 6d75 6d20 6c69 6d69 7473 2063 616e 2062  mum limits can b
+000079a0: 6520 4e6f 6e65 2c20 6d65 616e 696e 6720  e None, meaning 
+000079b0: 6e6f 206c 6f77 6572 206f 7220 7570 7065  no lower or uppe
+000079c0: 7220 6c69 6d69 742c 0a20 2020 2072 6573  r limit,.    res
+000079d0: 7065 6374 6976 656c 792e 0a0a 2020 2020  pectively...    
+000079e0: 4578 616d 706c 653a 0a20 2020 2020 2020  Example:.       
+000079f0: 2055 7365 6420 6173 3a3a 0a0a 2020 2020   Used as::..    
+00007a00: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00007a10: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00007a20: 653d 276e 616d 6527 2c20 7265 7175 6972  e='name', requir
+00007a30: 6573 3d49 535f 4445 4349 4d41 4c5f 494e  es=IS_DECIMAL_IN
+00007a40: 5f52 414e 4745 2830 2c20 3130 2929 0a0a  _RANGE(0, 10))..
+00007a50: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00007a60: 4953 5f44 4543 494d 414c 5f49 4e5f 5241  IS_DECIMAL_IN_RA
+00007a70: 4e47 4528 312c 3529 2827 3427 290a 2020  NGE(1,5)('4').  
+00007a80: 2020 2020 2020 2020 2020 2844 6563 696d            (Decim
+00007a90: 616c 2827 3427 292c 204e 6f6e 6529 0a20  al('4'), None). 
+00007aa0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00007ab0: 535f 4445 4349 4d41 4c5f 494e 5f52 414e  S_DECIMAL_IN_RAN
+00007ac0: 4745 2831 2c35 2928 3429 0a20 2020 2020  GE(1,5)(4).     
+00007ad0: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
+00007ae0: 2734 2729 2c20 4e6f 6e65 290a 2020 2020  '4'), None).    
+00007af0: 2020 2020 2020 2020 3e3e 3e20 4953 5f44          >>> IS_D
+00007b00: 4543 494d 414c 5f49 4e5f 5241 4e47 4528  ECIMAL_IN_RANGE(
+00007b10: 312c 3529 2831 290a 2020 2020 2020 2020  1,5)(1).        
+00007b20: 2020 2020 2844 6563 696d 616c 2827 3127      (Decimal('1'
+00007b30: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
+00007b40: 2020 2020 203e 3e3e 2049 535f 4445 4349       >>> IS_DECI
+00007b50: 4d41 4c5f 494e 5f52 414e 4745 2831 2c35  MAL_IN_RANGE(1,5
+00007b60: 2928 352e 3235 290a 2020 2020 2020 2020  )(5.25).        
+00007b70: 2020 2020 2835 2e32 352c 2027 656e 7465      (5.25, 'ente
+00007b80: 7220 6120 6e75 6d62 6572 2062 6574 7765  r a number betwe
+00007b90: 656e 2031 2061 6e64 2035 2729 0a20 2020  en 1 and 5').   
+00007ba0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00007bb0: 4445 4349 4d41 4c5f 494e 5f52 414e 4745  DECIMAL_IN_RANGE
+00007bc0: 2835 2e32 352c 3629 2835 2e32 3529 0a20  (5.25,6)(5.25). 
+00007bd0: 2020 2020 2020 2020 2020 2028 4465 6369             (Deci
+00007be0: 6d61 6c28 2735 2e32 3527 292c 204e 6f6e  mal('5.25'), Non
+00007bf0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00007c00: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
+00007c10: 5f52 414e 4745 2835 2e32 352c 3629 2827  _RANGE(5.25,6)('
+00007c20: 352e 3235 2729 0a20 2020 2020 2020 2020  5.25').         
+00007c30: 2020 2028 4465 6369 6d61 6c28 2735 2e32     (Decimal('5.2
+00007c40: 3527 292c 204e 6f6e 6529 0a20 2020 2020  5'), None).     
+00007c50: 2020 2020 2020 203e 3e3e 2049 535f 4445         >>> IS_DE
+00007c60: 4349 4d41 4c5f 494e 5f52 414e 4745 2831  CIMAL_IN_RANGE(1
+00007c70: 2c35 2928 362e 3029 0a20 2020 2020 2020  ,5)(6.0).       
+00007c80: 2020 2020 2028 362e 302c 2027 656e 7465       (6.0, 'ente
+00007c90: 7220 6120 6e75 6d62 6572 2062 6574 7765  r a number betwe
+00007ca0: 656e 2031 2061 6e64 2035 2729 0a20 2020  en 1 and 5').   
+00007cb0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00007cc0: 4445 4349 4d41 4c5f 494e 5f52 414e 4745  DECIMAL_IN_RANGE
+00007cd0: 2831 2c35 2928 332e 3529 0a20 2020 2020  (1,5)(3.5).     
+00007ce0: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
+00007cf0: 2733 2e35 2729 2c20 4e6f 6e65 290a 2020  '3.5'), None).  
+00007d00: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007d10: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+00007d20: 4528 312e 352c 352e 3529 2833 2e35 290a  E(1.5,5.5)(3.5).
+00007d30: 2020 2020 2020 2020 2020 2020 2844 6563              (Dec
+00007d40: 696d 616c 2827 332e 3527 292c 204e 6f6e  imal('3.5'), Non
+00007d50: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00007d60: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
+00007d70: 5f52 414e 4745 2831 2e35 2c35 2e35 2928  _RANGE(1.5,5.5)(
+00007d80: 362e 3529 0a20 2020 2020 2020 2020 2020  6.5).           
+00007d90: 2028 362e 352c 2027 656e 7465 7220 6120   (6.5, 'enter a 
+00007da0: 6e75 6d62 6572 2062 6574 7765 656e 2031  number between 1
+00007db0: 2e35 2061 6e64 2035 2e35 2729 0a20 2020  .5 and 5.5').   
+00007dc0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00007dd0: 4445 4349 4d41 4c5f 494e 5f52 414e 4745  DECIMAL_IN_RANGE
+00007de0: 2831 2e35 2c4e 6f6e 6529 2836 2e35 290a  (1.5,None)(6.5).
+00007df0: 2020 2020 2020 2020 2020 2020 2844 6563              (Dec
+00007e00: 696d 616c 2827 362e 3527 292c 204e 6f6e  imal('6.5'), Non
+00007e10: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00007e20: 3e3e 2049 535f 4445 4349 4d41 4c5f 494e  >> IS_DECIMAL_IN
+00007e30: 5f52 414e 4745 2831 2e35 2c4e 6f6e 6529  _RANGE(1.5,None)
+00007e40: 2830 2e35 290a 2020 2020 2020 2020 2020  (0.5).          
+00007e50: 2020 2830 2e35 2c20 2765 6e74 6572 2061    (0.5, 'enter a
+00007e60: 206e 756d 6265 7220 6772 6561 7465 7220   number greater 
+00007e70: 7468 616e 206f 7220 6571 7561 6c20 746f  than or equal to
+00007e80: 2031 2e35 2729 0a20 2020 2020 2020 2020   1.5').         
+00007e90: 2020 203e 3e3e 2049 535f 4445 4349 4d41     >>> IS_DECIMA
+00007ea0: 4c5f 494e 5f52 414e 4745 284e 6f6e 652c  L_IN_RANGE(None,
+00007eb0: 352e 3529 2834 2e35 290a 2020 2020 2020  5.5)(4.5).      
+00007ec0: 2020 2020 2020 2844 6563 696d 616c 2827        (Decimal('
+00007ed0: 342e 3527 292c 204e 6f6e 6529 0a20 2020  4.5'), None).   
+00007ee0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00007ef0: 4445 4349 4d41 4c5f 494e 5f52 414e 4745  DECIMAL_IN_RANGE
+00007f00: 284e 6f6e 652c 352e 3529 2836 2e35 290a  (None,5.5)(6.5).
+00007f10: 2020 2020 2020 2020 2020 2020 2836 2e35              (6.5
+00007f20: 2c20 2765 6e74 6572 2061 206e 756d 6265  , 'enter a numbe
+00007f30: 7220 6c65 7373 2074 6861 6e20 6f72 2065  r less than or e
+00007f40: 7175 616c 2074 6f20 352e 3527 290a 2020  qual to 5.5').  
+00007f50: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00007f60: 5f44 4543 494d 414c 5f49 4e5f 5241 4e47  _DECIMAL_IN_RANG
+00007f70: 4528 2928 362e 3529 0a20 2020 2020 2020  E()(6.5).       
+00007f80: 2020 2020 2028 4465 6369 6d61 6c28 2736       (Decimal('6
+00007f90: 2e35 2729 2c20 4e6f 6e65 290a 2020 2020  .5'), None).    
+00007fa0: 2020 2020 2020 2020 3e3e 3e20 4953 5f44          >>> IS_D
+00007fb0: 4543 494d 414c 5f49 4e5f 5241 4e47 4528  ECIMAL_IN_RANGE(
+00007fc0: 302c 3939 2928 3132 332e 3132 3329 0a20  0,99)(123.123). 
+00007fd0: 2020 2020 2020 2020 2020 2028 3132 332e             (123.
+00007fe0: 3132 332c 2027 656e 7465 7220 6120 6e75  123, 'enter a nu
+00007ff0: 6d62 6572 2062 6574 7765 656e 2030 2061  mber between 0 a
+00008000: 6e64 2039 3927 290a 2020 2020 2020 2020  nd 99').        
+00008010: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00008020: 414c 5f49 4e5f 5241 4e47 4528 302c 3939  AL_IN_RANGE(0,99
+00008030: 2928 2731 3233 2e31 3233 2729 0a20 2020  )('123.123').   
+00008040: 2020 2020 2020 2020 2028 2731 3233 2e31           ('123.1
+00008050: 3233 272c 2027 656e 7465 7220 6120 6e75  23', 'enter a nu
+00008060: 6d62 6572 2062 6574 7765 656e 2030 2061  mber between 0 a
+00008070: 6e64 2039 3927 290a 2020 2020 2020 2020  nd 99').        
+00008080: 2020 2020 3e3e 3e20 4953 5f44 4543 494d      >>> IS_DECIM
+00008090: 414c 5f49 4e5f 5241 4e47 4528 302c 3939  AL_IN_RANGE(0,99
+000080a0: 2928 2731 322e 3334 2729 0a20 2020 2020  )('12.34').     
+000080b0: 2020 2020 2020 2028 4465 6369 6d61 6c28         (Decimal(
+000080c0: 2731 322e 3334 2729 2c20 4e6f 6e65 290a  '12.34'), None).
+000080d0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+000080e0: 4953 5f44 4543 494d 414c 5f49 4e5f 5241  IS_DECIMAL_IN_RA
+000080f0: 4e47 4528 2928 2761 6263 2729 0a20 2020  NGE()('abc').   
+00008100: 2020 2020 2020 2020 2028 2761 6263 272c           ('abc',
+00008110: 2027 656e 7465 7220 6120 6e75 6d62 6572   'enter a number
+00008120: 2729 0a20 2020 2022 2222 0a0a 2020 2020  ').    """..    
+00008130: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00008140: 662c 206d 696e 696d 756d 3d4e 6f6e 652c  f, minimum=None,
+00008150: 206d 6178 696d 756d 3d4e 6f6e 652c 2065   maximum=None, e
+00008160: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
+00008170: 652c 2064 6f74 3d22 2e22 293a 0a20 2020  e, dot="."):.   
+00008180: 2020 2020 2073 656c 662e 6d69 6e69 6d75       self.minimu
+00008190: 6d20 3d20 6465 6369 6d61 6c2e 4465 6369  m = decimal.Deci
+000081a0: 6d61 6c28 7374 7228 6d69 6e69 6d75 6d29  mal(str(minimum)
+000081b0: 2920 6966 206d 696e 696d 756d 2069 7320  ) if minimum is 
+000081c0: 6e6f 7420 4e6f 6e65 2065 6c73 6520 4e6f  not None else No
+000081d0: 6e65 0a20 2020 2020 2020 2073 656c 662e  ne.        self.
+000081e0: 6d61 7869 6d75 6d20 3d20 6465 6369 6d61  maximum = decima
+000081f0: 6c2e 4465 6369 6d61 6c28 7374 7228 6d61  l.Decimal(str(ma
+00008200: 7869 6d75 6d29 2920 6966 206d 6178 696d  ximum)) if maxim
+00008210: 756d 2069 7320 6e6f 7420 4e6f 6e65 2065  um is not None e
+00008220: 6c73 6520 4e6f 6e65 0a20 2020 2020 2020  lse None.       
+00008230: 2073 656c 662e 646f 7420 3d20 7374 7228   self.dot = str(
+00008240: 646f 7429 0a20 2020 2020 2020 2073 656c  dot).        sel
+00008250: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
+00008260: 3d20 6572 726f 725f 6d65 7373 6167 650a  = error_message.
+00008270: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+00008280: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00008290: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+000082a0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+000082b0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+000082c0: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
+000082d0: 2c20 6465 6369 6d61 6c2e 4465 6369 6d61  , decimal.Decima
+000082e0: 6c29 3a0a 2020 2020 2020 2020 2020 2020  l):.            
+000082f0: 2020 2020 7661 6c75 6520 3d20 6465 6369      value = deci
+00008300: 6d61 6c2e 4465 6369 6d61 6c28 7374 7228  mal.Decimal(str(
+00008310: 7661 6c75 6529 2e72 6570 6c61 6365 2873  value).replace(s
+00008320: 656c 662e 646f 742c 2022 2e22 2929 0a20  elf.dot, ".")). 
+00008330: 2020 2020 2020 2020 2020 2069 6620 2873             if (s
+00008340: 656c 662e 6d69 6e69 6d75 6d20 6973 204e  elf.minimum is N
+00008350: 6f6e 6520 6f72 2076 616c 7565 203e 3d20  one or value >= 
+00008360: 7365 6c66 2e6d 696e 696d 756d 2920 616e  self.minimum) an
+00008370: 6420 280a 2020 2020 2020 2020 2020 2020  d (.            
+00008380: 2020 2020 7365 6c66 2e6d 6178 696d 756d      self.maximum
+00008390: 2069 7320 4e6f 6e65 206f 7220 7661 6c75   is None or valu
+000083a0: 6520 3c3d 2073 656c 662e 6d61 7869 6d75  e <= self.maximu
+000083b0: 6d0a 2020 2020 2020 2020 2020 2020 293a  m.            ):
+000083c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000083d0: 2072 6574 7572 6e20 7661 6c75 650a 2020   return value.  
+000083e0: 2020 2020 2020 6578 6365 7074 2028 5661        except (Va
+000083f0: 6c75 6545 7272 6f72 2c20 5479 7065 4572  lueError, TypeEr
+00008400: 726f 722c 2064 6563 696d 616c 2e49 6e76  ror, decimal.Inv
+00008410: 616c 6964 4f70 6572 6174 696f 6e29 3a0a  alidOperation):.
+00008420: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+00008430: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
+00008440: 616c 6964 6174 696f 6e45 7272 6f72 280a  alidationError(.
+00008450: 2020 2020 2020 2020 2020 2020 7261 6e67              rang
+00008460: 655f 6572 726f 725f 6d65 7373 6167 6528  e_error_message(
+00008470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008480: 2073 656c 662e 6572 726f 725f 6d65 7373   self.error_mess
+00008490: 6167 652c 2022 6120 6e75 6d62 6572 222c  age, "a number",
+000084a0: 2073 656c 662e 6d69 6e69 6d75 6d2c 2073   self.minimum, s
+000084b0: 656c 662e 6d61 7869 6d75 6d0a 2020 2020  elf.maximum.    
+000084c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000084d0: 2020 290a 0a20 2020 2064 6566 2066 6f72    )..    def for
+000084e0: 6d61 7474 6572 2873 656c 662c 2076 616c  matter(self, val
+000084f0: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
+00008500: 7661 6c75 6520 6973 204e 6f6e 653a 0a20  value is None:. 
+00008510: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00008520: 6e20 4e6f 6e65 0a20 2020 2020 2020 2072  n None.        r
+00008530: 6574 7572 6e20 7374 7232 6465 6328 7661  eturn str2dec(va
+00008540: 6c75 6529 2e72 6570 6c61 6365 2822 2e22  lue).replace("."
+00008550: 2c20 7365 6c66 2e64 6f74 290a 0a0a 6465  , self.dot)...de
+00008560: 6620 6973 5f65 6d70 7479 2876 616c 7565  f is_empty(value
+00008570: 2c20 656d 7074 795f 7265 6765 783d 4e6f  , empty_regex=No
+00008580: 6e65 293a 0a20 2020 205f 7661 6c75 6520  ne):.    _value 
+00008590: 3d20 7661 6c75 650a 2020 2020 2222 2274  = value.    """t
+000085a0: 6573 7420 656d 7074 7920 6669 656c 6422  est empty field"
+000085b0: 2222 0a20 2020 2069 6620 6973 696e 7374  "".    if isinst
+000085c0: 616e 6365 2876 616c 7565 2c20 2873 7472  ance(value, (str
+000085d0: 2c20 756e 6963 6f64 6554 2929 3a0a 2020  , unicodeT)):.  
+000085e0: 2020 2020 2020 7661 6c75 6520 3d20 7661        value = va
+000085f0: 6c75 652e 7374 7269 7028 290a 2020 2020  lue.strip().    
+00008600: 2020 2020 6966 2065 6d70 7479 5f72 6567      if empty_reg
+00008610: 6578 2069 7320 6e6f 7420 4e6f 6e65 2061  ex is not None a
+00008620: 6e64 2065 6d70 7479 5f72 6567 6578 2e6d  nd empty_regex.m
+00008630: 6174 6368 2876 616c 7565 293a 0a20 2020  atch(value):.   
+00008640: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+00008650: 2022 220a 2020 2020 6966 2076 616c 7565   "".    if value
+00008660: 2069 7320 4e6f 6e65 206f 7220 7661 6c75   is None or valu
+00008670: 6520 3d3d 2022 2220 6f72 2076 616c 7565  e == "" or value
+00008680: 203d 3d20 6222 2220 6f72 2076 616c 7565   == b"" or value
+00008690: 203d 3d20 5b5d 3a0a 2020 2020 2020 2020   == []:.        
+000086a0: 7265 7475 726e 2028 5f76 616c 7565 2c20  return (_value, 
+000086b0: 5472 7565 290a 2020 2020 7265 7475 726e  True).    return
+000086c0: 2028 5f76 616c 7565 2c20 4661 6c73 6529   (_value, False)
+000086d0: 0a0a 0a63 6c61 7373 2049 535f 4e4f 545f  ...class IS_NOT_
+000086e0: 454d 5054 5928 5661 6c69 6461 746f 7229  EMPTY(Validator)
+000086f0: 3a0a 2020 2020 2222 220a 2020 2020 4578  :.    """.    Ex
+00008700: 616d 706c 653a 0a20 2020 2020 2020 2055  ample:.        U
+00008710: 7365 6420 6173 3a3a 0a0a 2020 2020 2020  sed as::..      
+00008720: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
+00008730: 653d 2774 6578 7427 2c20 5f6e 616d 653d  e='text', _name=
+00008740: 276e 616d 6527 2c20 7265 7175 6972 6573  'name', requires
+00008750: 3d49 535f 4e4f 545f 454d 5054 5928 2929  =IS_NOT_EMPTY())
+00008760: 0a0a 2020 2020 2020 2020 2020 2020 3e3e  ..            >>
+00008770: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2829  > IS_NOT_EMPTY()
+00008780: 2831 290a 2020 2020 2020 2020 2020 2020  (1).            
+00008790: 2831 2c20 4e6f 6e65 290a 2020 2020 2020  (1, None).      
+000087a0: 2020 2020 2020 3e3e 3e20 4953 5f4e 4f54        >>> IS_NOT
+000087b0: 5f45 4d50 5459 2829 2830 290a 2020 2020  _EMPTY()(0).    
+000087c0: 2020 2020 2020 2020 2830 2c20 4e6f 6e65          (0, None
+000087d0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000087e0: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2829  > IS_NOT_EMPTY()
+000087f0: 2827 7827 290a 2020 2020 2020 2020 2020  ('x').          
+00008800: 2020 2827 7827 2c20 4e6f 6e65 290a 2020    ('x', None).  
+00008810: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
+00008820: 5f4e 4f54 5f45 4d50 5459 2829 2827 2078  _NOT_EMPTY()(' x
+00008830: 2027 290a 2020 2020 2020 2020 2020 2020   ').            
+00008840: 2827 7827 2c20 4e6f 6e65 290a 2020 2020  ('x', None).    
+00008850: 2020 2020 2020 2020 3e3e 3e20 4953 5f4e          >>> IS_N
+00008860: 4f54 5f45 4d50 5459 2829 284e 6f6e 6529  OT_EMPTY()(None)
+00008870: 0a20 2020 2020 2020 2020 2020 2028 4e6f  .            (No
+00008880: 6e65 2c20 2765 6e74 6572 2061 2076 616c  ne, 'enter a val
+00008890: 7565 2729 0a20 2020 2020 2020 2020 2020  ue').           
+000088a0: 203e 3e3e 2049 535f 4e4f 545f 454d 5054   >>> IS_NOT_EMPT
+000088b0: 5928 2928 2727 290a 2020 2020 2020 2020  Y()('').        
+000088c0: 2020 2020 2827 272c 2027 656e 7465 7220      ('', 'enter 
+000088d0: 6120 7661 6c75 6527 290a 2020 2020 2020  a value').      
+000088e0: 2020 2020 2020 3e3e 3e20 4953 5f4e 4f54        >>> IS_NOT
+000088f0: 5f45 4d50 5459 2829 2827 2020 2729 0a20  _EMPTY()('  '). 
+00008900: 2020 2020 2020 2020 2020 2028 2727 2c20             ('', 
+00008910: 2765 6e74 6572 2061 2076 616c 7565 2729  'enter a value')
+00008920: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00008930: 2049 535f 4e4f 545f 454d 5054 5928 2928   IS_NOT_EMPTY()(
+00008940: 2720 5c5c 6e5c 5c74 2729 0a20 2020 2020  ' \\n\\t').     
+00008950: 2020 2020 2020 2028 2727 2c20 2765 6e74         ('', 'ent
+00008960: 6572 2061 2076 616c 7565 2729 0a20 2020  er a value').   
+00008970: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00008980: 4e4f 545f 454d 5054 5928 2928 5b5d 290a  NOT_EMPTY()([]).
+00008990: 2020 2020 2020 2020 2020 2020 285b 5d2c              ([],
+000089a0: 2027 656e 7465 7220 6120 7661 6c75 6527   'enter a value'
+000089b0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000089c0: 3e20 4953 5f4e 4f54 5f45 4d50 5459 2865  > IS_NOT_EMPTY(e
+000089d0: 6d70 7479 5f72 6567 6578 3d27 6465 6627  mpty_regex='def'
+000089e0: 2928 2764 6566 2729 0a20 2020 2020 2020  )('def').       
+000089f0: 2020 2020 2028 2727 2c20 2765 6e74 6572       ('', 'enter
+00008a00: 2061 2076 616c 7565 2729 0a20 2020 2020   a value').     
+00008a10: 2020 2020 2020 203e 3e3e 2049 535f 4e4f         >>> IS_NO
+00008a20: 545f 454d 5054 5928 656d 7074 795f 7265  T_EMPTY(empty_re
+00008a30: 6765 783d 2764 655b 6667 5d27 2928 2764  gex='de[fg]')('d
+00008a40: 6567 2729 0a20 2020 2020 2020 2020 2020  eg').           
+00008a50: 2028 2727 2c20 2765 6e74 6572 2061 2076   ('', 'enter a v
+00008a60: 616c 7565 2729 0a20 2020 2020 2020 2020  alue').         
+00008a70: 2020 203e 3e3e 2049 535f 4e4f 545f 454d     >>> IS_NOT_EM
+00008a80: 5054 5928 656d 7074 795f 7265 6765 783d  PTY(empty_regex=
+00008a90: 2764 6566 2729 2827 6162 6327 290a 2020  'def')('abc').  
+00008aa0: 2020 2020 2020 2020 2020 2827 6162 6327            ('abc'
+00008ab0: 2c20 4e6f 6e65 290a 2020 2020 2222 220a  , None).    """.
+00008ac0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00008ad0: 5f28 7365 6c66 2c20 6572 726f 725f 6d65  _(self, error_me
+00008ae0: 7373 6167 653d 2245 6e74 6572 2061 2076  ssage="Enter a v
+00008af0: 616c 7565 222c 2065 6d70 7479 5f72 6567  alue", empty_reg
+00008b00: 6578 3d4e 6f6e 6529 3a0a 2020 2020 2020  ex=None):.      
+00008b10: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
+00008b20: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
+00008b30: 7361 6765 0a20 2020 2020 2020 2069 6620  sage.        if 
+00008b40: 656d 7074 795f 7265 6765 7820 6973 206e  empty_regex is n
+00008b50: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00008b60: 2020 2020 2073 656c 662e 656d 7074 795f       self.empty_
+00008b70: 7265 6765 7820 3d20 7265 2e63 6f6d 7069  regex = re.compi
+00008b80: 6c65 2865 6d70 7479 5f72 6567 6578 290a  le(empty_regex).
+00008b90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00008ba0: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
+00008bb0: 6d70 7479 5f72 6567 6578 203d 204e 6f6e  mpty_regex = Non
+00008bc0: 650a 0a20 2020 2064 6566 2076 616c 6964  e..    def valid
+00008bd0: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
+00008be0: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
+00008bf0: 3a0a 2020 2020 2020 2020 7661 6c75 652c  :.        value,
+00008c00: 2065 6d70 7479 203d 2069 735f 656d 7074   empty = is_empt
+00008c10: 7928 7661 6c75 652c 2065 6d70 7479 5f72  y(value, empty_r
+00008c20: 6567 6578 3d73 656c 662e 656d 7074 795f  egex=self.empty_
+00008c30: 7265 6765 7829 0a20 2020 2020 2020 2069  regex).        i
+00008c40: 6620 656d 7074 793a 0a20 2020 2020 2020  f empty:.       
+00008c50: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00008c60: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
+00008c70: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
+00008c80: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
+00008c90: 2020 2020 2020 2020 7265 7475 726e 2076          return v
+00008ca0: 616c 7565 0a0a 0a63 6c61 7373 2049 535f  alue...class IS_
+00008cb0: 5341 4645 2856 616c 6964 6174 6f72 293a  SAFE(Validator):
+00008cc0: 0a20 2020 2022 2222 0a20 2020 2045 7861  .    """.    Exa
+00008cd0: 6d70 6c65 3a0a 2020 2020 2020 2020 5573  mple:.        Us
+00008ce0: 6564 2061 733a 3a0a 0a20 2020 2020 2020  ed as::..       
+00008cf0: 2020 2020 2046 6965 6c64 2822 6874 6d6c       Field("html
+00008d00: 222c 2027 7465 7874 272c 2072 6571 7569  ", 'text', requi
+00008d10: 7265 733d 4953 5f53 4146 4528 2929 0a0a  res=IS_SAFE())..
+00008d20: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00008d30: 4953 5f53 4146 4528 2928 223c 6469 763e  IS_SAFE()("<div>
+00008d40: 3c2f 6469 763e 2229 0a20 2020 2020 2020  </div>").       
+00008d50: 2020 2020 2028 223c 6469 763e 3c2f 6469       ("<div></di
+00008d60: 763e 2c20 4e6f 6e65 290a 2020 2020 2020  v>, None).      
+00008d70: 2020 2020 2020 3e3e 3e20 6672 6f6d 2070        >>> from p
+00008d80: 7934 7765 6220 696d 706f 7274 2058 4d4c  y4web import XML
+00008d90: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00008da0: 2073 616e 6974 697a 6572 203d 206c 616d   sanitizer = lam
+00008db0: 6264 6120 7465 7874 3a20 584d 4c28 7465  bda text: XML(te
+00008dc0: 7874 2c20 7361 6e69 7469 7a65 3d54 7275  xt, sanitize=Tru
+00008dd0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00008de0: 3e3e 2049 535f 5341 4645 2873 616e 6974  >> IS_SAFE(sanit
+00008df0: 697a 6572 2c20 6d6f 6465 3d22 6572 726f  izer, mode="erro
+00008e00: 7222 2928 223c 7363 7269 7074 3e3c 2f73  r")("<script></s
+00008e10: 6372 6970 743e 2229 0a20 2020 2020 2020  cript>").       
+00008e20: 2020 2020 2028 223c 7363 7269 7074 3e3c       ("<script><
+00008e30: 2f73 6372 6970 743e 222c 2022 556e 7361  /script>", "Unsa
+00008e40: 6665 2043 6f6e 7465 6e74 2229 0a20 2020  fe Content").   
+00008e50: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00008e60: 5341 4645 2873 616e 6974 697a 6572 2c20  SAFE(sanitizer, 
+00008e70: 6e6f 6465 3d22 7361 6e69 7469 7a65 2229  node="sanitize")
+00008e80: 2822 3c73 6372 6970 743e 3c2f 7363 7269  ("<script></scri
+00008e90: 7074 3e22 290a 2020 2020 2020 2020 2020  pt>").          
+00008ea0: 2020 2822 222c 204e 6f6e 6529 0a20 2020    ("", None).   
+00008eb0: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+00008ec0: 696e 6974 5f5f 2873 656c 662c 2073 616e  init__(self, san
+00008ed0: 6974 697a 6572 3d4e 6f6e 652c 2065 7272  itizer=None, err
+00008ee0: 6f72 5f6d 6573 7361 6765 3d22 556e 7361  or_message="Unsa
+00008ef0: 6665 2043 6f6e 7465 6e74 222c 206d 6f64  fe Content", mod
+00008f00: 653d 2265 7272 6f72 2229 3a0a 2020 2020  e="error"):.    
+00008f10: 2020 2020 7365 6c66 2e73 616e 6974 697a      self.sanitiz
+00008f20: 6572 203d 2073 616e 6974 697a 6572 206f  er = sanitizer o
+00008f30: 7220 4953 5f53 4146 452e 6465 6661 756c  r IS_SAFE.defaul
+00008f40: 745f 7361 6e69 7469 7a65 720a 2020 2020  t_sanitizer.    
+00008f50: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+00008f60: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
+00008f70: 6573 7361 6765 0a20 2020 2020 2020 2073  essage.        s
+00008f80: 656c 662e 6d6f 6465 203d 206d 6f64 650a  elf.mode = mode.
+00008f90: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+00008fa0: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00008fb0: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+00008fc0: 2020 2020 2020 2020 7361 6e69 7469 7a65          sanitize
+00008fd0: 645f 7661 6c75 6520 3d20 7365 6c66 2e73  d_value = self.s
+00008fe0: 616e 6974 697a 6572 2876 616c 7565 290a  anitizer(value).
+00008ff0: 2020 2020 2020 2020 6966 2073 616e 6974          if sanit
+00009000: 697a 6564 5f76 616c 7565 2021 3d20 7661  ized_value != va
+00009010: 6c75 6520 616e 6420 7365 6c66 2e6d 6f64  lue and self.mod
+00009020: 6520 3d3d 2022 6572 726f 7222 3a0a 2020  e == "error":.  
+00009030: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00009040: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+00009050: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+00009060: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+00009070: 6765 2929 0a20 2020 2020 2020 2072 6574  ge)).        ret
+00009080: 7572 6e20 7361 6e69 7469 7a65 645f 7661  urn sanitized_va
+00009090: 6c75 650a 0a20 2020 2064 6566 6175 6c74  lue..    default
+000090a0: 5f72 6567 6578 203d 2072 652e 636f 6d70  _regex = re.comp
+000090b0: 696c 6528 0a20 2020 2020 2020 2072 2228  ile(.        r"(
+000090c0: 3c5c 732a 2f3f 2873 6372 6970 747c 656d  <\s*/?(script|em
+000090d0: 6265 647c 6f62 6a65 6374 7c69 6672 616d  bed|object|ifram
+000090e0: 657c 7465 7874 6172 6561 7c69 6e70 7574  e|textarea|input
+000090f0: 7c62 7574 746f 6e29 2e2a 3e29 7c28 3c5b  |button).*>)|(<[
+00009100: 5e3e 5d2b 206f 6e5c 772b 5b5e 3e5d 2b3e  ^>]+ on\w+[^>]+>
+00009110: 2922 2c0a 2020 2020 2020 2020 7265 2e49  )",.        re.I
+00009120: 474e 4f52 4543 4153 4520 7c20 7265 2e44  GNORECASE | re.D
+00009130: 4f54 414c 4c2c 0a20 2020 2029 0a0a 2020  OTALL,.    )..  
+00009140: 2020 4073 7461 7469 636d 6574 686f 640a    @staticmethod.
+00009150: 2020 2020 6465 6620 6465 6661 756c 745f      def default_
+00009160: 7361 6e69 7469 7a65 7228 7465 7874 293a  sanitizer(text):
+00009170: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009180: 4953 5f53 4146 452e 6465 6661 756c 745f  IS_SAFE.default_
+00009190: 7265 6765 782e 7375 6228 2222 2c20 7465  regex.sub("", te
+000091a0: 7874 290a 0a0a 636c 6173 7320 4953 5f41  xt)...class IS_A
+000091b0: 4c50 4841 4e55 4d45 5249 4328 4953 5f4d  LPHANUMERIC(IS_M
+000091c0: 4154 4348 293a 0a20 2020 2022 2222 0a20  ATCH):.    """. 
+000091d0: 2020 2045 7861 6d70 6c65 3a0a 2020 2020     Example:.    
+000091e0: 2020 2020 5573 6564 2061 733a 3a0a 0a20      Used as::.. 
+000091f0: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
+00009200: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
+00009210: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
+00009220: 7569 7265 733d 4953 5f41 4c50 4841 4e55  uires=IS_ALPHANU
+00009230: 4d45 5249 4328 2929 0a0a 2020 2020 2020  MERIC())..      
+00009240: 2020 2020 2020 3e3e 3e20 4953 5f41 4c50        >>> IS_ALP
+00009250: 4841 4e55 4d45 5249 4328 2928 2731 2729  HANUMERIC()('1')
+00009260: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
+00009270: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00009280: 2020 2020 203e 3e3e 2049 535f 414c 5048       >>> IS_ALPH
+00009290: 414e 554d 4552 4943 2829 2827 2729 0a20  ANUMERIC()(''). 
+000092a0: 2020 2020 2020 2020 2020 2028 2727 2c20             ('', 
+000092b0: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+000092c0: 2020 3e3e 3e20 4953 5f41 4c50 4841 4e55    >>> IS_ALPHANU
+000092d0: 4d45 5249 4328 2928 2741 5f61 2729 0a20  MERIC()('A_a'). 
+000092e0: 2020 2020 2020 2020 2020 2028 2741 5f61             ('A_a
+000092f0: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00009300: 2020 2020 203e 3e3e 2049 535f 414c 5048       >>> IS_ALPH
+00009310: 414e 554d 4552 4943 2829 2827 2127 290a  ANUMERIC()('!').
+00009320: 2020 2020 2020 2020 2020 2020 2827 2127              ('!'
+00009330: 2c20 2765 6e74 6572 206f 6e6c 7920 6c65  , 'enter only le
+00009340: 7474 6572 732c 206e 756d 6265 7273 2c20  tters, numbers, 
+00009350: 616e 6420 756e 6465 7273 636f 7265 2729  and underscore')
+00009360: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+00009370: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00009380: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+00009390: 456e 7465 7220 6f6e 6c79 206c 6574 7465  Enter only lette
+000093a0: 7273 2c20 6e75 6d62 6572 732c 2061 6e64  rs, numbers, and
+000093b0: 2075 6e64 6572 7363 6f72 6522 293a 0a20   underscore"):. 
+000093c0: 2020 2020 2020 2049 535f 4d41 5443 482e         IS_MATCH.
+000093d0: 5f5f 696e 6974 5f5f 2873 656c 662c 2072  __init__(self, r
+000093e0: 225e 5b5c 775d 2a24 222c 2065 7272 6f72  "^[\w]*$", error
+000093f0: 5f6d 6573 7361 6765 290a 0a0a 636c 6173  _message)...clas
+00009400: 7320 4953 5f45 4d41 494c 2856 616c 6964  s IS_EMAIL(Valid
+00009410: 6174 6f72 293a 0a0a 2020 2020 2222 220a  ator):..    """.
+00009420: 2020 2020 4368 6563 6b73 2069 6620 6669      Checks if fi
+00009430: 656c 6427 7320 7661 6c75 6520 6973 2061  eld's value is a
+00009440: 2076 616c 6964 2065 6d61 696c 2061 6464   valid email add
+00009450: 7265 7373 2e20 4361 6e20 6265 2073 6574  ress. Can be set
+00009460: 2074 6f20 6469 7361 6c6c 6f77 0a20 2020   to disallow.   
+00009470: 206f 7220 666f 7263 6520 6164 6472 6573   or force addres
+00009480: 7365 7320 6672 6f6d 2063 6572 7461 696e  ses from certain
+00009490: 2064 6f6d 6169 6e28 7329 2e0a 0a20 2020   domain(s)...   
+000094a0: 2045 6d61 696c 2072 6567 6578 2061 6461   Email regex ada
+000094b0: 7074 6564 2066 726f 6d0a 2020 2020 6874  pted from.    ht
+000094c0: 7470 3a2f 2f68 6161 636b 6564 2e63 6f6d  tp://haacked.com
+000094d0: 2f61 7263 6869 7665 2f32 3030 372f 3038  /archive/2007/08
+000094e0: 2f32 312f 692d 6b6e 6577 2d68 6f77 2d74  /21/i-knew-how-t
+000094f0: 6f2d 7661 6c69 6461 7465 2d61 6e2d 656d  o-validate-an-em
+00009500: 6169 6c2d 6164 6472 6573 732d 756e 7469  ail-address-unti
+00009510: 6c2d 692e 6173 7078 2c0a 2020 2020 6765  l-i.aspx,.    ge
+00009520: 6e65 7261 6c6c 7920 666f 6c6c 6f77 696e  nerally followin
+00009530: 6720 7468 6520 5246 4373 2c20 6578 6365  g the RFCs, exce
+00009540: 7074 2074 6861 7420 7765 2064 6973 616c  pt that we disal
+00009550: 6c6f 7720 7175 6f74 6564 2073 7472 696e  low quoted strin
+00009560: 6773 0a20 2020 2061 6e64 2070 6572 6d69  gs.    and permi
+00009570: 7420 756e 6465 7273 636f 7265 7320 616e  t underscores an
+00009580: 6420 6c65 6164 696e 6720 6e75 6d65 7269  d leading numeri
+00009590: 6373 2069 6e20 7375 6264 6f6d 6169 6e20  cs in subdomain 
+000095a0: 6c61 6265 6c73 0a0a 2020 2020 4172 6773  labels..    Args
+000095b0: 3a0a 2020 2020 2020 2020 6261 6e6e 6564  :.        banned
+000095c0: 3a20 7265 6765 7820 7465 7874 2066 6f72  : regex text for
+000095d0: 2064 6973 616c 6c6f 7765 6420 6164 6472   disallowed addr
+000095e0: 6573 7320 646f 6d61 696e 730a 2020 2020  ess domains.    
+000095f0: 2020 2020 666f 7263 6564 3a20 7265 6765      forced: rege
+00009600: 7820 7465 7874 2066 6f72 2072 6571 7569  x text for requi
+00009610: 7265 6420 6164 6472 6573 7320 646f 6d61  red address doma
+00009620: 696e 730a 0a20 2020 2042 6f74 6820 6172  ins..    Both ar
+00009630: 6775 6d65 6e74 7320 6361 6e20 616c 736f  guments can also
+00009640: 2062 6520 6375 7374 6f6d 206f 626a 6563   be custom objec
+00009650: 7473 2077 6974 6820 6120 6d61 7463 6828  ts with a match(
+00009660: 7661 6c75 6529 206d 6574 686f 642e 0a0a  value) method...
+00009670: 2020 2020 4578 616d 706c 653a 0a20 2020      Example:.   
+00009680: 2020 2020 2043 6865 636b 2066 6f72 2076       Check for v
+00009690: 616c 6964 2065 6d61 696c 2061 6464 7265  alid email addre
+000096a0: 7373 3a3a 0a0a 2020 2020 2020 2020 2020  ss::..          
+000096b0: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
+000096c0: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
+000096d0: 6527 2c0a 2020 2020 2020 2020 2020 2020  e',.            
+000096e0: 2020 2020 7265 7175 6972 6573 3d49 535f      requires=IS_
+000096f0: 454d 4149 4c28 2929 0a0a 2020 2020 2020  EMAIL())..      
+00009700: 2020 4368 6563 6b20 666f 7220 7661 6c69    Check for vali
+00009710: 6420 656d 6169 6c20 6164 6472 6573 7320  d email address 
+00009720: 7468 6174 2063 616e 2774 2062 6520 6672  that can't be fr
+00009730: 6f6d 2061 202e 636f 6d20 646f 6d61 696e  om a .com domain
+00009740: 3a3a 0a0a 2020 2020 2020 2020 2020 2020  ::..            
+00009750: 494e 5055 5428 5f74 7970 653d 2774 6578  INPUT(_type='tex
+00009760: 7427 2c20 5f6e 616d 653d 276e 616d 6527  t', _name='name'
+00009770: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00009780: 2020 7265 7175 6972 6573 3d49 535f 454d    requires=IS_EM
+00009790: 4149 4c28 6261 6e6e 6564 3d27 5e2e 2a5c  AIL(banned='^.*\
+000097a0: 5c2e 636f 6d28 7c5c 5c2e 2e2a 2924 2729  \.com(|\\..*)$')
+000097b0: 290a 0a20 2020 2020 2020 2043 6865 636b  )..        Check
+000097c0: 2066 6f72 2076 616c 6964 2065 6d61 696c   for valid email
+000097d0: 2061 6464 7265 7373 2074 6861 7420 6d75   address that mu
+000097e0: 7374 2062 6520 6672 6f6d 2061 202e 6564  st be from a .ed
+000097f0: 7520 646f 6d61 696e 3a3a 0a0a 2020 2020  u domain::..    
+00009800: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00009810: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00009820: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
+00009830: 2020 2020 2020 2020 2020 7265 7175 6972            requir
+00009840: 6573 3d49 535f 454d 4149 4c28 666f 7263  es=IS_EMAIL(forc
+00009850: 6564 3d27 5e2e 2a5c 5c2e 6564 7528 7c5c  ed='^.*\\.edu(|\
+00009860: 5c2e 2e2a 2924 2729 290a 0a20 2020 2020  \..*)$'))..     
+00009870: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009880: 4149 4c28 2928 2761 4062 2e63 6f6d 2729  AIL()('a@b.com')
+00009890: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
+000098a0: 4062 2e63 6f6d 272c 204e 6f6e 6529 0a20  @b.com', None). 
+000098b0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+000098c0: 535f 454d 4149 4c28 2928 2761 6263 4064  S_EMAIL()('abc@d
+000098d0: 6566 2e63 6f6d 2729 0a20 2020 2020 2020  ef.com').       
+000098e0: 2020 2020 2028 2761 6263 4064 6566 2e63       ('abc@def.c
+000098f0: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00009900: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
+00009910: 4149 4c28 2928 2761 6263 4033 6465 662e  AIL()('abc@3def.
+00009920: 636f 6d27 290a 2020 2020 2020 2020 2020  com').          
+00009930: 2020 2827 6162 6340 3364 6566 2e63 6f6d    ('abc@3def.com
+00009940: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00009950: 2020 2020 203e 3e3e 2049 535f 454d 4149       >>> IS_EMAI
+00009960: 4c28 2928 2761 6263 4064 6566 2e75 7327  L()('abc@def.us'
+00009970: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00009980: 6162 6340 6465 662e 7573 272c 204e 6f6e  abc@def.us', Non
+00009990: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+000099a0: 3e3e 2049 535f 454d 4149 4c28 2928 2761  >> IS_EMAIL()('a
+000099b0: 6263 4064 5f2d 662e 7573 2729 0a20 2020  bc@d_-f.us').   
+000099c0: 2020 2020 2020 2020 2028 2761 6263 4064           ('abc@d
+000099d0: 5f2d 662e 7573 272c 204e 6f6e 6529 0a20  _-f.us', None). 
+000099e0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+000099f0: 535f 454d 4149 4c28 2928 2740 6465 662e  S_EMAIL()('@def.
+00009a00: 636f 6d27 2920 2020 2020 2020 2020 2020  com')           
+00009a10: 2320 6d69 7373 696e 6720 6e61 6d65 0a20  # missing name. 
+00009a20: 2020 2020 2020 2020 2020 2028 2740 6465             ('@de
+00009a30: 662e 636f 6d27 2c20 2765 6e74 6572 2061  f.com', 'enter a
+00009a40: 2076 616c 6964 2065 6d61 696c 2061 6464   valid email add
+00009a50: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
+00009a60: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
+00009a70: 2928 2722 6162 6340 6465 6622 2e63 6f6d  )('"abc@def".com
+00009a80: 2729 2020 2020 2020 2320 7175 6f74 6564  ')      # quoted
+00009a90: 206e 616d 650a 2020 2020 2020 2020 2020   name.          
+00009aa0: 2020 2827 2261 6263 4064 6566 222e 636f    ('"abc@def".co
+00009ab0: 6d27 2c20 2765 6e74 6572 2061 2076 616c  m', 'enter a val
+00009ac0: 6964 2065 6d61 696c 2061 6464 7265 7373  id email address
+00009ad0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+00009ae0: 3e3e 2049 535f 454d 4149 4c28 2928 2761  >> IS_EMAIL()('a
+00009af0: 6263 2b64 6566 2e63 6f6d 2729 2020 2020  bc+def.com')    
+00009b00: 2020 2020 2320 6e6f 2040 0a20 2020 2020      # no @.     
+00009b10: 2020 2020 2020 2028 2761 6263 2b64 6566         ('abc+def
+00009b20: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
+00009b30: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
+00009b40: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00009b50: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
+00009b60: 2827 6162 6340 6465 662e 7827 2920 2020  ('abc@def.x')   
+00009b70: 2020 2020 2020 2023 206f 6e65 2d63 6861         # one-cha
+00009b80: 7220 544c 440a 2020 2020 2020 2020 2020  r TLD.          
+00009b90: 2020 2827 6162 6340 6465 662e 7827 2c20    ('abc@def.x', 
+00009ba0: 2765 6e74 6572 2061 2076 616c 6964 2065  'enter a valid e
+00009bb0: 6d61 696c 2061 6464 7265 7373 2729 0a20  mail address'). 
+00009bc0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00009bd0: 535f 454d 4149 4c28 2928 2761 6263 4064  S_EMAIL()('abc@d
+00009be0: 6566 2e31 3227 2920 2020 2020 2020 2020  ef.12')         
+00009bf0: 2320 6e75 6d65 7269 6320 544c 440a 2020  # numeric TLD.  
+00009c00: 2020 2020 2020 2020 2020 2827 6162 6340            ('abc@
+00009c10: 6465 662e 3132 272c 2027 656e 7465 7220  def.12', 'enter 
+00009c20: 6120 7661 6c69 6420 656d 6169 6c20 6164  a valid email ad
+00009c30: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+00009c40: 2020 2020 3e3e 3e20 4953 5f45 4d41 494c      >>> IS_EMAIL
+00009c50: 2829 2827 6162 6340 6465 662e 2e63 6f6d  ()('abc@def..com
+00009c60: 2729 2020 2020 2020 2023 2064 6f75 626c  ')       # doubl
+00009c70: 652d 646f 7420 696e 2064 6f6d 6169 6e0a  e-dot in domain.
+00009c80: 2020 2020 2020 2020 2020 2020 2827 6162              ('ab
+00009c90: 6340 6465 662e 2e63 6f6d 272c 2027 656e  c@def..com', 'en
+00009ca0: 7465 7220 6120 7661 6c69 6420 656d 6169  ter a valid emai
+00009cb0: 6c20 6164 6472 6573 7327 290a 2020 2020  l address').    
+00009cc0: 2020 2020 2020 2020 3e3e 3e20 4953 5f45          >>> IS_E
+00009cd0: 4d41 494c 2829 2827 6162 6340 2e64 6566  MAIL()('abc@.def
+00009ce0: 2e63 6f6d 2729 2020 2020 2020 2023 2064  .com')       # d
+00009cf0: 6f74 2073 7461 7274 7320 646f 6d61 696e  ot starts domain
+00009d00: 0a20 2020 2020 2020 2020 2020 2028 2761  .            ('a
+00009d10: 6263 402e 6465 662e 636f 6d27 2c20 2765  bc@.def.com', 'e
 00009d20: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
 00009d30: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
 00009d40: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00009d50: 454d 4149 4c28 2928 2749 6d61 2e46 6f6f  EMAIL()('Ima.Foo
-00009d60: 6c40 6578 616d 706c 652e 636f 6d27 290a  l@example.com').
-00009d70: 2020 2020 2020 2020 2020 2020 2827 496d              ('Im
-00009d80: 612e 466f 6f6c 4065 7861 6d70 6c65 2e63  a.Fool@example.c
-00009d90: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
-00009da0: 2020 2020 2020 203e 3e3e 2049 535f 454d         >>> IS_EM
-00009db0: 4149 4c28 2928 2749 6d61 2046 6f6f 6c40  AIL()('Ima Fool@
-00009dc0: 6578 616d 706c 652e 636f 6d27 2920 2020  example.com')   
-00009dd0: 2020 2320 7370 6163 6520 696e 206e 616d    # space in nam
-00009de0: 650a 2020 2020 2020 2020 2020 2020 2827  e.            ('
-00009df0: 496d 6120 466f 6f6c 4065 7861 6d70 6c65  Ima Fool@example
-00009e00: 2e63 6f6d 272c 2027 656e 7465 7220 6120  .com', 'enter a 
-00009e10: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
-00009e20: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
-00009e30: 2020 3e3e 3e20 4953 5f45 4d41 494c 2829    >>> IS_EMAIL()
-00009e40: 2827 6c6f 6361 6c67 7579 406c 6f63 616c  ('localguy@local
-00009e50: 686f 7374 2729 2020 2020 2020 2023 206c  host')       # l
-00009e60: 6f63 616c 686f 7374 2061 7320 646f 6d61  ocalhost as doma
-00009e70: 696e 0a20 2020 2020 2020 2020 2020 2028  in.            (
-00009e80: 276c 6f63 616c 6775 7940 6c6f 6361 6c68  'localguy@localh
-00009e90: 6f73 7427 2c20 4e6f 6e65 290a 0a20 2020  ost', None)..   
-00009ea0: 2022 2222 0a0a 2020 2020 2320 4e4f 5445   """..    # NOTE
-00009eb0: 3a20 7573 6520 7468 6573 6520 7769 7468  : use these with
-00009ec0: 2066 6c61 6773 203d 2072 652e 5645 5242   flags = re.VERB
-00009ed0: 4f53 4520 7c20 7265 2e49 474e 4f52 4543  OSE | re.IGNOREC
-00009ee0: 4153 450a 2020 2020 5245 4745 585f 424f  ASE.    REGEX_BO
-00009ef0: 4459 203d 2072 2222 220a 2020 2020 2020  DY = r""".      
-00009f00: 2020 5e28 3f21 5c2e 2920 2020 2020 2020    ^(?!\.)       
-00009f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f20: 2020 2020 2320 6e61 6d65 206d 6179 206e      # name may n
-00009f30: 6f74 2062 6567 696e 2077 6974 6820 6120  ot begin with a 
-00009f40: 646f 740a 2020 2020 2020 2020 280a 2020  dot.        (.  
-00009f50: 2020 2020 2020 2020 5b2d 612d 7a30 2d39          [-a-z0-9
-00009f60: 215c 2324 2526 272a 2b2f 3d3f 5e5f 607b  !\#$%&'*+/=?^_`{
-00009f70: 7c7d 7e5d 2020 2020 2320 616c 6c20 6c65  |}~]    # all le
-00009f80: 6761 6c20 6368 6172 6163 7465 7273 2065  gal characters e
-00009f90: 7863 6570 7420 646f 740a 2020 2020 2020  xcept dot.      
-00009fa0: 2020 2020 7c0a 2020 2020 2020 2020 2020      |.          
-00009fb0: 283f 3c21 5c2e 295c 2e20 2020 2020 2020  (?<!\.)\.       
-00009fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fd0: 2320 7369 6e67 6c65 2064 6f74 7320 6f6e  # single dots on
-00009fe0: 6c79 0a20 2020 2020 2020 2029 2b0a 2020  ly.        )+.  
-00009ff0: 2020 2020 2020 283f 3c21 5c2e 2924 2020        (?<!\.)$  
-0000a000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a010: 2020 2020 2020 2020 2320 6e61 6d65 206d          # name m
-0000a020: 6179 206e 6f74 2065 6e64 2077 6974 6820  ay not end with 
-0000a030: 6120 646f 740a 2020 2020 2222 220a 2020  a dot.    """.  
-0000a040: 2020 5245 4745 585f 444f 4d41 494e 203d    REGEX_DOMAIN =
-0000a050: 2072 2222 220a 2020 2020 2020 2020 280a   r""".        (.
-0000a060: 2020 2020 2020 2020 2020 6c6f 6361 6c68            localh
-0000a070: 6f73 740a 2020 2020 2020 2020 2020 7c0a  ost.          |.
-0000a080: 2020 2020 2020 2020 2020 280a 2020 2020            (.    
-0000a090: 2020 2020 2020 2020 5b61 2d7a 302d 395d          [a-z0-9]
-0000a0a0: 2020 2020 2020 2320 5b73 7562 5d64 6f6d        # [sub]dom
-0000a0b0: 6169 6e20 6265 6769 6e73 2077 6974 6820  ain begins with 
-0000a0c0: 616c 7068 616e 756d 6572 6963 0a20 2020  alphanumeric.   
-0000a0d0: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
-0000a0e0: 2020 2020 2020 2020 205b 2d5c 775d 2a20           [-\w]* 
-0000a0f0: 2020 2020 2023 2061 6c70 6861 6e75 6d65       # alphanume
-0000a100: 7269 632c 2075 6e64 6572 7363 6f72 652c  ric, underscore,
-0000a110: 2064 6f74 2c20 6879 7068 656e 0a20 2020   dot, hyphen.   
-0000a120: 2020 2020 2020 2020 2020 205b 612d 7a30             [a-z0
-0000a130: 2d39 5d20 2020 2023 2065 6e64 696e 6720  -9]    # ending 
-0000a140: 616c 7068 616e 756d 6572 6963 0a20 2020  alphanumeric.   
-0000a150: 2020 2020 2020 2020 2029 3f0a 2020 2020           )?.    
-0000a160: 2020 2020 2020 5c2e 2020 2020 2020 2020        \.        
-0000a170: 2020 2020 2020 2320 656e 6469 6e67 2064        # ending d
-0000a180: 6f74 0a20 2020 2020 2020 2020 2029 2b0a  ot.          )+.
-0000a190: 2020 2020 2020 2020 2020 5b61 2d7a 5d7b            [a-z]{
-0000a1a0: 322c 7d20 2020 2020 2020 2320 544c 4420  2,}       # TLD 
-0000a1b0: 616c 7068 612d 6f6e 6c79 0a20 2020 2020  alpha-only.     
-0000a1c0: 2020 2924 0a20 2020 2022 2222 0a20 2020    )$.    """.   
-0000a1d0: 2023 2072 6567 6578 5f70 726f 706f 7365   # regex_propose
-0000a1e0: 645f 6275 745f 6661 696c 6564 203d 2072  d_but_failed = r
-0000a1f0: 652e 636f 6d70 696c 6528 7227 5e28 5b5c  e.compile(r'^([\
-0000a200: 775c 215c 2324 5c25 5c26 5c27 5c2a 5c2b  w\!\#$\%\&\'\*\+
-0000a210: 5c2d 5c2f 5c3d 5c3f 5c5e 5c60 7b5c 7c5c  \-\/\=\?\^\`{\|\
-0000a220: 7d5c 7e5d 2b5c 2e29 2a5b 5c77 5c21 5c23  }\~]+\.)*[\w\!\#
-0000a230: 245c 255c 265c 275c 2a5c 2b5c 2d5c 2f5c  $\%\&\'\*\+\-\/\
-0000a240: 3d5c 3f5c 5e5c 607b 5c7c 5c7d 5c7e 5d2b  =\?\^\`{\|\}\~]+
-0000a250: 4028 2828 2828 5b61 2d7a 302d 395d 7b31  @((((([a-z0-9]{1
-0000a260: 7d5b 612d 7a30 2d39 5c2d 5d7b 302c 3632  }[a-z0-9\-]{0,62
-0000a270: 7d5b 612d 7a30 2d39 5d7b 317d 297c 5b61  }[a-z0-9]{1})|[a
-0000a280: 2d7a 5d29 5c2e 292b 5b61 2d7a 5d7b 322c  -z])\.)+[a-z]{2,
-0000a290: 367d 297c 285c 647b 312c 337d 5c2e 297b  6})|(\d{1,3}\.){
-0000a2a0: 337d 5c64 7b31 2c33 7d28 5c3a 5c64 7b31  3}\d{1,3}(\:\d{1
-0000a2b0: 2c35 7d29 3f29 2427 2c20 7265 2e56 4552  ,5})?)$', re.VER
-0000a2c0: 424f 5345 207c 2072 652e 4947 4e4f 5245  BOSE | re.IGNORE
-0000a2d0: 4341 5345 290a 0a20 2020 2064 6566 205f  CASE)..    def _
-0000a2e0: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-0000a2f0: 2073 656c 662c 2062 616e 6e65 643d 4e6f   self, banned=No
-0000a300: 6e65 2c20 666f 7263 6564 3d4e 6f6e 652c  ne, forced=None,
-0000a310: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
-0000a320: 456e 7465 7220 6120 7661 6c69 6420 656d  Enter a valid em
-0000a330: 6169 6c20 6164 6472 6573 7322 0a20 2020  ail address".   
-0000a340: 2029 3a0a 2020 2020 2020 2020 6966 2069   ):.        if i
-0000a350: 7369 6e73 7461 6e63 6528 6261 6e6e 6564  sinstance(banned
-0000a360: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
-0000a370: 2020 2020 6261 6e6e 6564 203d 2072 652e      banned = re.
-0000a380: 636f 6d70 696c 6528 6261 6e6e 6564 290a  compile(banned).
-0000a390: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-0000a3a0: 7461 6e63 6528 666f 7263 6564 2c20 7374  tance(forced, st
-0000a3b0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0000a3c0: 666f 7263 6564 203d 2072 652e 636f 6d70  forced = re.comp
-0000a3d0: 696c 6528 666f 7263 6564 290a 2020 2020  ile(forced).    
-0000a3e0: 2020 2020 7365 6c66 2e62 616e 6e65 6420      self.banned 
-0000a3f0: 3d20 6261 6e6e 6564 0a20 2020 2020 2020  = banned.       
-0000a400: 2073 656c 662e 666f 7263 6564 203d 2066   self.forced = f
-0000a410: 6f72 6365 640a 2020 2020 2020 2020 7365  orced.        se
-0000a420: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-0000a430: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
-0000a440: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-0000a450: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-0000a460: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-0000a470: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
-0000a480: 2020 2020 2020 2020 2020 6e6f 7420 2869            not (i
-0000a490: 7369 6e73 7461 6e63 6528 7661 6c75 652c  sinstance(value,
-0000a4a0: 2028 6261 7365 7374 7269 6e67 2c20 756e   (basestring, un
-0000a4b0: 6963 6f64 6554 2929 290a 2020 2020 2020  icodeT))).      
-0000a4c0: 2020 2020 2020 6f72 206e 6f74 2076 616c        or not val
-0000a4d0: 7565 0a20 2020 2020 2020 2020 2020 206f  ue.            o
-0000a4e0: 7220 2240 2220 6e6f 7420 696e 2076 616c  r "@" not in val
-0000a4f0: 7565 0a20 2020 2020 2020 2029 3a0a 2020  ue.        ):.  
-0000a500: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000a510: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
-0000a520: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-0000a530: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-0000a540: 6765 2929 0a0a 2020 2020 2020 2020 626f  ge))..        bo
-0000a550: 6479 2c20 646f 6d61 696e 203d 2076 616c  dy, domain = val
-0000a560: 7565 2e72 7370 6c69 7428 2240 222c 2031  ue.rsplit("@", 1
-0000a570: 290a 0a20 2020 2020 2020 2074 7279 3a0a  )..        try:.
-0000a580: 2020 2020 2020 2020 2020 2020 7265 6765              rege
-0000a590: 785f 666c 6167 7320 3d20 7265 2e56 4552  x_flags = re.VER
-0000a5a0: 424f 5345 207c 2072 652e 4947 4e4f 5245  BOSE | re.IGNORE
-0000a5b0: 4341 5345 0a20 2020 2020 2020 2020 2020  CASE.           
-0000a5c0: 206d 6174 6368 5f62 6f64 7920 3d20 7265   match_body = re
-0000a5d0: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
-0000a5e0: 585f 424f 4459 2c20 626f 6479 2c20 7265  X_BODY, body, re
-0000a5f0: 6765 785f 666c 6167 7329 0a20 2020 2020  gex_flags).     
-0000a600: 2020 2020 2020 206d 6174 6368 5f64 6f6d         match_dom
-0000a610: 6169 6e20 3d20 7265 2e6d 6174 6368 2873  ain = re.match(s
-0000a620: 656c 662e 5245 4745 585f 444f 4d41 494e  elf.REGEX_DOMAIN
-0000a630: 2c20 646f 6d61 696e 2c20 7265 6765 785f  , domain, regex_
-0000a640: 666c 6167 7329 0a0a 2020 2020 2020 2020  flags)..        
-0000a650: 2020 2020 6966 206e 6f74 206d 6174 6368      if not match
-0000a660: 5f64 6f6d 6169 6e3a 0a20 2020 2020 2020  _domain:.       
-0000a670: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-0000a680: 2066 6f72 2049 6e74 6572 6e61 7469 6f6e   for Internation
-0000a690: 616c 697a 6564 2044 6f6d 6169 6e20 4e61  alized Domain Na
-0000a6a0: 6d65 730a 2020 2020 2020 2020 2020 2020  mes.            
-0000a6b0: 2020 2020 2320 7365 6520 6874 7470 733a      # see https:
-0000a6c0: 2f2f 646f 6373 2e70 7974 686f 6e2e 6f72  //docs.python.or
-0000a6d0: 672f 322f 6c69 6272 6172 792f 636f 6465  g/2/library/code
-0000a6e0: 6373 2e68 746d 6c23 6d6f 6475 6c65 2d65  cs.html#module-e
-0000a6f0: 6e63 6f64 696e 6773 2e69 646e 610a 2020  ncodings.idna.  
-0000a700: 2020 2020 2020 2020 2020 2020 2020 646f                do
-0000a710: 6d61 696e 5f65 6e63 6f64 6564 203d 2074  main_encoded = t
-0000a720: 6f5f 756e 6963 6f64 6528 646f 6d61 696e  o_unicode(domain
-0000a730: 292e 656e 636f 6465 2822 6964 6e61 2229  ).encode("idna")
-0000a740: 2e64 6563 6f64 6528 2261 7363 6969 2229  .decode("ascii")
-0000a750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000a760: 206d 6174 6368 5f64 6f6d 6169 6e20 3d20   match_domain = 
-0000a770: 7265 2e6d 6174 6368 2873 656c 662e 5245  re.match(self.RE
-0000a780: 4745 585f 444f 4d41 494e 2c20 646f 6d61  GEX_DOMAIN, doma
-0000a790: 696e 5f65 6e63 6f64 6564 2c20 7265 6765  in_encoded, rege
-0000a7a0: 785f 666c 6167 7329 0a0a 2020 2020 2020  x_flags)..      
-0000a7b0: 2020 2020 2020 6d61 7463 6820 3d20 286d        match = (m
-0000a7c0: 6174 6368 5f62 6f64 7920 6973 206e 6f74  atch_body is not
-0000a7d0: 204e 6f6e 6529 2061 6e64 2028 6d61 7463   None) and (matc
-0000a7e0: 685f 646f 6d61 696e 2069 7320 6e6f 7420  h_domain is not 
-0000a7f0: 4e6f 6e65 290a 2020 2020 2020 2020 6578  None).        ex
-0000a800: 6365 7074 2028 5479 7065 4572 726f 722c  cept (TypeError,
-0000a810: 2055 6e69 636f 6465 4572 726f 7229 3a0a   UnicodeError):.
-0000a820: 2020 2020 2020 2020 2020 2020 2320 5661              # Va
-0000a830: 6c75 6520 6d61 7920 6e6f 7420 6265 2061  lue may not be a
-0000a840: 2073 7472 696e 6720 7768 6572 6520 7765   string where we
-0000a850: 2063 616e 206c 6f6f 6b20 666f 7220 6d61   can look for ma
-0000a860: 7463 6865 732e 0a20 2020 2020 2020 2020  tches..         
-0000a870: 2020 2023 2045 7861 6d70 6c65 3a20 7765     # Example: we
-0000a880: 2772 6520 6361 6c6c 696e 6720 414e 595f  're calling ANY_
-0000a890: 4f46 2066 6f72 6d61 7474 6572 2061 6e64  OF formatter and
-0000a8a0: 2049 535f 454d 4149 4c20 6973 2061 736b   IS_EMAIL is ask
-0000a8b0: 6564 2074 6f20 7661 6c69 6461 7465 2061  ed to validate a
-0000a8c0: 2064 6174 652e 0a20 2020 2020 2020 2020   date..         
-0000a8d0: 2020 206d 6174 6368 203d 204e 6f6e 650a     match = None.
-0000a8e0: 2020 2020 2020 2020 6966 206d 6174 6368          if match
-0000a8f0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0000a900: 2028 6e6f 7420 7365 6c66 2e62 616e 6e65   (not self.banne
-0000a910: 6420 6f72 206e 6f74 2073 656c 662e 6261  d or not self.ba
-0000a920: 6e6e 6564 2e6d 6174 6368 2864 6f6d 6169  nned.match(domai
-0000a930: 6e29 2920 616e 6420 280a 2020 2020 2020  n)) and (.      
-0000a940: 2020 2020 2020 2020 2020 6e6f 7420 7365            not se
-0000a950: 6c66 2e66 6f72 6365 6420 6f72 2073 656c  lf.forced or sel
-0000a960: 662e 666f 7263 6564 2e6d 6174 6368 2864  f.forced.match(d
-0000a970: 6f6d 6169 6e29 0a20 2020 2020 2020 2020  omain).         
-0000a980: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-0000a990: 2020 2020 2020 7265 7475 726e 2076 616c        return val
-0000a9a0: 7565 0a20 2020 2020 2020 2072 6169 7365  ue.        raise
-0000a9b0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-0000a9c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-0000a9d0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-0000a9e0: 6167 6529 290a 0a0a 636c 6173 7320 4953  age))...class IS
-0000a9f0: 5f4c 4953 545f 4f46 5f45 4d41 494c 5328  _LIST_OF_EMAILS(
-0000aa00: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
-0000aa10: 2222 220a 2020 2020 4578 616d 706c 653a  """.    Example:
-0000aa20: 0a20 2020 2020 2020 2055 7365 6420 6173  .        Used as
-0000aa30: 3a3a 0a0a 2020 2020 2020 2020 4669 656c  ::..        Fiel
-0000aa40: 6428 2765 6d61 696c 7327 2c20 276c 6973  d('emails', 'lis
-0000aa50: 743a 7374 7269 6e67 272c 0a20 2020 2020  t:string',.     
-0000aa60: 2020 2020 2020 2020 2077 6964 6765 743d           widget=
-0000aa70: 5351 4c46 4f52 4d2e 7769 6467 6574 732e  SQLFORM.widgets.
-0000aa80: 7465 7874 2e77 6964 6765 742c 0a20 2020  text.widget,.   
-0000aa90: 2020 2020 2020 2020 2020 2072 6571 7569             requi
-0000aaa0: 7265 733d 4953 5f4c 4953 545f 4f46 5f45  res=IS_LIST_OF_E
-0000aab0: 4d41 494c 5328 292c 0a20 2020 2020 2020  MAILS(),.       
-0000aac0: 2020 2020 2020 2072 6570 7265 7365 6e74         represent
-0000aad0: 3d6c 616d 6264 6120 762c 2072 3a20 5c0a  =lambda v, r: \.
-0000aae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aaf0: 584d 4c28 272c 2027 2e6a 6f69 6e28 5b41  XML(', '.join([A
-0000ab00: 2878 2c20 5f68 7265 663d 276d 6169 6c74  (x, _href='mailt
-0000ab10: 6f3a 272b 7829 2e78 6d6c 2829 2066 6f72  o:'+x).xml() for
-0000ab20: 2078 2069 6e20 2876 206f 7220 5b5d 295d   x in (v or [])]
-0000ab30: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
-0000ab40: 290a 2020 2020 2222 220a 0a20 2020 2052  ).    """..    R
-0000ab50: 4547 4558 5f4e 4f54 5f45 4d41 494c 5f53  EGEX_NOT_EMAIL_S
-0000ab60: 504c 4954 5445 5220 3d20 7222 5b5e 2c3b  PLITTER = r"[^,;
-0000ab70: 5c73 5d2b 220a 0a20 2020 2064 6566 205f  \s]+"..    def _
-0000ab80: 5f69 6e69 745f 5f28 7365 6c66 2c20 6572  _init__(self, er
-0000ab90: 726f 725f 6d65 7373 6167 653d 2249 6e76  ror_message="Inv
-0000aba0: 616c 6964 2065 6d61 696c 733a 2025 7322  alid emails: %s"
-0000abb0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-0000abc0: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
-0000abd0: 6572 726f 725f 6d65 7373 6167 650a 0a20  error_message.. 
-0000abe0: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
-0000abf0: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
-0000ac00: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
-0000ac10: 2020 2020 2020 6261 645f 656d 6169 6c73        bad_emails
-0000ac20: 203d 205b 5d0a 2020 2020 2020 2020 6620   = [].        f 
-0000ac30: 3d20 4953 5f45 4d41 494c 2829 0a20 2020  = IS_EMAIL().   
-0000ac40: 2020 2020 2066 6f72 2065 6d61 696c 2069       for email i
-0000ac50: 6e20 7265 2e66 696e 6461 6c6c 2873 656c  n re.findall(sel
-0000ac60: 662e 5245 4745 585f 4e4f 545f 454d 4149  f.REGEX_NOT_EMAI
-0000ac70: 4c5f 5350 4c49 5454 4552 2c20 7661 6c75  L_SPLITTER, valu
-0000ac80: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-0000ac90: 6572 726f 7220 3d20 6628 656d 6169 6c29  error = f(email)
-0000aca0: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-0000acb0: 6966 2065 7272 6f72 2061 6e64 2065 6d61  if error and ema
-0000acc0: 696c 206e 6f74 2069 6e20 6261 645f 656d  il not in bad_em
-0000acd0: 6169 6c73 3a0a 2020 2020 2020 2020 2020  ails:.          
-0000ace0: 2020 2020 2020 6261 645f 656d 6169 6c73        bad_emails
-0000acf0: 2e61 7070 656e 6428 656d 6169 6c29 0a20  .append(email). 
-0000ad00: 2020 2020 2020 2069 6620 6261 645f 656d         if bad_em
-0000ad10: 6169 6c73 3a0a 2020 2020 2020 2020 2020  ails:.          
-0000ad20: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-0000ad30: 6f6e 4572 726f 7228 0a20 2020 2020 2020  onError(.       
-0000ad40: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0000ad50: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
-0000ad60: 726f 725f 6d65 7373 6167 6529 2025 2022  ror_message) % "
-0000ad70: 2c20 222e 6a6f 696e 2862 6164 5f65 6d61  , ".join(bad_ema
-0000ad80: 696c 7329 0a20 2020 2020 2020 2020 2020  ils).           
-0000ad90: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
-0000ada0: 6e20 7661 6c75 650a 0a20 2020 2064 6566  n value..    def
-0000adb0: 2066 6f72 6d61 7474 6572 2873 656c 662c   formatter(self,
-0000adc0: 2076 616c 7565 2c20 726f 773d 4e6f 6e65   value, row=None
-0000add0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-0000ade0: 6e20 222c 2022 2e6a 6f69 6e28 7661 6c75  n ", ".join(valu
-0000adf0: 6520 6f72 205b 5d29 0a0a 0a23 2055 524c  e or [])...# URL
-0000ae00: 2073 6368 656d 6520 736f 7572 6365 3a0a   scheme source:.
-0000ae10: 2320 3c68 7474 703a 2f2f 656e 2e77 696b  # <http://en.wik
-0000ae20: 6970 6564 6961 2e6f 7267 2f77 696b 692f  ipedia.org/wiki/
-0000ae30: 5552 495f 7363 6865 6d65 3e20 6f62 7461  URI_scheme> obta
-0000ae40: 696e 6564 206f 6e20 3230 3038 2d4e 6f76  ined on 2008-Nov
-0000ae50: 2d31 300a 0a6f 6666 6963 6961 6c5f 7572  -10..official_ur
-0000ae60: 6c5f 7363 6865 6d65 7320 3d20 5b0a 2020  l_schemes = [.  
-0000ae70: 2020 2261 6161 222c 0a20 2020 2022 6161    "aaa",.    "aa
-0000ae80: 6173 222c 0a20 2020 2022 6163 6170 222c  as",.    "acap",
-0000ae90: 0a20 2020 2022 6361 7022 2c0a 2020 2020  .    "cap",.    
-0000aea0: 2263 6964 222c 0a20 2020 2022 6372 6964  "cid",.    "crid
-0000aeb0: 222c 0a20 2020 2022 6461 7461 222c 0a20  ",.    "data",. 
-0000aec0: 2020 2022 6461 7622 2c0a 2020 2020 2264     "dav",.    "d
-0000aed0: 6963 7422 2c0a 2020 2020 2264 6e73 222c  ict",.    "dns",
-0000aee0: 0a20 2020 2022 6661 7822 2c0a 2020 2020  .    "fax",.    
-0000aef0: 2266 696c 6522 2c0a 2020 2020 2266 7470  "file",.    "ftp
-0000af00: 222c 0a20 2020 2022 676f 222c 0a20 2020  ",.    "go",.   
-0000af10: 2022 676f 7068 6572 222c 0a20 2020 2022   "gopher",.    "
-0000af20: 6833 3233 222c 0a20 2020 2022 6874 7470  h323",.    "http
-0000af30: 222c 0a20 2020 2022 6874 7470 7322 2c0a  ",.    "https",.
-0000af40: 2020 2020 2269 6361 7022 2c0a 2020 2020      "icap",.    
-0000af50: 2269 6d22 2c0a 2020 2020 2269 6d61 7022  "im",.    "imap"
-0000af60: 2c0a 2020 2020 2269 6e66 6f22 2c0a 2020  ,.    "info",.  
-0000af70: 2020 2269 7070 222c 0a20 2020 2022 6972    "ipp",.    "ir
-0000af80: 6973 222c 0a20 2020 2022 6972 6973 2e62  is",.    "iris.b
-0000af90: 6565 7022 2c0a 2020 2020 2269 7269 732e  eep",.    "iris.
-0000afa0: 7870 6322 2c0a 2020 2020 2269 7269 732e  xpc",.    "iris.
-0000afb0: 7870 6373 222c 0a20 2020 2022 6972 6973  xpcs",.    "iris
-0000afc0: 2e6c 7773 222c 0a20 2020 2022 6c64 6170  .lws",.    "ldap
-0000afd0: 222c 0a20 2020 2022 6d61 696c 746f 222c  ",.    "mailto",
-0000afe0: 0a20 2020 2022 6d69 6422 2c0a 2020 2020  .    "mid",.    
-0000aff0: 226d 6f64 656d 222c 0a20 2020 2022 6d73  "modem",.    "ms
-0000b000: 7270 222c 0a20 2020 2022 6d73 7270 7322  rp",.    "msrps"
-0000b010: 2c0a 2020 2020 226d 7471 7022 2c0a 2020  ,.    "mtqp",.  
-0000b020: 2020 226d 7570 6461 7465 222c 0a20 2020    "mupdate",.   
-0000b030: 2022 6e65 7773 222c 0a20 2020 2022 6e66   "news",.    "nf
-0000b040: 7322 2c0a 2020 2020 226e 6e74 7022 2c0a  s",.    "nntp",.
-0000b050: 2020 2020 226f 7061 7175 656c 6f63 6b74      "opaquelockt
-0000b060: 6f6b 656e 222c 0a20 2020 2022 706f 7022  oken",.    "pop"
-0000b070: 2c0a 2020 2020 2270 7265 7322 2c0a 2020  ,.    "pres",.  
-0000b080: 2020 2270 726f 7370 6572 6f22 2c0a 2020    "prospero",.  
-0000b090: 2020 2272 7473 7022 2c0a 2020 2020 2273    "rtsp",.    "s
-0000b0a0: 6572 7669 6365 222c 0a20 2020 2022 7368  ervice",.    "sh
-0000b0b0: 7474 7022 2c0a 2020 2020 2273 6970 222c  ttp",.    "sip",
-0000b0c0: 0a20 2020 2022 7369 7073 222c 0a20 2020  .    "sips",.   
-0000b0d0: 2022 736e 6d70 222c 0a20 2020 2022 736f   "snmp",.    "so
-0000b0e0: 6170 2e62 6565 7022 2c0a 2020 2020 2273  ap.beep",.    "s
-0000b0f0: 6f61 702e 6265 6570 7322 2c0a 2020 2020  oap.beeps",.    
-0000b100: 2274 6167 222c 0a20 2020 2022 7465 6c22  "tag",.    "tel"
-0000b110: 2c0a 2020 2020 2274 656c 6e65 7422 2c0a  ,.    "telnet",.
-0000b120: 2020 2020 2274 6674 7022 2c0a 2020 2020      "tftp",.    
-0000b130: 2274 6869 736d 6573 7361 6765 222c 0a20  "thismessage",. 
-0000b140: 2020 2022 7469 7022 2c0a 2020 2020 2274     "tip",.    "t
-0000b150: 7622 2c0a 2020 2020 2275 726e 222c 0a20  v",.    "urn",. 
-0000b160: 2020 2022 7665 6d6d 6922 2c0a 2020 2020     "vemmi",.    
-0000b170: 2277 6169 7322 2c0a 2020 2020 2278 6d6c  "wais",.    "xml
-0000b180: 7270 632e 6265 6570 222c 0a20 2020 2022  rpc.beep",.    "
-0000b190: 786d 6c72 7063 2e62 6565 7022 2c0a 2020  xmlrpc.beep",.  
-0000b1a0: 2020 2278 6d70 7022 2c0a 2020 2020 227a    "xmpp",.    "z
-0000b1b0: 3339 2e35 3072 222c 0a20 2020 2022 7a33  39.50r",.    "z3
-0000b1c0: 392e 3530 7322 2c0a 5d0a 756e 6f66 6669  9.50s",.].unoffi
-0000b1d0: 6369 616c 5f75 726c 5f73 6368 656d 6573  cial_url_schemes
-0000b1e0: 203d 205b 0a20 2020 2022 6162 6f75 7422   = [.    "about"
-0000b1f0: 2c0a 2020 2020 2261 6469 756d 7874 7261  ,.    "adiumxtra
-0000b200: 222c 0a20 2020 2022 6169 6d22 2c0a 2020  ",.    "aim",.  
-0000b210: 2020 2261 6670 222c 0a20 2020 2022 6177    "afp",.    "aw
-0000b220: 222c 0a20 2020 2022 6361 6c6c 746f 222c  ",.    "callto",
-0000b230: 0a20 2020 2022 6368 726f 6d65 222c 0a20  .    "chrome",. 
-0000b240: 2020 2022 6376 7322 2c0a 2020 2020 2265     "cvs",.    "e
-0000b250: 6432 6b22 2c0a 2020 2020 2266 6565 6422  d2k",.    "feed"
-0000b260: 2c0a 2020 2020 2266 6973 6822 2c0a 2020  ,.    "fish",.  
-0000b270: 2020 2267 6722 2c0a 2020 2020 2267 697a    "gg",.    "giz
-0000b280: 6d6f 7072 6f6a 6563 7422 2c0a 2020 2020  moproject",.    
-0000b290: 2269 6178 3222 2c0a 2020 2020 2269 7263  "iax2",.    "irc
-0000b2a0: 222c 0a20 2020 2022 6972 6373 222c 0a20  ",.    "ircs",. 
-0000b2b0: 2020 2022 6974 6d73 222c 0a20 2020 2022     "itms",.    "
-0000b2c0: 6a61 7222 2c0a 2020 2020 226a 6176 6173  jar",.    "javas
-0000b2d0: 6372 6970 7422 2c0a 2020 2020 226b 6579  cript",.    "key
-0000b2e0: 7061 7263 222c 0a20 2020 2022 6c61 7374  parc",.    "last
-0000b2f0: 666d 222c 0a20 2020 2022 6c64 6170 7322  fm",.    "ldaps"
-0000b300: 2c0a 2020 2020 226d 6167 6e65 7422 2c0a  ,.    "magnet",.
-0000b310: 2020 2020 226d 6d73 222c 0a20 2020 2022      "mms",.    "
-0000b320: 6d73 6e69 6d22 2c0a 2020 2020 226d 766e  msnim",.    "mvn
-0000b330: 222c 0a20 2020 2022 6e6f 7465 7322 2c0a  ",.    "notes",.
-0000b340: 2020 2020 226e 7366 7722 2c0a 2020 2020      "nsfw",.    
-0000b350: 2270 7379 6322 2c0a 2020 2020 2270 6170  "psyc",.    "pap
-0000b360: 6172 617a 7a69 3a68 7474 7022 2c0a 2020  arazzi:http",.  
-0000b370: 2020 2272 6d69 222c 0a20 2020 2022 7273    "rmi",.    "rs
-0000b380: 796e 6322 2c0a 2020 2020 2273 6563 6f6e  ync",.    "secon
-0000b390: 646c 6966 6522 2c0a 2020 2020 2273 676e  dlife",.    "sgn
-0000b3a0: 222c 0a20 2020 2022 736b 7970 6522 2c0a  ",.    "skype",.
-0000b3b0: 2020 2020 2273 7368 222c 0a20 2020 2022      "ssh",.    "
-0000b3c0: 7366 7470 222c 0a20 2020 2022 736d 6222  sftp",.    "smb"
-0000b3d0: 2c0a 2020 2020 2273 6d73 222c 0a20 2020  ,.    "sms",.   
-0000b3e0: 2022 736f 6c64 6174 222c 0a20 2020 2022   "soldat",.    "
-0000b3f0: 7374 6561 6d22 2c0a 2020 2020 2273 766e  steam",.    "svn
-0000b400: 222c 0a20 2020 2022 7465 616d 7370 6561  ",.    "teamspea
-0000b410: 6b22 2c0a 2020 2020 2275 6e72 6561 6c22  k",.    "unreal"
-0000b420: 2c0a 2020 2020 2275 7432 3030 3422 2c0a  ,.    "ut2004",.
-0000b430: 2020 2020 2276 656e 7472 696c 6f22 2c0a      "ventrilo",.
-0000b440: 2020 2020 2276 6965 772d 736f 7572 6365      "view-source
-0000b450: 222c 0a20 2020 2022 7765 6263 616c 222c  ",.    "webcal",
-0000b460: 0a20 2020 2022 7779 6369 7779 6722 2c0a  .    "wyciwyg",.
-0000b470: 2020 2020 2278 6669 7265 222c 0a20 2020      "xfire",.   
-0000b480: 2022 7872 6922 2c0a 2020 2020 2279 6d73   "xri",.    "yms
-0000b490: 6772 222c 0a5d 0a61 6c6c 5f75 726c 5f73  gr",.].all_url_s
-0000b4a0: 6368 656d 6573 203d 205b 4e6f 6e65 5d20  chemes = [None] 
-0000b4b0: 2b20 6f66 6669 6369 616c 5f75 726c 5f73  + official_url_s
-0000b4c0: 6368 656d 6573 202b 2075 6e6f 6666 6963  chemes + unoffic
-0000b4d0: 6961 6c5f 7572 6c5f 7363 6865 6d65 730a  ial_url_schemes.
-0000b4e0: 6874 7470 5f73 6368 656d 6573 203d 205b  http_schemes = [
-0000b4f0: 4e6f 6e65 2c20 2268 7474 7022 2c20 2268  None, "http", "h
-0000b500: 7474 7073 225d 0a0a 2320 4465 6669 6e65  ttps"]..# Define
-0000b510: 6420 696e 2052 4643 2033 3439 302c 2053  d in RFC 3490, S
-0000b520: 6563 7469 6f6e 2033 2e31 2c20 5265 7175  ection 3.1, Requ
-0000b530: 6972 656d 656e 7420 2331 0a23 2055 7365  irement #1.# Use
-0000b540: 2074 6869 7320 7265 6765 7820 746f 2073   this regex to s
-0000b550: 706c 6974 2074 6865 2061 7574 686f 7269  plit the authori
-0000b560: 7479 2063 6f6d 706f 6e65 6e74 206f 6620  ty component of 
-0000b570: 6120 756e 6963 6f64 6520 5552 4c20 696e  a unicode URL in
-0000b580: 746f 0a23 2069 7473 2063 6f6d 706f 6e65  to.# its compone
-0000b590: 6e74 206c 6162 656c 730a 5245 4745 585f  nt labels.REGEX_
-0000b5a0: 4155 5448 4f52 4954 595f 5350 4c49 5454  AUTHORITY_SPLITT
-0000b5b0: 4552 203d 2022 5b5c 7530 3032 655c 7533  ER = "[\u002e\u3
-0000b5c0: 3030 325c 7566 6630 655c 7566 6636 315d  002\uff0e\uff61]
-0000b5d0: 220a 0a0a 6465 6620 6573 6361 7065 5f75  "...def escape_u
-0000b5e0: 6e69 636f 6465 2873 7472 696e 6729 3a0a  nicode(string):.
-0000b5f0: 2020 2020 2222 220a 2020 2020 436f 6e76      """.    Conv
-0000b600: 6572 7473 2061 2075 6e69 636f 6465 2073  erts a unicode s
-0000b610: 7472 696e 6720 696e 746f 2055 532d 4153  tring into US-AS
-0000b620: 4349 492c 2075 7369 6e67 2061 2073 696d  CII, using a sim
-0000b630: 706c 6520 636f 6e76 6572 7369 6f6e 2073  ple conversion s
-0000b640: 6368 656d 652e 0a20 2020 2045 6163 6820  cheme..    Each 
-0000b650: 756e 6963 6f64 6520 6368 6172 6163 7465  unicode characte
-0000b660: 7220 7468 6174 2064 6f65 7320 6e6f 7420  r that does not 
-0000b670: 6861 7665 2061 2055 532d 4153 4349 4920  have a US-ASCII 
-0000b680: 6571 7569 7661 6c65 6e74 2069 730a 2020  equivalent is.  
-0000b690: 2020 636f 6e76 6572 7465 6420 696e 746f    converted into
-0000b6a0: 2061 2055 524c 2065 7363 6170 6564 2066   a URL escaped f
-0000b6b0: 6f72 6d20 6261 7365 6420 6f6e 2069 7473  orm based on its
-0000b6c0: 2068 6578 6164 6563 696d 616c 2076 616c   hexadecimal val
-0000b6d0: 7565 2e0a 2020 2020 466f 7220 6578 616d  ue..    For exam
-0000b6e0: 706c 652c 2074 6865 2075 6e69 636f 6465  ple, the unicode
-0000b6f0: 2063 6861 7261 6374 6572 2027 5c5c 7534   character '\\u4
-0000b700: 6538 3627 2077 696c 6c20 6265 636f 6d65  e86' will become
-0000b710: 2074 6865 2073 7472 696e 6720 2725 3465   the string '%4e
-0000b720: 2538 3627 0a0a 2020 2020 4172 6773 3a0a  %86'..    Args:.
-0000b730: 2020 2020 2020 2020 7374 7269 6e67 3a20          string: 
-0000b740: 756e 6963 6f64 6520 7374 7269 6e67 2c20  unicode string, 
-0000b750: 7468 6520 756e 6963 6f64 6520 7374 7269  the unicode stri
-0000b760: 6e67 2074 6f20 636f 6e76 6572 7420 696e  ng to convert in
-0000b770: 746f 2061 6e0a 2020 2020 2020 2020 2020  to an.          
-0000b780: 2020 6573 6361 7065 6420 5553 2d41 5343    escaped US-ASC
-0000b790: 4949 2066 6f72 6d0a 0a20 2020 2052 6574  II form..    Ret
-0000b7a0: 7572 6e73 3a0a 2020 2020 2020 2020 7374  urns:.        st
-0000b7b0: 7269 6e67 3a20 7468 6520 5553 2d41 5343  ring: the US-ASC
-0000b7c0: 4949 2065 7363 6170 6564 2066 6f72 6d20  II escaped form 
-0000b7d0: 6f66 2074 6865 2069 6e70 7574 7465 6420  of the inputted 
-0000b7e0: 7374 7269 6e67 0a0a 2020 2020 4061 7574  string..    @aut
-0000b7f0: 686f 723a 204a 6f6e 6174 6861 6e20 4265  hor: Jonathan Be
-0000b800: 6e6e 0a20 2020 2022 2222 0a20 2020 2072  nn.    """.    r
-0000b810: 6574 7572 6e56 616c 7565 203d 2053 7472  eturnValue = Str
-0000b820: 696e 6749 4f28 290a 0a20 2020 2066 6f72  ingIO()..    for
-0000b830: 2063 6861 7261 6374 6572 2069 6e20 7374   character in st
-0000b840: 7269 6e67 3a0a 2020 2020 2020 2020 636f  ring:.        co
-0000b850: 6465 203d 206f 7264 2863 6861 7261 6374  de = ord(charact
-0000b860: 6572 290a 2020 2020 2020 2020 6966 2063  er).        if c
-0000b870: 6f64 6520 3e20 3078 3746 3a0a 2020 2020  ode > 0x7F:.    
-0000b880: 2020 2020 2020 2020 6865 7843 6f64 6520          hexCode 
-0000b890: 3d20 6865 7828 636f 6465 290a 2020 2020  = hex(code).    
-0000b8a0: 2020 2020 2020 2020 7265 7475 726e 5661          returnVa
-0000b8b0: 6c75 652e 7772 6974 6528 2225 2220 2b20  lue.write("%" + 
-0000b8c0: 6865 7843 6f64 655b 323a 345d 202b 2022  hexCode[2:4] + "
-0000b8d0: 2522 202b 2068 6578 436f 6465 5b34 3a36  %" + hexCode[4:6
-0000b8e0: 5d29 0a20 2020 2020 2020 2065 6c73 653a  ]).        else:
-0000b8f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000b900: 7572 6e56 616c 7565 2e77 7269 7465 2863  urnValue.write(c
-0000b910: 6861 7261 6374 6572 290a 0a20 2020 2072  haracter)..    r
-0000b920: 6574 7572 6e20 7265 7475 726e 5661 6c75  eturn returnValu
-0000b930: 652e 6765 7476 616c 7565 2829 0a0a 0a64  e.getvalue()...d
-0000b940: 6566 2075 6e69 636f 6465 5f74 6f5f 6173  ef unicode_to_as
-0000b950: 6369 695f 6175 7468 6f72 6974 7928 6175  cii_authority(au
-0000b960: 7468 6f72 6974 7929 3a0a 2020 2020 2222  thority):.    ""
-0000b970: 220a 2020 2020 466f 6c6c 6f77 7320 7468  ".    Follows th
-0000b980: 6520 7374 6570 7320 696e 2052 4643 2033  e steps in RFC 3
-0000b990: 3439 302c 2053 6563 7469 6f6e 2034 2074  490, Section 4 t
-0000b9a0: 6f20 636f 6e76 6572 7420 6120 756e 6963  o convert a unic
-0000b9b0: 6f64 6520 6175 7468 6f72 6974 790a 2020  ode authority.  
-0000b9c0: 2020 7374 7269 6e67 2069 6e74 6f20 6974    string into it
-0000b9d0: 7320 4153 4349 4920 6571 7569 7661 6c65  s ASCII equivale
-0000b9e0: 6e74 2e0a 2020 2020 466f 7220 6578 616d  nt..    For exam
-0000b9f0: 706c 652c 2075 2777 7777 2e41 6c6c 6961  ple, u'www.Allia
-0000ba00: 6e63 6566 7261 6e5c 5c78 6537 6169 7365  ncefran\\xe7aise
-0000ba10: 2e6e 7527 2077 696c 6c20 6265 2063 6f6e  .nu' will be con
-0000ba20: 7665 7274 6564 2069 6e74 6f0a 2020 2020  verted into.    
-0000ba30: 2777 7777 2e78 6e2d 2d61 6c6c 6961 6e63  'www.xn--allianc
-0000ba40: 6566 7261 6e61 6973 652d 6e70 622e 6e75  efranaise-npb.nu
-0000ba50: 270a 0a20 2020 2041 7267 733a 0a20 2020  '..    Args:.   
-0000ba60: 2020 2020 2061 7574 686f 7269 7479 3a20       authority: 
-0000ba70: 756e 6963 6f64 6520 7374 7269 6e67 2c20  unicode string, 
-0000ba80: 7468 6520 5552 4c20 6175 7468 6f72 6974  the URL authorit
-0000ba90: 7920 636f 6d70 6f6e 656e 7420 746f 2063  y component to c
-0000baa0: 6f6e 7665 7274 2c0a 2020 2020 2020 2020  onvert,.        
-0000bab0: 2020 2020 652e 672e 2075 2777 7777 2e41      e.g. u'www.A
-0000bac0: 6c6c 6961 6e63 6566 7261 6e5c 5c78 6537  lliancefran\\xe7
-0000bad0: 6169 7365 2e6e 7527 0a0a 2020 2020 5265  aise.nu'..    Re
-0000bae0: 7475 726e 733a 0a20 2020 2020 2020 2073  turns:.        s
-0000baf0: 7472 696e 673a 2074 6865 2055 532d 4153  tring: the US-AS
-0000bb00: 4349 4920 6368 6172 6163 7465 7220 6571  CII character eq
-0000bb10: 7569 7661 6c65 6e74 2074 6f20 7468 6520  uivalent to the 
-0000bb20: 696e 7075 7474 6564 2061 7574 686f 7269  inputted authori
-0000bb30: 7479 2c0a 2020 2020 2020 2020 2020 2020  ty,.            
-0000bb40: 2065 2e67 2e20 2777 7777 2e78 6e2d 2d61   e.g. 'www.xn--a
-0000bb50: 6c6c 6961 6e63 6566 7261 6e61 6973 652d  lliancefranaise-
-0000bb60: 6e70 622e 6e75 270a 0a20 2020 2052 6169  npb.nu'..    Rai
-0000bb70: 7365 733a 0a20 2020 2020 2020 2045 7863  ses:.        Exc
-0000bb80: 6570 7469 6f6e 3a20 6966 2074 6865 2066  eption: if the f
-0000bb90: 756e 6374 696f 6e20 6973 206e 6f74 2061  unction is not a
-0000bba0: 626c 6520 746f 2063 6f6e 7665 7274 2074  ble to convert t
-0000bbb0: 6865 2069 6e70 7574 7465 640a 2020 2020  he inputted.    
-0000bbc0: 2020 2020 2020 2020 6175 7468 6f72 6974          authorit
-0000bbd0: 790a 0a20 2020 2040 6175 7468 6f72 3a20  y..    @author: 
-0000bbe0: 4a6f 6e61 7468 616e 2042 656e 6e0a 2020  Jonathan Benn.  
-0000bbf0: 2020 2222 220a 2020 2020 2320 5246 4320    """.    # RFC 
-0000bc00: 3334 3930 2c20 5365 6374 696f 6e20 342c  3490, Section 4,
-0000bc10: 2053 7465 7020 310a 2020 2020 2320 5468   Step 1.    # Th
-0000bc20: 6520 656e 636f 6469 6e67 732e 6964 6e61  e encodings.idna
-0000bc30: 2050 7974 686f 6e20 6d6f 6475 6c65 2061   Python module a
-0000bc40: 7373 756d 6573 2074 6861 7420 416c 6c6f  ssumes that Allo
-0000bc50: 7755 6e61 7373 6967 6e65 6420 3d3d 2054  wUnassigned == T
-0000bc60: 7275 650a 0a20 2020 2023 2052 4643 2033  rue..    # RFC 3
-0000bc70: 3439 302c 2053 6563 7469 6f6e 2034 2c20  490, Section 4, 
-0000bc80: 5374 6570 2032 0a20 2020 206c 6162 656c  Step 2.    label
-0000bc90: 7320 3d20 7265 2e73 706c 6974 2852 4547  s = re.split(REG
-0000bca0: 4558 5f41 5554 484f 5249 5459 5f53 504c  EX_AUTHORITY_SPL
-0000bcb0: 4954 5445 522c 2061 7574 686f 7269 7479  ITTER, authority
-0000bcc0: 290a 0a20 2020 2023 2052 4643 2033 3439  )..    # RFC 349
-0000bcd0: 302c 2053 6563 7469 6f6e 2034 2c20 5374  0, Section 4, St
-0000bce0: 6570 2033 0a20 2020 2023 2054 6865 2065  ep 3.    # The e
-0000bcf0: 6e63 6f64 696e 6773 2e69 646e 6120 5079  ncodings.idna Py
-0000bd00: 7468 6f6e 206d 6f64 756c 6520 6173 7375  thon module assu
-0000bd10: 6d65 7320 7468 6174 2055 7365 5354 4433  mes that UseSTD3
-0000bd20: 4153 4349 4952 756c 6573 203d 3d20 4661  ASCIIRules == Fa
-0000bd30: 6c73 650a 0a20 2020 2023 2052 4643 2033  lse..    # RFC 3
-0000bd40: 3439 302c 2053 6563 7469 6f6e 2034 2c20  490, Section 4, 
-0000bd50: 5374 6570 2034 0a20 2020 2023 2057 6520  Step 4.    # We 
-0000bd60: 7573 6520 7468 6520 546f 4153 4349 4920  use the ToASCII 
-0000bd70: 6f70 6572 6174 696f 6e20 6265 6361 7573  operation becaus
-0000bd80: 6520 7765 2061 7265 2061 626f 7574 2074  e we are about t
-0000bd90: 6f20 7075 7420 7468 6520 6175 7468 6f72  o put the author
-0000bda0: 6974 790a 2020 2020 2320 696e 746f 2061  ity.    # into a
-0000bdb0: 6e20 4944 4e2d 756e 6177 6172 6520 736c  n IDN-unaware sl
-0000bdc0: 6f74 0a20 2020 2061 7363 6969 4c61 6265  ot.    asciiLabe
-0000bdd0: 6c73 203d 205b 5d0a 2020 2020 666f 7220  ls = [].    for 
-0000bde0: 6c61 6265 6c20 696e 206c 6162 656c 733a  label in labels:
-0000bdf0: 0a20 2020 2020 2020 2069 6620 6c61 6265  .        if labe
-0000be00: 6c3a 0a20 2020 2020 2020 2020 2020 2061  l:.            a
-0000be10: 7363 6969 4c61 6265 6c73 2e61 7070 656e  sciiLabels.appen
-0000be20: 6428 746f 5f6e 6174 6976 6528 656e 636f  d(to_native(enco
-0000be30: 6469 6e67 732e 6964 6e61 2e54 6f41 5343  dings.idna.ToASC
-0000be40: 4949 286c 6162 656c 2929 290a 2020 2020  II(label))).    
-0000be50: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0000be60: 2020 2020 2020 2320 656e 636f 6469 6e67        # encoding
-0000be70: 732e 6964 6e61 2e54 6f41 5343 4949 2064  s.idna.ToASCII d
-0000be80: 6f65 7320 6e6f 7420 6163 6365 7074 2061  oes not accept a
-0000be90: 6e20 656d 7074 7920 7374 7269 6e67 2c20  n empty string, 
-0000bea0: 6275 740a 2020 2020 2020 2020 2020 2020  but.            
-0000beb0: 2320 6974 2069 7320 6e65 6365 7373 6172  # it is necessar
-0000bec0: 7920 666f 7220 7573 2074 6f20 616c 6c6f  y for us to allo
-0000bed0: 7720 666f 7220 656d 7074 7920 6c61 6265  w for empty labe
-0000bee0: 6c73 2073 6f20 7468 6174 2077 650a 2020  ls so that we.  
-0000bef0: 2020 2020 2020 2020 2020 2320 646f 6e27            # don'
-0000bf00: 7420 6d6f 6469 6679 2074 6865 2055 524c  t modify the URL
-0000bf10: 0a20 2020 2020 2020 2020 2020 2061 7363  .            asc
-0000bf20: 6969 4c61 6265 6c73 2e61 7070 656e 6428  iiLabels.append(
-0000bf30: 2222 290a 2020 2020 2320 5246 4320 3334  "").    # RFC 34
-0000bf40: 3930 2c20 5365 6374 696f 6e20 342c 2053  90, Section 4, S
-0000bf50: 7465 7020 350a 2020 2020 7265 7475 726e  tep 5.    return
-0000bf60: 2073 7472 2872 6564 7563 6528 6c61 6d62   str(reduce(lamb
-0000bf70: 6461 2078 2c20 793a 2078 202b 2075 6e69  da x, y: x + uni
-0000bf80: 6368 7228 3078 3030 3245 2920 2b20 792c  chr(0x002E) + y,
-0000bf90: 2061 7363 6969 4c61 6265 6c73 2929 0a0a   asciiLabels))..
-0000bfa0: 0a64 6566 2075 6e69 636f 6465 5f74 6f5f  .def unicode_to_
-0000bfb0: 6173 6369 695f 7572 6c28 7572 6c2c 2070  ascii_url(url, p
-0000bfc0: 7265 7065 6e64 5f73 6368 656d 6529 3a0a  repend_scheme):.
-0000bfd0: 2020 2020 2222 220a 2020 2020 436f 6e76      """.    Conv
-0000bfe0: 6572 7473 2074 6865 2069 6e70 7574 7465  erts the inputte
-0000bff0: 6420 756e 6963 6f64 6520 7572 6c20 696e  d unicode url in
-0000c000: 746f 2061 2055 532d 4153 4349 4920 6571  to a US-ASCII eq
-0000c010: 7569 7661 6c65 6e74 2e20 5468 6973 2066  uivalent. This f
-0000c020: 756e 6374 696f 6e0a 2020 2020 676f 6573  unction.    goes
-0000c030: 2061 206c 6974 746c 6520 6265 796f 6e64   a little beyond
-0000c040: 2052 4643 2033 3439 302c 2077 6869 6368   RFC 3490, which
-0000c050: 2069 7320 6c69 6d69 7465 6420 696e 2073   is limited in s
-0000c060: 636f 7065 2074 6f20 7468 6520 646f 6d61  cope to the doma
-0000c070: 696e 206e 616d 650a 2020 2020 2861 7574  in name.    (aut
-0000c080: 686f 7269 7479 2920 6f6e 6c79 2e20 4865  hority) only. He
-0000c090: 7265 2c20 7468 6520 6675 6e63 7469 6f6e  re, the function
-0000c0a0: 616c 6974 7920 6973 2065 7870 616e 6465  ality is expande
-0000c0b0: 6420 746f 2077 6861 7420 7761 7320 6f62  d to what was ob
-0000c0c0: 7365 7276 6564 0a20 2020 206f 6e20 5769  served.    on Wi
-0000c0d0: 6b69 7065 6469 6120 6f6e 2032 3030 392d  kipedia on 2009-
-0000c0e0: 4a61 6e2d 3232 3a0a 0a20 2020 2020 2020  Jan-22:..       
-0000c0f0: 436f 6d70 6f6e 656e 7420 2020 2043 616e  Component    Can
-0000c100: 2055 7365 2055 6e69 636f 6465 3f0a 2020   Use Unicode?.  
-0000c110: 2020 2020 202d 2d2d 2d2d 2d2d 2d2d 2020       ---------  
-0000c120: 2020 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d    --------------
-0000c130: 2d2d 0a20 2020 2020 2020 7363 6865 6d65  --.       scheme
-0000c140: 2020 2020 2020 204e 6f0a 2020 2020 2020         No.      
-0000c150: 2061 7574 686f 7269 7479 2020 2020 5965   authority    Ye
-0000c160: 730a 2020 2020 2020 2070 6174 6820 2020  s.       path   
-0000c170: 2020 2020 2020 5965 730a 2020 2020 2020        Yes.      
-0000c180: 2071 7565 7279 2020 2020 2020 2020 5965   query        Ye
-0000c190: 730a 2020 2020 2020 2066 7261 676d 656e  s.       fragmen
-0000c1a0: 7420 2020 2020 4e6f 0a0a 2020 2020 5468  t     No..    Th
-0000c1b0: 6520 6175 7468 6f72 6974 7920 636f 6d70  e authority comp
-0000c1c0: 6f6e 656e 7420 6765 7473 2063 6f6e 7665  onent gets conve
-0000c1d0: 7274 6564 2074 6f20 7075 6e79 636f 6465  rted to punycode
-0000c1e0: 2c20 6275 7420 6f63 6375 7272 656e 6365  , but occurrence
-0000c1f0: 7320 6f66 0a20 2020 2075 6e69 636f 6465  s of.    unicode
-0000c200: 2069 6e20 6f74 6865 7220 636f 6d70 6f6e   in other compon
-0000c210: 656e 7473 2067 6574 2063 6f6e 7665 7274  ents get convert
-0000c220: 6564 2069 6e74 6f20 6120 7061 6972 206f  ed into a pair o
-0000c230: 6620 5552 4920 6573 6361 7065 7320 2877  f URI escapes (w
-0000c240: 650a 2020 2020 6173 7375 6d65 2034 2d62  e.    assume 4-b
-0000c250: 7974 6520 756e 6963 6f64 6529 2e20 452e  yte unicode). E.
-0000c260: 672e 2074 6865 2075 6e69 636f 6465 2063  g. the unicode c
-0000c270: 6861 7261 6374 6572 2055 2b34 4532 4420  haracter U+4E2D 
-0000c280: 7769 6c6c 2062 650a 2020 2020 636f 6e76  will be.    conv
-0000c290: 6572 7465 6420 696e 746f 2027 2534 4525  erted into '%4E%
-0000c2a0: 3244 272e 2054 6573 7469 6e67 2077 6974  2D'. Testing wit
-0000c2b0: 6820 4669 7265 666f 7820 7633 2e30 2e35  h Firefox v3.0.5
-0000c2c0: 2068 6173 2073 686f 776e 2074 6861 7420   has shown that 
-0000c2d0: 6974 2063 616e 0a20 2020 2075 6e64 6572  it can.    under
-0000c2e0: 7374 616e 6420 7468 6973 206b 696e 6420  stand this kind 
-0000c2f0: 6f66 2055 5249 2065 6e63 6f64 696e 672e  of URI encoding.
-0000c300: 0a0a 2020 2020 4172 6773 3a0a 2020 2020  ..    Args:.    
-0000c310: 2020 2020 7572 6c3a 2075 6e69 636f 6465      url: unicode
-0000c320: 2073 7472 696e 672c 2074 6865 2055 524c   string, the URL
-0000c330: 2074 6f20 636f 6e76 6572 7420 6672 6f6d   to convert from
-0000c340: 2075 6e69 636f 6465 2069 6e74 6f20 5553   unicode into US
-0000c350: 2d41 5343 4949 0a20 2020 2020 2020 2070  -ASCII.        p
-0000c360: 7265 7065 6e64 5f73 6368 656d 653a 2073  repend_scheme: s
-0000c370: 7472 696e 672c 2061 2070 726f 746f 636f  tring, a protoco
-0000c380: 6c20 7363 6865 6d65 2074 6f20 7072 6570  l scheme to prep
-0000c390: 656e 6420 746f 2074 6865 2055 524c 2069  end to the URL i
-0000c3a0: 660a 2020 2020 2020 2020 2020 2020 7765  f.            we
-0000c3b0: 2772 6520 6861 7669 6e67 2074 726f 7562  're having troub
-0000c3c0: 6c65 2070 6172 7369 6e67 2069 742e 0a20  le parsing it.. 
-0000c3d0: 2020 2020 2020 2020 2020 2065 2e67 2e20             e.g. 
-0000c3e0: 2268 7474 7022 2e20 496e 7075 7420 4e6f  "http". Input No
-0000c3f0: 6e65 2074 6f20 6469 7361 626c 6520 7468  ne to disable th
-0000c400: 6973 2066 756e 6374 696f 6e61 6c69 7479  is functionality
-0000c410: 0a0a 2020 2020 5265 7475 726e 733a 0a20  ..    Returns:. 
-0000c420: 2020 2020 2020 2073 7472 696e 673a 2061         string: a
-0000c430: 2055 532d 4153 4349 4920 6571 7569 7661   US-ASCII equiva
-0000c440: 6c65 6e74 206f 6620 7468 6520 696e 7075  lent of the inpu
-0000c450: 7474 6564 2075 726c 0a0a 2020 2020 4061  tted url..    @a
-0000c460: 7574 686f 723a 204a 6f6e 6174 6861 6e20  uthor: Jonathan 
-0000c470: 4265 6e6e 0a20 2020 2022 2222 0a20 2020  Benn.    """.   
-0000c480: 2023 2063 6f6e 7665 7274 2074 6865 2061   # convert the a
-0000c490: 7574 686f 7269 7479 2063 6f6d 706f 6e65  uthority compone
-0000c4a0: 6e74 206f 6620 7468 6520 5552 4c20 696e  nt of the URL in
-0000c4b0: 746f 2061 6e20 4153 4349 4920 7075 6e79  to an ASCII puny
-0000c4c0: 636f 6465 2073 7472 696e 672c 0a20 2020  code string,.   
-0000c4d0: 2023 2062 7574 2065 6e63 6f64 6520 7468   # but encode th
-0000c4e0: 6520 7265 7374 2075 7369 6e67 2074 6865  e rest using the
-0000c4f0: 2072 6567 756c 6172 2055 5249 2063 6861   regular URI cha
-0000c500: 7261 6374 6572 2065 6e63 6f64 696e 670a  racter encoding.
-0000c510: 2020 2020 636f 6d70 6f6e 656e 7473 203d      components =
-0000c520: 2075 726c 7061 7273 652e 7572 6c70 6172   urlparse.urlpar
-0000c530: 7365 2875 726c 290a 2020 2020 7072 6570  se(url).    prep
-0000c540: 656e 6465 6420 3d20 4661 6c73 650a 2020  ended = False.  
-0000c550: 2020 2320 4966 206e 6f20 6175 7468 6f72    # If no author
-0000c560: 6974 7920 7761 7320 666f 756e 640a 2020  ity was found.  
-0000c570: 2020 6966 206e 6f74 2063 6f6d 706f 6e65    if not compone
-0000c580: 6e74 732e 6e65 746c 6f63 3a0a 2020 2020  nts.netloc:.    
-0000c590: 2020 2020 2320 5472 7920 6170 7065 6e64      # Try append
-0000c5a0: 696e 6720 6120 7363 6865 6d65 2074 6f20  ing a scheme to 
-0000c5b0: 7365 6520 6966 2074 6861 7420 6669 7865  see if that fixe
-0000c5c0: 7320 7468 6520 7072 6f62 6c65 6d0a 2020  s the problem.  
-0000c5d0: 2020 2020 2020 7363 6865 6d65 5f74 6f5f        scheme_to_
-0000c5e0: 7072 6570 656e 6420 3d20 7072 6570 656e  prepend = prepen
-0000c5f0: 645f 7363 6865 6d65 206f 7220 2268 7474  d_scheme or "htt
-0000c600: 7022 0a20 2020 2020 2020 2063 6f6d 706f  p".        compo
-0000c610: 6e65 6e74 7320 3d20 7572 6c70 6172 7365  nents = urlparse
-0000c620: 2e75 726c 7061 7273 6528 746f 5f75 6e69  .urlparse(to_uni
-0000c630: 636f 6465 2873 6368 656d 655f 746f 5f70  code(scheme_to_p
-0000c640: 7265 7065 6e64 2920 2b20 223a 2f2f 2220  repend) + "://" 
-0000c650: 2b20 7572 6c29 0a20 2020 2020 2020 2070  + url).        p
-0000c660: 7265 7065 6e64 6564 203d 2054 7275 650a  repended = True.
-0000c670: 0a20 2020 2023 2069 6620 7765 2073 7469  .    # if we sti
-0000c680: 6c6c 2063 616e 2774 2066 696e 6420 7468  ll can't find th
-0000c690: 6520 6175 7468 6f72 6974 790a 2020 2020  e authority.    
-0000c6a0: 6966 206e 6f74 2063 6f6d 706f 6e65 6e74  if not component
-0000c6b0: 732e 6e65 746c 6f63 3a0a 2020 2020 2020  s.netloc:.      
-0000c6c0: 2020 2320 416e 6420 6974 2773 206e 6f74    # And it's not
-0000c6d0: 2062 6563 6175 7365 2074 6865 2075 726c   because the url
-0000c6e0: 2069 7320 6120 7265 6c61 7469 7665 2075   is a relative u
-0000c6f0: 726c 0a20 2020 2020 2020 2069 6620 6e6f  rl.        if no
-0000c700: 7420 7572 6c2e 7374 6172 7473 7769 7468  t url.startswith
-0000c710: 2822 2f22 293a 0a20 2020 2020 2020 2020  ("/"):.         
-0000c720: 2020 2072 6169 7365 2045 7863 6570 7469     raise Excepti
-0000c730: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000c740: 2020 2020 224e 6f20 6175 7468 6f72 6974      "No authorit
-0000c750: 7920 636f 6d70 6f6e 656e 7420 666f 756e  y component foun
-0000c760: 642c 2022 0a20 2020 2020 2020 2020 2020  d, ".           
-0000c770: 2020 2020 202b 2022 636f 756c 6420 6e6f       + "could no
-0000c780: 7420 6465 636f 6465 2075 6e69 636f 6465  t decode unicode
-0000c790: 2074 6f20 5553 2d41 5343 4949 220a 2020   to US-ASCII".  
-0000c7a0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-0000c7b0: 2023 2057 6527 7265 2068 6572 6520 6966   # We're here if
-0000c7c0: 2077 6520 666f 756e 6420 616e 2061 7574   we found an aut
-0000c7d0: 686f 7269 7479 2c20 6c65 7427 7320 7265  hority, let's re
-0000c7e0: 6275 696c 6420 7468 6520 5552 4c0a 2020  build the URL.  
-0000c7f0: 2020 7363 6865 6d65 203d 2063 6f6d 706f    scheme = compo
-0000c800: 6e65 6e74 732e 7363 6865 6d65 0a20 2020  nents.scheme.   
-0000c810: 2061 7574 686f 7269 7479 203d 2063 6f6d   authority = com
-0000c820: 706f 6e65 6e74 732e 6e65 746c 6f63 0a20  ponents.netloc. 
-0000c830: 2020 2070 6174 6820 3d20 636f 6d70 6f6e     path = compon
-0000c840: 656e 7473 2e70 6174 680a 2020 2020 7175  ents.path.    qu
-0000c850: 6572 7920 3d20 636f 6d70 6f6e 656e 7473  ery = components
-0000c860: 2e71 7565 7279 0a20 2020 2066 7261 676d  .query.    fragm
-0000c870: 656e 7420 3d20 636f 6d70 6f6e 656e 7473  ent = components
-0000c880: 2e66 7261 676d 656e 740a 0a20 2020 2069  .fragment..    i
-0000c890: 6620 7072 6570 656e 6465 643a 0a20 2020  f prepended:.   
-0000c8a0: 2020 2020 2073 6368 656d 6520 3d20 2222       scheme = ""
-0000c8b0: 0a0a 2020 2020 756e 7061 7273 6564 203d  ..    unparsed =
-0000c8c0: 2075 726c 7061 7273 652e 7572 6c75 6e70   urlparse.urlunp
-0000c8d0: 6172 7365 280a 2020 2020 2020 2020 280a  arse(.        (.
-0000c8e0: 2020 2020 2020 2020 2020 2020 7363 6865              sche
-0000c8f0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-0000c900: 756e 6963 6f64 655f 746f 5f61 7363 6969  unicode_to_ascii
-0000c910: 5f61 7574 686f 7269 7479 2861 7574 686f  _authority(autho
-0000c920: 7269 7479 292c 0a20 2020 2020 2020 2020  rity),.         
-0000c930: 2020 2065 7363 6170 655f 756e 6963 6f64     escape_unicod
-0000c940: 6528 7061 7468 292c 0a20 2020 2020 2020  e(path),.       
-0000c950: 2020 2020 2022 222c 0a20 2020 2020 2020       "",.       
-0000c960: 2020 2020 2065 7363 6170 655f 756e 6963       escape_unic
-0000c970: 6f64 6528 7175 6572 7929 2c0a 2020 2020  ode(query),.    
-0000c980: 2020 2020 2020 2020 7374 7228 6672 6167          str(frag
-0000c990: 6d65 6e74 292c 0a20 2020 2020 2020 2029  ment),.        )
-0000c9a0: 0a20 2020 2029 0a20 2020 2069 6620 756e  .    ).    if un
-0000c9b0: 7061 7273 6564 2e73 7461 7274 7377 6974  parsed.startswit
-0000c9c0: 6828 222f 2f22 293a 0a20 2020 2020 2020  h("//"):.       
-0000c9d0: 2075 6e70 6172 7365 6420 3d20 756e 7061   unparsed = unpa
-0000c9e0: 7273 6564 5b32 3a5d 2020 2320 5265 6d6f  rsed[2:]  # Remo
-0000c9f0: 7665 2074 6865 202f 2f20 7572 6c75 6e70  ve the // urlunp
-0000ca00: 6172 7365 2070 7574 7320 696e 2074 6865  arse puts in the
-0000ca10: 2062 6567 696e 6e69 6e67 0a20 2020 2072   beginning.    r
-0000ca20: 6574 7572 6e20 756e 7061 7273 6564 0a0a  eturn unparsed..
-0000ca30: 0a63 6c61 7373 2049 535f 4745 4e45 5249  .class IS_GENERI
-0000ca40: 435f 5552 4c28 5661 6c69 6461 746f 7229  C_URL(Validator)
-0000ca50: 3a0a 2020 2020 2222 220a 2020 2020 5265  :.    """.    Re
-0000ca60: 6a65 6374 7320 6120 5552 4c20 7374 7269  jects a URL stri
-0000ca70: 6e67 2069 6620 616e 7920 6f66 2074 6865  ng if any of the
-0000ca80: 2066 6f6c 6c6f 7769 6e67 2069 7320 7472   following is tr
-0000ca90: 7565 3a0a 2020 2020 2020 202a 2054 6865  ue:.       * The
-0000caa0: 2073 7472 696e 6720 6973 2065 6d70 7479   string is empty
-0000cab0: 206f 7220 4e6f 6e65 0a20 2020 2020 2020   or None.       
-0000cac0: 2a20 5468 6520 7374 7269 6e67 2075 7365  * The string use
-0000cad0: 7320 6368 6172 6163 7465 7273 2074 6861  s characters tha
-0000cae0: 7420 6172 6520 6e6f 7420 616c 6c6f 7765  t are not allowe
-0000caf0: 6420 696e 2061 2055 524c 0a20 2020 2020  d in a URL.     
-0000cb00: 2020 2a20 5468 6520 5552 4c20 7363 6865    * The URL sche
-0000cb10: 6d65 2073 7065 6369 6669 6564 2028 6966  me specified (if
-0000cb20: 206f 6e65 2069 7320 7370 6563 6966 6965   one is specifie
-0000cb30: 6429 2069 7320 6e6f 7420 7661 6c69 640a  d) is not valid.
-0000cb40: 0a20 2020 2042 6173 6564 206f 6e20 5246  .    Based on RF
-0000cb50: 4320 3233 3936 3a20 6874 7470 3a2f 2f77  C 2396: http://w
-0000cb60: 7777 2e66 6171 732e 6f72 672f 7266 6373  ww.faqs.org/rfcs
-0000cb70: 2f72 6663 3233 3936 2e68 746d 6c0a 0a20  /rfc2396.html.. 
-0000cb80: 2020 2054 6869 7320 6675 6e63 7469 6f6e     This function
-0000cb90: 206f 6e6c 7920 6368 6563 6b73 2074 6865   only checks the
-0000cba0: 2055 524c 2773 2073 796e 7461 782e 2049   URL's syntax. I
-0000cbb0: 7420 646f 6573 206e 6f74 2063 6865 636b  t does not check
-0000cbc0: 2074 6861 7420 7468 6520 5552 4c0a 2020   that the URL.  
-0000cbd0: 2020 706f 696e 7473 2074 6f20 6120 7265    points to a re
-0000cbe0: 616c 2064 6f63 756d 656e 742c 2066 6f72  al document, for
-0000cbf0: 2065 7861 6d70 6c65 2c20 6f72 2074 6861   example, or tha
-0000cc00: 7420 6974 206f 7468 6572 7769 7365 206d  t it otherwise m
-0000cc10: 616b 6573 2073 656e 7365 0a20 2020 2073  akes sense.    s
-0000cc20: 656d 616e 7469 6361 6c6c 792e 2054 6869  emantically. Thi
-0000cc30: 7320 6675 6e63 7469 6f6e 2064 6f65 7320  s function does 
-0000cc40: 6175 746f 6d61 7469 6361 6c6c 7920 7072  automatically pr
-0000cc50: 6570 656e 6420 2768 7474 703a 2f2f 2720  epend 'http://' 
-0000cc60: 696e 2066 726f 6e74 0a20 2020 206f 6620  in front.    of 
-0000cc70: 6120 5552 4c20 6966 2061 6e64 206f 6e6c  a URL if and onl
-0000cc80: 7920 6966 2074 6861 7427 7320 6e65 6365  y if that's nece
-0000cc90: 7373 6172 7920 746f 2073 7563 6365 7373  ssary to success
-0000cca0: 6675 6c6c 7920 7061 7273 6520 7468 6520  fully parse the 
-0000ccb0: 5552 4c2e 0a20 2020 2050 6c65 6173 6520  URL..    Please 
-0000ccc0: 6e6f 7465 2074 6861 7420 6120 7363 6865  note that a sche
-0000ccd0: 6d65 2077 696c 6c20 6265 2070 7265 7065  me will be prepe
-0000cce0: 6e64 6564 206f 6e6c 7920 666f 7220 7261  nded only for ra
-0000ccf0: 7265 2063 6173 6573 0a20 2020 2028 652e  re cases.    (e.
-0000cd00: 672e 2027 676f 6f67 6c65 2e63 613a 3830  g. 'google.ca:80
-0000cd10: 2729 0a0a 2020 2020 5468 6520 6c69 7374  ')..    The list
-0000cd20: 206f 6620 616c 6c6f 7765 6420 7363 6865   of allowed sche
-0000cd30: 6d65 7320 6973 2063 7573 746f 6d69 7a61  mes is customiza
-0000cd40: 626c 6520 7769 7468 2074 6865 2061 6c6c  ble with the all
-0000cd50: 6f77 6564 5f73 6368 656d 6573 0a20 2020  owed_schemes.   
-0000cd60: 2070 6172 616d 6574 6572 2e20 4966 2079   parameter. If y
-0000cd70: 6f75 2065 7863 6c75 6465 204e 6f6e 6520  ou exclude None 
-0000cd80: 6672 6f6d 2074 6865 206c 6973 742c 2074  from the list, t
-0000cd90: 6865 6e20 6162 6272 6576 6961 7465 6420  hen abbreviated 
-0000cda0: 5552 4c73 0a20 2020 2028 6c61 636b 696e  URLs.    (lackin
-0000cdb0: 6720 6120 7363 6865 6d65 2073 7563 6820  g a scheme such 
-0000cdc0: 6173 2027 6874 7470 2729 2077 696c 6c20  as 'http') will 
-0000cdd0: 6265 2072 656a 6563 7465 642e 0a0a 2020  be rejected...  
-0000cde0: 2020 5468 6520 6465 6661 756c 7420 7072    The default pr
-0000cdf0: 6570 656e 6465 6420 7363 6865 6d65 2069  epended scheme i
-0000ce00: 7320 6375 7374 6f6d 697a 6162 6c65 2077  s customizable w
-0000ce10: 6974 6820 7468 6520 7072 6570 656e 645f  ith the prepend_
-0000ce20: 7363 6865 6d65 0a20 2020 2070 6172 616d  scheme.    param
-0000ce30: 6574 6572 2e20 4966 2079 6f75 2073 6574  eter. If you set
-0000ce40: 2070 7265 7065 6e64 5f73 6368 656d 6520   prepend_scheme 
-0000ce50: 746f 204e 6f6e 6520 7468 656e 2070 7265  to None then pre
-0000ce60: 7065 6e64 696e 6720 7769 6c6c 2062 650a  pending will be.
-0000ce70: 2020 2020 6469 7361 626c 6564 2e20 5552      disabled. UR
-0000ce80: 4c73 2074 6861 7420 7265 7175 6972 6520  Ls that require 
-0000ce90: 7072 6570 656e 6469 6e67 2074 6f20 7061  prepending to pa
-0000cea0: 7273 6520 7769 6c6c 2073 7469 6c6c 2062  rse will still b
-0000ceb0: 6520 6163 6365 7074 6564 2c0a 2020 2020  e accepted,.    
-0000cec0: 6275 7420 7468 6520 7265 7475 726e 2076  but the return v
-0000ced0: 616c 7565 2077 696c 6c20 6e6f 7420 6265  alue will not be
-0000cee0: 206d 6f64 6966 6965 642e 0a0a 2020 2020   modified...    
-0000cef0: 4061 7574 686f 723a 204a 6f6e 6174 6861  @author: Jonatha
-0000cf00: 6e20 4265 6e6e 0a0a 2020 2020 2020 2020  n Benn..        
-0000cf10: 3e3e 3e20 4953 5f47 454e 4552 4943 5f55  >>> IS_GENERIC_U
-0000cf20: 524c 2829 2827 6874 7470 3a2f 2f75 7365  RL()('http://use
-0000cf30: 7240 6162 632e 636f 6d27 290a 2020 2020  r@abc.com').    
-0000cf40: 2020 2020 2827 6874 7470 3a2f 2f75 7365      ('http://use
-0000cf50: 7240 6162 632e 636f 6d27 2c20 4e6f 6e65  r@abc.com', None
-0000cf60: 290a 0a20 2020 2041 7267 733a 0a20 2020  )..    Args:.   
-0000cf70: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
-0000cf80: 6765 3a20 6120 7374 7269 6e67 2c20 7468  ge: a string, th
-0000cf90: 6520 6572 726f 7220 6d65 7373 6167 6520  e error message 
-0000cfa0: 746f 2067 6976 6520 7468 6520 656e 6420  to give the end 
-0000cfb0: 7573 6572 0a20 2020 2020 2020 2020 2020  user.           
-0000cfc0: 2069 6620 7468 6520 5552 4c20 646f 6573   if the URL does
-0000cfd0: 206e 6f74 2076 616c 6964 6174 650a 2020   not validate.  
-0000cfe0: 2020 2020 2020 616c 6c6f 7765 645f 7363        allowed_sc
-0000cff0: 6865 6d65 733a 2061 206c 6973 7420 636f  hemes: a list co
-0000d000: 6e74 6169 6e69 6e67 2073 7472 696e 6773  ntaining strings
-0000d010: 206f 7220 4e6f 6e65 2e20 4561 6368 2065   or None. Each e
-0000d020: 6c65 6d65 6e74 0a20 2020 2020 2020 2020  lement.         
-0000d030: 2020 2069 7320 6120 7363 6865 6d65 2074     is a scheme t
-0000d040: 6865 2069 6e70 7574 7465 6420 5552 4c20  he inputted URL 
-0000d050: 6973 2061 6c6c 6f77 6564 2074 6f20 7573  is allowed to us
-0000d060: 650a 2020 2020 2020 2020 7072 6570 656e  e.        prepen
-0000d070: 645f 7363 6865 6d65 3a20 6120 7374 7269  d_scheme: a stri
-0000d080: 6e67 2c20 7468 6973 2073 6368 656d 6520  ng, this scheme 
-0000d090: 6973 2070 7265 7065 6e64 6564 2069 6620  is prepended if 
-0000d0a0: 6974 2773 0a20 2020 2020 2020 2020 2020  it's.           
-0000d0b0: 206e 6563 6573 7361 7279 2074 6f20 6d61   necessary to ma
-0000d0c0: 6b65 2074 6865 2055 524c 2076 616c 6964  ke the URL valid
-0000d0d0: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
-0000d0e0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
-0000d0f0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-0000d100: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
-0000d110: 3d22 456e 7465 7220 6120 7661 6c69 6420  ="Enter a valid 
-0000d120: 5552 4c22 2c0a 2020 2020 2020 2020 616c  URL",.        al
-0000d130: 6c6f 7765 645f 7363 6865 6d65 733d 4e6f  lowed_schemes=No
-0000d140: 6e65 2c0a 2020 2020 2020 2020 7072 6570  ne,.        prep
-0000d150: 656e 645f 7363 6865 6d65 3d4e 6f6e 652c  end_scheme=None,
-0000d160: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
-0000d170: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-0000d180: 6765 203d 2065 7272 6f72 5f6d 6573 7361  ge = error_messa
-0000d190: 6765 0a20 2020 2020 2020 2069 6620 616c  ge.        if al
-0000d1a0: 6c6f 7765 645f 7363 6865 6d65 7320 6973  lowed_schemes is
-0000d1b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000d1c0: 2020 2073 656c 662e 616c 6c6f 7765 645f     self.allowed_
-0000d1d0: 7363 6865 6d65 7320 3d20 616c 6c5f 7572  schemes = all_ur
-0000d1e0: 6c5f 7363 6865 6d65 730a 2020 2020 2020  l_schemes.      
-0000d1f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000d200: 2020 2020 7365 6c66 2e61 6c6c 6f77 6564      self.allowed
-0000d210: 5f73 6368 656d 6573 203d 2061 6c6c 6f77  _schemes = allow
-0000d220: 6564 5f73 6368 656d 6573 0a20 2020 2020  ed_schemes.     
-0000d230: 2020 2073 656c 662e 7072 6570 656e 645f     self.prepend_
-0000d240: 7363 6865 6d65 203d 2070 7265 7065 6e64  scheme = prepend
-0000d250: 5f73 6368 656d 650a 2020 2020 2020 2020  _scheme.        
-0000d260: 6966 2073 656c 662e 7072 6570 656e 645f  if self.prepend_
-0000d270: 7363 6865 6d65 206e 6f74 2069 6e20 7365  scheme not in se
-0000d280: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
-0000d290: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0000d2a0: 7261 6973 6520 5379 6e74 6178 4572 726f  raise SyntaxErro
-0000d2b0: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-0000d2c0: 2020 2022 7072 6570 656e 645f 7363 6865     "prepend_sche
-0000d2d0: 6d65 3d27 2573 2720 6973 206e 6f74 2069  me='%s' is not i
-0000d2e0: 6e20 616c 6c6f 7765 645f 7363 6865 6d65  n allowed_scheme
-0000d2f0: 733d 2573 220a 2020 2020 2020 2020 2020  s=%s".          
-0000d300: 2020 2020 2020 2520 2873 656c 662e 7072        % (self.pr
-0000d310: 6570 656e 645f 7363 6865 6d65 2c20 7365  epend_scheme, se
-0000d320: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
-0000d330: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-0000d340: 290a 0a20 2020 2052 4547 4558 5f47 454e  )..    REGEX_GEN
-0000d350: 4552 4943 5f55 524c 203d 2072 2225 5b5e  ERIC_URL = r"%[^
-0000d360: 302d 3941 2d46 612d 665d 7b32 7d7c 255b  0-9A-Fa-f]{2}|%[
-0000d370: 5e30 2d39 412d 4661 2d66 5d5b 302d 3941  ^0-9A-Fa-f][0-9A
-0000d380: 2d46 612d 665d 7c25 5b30 2d39 412d 4661  -Fa-f]|%[0-9A-Fa
-0000d390: 2d66 5d5b 5e30 2d39 412d 4661 2d66 5d7c  -f][^0-9A-Fa-f]|
-0000d3a0: 2524 7c25 5b30 2d39 412d 4661 2d66 5d24  %$|%[0-9A-Fa-f]$
-0000d3b0: 7c25 5b5e 302d 3941 2d46 612d 665d 2422  |%[^0-9A-Fa-f]$"
-0000d3c0: 0a20 2020 2052 4547 4558 5f47 454e 4552  .    REGEX_GENER
-0000d3d0: 4943 5f55 524c 5f56 414c 4944 203d 2072  IC_URL_VALID = r
-0000d3e0: 225b 412d 5a61 2d7a 302d 393b 2f3f 3a40  "[A-Za-z0-9;/?:@
-0000d3f0: 263d 2b24 2c5c 2d5f 5c2e 217e 2a27 5c28  &=+$,\-_\.!~*'\(
-0000d400: 5c29 255d 2b24 220a 2020 2020 5245 4745  \)%]+$".    REGE
-0000d410: 585f 5552 4c5f 4652 4147 4d45 4e54 5f56  X_URL_FRAGMENT_V
-0000d420: 414c 4944 203d 2072 225b 7c41 2d5a 612d  ALID = r"[|A-Za-
-0000d430: 7a30 2d39 3b2f 3f3a 4026 3d2b 242c 5c2d  z0-9;/?:@&=+$,\-
-0000d440: 5f5c 2e21 7e2a 275c 285c 2925 5d2b 2422  _\.!~*'\(\)%]+$"
-0000d450: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-0000d460: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-0000d470: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-0000d480: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0000d490: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-0000d4a0: 2020 2020 2020 2076 616c 7565 3a20 6120         value: a 
-0000d4b0: 7374 7269 6e67 2c20 7468 6520 5552 4c20  string, the URL 
-0000d4c0: 746f 2076 616c 6964 6174 650a 0a20 2020  to validate..   
-0000d4d0: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-0000d4e0: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
-0000d4f0: 652c 2077 6865 7265 2074 7570 6c65 5b30  e, where tuple[0
-0000d500: 5d20 6973 2074 6865 2069 6e70 7574 7465  ] is the inputte
-0000d510: 6420 7661 6c75 6520 2870 6f73 7369 626c  d value (possibl
-0000d520: 650a 2020 2020 2020 2020 2020 2020 7072  e.            pr
-0000d530: 6570 656e 6465 6420 7769 7468 2070 7265  epended with pre
-0000d540: 7065 6e64 5f73 6368 656d 6529 2c20 616e  pend_scheme), an
-0000d550: 6420 7475 706c 655b 315d 2069 7320 6569  d tuple[1] is ei
-0000d560: 7468 6572 0a20 2020 2020 2020 2020 2020  ther.           
-0000d570: 204e 6f6e 6520 2873 7563 6365 7373 2129   None (success!)
-0000d580: 206f 7220 7468 6520 7374 7269 6e67 2065   or the string e
-0000d590: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
-0000d5a0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-0000d5b0: 2020 2320 6966 2077 6520 646f 6e74 2068    # if we dont h
-0000d5c0: 6176 6520 616e 7974 6869 6e67 206f 7220  ave anything or 
-0000d5d0: 7468 6520 5552 4c20 6d69 7375 7365 7320  the URL misuses 
-0000d5e0: 7468 6520 2725 2720 6368 6172 6163 7465  the '%' characte
-0000d5f0: 720a 0a20 2020 2020 2020 2069 6620 6e6f  r..        if no
-0000d600: 7420 7661 6c75 6520 6f72 2072 652e 7365  t value or re.se
-0000d610: 6172 6368 2873 656c 662e 5245 4745 585f  arch(self.REGEX_
-0000d620: 4745 4e45 5249 435f 5552 4c2c 2076 616c  GENERIC_URL, val
-0000d630: 7565 293a 0a20 2020 2020 2020 2020 2020  ue):.           
-0000d640: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-0000d650: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
-0000d660: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
-0000d670: 725f 6d65 7373 6167 6529 290a 0a20 2020  r_message))..   
-0000d680: 2020 2020 2069 6620 2223 2220 696e 2076       if "#" in v
-0000d690: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
-0000d6a0: 2020 7572 6c2c 2066 7261 676d 656e 745f    url, fragment_
-0000d6b0: 7061 7274 203d 2076 616c 7565 2e73 706c  part = value.spl
-0000d6c0: 6974 2822 2322 290a 2020 2020 2020 2020  it("#").        
-0000d6d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000d6e0: 2020 7572 6c2c 2066 7261 676d 656e 745f    url, fragment_
-0000d6f0: 7061 7274 203d 2076 616c 7565 2c20 2222  part = value, ""
-0000d700: 0a20 2020 2020 2020 2023 2069 6620 7468  .        # if th
-0000d710: 6520 5552 4c20 6973 206f 6e6c 7920 636f  e URL is only co
-0000d720: 6d70 6f73 6564 206f 6620 7661 6c69 6420  mposed of valid 
-0000d730: 6368 6172 6163 7465 7273 0a20 2020 2020  characters.     
-0000d740: 2020 2069 6620 6e6f 7420 7265 2e6d 6174     if not re.mat
-0000d750: 6368 2873 656c 662e 5245 4745 585f 4745  ch(self.REGEX_GE
-0000d760: 4e45 5249 435f 5552 4c5f 5641 4c49 442c  NERIC_URL_VALID,
-0000d770: 2075 726c 2920 6f72 2028 0a20 2020 2020   url) or (.     
-0000d780: 2020 2020 2020 2066 7261 676d 656e 745f         fragment_
-0000d790: 7061 7274 2061 6e64 206e 6f74 2072 652e  part and not re.
-0000d7a0: 6d61 7463 6828 7365 6c66 2e52 4547 4558  match(self.REGEX
-0000d7b0: 5f55 524c 5f46 5241 474d 454e 545f 5641  _URL_FRAGMENT_VA
-0000d7c0: 4c49 442c 2066 7261 676d 656e 745f 7061  LID, fragment_pa
-0000d7d0: 7274 290a 2020 2020 2020 2020 293a 0a20  rt).        ):. 
-0000d7e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0000d7f0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-0000d800: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-0000d810: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-0000d820: 6167 6529 290a 2020 2020 2020 2020 2320  age)).        # 
-0000d830: 5468 656e 2070 6172 7365 2074 6865 2055  Then parse the U
-0000d840: 524c 2069 6e74 6f20 6974 7320 636f 6d70  RL into its comp
-0000d850: 6f6e 656e 7473 2061 6e64 2063 6865 636b  onents and check
-0000d860: 206f 6e0a 2020 2020 2020 2020 7472 793a   on.        try:
-0000d870: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-0000d880: 706f 6e65 6e74 7320 3d20 7572 6c70 6172  ponents = urlpar
-0000d890: 7365 2e75 726c 7061 7273 6528 7572 6c6c  se.urlparse(urll
-0000d8a0: 6962 5f75 6e71 756f 7465 2876 616c 7565  ib_unquote(value
-0000d8b0: 2929 2e5f 6173 6469 6374 2829 0a20 2020  ))._asdict().   
-0000d8c0: 2020 2020 2065 7863 6570 7420 5661 6c75       except Valu
-0000d8d0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
-0000d8e0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
-0000d8f0: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
-0000d900: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
-0000d910: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
-0000d920: 2020 2020 2020 2020 2320 436c 6561 6e20          # Clean 
-0000d930: 7570 2074 6865 2073 6368 656d 6520 6265  up the scheme be
-0000d940: 666f 7265 2077 6520 6368 6563 6b20 6974  fore we check it
-0000d950: 0a20 2020 2020 2020 2073 6368 656d 6520  .        scheme 
-0000d960: 3d20 636f 6d70 6f6e 656e 7473 5b22 7363  = components["sc
-0000d970: 6865 6d65 225d 0a20 2020 2020 2020 2069  heme"].        i
-0000d980: 6620 6c65 6e28 7363 6865 6d65 2920 3d3d  f len(scheme) ==
-0000d990: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0000d9a0: 7363 6865 6d65 203d 204e 6f6e 650a 2020  scheme = None.  
-0000d9b0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000d9c0: 2020 2020 2020 2020 7363 6865 6d65 203d          scheme =
-0000d9d0: 2063 6f6d 706f 6e65 6e74 735b 2273 6368   components["sch
-0000d9e0: 656d 6522 5d2e 6c6f 7765 7228 290a 2020  eme"].lower().  
-0000d9f0: 2020 2020 2020 2320 4966 2074 6865 2073        # If the s
-0000da00: 6368 656d 6520 646f 6573 6e27 7420 7265  cheme doesn't re
-0000da10: 616c 6c79 2065 7869 7374 730a 2020 2020  ally exists.    
-0000da20: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-0000da30: 2020 2020 2073 6368 656d 6520 6e6f 7420       scheme not 
-0000da40: 696e 2073 656c 662e 616c 6c6f 7765 645f  in self.allowed_
-0000da50: 7363 6865 6d65 730a 2020 2020 2020 2020  schemes.        
-0000da60: 2020 2020 6f72 206e 6f74 2073 6368 656d      or not schem
-0000da70: 650a 2020 2020 2020 2020 2020 2020 616e  e.            an
-0000da80: 6420 223a 2220 696e 2063 6f6d 706f 6e65  d ":" in compone
-0000da90: 6e74 735b 2270 6174 6822 5d0a 2020 2020  nts["path"].    
-0000daa0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-0000dab0: 2020 2023 2066 6f72 2074 6865 2070 6f73     # for the pos
-0000dac0: 7369 626c 6520 6361 7365 206f 6620 6162  sible case of ab
-0000dad0: 6272 6576 6961 7465 6420 5552 4c73 2077  breviated URLs w
-0000dae0: 6974 680a 2020 2020 2020 2020 2020 2020  ith.            
-0000daf0: 2320 706f 7274 732c 2063 6865 636b 2074  # ports, check t
-0000db00: 6f20 7365 6520 6966 2061 6464 696e 6720  o see if adding 
-0000db10: 6120 7661 6c69 6420 7363 6865 6d65 2066  a valid scheme f
-0000db20: 6978 6573 0a20 2020 2020 2020 2020 2020  ixes.           
-0000db30: 2023 2074 6865 2070 726f 626c 656d 2028   # the problem (
-0000db40: 6275 7420 6f6e 6c79 2064 6f20 7468 6973  but only do this
-0000db50: 2069 6620 6974 2064 6f65 736e 2774 2068   if it doesn't h
-0000db60: 6176 650a 2020 2020 2020 2020 2020 2020  ave.            
-0000db70: 2320 6f6e 6520 616c 7265 6164 7921 290a  # one already!).
-0000db80: 2020 2020 2020 2020 2020 2020 6966 2022              if "
-0000db90: 3a2f 2f22 206e 6f74 2069 6e20 7661 6c75  ://" not in valu
-0000dba0: 6520 616e 6420 4e6f 6e65 2069 6e20 7365  e and None in se
-0000dbb0: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
-0000dbc0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-0000dbd0: 2020 2020 7363 6865 6d65 546f 5573 6520      schemeToUse 
-0000dbe0: 3d20 7365 6c66 2e70 7265 7065 6e64 5f73  = self.prepend_s
-0000dbf0: 6368 656d 6520 6f72 2022 6874 7470 220a  cheme or "http".
-0000dc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000dc10: 6e65 775f 7661 6c75 6520 3d20 7365 6c66  new_value = self
-0000dc20: 2e76 616c 6964 6174 6528 7363 6865 6d65  .validate(scheme
-0000dc30: 546f 5573 6520 2b20 223a 2f2f 2220 2b20  ToUse + "://" + 
-0000dc40: 7661 6c75 6529 0a20 2020 2020 2020 2020  value).         
-0000dc50: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
-0000dc60: 775f 7661 6c75 6520 6966 2073 656c 662e  w_value if self.
-0000dc70: 7072 6570 656e 645f 7363 6865 6d65 2065  prepend_scheme e
-0000dc80: 6c73 6520 7661 6c75 650a 2020 2020 2020  lse value.      
-0000dc90: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-0000dca0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
-0000dcb0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-0000dcc0: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
-0000dcd0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000dce0: 7661 6c75 650a 0a0a 2320 536f 7572 6365  value...# Source
-0000dcf0: 7320 286f 6274 6169 6e65 6420 3230 3137  s (obtained 2017
-0000dd00: 2d4e 6f76 2d31 3129 3a0a 2320 2020 2068  -Nov-11):.#    h
-0000dd10: 7474 703a 2f2f 6461 7461 2e69 616e 612e  ttp://data.iana.
-0000dd20: 6f72 672f 544c 442f 746c 6473 2d61 6c70  org/TLD/tlds-alp
-0000dd30: 6861 2d62 792d 646f 6d61 696e 2e74 7874  ha-by-domain.txt
-0000dd40: 0a23 2073 6565 2073 6372 6970 7473 2f70  .# see scripts/p
-0000dd50: 6172 7365 5f74 6f70 5f6c 6576 656c 5f64  arse_top_level_d
-0000dd60: 6f6d 6169 6e73 2e70 7920 666f 7220 616e  omains.py for an
-0000dd70: 2065 6173 7920 7570 6461 7465 0a0a 6f66   easy update..of
-0000dd80: 6669 6369 616c 5f74 6f70 5f6c 6576 656c  ficial_top_level
-0000dd90: 5f64 6f6d 6169 6e73 203d 205b 0a20 2020  _domains = [.   
-0000dda0: 2023 2061 0a20 2020 2022 6161 6122 2c0a   # a.    "aaa",.
-0000ddb0: 2020 2020 2261 6172 7022 2c0a 2020 2020      "aarp",.    
-0000ddc0: 2261 6261 7274 6822 2c0a 2020 2020 2261  "abarth",.    "a
-0000ddd0: 6262 222c 0a20 2020 2022 6162 626f 7474  bb",.    "abbott
-0000dde0: 222c 0a20 2020 2022 6162 6276 6965 222c  ",.    "abbvie",
-0000ddf0: 0a20 2020 2022 6162 6322 2c0a 2020 2020  .    "abc",.    
-0000de00: 2261 626c 6522 2c0a 2020 2020 2261 626f  "able",.    "abo
-0000de10: 6761 646f 222c 0a20 2020 2022 6162 7564  gado",.    "abud
-0000de20: 6861 6269 222c 0a20 2020 2022 6163 222c  habi",.    "ac",
-0000de30: 0a20 2020 2022 6163 6164 656d 7922 2c0a  .    "academy",.
-0000de40: 2020 2020 2261 6363 656e 7475 7265 222c      "accenture",
-0000de50: 0a20 2020 2022 6163 636f 756e 7461 6e74  .    "accountant
-0000de60: 222c 0a20 2020 2022 6163 636f 756e 7461  ",.    "accounta
-0000de70: 6e74 7322 2c0a 2020 2020 2261 636f 222c  nts",.    "aco",
-0000de80: 0a20 2020 2022 6163 7469 7665 222c 0a20  .    "active",. 
-0000de90: 2020 2022 6163 746f 7222 2c0a 2020 2020     "actor",.    
-0000dea0: 2261 6422 2c0a 2020 2020 2261 6461 6322  "ad",.    "adac"
-0000deb0: 2c0a 2020 2020 2261 6473 222c 0a20 2020  ,.    "ads",.   
-0000dec0: 2022 6164 756c 7422 2c0a 2020 2020 2261   "adult",.    "a
-0000ded0: 6522 2c0a 2020 2020 2261 6567 222c 0a20  e",.    "aeg",. 
-0000dee0: 2020 2022 6165 726f 222c 0a20 2020 2022     "aero",.    "
-0000def0: 6165 746e 6122 2c0a 2020 2020 2261 6622  aetna",.    "af"
-0000df00: 2c0a 2020 2020 2261 6661 6d69 6c79 636f  ,.    "afamilyco
-0000df10: 6d70 616e 7922 2c0a 2020 2020 2261 666c  mpany",.    "afl
-0000df20: 222c 0a20 2020 2022 6166 7269 6361 222c  ",.    "africa",
-0000df30: 0a20 2020 2022 6167 222c 0a20 2020 2022  .    "ag",.    "
-0000df40: 6167 616b 6861 6e22 2c0a 2020 2020 2261  agakhan",.    "a
-0000df50: 6765 6e63 7922 2c0a 2020 2020 2261 6922  gency",.    "ai"
-0000df60: 2c0a 2020 2020 2261 6967 222c 0a20 2020  ,.    "aig",.   
-0000df70: 2022 6169 676f 222c 0a20 2020 2022 6169   "aigo",.    "ai
-0000df80: 7262 7573 222c 0a20 2020 2022 6169 7266  rbus",.    "airf
-0000df90: 6f72 6365 222c 0a20 2020 2022 6169 7274  orce",.    "airt
-0000dfa0: 656c 222c 0a20 2020 2022 616b 646e 222c  el",.    "akdn",
-0000dfb0: 0a20 2020 2022 616c 222c 0a20 2020 2022  .    "al",.    "
-0000dfc0: 616c 6661 726f 6d65 6f22 2c0a 2020 2020  alfaromeo",.    
-0000dfd0: 2261 6c69 6261 6261 222c 0a20 2020 2022  "alibaba",.    "
-0000dfe0: 616c 6970 6179 222c 0a20 2020 2022 616c  alipay",.    "al
-0000dff0: 6c66 696e 616e 7a22 2c0a 2020 2020 2261  lfinanz",.    "a
-0000e000: 6c6c 7374 6174 6522 2c0a 2020 2020 2261  llstate",.    "a
-0000e010: 6c6c 7922 2c0a 2020 2020 2261 6c73 6163  lly",.    "alsac
-0000e020: 6522 2c0a 2020 2020 2261 6c73 746f 6d22  e",.    "alstom"
-0000e030: 2c0a 2020 2020 2261 6d22 2c0a 2020 2020  ,.    "am",.    
-0000e040: 2261 6d65 7269 6361 6e65 7870 7265 7373  "americanexpress
-0000e050: 222c 0a20 2020 2022 616d 6572 6963 616e  ",.    "american
-0000e060: 6661 6d69 6c79 222c 0a20 2020 2022 616d  family",.    "am
-0000e070: 6578 222c 0a20 2020 2022 616d 6661 6d22  ex",.    "amfam"
-0000e080: 2c0a 2020 2020 2261 6d69 6361 222c 0a20  ,.    "amica",. 
-0000e090: 2020 2022 616d 7374 6572 6461 6d22 2c0a     "amsterdam",.
-0000e0a0: 2020 2020 2261 6e61 6c79 7469 6373 222c      "analytics",
-0000e0b0: 0a20 2020 2022 616e 6472 6f69 6422 2c0a  .    "android",.
-0000e0c0: 2020 2020 2261 6e71 7561 6e22 2c0a 2020      "anquan",.  
-0000e0d0: 2020 2261 6e7a 222c 0a20 2020 2022 616f    "anz",.    "ao
-0000e0e0: 222c 0a20 2020 2022 616f 6c22 2c0a 2020  ",.    "aol",.  
-0000e0f0: 2020 2261 7061 7274 6d65 6e74 7322 2c0a    "apartments",.
-0000e100: 2020 2020 2261 7070 222c 0a20 2020 2022      "app",.    "
-0000e110: 6170 706c 6522 2c0a 2020 2020 2261 7122  apple",.    "aq"
-0000e120: 2c0a 2020 2020 2261 7175 6172 656c 6c65  ,.    "aquarelle
-0000e130: 222c 0a20 2020 2022 6172 222c 0a20 2020  ",.    "ar",.   
-0000e140: 2022 6172 6162 222c 0a20 2020 2022 6172   "arab",.    "ar
-0000e150: 616d 636f 222c 0a20 2020 2022 6172 6368  amco",.    "arch
-0000e160: 6922 2c0a 2020 2020 2261 726d 7922 2c0a  i",.    "army",.
-0000e170: 2020 2020 2261 7270 6122 2c0a 2020 2020      "arpa",.    
-0000e180: 2261 7274 222c 0a20 2020 2022 6172 7465  "art",.    "arte
-0000e190: 222c 0a20 2020 2022 6173 222c 0a20 2020  ",.    "as",.   
-0000e1a0: 2022 6173 6461 222c 0a20 2020 2022 6173   "asda",.    "as
-0000e1b0: 6961 222c 0a20 2020 2022 6173 736f 6369  ia",.    "associ
-0000e1c0: 6174 6573 222c 0a20 2020 2022 6174 222c  ates",.    "at",
-0000e1d0: 0a20 2020 2022 6174 686c 6574 6122 2c0a  .    "athleta",.
-0000e1e0: 2020 2020 2261 7474 6f72 6e65 7922 2c0a      "attorney",.
-0000e1f0: 2020 2020 2261 7522 2c0a 2020 2020 2261      "au",.    "a
-0000e200: 7563 7469 6f6e 222c 0a20 2020 2022 6175  uction",.    "au
-0000e210: 6469 222c 0a20 2020 2022 6175 6469 626c  di",.    "audibl
-0000e220: 6522 2c0a 2020 2020 2261 7564 696f 222c  e",.    "audio",
-0000e230: 0a20 2020 2022 6175 7370 6f73 7422 2c0a  .    "auspost",.
-0000e240: 2020 2020 2261 7574 686f 7222 2c0a 2020      "author",.  
-0000e250: 2020 2261 7574 6f22 2c0a 2020 2020 2261    "auto",.    "a
-0000e260: 7574 6f73 222c 0a20 2020 2022 6176 6961  utos",.    "avia
-0000e270: 6e63 6122 2c0a 2020 2020 2261 7722 2c0a  nca",.    "aw",.
-0000e280: 2020 2020 2261 7773 222c 0a20 2020 2022      "aws",.    "
-0000e290: 6178 222c 0a20 2020 2022 6178 6122 2c0a  ax",.    "axa",.
-0000e2a0: 2020 2020 2261 7a22 2c0a 2020 2020 2261      "az",.    "a
-0000e2b0: 7a75 7265 222c 0a20 2020 2023 2062 0a20  zure",.    # b. 
-0000e2c0: 2020 2022 6261 222c 0a20 2020 2022 6261     "ba",.    "ba
-0000e2d0: 6279 222c 0a20 2020 2022 6261 6964 7522  by",.    "baidu"
-0000e2e0: 2c0a 2020 2020 2262 616e 616d 6578 222c  ,.    "banamex",
-0000e2f0: 0a20 2020 2022 6261 6e61 6e61 7265 7075  .    "bananarepu
-0000e300: 626c 6963 222c 0a20 2020 2022 6261 6e64  blic",.    "band
-0000e310: 222c 0a20 2020 2022 6261 6e6b 222c 0a20  ",.    "bank",. 
-0000e320: 2020 2022 6261 7222 2c0a 2020 2020 2262     "bar",.    "b
-0000e330: 6172 6365 6c6f 6e61 222c 0a20 2020 2022  arcelona",.    "
-0000e340: 6261 7263 6c61 7963 6172 6422 2c0a 2020  barclaycard",.  
-0000e350: 2020 2262 6172 636c 6179 7322 2c0a 2020    "barclays",.  
-0000e360: 2020 2262 6172 6566 6f6f 7422 2c0a 2020    "barefoot",.  
-0000e370: 2020 2262 6172 6761 696e 7322 2c0a 2020    "bargains",.  
-0000e380: 2020 2262 6173 6562 616c 6c22 2c0a 2020    "baseball",.  
-0000e390: 2020 2262 6173 6b65 7462 616c 6c22 2c0a    "basketball",.
-0000e3a0: 2020 2020 2262 6175 6861 7573 222c 0a20      "bauhaus",. 
-0000e3b0: 2020 2022 6261 7965 726e 222c 0a20 2020     "bayern",.   
-0000e3c0: 2022 6262 222c 0a20 2020 2022 6262 6322   "bb",.    "bbc"
-0000e3d0: 2c0a 2020 2020 2262 6274 222c 0a20 2020  ,.    "bbt",.   
-0000e3e0: 2022 6262 7661 222c 0a20 2020 2022 6263   "bbva",.    "bc
-0000e3f0: 6722 2c0a 2020 2020 2262 636e 222c 0a20  g",.    "bcn",. 
-0000e400: 2020 2022 6264 222c 0a20 2020 2022 6265     "bd",.    "be
-0000e410: 222c 0a20 2020 2022 6265 6174 7322 2c0a  ",.    "beats",.
-0000e420: 2020 2020 2262 6561 7574 7922 2c0a 2020      "beauty",.  
-0000e430: 2020 2262 6565 7222 2c0a 2020 2020 2262    "beer",.    "b
-0000e440: 656e 746c 6579 222c 0a20 2020 2022 6265  entley",.    "be
-0000e450: 726c 696e 222c 0a20 2020 2022 6265 7374  rlin",.    "best
-0000e460: 222c 0a20 2020 2022 6265 7374 6275 7922  ",.    "bestbuy"
-0000e470: 2c0a 2020 2020 2262 6574 222c 0a20 2020  ,.    "bet",.   
-0000e480: 2022 6266 222c 0a20 2020 2022 6267 222c   "bf",.    "bg",
-0000e490: 0a20 2020 2022 6268 222c 0a20 2020 2022  .    "bh",.    "
-0000e4a0: 6268 6172 7469 222c 0a20 2020 2022 6269  bharti",.    "bi
-0000e4b0: 222c 0a20 2020 2022 6269 626c 6522 2c0a  ",.    "bible",.
-0000e4c0: 2020 2020 2262 6964 222c 0a20 2020 2022      "bid",.    "
-0000e4d0: 6269 6b65 222c 0a20 2020 2022 6269 6e67  bike",.    "bing
-0000e4e0: 222c 0a20 2020 2022 6269 6e67 6f22 2c0a  ",.    "bingo",.
-0000e4f0: 2020 2020 2262 696f 222c 0a20 2020 2022      "bio",.    "
-0000e500: 6269 7a22 2c0a 2020 2020 2262 6a22 2c0a  biz",.    "bj",.
-0000e510: 2020 2020 2262 6c61 636b 222c 0a20 2020      "black",.   
-0000e520: 2022 626c 6163 6b66 7269 6461 7922 2c0a   "blackfriday",.
-0000e530: 2020 2020 2262 6c61 6e63 6f22 2c0a 2020      "blanco",.  
-0000e540: 2020 2262 6c6f 636b 6275 7374 6572 222c    "blockbuster",
-0000e550: 0a20 2020 2022 626c 6f67 222c 0a20 2020  .    "blog",.   
-0000e560: 2022 626c 6f6f 6d62 6572 6722 2c0a 2020   "bloomberg",.  
-0000e570: 2020 2262 6c75 6522 2c0a 2020 2020 2262    "blue",.    "b
-0000e580: 6d22 2c0a 2020 2020 2262 6d73 222c 0a20  m",.    "bms",. 
-0000e590: 2020 2022 626d 7722 2c0a 2020 2020 2262     "bmw",.    "b
-0000e5a0: 6e22 2c0a 2020 2020 2262 6e6c 222c 0a20  n",.    "bnl",. 
-0000e5b0: 2020 2022 626e 7070 6172 6962 6173 222c     "bnpparibas",
-0000e5c0: 0a20 2020 2022 626f 222c 0a20 2020 2022  .    "bo",.    "
-0000e5d0: 626f 6174 7322 2c0a 2020 2020 2262 6f65  boats",.    "boe
-0000e5e0: 6872 696e 6765 7222 2c0a 2020 2020 2262  hringer",.    "b
-0000e5f0: 6f66 6122 2c0a 2020 2020 2262 6f6d 222c  ofa",.    "bom",
-0000e600: 0a20 2020 2022 626f 6e64 222c 0a20 2020  .    "bond",.   
-0000e610: 2022 626f 6f22 2c0a 2020 2020 2262 6f6f   "boo",.    "boo
-0000e620: 6b22 2c0a 2020 2020 2262 6f6f 6b69 6e67  k",.    "booking
-0000e630: 222c 0a20 2020 2022 626f 6f74 7322 2c0a  ",.    "boots",.
-0000e640: 2020 2020 2262 6f73 6368 222c 0a20 2020      "bosch",.   
-0000e650: 2022 626f 7374 696b 222c 0a20 2020 2022   "bostik",.    "
-0000e660: 626f 7374 6f6e 222c 0a20 2020 2022 626f  boston",.    "bo
-0000e670: 7422 2c0a 2020 2020 2262 6f75 7469 7175  t",.    "boutiqu
-0000e680: 6522 2c0a 2020 2020 2262 6f78 222c 0a20  e",.    "box",. 
-0000e690: 2020 2022 6272 222c 0a20 2020 2022 6272     "br",.    "br
-0000e6a0: 6164 6573 636f 222c 0a20 2020 2022 6272  adesco",.    "br
-0000e6b0: 6964 6765 7374 6f6e 6522 2c0a 2020 2020  idgestone",.    
-0000e6c0: 2262 726f 6164 7761 7922 2c0a 2020 2020  "broadway",.    
-0000e6d0: 2262 726f 6b65 7222 2c0a 2020 2020 2262  "broker",.    "b
-0000e6e0: 726f 7468 6572 222c 0a20 2020 2022 6272  rother",.    "br
-0000e6f0: 7573 7365 6c73 222c 0a20 2020 2022 6273  ussels",.    "bs
-0000e700: 222c 0a20 2020 2022 6274 222c 0a20 2020  ",.    "bt",.   
-0000e710: 2022 6275 6461 7065 7374 222c 0a20 2020   "budapest",.   
-0000e720: 2022 6275 6761 7474 6922 2c0a 2020 2020   "bugatti",.    
-0000e730: 2262 7569 6c64 222c 0a20 2020 2022 6275  "build",.    "bu
-0000e740: 696c 6465 7273 222c 0a20 2020 2022 6275  ilders",.    "bu
-0000e750: 7369 6e65 7373 222c 0a20 2020 2022 6275  siness",.    "bu
-0000e760: 7922 2c0a 2020 2020 2262 757a 7a22 2c0a  y",.    "buzz",.
-0000e770: 2020 2020 2262 7622 2c0a 2020 2020 2262      "bv",.    "b
-0000e780: 7722 2c0a 2020 2020 2262 7922 2c0a 2020  w",.    "by",.  
-0000e790: 2020 2262 7a22 2c0a 2020 2020 2262 7a68    "bz",.    "bzh
-0000e7a0: 222c 0a20 2020 2023 2063 0a20 2020 2022  ",.    # c.    "
-0000e7b0: 6361 222c 0a20 2020 2022 6361 6222 2c0a  ca",.    "cab",.
-0000e7c0: 2020 2020 2263 6166 6522 2c0a 2020 2020      "cafe",.    
-0000e7d0: 2263 616c 222c 0a20 2020 2022 6361 6c6c  "cal",.    "call
-0000e7e0: 222c 0a20 2020 2022 6361 6c76 696e 6b6c  ",.    "calvinkl
-0000e7f0: 6569 6e22 2c0a 2020 2020 2263 616d 222c  ein",.    "cam",
-0000e800: 0a20 2020 2022 6361 6d65 7261 222c 0a20  .    "camera",. 
-0000e810: 2020 2022 6361 6d70 222c 0a20 2020 2022     "camp",.    "
-0000e820: 6361 6e63 6572 7265 7365 6172 6368 222c  cancerresearch",
-0000e830: 0a20 2020 2022 6361 6e6f 6e22 2c0a 2020  .    "canon",.  
-0000e840: 2020 2263 6170 6574 6f77 6e22 2c0a 2020    "capetown",.  
-0000e850: 2020 2263 6170 6974 616c 222c 0a20 2020    "capital",.   
-0000e860: 2022 6361 7069 7461 6c6f 6e65 222c 0a20   "capitalone",. 
-0000e870: 2020 2022 6361 7222 2c0a 2020 2020 2263     "car",.    "c
-0000e880: 6172 6176 616e 222c 0a20 2020 2022 6361  aravan",.    "ca
-0000e890: 7264 7322 2c0a 2020 2020 2263 6172 6522  rds",.    "care"
-0000e8a0: 2c0a 2020 2020 2263 6172 6565 7222 2c0a  ,.    "career",.
-0000e8b0: 2020 2020 2263 6172 6565 7273 222c 0a20      "careers",. 
-0000e8c0: 2020 2022 6361 7273 222c 0a20 2020 2022     "cars",.    "
-0000e8d0: 6361 7274 6965 7222 2c0a 2020 2020 2263  cartier",.    "c
-0000e8e0: 6173 6122 2c0a 2020 2020 2263 6173 6522  asa",.    "case"
-0000e8f0: 2c0a 2020 2020 2263 6173 6569 6822 2c0a  ,.    "caseih",.
-0000e900: 2020 2020 2263 6173 6822 2c0a 2020 2020      "cash",.    
-0000e910: 2263 6173 696e 6f22 2c0a 2020 2020 2263  "casino",.    "c
-0000e920: 6174 222c 0a20 2020 2022 6361 7465 7269  at",.    "cateri
-0000e930: 6e67 222c 0a20 2020 2022 6361 7468 6f6c  ng",.    "cathol
-0000e940: 6963 222c 0a20 2020 2022 6362 6122 2c0a  ic",.    "cba",.
-0000e950: 2020 2020 2263 626e 222c 0a20 2020 2022      "cbn",.    "
-0000e960: 6362 7265 222c 0a20 2020 2022 6362 7322  cbre",.    "cbs"
-0000e970: 2c0a 2020 2020 2263 6322 2c0a 2020 2020  ,.    "cc",.    
-0000e980: 2263 6422 2c0a 2020 2020 2263 6562 222c  "cd",.    "ceb",
-0000e990: 0a20 2020 2022 6365 6e74 6572 222c 0a20  .    "center",. 
-0000e9a0: 2020 2022 6365 6f22 2c0a 2020 2020 2263     "ceo",.    "c
-0000e9b0: 6572 6e22 2c0a 2020 2020 2263 6622 2c0a  ern",.    "cf",.
-0000e9c0: 2020 2020 2263 6661 222c 0a20 2020 2022      "cfa",.    "
-0000e9d0: 6366 6422 2c0a 2020 2020 2263 6722 2c0a  cfd",.    "cg",.
-0000e9e0: 2020 2020 2263 6822 2c0a 2020 2020 2263      "ch",.    "c
-0000e9f0: 6861 6e65 6c22 2c0a 2020 2020 2263 6861  hanel",.    "cha
-0000ea00: 6e6e 656c 222c 0a20 2020 2022 6368 6173  nnel",.    "chas
-0000ea10: 6522 2c0a 2020 2020 2263 6861 7422 2c0a  e",.    "chat",.
-0000ea20: 2020 2020 2263 6865 6170 222c 0a20 2020      "cheap",.   
-0000ea30: 2022 6368 696e 7461 6922 2c0a 2020 2020   "chintai",.    
-0000ea40: 2263 6872 6973 746d 6173 222c 0a20 2020  "christmas",.   
-0000ea50: 2022 6368 726f 6d65 222c 0a20 2020 2022   "chrome",.    "
-0000ea60: 6368 7279 736c 6572 222c 0a20 2020 2022  chrysler",.    "
-0000ea70: 6368 7572 6368 222c 0a20 2020 2022 6369  church",.    "ci
-0000ea80: 222c 0a20 2020 2022 6369 7072 6961 6e69  ",.    "cipriani
-0000ea90: 222c 0a20 2020 2022 6369 7263 6c65 222c  ",.    "circle",
-0000eaa0: 0a20 2020 2022 6369 7363 6f22 2c0a 2020  .    "cisco",.  
-0000eab0: 2020 2263 6974 6164 656c 222c 0a20 2020    "citadel",.   
-0000eac0: 2022 6369 7469 222c 0a20 2020 2022 6369   "citi",.    "ci
-0000ead0: 7469 6322 2c0a 2020 2020 2263 6974 7922  tic",.    "city"
-0000eae0: 2c0a 2020 2020 2263 6974 7965 6174 7322  ,.    "cityeats"
-0000eaf0: 2c0a 2020 2020 2263 6b22 2c0a 2020 2020  ,.    "ck",.    
-0000eb00: 2263 6c22 2c0a 2020 2020 2263 6c61 696d  "cl",.    "claim
-0000eb10: 7322 2c0a 2020 2020 2263 6c65 616e 696e  s",.    "cleanin
-0000eb20: 6722 2c0a 2020 2020 2263 6c69 636b 222c  g",.    "click",
-0000eb30: 0a20 2020 2022 636c 696e 6963 222c 0a20  .    "clinic",. 
-0000eb40: 2020 2022 636c 696e 6971 7565 222c 0a20     "clinique",. 
-0000eb50: 2020 2022 636c 6f74 6869 6e67 222c 0a20     "clothing",. 
-0000eb60: 2020 2022 636c 6f75 6422 2c0a 2020 2020     "cloud",.    
-0000eb70: 2263 6c75 6222 2c0a 2020 2020 2263 6c75  "club",.    "clu
-0000eb80: 626d 6564 222c 0a20 2020 2022 636d 222c  bmed",.    "cm",
-0000eb90: 0a20 2020 2022 636e 222c 0a20 2020 2022  .    "cn",.    "
-0000eba0: 636f 222c 0a20 2020 2022 636f 6163 6822  co",.    "coach"
-0000ebb0: 2c0a 2020 2020 2263 6f64 6573 222c 0a20  ,.    "codes",. 
-0000ebc0: 2020 2022 636f 6666 6565 222c 0a20 2020     "coffee",.   
-0000ebd0: 2022 636f 6c6c 6567 6522 2c0a 2020 2020   "college",.    
-0000ebe0: 2263 6f6c 6f67 6e65 222c 0a20 2020 2022  "cologne",.    "
-0000ebf0: 636f 6d22 2c0a 2020 2020 2263 6f6d 6361  com",.    "comca
-0000ec00: 7374 222c 0a20 2020 2022 636f 6d6d 6261  st",.    "commba
-0000ec10: 6e6b 222c 0a20 2020 2022 636f 6d6d 756e  nk",.    "commun
-0000ec20: 6974 7922 2c0a 2020 2020 2263 6f6d 7061  ity",.    "compa
-0000ec30: 6e79 222c 0a20 2020 2022 636f 6d70 6172  ny",.    "compar
-0000ec40: 6522 2c0a 2020 2020 2263 6f6d 7075 7465  e",.    "compute
-0000ec50: 7222 2c0a 2020 2020 2263 6f6d 7365 6322  r",.    "comsec"
-0000ec60: 2c0a 2020 2020 2263 6f6e 646f 7322 2c0a  ,.    "condos",.
-0000ec70: 2020 2020 2263 6f6e 7374 7275 6374 696f      "constructio
-0000ec80: 6e22 2c0a 2020 2020 2263 6f6e 7375 6c74  n",.    "consult
-0000ec90: 696e 6722 2c0a 2020 2020 2263 6f6e 7461  ing",.    "conta
-0000eca0: 6374 222c 0a20 2020 2022 636f 6e74 7261  ct",.    "contra
-0000ecb0: 6374 6f72 7322 2c0a 2020 2020 2263 6f6f  ctors",.    "coo
-0000ecc0: 6b69 6e67 222c 0a20 2020 2022 636f 6f6b  king",.    "cook
-0000ecd0: 696e 6763 6861 6e6e 656c 222c 0a20 2020  ingchannel",.   
-0000ece0: 2022 636f 6f6c 222c 0a20 2020 2022 636f   "cool",.    "co
-0000ecf0: 6f70 222c 0a20 2020 2022 636f 7273 6963  op",.    "corsic
-0000ed00: 6122 2c0a 2020 2020 2263 6f75 6e74 7279  a",.    "country
-0000ed10: 222c 0a20 2020 2022 636f 7570 6f6e 222c  ",.    "coupon",
-0000ed20: 0a20 2020 2022 636f 7570 6f6e 7322 2c0a  .    "coupons",.
-0000ed30: 2020 2020 2263 6f75 7273 6573 222c 0a20      "courses",. 
-0000ed40: 2020 2022 6372 222c 0a20 2020 2022 6372     "cr",.    "cr
-0000ed50: 6564 6974 222c 0a20 2020 2022 6372 6564  edit",.    "cred
-0000ed60: 6974 6361 7264 222c 0a20 2020 2022 6372  itcard",.    "cr
-0000ed70: 6564 6974 756e 696f 6e22 2c0a 2020 2020  editunion",.    
-0000ed80: 2263 7269 636b 6574 222c 0a20 2020 2022  "cricket",.    "
-0000ed90: 6372 6f77 6e22 2c0a 2020 2020 2263 7273  crown",.    "crs
-0000eda0: 222c 0a20 2020 2022 6372 7569 7365 222c  ",.    "cruise",
-0000edb0: 0a20 2020 2022 6372 7569 7365 7322 2c0a  .    "cruises",.
-0000edc0: 2020 2020 2263 7363 222c 0a20 2020 2022      "csc",.    "
-0000edd0: 6375 222c 0a20 2020 2022 6375 6973 696e  cu",.    "cuisin
-0000ede0: 656c 6c61 222c 0a20 2020 2022 6376 222c  ella",.    "cv",
-0000edf0: 0a20 2020 2022 6377 222c 0a20 2020 2022  .    "cw",.    "
-0000ee00: 6378 222c 0a20 2020 2022 6379 222c 0a20  cx",.    "cy",. 
-0000ee10: 2020 2022 6379 6d72 7522 2c0a 2020 2020     "cymru",.    
-0000ee20: 2263 796f 7522 2c0a 2020 2020 2263 7a22  "cyou",.    "cz"
-0000ee30: 2c0a 2020 2020 2320 640a 2020 2020 2264  ,.    # d.    "d
-0000ee40: 6162 7572 222c 0a20 2020 2022 6461 6422  abur",.    "dad"
-0000ee50: 2c0a 2020 2020 2264 616e 6365 222c 0a20  ,.    "dance",. 
-0000ee60: 2020 2022 6461 7461 222c 0a20 2020 2022     "data",.    "
-0000ee70: 6461 7465 222c 0a20 2020 2022 6461 7469  date",.    "dati
-0000ee80: 6e67 222c 0a20 2020 2022 6461 7473 756e  ng",.    "datsun
-0000ee90: 222c 0a20 2020 2022 6461 7922 2c0a 2020  ",.    "day",.  
-0000eea0: 2020 2264 636c 6b22 2c0a 2020 2020 2264    "dclk",.    "d
-0000eeb0: 6473 222c 0a20 2020 2022 6465 222c 0a20  ds",.    "de",. 
-0000eec0: 2020 2022 6465 616c 222c 0a20 2020 2022     "deal",.    "
-0000eed0: 6465 616c 6572 222c 0a20 2020 2022 6465  dealer",.    "de
-0000eee0: 616c 7322 2c0a 2020 2020 2264 6567 7265  als",.    "degre
-0000eef0: 6522 2c0a 2020 2020 2264 656c 6976 6572  e",.    "deliver
-0000ef00: 7922 2c0a 2020 2020 2264 656c 6c22 2c0a  y",.    "dell",.
-0000ef10: 2020 2020 2264 656c 6f69 7474 6522 2c0a      "deloitte",.
-0000ef20: 2020 2020 2264 656c 7461 222c 0a20 2020      "delta",.   
-0000ef30: 2022 6465 6d6f 6372 6174 222c 0a20 2020   "democrat",.   
-0000ef40: 2022 6465 6e74 616c 222c 0a20 2020 2022   "dental",.    "
-0000ef50: 6465 6e74 6973 7422 2c0a 2020 2020 2264  dentist",.    "d
-0000ef60: 6573 6922 2c0a 2020 2020 2264 6573 6967  esi",.    "desig
-0000ef70: 6e22 2c0a 2020 2020 2264 6576 222c 0a20  n",.    "dev",. 
-0000ef80: 2020 2022 6468 6c22 2c0a 2020 2020 2264     "dhl",.    "d
-0000ef90: 6961 6d6f 6e64 7322 2c0a 2020 2020 2264  iamonds",.    "d
-0000efa0: 6965 7422 2c0a 2020 2020 2264 6967 6974  iet",.    "digit
-0000efb0: 616c 222c 0a20 2020 2022 6469 7265 6374  al",.    "direct
-0000efc0: 222c 0a20 2020 2022 6469 7265 6374 6f72  ",.    "director
-0000efd0: 7922 2c0a 2020 2020 2264 6973 636f 756e  y",.    "discoun
-0000efe0: 7422 2c0a 2020 2020 2264 6973 636f 7665  t",.    "discove
-0000eff0: 7222 2c0a 2020 2020 2264 6973 6822 2c0a  r",.    "dish",.
-0000f000: 2020 2020 2264 6979 222c 0a20 2020 2022      "diy",.    "
-0000f010: 646a 222c 0a20 2020 2022 646b 222c 0a20  dj",.    "dk",. 
-0000f020: 2020 2022 646d 222c 0a20 2020 2022 646e     "dm",.    "dn
-0000f030: 7022 2c0a 2020 2020 2264 6f22 2c0a 2020  p",.    "do",.  
-0000f040: 2020 2264 6f63 7322 2c0a 2020 2020 2264    "docs",.    "d
-0000f050: 6f63 746f 7222 2c0a 2020 2020 2264 6f64  octor",.    "dod
-0000f060: 6765 222c 0a20 2020 2022 646f 6722 2c0a  ge",.    "dog",.
-0000f070: 2020 2020 2264 6f68 6122 2c0a 2020 2020      "doha",.    
-0000f080: 2264 6f6d 6169 6e73 222c 0a20 2020 2022  "domains",.    "
-0000f090: 646f 7422 2c0a 2020 2020 2264 6f77 6e6c  dot",.    "downl
-0000f0a0: 6f61 6422 2c0a 2020 2020 2264 7269 7665  oad",.    "drive
-0000f0b0: 222c 0a20 2020 2022 6474 7622 2c0a 2020  ",.    "dtv",.  
-0000f0c0: 2020 2264 7562 6169 222c 0a20 2020 2022    "dubai",.    "
-0000f0d0: 6475 636b 222c 0a20 2020 2022 6475 6e6c  duck",.    "dunl
-0000f0e0: 6f70 222c 0a20 2020 2022 6475 6e73 222c  op",.    "duns",
-0000f0f0: 0a20 2020 2022 6475 706f 6e74 222c 0a20  .    "dupont",. 
-0000f100: 2020 2022 6475 7262 616e 222c 0a20 2020     "durban",.   
-0000f110: 2022 6476 6167 222c 0a20 2020 2022 6476   "dvag",.    "dv
-0000f120: 7222 2c0a 2020 2020 2264 7a22 2c0a 2020  r",.    "dz",.  
-0000f130: 2020 2320 650a 2020 2020 2265 6172 7468    # e.    "earth
-0000f140: 222c 0a20 2020 2022 6561 7422 2c0a 2020  ",.    "eat",.  
-0000f150: 2020 2265 6322 2c0a 2020 2020 2265 636f    "ec",.    "eco
-0000f160: 222c 0a20 2020 2022 6564 656b 6122 2c0a  ",.    "edeka",.
-0000f170: 2020 2020 2265 6475 222c 0a20 2020 2022      "edu",.    "
-0000f180: 6564 7563 6174 696f 6e22 2c0a 2020 2020  education",.    
-0000f190: 2265 6522 2c0a 2020 2020 2265 6722 2c0a  "ee",.    "eg",.
-0000f1a0: 2020 2020 2265 6d61 696c 222c 0a20 2020      "email",.   
-0000f1b0: 2022 656d 6572 636b 222c 0a20 2020 2022   "emerck",.    "
-0000f1c0: 656e 6572 6779 222c 0a20 2020 2022 656e  energy",.    "en
-0000f1d0: 6769 6e65 6572 222c 0a20 2020 2022 656e  gineer",.    "en
-0000f1e0: 6769 6e65 6572 696e 6722 2c0a 2020 2020  gineering",.    
-0000f1f0: 2265 6e74 6572 7072 6973 6573 222c 0a20  "enterprises",. 
-0000f200: 2020 2022 6570 6f73 7422 2c0a 2020 2020     "epost",.    
-0000f210: 2265 7073 6f6e 222c 0a20 2020 2022 6571  "epson",.    "eq
-0000f220: 7569 706d 656e 7422 2c0a 2020 2020 2265  uipment",.    "e
-0000f230: 7222 2c0a 2020 2020 2265 7269 6373 736f  r",.    "ericsso
-0000f240: 6e22 2c0a 2020 2020 2265 726e 6922 2c0a  n",.    "erni",.
-0000f250: 2020 2020 2265 7322 2c0a 2020 2020 2265      "es",.    "e
-0000f260: 7371 222c 0a20 2020 2022 6573 7461 7465  sq",.    "estate
-0000f270: 222c 0a20 2020 2022 6573 7572 616e 6365  ",.    "esurance
-0000f280: 222c 0a20 2020 2022 6574 222c 0a20 2020  ",.    "et",.   
-0000f290: 2022 6574 6973 616c 6174 222c 0a20 2020   "etisalat",.   
-0000f2a0: 2022 6575 222c 0a20 2020 2022 6575 726f   "eu",.    "euro
-0000f2b0: 7669 7369 6f6e 222c 0a20 2020 2022 6575  vision",.    "eu
-0000f2c0: 7322 2c0a 2020 2020 2265 7665 6e74 7322  s",.    "events"
-0000f2d0: 2c0a 2020 2020 2265 7665 7262 616e 6b22  ,.    "everbank"
-0000f2e0: 2c0a 2020 2020 2265 7863 6861 6e67 6522  ,.    "exchange"
-0000f2f0: 2c0a 2020 2020 2265 7870 6572 7422 2c0a  ,.    "expert",.
-0000f300: 2020 2020 2265 7870 6f73 6564 222c 0a20      "exposed",. 
-0000f310: 2020 2022 6578 7072 6573 7322 2c0a 2020     "express",.  
-0000f320: 2020 2265 7874 7261 7370 6163 6522 2c0a    "extraspace",.
-0000f330: 2020 2020 2320 660a 2020 2020 2266 6167      # f.    "fag
-0000f340: 6522 2c0a 2020 2020 2266 6169 6c22 2c0a  e",.    "fail",.
-0000f350: 2020 2020 2266 6169 7277 696e 6473 222c      "fairwinds",
-0000f360: 0a20 2020 2022 6661 6974 6822 2c0a 2020  .    "faith",.  
-0000f370: 2020 2266 616d 696c 7922 2c0a 2020 2020    "family",.    
-0000f380: 2266 616e 222c 0a20 2020 2022 6661 6e73  "fan",.    "fans
-0000f390: 222c 0a20 2020 2022 6661 726d 222c 0a20  ",.    "farm",. 
-0000f3a0: 2020 2022 6661 726d 6572 7322 2c0a 2020     "farmers",.  
-0000f3b0: 2020 2266 6173 6869 6f6e 222c 0a20 2020    "fashion",.   
-0000f3c0: 2022 6661 7374 222c 0a20 2020 2022 6665   "fast",.    "fe
-0000f3d0: 6465 7822 2c0a 2020 2020 2266 6565 6462  dex",.    "feedb
-0000f3e0: 6163 6b22 2c0a 2020 2020 2266 6572 7261  ack",.    "ferra
-0000f3f0: 7269 222c 0a20 2020 2022 6665 7272 6572  ri",.    "ferrer
-0000f400: 6f22 2c0a 2020 2020 2266 6922 2c0a 2020  o",.    "fi",.  
-0000f410: 2020 2266 6961 7422 2c0a 2020 2020 2266    "fiat",.    "f
-0000f420: 6964 656c 6974 7922 2c0a 2020 2020 2266  idelity",.    "f
-0000f430: 6964 6f22 2c0a 2020 2020 2266 696c 6d22  ido",.    "film"
-0000f440: 2c0a 2020 2020 2266 696e 616c 222c 0a20  ,.    "final",. 
-0000f450: 2020 2022 6669 6e61 6e63 6522 2c0a 2020     "finance",.  
-0000f460: 2020 2266 696e 616e 6369 616c 222c 0a20    "financial",. 
-0000f470: 2020 2022 6669 7265 222c 0a20 2020 2022     "fire",.    "
-0000f480: 6669 7265 7374 6f6e 6522 2c0a 2020 2020  firestone",.    
-0000f490: 2266 6972 6d64 616c 6522 2c0a 2020 2020  "firmdale",.    
-0000f4a0: 2266 6973 6822 2c0a 2020 2020 2266 6973  "fish",.    "fis
-0000f4b0: 6869 6e67 222c 0a20 2020 2022 6669 7422  hing",.    "fit"
-0000f4c0: 2c0a 2020 2020 2266 6974 6e65 7373 222c  ,.    "fitness",
-0000f4d0: 0a20 2020 2022 666a 222c 0a20 2020 2022  .    "fj",.    "
-0000f4e0: 666b 222c 0a20 2020 2022 666c 6963 6b72  fk",.    "flickr
-0000f4f0: 222c 0a20 2020 2022 666c 6967 6874 7322  ",.    "flights"
-0000f500: 2c0a 2020 2020 2266 6c69 7222 2c0a 2020  ,.    "flir",.  
-0000f510: 2020 2266 6c6f 7269 7374 222c 0a20 2020    "florist",.   
-0000f520: 2022 666c 6f77 6572 7322 2c0a 2020 2020   "flowers",.    
-0000f530: 2266 6c79 222c 0a20 2020 2022 666d 222c  "fly",.    "fm",
-0000f540: 0a20 2020 2022 666f 222c 0a20 2020 2022  .    "fo",.    "
-0000f550: 666f 6f22 2c0a 2020 2020 2266 6f6f 6422  foo",.    "food"
-0000f560: 2c0a 2020 2020 2266 6f6f 646e 6574 776f  ,.    "foodnetwo
-0000f570: 726b 222c 0a20 2020 2022 666f 6f74 6261  rk",.    "footba
-0000f580: 6c6c 222c 0a20 2020 2022 666f 7264 222c  ll",.    "ford",
-0000f590: 0a20 2020 2022 666f 7265 7822 2c0a 2020  .    "forex",.  
-0000f5a0: 2020 2266 6f72 7361 6c65 222c 0a20 2020    "forsale",.   
-0000f5b0: 2022 666f 7275 6d22 2c0a 2020 2020 2266   "forum",.    "f
-0000f5c0: 6f75 6e64 6174 696f 6e22 2c0a 2020 2020  oundation",.    
-0000f5d0: 2266 6f78 222c 0a20 2020 2022 6672 222c  "fox",.    "fr",
-0000f5e0: 0a20 2020 2022 6672 6565 222c 0a20 2020  .    "free",.   
-0000f5f0: 2022 6672 6573 656e 6975 7322 2c0a 2020   "fresenius",.  
-0000f600: 2020 2266 726c 222c 0a20 2020 2022 6672    "frl",.    "fr
-0000f610: 6f67 616e 7322 2c0a 2020 2020 2266 726f  ogans",.    "fro
-0000f620: 6e74 646f 6f72 222c 0a20 2020 2022 6672  ntdoor",.    "fr
-0000f630: 6f6e 7469 6572 222c 0a20 2020 2022 6674  ontier",.    "ft
-0000f640: 7222 2c0a 2020 2020 2266 756a 6974 7375  r",.    "fujitsu
-0000f650: 222c 0a20 2020 2022 6675 6a69 7865 726f  ",.    "fujixero
-0000f660: 7822 2c0a 2020 2020 2266 756e 222c 0a20  x",.    "fun",. 
-0000f670: 2020 2022 6675 6e64 222c 0a20 2020 2022     "fund",.    "
-0000f680: 6675 726e 6974 7572 6522 2c0a 2020 2020  furniture",.    
-0000f690: 2266 7574 626f 6c22 2c0a 2020 2020 2266  "futbol",.    "f
-0000f6a0: 7969 222c 0a20 2020 2023 2067 0a20 2020  yi",.    # g.   
-0000f6b0: 2022 6761 222c 0a20 2020 2022 6761 6c22   "ga",.    "gal"
-0000f6c0: 2c0a 2020 2020 2267 616c 6c65 7279 222c  ,.    "gallery",
-0000f6d0: 0a20 2020 2022 6761 6c6c 6f22 2c0a 2020  .    "gallo",.  
-0000f6e0: 2020 2267 616c 6c75 7022 2c0a 2020 2020    "gallup",.    
-0000f6f0: 2267 616d 6522 2c0a 2020 2020 2267 616d  "game",.    "gam
-0000f700: 6573 222c 0a20 2020 2022 6761 7022 2c0a  es",.    "gap",.
-0000f710: 2020 2020 2267 6172 6465 6e22 2c0a 2020      "garden",.  
-0000f720: 2020 2267 6222 2c0a 2020 2020 2267 6269    "gb",.    "gbi
-0000f730: 7a22 2c0a 2020 2020 2267 6422 2c0a 2020  z",.    "gd",.  
-0000f740: 2020 2267 646e 222c 0a20 2020 2022 6765    "gdn",.    "ge
-0000f750: 222c 0a20 2020 2022 6765 6122 2c0a 2020  ",.    "gea",.  
-0000f760: 2020 2267 656e 7422 2c0a 2020 2020 2267    "gent",.    "g
-0000f770: 656e 7469 6e67 222c 0a20 2020 2022 6765  enting",.    "ge
-0000f780: 6f72 6765 222c 0a20 2020 2022 6766 222c  orge",.    "gf",
-0000f790: 0a20 2020 2022 6767 222c 0a20 2020 2022  .    "gg",.    "
-0000f7a0: 6767 6565 222c 0a20 2020 2022 6768 222c  ggee",.    "gh",
-0000f7b0: 0a20 2020 2022 6769 222c 0a20 2020 2022  .    "gi",.    "
-0000f7c0: 6769 6674 222c 0a20 2020 2022 6769 6674  gift",.    "gift
-0000f7d0: 7322 2c0a 2020 2020 2267 6976 6573 222c  s",.    "gives",
-0000f7e0: 0a20 2020 2022 6769 7669 6e67 222c 0a20  .    "giving",. 
-0000f7f0: 2020 2022 676c 222c 0a20 2020 2022 676c     "gl",.    "gl
-0000f800: 6164 6522 2c0a 2020 2020 2267 6c61 7373  ade",.    "glass
-0000f810: 222c 0a20 2020 2022 676c 6522 2c0a 2020  ",.    "gle",.  
-0000f820: 2020 2267 6c6f 6261 6c22 2c0a 2020 2020    "global",.    
-0000f830: 2267 6c6f 626f 222c 0a20 2020 2022 676d  "globo",.    "gm
-0000f840: 222c 0a20 2020 2022 676d 6169 6c22 2c0a  ",.    "gmail",.
-0000f850: 2020 2020 2267 6d62 6822 2c0a 2020 2020      "gmbh",.    
-0000f860: 2267 6d6f 222c 0a20 2020 2022 676d 7822  "gmo",.    "gmx"
-0000f870: 2c0a 2020 2020 2267 6e22 2c0a 2020 2020  ,.    "gn",.    
-0000f880: 2267 6f64 6164 6479 222c 0a20 2020 2022  "godaddy",.    "
-0000f890: 676f 6c64 222c 0a20 2020 2022 676f 6c64  gold",.    "gold
-0000f8a0: 706f 696e 7422 2c0a 2020 2020 2267 6f6c  point",.    "gol
-0000f8b0: 6622 2c0a 2020 2020 2267 6f6f 222c 0a20  f",.    "goo",. 
-0000f8c0: 2020 2022 676f 6f64 6861 6e64 7322 2c0a     "goodhands",.
-0000f8d0: 2020 2020 2267 6f6f 6479 6561 7222 2c0a      "goodyear",.
-0000f8e0: 2020 2020 2267 6f6f 6722 2c0a 2020 2020      "goog",.    
-0000f8f0: 2267 6f6f 676c 6522 2c0a 2020 2020 2267  "google",.    "g
-0000f900: 6f70 222c 0a20 2020 2022 676f 7422 2c0a  op",.    "got",.
-0000f910: 2020 2020 2267 6f76 222c 0a20 2020 2022      "gov",.    "
-0000f920: 6770 222c 0a20 2020 2022 6771 222c 0a20  gp",.    "gq",. 
-0000f930: 2020 2022 6772 222c 0a20 2020 2022 6772     "gr",.    "gr
-0000f940: 6169 6e67 6572 222c 0a20 2020 2022 6772  ainger",.    "gr
-0000f950: 6170 6869 6373 222c 0a20 2020 2022 6772  aphics",.    "gr
-0000f960: 6174 6973 222c 0a20 2020 2022 6772 6565  atis",.    "gree
-0000f970: 6e22 2c0a 2020 2020 2267 7269 7065 222c  n",.    "gripe",
-0000f980: 0a20 2020 2022 6772 6f63 6572 7922 2c0a  .    "grocery",.
-0000f990: 2020 2020 2267 726f 7570 222c 0a20 2020      "group",.   
-0000f9a0: 2022 6773 222c 0a20 2020 2022 6774 222c   "gs",.    "gt",
-0000f9b0: 0a20 2020 2022 6775 222c 0a20 2020 2022  .    "gu",.    "
-0000f9c0: 6775 6172 6469 616e 222c 0a20 2020 2022  guardian",.    "
-0000f9d0: 6775 6363 6922 2c0a 2020 2020 2267 7567  gucci",.    "gug
-0000f9e0: 6522 2c0a 2020 2020 2267 7569 6465 222c  e",.    "guide",
-0000f9f0: 0a20 2020 2022 6775 6974 6172 7322 2c0a  .    "guitars",.
-0000fa00: 2020 2020 2267 7572 7522 2c0a 2020 2020      "guru",.    
-0000fa10: 2267 7722 2c0a 2020 2020 2267 7922 2c0a  "gw",.    "gy",.
-0000fa20: 2020 2020 2320 680a 2020 2020 2268 6169      # h.    "hai
-0000fa30: 7222 2c0a 2020 2020 2268 616d 6275 7267  r",.    "hamburg
-0000fa40: 222c 0a20 2020 2022 6861 6e67 6f75 7422  ",.    "hangout"
-0000fa50: 2c0a 2020 2020 2268 6175 7322 2c0a 2020  ,.    "haus",.  
-0000fa60: 2020 2268 626f 222c 0a20 2020 2022 6864    "hbo",.    "hd
-0000fa70: 6663 222c 0a20 2020 2022 6864 6663 6261  fc",.    "hdfcba
-0000fa80: 6e6b 222c 0a20 2020 2022 6865 616c 7468  nk",.    "health
-0000fa90: 222c 0a20 2020 2022 6865 616c 7468 6361  ",.    "healthca
-0000faa0: 7265 222c 0a20 2020 2022 6865 6c70 222c  re",.    "help",
-0000fab0: 0a20 2020 2022 6865 6c73 696e 6b69 222c  .    "helsinki",
-0000fac0: 0a20 2020 2022 6865 7265 222c 0a20 2020  .    "here",.   
-0000fad0: 2022 6865 726d 6573 222c 0a20 2020 2022   "hermes",.    "
-0000fae0: 6867 7476 222c 0a20 2020 2022 6869 7068  hgtv",.    "hiph
-0000faf0: 6f70 222c 0a20 2020 2022 6869 7361 6d69  op",.    "hisami
-0000fb00: 7473 7522 2c0a 2020 2020 2268 6974 6163  tsu",.    "hitac
-0000fb10: 6869 222c 0a20 2020 2022 6869 7622 2c0a  hi",.    "hiv",.
-0000fb20: 2020 2020 2268 6b22 2c0a 2020 2020 2268      "hk",.    "h
-0000fb30: 6b74 222c 0a20 2020 2022 686d 222c 0a20  kt",.    "hm",. 
-0000fb40: 2020 2022 686e 222c 0a20 2020 2022 686f     "hn",.    "ho
-0000fb50: 636b 6579 222c 0a20 2020 2022 686f 6c64  ckey",.    "hold
-0000fb60: 696e 6773 222c 0a20 2020 2022 686f 6c69  ings",.    "holi
-0000fb70: 6461 7922 2c0a 2020 2020 2268 6f6d 6564  day",.    "homed
-0000fb80: 6570 6f74 222c 0a20 2020 2022 686f 6d65  epot",.    "home
-0000fb90: 676f 6f64 7322 2c0a 2020 2020 2268 6f6d  goods",.    "hom
-0000fba0: 6573 222c 0a20 2020 2022 686f 6d65 7365  es",.    "homese
-0000fbb0: 6e73 6522 2c0a 2020 2020 2268 6f6e 6461  nse",.    "honda
-0000fbc0: 222c 0a20 2020 2022 686f 6e65 7977 656c  ",.    "honeywel
-0000fbd0: 6c22 2c0a 2020 2020 2268 6f72 7365 222c  l",.    "horse",
-0000fbe0: 0a20 2020 2022 686f 7370 6974 616c 222c  .    "hospital",
-0000fbf0: 0a20 2020 2022 686f 7374 222c 0a20 2020  .    "host",.   
-0000fc00: 2022 686f 7374 696e 6722 2c0a 2020 2020   "hosting",.    
-0000fc10: 2268 6f74 222c 0a20 2020 2022 686f 7465  "hot",.    "hote
-0000fc20: 6c65 7322 2c0a 2020 2020 2268 6f74 656c  les",.    "hotel
-0000fc30: 7322 2c0a 2020 2020 2268 6f74 6d61 696c  s",.    "hotmail
-0000fc40: 222c 0a20 2020 2022 686f 7573 6522 2c0a  ",.    "house",.
-0000fc50: 2020 2020 2268 6f77 222c 0a20 2020 2022      "how",.    "
-0000fc60: 6872 222c 0a20 2020 2022 6873 6263 222c  hr",.    "hsbc",
-0000fc70: 0a20 2020 2022 6874 222c 0a20 2020 2022  .    "ht",.    "
-0000fc80: 6875 222c 0a20 2020 2022 6875 6768 6573  hu",.    "hughes
-0000fc90: 222c 0a20 2020 2022 6879 6174 7422 2c0a  ",.    "hyatt",.
-0000fca0: 2020 2020 2268 7975 6e64 6169 222c 0a20      "hyundai",. 
-0000fcb0: 2020 2023 2069 0a20 2020 2022 6962 6d22     # i.    "ibm"
-0000fcc0: 2c0a 2020 2020 2269 6362 6322 2c0a 2020  ,.    "icbc",.  
-0000fcd0: 2020 2269 6365 222c 0a20 2020 2022 6963    "ice",.    "ic
-0000fce0: 7522 2c0a 2020 2020 2269 6422 2c0a 2020  u",.    "id",.  
-0000fcf0: 2020 2269 6522 2c0a 2020 2020 2269 6565    "ie",.    "iee
-0000fd00: 6522 2c0a 2020 2020 2269 666d 222c 0a20  e",.    "ifm",. 
-0000fd10: 2020 2022 696b 616e 6f22 2c0a 2020 2020     "ikano",.    
-0000fd20: 2269 6c22 2c0a 2020 2020 2269 6d22 2c0a  "il",.    "im",.
-0000fd30: 2020 2020 2269 6d61 6d61 7422 2c0a 2020      "imamat",.  
-0000fd40: 2020 2269 6d64 6222 2c0a 2020 2020 2269    "imdb",.    "i
-0000fd50: 6d6d 6f22 2c0a 2020 2020 2269 6d6d 6f62  mmo",.    "immob
-0000fd60: 696c 6965 6e22 2c0a 2020 2020 2269 6e22  ilien",.    "in"
-0000fd70: 2c0a 2020 2020 2269 6e64 7573 7472 6965  ,.    "industrie
-0000fd80: 7322 2c0a 2020 2020 2269 6e66 696e 6974  s",.    "infinit
-0000fd90: 6922 2c0a 2020 2020 2269 6e66 6f22 2c0a  i",.    "info",.
-0000fda0: 2020 2020 2269 6e67 222c 0a20 2020 2022      "ing",.    "
-0000fdb0: 696e 6b22 2c0a 2020 2020 2269 6e73 7469  ink",.    "insti
-0000fdc0: 7475 7465 222c 0a20 2020 2022 696e 7375  tute",.    "insu
-0000fdd0: 7261 6e63 6522 2c0a 2020 2020 2269 6e73  rance",.    "ins
-0000fde0: 7572 6522 2c0a 2020 2020 2269 6e74 222c  ure",.    "int",
-0000fdf0: 0a20 2020 2022 696e 7465 6c22 2c0a 2020  .    "intel",.  
-0000fe00: 2020 2269 6e74 6572 6e61 7469 6f6e 616c    "international
-0000fe10: 222c 0a20 2020 2022 696e 7475 6974 222c  ",.    "intuit",
-0000fe20: 0a20 2020 2022 696e 7665 7374 6d65 6e74  .    "investment
-0000fe30: 7322 2c0a 2020 2020 2269 6f22 2c0a 2020  s",.    "io",.  
-0000fe40: 2020 2269 7069 7261 6e67 6122 2c0a 2020    "ipiranga",.  
-0000fe50: 2020 2269 7122 2c0a 2020 2020 2269 7222    "iq",.    "ir"
-0000fe60: 2c0a 2020 2020 2269 7269 7368 222c 0a20  ,.    "irish",. 
-0000fe70: 2020 2022 6973 222c 0a20 2020 2022 6973     "is",.    "is
-0000fe80: 656c 6563 7422 2c0a 2020 2020 2269 736d  elect",.    "ism
-0000fe90: 6169 6c69 222c 0a20 2020 2022 6973 7422  aili",.    "ist"
-0000fea0: 2c0a 2020 2020 2269 7374 616e 6275 6c22  ,.    "istanbul"
-0000feb0: 2c0a 2020 2020 2269 7422 2c0a 2020 2020  ,.    "it",.    
-0000fec0: 2269 7461 7522 2c0a 2020 2020 2269 7476  "itau",.    "itv
-0000fed0: 222c 0a20 2020 2022 6976 6563 6f22 2c0a  ",.    "iveco",.
-0000fee0: 2020 2020 2269 7763 222c 0a20 2020 2023      "iwc",.    #
-0000fef0: 206a 0a20 2020 2022 6a61 6775 6172 222c   j.    "jaguar",
-0000ff00: 0a20 2020 2022 6a61 7661 222c 0a20 2020  .    "java",.   
-0000ff10: 2022 6a63 6222 2c0a 2020 2020 226a 6370   "jcb",.    "jcp
-0000ff20: 222c 0a20 2020 2022 6a65 222c 0a20 2020  ",.    "je",.   
-0000ff30: 2022 6a65 6570 222c 0a20 2020 2022 6a65   "jeep",.    "je
-0000ff40: 747a 7422 2c0a 2020 2020 226a 6577 656c  tzt",.    "jewel
-0000ff50: 7279 222c 0a20 2020 2022 6a69 6f22 2c0a  ry",.    "jio",.
-0000ff60: 2020 2020 226a 6c63 222c 0a20 2020 2022      "jlc",.    "
-0000ff70: 6a6c 6c22 2c0a 2020 2020 226a 6d22 2c0a  jll",.    "jm",.
-0000ff80: 2020 2020 226a 6d70 222c 0a20 2020 2022      "jmp",.    "
-0000ff90: 6a6e 6a22 2c0a 2020 2020 226a 6f22 2c0a  jnj",.    "jo",.
-0000ffa0: 2020 2020 226a 6f62 7322 2c0a 2020 2020      "jobs",.    
-0000ffb0: 226a 6f62 7572 6722 2c0a 2020 2020 226a  "joburg",.    "j
-0000ffc0: 6f74 222c 0a20 2020 2022 6a6f 7922 2c0a  ot",.    "joy",.
-0000ffd0: 2020 2020 226a 7022 2c0a 2020 2020 226a      "jp",.    "j
-0000ffe0: 706d 6f72 6761 6e22 2c0a 2020 2020 226a  pmorgan",.    "j
-0000fff0: 7072 7322 2c0a 2020 2020 226a 7565 676f  prs",.    "juego
-00010000: 7322 2c0a 2020 2020 226a 756e 6970 6572  s",.    "juniper
-00010010: 222c 0a20 2020 2023 206b 0a20 2020 2022  ",.    # k.    "
-00010020: 6b61 7566 656e 222c 0a20 2020 2022 6b64  kaufen",.    "kd
-00010030: 6469 222c 0a20 2020 2022 6b65 222c 0a20  di",.    "ke",. 
-00010040: 2020 2022 6b65 7272 7968 6f74 656c 7322     "kerryhotels"
-00010050: 2c0a 2020 2020 226b 6572 7279 6c6f 6769  ,.    "kerrylogi
-00010060: 7374 6963 7322 2c0a 2020 2020 226b 6572  stics",.    "ker
-00010070: 7279 7072 6f70 6572 7469 6573 222c 0a20  ryproperties",. 
-00010080: 2020 2022 6b66 6822 2c0a 2020 2020 226b     "kfh",.    "k
-00010090: 6722 2c0a 2020 2020 226b 6822 2c0a 2020  g",.    "kh",.  
-000100a0: 2020 226b 6922 2c0a 2020 2020 226b 6961    "ki",.    "kia
-000100b0: 222c 0a20 2020 2022 6b69 6d22 2c0a 2020  ",.    "kim",.  
-000100c0: 2020 226b 696e 6465 7222 2c0a 2020 2020    "kinder",.    
-000100d0: 226b 696e 646c 6522 2c0a 2020 2020 226b  "kindle",.    "k
-000100e0: 6974 6368 656e 222c 0a20 2020 2022 6b69  itchen",.    "ki
-000100f0: 7769 222c 0a20 2020 2022 6b6d 222c 0a20  wi",.    "km",. 
-00010100: 2020 2022 6b6e 222c 0a20 2020 2022 6b6f     "kn",.    "ko
-00010110: 656c 6e22 2c0a 2020 2020 226b 6f6d 6174  eln",.    "komat
-00010120: 7375 222c 0a20 2020 2022 6b6f 7368 6572  su",.    "kosher
-00010130: 222c 0a20 2020 2022 6b70 222c 0a20 2020  ",.    "kp",.   
-00010140: 2022 6b70 6d67 222c 0a20 2020 2022 6b70   "kpmg",.    "kp
-00010150: 6e22 2c0a 2020 2020 226b 7222 2c0a 2020  n",.    "kr",.  
-00010160: 2020 226b 7264 222c 0a20 2020 2022 6b72    "krd",.    "kr
-00010170: 6564 222c 0a20 2020 2022 6b75 6f6b 6772  ed",.    "kuokgr
-00010180: 6f75 7022 2c0a 2020 2020 226b 7722 2c0a  oup",.    "kw",.
-00010190: 2020 2020 226b 7922 2c0a 2020 2020 226b      "ky",.    "k
-000101a0: 796f 746f 222c 0a20 2020 2022 6b7a 222c  yoto",.    "kz",
-000101b0: 0a20 2020 2023 206c 0a20 2020 2022 6c61  .    # l.    "la
-000101c0: 222c 0a20 2020 2022 6c61 6361 6978 6122  ",.    "lacaixa"
-000101d0: 2c0a 2020 2020 226c 6164 6272 6f6b 6573  ,.    "ladbrokes
-000101e0: 222c 0a20 2020 2022 6c61 6d62 6f72 6768  ",.    "lamborgh
-000101f0: 696e 6922 2c0a 2020 2020 226c 616d 6572  ini",.    "lamer
-00010200: 222c 0a20 2020 2022 6c61 6e63 6173 7465  ",.    "lancaste
-00010210: 7222 2c0a 2020 2020 226c 616e 6369 6122  r",.    "lancia"
-00010220: 2c0a 2020 2020 226c 616e 636f 6d65 222c  ,.    "lancome",
-00010230: 0a20 2020 2022 6c61 6e64 222c 0a20 2020  .    "land",.   
-00010240: 2022 6c61 6e64 726f 7665 7222 2c0a 2020   "landrover",.  
-00010250: 2020 226c 616e 7865 7373 222c 0a20 2020    "lanxess",.   
-00010260: 2022 6c61 7361 6c6c 6522 2c0a 2020 2020   "lasalle",.    
-00010270: 226c 6174 222c 0a20 2020 2022 6c61 7469  "lat",.    "lati
-00010280: 6e6f 222c 0a20 2020 2022 6c61 7472 6f62  no",.    "latrob
-00010290: 6522 2c0a 2020 2020 226c 6177 222c 0a20  e",.    "law",. 
-000102a0: 2020 2022 6c61 7779 6572 222c 0a20 2020     "lawyer",.   
-000102b0: 2022 6c62 222c 0a20 2020 2022 6c63 222c   "lb",.    "lc",
-000102c0: 0a20 2020 2022 6c64 7322 2c0a 2020 2020  .    "lds",.    
-000102d0: 226c 6561 7365 222c 0a20 2020 2022 6c65  "lease",.    "le
-000102e0: 636c 6572 6322 2c0a 2020 2020 226c 6566  clerc",.    "lef
-000102f0: 7261 6b22 2c0a 2020 2020 226c 6567 616c  rak",.    "legal
-00010300: 222c 0a20 2020 2022 6c65 676f 222c 0a20  ",.    "lego",. 
-00010310: 2020 2022 6c65 7875 7322 2c0a 2020 2020     "lexus",.    
-00010320: 226c 6762 7422 2c0a 2020 2020 226c 6922  "lgbt",.    "li"
-00010330: 2c0a 2020 2020 226c 6961 6973 6f6e 222c  ,.    "liaison",
-00010340: 0a20 2020 2022 6c69 646c 222c 0a20 2020  .    "lidl",.   
-00010350: 2022 6c69 6665 222c 0a20 2020 2022 6c69   "life",.    "li
-00010360: 6665 696e 7375 7261 6e63 6522 2c0a 2020  feinsurance",.  
-00010370: 2020 226c 6966 6573 7479 6c65 222c 0a20    "lifestyle",. 
-00010380: 2020 2022 6c69 6768 7469 6e67 222c 0a20     "lighting",. 
-00010390: 2020 2022 6c69 6b65 222c 0a20 2020 2022     "like",.    "
-000103a0: 6c69 6c6c 7922 2c0a 2020 2020 226c 696d  lilly",.    "lim
-000103b0: 6974 6564 222c 0a20 2020 2022 6c69 6d6f  ited",.    "limo
-000103c0: 222c 0a20 2020 2022 6c69 6e63 6f6c 6e22  ",.    "lincoln"
-000103d0: 2c0a 2020 2020 226c 696e 6465 222c 0a20  ,.    "linde",. 
-000103e0: 2020 2022 6c69 6e6b 222c 0a20 2020 2022     "link",.    "
-000103f0: 6c69 7073 7922 2c0a 2020 2020 226c 6976  lipsy",.    "liv
-00010400: 6522 2c0a 2020 2020 226c 6976 696e 6722  e",.    "living"
-00010410: 2c0a 2020 2020 226c 6978 696c 222c 0a20  ,.    "lixil",. 
-00010420: 2020 2022 6c6b 222c 0a20 2020 2022 6c6f     "lk",.    "lo
-00010430: 616e 222c 0a20 2020 2022 6c6f 616e 7322  an",.    "loans"
-00010440: 2c0a 2020 2020 226c 6f63 616c 686f 7374  ,.    "localhost
-00010450: 222c 0a20 2020 2022 6c6f 636b 6572 222c  ",.    "locker",
-00010460: 0a20 2020 2022 6c6f 6375 7322 2c0a 2020  .    "locus",.  
-00010470: 2020 226c 6f66 7422 2c0a 2020 2020 226c    "loft",.    "l
-00010480: 6f6c 222c 0a20 2020 2022 6c6f 6e64 6f6e  ol",.    "london
-00010490: 222c 0a20 2020 2022 6c6f 7474 6522 2c0a  ",.    "lotte",.
-000104a0: 2020 2020 226c 6f74 746f 222c 0a20 2020      "lotto",.   
-000104b0: 2022 6c6f 7665 222c 0a20 2020 2022 6c70   "love",.    "lp
-000104c0: 6c22 2c0a 2020 2020 226c 706c 6669 6e61  l",.    "lplfina
-000104d0: 6e63 6961 6c22 2c0a 2020 2020 226c 7222  ncial",.    "lr"
-000104e0: 2c0a 2020 2020 226c 7322 2c0a 2020 2020  ,.    "ls",.    
-000104f0: 226c 7422 2c0a 2020 2020 226c 7464 222c  "lt",.    "ltd",
-00010500: 0a20 2020 2022 6c74 6461 222c 0a20 2020  .    "ltda",.   
-00010510: 2022 6c75 222c 0a20 2020 2022 6c75 6e64   "lu",.    "lund
-00010520: 6265 636b 222c 0a20 2020 2022 6c75 7069  beck",.    "lupi
-00010530: 6e22 2c0a 2020 2020 226c 7578 6522 2c0a  n",.    "luxe",.
-00010540: 2020 2020 226c 7578 7572 7922 2c0a 2020      "luxury",.  
-00010550: 2020 226c 7622 2c0a 2020 2020 226c 7922    "lv",.    "ly"
-00010560: 2c0a 2020 2020 2320 6d0a 2020 2020 226d  ,.    # m.    "m
-00010570: 6122 2c0a 2020 2020 226d 6163 7973 222c  a",.    "macys",
-00010580: 0a20 2020 2022 6d61 6472 6964 222c 0a20  .    "madrid",. 
-00010590: 2020 2022 6d61 6966 222c 0a20 2020 2022     "maif",.    "
-000105a0: 6d61 6973 6f6e 222c 0a20 2020 2022 6d61  maison",.    "ma
-000105b0: 6b65 7570 222c 0a20 2020 2022 6d61 6e22  keup",.    "man"
-000105c0: 2c0a 2020 2020 226d 616e 6167 656d 656e  ,.    "managemen
-000105d0: 7422 2c0a 2020 2020 226d 616e 676f 222c  t",.    "mango",
-000105e0: 0a20 2020 2022 6d61 7022 2c0a 2020 2020  .    "map",.    
-000105f0: 226d 6172 6b65 7422 2c0a 2020 2020 226d  "market",.    "m
-00010600: 6172 6b65 7469 6e67 222c 0a20 2020 2022  arketing",.    "
-00010610: 6d61 726b 6574 7322 2c0a 2020 2020 226d  markets",.    "m
-00010620: 6172 7269 6f74 7422 2c0a 2020 2020 226d  arriott",.    "m
-00010630: 6172 7368 616c 6c73 222c 0a20 2020 2022  arshalls",.    "
-00010640: 6d61 7365 7261 7469 222c 0a20 2020 2022  maserati",.    "
-00010650: 6d61 7474 656c 222c 0a20 2020 2022 6d62  mattel",.    "mb
-00010660: 6122 2c0a 2020 2020 226d 6322 2c0a 2020  a",.    "mc",.  
-00010670: 2020 226d 636b 696e 7365 7922 2c0a 2020    "mckinsey",.  
-00010680: 2020 226d 6422 2c0a 2020 2020 226d 6522    "md",.    "me"
-00010690: 2c0a 2020 2020 226d 6564 222c 0a20 2020  ,.    "med",.   
-000106a0: 2022 6d65 6469 6122 2c0a 2020 2020 226d   "media",.    "m
-000106b0: 6565 7422 2c0a 2020 2020 226d 656c 626f  eet",.    "melbo
-000106c0: 7572 6e65 222c 0a20 2020 2022 6d65 6d65  urne",.    "meme
-000106d0: 222c 0a20 2020 2022 6d65 6d6f 7269 616c  ",.    "memorial
-000106e0: 222c 0a20 2020 2022 6d65 6e22 2c0a 2020  ",.    "men",.  
-000106f0: 2020 226d 656e 7522 2c0a 2020 2020 226d    "menu",.    "m
-00010700: 656f 222c 0a20 2020 2022 6d65 7263 6b6d  eo",.    "merckm
-00010710: 7364 222c 0a20 2020 2022 6d65 746c 6966  sd",.    "metlif
-00010720: 6522 2c0a 2020 2020 226d 6722 2c0a 2020  e",.    "mg",.  
-00010730: 2020 226d 6822 2c0a 2020 2020 226d 6961    "mh",.    "mia
-00010740: 6d69 222c 0a20 2020 2022 6d69 6372 6f73  mi",.    "micros
-00010750: 6f66 7422 2c0a 2020 2020 226d 696c 222c  oft",.    "mil",
-00010760: 0a20 2020 2022 6d69 6e69 222c 0a20 2020  .    "mini",.   
-00010770: 2022 6d69 6e74 222c 0a20 2020 2022 6d69   "mint",.    "mi
-00010780: 7422 2c0a 2020 2020 226d 6974 7375 6269  t",.    "mitsubi
-00010790: 7368 6922 2c0a 2020 2020 226d 6b22 2c0a  shi",.    "mk",.
-000107a0: 2020 2020 226d 6c22 2c0a 2020 2020 226d      "ml",.    "m
-000107b0: 6c62 222c 0a20 2020 2022 6d6c 7322 2c0a  lb",.    "mls",.
-000107c0: 2020 2020 226d 6d22 2c0a 2020 2020 226d      "mm",.    "m
-000107d0: 6d61 222c 0a20 2020 2022 6d6e 222c 0a20  ma",.    "mn",. 
-000107e0: 2020 2022 6d6f 222c 0a20 2020 2022 6d6f     "mo",.    "mo
-000107f0: 6269 222c 0a20 2020 2022 6d6f 6269 6c65  bi",.    "mobile
-00010800: 222c 0a20 2020 2022 6d6f 6269 6c79 222c  ",.    "mobily",
-00010810: 0a20 2020 2022 6d6f 6461 222c 0a20 2020  .    "moda",.   
-00010820: 2022 6d6f 6522 2c0a 2020 2020 226d 6f69   "moe",.    "moi
-00010830: 222c 0a20 2020 2022 6d6f 6d22 2c0a 2020  ",.    "mom",.  
-00010840: 2020 226d 6f6e 6173 6822 2c0a 2020 2020    "monash",.    
-00010850: 226d 6f6e 6579 222c 0a20 2020 2022 6d6f  "money",.    "mo
-00010860: 6e73 7465 7222 2c0a 2020 2020 226d 6f70  nster",.    "mop
-00010870: 6172 222c 0a20 2020 2022 6d6f 726d 6f6e  ar",.    "mormon
-00010880: 222c 0a20 2020 2022 6d6f 7274 6761 6765  ",.    "mortgage
-00010890: 222c 0a20 2020 2022 6d6f 7363 6f77 222c  ",.    "moscow",
-000108a0: 0a20 2020 2022 6d6f 746f 222c 0a20 2020  .    "moto",.   
-000108b0: 2022 6d6f 746f 7263 7963 6c65 7322 2c0a   "motorcycles",.
-000108c0: 2020 2020 226d 6f76 222c 0a20 2020 2022      "mov",.    "
-000108d0: 6d6f 7669 6522 2c0a 2020 2020 226d 6f76  movie",.    "mov
-000108e0: 6973 7461 7222 2c0a 2020 2020 226d 7022  istar",.    "mp"
-000108f0: 2c0a 2020 2020 226d 7122 2c0a 2020 2020  ,.    "mq",.    
-00010900: 226d 7222 2c0a 2020 2020 226d 7322 2c0a  "mr",.    "ms",.
-00010910: 2020 2020 226d 7364 222c 0a20 2020 2022      "msd",.    "
-00010920: 6d74 222c 0a20 2020 2022 6d74 6e22 2c0a  mt",.    "mtn",.
-00010930: 2020 2020 226d 7472 222c 0a20 2020 2022      "mtr",.    "
-00010940: 6d75 222c 0a20 2020 2022 6d75 7365 756d  mu",.    "museum
-00010950: 222c 0a20 2020 2022 6d75 7475 616c 222c  ",.    "mutual",
-00010960: 0a20 2020 2022 6d76 222c 0a20 2020 2022  .    "mv",.    "
-00010970: 6d77 222c 0a20 2020 2022 6d78 222c 0a20  mw",.    "mx",. 
-00010980: 2020 2022 6d79 222c 0a20 2020 2022 6d7a     "my",.    "mz
-00010990: 222c 0a20 2020 2023 206e 0a20 2020 2022  ",.    # n.    "
-000109a0: 6e61 222c 0a20 2020 2022 6e61 6222 2c0a  na",.    "nab",.
-000109b0: 2020 2020 226e 6164 6578 222c 0a20 2020      "nadex",.   
-000109c0: 2022 6e61 676f 7961 222c 0a20 2020 2022   "nagoya",.    "
-000109d0: 6e61 6d65 222c 0a20 2020 2022 6e61 7469  name",.    "nati
-000109e0: 6f6e 7769 6465 222c 0a20 2020 2022 6e61  onwide",.    "na
-000109f0: 7475 7261 222c 0a20 2020 2022 6e61 7679  tura",.    "navy
-00010a00: 222c 0a20 2020 2022 6e62 6122 2c0a 2020  ",.    "nba",.  
-00010a10: 2020 226e 6322 2c0a 2020 2020 226e 6522    "nc",.    "ne"
-00010a20: 2c0a 2020 2020 226e 6563 222c 0a20 2020  ,.    "nec",.   
-00010a30: 2022 6e65 7422 2c0a 2020 2020 226e 6574   "net",.    "net
-00010a40: 6261 6e6b 222c 0a20 2020 2022 6e65 7466  bank",.    "netf
-00010a50: 6c69 7822 2c0a 2020 2020 226e 6574 776f  lix",.    "netwo
-00010a60: 726b 222c 0a20 2020 2022 6e65 7573 7461  rk",.    "neusta
-00010a70: 7222 2c0a 2020 2020 226e 6577 222c 0a20  r",.    "new",. 
-00010a80: 2020 2022 6e65 7768 6f6c 6c61 6e64 222c     "newholland",
-00010a90: 0a20 2020 2022 6e65 7773 222c 0a20 2020  .    "news",.   
-00010aa0: 2022 6e65 7874 222c 0a20 2020 2022 6e65   "next",.    "ne
-00010ab0: 7874 6469 7265 6374 222c 0a20 2020 2022  xtdirect",.    "
-00010ac0: 6e65 7875 7322 2c0a 2020 2020 226e 6622  nexus",.    "nf"
-00010ad0: 2c0a 2020 2020 226e 666c 222c 0a20 2020  ,.    "nfl",.   
-00010ae0: 2022 6e67 222c 0a20 2020 2022 6e67 6f22   "ng",.    "ngo"
-00010af0: 2c0a 2020 2020 226e 686b 222c 0a20 2020  ,.    "nhk",.   
-00010b00: 2022 6e69 222c 0a20 2020 2022 6e69 636f   "ni",.    "nico
-00010b10: 222c 0a20 2020 2022 6e69 6b65 222c 0a20  ",.    "nike",. 
-00010b20: 2020 2022 6e69 6b6f 6e22 2c0a 2020 2020     "nikon",.    
-00010b30: 226e 696e 6a61 222c 0a20 2020 2022 6e69  "ninja",.    "ni
-00010b40: 7373 616e 222c 0a20 2020 2022 6e69 7373  ssan",.    "niss
-00010b50: 6179 222c 0a20 2020 2022 6e6c 222c 0a20  ay",.    "nl",. 
-00010b60: 2020 2022 6e6f 222c 0a20 2020 2022 6e6f     "no",.    "no
-00010b70: 6b69 6122 2c0a 2020 2020 226e 6f72 7468  kia",.    "north
-00010b80: 7765 7374 6572 6e6d 7574 7561 6c22 2c0a  westernmutual",.
-00010b90: 2020 2020 226e 6f72 746f 6e22 2c0a 2020      "norton",.  
-00010ba0: 2020 226e 6f77 222c 0a20 2020 2022 6e6f    "now",.    "no
-00010bb0: 7772 757a 222c 0a20 2020 2022 6e6f 7774  wruz",.    "nowt
-00010bc0: 7622 2c0a 2020 2020 226e 7022 2c0a 2020  v",.    "np",.  
-00010bd0: 2020 226e 7222 2c0a 2020 2020 226e 7261    "nr",.    "nra
-00010be0: 222c 0a20 2020 2022 6e72 7722 2c0a 2020  ",.    "nrw",.  
-00010bf0: 2020 226e 7474 222c 0a20 2020 2022 6e75    "ntt",.    "nu
-00010c00: 222c 0a20 2020 2022 6e79 6322 2c0a 2020  ",.    "nyc",.  
-00010c10: 2020 226e 7a22 2c0a 2020 2020 2320 6f0a    "nz",.    # o.
-00010c20: 2020 2020 226f 6269 222c 0a20 2020 2022      "obi",.    "
-00010c30: 6f62 7365 7276 6572 222c 0a20 2020 2022  observer",.    "
-00010c40: 6f66 6622 2c0a 2020 2020 226f 6666 6963  off",.    "offic
-00010c50: 6522 2c0a 2020 2020 226f 6b69 6e61 7761  e",.    "okinawa
-00010c60: 222c 0a20 2020 2022 6f6c 6179 616e 222c  ",.    "olayan",
-00010c70: 0a20 2020 2022 6f6c 6179 616e 6772 6f75  .    "olayangrou
-00010c80: 7022 2c0a 2020 2020 226f 6c64 6e61 7679  p",.    "oldnavy
-00010c90: 222c 0a20 2020 2022 6f6c 6c6f 222c 0a20  ",.    "ollo",. 
-00010ca0: 2020 2022 6f6d 222c 0a20 2020 2022 6f6d     "om",.    "om
-00010cb0: 6567 6122 2c0a 2020 2020 226f 6e65 222c  ega",.    "one",
-00010cc0: 0a20 2020 2022 6f6e 6722 2c0a 2020 2020  .    "ong",.    
-00010cd0: 226f 6e6c 222c 0a20 2020 2022 6f6e 6c69  "onl",.    "onli
-00010ce0: 6e65 222c 0a20 2020 2022 6f6e 796f 7572  ne",.    "onyour
-00010cf0: 7369 6465 222c 0a20 2020 2022 6f6f 6f22  side",.    "ooo"
-00010d00: 2c0a 2020 2020 226f 7065 6e22 2c0a 2020  ,.    "open",.  
-00010d10: 2020 226f 7261 636c 6522 2c0a 2020 2020    "oracle",.    
-00010d20: 226f 7261 6e67 6522 2c0a 2020 2020 226f  "orange",.    "o
-00010d30: 7267 222c 0a20 2020 2022 6f72 6761 6e69  rg",.    "organi
-00010d40: 6322 2c0a 2020 2020 226f 7269 6769 6e73  c",.    "origins
-00010d50: 222c 0a20 2020 2022 6f73 616b 6122 2c0a  ",.    "osaka",.
-00010d60: 2020 2020 226f 7473 756b 6122 2c0a 2020      "otsuka",.  
-00010d70: 2020 226f 7474 222c 0a20 2020 2022 6f76    "ott",.    "ov
-00010d80: 6822 2c0a 2020 2020 2320 700a 2020 2020  h",.    # p.    
-00010d90: 2270 6122 2c0a 2020 2020 2270 6167 6522  "pa",.    "page"
-00010da0: 2c0a 2020 2020 2270 616e 6173 6f6e 6963  ,.    "panasonic
-00010db0: 222c 0a20 2020 2022 7061 6e65 7261 6922  ",.    "panerai"
-00010dc0: 2c0a 2020 2020 2270 6172 6973 222c 0a20  ,.    "paris",. 
-00010dd0: 2020 2022 7061 7273 222c 0a20 2020 2022     "pars",.    "
-00010de0: 7061 7274 6e65 7273 222c 0a20 2020 2022  partners",.    "
-00010df0: 7061 7274 7322 2c0a 2020 2020 2270 6172  parts",.    "par
-00010e00: 7479 222c 0a20 2020 2022 7061 7373 6167  ty",.    "passag
-00010e10: 656e 7322 2c0a 2020 2020 2270 6179 222c  ens",.    "pay",
-00010e20: 0a20 2020 2022 7063 6377 222c 0a20 2020  .    "pccw",.   
-00010e30: 2022 7065 222c 0a20 2020 2022 7065 7422   "pe",.    "pet"
-00010e40: 2c0a 2020 2020 2270 6622 2c0a 2020 2020  ,.    "pf",.    
-00010e50: 2270 6669 7a65 7222 2c0a 2020 2020 2270  "pfizer",.    "p
-00010e60: 6722 2c0a 2020 2020 2270 6822 2c0a 2020  g",.    "ph",.  
-00010e70: 2020 2270 6861 726d 6163 7922 2c0a 2020    "pharmacy",.  
-00010e80: 2020 2270 6864 222c 0a20 2020 2022 7068    "phd",.    "ph
-00010e90: 696c 6970 7322 2c0a 2020 2020 2270 686f  ilips",.    "pho
-00010ea0: 6e65 222c 0a20 2020 2022 7068 6f74 6f22  ne",.    "photo"
-00010eb0: 2c0a 2020 2020 2270 686f 746f 6772 6170  ,.    "photograp
-00010ec0: 6879 222c 0a20 2020 2022 7068 6f74 6f73  hy",.    "photos
-00010ed0: 222c 0a20 2020 2022 7068 7973 696f 222c  ",.    "physio",
-00010ee0: 0a20 2020 2022 7069 6167 6574 222c 0a20  .    "piaget",. 
-00010ef0: 2020 2022 7069 6373 222c 0a20 2020 2022     "pics",.    "
-00010f00: 7069 6374 6574 222c 0a20 2020 2022 7069  pictet",.    "pi
-00010f10: 6374 7572 6573 222c 0a20 2020 2022 7069  ctures",.    "pi
-00010f20: 6422 2c0a 2020 2020 2270 696e 222c 0a20  d",.    "pin",. 
-00010f30: 2020 2022 7069 6e67 222c 0a20 2020 2022     "ping",.    "
-00010f40: 7069 6e6b 222c 0a20 2020 2022 7069 6f6e  pink",.    "pion
-00010f50: 6565 7222 2c0a 2020 2020 2270 697a 7a61  eer",.    "pizza
-00010f60: 222c 0a20 2020 2022 706b 222c 0a20 2020  ",.    "pk",.   
-00010f70: 2022 706c 222c 0a20 2020 2022 706c 6163   "pl",.    "plac
-00010f80: 6522 2c0a 2020 2020 2270 6c61 7922 2c0a  e",.    "play",.
-00010f90: 2020 2020 2270 6c61 7973 7461 7469 6f6e      "playstation
-00010fa0: 222c 0a20 2020 2022 706c 756d 6269 6e67  ",.    "plumbing
-00010fb0: 222c 0a20 2020 2022 706c 7573 222c 0a20  ",.    "plus",. 
-00010fc0: 2020 2022 706d 222c 0a20 2020 2022 706e     "pm",.    "pn
-00010fd0: 222c 0a20 2020 2022 706e 6322 2c0a 2020  ",.    "pnc",.  
-00010fe0: 2020 2270 6f68 6c22 2c0a 2020 2020 2270    "pohl",.    "p
-00010ff0: 6f6b 6572 222c 0a20 2020 2022 706f 6c69  oker",.    "poli
-00011000: 7469 6522 2c0a 2020 2020 2270 6f72 6e22  tie",.    "porn"
-00011010: 2c0a 2020 2020 2270 6f73 7422 2c0a 2020  ,.    "post",.  
-00011020: 2020 2270 7222 2c0a 2020 2020 2270 7261    "pr",.    "pra
-00011030: 6d65 7269 6361 222c 0a20 2020 2022 7072  merica",.    "pr
-00011040: 6178 6922 2c0a 2020 2020 2270 7265 7373  axi",.    "press
-00011050: 222c 0a20 2020 2022 7072 696d 6522 2c0a  ",.    "prime",.
-00011060: 2020 2020 2270 726f 222c 0a20 2020 2022      "pro",.    "
-00011070: 7072 6f64 222c 0a20 2020 2022 7072 6f64  prod",.    "prod
-00011080: 7563 7469 6f6e 7322 2c0a 2020 2020 2270  uctions",.    "p
-00011090: 726f 6622 2c0a 2020 2020 2270 726f 6772  rof",.    "progr
-000110a0: 6573 7369 7665 222c 0a20 2020 2022 7072  essive",.    "pr
-000110b0: 6f6d 6f22 2c0a 2020 2020 2270 726f 7065  omo",.    "prope
-000110c0: 7274 6965 7322 2c0a 2020 2020 2270 726f  rties",.    "pro
-000110d0: 7065 7274 7922 2c0a 2020 2020 2270 726f  perty",.    "pro
-000110e0: 7465 6374 696f 6e22 2c0a 2020 2020 2270  tection",.    "p
-000110f0: 7275 222c 0a20 2020 2022 7072 7564 656e  ru",.    "pruden
-00011100: 7469 616c 222c 0a20 2020 2022 7073 222c  tial",.    "ps",
-00011110: 0a20 2020 2022 7074 222c 0a20 2020 2022  .    "pt",.    "
-00011120: 7075 6222 2c0a 2020 2020 2270 7722 2c0a  pub",.    "pw",.
-00011130: 2020 2020 2270 7763 222c 0a20 2020 2022      "pwc",.    "
-00011140: 7079 222c 0a20 2020 2023 2071 0a20 2020  py",.    # q.   
-00011150: 2022 7161 222c 0a20 2020 2022 7170 6f6e   "qa",.    "qpon
-00011160: 222c 0a20 2020 2022 7175 6562 6563 222c  ",.    "quebec",
-00011170: 0a20 2020 2022 7175 6573 7422 2c0a 2020  .    "quest",.  
-00011180: 2020 2271 7663 222c 0a20 2020 2023 2072    "qvc",.    # r
-00011190: 0a20 2020 2022 7261 6369 6e67 222c 0a20  .    "racing",. 
-000111a0: 2020 2022 7261 6469 6f22 2c0a 2020 2020     "radio",.    
-000111b0: 2272 6169 6422 2c0a 2020 2020 2272 6522  "raid",.    "re"
-000111c0: 2c0a 2020 2020 2272 6561 6422 2c0a 2020  ,.    "read",.  
-000111d0: 2020 2272 6561 6c65 7374 6174 6522 2c0a    "realestate",.
-000111e0: 2020 2020 2272 6561 6c74 6f72 222c 0a20      "realtor",. 
-000111f0: 2020 2022 7265 616c 7479 222c 0a20 2020     "realty",.   
-00011200: 2022 7265 6369 7065 7322 2c0a 2020 2020   "recipes",.    
-00011210: 2272 6564 222c 0a20 2020 2022 7265 6473  "red",.    "reds
-00011220: 746f 6e65 222c 0a20 2020 2022 7265 6475  tone",.    "redu
-00011230: 6d62 7265 6c6c 6122 2c0a 2020 2020 2272  mbrella",.    "r
-00011240: 6568 6162 222c 0a20 2020 2022 7265 6973  ehab",.    "reis
-00011250: 6522 2c0a 2020 2020 2272 6569 7365 6e22  e",.    "reisen"
-00011260: 2c0a 2020 2020 2272 6569 7422 2c0a 2020  ,.    "reit",.  
-00011270: 2020 2272 656c 6961 6e63 6522 2c0a 2020    "reliance",.  
-00011280: 2020 2272 656e 222c 0a20 2020 2022 7265    "ren",.    "re
-00011290: 6e74 222c 0a20 2020 2022 7265 6e74 616c  nt",.    "rental
-000112a0: 7322 2c0a 2020 2020 2272 6570 6169 7222  s",.    "repair"
-000112b0: 2c0a 2020 2020 2272 6570 6f72 7422 2c0a  ,.    "report",.
-000112c0: 2020 2020 2272 6570 7562 6c69 6361 6e22      "republican"
-000112d0: 2c0a 2020 2020 2272 6573 7422 2c0a 2020  ,.    "rest",.  
-000112e0: 2020 2272 6573 7461 7572 616e 7422 2c0a    "restaurant",.
-000112f0: 2020 2020 2272 6576 6965 7722 2c0a 2020      "review",.  
-00011300: 2020 2272 6576 6965 7773 222c 0a20 2020    "reviews",.   
-00011310: 2022 7265 7872 6f74 6822 2c0a 2020 2020   "rexroth",.    
-00011320: 2272 6963 6822 2c0a 2020 2020 2272 6963  "rich",.    "ric
-00011330: 6861 7264 6c69 222c 0a20 2020 2022 7269  hardli",.    "ri
-00011340: 636f 6822 2c0a 2020 2020 2272 6967 6874  coh",.    "right
-00011350: 6174 686f 6d65 222c 0a20 2020 2022 7269  athome",.    "ri
-00011360: 6c22 2c0a 2020 2020 2272 696f 222c 0a20  l",.    "rio",. 
-00011370: 2020 2022 7269 7022 2c0a 2020 2020 2272     "rip",.    "r
-00011380: 6d69 7422 2c0a 2020 2020 2272 6f22 2c0a  mit",.    "ro",.
-00011390: 2020 2020 2272 6f63 6865 7222 2c0a 2020      "rocher",.  
-000113a0: 2020 2272 6f63 6b73 222c 0a20 2020 2022    "rocks",.    "
-000113b0: 726f 6465 6f22 2c0a 2020 2020 2272 6f67  rodeo",.    "rog
-000113c0: 6572 7322 2c0a 2020 2020 2272 6f6f 6d22  ers",.    "room"
-000113d0: 2c0a 2020 2020 2272 7322 2c0a 2020 2020  ,.    "rs",.    
-000113e0: 2272 7376 7022 2c0a 2020 2020 2272 7522  "rsvp",.    "ru"
-000113f0: 2c0a 2020 2020 2272 7567 6279 222c 0a20  ,.    "rugby",. 
-00011400: 2020 2022 7275 6872 222c 0a20 2020 2022     "ruhr",.    "
-00011410: 7275 6e22 2c0a 2020 2020 2272 7722 2c0a  run",.    "rw",.
-00011420: 2020 2020 2272 7765 222c 0a20 2020 2022      "rwe",.    "
-00011430: 7279 756b 7975 222c 0a20 2020 2023 2073  ryukyu",.    # s
-00011440: 0a20 2020 2022 7361 222c 0a20 2020 2022  .    "sa",.    "
-00011450: 7361 6172 6c61 6e64 222c 0a20 2020 2022  saarland",.    "
-00011460: 7361 6665 222c 0a20 2020 2022 7361 6665  safe",.    "safe
-00011470: 7479 222c 0a20 2020 2022 7361 6b75 7261  ty",.    "sakura
-00011480: 222c 0a20 2020 2022 7361 6c65 222c 0a20  ",.    "sale",. 
-00011490: 2020 2022 7361 6c6f 6e22 2c0a 2020 2020     "salon",.    
-000114a0: 2273 616d 7363 6c75 6222 2c0a 2020 2020  "samsclub",.    
-000114b0: 2273 616d 7375 6e67 222c 0a20 2020 2022  "samsung",.    "
-000114c0: 7361 6e64 7669 6b22 2c0a 2020 2020 2273  sandvik",.    "s
-000114d0: 616e 6476 696b 636f 726f 6d61 6e74 222c  andvikcoromant",
-000114e0: 0a20 2020 2022 7361 6e6f 6669 222c 0a20  .    "sanofi",. 
-000114f0: 2020 2022 7361 7022 2c0a 2020 2020 2273     "sap",.    "s
-00011500: 6170 6f22 2c0a 2020 2020 2273 6172 6c22  apo",.    "sarl"
-00011510: 2c0a 2020 2020 2273 6173 222c 0a20 2020  ,.    "sas",.   
-00011520: 2022 7361 7665 222c 0a20 2020 2022 7361   "save",.    "sa
-00011530: 786f 222c 0a20 2020 2022 7362 222c 0a20  xo",.    "sb",. 
-00011540: 2020 2022 7362 6922 2c0a 2020 2020 2273     "sbi",.    "s
-00011550: 6273 222c 0a20 2020 2022 7363 222c 0a20  bs",.    "sc",. 
-00011560: 2020 2022 7363 6122 2c0a 2020 2020 2273     "sca",.    "s
-00011570: 6362 222c 0a20 2020 2022 7363 6861 6566  cb",.    "schaef
-00011580: 666c 6572 222c 0a20 2020 2022 7363 686d  fler",.    "schm
-00011590: 6964 7422 2c0a 2020 2020 2273 6368 6f6c  idt",.    "schol
-000115a0: 6172 7368 6970 7322 2c0a 2020 2020 2273  arships",.    "s
-000115b0: 6368 6f6f 6c22 2c0a 2020 2020 2273 6368  chool",.    "sch
-000115c0: 756c 6522 2c0a 2020 2020 2273 6368 7761  ule",.    "schwa
-000115d0: 727a 222c 0a20 2020 2022 7363 6965 6e63  rz",.    "scienc
-000115e0: 6522 2c0a 2020 2020 2273 636a 6f68 6e73  e",.    "scjohns
-000115f0: 6f6e 222c 0a20 2020 2022 7363 6f72 222c  on",.    "scor",
-00011600: 0a20 2020 2022 7363 6f74 222c 0a20 2020  .    "scot",.   
-00011610: 2022 7364 222c 0a20 2020 2022 7365 222c   "sd",.    "se",
-00011620: 0a20 2020 2022 7365 6172 6368 222c 0a20  .    "search",. 
-00011630: 2020 2022 7365 6174 222c 0a20 2020 2022     "seat",.    "
-00011640: 7365 6375 7265 222c 0a20 2020 2022 7365  secure",.    "se
-00011650: 6375 7269 7479 222c 0a20 2020 2022 7365  curity",.    "se
-00011660: 656b 222c 0a20 2020 2022 7365 6c65 6374  ek",.    "select
-00011670: 222c 0a20 2020 2022 7365 6e65 7222 2c0a  ",.    "sener",.
-00011680: 2020 2020 2273 6572 7669 6365 7322 2c0a      "services",.
-00011690: 2020 2020 2273 6573 222c 0a20 2020 2022      "ses",.    "
-000116a0: 7365 7665 6e22 2c0a 2020 2020 2273 6577  seven",.    "sew
-000116b0: 222c 0a20 2020 2022 7365 7822 2c0a 2020  ",.    "sex",.  
-000116c0: 2020 2273 6578 7922 2c0a 2020 2020 2273    "sexy",.    "s
-000116d0: 6672 222c 0a20 2020 2022 7367 222c 0a20  fr",.    "sg",. 
-000116e0: 2020 2022 7368 222c 0a20 2020 2022 7368     "sh",.    "sh
-000116f0: 616e 6772 696c 6122 2c0a 2020 2020 2273  angrila",.    "s
-00011700: 6861 7270 222c 0a20 2020 2022 7368 6177  harp",.    "shaw
-00011710: 222c 0a20 2020 2022 7368 656c 6c22 2c0a  ",.    "shell",.
-00011720: 2020 2020 2273 6869 6122 2c0a 2020 2020      "shia",.    
-00011730: 2273 6869 6b73 6861 222c 0a20 2020 2022  "shiksha",.    "
-00011740: 7368 6f65 7322 2c0a 2020 2020 2273 686f  shoes",.    "sho
-00011750: 7022 2c0a 2020 2020 2273 686f 7070 696e  p",.    "shoppin
-00011760: 6722 2c0a 2020 2020 2273 686f 756a 6922  g",.    "shouji"
-00011770: 2c0a 2020 2020 2273 686f 7722 2c0a 2020  ,.    "show",.  
-00011780: 2020 2273 686f 7774 696d 6522 2c0a 2020    "showtime",.  
-00011790: 2020 2273 6872 6972 616d 222c 0a20 2020    "shriram",.   
-000117a0: 2022 7369 222c 0a20 2020 2022 7369 6c6b   "si",.    "silk
-000117b0: 222c 0a20 2020 2022 7369 6e61 222c 0a20  ",.    "sina",. 
-000117c0: 2020 2022 7369 6e67 6c65 7322 2c0a 2020     "singles",.  
-000117d0: 2020 2273 6974 6522 2c0a 2020 2020 2273    "site",.    "s
-000117e0: 6a22 2c0a 2020 2020 2273 6b22 2c0a 2020  j",.    "sk",.  
-000117f0: 2020 2273 6b69 222c 0a20 2020 2022 736b    "ski",.    "sk
-00011800: 696e 222c 0a20 2020 2022 736b 7922 2c0a  in",.    "sky",.
-00011810: 2020 2020 2273 6b79 7065 222c 0a20 2020      "skype",.   
-00011820: 2022 736c 222c 0a20 2020 2022 736c 696e   "sl",.    "slin
-00011830: 6722 2c0a 2020 2020 2273 6d22 2c0a 2020  g",.    "sm",.  
-00011840: 2020 2273 6d61 7274 222c 0a20 2020 2022    "smart",.    "
-00011850: 736d 696c 6522 2c0a 2020 2020 2273 6e22  smile",.    "sn"
-00011860: 2c0a 2020 2020 2273 6e63 6622 2c0a 2020  ,.    "sncf",.  
-00011870: 2020 2273 6f22 2c0a 2020 2020 2273 6f63    "so",.    "soc
-00011880: 6365 7222 2c0a 2020 2020 2273 6f63 6961  cer",.    "socia
-00011890: 6c22 2c0a 2020 2020 2273 6f66 7462 616e  l",.    "softban
-000118a0: 6b22 2c0a 2020 2020 2273 6f66 7477 6172  k",.    "softwar
-000118b0: 6522 2c0a 2020 2020 2273 6f68 7522 2c0a  e",.    "sohu",.
-000118c0: 2020 2020 2273 6f6c 6172 222c 0a20 2020      "solar",.   
-000118d0: 2022 736f 6c75 7469 6f6e 7322 2c0a 2020   "solutions",.  
-000118e0: 2020 2273 6f6e 6722 2c0a 2020 2020 2273    "song",.    "s
-000118f0: 6f6e 7922 2c0a 2020 2020 2273 6f79 222c  ony",.    "soy",
-00011900: 0a20 2020 2022 7370 6163 6522 2c0a 2020  .    "space",.  
-00011910: 2020 2273 7069 6567 656c 222c 0a20 2020    "spiegel",.   
-00011920: 2022 7370 6f74 222c 0a20 2020 2022 7370   "spot",.    "sp
-00011930: 7265 6164 6265 7474 696e 6722 2c0a 2020  readbetting",.  
-00011940: 2020 2273 7222 2c0a 2020 2020 2273 726c    "sr",.    "srl
-00011950: 222c 0a20 2020 2022 7372 7422 2c0a 2020  ",.    "srt",.  
-00011960: 2020 2273 7422 2c0a 2020 2020 2273 7461    "st",.    "sta
-00011970: 6461 222c 0a20 2020 2022 7374 6170 6c65  da",.    "staple
-00011980: 7322 2c0a 2020 2020 2273 7461 7222 2c0a  s",.    "star",.
-00011990: 2020 2020 2273 7461 7268 7562 222c 0a20      "starhub",. 
-000119a0: 2020 2022 7374 6174 6562 616e 6b22 2c0a     "statebank",.
-000119b0: 2020 2020 2273 7461 7465 6661 726d 222c      "statefarm",
-000119c0: 0a20 2020 2022 7374 6174 6f69 6c22 2c0a  .    "statoil",.
-000119d0: 2020 2020 2273 7463 222c 0a20 2020 2022      "stc",.    "
-000119e0: 7374 6367 726f 7570 222c 0a20 2020 2022  stcgroup",.    "
-000119f0: 7374 6f63 6b68 6f6c 6d22 2c0a 2020 2020  stockholm",.    
-00011a00: 2273 746f 7261 6765 222c 0a20 2020 2022  "storage",.    "
-00011a10: 7374 6f72 6522 2c0a 2020 2020 2273 7472  store",.    "str
-00011a20: 6561 6d22 2c0a 2020 2020 2273 7475 6469  eam",.    "studi
-00011a30: 6f22 2c0a 2020 2020 2273 7475 6479 222c  o",.    "study",
-00011a40: 0a20 2020 2022 7374 796c 6522 2c0a 2020  .    "style",.  
-00011a50: 2020 2273 7522 2c0a 2020 2020 2273 7563    "su",.    "suc
-00011a60: 6b73 222c 0a20 2020 2022 7375 7070 6c69  ks",.    "suppli
-00011a70: 6573 222c 0a20 2020 2022 7375 7070 6c79  es",.    "supply
-00011a80: 222c 0a20 2020 2022 7375 7070 6f72 7422  ",.    "support"
-00011a90: 2c0a 2020 2020 2273 7572 6622 2c0a 2020  ,.    "surf",.  
-00011aa0: 2020 2273 7572 6765 7279 222c 0a20 2020    "surgery",.   
-00011ab0: 2022 7375 7a75 6b69 222c 0a20 2020 2022   "suzuki",.    "
-00011ac0: 7376 222c 0a20 2020 2022 7377 6174 6368  sv",.    "swatch
-00011ad0: 222c 0a20 2020 2022 7377 6966 7463 6f76  ",.    "swiftcov
-00011ae0: 6572 222c 0a20 2020 2022 7377 6973 7322  er",.    "swiss"
-00011af0: 2c0a 2020 2020 2273 7822 2c0a 2020 2020  ,.    "sx",.    
-00011b00: 2273 7922 2c0a 2020 2020 2273 7964 6e65  "sy",.    "sydne
-00011b10: 7922 2c0a 2020 2020 2273 796d 616e 7465  y",.    "symante
-00011b20: 6322 2c0a 2020 2020 2273 7973 7465 6d73  c",.    "systems
-00011b30: 222c 0a20 2020 2022 737a 222c 0a20 2020  ",.    "sz",.   
-00011b40: 2023 2074 0a20 2020 2022 7461 6222 2c0a   # t.    "tab",.
-00011b50: 2020 2020 2274 6169 7065 6922 2c0a 2020      "taipei",.  
-00011b60: 2020 2274 616c 6b22 2c0a 2020 2020 2274    "talk",.    "t
-00011b70: 616f 6261 6f22 2c0a 2020 2020 2274 6172  aobao",.    "tar
-00011b80: 6765 7422 2c0a 2020 2020 2274 6174 616d  get",.    "tatam
-00011b90: 6f74 6f72 7322 2c0a 2020 2020 2274 6174  otors",.    "tat
-00011ba0: 6172 222c 0a20 2020 2022 7461 7474 6f6f  ar",.    "tattoo
-00011bb0: 222c 0a20 2020 2022 7461 7822 2c0a 2020  ",.    "tax",.  
-00011bc0: 2020 2274 6178 6922 2c0a 2020 2020 2274    "taxi",.    "t
-00011bd0: 6322 2c0a 2020 2020 2274 6369 222c 0a20  c",.    "tci",. 
-00011be0: 2020 2022 7464 222c 0a20 2020 2022 7464     "td",.    "td
-00011bf0: 6b22 2c0a 2020 2020 2274 6561 6d22 2c0a  k",.    "team",.
-00011c00: 2020 2020 2274 6563 6822 2c0a 2020 2020      "tech",.    
-00011c10: 2274 6563 686e 6f6c 6f67 7922 2c0a 2020  "technology",.  
-00011c20: 2020 2274 656c 222c 0a20 2020 2022 7465    "tel",.    "te
-00011c30: 6c65 6369 7479 222c 0a20 2020 2022 7465  lecity",.    "te
-00011c40: 6c65 666f 6e69 6361 222c 0a20 2020 2022  lefonica",.    "
-00011c50: 7465 6d61 7365 6b22 2c0a 2020 2020 2274  temasek",.    "t
-00011c60: 656e 6e69 7322 2c0a 2020 2020 2274 6576  ennis",.    "tev
-00011c70: 6122 2c0a 2020 2020 2274 6622 2c0a 2020  a",.    "tf",.  
-00011c80: 2020 2274 6722 2c0a 2020 2020 2274 6822    "tg",.    "th"
-00011c90: 2c0a 2020 2020 2274 6864 222c 0a20 2020  ,.    "thd",.   
-00011ca0: 2022 7468 6561 7465 7222 2c0a 2020 2020   "theater",.    
-00011cb0: 2274 6865 6174 7265 222c 0a20 2020 2022  "theatre",.    "
-00011cc0: 7469 6161 222c 0a20 2020 2022 7469 636b  tiaa",.    "tick
-00011cd0: 6574 7322 2c0a 2020 2020 2274 6965 6e64  ets",.    "tiend
-00011ce0: 6122 2c0a 2020 2020 2274 6966 6661 6e79  a",.    "tiffany
-00011cf0: 222c 0a20 2020 2022 7469 7073 222c 0a20  ",.    "tips",. 
-00011d00: 2020 2022 7469 7265 7322 2c0a 2020 2020     "tires",.    
-00011d10: 2274 6972 6f6c 222c 0a20 2020 2022 746a  "tirol",.    "tj
-00011d20: 222c 0a20 2020 2022 746a 6d61 7878 222c  ",.    "tjmaxx",
-00011d30: 0a20 2020 2022 746a 7822 2c0a 2020 2020  .    "tjx",.    
-00011d40: 2274 6b22 2c0a 2020 2020 2274 6b6d 6178  "tk",.    "tkmax
-00011d50: 7822 2c0a 2020 2020 2274 6c22 2c0a 2020  x",.    "tl",.  
-00011d60: 2020 2274 6d22 2c0a 2020 2020 2274 6d61    "tm",.    "tma
-00011d70: 6c6c 222c 0a20 2020 2022 746e 222c 0a20  ll",.    "tn",. 
-00011d80: 2020 2022 746f 222c 0a20 2020 2022 746f     "to",.    "to
-00011d90: 6461 7922 2c0a 2020 2020 2274 6f6b 796f  day",.    "tokyo
-00011da0: 222c 0a20 2020 2022 746f 6f6c 7322 2c0a  ",.    "tools",.
-00011db0: 2020 2020 2274 6f70 222c 0a20 2020 2022      "top",.    "
-00011dc0: 746f 7261 7922 2c0a 2020 2020 2274 6f73  toray",.    "tos
-00011dd0: 6869 6261 222c 0a20 2020 2022 746f 7461  hiba",.    "tota
-00011de0: 6c22 2c0a 2020 2020 2274 6f75 7273 222c  l",.    "tours",
-00011df0: 0a20 2020 2022 746f 776e 222c 0a20 2020  .    "town",.   
-00011e00: 2022 746f 796f 7461 222c 0a20 2020 2022   "toyota",.    "
-00011e10: 746f 7973 222c 0a20 2020 2022 7472 222c  toys",.    "tr",
-00011e20: 0a20 2020 2022 7472 6164 6522 2c0a 2020  .    "trade",.  
-00011e30: 2020 2274 7261 6469 6e67 222c 0a20 2020    "trading",.   
-00011e40: 2022 7472 6169 6e69 6e67 222c 0a20 2020   "training",.   
-00011e50: 2022 7472 6176 656c 222c 0a20 2020 2022   "travel",.    "
-00011e60: 7472 6176 656c 6368 616e 6e65 6c22 2c0a  travelchannel",.
-00011e70: 2020 2020 2274 7261 7665 6c65 7273 222c      "travelers",
-00011e80: 0a20 2020 2022 7472 6176 656c 6572 7369  .    "travelersi
-00011e90: 6e73 7572 616e 6365 222c 0a20 2020 2022  nsurance",.    "
-00011ea0: 7472 7573 7422 2c0a 2020 2020 2274 7276  trust",.    "trv
-00011eb0: 222c 0a20 2020 2022 7474 222c 0a20 2020  ",.    "tt",.   
-00011ec0: 2022 7475 6265 222c 0a20 2020 2022 7475   "tube",.    "tu
-00011ed0: 6922 2c0a 2020 2020 2274 756e 6573 222c  i",.    "tunes",
-00011ee0: 0a20 2020 2022 7475 7368 7522 2c0a 2020  .    "tushu",.  
-00011ef0: 2020 2274 7622 2c0a 2020 2020 2274 7673    "tv",.    "tvs
-00011f00: 222c 0a20 2020 2022 7477 222c 0a20 2020  ",.    "tw",.   
-00011f10: 2022 747a 222c 0a20 2020 2023 2075 0a20   "tz",.    # u. 
-00011f20: 2020 2022 7561 222c 0a20 2020 2022 7562     "ua",.    "ub
-00011f30: 616e 6b22 2c0a 2020 2020 2275 6273 222c  ank",.    "ubs",
-00011f40: 0a20 2020 2022 7563 6f6e 6e65 6374 222c  .    "uconnect",
-00011f50: 0a20 2020 2022 7567 222c 0a20 2020 2022  .    "ug",.    "
-00011f60: 756b 222c 0a20 2020 2022 756e 6963 6f6d  uk",.    "unicom
-00011f70: 222c 0a20 2020 2022 756e 6976 6572 7369  ",.    "universi
-00011f80: 7479 222c 0a20 2020 2022 756e 6f22 2c0a  ty",.    "uno",.
-00011f90: 2020 2020 2275 6f6c 222c 0a20 2020 2022      "uol",.    "
-00011fa0: 7570 7322 2c0a 2020 2020 2275 7322 2c0a  ups",.    "us",.
-00011fb0: 2020 2020 2275 7922 2c0a 2020 2020 2275      "uy",.    "u
-00011fc0: 7a22 2c0a 2020 2020 2320 760a 2020 2020  z",.    # v.    
-00011fd0: 2276 6122 2c0a 2020 2020 2276 6163 6174  "va",.    "vacat
-00011fe0: 696f 6e73 222c 0a20 2020 2022 7661 6e61  ions",.    "vana
-00011ff0: 222c 0a20 2020 2022 7661 6e67 7561 7264  ",.    "vanguard
-00012000: 222c 0a20 2020 2022 7663 222c 0a20 2020  ",.    "vc",.   
-00012010: 2022 7665 222c 0a20 2020 2022 7665 6761   "ve",.    "vega
-00012020: 7322 2c0a 2020 2020 2276 656e 7475 7265  s",.    "venture
-00012030: 7322 2c0a 2020 2020 2276 6572 6973 6967  s",.    "verisig
-00012040: 6e22 2c0a 2020 2020 2276 6572 7369 6368  n",.    "versich
-00012050: 6572 756e 6722 2c0a 2020 2020 2276 6574  erung",.    "vet
-00012060: 222c 0a20 2020 2022 7667 222c 0a20 2020  ",.    "vg",.   
-00012070: 2022 7669 222c 0a20 2020 2022 7669 616a   "vi",.    "viaj
-00012080: 6573 222c 0a20 2020 2022 7669 6465 6f22  es",.    "video"
-00012090: 2c0a 2020 2020 2276 6967 222c 0a20 2020  ,.    "vig",.   
-000120a0: 2022 7669 6b69 6e67 222c 0a20 2020 2022   "viking",.    "
-000120b0: 7669 6c6c 6173 222c 0a20 2020 2022 7669  villas",.    "vi
-000120c0: 6e22 2c0a 2020 2020 2276 6970 222c 0a20  n",.    "vip",. 
-000120d0: 2020 2022 7669 7267 696e 222c 0a20 2020     "virgin",.   
-000120e0: 2022 7669 7361 222c 0a20 2020 2022 7669   "visa",.    "vi
-000120f0: 7369 6f6e 222c 0a20 2020 2022 7669 7374  sion",.    "vist
-00012100: 6122 2c0a 2020 2020 2276 6973 7461 7072  a",.    "vistapr
-00012110: 696e 7422 2c0a 2020 2020 2276 6976 6122  int",.    "viva"
-00012120: 2c0a 2020 2020 2276 6976 6f22 2c0a 2020  ,.    "vivo",.  
-00012130: 2020 2276 6c61 616e 6465 7265 6e22 2c0a    "vlaanderen",.
-00012140: 2020 2020 2276 6e22 2c0a 2020 2020 2276      "vn",.    "v
-00012150: 6f64 6b61 222c 0a20 2020 2022 766f 6c6b  odka",.    "volk
-00012160: 7377 6167 656e 222c 0a20 2020 2022 766f  swagen",.    "vo
-00012170: 6c76 6f22 2c0a 2020 2020 2276 6f74 6522  lvo",.    "vote"
-00012180: 2c0a 2020 2020 2276 6f74 696e 6722 2c0a  ,.    "voting",.
-00012190: 2020 2020 2276 6f74 6f22 2c0a 2020 2020      "voto",.    
-000121a0: 2276 6f79 6167 6522 2c0a 2020 2020 2276  "voyage",.    "v
-000121b0: 7522 2c0a 2020 2020 2276 7565 6c6f 7322  u",.    "vuelos"
-000121c0: 2c0a 2020 2020 2320 770a 2020 2020 2277  ,.    # w.    "w
-000121d0: 616c 6573 222c 0a20 2020 2022 7761 6c6d  ales",.    "walm
-000121e0: 6172 7422 2c0a 2020 2020 2277 616c 7465  art",.    "walte
-000121f0: 7222 2c0a 2020 2020 2277 616e 6722 2c0a  r",.    "wang",.
-00012200: 2020 2020 2277 616e 6767 6f75 222c 0a20      "wanggou",. 
-00012210: 2020 2022 7761 726d 616e 222c 0a20 2020     "warman",.   
-00012220: 2022 7761 7463 6822 2c0a 2020 2020 2277   "watch",.    "w
-00012230: 6174 6368 6573 222c 0a20 2020 2022 7765  atches",.    "we
-00012240: 6174 6865 7222 2c0a 2020 2020 2277 6561  ather",.    "wea
-00012250: 7468 6572 6368 616e 6e65 6c22 2c0a 2020  therchannel",.  
-00012260: 2020 2277 6562 6361 6d22 2c0a 2020 2020    "webcam",.    
-00012270: 2277 6562 6572 222c 0a20 2020 2022 7765  "weber",.    "we
-00012280: 6273 6974 6522 2c0a 2020 2020 2277 6564  bsite",.    "wed
-00012290: 222c 0a20 2020 2022 7765 6464 696e 6722  ",.    "wedding"
-000122a0: 2c0a 2020 2020 2277 6569 626f 222c 0a20  ,.    "weibo",. 
-000122b0: 2020 2022 7765 6972 222c 0a20 2020 2022     "weir",.    "
-000122c0: 7766 222c 0a20 2020 2022 7768 6f73 7768  wf",.    "whoswh
-000122d0: 6f22 2c0a 2020 2020 2277 6965 6e22 2c0a  o",.    "wien",.
-000122e0: 2020 2020 2277 696b 6922 2c0a 2020 2020      "wiki",.    
-000122f0: 2277 696c 6c69 616d 6869 6c6c 222c 0a20  "williamhill",. 
-00012300: 2020 2022 7769 6e22 2c0a 2020 2020 2277     "win",.    "w
-00012310: 696e 646f 7773 222c 0a20 2020 2022 7769  indows",.    "wi
-00012320: 6e65 222c 0a20 2020 2022 7769 6e6e 6572  ne",.    "winner
-00012330: 7322 2c0a 2020 2020 2277 6d65 222c 0a20  s",.    "wme",. 
-00012340: 2020 2022 776f 6c74 6572 736b 6c75 7765     "wolterskluwe
-00012350: 7222 2c0a 2020 2020 2277 6f6f 6473 6964  r",.    "woodsid
-00012360: 6522 2c0a 2020 2020 2277 6f72 6b22 2c0a  e",.    "work",.
-00012370: 2020 2020 2277 6f72 6b73 222c 0a20 2020      "works",.   
-00012380: 2022 776f 726c 6422 2c0a 2020 2020 2277   "world",.    "w
-00012390: 6f77 222c 0a20 2020 2022 7773 222c 0a20  ow",.    "ws",. 
-000123a0: 2020 2022 7774 6322 2c0a 2020 2020 2277     "wtc",.    "w
-000123b0: 7466 222c 0a20 2020 2023 2078 0a20 2020  tf",.    # x.   
-000123c0: 2022 7862 6f78 222c 0a20 2020 2022 7865   "xbox",.    "xe
-000123d0: 726f 7822 2c0a 2020 2020 2278 6669 6e69  rox",.    "xfini
-000123e0: 7479 222c 0a20 2020 2022 7869 6875 616e  ty",.    "xihuan
-000123f0: 222c 0a20 2020 2022 7869 6e22 2c0a 2020  ",.    "xin",.  
-00012400: 2020 2278 6e2d 2d31 3162 3463 3364 222c    "xn--11b4c3d",
-00012410: 0a20 2020 2022 786e 2d2d 3163 6b32 6531  .    "xn--1ck2e1
-00012420: 6222 2c0a 2020 2020 2278 6e2d 2d31 7171  b",.    "xn--1qq
-00012430: 7732 3361 222c 0a20 2020 2022 786e 2d2d  w23a",.    "xn--
-00012440: 3273 6372 6a39 6322 2c0a 2020 2020 2278  2scrj9c",.    "x
-00012450: 6e2d 2d33 3072 7237 7922 2c0a 2020 2020  n--30rr7y",.    
-00012460: 2278 6e2d 2d33 6273 7430 306d 222c 0a20  "xn--3bst00m",. 
-00012470: 2020 2022 786e 2d2d 3364 7334 3433 6722     "xn--3ds443g"
-00012480: 2c0a 2020 2020 2278 6e2d 2d33 6530 6237  ,.    "xn--3e0b7
-00012490: 3037 6522 2c0a 2020 2020 2278 6e2d 2d33  07e",.    "xn--3
-000124a0: 6863 726a 3963 222c 0a20 2020 2022 786e  hcrj9c",.    "xn
-000124b0: 2d2d 336f 7131 3876 6c38 706e 3336 6122  --3oq18vl8pn36a"
-000124c0: 2c0a 2020 2020 2278 6e2d 2d33 7078 7538  ,.    "xn--3pxu8
-000124d0: 6b22 2c0a 2020 2020 2278 6e2d 2d34 3263  k",.    "xn--42c
-000124e0: 3264 3961 222c 0a20 2020 2022 786e 2d2d  2d9a",.    "xn--
-000124f0: 3435 6272 3563 796c 222c 0a20 2020 2022  45br5cyl",.    "
-00012500: 786e 2d2d 3435 6272 6a39 6322 2c0a 2020  xn--45brj9c",.  
-00012510: 2020 2278 6e2d 2d34 3571 3131 6322 2c0a    "xn--45q11c",.
-00012520: 2020 2020 2278 6e2d 2d34 6762 7269 6d22      "xn--4gbrim"
-00012530: 2c0a 2020 2020 2278 6e2d 2d35 3462 3766  ,.    "xn--54b7f
-00012540: 7461 3063 6322 2c0a 2020 2020 2278 6e2d  ta0cc",.    "xn-
-00012550: 2d35 3571 7734 3267 222c 0a20 2020 2022  -55qw42g",.    "
-00012560: 786e 2d2d 3535 7178 3564 222c 0a20 2020  xn--55qx5d",.   
-00012570: 2022 786e 2d2d 3573 7533 346a 3933 3662   "xn--5su34j936b
-00012580: 6773 6722 2c0a 2020 2020 2278 6e2d 2d35  gsg",.    "xn--5
-00012590: 747a 6d35 6722 2c0a 2020 2020 2278 6e2d  tzm5g",.    "xn-
-000125a0: 2d36 6672 7a38 3267 222c 0a20 2020 2022  -6frz82g",.    "
-000125b0: 786e 2d2d 3671 7139 3836 6233 786c 222c  xn--6qq986b3xl",
-000125c0: 0a20 2020 2022 786e 2d2d 3830 6164 7868  .    "xn--80adxh
-000125d0: 6b73 222c 0a20 2020 2022 786e 2d2d 3830  ks",.    "xn--80
-000125e0: 616f 3231 6122 2c0a 2020 2020 2278 6e2d  ao21a",.    "xn-
-000125f0: 2d38 3061 7165 6364 7231 6122 2c0a 2020  -80aqecdr1a",.  
-00012600: 2020 2278 6e2d 2d38 3061 7365 6864 6222    "xn--80asehdb"
-00012610: 2c0a 2020 2020 2278 6e2d 2d38 3061 7377  ,.    "xn--80asw
-00012620: 6722 2c0a 2020 2020 2278 6e2d 2d38 7930  g",.    "xn--8y0
-00012630: 6130 3633 6122 2c0a 2020 2020 2278 6e2d  a063a",.    "xn-
-00012640: 2d39 3061 3361 6322 2c0a 2020 2020 2278  -90a3ac",.    "x
-00012650: 6e2d 2d39 3061 6522 2c0a 2020 2020 2278  n--90ae",.    "x
-00012660: 6e2d 2d39 3061 6973 222c 0a20 2020 2022  n--90ais",.    "
-00012670: 786e 2d2d 3964 6271 3261 222c 0a20 2020  xn--9dbq2a",.   
-00012680: 2022 786e 2d2d 3965 7435 3275 222c 0a20   "xn--9et52u",. 
-00012690: 2020 2022 786e 2d2d 396b 7274 3030 6122     "xn--9krt00a"
-000126a0: 2c0a 2020 2020 2278 6e2d 2d62 3477 3630  ,.    "xn--b4w60
-000126b0: 3566 6572 6422 2c0a 2020 2020 2278 6e2d  5ferd",.    "xn-
-000126c0: 2d62 636b 3162 3961 3564 7265 3463 222c  -bck1b9a5dre4c",
-000126d0: 0a20 2020 2022 786e 2d2d 6331 6176 6722  .    "xn--c1avg"
-000126e0: 2c0a 2020 2020 2278 6e2d 2d63 3262 7237  ,.    "xn--c2br7
-000126f0: 6722 2c0a 2020 2020 2278 6e2d 2d63 636b  g",.    "xn--cck
-00012700: 3262 3362 222c 0a20 2020 2022 786e 2d2d  2b3b",.    "xn--
-00012710: 6367 3462 6b69 222c 0a20 2020 2022 786e  cg4bki",.    "xn
-00012720: 2d2d 636c 6368 6330 6561 3062 3267 3261  --clchc0ea0b2g2a
-00012730: 3967 6364 222c 0a20 2020 2022 786e 2d2d  9gcd",.    "xn--
-00012740: 637a 7236 3934 6222 2c0a 2020 2020 2278  czr694b",.    "x
-00012750: 6e2d 2d63 7a72 7330 7422 2c0a 2020 2020  n--czrs0t",.    
-00012760: 2278 6e2d 2d63 7a72 7532 6422 2c0a 2020  "xn--czru2d",.  
-00012770: 2020 2278 6e2d 2d64 3161 636a 3362 222c    "xn--d1acj3b",
-00012780: 0a20 2020 2022 786e 2d2d 6431 616c 6622  .    "xn--d1alf"
-00012790: 2c0a 2020 2020 2278 6e2d 2d65 3161 3463  ,.    "xn--e1a4c
-000127a0: 222c 0a20 2020 2022 786e 2d2d 6563 6b76  ",.    "xn--eckv
-000127b0: 6474 6339 6422 2c0a 2020 2020 2278 6e2d  dtc9d",.    "xn-
-000127c0: 2d65 6676 7938 3868 222c 0a20 2020 2022  -efvy88h",.    "
-000127d0: 786e 2d2d 6573 7476 3735 6722 2c0a 2020  xn--estv75g",.  
-000127e0: 2020 2278 6e2d 2d66 6374 3432 396b 222c    "xn--fct429k",
-000127f0: 0a20 2020 2022 786e 2d2d 6668 6265 6922  .    "xn--fhbei"
-00012800: 2c0a 2020 2020 2278 6e2d 2d66 6971 3232  ,.    "xn--fiq22
-00012810: 3863 3568 7322 2c0a 2020 2020 2278 6e2d  8c5hs",.    "xn-
-00012820: 2d66 6971 3634 6222 2c0a 2020 2020 2278  -fiq64b",.    "x
-00012830: 6e2d 2d66 6971 7338 7322 2c0a 2020 2020  n--fiqs8s",.    
-00012840: 2278 6e2d 2d66 6971 7a39 7322 2c0a 2020  "xn--fiqz9s",.  
-00012850: 2020 2278 6e2d 2d66 6a71 3732 3061 222c    "xn--fjq720a",
-00012860: 0a20 2020 2022 786e 2d2d 666c 7733 3531  .    "xn--flw351
-00012870: 6522 2c0a 2020 2020 2278 6e2d 2d66 7063  e",.    "xn--fpc
-00012880: 726a 3963 3364 222c 0a20 2020 2022 786e  rj9c3d",.    "xn
-00012890: 2d2d 667a 6332 6339 6532 6322 2c0a 2020  --fzc2c9e2c",.  
-000128a0: 2020 2278 6e2d 2d66 7a79 7338 6436 3975    "xn--fzys8d69u
-000128b0: 7667 6d22 2c0a 2020 2020 2278 6e2d 2d67  vgm",.    "xn--g
-000128c0: 3278 7834 3863 222c 0a20 2020 2022 786e  2xx48c",.    "xn
-000128d0: 2d2d 6763 6b72 3366 3066 222c 0a20 2020  --gckr3f0f",.   
-000128e0: 2022 786e 2d2d 6765 6372 6a39 6322 2c0a   "xn--gecrj9c",.
-000128f0: 2020 2020 2278 6e2d 2d67 6b33 6174 3165      "xn--gk3at1e
-00012900: 222c 0a20 2020 2022 786e 2d2d 6832 6272  ",.    "xn--h2br
-00012910: 6567 3365 7665 222c 0a20 2020 2022 786e  eg3eve",.    "xn
-00012920: 2d2d 6832 6272 6a39 6322 2c0a 2020 2020  --h2brj9c",.    
-00012930: 2278 6e2d 2d68 3262 726a 3963 3863 222c  "xn--h2brj9c8c",
-00012940: 0a20 2020 2022 786e 2d2d 6878 7438 3134  .    "xn--hxt814
-00012950: 6522 2c0a 2020 2020 2278 6e2d 2d69 3162  e",.    "xn--i1b
-00012960: 3662 3161 3661 3265 222c 0a20 2020 2022  6b1a6a2e",.    "
-00012970: 786e 2d2d 696d 7235 3133 6e22 2c0a 2020  xn--imr513n",.  
-00012980: 2020 2278 6e2d 2d69 6f30 6137 6922 2c0a    "xn--io0a7i",.
-00012990: 2020 2020 2278 6e2d 2d6a 3161 6566 222c      "xn--j1aef",
-000129a0: 0a20 2020 2022 786e 2d2d 6a31 616d 6822  .    "xn--j1amh"
-000129b0: 2c0a 2020 2020 2278 6e2d 2d6a 3677 3139  ,.    "xn--j6w19
-000129c0: 3367 222c 0a20 2020 2022 786e 2d2d 6a6c  3g",.    "xn--jl
-000129d0: 7136 3175 3977 3762 222c 0a20 2020 2022  q61u9w7b",.    "
-000129e0: 786e 2d2d 6a76 7231 3839 6d22 2c0a 2020  xn--jvr189m",.  
-000129f0: 2020 2278 6e2d 2d6b 6372 7837 3764 3178    "xn--kcrx77d1x
-00012a00: 3461 222c 0a20 2020 2022 786e 2d2d 6b70  4a",.    "xn--kp
-00012a10: 7277 3133 6422 2c0a 2020 2020 2278 6e2d  rw13d",.    "xn-
-00012a20: 2d6b 7072 7935 3764 222c 0a20 2020 2022  -kpry57d",.    "
-00012a30: 786e 2d2d 6b70 7537 3136 6622 2c0a 2020  xn--kpu716f",.  
-00012a40: 2020 2278 6e2d 2d6b 7075 7433 6922 2c0a    "xn--kput3i",.
-00012a50: 2020 2020 2278 6e2d 2d6c 3161 6363 222c      "xn--l1acc",
-00012a60: 0a20 2020 2022 786e 2d2d 6c67 6262 6174  .    "xn--lgbbat
-00012a70: 3161 6438 6a22 2c0a 2020 2020 2278 6e2d  1ad8j",.    "xn-
-00012a80: 2d6d 6762 3961 7762 6622 2c0a 2020 2020  -mgb9awbf",.    
-00012a90: 2278 6e2d 2d6d 6762 6133 6133 656a 7422  "xn--mgba3a3ejt"
-00012aa0: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6133  ,.    "xn--mgba3
-00012ab0: 6134 6631 3661 222c 0a20 2020 2022 786e  a4f16a",.    "xn
-00012ac0: 2d2d 6d67 6261 3763 3062 626e 3061 222c  --mgba7c0bbn0a",
-00012ad0: 0a20 2020 2022 786e 2d2d 6d67 6261 616b  .    "xn--mgbaak
-00012ae0: 6337 6476 6622 2c0a 2020 2020 2278 6e2d  c7dvf",.    "xn-
-00012af0: 2d6d 6762 6161 6d37 6138 6822 2c0a 2020  -mgbaam7a8h",.  
-00012b00: 2020 2278 6e2d 2d6d 6762 6162 3262 6422    "xn--mgbab2bd"
-00012b10: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6169  ,.    "xn--mgbai
-00012b20: 3961 7a67 7170 366a 222c 0a20 2020 2022  9azgqp6j",.    "
-00012b30: 786e 2d2d 6d67 6261 7968 3767 7061 222c  xn--mgbayh7gpa",
-00012b40: 0a20 2020 2022 786e 2d2d 6d67 6262 3966  .    "xn--mgbb9f
-00012b50: 6270 6f62 222c 0a20 2020 2022 786e 2d2d  bpob",.    "xn--
-00012b60: 6d67 6262 6831 6122 2c0a 2020 2020 2278  mgbbh1a",.    "x
-00012b70: 6e2d 2d6d 6762 6268 3161 3731 6522 2c0a  n--mgbbh1a71e",.
-00012b80: 2020 2020 2278 6e2d 2d6d 6762 6330 6139      "xn--mgbc0a9
-00012b90: 617a 6367 222c 0a20 2020 2022 786e 2d2d  azcg",.    "xn--
-00012ba0: 6d67 6263 6137 647a 646f 222c 0a20 2020  mgbca7dzdo",.   
-00012bb0: 2022 786e 2d2d 6d67 6265 7270 3461 3564   "xn--mgberp4a5d
-00012bc0: 3461 7222 2c0a 2020 2020 2278 6e2d 2d6d  4ar",.    "xn--m
-00012bd0: 6762 6775 3832 6122 2c0a 2020 2020 2278  gbgu82a",.    "x
-00012be0: 6e2d 2d6d 6762 6934 6563 6578 7022 2c0a  n--mgbi4ecexp",.
-00012bf0: 2020 2020 2278 6e2d 2d6d 6762 706c 3266      "xn--mgbpl2f
-00012c00: 6822 2c0a 2020 2020 2278 6e2d 2d6d 6762  h",.    "xn--mgb
-00012c10: 7433 6468 6422 2c0a 2020 2020 2278 6e2d  t3dhd",.    "xn-
-00012c20: 2d6d 6762 7478 3262 222c 0a20 2020 2022  -mgbtx2b",.    "
-00012c30: 786e 2d2d 6d67 6278 3463 6430 6162 222c  xn--mgbx4cd0ab",
-00012c40: 0a20 2020 2022 786e 2d2d 6d69 7838 3931  .    "xn--mix891
-00012c50: 6622 2c0a 2020 2020 2278 6e2d 2d6d 6b31  f",.    "xn--mk1
-00012c60: 6275 3434 6322 2c0a 2020 2020 2278 6e2d  bu44c",.    "xn-
-00012c70: 2d6d 7874 7131 6d22 2c0a 2020 2020 2278  -mxtq1m",.    "x
-00012c80: 6e2d 2d6e 6762 6335 617a 6422 2c0a 2020  n--ngbc5azd",.  
-00012c90: 2020 2278 6e2d 2d6e 6762 6539 6530 6122    "xn--ngbe9e0a"
-00012ca0: 2c0a 2020 2020 2278 6e2d 2d6e 6762 7278  ,.    "xn--ngbrx
-00012cb0: 222c 0a20 2020 2022 786e 2d2d 6e6f 6465  ",.    "xn--node
-00012cc0: 222c 0a20 2020 2022 786e 2d2d 6e71 7637  ",.    "xn--nqv7
-00012cd0: 6622 2c0a 2020 2020 2278 6e2d 2d6e 7176  f",.    "xn--nqv
-00012ce0: 3766 7330 3065 6d61 222c 0a20 2020 2022  7fs00ema",.    "
-00012cf0: 786e 2d2d 6e79 7179 3236 6122 2c0a 2020  xn--nyqy26a",.  
-00012d00: 2020 2278 6e2d 2d6f 3363 7734 6822 2c0a    "xn--o3cw4h",.
-00012d10: 2020 2020 2278 6e2d 2d6f 6762 7066 3866      "xn--ogbpf8f
-00012d20: 6c22 2c0a 2020 2020 2278 6e2d 2d70 3161  l",.    "xn--p1a
-00012d30: 6366 222c 0a20 2020 2022 786e 2d2d 7031  cf",.    "xn--p1
-00012d40: 6169 222c 0a20 2020 2022 786e 2d2d 7062  ai",.    "xn--pb
-00012d50: 7439 3737 6322 2c0a 2020 2020 2278 6e2d  t977c",.    "xn-
-00012d60: 2d70 6762 7330 6468 222c 0a20 2020 2022  -pgbs0dh",.    "
-00012d70: 786e 2d2d 7073 7379 3275 222c 0a20 2020  xn--pssy2u",.   
-00012d80: 2022 786e 2d2d 7139 6a79 6234 6322 2c0a   "xn--q9jyb4c",.
-00012d90: 2020 2020 2278 6e2d 2d71 636b 6131 706d      "xn--qcka1pm
-00012da0: 6322 2c0a 2020 2020 2278 6e2d 2d71 7861  c",.    "xn--qxa
-00012db0: 6d22 2c0a 2020 2020 2278 6e2d 2d72 6871  m",.    "xn--rhq
-00012dc0: 7639 3667 222c 0a20 2020 2022 786e 2d2d  v96g",.    "xn--
-00012dd0: 726f 7675 3838 6222 2c0a 2020 2020 2278  rovu88b",.    "x
-00012de0: 6e2d 2d72 7663 3165 3061 6d33 6522 2c0a  n--rvc1e0am3e",.
-00012df0: 2020 2020 2278 6e2d 2d73 3962 726a 3963      "xn--s9brj9c
-00012e00: 222c 0a20 2020 2022 786e 2d2d 7365 7335  ",.    "xn--ses5
-00012e10: 3534 6722 2c0a 2020 2020 2278 6e2d 2d74  54g",.    "xn--t
-00012e20: 3630 6235 3661 222c 0a20 2020 2022 786e  60b56a",.    "xn
-00012e30: 2d2d 7463 6b77 6522 2c0a 2020 2020 2278  --tckwe",.    "x
-00012e40: 6e2d 2d74 6971 3439 7871 796a 222c 0a20  n--tiq49xqyj",. 
-00012e50: 2020 2022 786e 2d2d 756e 7570 3479 222c     "xn--unup4y",
-00012e60: 0a20 2020 2022 786e 2d2d 7665 726d 6765  .    "xn--vermge
-00012e70: 6e73 6265 7261 7465 722d 6374 6222 2c0a  nsberater-ctb",.
-00012e80: 2020 2020 2278 6e2d 2d76 6572 6d67 656e      "xn--vermgen
-00012e90: 7362 6572 6174 756e 672d 7077 6222 2c0a  sberatung-pwb",.
-00012ea0: 2020 2020 2278 6e2d 2d76 6871 7576 222c      "xn--vhquv",
-00012eb0: 0a20 2020 2022 786e 2d2d 7675 7138 3631  .    "xn--vuq861
-00012ec0: 6222 2c0a 2020 2020 2278 6e2d 2d77 3472  b",.    "xn--w4r
-00012ed0: 3835 656c 3866 6875 3564 6e72 6122 2c0a  85el8fhu5dnra",.
-00012ee0: 2020 2020 2278 6e2d 2d77 3472 7334 306c      "xn--w4rs40l
-00012ef0: 222c 0a20 2020 2022 786e 2d2d 7767 6268  ",.    "xn--wgbh
-00012f00: 3163 222c 0a20 2020 2022 786e 2d2d 7767  1c",.    "xn--wg
-00012f10: 626c 3661 222c 0a20 2020 2022 786e 2d2d  bl6a",.    "xn--
-00012f20: 7868 7135 3231 6222 2c0a 2020 2020 2278  xhq521b",.    "x
-00012f30: 6e2d 2d78 6b63 3261 6c33 6879 6532 6122  n--xkc2al3hye2a"
-00012f40: 2c0a 2020 2020 2278 6e2d 2d78 6b63 3264  ,.    "xn--xkc2d
-00012f50: 6c33 6135 6565 3068 222c 0a20 2020 2022  l3a5ee0h",.    "
-00012f60: 786e 2d2d 7939 6133 6171 222c 0a20 2020  xn--y9a3aq",.   
-00012f70: 2022 786e 2d2d 7966 726f 3469 3637 6f22   "xn--yfro4i67o"
-00012f80: 2c0a 2020 2020 2278 6e2d 2d79 6762 6932  ,.    "xn--ygbi2
-00012f90: 616d 6d78 222c 0a20 2020 2022 786e 2d2d  ammx",.    "xn--
-00012fa0: 7a66 7231 3634 6222 2c0a 2020 2020 2278  zfr164b",.    "x
-00012fb0: 7065 7269 6122 2c0a 2020 2020 2278 7878  peria",.    "xxx
-00012fc0: 222c 0a20 2020 2022 7879 7a22 2c0a 2020  ",.    "xyz",.  
-00012fd0: 2020 2320 790a 2020 2020 2279 6163 6874    # y.    "yacht
-00012fe0: 7322 2c0a 2020 2020 2279 6168 6f6f 222c  s",.    "yahoo",
-00012ff0: 0a20 2020 2022 7961 6d61 7875 6e22 2c0a  .    "yamaxun",.
-00013000: 2020 2020 2279 616e 6465 7822 2c0a 2020      "yandex",.  
-00013010: 2020 2279 6522 2c0a 2020 2020 2279 6f64    "ye",.    "yod
-00013020: 6f62 6173 6869 222c 0a20 2020 2022 796f  obashi",.    "yo
-00013030: 6761 222c 0a20 2020 2022 796f 6b6f 6861  ga",.    "yokoha
-00013040: 6d61 222c 0a20 2020 2022 796f 7522 2c0a  ma",.    "you",.
-00013050: 2020 2020 2279 6f75 7475 6265 222c 0a20      "youtube",. 
-00013060: 2020 2022 7974 222c 0a20 2020 2022 7975     "yt",.    "yu
-00013070: 6e22 2c0a 2020 2020 2320 7a0a 2020 2020  n",.    # z.    
-00013080: 227a 6122 2c0a 2020 2020 227a 6170 706f  "za",.    "zappo
-00013090: 7322 2c0a 2020 2020 227a 6172 6122 2c0a  s",.    "zara",.
-000130a0: 2020 2020 227a 6572 6f22 2c0a 2020 2020      "zero",.    
-000130b0: 227a 6970 222c 0a20 2020 2022 7a69 7070  "zip",.    "zipp
-000130c0: 6f22 2c0a 2020 2020 227a 6d22 2c0a 2020  o",.    "zm",.  
-000130d0: 2020 227a 6f6e 6522 2c0a 2020 2020 227a    "zone",.    "z
-000130e0: 7565 7269 6368 222c 0a20 2020 2022 7a77  uerich",.    "zw
-000130f0: 222c 0a5d 0a0a 0a63 6c61 7373 2049 535f  ",.]...class IS_
-00013100: 4854 5450 5f55 524c 2856 616c 6964 6174  HTTP_URL(Validat
-00013110: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
-00013120: 2052 656a 6563 7473 2061 2055 524c 2073   Rejects a URL s
-00013130: 7472 696e 6720 6966 2061 6e79 206f 6620  tring if any of 
-00013140: 7468 6520 666f 6c6c 6f77 696e 6720 6973  the following is
-00013150: 2074 7275 653a 0a20 2020 2020 2020 2a20   true:.       * 
-00013160: 5468 6520 7374 7269 6e67 2069 7320 656d  The string is em
-00013170: 7074 7920 6f72 204e 6f6e 650a 2020 2020  pty or None.    
-00013180: 2020 202a 2054 6865 2073 7472 696e 6720     * The string 
-00013190: 7573 6573 2063 6861 7261 6374 6572 7320  uses characters 
-000131a0: 7468 6174 2061 7265 206e 6f74 2061 6c6c  that are not all
-000131b0: 6f77 6564 2069 6e20 6120 5552 4c0a 2020  owed in a URL.  
-000131c0: 2020 2020 202a 2054 6865 2073 7472 696e       * The strin
-000131d0: 6720 6272 6561 6b73 2061 6e79 206f 6620  g breaks any of 
-000131e0: 7468 6520 4854 5450 2073 796e 7461 6374  the HTTP syntact
-000131f0: 6963 2072 756c 6573 0a20 2020 2020 2020  ic rules.       
-00013200: 2a20 5468 6520 5552 4c20 7363 6865 6d65  * The URL scheme
-00013210: 2073 7065 6369 6669 6564 2028 6966 206f   specified (if o
-00013220: 6e65 2069 7320 7370 6563 6966 6965 6429  ne is specified)
-00013230: 2069 7320 6e6f 7420 2768 7474 7027 206f   is not 'http' o
-00013240: 7220 2768 7474 7073 270a 2020 2020 2020  r 'https'.      
-00013250: 202a 2054 6865 2074 6f70 2d6c 6576 656c   * The top-level
-00013260: 2064 6f6d 6169 6e20 2869 6620 6120 686f   domain (if a ho
-00013270: 7374 206e 616d 6520 6973 2073 7065 6369  st name is speci
-00013280: 6669 6564 2920 646f 6573 206e 6f74 2065  fied) does not e
-00013290: 7869 7374 0a0a 2020 2020 4261 7365 6420  xist..    Based 
-000132a0: 6f6e 2052 4643 2032 3631 363a 2068 7474  on RFC 2616: htt
-000132b0: 703a 2f2f 7777 772e 6661 7173 2e6f 7267  p://www.faqs.org
-000132c0: 2f72 6663 732f 7266 6332 3631 362e 6874  /rfcs/rfc2616.ht
-000132d0: 6d6c 0a0a 2020 2020 5468 6973 2066 756e  ml..    This fun
-000132e0: 6374 696f 6e20 6f6e 6c79 2063 6865 636b  ction only check
-000132f0: 7320 7468 6520 5552 4c27 7320 7379 6e74  s the URL's synt
-00013300: 6178 2e20 4974 2064 6f65 7320 6e6f 7420  ax. It does not 
-00013310: 6368 6563 6b20 7468 6174 2074 6865 2055  check that the U
-00013320: 524c 0a20 2020 2070 6f69 6e74 7320 746f  RL.    points to
-00013330: 2061 2072 6561 6c20 646f 6375 6d65 6e74   a real document
-00013340: 2c20 666f 7220 6578 616d 706c 652c 206f  , for example, o
-00013350: 7220 7468 6174 2069 7420 6f74 6865 7277  r that it otherw
-00013360: 6973 6520 6d61 6b65 7320 7365 6e73 650a  ise makes sense.
-00013370: 2020 2020 7365 6d61 6e74 6963 616c 6c79      semantically
-00013380: 2e20 5468 6973 2066 756e 6374 696f 6e20  . This function 
-00013390: 646f 6573 2061 7574 6f6d 6174 6963 616c  does automatical
-000133a0: 6c79 2070 7265 7065 6e64 2027 6874 7470  ly prepend 'http
-000133b0: 3a2f 2f27 2069 6e20 6672 6f6e 740a 2020  ://' in front.  
-000133c0: 2020 6f66 2061 2055 524c 2069 6e20 7468    of a URL in th
-000133d0: 6520 6361 7365 206f 6620 616e 2061 6262  e case of an abb
-000133e0: 7265 7669 6174 6564 2055 524c 2028 652e  reviated URL (e.
-000133f0: 672e 2027 676f 6f67 6c65 2e63 6127 292e  g. 'google.ca').
-00013400: 0a0a 2020 2020 5468 6520 6c69 7374 206f  ..    The list o
-00013410: 6620 616c 6c6f 7765 6420 7363 6865 6d65  f allowed scheme
-00013420: 7320 6973 2063 7573 746f 6d69 7a61 626c  s is customizabl
-00013430: 6520 7769 7468 2074 6865 2061 6c6c 6f77  e with the allow
-00013440: 6564 5f73 6368 656d 6573 0a20 2020 2070  ed_schemes.    p
-00013450: 6172 616d 6574 6572 2e20 4966 2079 6f75  arameter. If you
-00013460: 2065 7863 6c75 6465 204e 6f6e 6520 6672   exclude None fr
-00013470: 6f6d 2074 6865 206c 6973 742c 2074 6865  om the list, the
-00013480: 6e20 6162 6272 6576 6961 7465 6420 5552  n abbreviated UR
-00013490: 4c73 0a20 2020 2028 6c61 636b 696e 6720  Ls.    (lacking 
-000134a0: 6120 7363 6865 6d65 2073 7563 6820 6173  a scheme such as
-000134b0: 2027 6874 7470 2729 2077 696c 6c20 6265   'http') will be
-000134c0: 2072 656a 6563 7465 642e 0a0a 2020 2020   rejected...    
-000134d0: 5468 6520 6465 6661 756c 7420 7072 6570  The default prep
-000134e0: 656e 6465 6420 7363 6865 6d65 2069 7320  ended scheme is 
-000134f0: 6375 7374 6f6d 697a 6162 6c65 2077 6974  customizable wit
-00013500: 6820 7468 6520 7072 6570 656e 645f 7363  h the prepend_sc
-00013510: 6865 6d65 0a20 2020 2070 6172 616d 6574  heme.    paramet
-00013520: 6572 2e20 4966 2079 6f75 2073 6574 2070  er. If you set p
-00013530: 7265 7065 6e64 5f73 6368 656d 6520 746f  repend_scheme to
-00013540: 204e 6f6e 6520 7468 656e 2070 7265 7065   None then prepe
-00013550: 6e64 696e 6720 7769 6c6c 2062 650a 2020  nding will be.  
-00013560: 2020 6469 7361 626c 6564 2e20 5552 4c73    disabled. URLs
-00013570: 2074 6861 7420 7265 7175 6972 6520 7072   that require pr
-00013580: 6570 656e 6469 6e67 2074 6f20 7061 7273  epending to pars
-00013590: 6520 7769 6c6c 2073 7469 6c6c 2062 6520  e will still be 
-000135a0: 6163 6365 7074 6564 2c0a 2020 2020 6275  accepted,.    bu
-000135b0: 7420 7468 6520 7265 7475 726e 2076 616c  t the return val
-000135c0: 7565 2077 696c 6c20 6e6f 7420 6265 206d  ue will not be m
-000135d0: 6f64 6966 6965 642e 0a0a 2020 2020 4061  odified...    @a
-000135e0: 7574 686f 723a 204a 6f6e 6174 6861 6e20  uthor: Jonathan 
-000135f0: 4265 6e6e 0a0a 2020 2020 2020 2020 3e3e  Benn..        >>
-00013600: 3e20 4953 5f48 5454 505f 5552 4c28 2928  > IS_HTTP_URL()(
-00013610: 2768 7474 703a 2f2f 312e 322e 332e 3427  'http://1.2.3.4'
-00013620: 290a 2020 2020 2020 2020 2827 6874 7470  ).        ('http
-00013630: 3a2f 2f31 2e32 2e33 2e34 272c 204e 6f6e  ://1.2.3.4', Non
-00013640: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-00013650: 535f 4854 5450 5f55 524c 2829 2827 6874  S_HTTP_URL()('ht
-00013660: 7470 3a2f 2f61 6263 2e63 6f6d 2729 0a20  tp://abc.com'). 
-00013670: 2020 2020 2020 2028 2768 7474 703a 2f2f         ('http://
-00013680: 6162 632e 636f 6d27 2c20 4e6f 6e65 290a  abc.com', None).
-00013690: 2020 2020 2020 2020 3e3e 3e20 4953 5f48          >>> IS_H
-000136a0: 5454 505f 5552 4c28 2928 2768 7474 7073  TTP_URL()('https
-000136b0: 3a2f 2f61 6263 2e63 6f6d 2729 0a20 2020  ://abc.com').   
-000136c0: 2020 2020 2028 2768 7474 7073 3a2f 2f61       ('https://a
-000136d0: 6263 2e63 6f6d 272c 204e 6f6e 6529 0a20  bc.com', None). 
-000136e0: 2020 2020 2020 203e 3e3e 2049 535f 4854         >>> IS_HT
-000136f0: 5450 5f55 524c 2829 2827 6874 7470 783a  TP_URL()('httpx:
-00013700: 2f2f 6162 632e 636f 6d27 290a 2020 2020  //abc.com').    
-00013710: 2020 2020 2827 6874 7470 783a 2f2f 6162      ('httpx://ab
-00013720: 632e 636f 6d27 2c20 2765 6e74 6572 2061  c.com', 'enter a
-00013730: 2076 616c 6964 2055 524c 2729 0a20 2020   valid URL').   
-00013740: 2020 2020 203e 3e3e 2049 535f 4854 5450       >>> IS_HTTP
-00013750: 5f55 524c 2829 2827 6874 7470 3a2f 2f61  _URL()('http://a
-00013760: 6263 2e63 6f6d 3a38 3027 290a 2020 2020  bc.com:80').    
-00013770: 2020 2020 2827 6874 7470 3a2f 2f61 6263      ('http://abc
-00013780: 2e63 6f6d 3a38 3027 2c20 4e6f 6e65 290a  .com:80', None).
-00013790: 2020 2020 2020 2020 3e3e 3e20 4953 5f48          >>> IS_H
-000137a0: 5454 505f 5552 4c28 2928 2768 7474 703a  TTP_URL()('http:
-000137b0: 2f2f 7573 6572 4061 6263 2e63 6f6d 2729  //user@abc.com')
-000137c0: 0a20 2020 2020 2020 2028 2768 7474 703a  .        ('http:
-000137d0: 2f2f 7573 6572 4061 6263 2e63 6f6d 272c  //user@abc.com',
-000137e0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
-000137f0: 3e3e 2049 535f 4854 5450 5f55 524c 2829  >> IS_HTTP_URL()
-00013800: 2827 6874 7470 3a2f 2f75 7365 7240 312e  ('http://user@1.
-00013810: 322e 332e 3427 290a 2020 2020 2020 2020  2.3.4').        
-00013820: 2827 6874 7470 3a2f 2f75 7365 7240 312e  ('http://user@1.
-00013830: 322e 332e 3427 2c20 4e6f 6e65 290a 0a20  2.3.4', None).. 
-00013840: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
-00013850: 2065 7272 6f72 5f6d 6573 7361 6765 3a20   error_message: 
-00013860: 6120 7374 7269 6e67 2c20 7468 6520 6572  a string, the er
-00013870: 726f 7220 6d65 7373 6167 6520 746f 2067  ror message to g
-00013880: 6976 6520 7468 6520 656e 6420 7573 6572  ive the end user
-00013890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000138a0: 7468 6520 5552 4c20 646f 6573 206e 6f74  the URL does not
-000138b0: 2076 616c 6964 6174 650a 2020 2020 2020   validate.      
-000138c0: 2020 616c 6c6f 7765 645f 7363 6865 6d65    allowed_scheme
-000138d0: 733a 2061 206c 6973 7420 636f 6e74 6169  s: a list contai
-000138e0: 6e69 6e67 2073 7472 696e 6773 206f 7220  ning strings or 
-000138f0: 4e6f 6e65 2e20 4561 6368 2065 6c65 6d65  None. Each eleme
-00013900: 6e74 0a20 2020 2020 2020 2020 2020 2069  nt.            i
-00013910: 7320 6120 7363 6865 6d65 2074 6865 2069  s a scheme the i
-00013920: 6e70 7574 7465 6420 5552 4c20 6973 2061  nputted URL is a
-00013930: 6c6c 6f77 6564 2074 6f20 7573 650a 2020  llowed to use.  
-00013940: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
-00013950: 6865 6d65 3a20 6120 7374 7269 6e67 2c20  heme: a string, 
-00013960: 7468 6973 2073 6368 656d 6520 6973 2070  this scheme is p
-00013970: 7265 7065 6e64 6564 2069 6620 6974 2773  repended if it's
-00013980: 0a20 2020 2020 2020 2020 2020 206e 6563  .            nec
-00013990: 6573 7361 7279 2074 6f20 6d61 6b65 2074  essary to make t
-000139a0: 6865 2055 524c 2076 616c 6964 0a20 2020  he URL valid.   
-000139b0: 2022 2222 0a0a 2020 2020 5245 4745 585f   """..    REGEX_
-000139c0: 4745 4e45 5249 435f 5641 4c49 445f 4950  GENERIC_VALID_IP
-000139d0: 203d 2072 2228 5b5c 772e 217e 2a27 7c3b   = r"([\w.!~*'|;
-000139e0: 3a26 3d2b 242c 2d5d 2b40 293f 5c64 2b5c  :&=+$,-]+@)?\d+\
-000139f0: 2e5c 642b 5c2e 5c64 2b5c 2e5c 642b 283a  .\d+\.\d+\.\d+(:
-00013a00: 5c64 2a29 2a24 220a 2020 2020 5245 4745  \d*)*$".    REGE
-00013a10: 585f 4745 4e45 5249 435f 5641 4c49 445f  X_GENERIC_VALID_
-00013a20: 444f 4d41 494e 203d 2072 2228 5b5c 772e  DOMAIN = r"([\w.
-00013a30: 217e 2a27 7c3b 3a26 3d2b 242c 2d5d 2b40  !~*'|;:&=+$,-]+@
-00013a40: 293f 2828 5b41 2d5a 612d 7a30 2d39 5d2b  )?(([A-Za-z0-9]+
-00013a50: 5b41 2d5a 612d 7a30 2d39 5c2d 5d2a 5b41  [A-Za-z0-9\-]*[A
-00013a60: 2d5a 612d 7a30 2d39 5d2b 5c2e 292a 285b  -Za-z0-9]+\.)*([
-00013a70: 412d 5a61 2d7a 302d 395d 2b5c 2e29 2a29  A-Za-z0-9]+\.)*)
-00013a80: 2a28 5b41 2d5a 612d 7a5d 2b5b 412d 5a61  *([A-Za-z]+[A-Za
-00013a90: 2d7a 302d 395c 2d5d 2a5b 412d 5a61 2d7a  -z0-9\-]*[A-Za-z
-00013aa0: 302d 395d 2b29 5c2e 3f28 3a5c 642a 292a  0-9]+)\.?(:\d*)*
-00013ab0: 2422 0a0a 2020 2020 6465 6620 5f5f 696e  $"..    def __in
-00013ac0: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00013ad0: 6c66 2c0a 2020 2020 2020 2020 6572 726f  lf,.        erro
-00013ae0: 725f 6d65 7373 6167 653d 2245 6e74 6572  r_message="Enter
-00013af0: 2061 2076 616c 6964 2055 524c 222c 0a20   a valid URL",. 
-00013b00: 2020 2020 2020 2061 6c6c 6f77 6564 5f73         allowed_s
-00013b10: 6368 656d 6573 3d4e 6f6e 652c 0a20 2020  chemes=None,.   
-00013b20: 2020 2020 2070 7265 7065 6e64 5f73 6368       prepend_sch
-00013b30: 656d 653d 2268 7474 7022 2c0a 2020 2020  eme="http",.    
-00013b40: 2020 2020 616c 6c6f 7765 645f 746c 6473      allowed_tlds
-00013b50: 3d4e 6f6e 652c 0a20 2020 2029 3a0a 2020  =None,.    ):.  
-00013b60: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
-00013b70: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
-00013b80: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
-00013b90: 2069 6620 616c 6c6f 7765 645f 7363 6865   if allowed_sche
-00013ba0: 6d65 7320 6973 204e 6f6e 653a 0a20 2020  mes is None:.   
-00013bb0: 2020 2020 2020 2020 2073 656c 662e 616c           self.al
-00013bc0: 6c6f 7765 645f 7363 6865 6d65 7320 3d20  lowed_schemes = 
-00013bd0: 6874 7470 5f73 6368 656d 6573 0a20 2020  http_schemes.   
-00013be0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00013bf0: 2020 2020 2020 2073 656c 662e 616c 6c6f         self.allo
-00013c00: 7765 645f 7363 6865 6d65 7320 3d20 616c  wed_schemes = al
-00013c10: 6c6f 7765 645f 7363 6865 6d65 730a 2020  lowed_schemes.  
-00013c20: 2020 2020 2020 6966 2061 6c6c 6f77 6564        if allowed
-00013c30: 5f74 6c64 7320 6973 204e 6f6e 653a 0a20  _tlds is None:. 
-00013c40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013c50: 616c 6c6f 7765 645f 746c 6473 203d 206f  allowed_tlds = o
-00013c60: 6666 6963 6961 6c5f 746f 705f 6c65 7665  fficial_top_leve
-00013c70: 6c5f 646f 6d61 696e 730a 2020 2020 2020  l_domains.      
-00013c80: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00013c90: 2020 2020 7365 6c66 2e61 6c6c 6f77 6564      self.allowed
-00013ca0: 5f74 6c64 7320 3d20 616c 6c6f 7765 645f  _tlds = allowed_
-00013cb0: 746c 6473 0a20 2020 2020 2020 2073 656c  tlds.        sel
-00013cc0: 662e 7072 6570 656e 645f 7363 6865 6d65  f.prepend_scheme
-00013cd0: 203d 2070 7265 7065 6e64 5f73 6368 656d   = prepend_schem
-00013ce0: 650a 0a20 2020 2020 2020 2066 6f72 2069  e..        for i
-00013cf0: 2069 6e20 7365 6c66 2e61 6c6c 6f77 6564   in self.allowed
-00013d00: 5f73 6368 656d 6573 3a0a 2020 2020 2020  _schemes:.      
-00013d10: 2020 2020 2020 6966 2069 206e 6f74 2069        if i not i
-00013d20: 6e20 6874 7470 5f73 6368 656d 6573 3a0a  n http_schemes:.
-00013d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013d40: 7261 6973 6520 5379 6e74 6178 4572 726f  raise SyntaxErro
-00013d50: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
-00013d60: 2020 2020 2020 2022 616c 6c6f 7765 645f         "allowed_
-00013d70: 7363 6865 6d65 2076 616c 7565 2027 2573  scheme value '%s
-00013d80: 2720 6973 206e 6f74 2069 6e20 2573 2220  ' is not in %s" 
-00013d90: 2520 2869 2c20 6874 7470 5f73 6368 656d  % (i, http_schem
-00013da0: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-00013db0: 2020 2020 290a 0a20 2020 2020 2020 2069      )..        i
-00013dc0: 6620 7365 6c66 2e70 7265 7065 6e64 5f73  f self.prepend_s
-00013dd0: 6368 656d 6520 6e6f 7420 696e 2073 656c  cheme not in sel
-00013de0: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
-00013df0: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
-00013e00: 6169 7365 2053 796e 7461 7845 7272 6f72  aise SyntaxError
-00013e10: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00013e20: 2020 2270 7265 7065 6e64 5f73 6368 656d    "prepend_schem
-00013e30: 653d 2725 7327 2069 7320 6e6f 7420 696e  e='%s' is not in
-00013e40: 2061 6c6c 6f77 6564 5f73 6368 656d 6573   allowed_schemes
-00013e50: 3d25 7322 0a20 2020 2020 2020 2020 2020  =%s".           
-00013e60: 2020 2020 2025 2028 7365 6c66 2e70 7265       % (self.pre
-00013e70: 7065 6e64 5f73 6368 656d 652c 2073 656c  pend_scheme, sel
-00013e80: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
-00013e90: 7329 0a20 2020 2020 2020 2020 2020 2029  s).            )
-00013ea0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-00013eb0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-00013ec0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-00013ed0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00013ee0: 2020 2020 2041 7267 733a 0a20 2020 2020       Args:.     
-00013ef0: 2020 2020 2020 2076 616c 7565 3a20 6120         value: a 
-00013f00: 7374 7269 6e67 2c20 7468 6520 5552 4c20  string, the URL 
-00013f10: 746f 2076 616c 6964 6174 650a 0a20 2020  to validate..   
-00013f20: 2020 2020 2052 6574 7572 6e73 3a0a 2020       Returns:.  
-00013f30: 2020 2020 2020 2020 2020 6120 7475 706c            a tupl
-00013f40: 652c 2077 6865 7265 2074 7570 6c65 5b30  e, where tuple[0
-00013f50: 5d20 6973 2074 6865 2069 6e70 7574 7465  ] is the inputte
-00013f60: 6420 7661 6c75 650a 2020 2020 2020 2020  d value.        
-00013f70: 2020 2020 2870 6f73 7369 626c 6520 7072      (possible pr
-00013f80: 6570 656e 6465 6420 7769 7468 2070 7265  epended with pre
-00013f90: 7065 6e64 5f73 6368 656d 6529 2c20 616e  pend_scheme), an
-00013fa0: 6420 7475 706c 655b 315d 2069 7320 6569  d tuple[1] is ei
-00013fb0: 7468 6572 0a20 2020 2020 2020 2020 2020  ther.           
-00013fc0: 204e 6f6e 6520 2873 7563 6365 7373 2129   None (success!)
-00013fd0: 206f 7220 7468 6520 7374 7269 6e67 2065   or the string e
-00013fe0: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
-00013ff0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00014000: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00014010: 2020 2320 6966 2074 6865 2055 524c 2070    # if the URL p
-00014020: 6173 7365 7320 6765 6e65 7269 6320 7661  asses generic va
-00014030: 6c69 6461 7469 6f6e 0a20 2020 2020 2020  lidation.       
-00014040: 2020 2020 2078 203d 2049 535f 4745 4e45       x = IS_GENE
-00014050: 5249 435f 5552 4c28 0a20 2020 2020 2020  RIC_URL(.       
-00014060: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
-00014070: 6573 7361 6765 3d73 656c 662e 6572 726f  essage=self.erro
-00014080: 725f 6d65 7373 6167 652c 0a20 2020 2020  r_message,.     
-00014090: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
-000140a0: 6564 5f73 6368 656d 6573 3d73 656c 662e  ed_schemes=self.
-000140b0: 616c 6c6f 7765 645f 7363 6865 6d65 732c  allowed_schemes,
-000140c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000140d0: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
-000140e0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
-000140f0: 656d 652c 0a20 2020 2020 2020 2020 2020  eme,.           
-00014100: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
-00014110: 6620 7828 7661 6c75 6529 5b31 5d20 6973  f x(value)[1] is
-00014120: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00014130: 2020 2020 2020 2063 6f6d 706f 6e65 6e74         component
-00014140: 7320 3d20 7572 6c70 6172 7365 2e75 726c  s = urlparse.url
-00014150: 7061 7273 6528 7661 6c75 6529 0a20 2020  parse(value).   
-00014160: 2020 2020 2020 2020 2020 2020 2061 7574               aut
-00014170: 686f 7269 7479 203d 2063 6f6d 706f 6e65  hority = compone
-00014180: 6e74 732e 6e65 746c 6f63 0a20 2020 2020  nts.netloc.     
-00014190: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-000141a0: 7468 6572 6520 6973 2061 6e20 6175 7468  there is an auth
-000141b0: 6f72 6974 7920 636f 6d70 6f6e 656e 740a  ority component.
-000141c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000141d0: 6966 2061 7574 686f 7269 7479 3a0a 2020  if authority:.  
-000141e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000141f0: 2020 2320 6966 2061 7574 686f 7269 7479    # if authority
-00014200: 2069 7320 6120 7661 6c69 6420 4950 2061   is a valid IP a
-00014210: 6464 7265 7373 0a20 2020 2020 2020 2020  ddress.         
-00014220: 2020 2020 2020 2020 2020 2069 6620 7265             if re
-00014230: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
-00014240: 585f 4745 4e45 5249 435f 5641 4c49 445f  X_GENERIC_VALID_
-00014250: 4950 2c20 6175 7468 6f72 6974 7929 3a0a  IP, authority):.
-00014260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014270: 2020 2020 2020 2020 2320 5468 656e 2074          # Then t
-00014280: 6869 7320 4854 5450 2055 524c 2069 7320  his HTTP URL is 
-00014290: 7661 6c69 640a 2020 2020 2020 2020 2020  valid.          
-000142a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000142b0: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
-000142c0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000142d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000142e0: 2020 2020 2020 2020 2020 2020 2023 2065               # e
-000142f0: 6c73 6520 6966 2061 7574 686f 7269 7479  lse if authority
-00014300: 2069 7320 6120 7661 6c69 6420 646f 6d61   is a valid doma
-00014310: 696e 206e 616d 650a 2020 2020 2020 2020  in name.        
-00014320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014330: 646f 6d61 696e 4d61 7463 6820 3d20 7265  domainMatch = re
-00014340: 2e6d 6174 6368 280a 2020 2020 2020 2020  .match(.        
-00014350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014360: 2020 2020 7365 6c66 2e52 4547 4558 5f47      self.REGEX_G
-00014370: 454e 4552 4943 5f56 414c 4944 5f44 4f4d  ENERIC_VALID_DOM
-00014380: 4149 4e2c 2061 7574 686f 7269 7479 0a20  AIN, authority. 
-00014390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000143b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143c0: 2069 6620 646f 6d61 696e 4d61 7463 683a   if domainMatch:
-000143d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000143e0: 2020 2020 2020 2020 2020 2020 2023 2069               # i
-000143f0: 6620 7468 6520 746f 702d 6c65 7665 6c20  f the top-level 
-00014400: 646f 6d61 696e 2072 6561 6c6c 7920 6578  domain really ex
-00014410: 6973 7473 0a20 2020 2020 2020 2020 2020  ists.           
-00014420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014430: 2069 6620 646f 6d61 696e 4d61 7463 682e   if domainMatch.
-00014440: 6772 6f75 7028 3529 2e6c 6f77 6572 2829  group(5).lower()
-00014450: 2069 6e20 7365 6c66 2e61 6c6c 6f77 6564   in self.allowed
-00014460: 5f74 6c64 733a 0a20 2020 2020 2020 2020  _tlds:.         
-00014470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014480: 2020 2020 2020 2023 2054 6865 6e20 7468         # Then th
-00014490: 6973 2048 5454 5020 5552 4c20 6973 2076  is HTTP URL is v
-000144a0: 616c 6964 0a20 2020 2020 2020 2020 2020  alid.           
-000144b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000144c0: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-000144d0: 650a 2020 2020 2020 2020 2020 2020 2020  e.              
-000144e0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000144f0: 2020 2020 2020 2020 2020 2020 2320 656c              # el
-00014500: 7365 2074 6869 7320 6973 2061 2072 656c  se this is a rel
-00014510: 6174 6976 652f 6162 6272 6576 6961 7465  ative/abbreviate
-00014520: 6420 5552 4c2c 2077 6869 6368 2077 696c  d URL, which wil
-00014530: 6c20 7061 7273 650a 2020 2020 2020 2020  l parse.        
-00014540: 2020 2020 2020 2020 2020 2020 2320 696e              # in
-00014550: 746f 2074 6865 2055 524c 2773 2070 6174  to the URL's pat
-00014560: 6820 636f 6d70 6f6e 656e 740a 2020 2020  h component.    
-00014570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014580: 7061 7468 203d 2063 6f6d 706f 6e65 6e74  path = component
-00014590: 732e 7061 7468 0a20 2020 2020 2020 2020  s.path.         
-000145a0: 2020 2020 2020 2020 2020 2023 2072 656c             # rel
-000145b0: 6174 6976 6520 6361 7365 3a20 6966 2074  ative case: if t
-000145c0: 6869 7320 6973 2061 2076 616c 6964 2070  his is a valid p
-000145d0: 6174 6820 2869 6620 6974 2073 7461 7274  ath (if it start
-000145e0: 7320 7769 7468 0a20 2020 2020 2020 2020  s with.         
-000145f0: 2020 2020 2020 2020 2020 2023 2061 2073             # a s
-00014600: 6c61 7368 290a 2020 2020 2020 2020 2020  lash).          
-00014610: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00014620: 2070 6174 682e 7374 6172 7473 7769 7468   path.startswith
-00014630: 2822 2f22 293a 0a20 2020 2020 2020 2020  ("/"):.         
-00014640: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00014650: 2061 6262 7265 7669 6174 6564 2063 6173   abbreviated cas
-00014660: 653a 2069 6620 7765 2068 6176 656e 2774  e: if we haven't
-00014670: 2061 6c72 6561 6479 2c20 7072 6570 656e   already, prepen
-00014680: 6420 610a 2020 2020 2020 2020 2020 2020  d a.            
-00014690: 2020 2020 2020 2020 2020 2020 2320 7363              # sc
-000146a0: 6865 6d65 2061 6e64 2073 6565 2069 6620  heme and see if 
-000146b0: 6974 2066 6978 6573 2074 6865 2070 726f  it fixes the pro
-000146c0: 626c 656d 0a20 2020 2020 2020 2020 2020  blem.           
-000146d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-000146e0: 223a 2f2f 2220 6e6f 7420 696e 2076 616c  "://" not in val
-000146f0: 7565 2061 6e64 204e 6f6e 6520 696e 2073  ue and None in s
-00014700: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
-00014710: 6d65 733a 0a20 2020 2020 2020 2020 2020  mes:.           
-00014720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014730: 2073 6368 656d 6554 6f55 7365 203d 2073   schemeToUse = s
-00014740: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
-00014750: 6d65 206f 7220 2268 7474 7022 0a20 2020  me or "http".   
-00014760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014770: 2020 2020 2020 2020 206e 6577 5f76 616c           new_val
-00014780: 7565 203d 2073 656c 662e 7661 6c69 6461  ue = self.valida
-00014790: 7465 2873 6368 656d 6554 6f55 7365 202b  te(schemeToUse +
-000147a0: 2022 3a2f 2f22 202b 2076 616c 7565 290a   "://" + value).
-000147b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000147c0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000147d0: 726e 206e 6577 5f76 616c 7565 2069 6620  rn new_value if 
-000147e0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
-000147f0: 656d 6520 656c 7365 2076 616c 7565 0a20  eme else value. 
-00014800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014810: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
-00014820: 2020 2020 2020 2020 6578 6365 7074 3a0a          except:.
-00014830: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-00014840: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
-00014850: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00014860: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-00014870: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-00014880: 6529 290a 0a0a 636c 6173 7320 4953 5f55  e))...class IS_U
-00014890: 524c 2856 616c 6964 6174 6f72 293a 0a20  RL(Validator):. 
-000148a0: 2020 2022 2222 0a20 2020 2052 656a 6563     """.    Rejec
-000148b0: 7473 2061 2055 524c 2073 7472 696e 6720  ts a URL string 
-000148c0: 6966 2061 6e79 206f 6620 7468 6520 666f  if any of the fo
-000148d0: 6c6c 6f77 696e 6720 6973 2074 7275 653a  llowing is true:
-000148e0: 0a0a 2020 2020 2020 202a 2054 6865 2073  ..       * The s
-000148f0: 7472 696e 6720 6973 2065 6d70 7479 206f  tring is empty o
-00014900: 7220 4e6f 6e65 0a20 2020 2020 2020 2a20  r None.       * 
-00014910: 5468 6520 7374 7269 6e67 2075 7365 7320  The string uses 
-00014920: 6368 6172 6163 7465 7273 2074 6861 7420  characters that 
-00014930: 6172 6520 6e6f 7420 616c 6c6f 7765 6420  are not allowed 
-00014940: 696e 2061 2055 524c 0a20 2020 2020 2020  in a URL.       
-00014950: 2a20 5468 6520 7374 7269 6e67 2062 7265  * The string bre
-00014960: 616b 7320 616e 7920 6f66 2074 6865 2048  aks any of the H
-00014970: 5454 5020 7379 6e74 6163 7469 6320 7275  TTP syntactic ru
-00014980: 6c65 730a 2020 2020 2020 202a 2054 6865  les.       * The
-00014990: 2055 524c 2073 6368 656d 6520 7370 6563   URL scheme spec
-000149a0: 6966 6965 6420 2869 6620 6f6e 6520 6973  ified (if one is
-000149b0: 2073 7065 6369 6669 6564 2920 6973 206e   specified) is n
-000149c0: 6f74 2027 6874 7470 2720 6f72 2027 6874  ot 'http' or 'ht
-000149d0: 7470 7327 0a20 2020 2020 2020 2a20 5468  tps'.       * Th
-000149e0: 6520 746f 702d 6c65 7665 6c20 646f 6d61  e top-level doma
-000149f0: 696e 2028 6966 2061 2068 6f73 7420 6e61  in (if a host na
-00014a00: 6d65 2069 7320 7370 6563 6966 6965 6429  me is specified)
-00014a10: 2064 6f65 7320 6e6f 7420 6578 6973 740a   does not exist.
-00014a20: 0a20 2020 2028 5468 6573 6520 7275 6c65  .    (These rule
-00014a30: 7320 6172 6520 6261 7365 6420 6f6e 2052  s are based on R
-00014a40: 4643 2032 3631 363a 2068 7474 703a 2f2f  FC 2616: http://
-00014a50: 7777 772e 6661 7173 2e6f 7267 2f72 6663  www.faqs.org/rfc
-00014a60: 732f 7266 6332 3631 362e 6874 6d6c 290a  s/rfc2616.html).
-00014a70: 0a20 2020 2054 6869 7320 6675 6e63 7469  .    This functi
-00014a80: 6f6e 206f 6e6c 7920 6368 6563 6b73 2074  on only checks t
-00014a90: 6865 2055 524c 2773 2073 796e 7461 782e  he URL's syntax.
-00014aa0: 2049 7420 646f 6573 206e 6f74 2063 6865   It does not che
-00014ab0: 636b 2074 6861 7420 7468 6520 5552 4c0a  ck that the URL.
-00014ac0: 2020 2020 706f 696e 7473 2074 6f20 6120      points to a 
-00014ad0: 7265 616c 2064 6f63 756d 656e 742c 2066  real document, f
-00014ae0: 6f72 2065 7861 6d70 6c65 2c20 6f72 2074  or example, or t
-00014af0: 6861 7420 6974 206f 7468 6572 7769 7365  hat it otherwise
-00014b00: 206d 616b 6573 2073 656e 7365 0a20 2020   makes sense.   
-00014b10: 2073 656d 616e 7469 6361 6c6c 792e 2054   semantically. T
-00014b20: 6869 7320 6675 6e63 7469 6f6e 2064 6f65  his function doe
-00014b30: 7320 6175 746f 6d61 7469 6361 6c6c 7920  s automatically 
-00014b40: 7072 6570 656e 6420 2768 7474 703a 2f2f  prepend 'http://
-00014b50: 2720 696e 2066 726f 6e74 0a20 2020 206f  ' in front.    o
-00014b60: 6620 6120 5552 4c20 696e 2074 6865 2063  f a URL in the c
-00014b70: 6173 6520 6f66 2061 6e20 6162 6272 6576  ase of an abbrev
-00014b80: 6961 7465 6420 5552 4c20 2865 2e67 2e20  iated URL (e.g. 
-00014b90: 2767 6f6f 676c 652e 6361 2729 2e0a 0a20  'google.ca')... 
-00014ba0: 2020 2049 6620 7468 6520 7061 7261 6d65     If the parame
-00014bb0: 7465 7220 6d6f 6465 3d27 6765 6e65 7269  ter mode='generi
-00014bc0: 6327 2069 7320 7573 6564 2c20 7468 656e  c' is used, then
-00014bd0: 2074 6869 7320 6675 6e63 7469 6f6e 2773   this function's
-00014be0: 2062 6568 6176 696f 720a 2020 2020 6368   behavior.    ch
-00014bf0: 616e 6765 732e 2049 7420 7468 656e 2072  anges. It then r
-00014c00: 656a 6563 7473 2061 2055 524c 2073 7472  ejects a URL str
-00014c10: 696e 6720 6966 2061 6e79 206f 6620 7468  ing if any of th
-00014c20: 6520 666f 6c6c 6f77 696e 6720 6973 2074  e following is t
-00014c30: 7275 653a 0a0a 2020 2020 2020 202a 2054  rue:..       * T
-00014c40: 6865 2073 7472 696e 6720 6973 2065 6d70  he string is emp
-00014c50: 7479 206f 7220 4e6f 6e65 0a20 2020 2020  ty or None.     
-00014c60: 2020 2a20 5468 6520 7374 7269 6e67 2075    * The string u
-00014c70: 7365 7320 6368 6172 6163 7465 7273 2074  ses characters t
-00014c80: 6861 7420 6172 6520 6e6f 7420 616c 6c6f  hat are not allo
-00014c90: 7765 6420 696e 2061 2055 524c 0a20 2020  wed in a URL.   
-00014ca0: 2020 2020 2a20 5468 6520 5552 4c20 7363      * The URL sc
-00014cb0: 6865 6d65 2073 7065 6369 6669 6564 2028  heme specified (
-00014cc0: 6966 206f 6e65 2069 7320 7370 6563 6966  if one is specif
-00014cd0: 6965 6429 2069 7320 6e6f 7420 7661 6c69  ied) is not vali
-00014ce0: 640a 0a20 2020 2028 5468 6573 6520 7275  d..    (These ru
-00014cf0: 6c65 7320 6172 6520 6261 7365 6420 6f6e  les are based on
-00014d00: 2052 4643 2032 3339 363a 2068 7474 703a   RFC 2396: http:
-00014d10: 2f2f 7777 772e 6661 7173 2e6f 7267 2f72  //www.faqs.org/r
-00014d20: 6663 732f 7266 6332 3339 362e 6874 6d6c  fcs/rfc2396.html
-00014d30: 290a 0a20 2020 2054 6865 206c 6973 7420  )..    The list 
-00014d40: 6f66 2061 6c6c 6f77 6564 2073 6368 656d  of allowed schem
-00014d50: 6573 2069 7320 6375 7374 6f6d 697a 6162  es is customizab
-00014d60: 6c65 2077 6974 6820 7468 6520 616c 6c6f  le with the allo
-00014d70: 7765 645f 7363 6865 6d65 730a 2020 2020  wed_schemes.    
-00014d80: 7061 7261 6d65 7465 722e 2049 6620 796f  parameter. If yo
-00014d90: 7520 6578 636c 7564 6520 4e6f 6e65 2066  u exclude None f
-00014da0: 726f 6d20 7468 6520 6c69 7374 2c20 7468  rom the list, th
-00014db0: 656e 2061 6262 7265 7669 6174 6564 2055  en abbreviated U
-00014dc0: 524c 730a 2020 2020 286c 6163 6b69 6e67  RLs.    (lacking
-00014dd0: 2061 2073 6368 656d 6520 7375 6368 2061   a scheme such a
-00014de0: 7320 2768 7474 7027 2920 7769 6c6c 2062  s 'http') will b
-00014df0: 6520 7265 6a65 6374 6564 2e0a 0a20 2020  e rejected...   
-00014e00: 2054 6865 2064 6566 6175 6c74 2070 7265   The default pre
-00014e10: 7065 6e64 6564 2073 6368 656d 6520 6973  pended scheme is
-00014e20: 2063 7573 746f 6d69 7a61 626c 6520 7769   customizable wi
-00014e30: 7468 2074 6865 2070 7265 7065 6e64 5f73  th the prepend_s
-00014e40: 6368 656d 650a 2020 2020 7061 7261 6d65  cheme.    parame
-00014e50: 7465 722e 2049 6620 796f 7520 7365 7420  ter. If you set 
-00014e60: 7072 6570 656e 645f 7363 6865 6d65 2074  prepend_scheme t
-00014e70: 6f20 4e6f 6e65 2074 6865 6e20 7072 6570  o None then prep
-00014e80: 656e 6469 6e67 2077 696c 6c20 6265 0a20  ending will be. 
-00014e90: 2020 2064 6973 6162 6c65 642e 2055 524c     disabled. URL
-00014ea0: 7320 7468 6174 2072 6571 7569 7265 2070  s that require p
-00014eb0: 7265 7065 6e64 696e 6720 746f 2070 6172  repending to par
-00014ec0: 7365 2077 696c 6c20 7374 696c 6c20 6265  se will still be
-00014ed0: 2061 6363 6570 7465 642c 0a20 2020 2062   accepted,.    b
-00014ee0: 7574 2074 6865 2072 6574 7572 6e20 7661  ut the return va
-00014ef0: 6c75 6520 7769 6c6c 206e 6f74 2062 6520  lue will not be 
-00014f00: 6d6f 6469 6669 6564 2e0a 0a20 2020 2049  modified...    I
-00014f10: 535f 5552 4c20 6973 2063 6f6d 7061 7469  S_URL is compati
-00014f20: 626c 6520 7769 7468 2074 6865 2049 6e74  ble with the Int
-00014f30: 6572 6e61 7469 6f6e 616c 697a 6564 2044  ernationalized D
-00014f40: 6f6d 6169 6e20 4e61 6d65 2028 4944 4e29  omain Name (IDN)
-00014f50: 2073 7461 6e64 6172 640a 2020 2020 7370   standard.    sp
-00014f60: 6563 6966 6965 6420 696e 2052 4643 2033  ecified in RFC 3
-00014f70: 3439 3020 2868 7474 703a 2f2f 746f 6f6c  490 (http://tool
-00014f80: 732e 6965 7466 2e6f 7267 2f68 746d 6c2f  s.ietf.org/html/
-00014f90: 7266 6333 3439 3029 2e20 4173 2061 2072  rfc3490). As a r
-00014fa0: 6573 756c 742c 0a20 2020 2055 524c 7320  esult,.    URLs 
-00014fb0: 6361 6e20 6265 2072 6567 756c 6172 2073  can be regular s
-00014fc0: 7472 696e 6773 206f 7220 756e 6963 6f64  trings or unicod
-00014fd0: 6520 7374 7269 6e67 732e 0a20 2020 2049  e strings..    I
-00014fe0: 6620 7468 6520 5552 4c27 7320 646f 6d61  f the URL's doma
-00014ff0: 696e 2063 6f6d 706f 6e65 6e74 2028 652e  in component (e.
-00015000: 672e 2067 6f6f 676c 652e 6361 2920 636f  g. google.ca) co
-00015010: 6e74 6169 6e73 206e 6f6e 2d55 532d 4153  ntains non-US-AS
-00015020: 4349 490a 2020 2020 6c65 7474 6572 732c  CII.    letters,
-00015030: 2074 6865 6e20 7468 6520 646f 6d61 696e   then the domain
-00015040: 2077 696c 6c20 6265 2063 6f6e 7665 7274   will be convert
-00015050: 6564 2069 6e74 6f20 5075 6e79 636f 6465  ed into Punycode
-00015060: 2028 6465 6669 6e65 6420 696e 0a20 2020   (defined in.   
-00015070: 2052 4643 2033 3439 322c 2068 7474 703a   RFC 3492, http:
-00015080: 2f2f 746f 6f6c 732e 6965 7466 2e6f 7267  //tools.ietf.org
-00015090: 2f68 746d 6c2f 7266 6333 3439 3229 2e20  /html/rfc3492). 
-000150a0: 4953 5f55 524c 2067 6f65 7320 6120 6269  IS_URL goes a bi
-000150b0: 7420 6265 796f 6e64 0a20 2020 2074 6865  t beyond.    the
-000150c0: 2073 7461 6e64 6172 6473 2c20 616e 6420   standards, and 
-000150d0: 616c 6c6f 7773 206e 6f6e 2d55 532d 4153  allows non-US-AS
-000150e0: 4349 4920 6368 6172 6163 7465 7273 2074  CII characters t
-000150f0: 6f20 6265 2070 7265 7365 6e74 2069 6e20  o be present in 
-00015100: 7468 6520 7061 7468 0a20 2020 2061 6e64  the path.    and
-00015110: 2071 7565 7279 2063 6f6d 706f 6e65 6e74   query component
-00015120: 7320 6f66 2074 6865 2055 524c 2061 7320  s of the URL as 
-00015130: 7765 6c6c 2e20 5468 6573 6520 6e6f 6e2d  well. These non-
-00015140: 5553 2d41 5343 4949 2063 6861 7261 6374  US-ASCII charact
-00015150: 6572 7320 7769 6c6c 0a20 2020 2062 6520  ers will.    be 
-00015160: 6573 6361 7065 6420 7573 696e 6720 7468  escaped using th
-00015170: 6520 7374 616e 6461 7264 2027 2532 3027  e standard '%20'
-00015180: 2074 7970 6520 7379 6e74 6178 2e20 652e   type syntax. e.
-00015190: 672e 2074 6865 2075 6e69 636f 6465 0a20  g. the unicode. 
-000151a0: 2020 2063 6861 7261 6374 6572 2077 6974     character wit
-000151b0: 6820 6865 7820 636f 6465 2030 7834 6538  h hex code 0x4e8
-000151c0: 3620 7769 6c6c 2062 6563 6f6d 6520 2725  6 will become '%
-000151d0: 3465 2538 3627 0a0a 2020 2020 4172 6773  4e%86'..    Args
-000151e0: 3a0a 2020 2020 2020 2020 6572 726f 725f  :.        error_
-000151f0: 6d65 7373 6167 653a 2061 2073 7472 696e  message: a strin
-00015200: 672c 2074 6865 2065 7272 6f72 206d 6573  g, the error mes
-00015210: 7361 6765 2074 6f20 6769 7665 2074 6865  sage to give the
-00015220: 2065 6e64 2075 7365 720a 2020 2020 2020   end user.      
-00015230: 2020 2020 2020 6966 2074 6865 2055 524c        if the URL
-00015240: 2064 6f65 7320 6e6f 7420 7661 6c69 6461   does not valida
-00015250: 7465 0a20 2020 2020 2020 2061 6c6c 6f77  te.        allow
-00015260: 6564 5f73 6368 656d 6573 3a20 6120 6c69  ed_schemes: a li
-00015270: 7374 2063 6f6e 7461 696e 696e 6720 7374  st containing st
-00015280: 7269 6e67 7320 6f72 204e 6f6e 652e 2045  rings or None. E
-00015290: 6163 6820 656c 656d 656e 740a 2020 2020  ach element.    
-000152a0: 2020 2020 2020 2020 6973 2061 2073 6368          is a sch
-000152b0: 656d 6520 7468 6520 696e 7075 7474 6564  eme the inputted
-000152c0: 2055 524c 2069 7320 616c 6c6f 7765 6420   URL is allowed 
-000152d0: 746f 2075 7365 0a20 2020 2020 2020 2070  to use.        p
-000152e0: 7265 7065 6e64 5f73 6368 656d 653a 2061  repend_scheme: a
-000152f0: 2073 7472 696e 672c 2074 6869 7320 7363   string, this sc
-00015300: 6865 6d65 2069 7320 7072 6570 656e 6465  heme is prepende
-00015310: 6420 6966 2069 7427 730a 2020 2020 2020  d if it's.      
-00015320: 2020 2020 2020 6e65 6365 7373 6172 7920        necessary 
-00015330: 746f 206d 616b 6520 7468 6520 5552 4c20  to make the URL 
-00015340: 7661 6c69 640a 0a20 2020 2043 6f64 6520  valid..    Code 
-00015350: 4578 616d 706c 6573 3a3a 0a0a 2020 2020  Examples::..    
-00015360: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-00015370: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
-00015380: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
-00015390: 535f 5552 4c28 2929 0a20 2020 2020 2020  S_URL()).       
-000153a0: 203e 3e3e 2049 535f 5552 4c28 2928 2761   >>> IS_URL()('a
-000153b0: 6263 2e63 6f6d 2729 0a20 2020 2020 2020  bc.com').       
-000153c0: 2028 2768 7474 703a 2f2f 6162 632e 636f   ('http://abc.co
-000153d0: 6d27 2c20 4e6f 6e65 290a 0a20 2020 2020  m', None)..     
-000153e0: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-000153f0: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
-00015400: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
-00015410: 5f55 524c 286d 6f64 653d 2767 656e 6572  _URL(mode='gener
-00015420: 6963 2729 290a 2020 2020 2020 2020 3e3e  ic')).        >>
-00015430: 3e20 4953 5f55 524c 286d 6f64 653d 2767  > IS_URL(mode='g
-00015440: 656e 6572 6963 2729 2827 6162 632e 636f  eneric')('abc.co
-00015450: 6d27 290a 2020 2020 2020 2020 2827 6162  m').        ('ab
-00015460: 632e 636f 6d27 2c20 4e6f 6e65 290a 0a20  c.com', None).. 
-00015470: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-00015480: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
-00015490: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
-000154a0: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
-000154b0: 5f55 524c 2861 6c6c 6f77 6564 5f73 6368  _URL(allowed_sch
-000154c0: 656d 6573 3d5b 2768 7474 7073 275d 2c20  emes=['https'], 
-000154d0: 7072 6570 656e 645f 7363 6865 6d65 3d27  prepend_scheme='
-000154e0: 6874 7470 7327 2929 0a20 2020 2020 2020  https')).       
-000154f0: 203e 3e3e 2049 535f 5552 4c28 616c 6c6f   >>> IS_URL(allo
-00015500: 7765 645f 7363 6865 6d65 733d 5b27 6874  wed_schemes=['ht
-00015510: 7470 7327 5d2c 2070 7265 7065 6e64 5f73  tps'], prepend_s
-00015520: 6368 656d 653d 2768 7474 7073 2729 2827  cheme='https')('
-00015530: 6874 7470 733a 2f2f 6162 632e 636f 6d27  https://abc.com'
-00015540: 290a 2020 2020 2020 2020 2827 6874 7470  ).        ('http
-00015550: 733a 2f2f 6162 632e 636f 6d27 2c20 4e6f  s://abc.com', No
-00015560: 6e65 290a 0a20 2020 2020 2020 2049 4e50  ne)..        INP
-00015570: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
-00015580: 205f 6e61 6d65 3d27 6e61 6d65 272c 0a20   _name='name',. 
-00015590: 2020 2020 2020 2020 2020 2072 6571 7569             requi
-000155a0: 7265 733d 4953 5f55 524c 2870 7265 7065  res=IS_URL(prepe
-000155b0: 6e64 5f73 6368 656d 653d 2768 7474 7073  nd_scheme='https
-000155c0: 2729 290a 2020 2020 2020 2020 3e3e 3e20  ')).        >>> 
-000155d0: 4953 5f55 524c 2870 7265 7065 6e64 5f73  IS_URL(prepend_s
-000155e0: 6368 656d 653d 2768 7474 7073 2729 2827  cheme='https')('
-000155f0: 6162 632e 636f 6d27 290a 2020 2020 2020  abc.com').      
-00015600: 2020 2827 6874 7470 733a 2f2f 6162 632e    ('https://abc.
-00015610: 636f 6d27 2c20 4e6f 6e65 290a 0a20 2020  com', None)..   
-00015620: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
-00015630: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
-00015640: 6e61 6d65 272c 0a20 2020 2020 2020 2020  name',.         
-00015650: 2020 2072 6571 7569 7265 733d 4953 5f55     requires=IS_U
-00015660: 524c 286d 6f64 653d 2767 656e 6572 6963  RL(mode='generic
-00015670: 272c 2061 6c6c 6f77 6564 5f73 6368 656d  ', allowed_schem
-00015680: 6573 3d5b 2766 7470 7327 2c20 2768 7474  es=['ftps', 'htt
-00015690: 7073 275d 2c0a 2020 2020 2020 2020 2020  ps'],.          
-000156a0: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
-000156b0: 6865 6d65 3d27 6874 7470 7327 2929 0a20  heme='https')). 
-000156c0: 2020 2020 2020 203e 3e3e 2049 535f 5552         >>> IS_UR
-000156d0: 4c28 6d6f 6465 3d27 6765 6e65 7269 6327  L(mode='generic'
-000156e0: 2c20 616c 6c6f 7765 645f 7363 6865 6d65  , allowed_scheme
-000156f0: 733d 5b27 6674 7073 272c 2027 6874 7470  s=['ftps', 'http
-00015700: 7327 5d2c 2070 7265 7065 6e64 5f73 6368  s'], prepend_sch
-00015710: 656d 653d 2768 7474 7073 2729 2827 6874  eme='https')('ht
-00015720: 7470 733a 2f2f 6162 632e 636f 6d27 290a  tps://abc.com').
-00015730: 2020 2020 2020 2020 2827 6874 7470 733a          ('https:
-00015740: 2f2f 6162 632e 636f 6d27 2c20 4e6f 6e65  //abc.com', None
-00015750: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-00015760: 5f55 524c 286d 6f64 653d 2767 656e 6572  _URL(mode='gener
-00015770: 6963 272c 2061 6c6c 6f77 6564 5f73 6368  ic', allowed_sch
-00015780: 656d 6573 3d5b 2766 7470 7327 2c20 2768  emes=['ftps', 'h
-00015790: 7474 7073 272c 204e 6f6e 655d 2c20 7072  ttps', None], pr
-000157a0: 6570 656e 645f 7363 6865 6d65 3d27 6874  epend_scheme='ht
-000157b0: 7470 7327 2928 2761 6263 2e63 6f6d 2729  tps')('abc.com')
-000157c0: 0a20 2020 2020 2020 2028 2761 6263 2e63  .        ('abc.c
-000157d0: 6f6d 272c 204e 6f6e 6529 0a0a 2020 2020  om', None)..    
-000157e0: 4061 7574 686f 723a 204a 6f6e 6174 6861  @author: Jonatha
-000157f0: 6e20 4265 6e6e 0a20 2020 2022 2222 0a0a  n Benn.    """..
-00015800: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-00015810: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00015820: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-00015830: 7373 6167 653d 2245 6e74 6572 2061 2076  ssage="Enter a v
-00015840: 616c 6964 2055 524c 222c 0a20 2020 2020  alid URL",.     
-00015850: 2020 206d 6f64 653d 2268 7474 7022 2c0a     mode="http",.
-00015860: 2020 2020 2020 2020 616c 6c6f 7765 645f          allowed_
-00015870: 7363 6865 6d65 733d 4e6f 6e65 2c0a 2020  schemes=None,.  
-00015880: 2020 2020 2020 7072 6570 656e 645f 7363        prepend_sc
-00015890: 6865 6d65 3d22 6874 7470 222c 0a20 2020  heme="http",.   
-000158a0: 2020 2020 2061 6c6c 6f77 6564 5f74 6c64       allowed_tld
-000158b0: 733d 4e6f 6e65 2c0a 2020 2020 293a 0a20  s=None,.    ):. 
-000158c0: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
-000158d0: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
-000158e0: 725f 6d65 7373 6167 650a 2020 2020 2020  r_message.      
-000158f0: 2020 7365 6c66 2e6d 6f64 6520 3d20 6d6f    self.mode = mo
-00015900: 6465 2e6c 6f77 6572 2829 0a20 2020 2020  de.lower().     
-00015910: 2020 2069 6620 7365 6c66 2e6d 6f64 6520     if self.mode 
-00015920: 6e6f 7420 696e 205b 2267 656e 6572 6963  not in ["generic
-00015930: 222c 2022 6874 7470 225d 3a0a 2020 2020  ", "http"]:.    
-00015940: 2020 2020 2020 2020 7261 6973 6520 5379          raise Sy
-00015950: 6e74 6178 4572 726f 7228 2269 6e76 616c  ntaxError("inval
-00015960: 6964 206d 6f64 6520 2725 7327 2069 6e20  id mode '%s' in 
-00015970: 4953 5f55 524c 2220 2520 7365 6c66 2e6d  IS_URL" % self.m
-00015980: 6f64 6529 0a20 2020 2020 2020 2073 656c  ode).        sel
-00015990: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
-000159a0: 7320 3d20 616c 6c6f 7765 645f 7363 6865  s = allowed_sche
-000159b0: 6d65 730a 2020 2020 2020 2020 6966 2061  mes.        if a
-000159c0: 6c6c 6f77 6564 5f74 6c64 7320 6973 204e  llowed_tlds is N
-000159d0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000159e0: 2073 656c 662e 616c 6c6f 7765 645f 746c   self.allowed_tl
-000159f0: 6473 203d 206f 6666 6963 6961 6c5f 746f  ds = official_to
-00015a00: 705f 6c65 7665 6c5f 646f 6d61 696e 730a  p_level_domains.
-00015a10: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00015a20: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00015a30: 6c6c 6f77 6564 5f74 6c64 7320 3d20 616c  llowed_tlds = al
-00015a40: 6c6f 7765 645f 746c 6473 0a0a 2020 2020  lowed_tlds..    
-00015a50: 2020 2020 6966 2073 656c 662e 616c 6c6f      if self.allo
-00015a60: 7765 645f 7363 6865 6d65 733a 0a20 2020  wed_schemes:.   
-00015a70: 2020 2020 2020 2020 2069 6620 7072 6570           if prep
-00015a80: 656e 645f 7363 6865 6d65 206e 6f74 2069  end_scheme not i
-00015a90: 6e20 7365 6c66 2e61 6c6c 6f77 6564 5f73  n self.allowed_s
-00015aa0: 6368 656d 6573 3a0a 2020 2020 2020 2020  chemes:.        
-00015ab0: 2020 2020 2020 2020 7261 6973 6520 5379          raise Sy
-00015ac0: 6e74 6178 4572 726f 7228 0a20 2020 2020  ntaxError(.     
-00015ad0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015ae0: 7072 6570 656e 645f 7363 6865 6d65 3d27  prepend_scheme='
-00015af0: 2573 2720 6973 206e 6f74 2069 6e20 616c  %s' is not in al
-00015b00: 6c6f 7765 645f 7363 6865 6d65 733d 2573  lowed_schemes=%s
-00015b10: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00015b20: 2020 2020 2020 2520 2870 7265 7065 6e64        % (prepend
-00015b30: 5f73 6368 656d 652c 2073 656c 662e 616c  _scheme, self.al
-00015b40: 6c6f 7765 645f 7363 6865 6d65 7329 0a20  lowed_schemes). 
-00015b50: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00015b60: 0a0a 2020 2020 2020 2020 2320 6966 2061  ..        # if a
-00015b70: 6c6c 6f77 6564 5f73 6368 656d 6573 2069  llowed_schemes i
-00015b80: 7320 4e6f 6e65 2c20 7468 656e 2077 6520  s None, then we 
-00015b90: 7769 6c6c 2064 6566 6572 2074 6573 7469  will defer testi
-00015ba0: 6e67 0a20 2020 2020 2020 2023 2070 7265  ng.        # pre
-00015bb0: 7065 6e64 5f73 6368 656d 6527 7320 7661  pend_scheme's va
-00015bc0: 6c69 6469 7479 2074 6f20 6120 7375 622d  lidity to a sub-
-00015bd0: 6d65 7468 6f64 0a0a 2020 2020 2020 2020  method..        
-00015be0: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
-00015bf0: 656d 6520 3d20 7072 6570 656e 645f 7363  eme = prepend_sc
-00015c00: 6865 6d65 0a0a 2020 2020 6465 6620 7661  heme..    def va
-00015c10: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-00015c20: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-00015c30: 6e65 293a 0a20 2020 2020 2020 2022 2222  ne):.        """
-00015c40: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
-00015c50: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00015c60: 3a20 6120 756e 6963 6f64 6520 6f72 2072  : a unicode or r
-00015c70: 6567 756c 6172 2073 7472 696e 672c 2074  egular string, t
-00015c80: 6865 2055 524c 2074 6f20 7661 6c69 6461  he URL to valida
-00015c90: 7465 0a0a 2020 2020 2020 2020 5265 7475  te..        Retu
-00015ca0: 726e 733a 0a20 2020 2020 2020 2020 2020  rns:.           
-00015cb0: 2061 2028 7374 7269 6e67 2c20 7374 7269   a (string, stri
-00015cc0: 6e67 2920 7475 706c 652c 2077 6865 7265  ng) tuple, where
-00015cd0: 2074 7570 6c65 5b30 5d20 6973 2074 6865   tuple[0] is the
-00015ce0: 206d 6f64 6966 6965 640a 2020 2020 2020   modified.      
-00015cf0: 2020 2020 2020 696e 7075 7420 7661 6c75        input valu
-00015d00: 6520 616e 6420 7475 706c 655b 315d 2069  e and tuple[1] i
-00015d10: 7320 6569 7468 6572 204e 6f6e 6520 2873  s either None (s
-00015d20: 7563 6365 7373 2129 206f 7220 7468 650a  uccess!) or the.
-00015d30: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00015d40: 6e67 2065 7272 6f72 5f6d 6573 7361 6765  ng error_message
-00015d50: 2e20 5468 6520 696e 7075 7420 7661 6c75  . The input valu
-00015d60: 6520 7769 6c6c 206e 6576 6572 2062 6520  e will never be 
-00015d70: 6d6f 6469 6669 6564 2069 6e20 7468 650a  modified in the.
-00015d80: 2020 2020 2020 2020 2020 2020 6361 7365              case
-00015d90: 206f 6620 616e 2065 7272 6f72 2e20 486f   of an error. Ho
-00015da0: 7765 7665 722c 2069 6620 7468 6572 6520  wever, if there 
-00015db0: 6973 2073 7563 6365 7373 2074 6865 6e20  is success then 
-00015dc0: 7468 6520 696e 7075 7420 5552 4c0a 2020  the input URL.  
-00015dd0: 2020 2020 2020 2020 2020 6d61 7920 6265            may be
-00015de0: 206d 6f64 6966 6965 6420 746f 2028 3129   modified to (1)
-00015df0: 2070 7265 7065 6e64 2061 2073 6368 656d   prepend a schem
-00015e00: 652c 2061 6e64 2f6f 7220 2832 2920 636f  e, and/or (2) co
-00015e10: 6e76 6572 7420 610a 2020 2020 2020 2020  nvert a.        
-00015e20: 2020 2020 6e6f 6e2d 636f 6d70 6c69 616e      non-complian
-00015e30: 7420 756e 6963 6f64 6520 5552 4c20 696e  t unicode URL in
-00015e40: 746f 2061 2063 6f6d 706c 6961 6e74 2055  to a compliant U
-00015e50: 532d 4153 4349 4920 7665 7273 696f 6e2e  S-ASCII version.
-00015e60: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00015e70: 2020 2020 2069 6620 7365 6c66 2e6d 6f64       if self.mod
-00015e80: 6520 3d3d 2022 6765 6e65 7269 6322 3a0a  e == "generic":.
-00015e90: 2020 2020 2020 2020 2020 2020 7375 624d              subM
-00015ea0: 6574 686f 6420 3d20 4953 5f47 454e 4552  ethod = IS_GENER
-00015eb0: 4943 5f55 524c 280a 2020 2020 2020 2020  IC_URL(.        
-00015ec0: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
-00015ed0: 7373 6167 653d 7365 6c66 2e65 7272 6f72  ssage=self.error
-00015ee0: 5f6d 6573 7361 6765 2c0a 2020 2020 2020  _message,.      
-00015ef0: 2020 2020 2020 2020 2020 616c 6c6f 7765            allowe
-00015f00: 645f 7363 6865 6d65 733d 7365 6c66 2e61  d_schemes=self.a
-00015f10: 6c6c 6f77 6564 5f73 6368 656d 6573 2c0a  llowed_schemes,.
-00015f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015f30: 7072 6570 656e 645f 7363 6865 6d65 3d73  prepend_scheme=s
-00015f40: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
-00015f50: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00015f60: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00015f70: 656c 662e 6d6f 6465 203d 3d20 2268 7474  elf.mode == "htt
-00015f80: 7022 3a0a 2020 2020 2020 2020 2020 2020  p":.            
-00015f90: 7375 624d 6574 686f 6420 3d20 4953 5f48  subMethod = IS_H
-00015fa0: 5454 505f 5552 4c28 0a20 2020 2020 2020  TTP_URL(.       
-00015fb0: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
-00015fc0: 6573 7361 6765 3d73 656c 662e 6572 726f  essage=self.erro
-00015fd0: 725f 6d65 7373 6167 652c 0a20 2020 2020  r_message,.     
-00015fe0: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
-00015ff0: 6564 5f73 6368 656d 6573 3d73 656c 662e  ed_schemes=self.
-00016000: 616c 6c6f 7765 645f 7363 6865 6d65 732c  allowed_schemes,
-00016010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016020: 2070 7265 7065 6e64 5f73 6368 656d 653d   prepend_scheme=
-00016030: 7365 6c66 2e70 7265 7065 6e64 5f73 6368  self.prepend_sch
-00016040: 656d 652c 0a20 2020 2020 2020 2020 2020  eme,.           
-00016050: 2020 2020 2061 6c6c 6f77 6564 5f74 6c64       allowed_tld
-00016060: 733d 7365 6c66 2e61 6c6c 6f77 6564 5f74  s=self.allowed_t
-00016070: 6c64 732c 0a20 2020 2020 2020 2020 2020  lds,.           
-00016080: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
-00016090: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000160a0: 7365 2053 796e 7461 7845 7272 6f72 2822  se SyntaxError("
-000160b0: 696e 7661 6c69 6420 6d6f 6465 2027 2573  invalid mode '%s
-000160c0: 2720 696e 2049 535f 5552 4c22 2025 2073  ' in IS_URL" % s
-000160d0: 656c 662e 6d6f 6465 290a 0a20 2020 2020  elf.mode)..     
-000160e0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000160f0: 2876 616c 7565 2c20 756e 6963 6f64 6554  (value, unicodeT
-00016100: 293a 0a20 2020 2020 2020 2020 2020 2074  ):.            t
-00016110: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00016120: 2020 2020 7661 6c75 6520 3d20 756e 6963      value = unic
-00016130: 6f64 655f 746f 5f61 7363 6969 5f75 726c  ode_to_ascii_url
-00016140: 2876 616c 7565 2c20 7365 6c66 2e70 7265  (value, self.pre
-00016150: 7065 6e64 5f73 6368 656d 6529 0a20 2020  pend_scheme).   
-00016160: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-00016170: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-00016180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016190: 2320 4966 2077 6520 6172 6520 6e6f 7420  # If we are not 
-000161a0: 6162 6c65 2074 6f20 636f 6e76 6572 7420  able to convert 
-000161b0: 7468 6520 756e 6963 6f64 6520 7572 6c20  the unicode url 
-000161c0: 696e 746f 2061 0a20 2020 2020 2020 2020  into a.         
-000161d0: 2020 2020 2020 2023 2055 532d 4153 4349         # US-ASCI
-000161e0: 4920 5552 4c2c 2074 6865 6e20 7468 6520  I URL, then the 
-000161f0: 5552 4c20 6973 206e 6f74 2076 616c 6964  URL is not valid
-00016200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016210: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-00016220: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
-00016230: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
-00016240: 725f 6d65 7373 6167 6529 290a 2020 2020  r_message)).    
-00016250: 2020 2020 7265 7475 726e 2073 7562 4d65      return subMe
-00016260: 7468 6f64 2e76 616c 6964 6174 6528 7661  thod.validate(va
-00016270: 6c75 652c 2072 6563 6f72 645f 6964 290a  lue, record_id).
-00016280: 0a0a 636c 6173 7320 4953 5f54 494d 4528  ..class IS_TIME(
-00016290: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
-000162a0: 2222 220a 2020 2020 4578 616d 706c 653a  """.    Example:
-000162b0: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
-000162c0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-000162d0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
-000162e0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-000162f0: 2072 6571 7569 7265 733d 4953 5f54 494d   requires=IS_TIM
-00016300: 4528 2929 0a0a 2020 2020 756e 6465 7273  E())..    unders
-00016310: 7461 6e64 7320 7468 6520 666f 6c6c 6f77  tands the follow
-00016320: 696e 6720 666f 726d 6174 730a 2020 2020  ing formats.    
-00016330: 6868 3a6d 6d3a 7373 205b 616d 2f70 6d5d  hh:mm:ss [am/pm]
-00016340: 0a20 2020 2068 683a 6d6d 205b 616d 2f70  .    hh:mm [am/p
-00016350: 6d5d 0a20 2020 2068 6820 5b61 6d2f 706d  m].    hh [am/pm
-00016360: 5d0a 0a20 2020 205b 616d 2f70 6d5d 2069  ]..    [am/pm] i
-00016370: 7320 6f70 7469 6f6e 616c 2c20 273a 2720  s optional, ':' 
-00016380: 6361 6e20 6265 2072 6570 6c61 6365 6420  can be replaced 
-00016390: 6279 2061 6e79 206f 7468 6572 206e 6f6e  by any other non
-000163a0: 2d73 7061 6365 206e 6f6e 2d64 6967 6974  -space non-digit
-000163b0: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
-000163c0: 4953 5f54 494d 4528 2928 2732 313a 3330  IS_TIME()('21:30
-000163d0: 2729 0a20 2020 2020 2020 2028 6461 7465  ').        (date
-000163e0: 7469 6d65 2e74 696d 6528 3231 2c20 3330  time.time(21, 30
-000163f0: 292c 204e 6f6e 6529 0a20 2020 2020 2020  ), None).       
-00016400: 203e 3e3e 2049 535f 5449 4d45 2829 2827   >>> IS_TIME()('
-00016410: 3231 2d33 3027 290a 2020 2020 2020 2020  21-30').        
-00016420: 2864 6174 6574 696d 652e 7469 6d65 2832  (datetime.time(2
-00016430: 312c 2033 3029 2c20 4e6f 6e65 290a 2020  1, 30), None).  
-00016440: 2020 2020 2020 3e3e 3e20 4953 5f54 494d        >>> IS_TIM
-00016450: 4528 2928 2732 312e 3330 2729 0a20 2020  E()('21.30').   
-00016460: 2020 2020 2028 6461 7465 7469 6d65 2e74       (datetime.t
-00016470: 696d 6528 3231 2c20 3330 292c 204e 6f6e  ime(21, 30), Non
-00016480: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-00016490: 535f 5449 4d45 2829 2827 3231 3a33 303a  S_TIME()('21:30:
-000164a0: 3539 2729 0a20 2020 2020 2020 2028 6461  59').        (da
-000164b0: 7465 7469 6d65 2e74 696d 6528 3231 2c20  tetime.time(21, 
-000164c0: 3330 2c20 3539 292c 204e 6f6e 6529 0a20  30, 59), None). 
-000164d0: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
-000164e0: 4d45 2829 2827 353a 3330 2729 0a20 2020  ME()('5:30').   
-000164f0: 2020 2020 2028 6461 7465 7469 6d65 2e74       (datetime.t
-00016500: 696d 6528 352c 2033 3029 2c20 4e6f 6e65  ime(5, 30), None
-00016510: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-00016520: 5f54 494d 4528 2928 2735 3a33 3020 616d  _TIME()('5:30 am
-00016530: 2729 0a20 2020 2020 2020 2028 6461 7465  ').        (date
-00016540: 7469 6d65 2e74 696d 6528 352c 2033 3029  time.time(5, 30)
-00016550: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00016560: 3e3e 3e20 4953 5f54 494d 4528 2928 2735  >>> IS_TIME()('5
-00016570: 3a33 3020 706d 2729 0a20 2020 2020 2020  :30 pm').       
-00016580: 2028 6461 7465 7469 6d65 2e74 696d 6528   (datetime.time(
-00016590: 3137 2c20 3330 292c 204e 6f6e 6529 0a20  17, 30), None). 
-000165a0: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
-000165b0: 4d45 2829 2827 353a 3330 2077 6861 7465  ME()('5:30 whate
-000165c0: 7665 7227 290a 2020 2020 2020 2020 2827  ver').        ('
-000165d0: 353a 3330 2077 6861 7465 7665 7227 2c20  5:30 whatever', 
-000165e0: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
-000165f0: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
-00016600: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
-00016610: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
-00016620: 2049 535f 5449 4d45 2829 2827 353a 3330   IS_TIME()('5:30
-00016630: 2032 3027 290a 2020 2020 2020 2020 2827   20').        ('
-00016640: 353a 3330 2032 3027 2c20 2765 6e74 6572  5:30 20', 'enter
-00016650: 2074 696d 6520 6173 2068 683a 6d6d 3a73   time as hh:mm:s
-00016660: 7320 2873 6563 6f6e 6473 2c20 616d 2c20  s (seconds, am, 
-00016670: 706d 206f 7074 696f 6e61 6c29 2729 0a20  pm optional)'). 
-00016680: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
-00016690: 4d45 2829 2827 3234 3a33 3027 290a 2020  ME()('24:30').  
-000166a0: 2020 2020 2020 2827 3234 3a33 3027 2c20        ('24:30', 
-000166b0: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
-000166c0: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
-000166d0: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
-000166e0: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
-000166f0: 2049 535f 5449 4d45 2829 2827 3231 3a36   IS_TIME()('21:6
-00016700: 3027 290a 2020 2020 2020 2020 2827 3231  0').        ('21
-00016710: 3a36 3027 2c20 2765 6e74 6572 2074 696d  :60', 'enter tim
-00016720: 6520 6173 2068 683a 6d6d 3a73 7320 2873  e as hh:mm:ss (s
-00016730: 6563 6f6e 6473 2c20 616d 2c20 706d 206f  econds, am, pm o
-00016740: 7074 696f 6e61 6c29 2729 0a20 2020 2020  ptional)').     
-00016750: 2020 203e 3e3e 2049 535f 5449 4d45 2829     >>> IS_TIME()
-00016760: 2827 3231 3a33 303a 3a27 290a 2020 2020  ('21:30::').    
-00016770: 2020 2020 2827 3231 3a33 303a 3a27 2c20      ('21:30::', 
-00016780: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
-00016790: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
-000167a0: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
-000167b0: 6c29 2729 0a20 2020 2020 2020 203e 3e3e  l)').        >>>
-000167c0: 2049 535f 5449 4d45 2829 2827 2729 0a20   IS_TIME()(''). 
-000167d0: 2020 2020 2020 2028 2727 2c20 2765 6e74         ('', 'ent
-000167e0: 6572 2074 696d 6520 6173 2068 683a 6d6d  er time as hh:mm
-000167f0: 3a73 7320 2873 6563 6f6e 6473 2c20 616d  :ss (seconds, am
-00016800: 2c20 706d 206f 7074 696f 6e61 6c29 2729  , pm optional)')
-00016810: c3b9 0a0a 2020 2020 2222 220a 0a20 2020  ....    """..   
-00016820: 2052 4547 4558 5f54 494d 4520 3d20 2228   REGEX_TIME = "(
-00016830: 283f 503c 683e 5b30 2d39 5d2b 2929 285b  (?P<h>[0-9]+))([
-00016840: 5e30 2d39 205d 2b28 3f50 3c6d 3e5b 302d  ^0-9 ]+(?P<m>[0-
-00016850: 3920 5d2b 2929 3f28 5b5e 302d 3961 7020  9 ]+))?([^0-9ap 
-00016860: 5d2b 283f 503c 733e 5b30 2d39 5d2a 2929  ]+(?P<s>[0-9]*))
-00016870: 3f28 283f 503c 643e 5b61 705d 6d29 293f  ?((?P<d>[ap]m))?
-00016880: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-00016890: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-000168a0: 662c 2065 7272 6f72 5f6d 6573 7361 6765  f, error_message
-000168b0: 3d22 456e 7465 7220 7469 6d65 2061 7320  ="Enter time as 
-000168c0: 6868 3a6d 6d3a 7373 2028 7365 636f 6e64  hh:mm:ss (second
-000168d0: 732c 2061 6d2c 2070 6d20 6f70 7469 6f6e  s, am, pm option
-000168e0: 616c 2922 0a20 2020 2029 3a0a 2020 2020  al)".    ):.    
-000168f0: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-00016900: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
-00016910: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
-00016920: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00016930: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00016940: 4e6f 6e65 293a 0a20 2020 2020 2020 2074  None):.        t
-00016950: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00016960: 6976 616c 7565 203d 2076 616c 7565 0a20  ivalue = value. 
-00016970: 2020 2020 2020 2020 2020 2076 616c 7565             value
-00016980: 203d 2072 652e 6d61 7463 6828 7365 6c66   = re.match(self
-00016990: 2e52 4547 4558 5f54 494d 452c 2076 616c  .REGEX_TIME, val
-000169a0: 7565 2e6c 6f77 6572 2829 290a 2020 2020  ue.lower()).    
-000169b0: 2020 2020 2020 2020 2868 2c20 6d2c 2073          (h, m, s
-000169c0: 2920 3d20 2869 6e74 2876 616c 7565 2e67  ) = (int(value.g
-000169d0: 726f 7570 2822 6822 2929 2c20 302c 2030  roup("h")), 0, 0
-000169e0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-000169f0: 206e 6f74 2076 616c 7565 2e67 726f 7570   not value.group
-00016a00: 2822 6d22 2920 6973 204e 6f6e 653a 0a20  ("m") is None:. 
-00016a10: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-00016a20: 203d 2069 6e74 2876 616c 7565 2e67 726f   = int(value.gro
-00016a30: 7570 2822 6d22 2929 0a20 2020 2020 2020  up("m")).       
-00016a40: 2020 2020 2069 6620 6e6f 7420 7661 6c75       if not valu
-00016a50: 652e 6772 6f75 7028 2273 2229 2069 7320  e.group("s") is 
-00016a60: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00016a70: 2020 2020 2020 7320 3d20 696e 7428 7661        s = int(va
-00016a80: 6c75 652e 6772 6f75 7028 2273 2229 290a  lue.group("s")).
-00016a90: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00016aa0: 616c 7565 2e67 726f 7570 2822 6422 2920  alue.group("d") 
-00016ab0: 3d3d 2022 706d 2220 616e 6420 3020 3c20  == "pm" and 0 < 
-00016ac0: 6820 3c20 3132 3a0a 2020 2020 2020 2020  h < 12:.        
-00016ad0: 2020 2020 2020 2020 6820 2b3d 2031 320a          h += 12.
-00016ae0: 2020 2020 2020 2020 2020 2020 6966 2076              if v
-00016af0: 616c 7565 2e67 726f 7570 2822 6422 2920  alue.group("d") 
-00016b00: 3d3d 2022 616d 2220 616e 6420 6820 3d3d  == "am" and h ==
-00016b10: 2031 323a 0a20 2020 2020 2020 2020 2020   12:.           
-00016b20: 2020 2020 2068 203d 2030 0a20 2020 2020       h = 0.     
-00016b30: 2020 2020 2020 2069 6620 6e6f 7420 2868         if not (h
-00016b40: 2069 6e20 7261 6e67 6528 3234 2920 616e   in range(24) an
-00016b50: 6420 6d20 696e 2072 616e 6765 2836 3029  d m in range(60)
-00016b60: 2061 6e64 2073 2069 6e20 7261 6e67 6528   and s in range(
-00016b70: 3630 2929 3a0a 2020 2020 2020 2020 2020  60)):.          
-00016b80: 2020 2020 2020 7261 6973 6520 5661 6c75        raise Valu
-00016b90: 6545 7272 6f72 280a 2020 2020 2020 2020  eError(.        
-00016ba0: 2020 2020 2020 2020 2020 2020 2248 6f75              "Hou
-00016bb0: 7273 206f 7220 6d69 6e75 7465 7320 6f72  rs or minutes or
-00016bc0: 2073 6563 6f6e 6473 2061 7265 206f 7574   seconds are out
-00016bd0: 7369 6465 206f 6620 616c 6c6f 7765 6420  side of allowed 
-00016be0: 7261 6e67 6522 0a20 2020 2020 2020 2020  range".         
-00016bf0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00016c00: 2020 2020 2076 616c 7565 203d 2064 6174       value = dat
-00016c10: 6574 696d 652e 7469 6d65 2868 2c20 6d2c  etime.time(h, m,
-00016c20: 2073 290a 2020 2020 2020 2020 2020 2020   s).            
-00016c30: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
-00016c40: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00016c50: 7074 696f 6e3a 0a20 2020 2020 2020 2020  ption:.         
-00016c60: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
-00016c70: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
-00016c80: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
-00016c90: 726f 725f 6d65 7373 6167 6529 290a 0a0a  ror_message))...
-00016ca0: 2320 4120 5554 4320 636c 6173 732e 0a63  # A UTC class..c
-00016cb0: 6c61 7373 2055 5443 2864 6174 6574 696d  lass UTC(datetim
-00016cc0: 652e 747a 696e 666f 293a 0a20 2020 2022  e.tzinfo):.    "
-00016cd0: 2222 5554 4322 2222 0a0a 2020 2020 5a45  ""UTC"""..    ZE
-00016ce0: 524f 203d 2064 6174 6574 696d 652e 7469  RO = datetime.ti
-00016cf0: 6d65 6465 6c74 6128 3029 0a0a 2020 2020  medelta(0)..    
-00016d00: 6465 6620 7574 636f 6666 7365 7428 7365  def utcoffset(se
-00016d10: 6c66 2c20 6474 293a 0a20 2020 2020 2020  lf, dt):.       
-00016d20: 2072 6574 7572 6e20 5554 432e 5a45 524f   return UTC.ZERO
-00016d30: 0a0a 2020 2020 6465 6620 747a 6e61 6d65  ..    def tzname
-00016d40: 2873 656c 662c 2064 7429 3a0a 2020 2020  (self, dt):.    
-00016d50: 2020 2020 7265 7475 726e 2022 5554 4322      return "UTC"
-00016d60: 0a0a 2020 2020 6465 6620 6473 7428 7365  ..    def dst(se
-00016d70: 6c66 2c20 6474 293a 0a20 2020 2020 2020  lf, dt):.       
-00016d80: 2072 6574 7572 6e20 5554 432e 5a45 524f   return UTC.ZERO
-00016d90: 0a0a 0a75 7463 203d 2055 5443 2829 0a0a  ...utc = UTC()..
-00016da0: 0a63 6c61 7373 2049 535f 4441 5445 2856  .class IS_DATE(V
-00016db0: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
-00016dc0: 2222 0a20 2020 2045 7861 6d70 6c65 733a  "".    Examples:
-00016dd0: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
-00016de0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-00016df0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
-00016e00: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-00016e10: 2072 6571 7569 7265 733d 4953 5f44 4154   requires=IS_DAT
-00016e20: 4528 2929 0a0a 2020 2020 6461 7465 2068  E())..    date h
-00016e30: 6173 2074 6f20 6265 2069 6e20 7468 6520  as to be in the 
-00016e40: 4953 4f38 3936 3020 666f 726d 6174 2059  ISO8960 format Y
-00016e50: 5959 592d 4d4d 2d44 440a 2020 2020 2222  YYY-MM-DD.    ""
-00016e60: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-00016e70: 745f 5f28 7365 6c66 2c20 666f 726d 6174  t__(self, format
-00016e80: 3d22 2559 2d25 6d2d 2564 222c 2065 7272  ="%Y-%m-%d", err
-00016e90: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-00016ea0: 7220 6461 7465 2061 7320 2528 666f 726d  r date as %(form
-00016eb0: 6174 2973 2229 3a0a 2020 2020 2020 2020  at)s"):.        
-00016ec0: 7365 6c66 2e66 6f72 6d61 7420 3d20 7365  self.format = se
-00016ed0: 6c66 2e74 7261 6e73 6c61 746f 7228 666f  lf.translator(fo
-00016ee0: 726d 6174 290a 2020 2020 2020 2020 7365  rmat).        se
-00016ef0: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-00016f00: 203d 2073 7472 2865 7272 6f72 5f6d 6573   = str(error_mes
-00016f10: 7361 6765 290a 2020 2020 2020 2020 7365  sage).        se
-00016f20: 6c66 2e65 7874 7265 6d65 7320 3d20 7b7d  lf.extremes = {}
-00016f30: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-00016f40: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-00016f50: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-00016f60: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00016f70: 7374 616e 6365 2876 616c 7565 2c20 6461  stance(value, da
-00016f80: 7465 7469 6d65 2e64 6174 6529 3a0a 2020  tetime.date):.  
-00016f90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00016fa0: 2076 616c 7565 0a20 2020 2020 2020 2074   value.        t
-00016fb0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00016fc0: 2879 2c20 6d2c 2064 2c20 6868 2c20 6d6d  (y, m, d, hh, mm
-00016fd0: 2c20 7373 2c20 7430 2c20 7431 2c20 7432  , ss, t0, t1, t2
-00016fe0: 2920 3d20 7469 6d65 2e73 7472 7074 696d  ) = time.strptim
-00016ff0: 6528 7661 6c75 652c 2073 7472 2873 656c  e(value, str(sel
-00017000: 662e 666f 726d 6174 2929 0a20 2020 2020  f.format)).     
-00017010: 2020 2020 2020 2076 616c 7565 203d 2064         value = d
-00017020: 6174 6574 696d 652e 6461 7465 2879 2c20  atetime.date(y, 
-00017030: 6d2c 2064 290a 2020 2020 2020 2020 2020  m, d).          
-00017040: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
-00017050: 2020 2020 2020 2065 7863 6570 743a 0a20         except:. 
-00017060: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00017070: 6578 7472 656d 6573 2e75 7064 6174 6528  extremes.update(
-00017080: 4953 5f44 4154 4554 494d 452e 6e69 6365  IS_DATETIME.nice
-00017090: 2873 656c 662e 666f 726d 6174 2929 0a20  (self.format)). 
-000170a0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-000170b0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-000170c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-000170d0: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
-000170e0: 6167 6529 2025 2073 656c 662e 6578 7472  age) % self.extr
-000170f0: 656d 6573 290a 0a20 2020 2064 6566 2066  emes)..    def f
-00017100: 6f72 6d61 7474 6572 2873 656c 662c 2076  ormatter(self, v
-00017110: 616c 7565 293a 0a20 2020 2020 2020 2069  alue):.        i
-00017120: 6620 7661 6c75 6520 6973 204e 6f6e 6520  f value is None 
-00017130: 6f72 2076 616c 7565 203d 3d20 2222 3a0a  or value == "":.
-00017140: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00017150: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
-00017160: 666f 726d 6174 203d 2073 656c 662e 666f  format = self.fo
-00017170: 726d 6174 0a20 2020 2020 2020 2079 6561  rmat.        yea
-00017180: 7220 3d20 7661 6c75 652e 7965 6172 0a20  r = value.year. 
-00017190: 2020 2020 2020 2079 203d 2022 252e 3469         y = "%.4i
-000171a0: 2220 2520 7965 6172 0a20 2020 2020 2020  " % year.       
-000171b0: 2066 6f72 6d61 7420 3d20 666f 726d 6174   format = format
-000171c0: 2e72 6570 6c61 6365 2822 2579 222c 2079  .replace("%y", y
-000171d0: 5b2d 323a 5d29 0a20 2020 2020 2020 2066  [-2:]).        f
-000171e0: 6f72 6d61 7420 3d20 666f 726d 6174 2e72  ormat = format.r
-000171f0: 6570 6c61 6365 2822 2559 222c 2079 290a  eplace("%Y", y).
-00017200: 2020 2020 2020 2020 6966 2079 6561 7220          if year 
-00017210: 3c20 3139 3030 3a0a 2020 2020 2020 2020  < 1900:.        
-00017220: 2020 2020 7965 6172 203d 2032 3030 300a      year = 2000.
-00017230: 2020 2020 2020 2020 6420 3d20 6461 7465          d = date
-00017240: 7469 6d65 2e64 6174 6528 7965 6172 2c20  time.date(year, 
-00017250: 7661 6c75 652e 6d6f 6e74 682c 2076 616c  value.month, val
-00017260: 7565 2e64 6179 290a 2020 2020 2020 2020  ue.day).        
-00017270: 7265 7475 726e 2064 2e73 7472 6674 696d  return d.strftim
-00017280: 6528 666f 726d 6174 290a 0a0a 636c 6173  e(format)...clas
-00017290: 7320 4953 5f44 4154 4554 494d 4528 5661  s IS_DATETIME(Va
-000172a0: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
-000172b0: 220a 2020 2020 4578 616d 706c 6573 3a0a  ".    Examples:.
-000172c0: 2020 2020 2020 2020 5573 6520 6173 3a3a          Use as::
-000172d0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-000172e0: 5055 5428 5f74 7970 653d 2774 6578 7427  PUT(_type='text'
-000172f0: 2c20 5f6e 616d 653d 276e 616d 6527 2c20  , _name='name', 
-00017300: 7265 7175 6972 6573 3d49 535f 4441 5445  requires=IS_DATE
-00017310: 5449 4d45 2829 290a 0a20 2020 2064 6174  TIME())..    dat
-00017320: 6574 696d 6520 6861 7320 746f 2062 6520  etime has to be 
-00017330: 696e 2074 6865 2049 534f 3839 3630 2066  in the ISO8960 f
-00017340: 6f72 6d61 7420 5959 5959 2d4d 4d2d 4444  ormat YYYY-MM-DD
-00017350: 2068 683a 6d6d 3a73 730a 2020 2020 7469   hh:mm:ss.    ti
-00017360: 6d65 7a6f 6d65 206d 7573 7420 6265 204e  mezome must be N
-00017370: 6f6e 6520 6f72 2061 2070 7974 7a2e 7469  one or a pytz.ti
-00017380: 6d65 7a6f 6e65 2822 416d 6572 6963 612f  mezone("America/
-00017390: 4368 6963 6167 6f22 2920 6f62 6a65 6374  Chicago") object
-000173a0: 0a20 2020 2022 2222 0a0a 2020 2020 6973  .    """..    is
-000173b0: 6f64 6174 6574 696d 6520 3d20 2225 592d  odatetime = "%Y-
-000173c0: 256d 2d25 6420 2548 3a25 4d3a 2553 220a  %m-%d %H:%M:%S".
-000173d0: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
-000173e0: 6f64 0a20 2020 2064 6566 206e 6963 6528  od.    def nice(
-000173f0: 666f 726d 6174 293a 0a20 2020 2020 2020  format):.       
-00017400: 2063 6f64 6520 3d20 280a 2020 2020 2020   code = (.      
-00017410: 2020 2020 2020 2822 2559 222c 2022 3139        ("%Y", "19
-00017420: 3633 2229 2c0a 2020 2020 2020 2020 2020  63"),.          
-00017430: 2020 2822 2579 222c 2022 3633 2229 2c0a    ("%y", "63"),.
-00017440: 2020 2020 2020 2020 2020 2020 2822 2564              ("%d
-00017450: 222c 2022 3238 2229 2c0a 2020 2020 2020  ", "28"),.      
-00017460: 2020 2020 2020 2822 256d 222c 2022 3038        ("%m", "08
-00017470: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-00017480: 2822 2562 222c 2022 4175 6722 292c 0a20  ("%b", "Aug"),. 
-00017490: 2020 2020 2020 2020 2020 2028 2225 4222             ("%B"
-000174a0: 2c20 2241 7567 7573 7422 292c 0a20 2020  , "August"),.   
-000174b0: 2020 2020 2020 2020 2028 2225 4822 2c20           ("%H", 
-000174c0: 2231 3422 292c 0a20 2020 2020 2020 2020  "14"),.         
-000174d0: 2020 2028 2225 4922 2c20 2230 3222 292c     ("%I", "02"),
-000174e0: 0a20 2020 2020 2020 2020 2020 2028 2225  .            ("%
-000174f0: 7022 2c20 2250 4d22 292c 0a20 2020 2020  p", "PM"),.     
-00017500: 2020 2020 2020 2028 2225 4d22 2c20 2233         ("%M", "3
-00017510: 3022 292c 0a20 2020 2020 2020 2020 2020  0"),.           
-00017520: 2028 2225 5322 2c20 2235 3922 292c 0a20   ("%S", "59"),. 
-00017530: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00017540: 2066 6f72 2061 2c20 6220 696e 2063 6f64   for a, b in cod
-00017550: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-00017560: 6f72 6d61 7420 3d20 666f 726d 6174 2e72  ormat = format.r
-00017570: 6570 6c61 6365 2861 2c20 6229 0a20 2020  eplace(a, b).   
-00017580: 2020 2020 2072 6574 7572 6e20 6469 6374       return dict
-00017590: 2866 6f72 6d61 743d 666f 726d 6174 290a  (format=format).
-000175a0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-000175b0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-000175c0: 0a20 2020 2020 2020 2066 6f72 6d61 743d  .        format=
-000175d0: 2225 592d 256d 2d25 6420 2548 3a25 4d3a  "%Y-%m-%d %H:%M:
-000175e0: 2553 222c 0a20 2020 2020 2020 2065 7272  %S",.        err
-000175f0: 6f72 5f6d 6573 7361 6765 3d22 456e 7465  or_message="Ente
-00017600: 7220 6461 7465 2061 6e64 2074 696d 6520  r date and time 
-00017610: 6173 2025 2866 6f72 6d61 7429 7322 2c0a  as %(format)s",.
-00017620: 2020 2020 2020 2020 7469 6d65 7a6f 6e65          timezone
-00017630: 3d4e 6f6e 652c 0a20 2020 2029 3a0a 2020  =None,.    ):.  
-00017640: 2020 2020 2020 7365 6c66 2e66 6f72 6d61        self.forma
-00017650: 7420 3d20 7365 6c66 2e74 7261 6e73 6c61  t = self.transla
-00017660: 746f 7228 666f 726d 6174 290a 2020 2020  tor(format).    
-00017670: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-00017680: 6573 7361 6765 203d 2073 7472 2865 7272  essage = str(err
-00017690: 6f72 5f6d 6573 7361 6765 290a 2020 2020  or_message).    
-000176a0: 2020 2020 7365 6c66 2e65 7874 7265 6d65      self.extreme
-000176b0: 7320 3d20 7b7d 0a20 2020 2020 2020 2073  s = {}.        s
-000176c0: 656c 662e 7469 6d65 7a6f 6e65 203d 2074  elf.timezone = t
-000176d0: 696d 657a 6f6e 650a 0a20 2020 2064 6566  imezone..    def
-000176e0: 2076 616c 6964 6174 6528 7365 6c66 2c20   validate(self, 
-000176f0: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-00017700: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00017710: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00017720: 6c75 652c 2064 6174 6574 696d 652e 6461  lue, datetime.da
-00017730: 7465 7469 6d65 293a 0a20 2020 2020 2020  tetime):.       
-00017740: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-00017750: 650a 2020 2020 2020 2020 7472 793a 0a20  e.        try:. 
-00017760: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00017770: 6c66 2e66 6f72 6d61 7420 3d3d 2073 656c  lf.format == sel
-00017780: 662e 6973 6f64 6174 6574 696d 653a 0a20  f.isodatetime:. 
-00017790: 2020 2020 2020 2020 2020 2020 2020 2076                 v
-000177a0: 616c 7565 203d 2076 616c 7565 2e72 6570  alue = value.rep
-000177b0: 6c61 6365 2822 5422 2c20 2220 2229 0a20  lace("T", " "). 
-000177c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-000177d0: 6620 6c65 6e28 7661 6c75 6529 203d 3d20  f len(value) == 
-000177e0: 3136 3a0a 2020 2020 2020 2020 2020 2020  16:.            
-000177f0: 2020 2020 2020 2020 7661 6c75 6520 2b3d          value +=
-00017800: 2022 3a30 3022 0a20 2020 2020 2020 2020   ":00".         
-00017810: 2020 2028 792c 206d 2c20 642c 2068 682c     (y, m, d, hh,
-00017820: 206d 6d2c 2073 732c 2074 302c 2074 312c   mm, ss, t0, t1,
-00017830: 2074 3229 203d 2074 696d 652e 7374 7270   t2) = time.strp
-00017840: 7469 6d65 2876 616c 7565 2c20 7374 7228  time(value, str(
-00017850: 7365 6c66 2e66 6f72 6d61 7429 290a 2020  self.format)).  
-00017860: 2020 2020 2020 2020 2020 7661 6c75 6520            value 
-00017870: 3d20 6461 7465 7469 6d65 2e64 6174 6574  = datetime.datet
-00017880: 696d 6528 792c 206d 2c20 642c 2068 682c  ime(y, m, d, hh,
-00017890: 206d 6d2c 2073 7329 0a20 2020 2020 2020   mm, ss).       
-000178a0: 2020 2020 2069 6620 7365 6c66 2e74 696d       if self.tim
-000178b0: 657a 6f6e 6520 6973 206e 6f74 204e 6f6e  ezone is not Non
-000178c0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000178d0: 2020 2023 2054 4f44 4f3a 2068 7474 7073     # TODO: https
-000178e0: 3a2f 2f67 6974 6875 622e 636f 6d2f 7765  ://github.com/we
-000178f0: 6232 7079 2f77 6562 3270 792f 6973 7375  b2py/web2py/issu
-00017900: 6573 2f31 3039 3420 2874 656d 706f 7261  es/1094 (tempora
-00017910: 7279 2073 6f6c 7574 696f 6e29 0a20 2020  ry solution).   
-00017920: 2020 2020 2020 2020 2020 2020 2076 616c               val
-00017930: 7565 203d 2028 0a20 2020 2020 2020 2020  ue = (.         
-00017940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00017950: 7469 6d65 7a6f 6e65 2e6c 6f63 616c 697a  timezone.localiz
-00017960: 6528 7661 6c75 6529 2e61 7374 696d 657a  e(value).astimez
-00017970: 6f6e 6528 7574 6329 2e72 6570 6c61 6365  one(utc).replace
-00017980: 2874 7a69 6e66 6f3d 4e6f 6e65 290a 2020  (tzinfo=None).  
-00017990: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-000179a0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-000179b0: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
-000179c0: 2065 7863 6570 743a 0a20 2020 2020 2020   except:.       
-000179d0: 2020 2020 2073 656c 662e 6578 7472 656d       self.extrem
-000179e0: 6573 2e75 7064 6174 6528 4953 5f44 4154  es.update(IS_DAT
-000179f0: 4554 494d 452e 6e69 6365 2873 656c 662e  ETIME.nice(self.
-00017a00: 666f 726d 6174 2929 0a20 2020 2020 2020  format)).       
-00017a10: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00017a20: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00017a30: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00017a40: 6572 726f 725f 6d65 7373 6167 6529 2025  error_message) %
-00017a50: 2073 656c 662e 6578 7472 656d 6573 290a   self.extremes).
-00017a60: 0a20 2020 2064 6566 2066 6f72 6d61 7474  .    def formatt
-00017a70: 6572 2873 656c 662c 2076 616c 7565 293a  er(self, value):
-00017a80: 0a20 2020 2020 2020 2069 6620 7661 6c75  .        if valu
-00017a90: 6520 6973 204e 6f6e 6520 6f72 2076 616c  e is None or val
-00017aa0: 7565 203d 3d20 2222 3a0a 2020 2020 2020  ue == "":.      
-00017ab0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-00017ac0: 650a 2020 2020 2020 2020 666f 726d 6174  e.        format
-00017ad0: 203d 2073 656c 662e 666f 726d 6174 0a20   = self.format. 
-00017ae0: 2020 2020 2020 2079 6561 7220 3d20 7661         year = va
-00017af0: 6c75 652e 7965 6172 0a20 2020 2020 2020  lue.year.       
-00017b00: 2079 203d 2022 252e 3469 2220 2520 7965   y = "%.4i" % ye
-00017b10: 6172 0a20 2020 2020 2020 2066 6f72 6d61  ar.        forma
-00017b20: 7420 3d20 666f 726d 6174 2e72 6570 6c61  t = format.repla
-00017b30: 6365 2822 2579 222c 2079 5b2d 323a 5d29  ce("%y", y[-2:])
-00017b40: 0a20 2020 2020 2020 2066 6f72 6d61 7420  .        format 
-00017b50: 3d20 666f 726d 6174 2e72 6570 6c61 6365  = format.replace
-00017b60: 2822 2559 222c 2079 290a 2020 2020 2020  ("%Y", y).      
-00017b70: 2020 6966 2079 6561 7220 3c20 3139 3030    if year < 1900
-00017b80: 3a0a 2020 2020 2020 2020 2020 2020 7965  :.            ye
-00017b90: 6172 203d 2032 3030 300a 2020 2020 2020  ar = 2000.      
-00017ba0: 2020 6420 3d20 6461 7465 7469 6d65 2e64    d = datetime.d
-00017bb0: 6174 6574 696d 6528 0a20 2020 2020 2020  atetime(.       
-00017bc0: 2020 2020 2079 6561 722c 2076 616c 7565       year, value
-00017bd0: 2e6d 6f6e 7468 2c20 7661 6c75 652e 6461  .month, value.da
-00017be0: 792c 2076 616c 7565 2e68 6f75 722c 2076  y, value.hour, v
-00017bf0: 616c 7565 2e6d 696e 7574 652c 2076 616c  alue.minute, val
-00017c00: 7565 2e73 6563 6f6e 640a 2020 2020 2020  ue.second.      
-00017c10: 2020 290a 2020 2020 2020 2020 6966 2073    ).        if s
-00017c20: 656c 662e 7469 6d65 7a6f 6e65 2069 7320  elf.timezone is 
-00017c30: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00017c40: 2020 2020 2020 6420 3d20 642e 7265 706c        d = d.repl
-00017c50: 6163 6528 747a 696e 666f 3d75 7463 292e  ace(tzinfo=utc).
-00017c60: 6173 7469 6d65 7a6f 6e65 2873 656c 662e  astimezone(self.
-00017c70: 7469 6d65 7a6f 6e65 290a 2020 2020 2020  timezone).      
-00017c80: 2020 7265 7475 726e 2064 2e73 7472 6674    return d.strft
-00017c90: 696d 6528 666f 726d 6174 290a 0a0a 636c  ime(format)...cl
-00017ca0: 6173 7320 4953 5f44 4154 455f 494e 5f52  ass IS_DATE_IN_R
-00017cb0: 414e 4745 2849 535f 4441 5445 293a 0a20  ANGE(IS_DATE):. 
-00017cc0: 2020 2022 2222 0a20 2020 2045 7861 6d70     """.    Examp
-00017cd0: 6c65 733a 0a20 2020 2020 2020 2055 7365  les:.        Use
-00017ce0: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
-00017cf0: 2020 203e 3e3e 2076 203d 2049 535f 4441     >>> v = IS_DA
-00017d00: 5445 5f49 4e5f 5241 4e47 4528 6d69 6e69  TE_IN_RANGE(mini
-00017d10: 6d75 6d3d 6461 7465 7469 6d65 2e64 6174  mum=datetime.dat
-00017d20: 6528 3230 3038 2c31 2c31 292c 205c 0a20  e(2008,1,1), \. 
-00017d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d50: 2020 2020 6d61 7869 6d75 6d3d 6461 7465      maximum=date
-00017d60: 7469 6d65 2e64 6174 6528 3230 3039 2c31  time.date(2009,1
-00017d70: 322c 3331 292c 205c 0a20 2020 2020 2020  2,31), \.       
-00017d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d90: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00017da0: 726d 6174 3d22 256d 2f25 642f 2559 222c  rmat="%m/%d/%Y",
-00017db0: 6572 726f 725f 6d65 7373 6167 653d 224f  error_message="O
-00017dc0: 6f70 7322 290a 0a20 2020 2020 2020 2020  ops")..         
-00017dd0: 2020 203e 3e3e 2076 2827 3033 2f30 332f     >>> v('03/03/
-00017de0: 3230 3038 2729 0a20 2020 2020 2020 2020  2008').         
-00017df0: 2020 2028 6461 7465 7469 6d65 2e64 6174     (datetime.dat
-00017e00: 6528 3230 3038 2c20 332c 2033 292c 204e  e(2008, 3, 3), N
-00017e10: 6f6e 6529 0a0a 2020 2020 2020 2020 2020  one)..          
-00017e20: 2020 3e3e 3e20 7628 2730 332f 3033 2f32    >>> v('03/03/2
-00017e30: 3031 3027 290a 2020 2020 2020 2020 2020  010').          
-00017e40: 2020 2827 3033 2f30 332f 3230 3130 272c    ('03/03/2010',
-00017e50: 2027 6f6f 7073 2729 0a0a 2020 2020 2020   'oops')..      
-00017e60: 2020 2020 2020 3e3e 3e20 7628 6461 7465        >>> v(date
-00017e70: 7469 6d65 2e64 6174 6528 3230 3038 2c33  time.date(2008,3
-00017e80: 2c33 2929 0a20 2020 2020 2020 2020 2020  ,3)).           
-00017e90: 2028 6461 7465 7469 6d65 2e64 6174 6528   (datetime.date(
-00017ea0: 3230 3038 2c20 332c 2033 292c 204e 6f6e  2008, 3, 3), Non
-00017eb0: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
-00017ec0: 3e3e 3e20 7628 6461 7465 7469 6d65 2e64  >>> v(datetime.d
-00017ed0: 6174 6528 3230 3130 2c33 2c33 2929 0a20  ate(2010,3,3)). 
-00017ee0: 2020 2020 2020 2020 2020 2028 6461 7465             (date
-00017ef0: 7469 6d65 2e64 6174 6528 3230 3130 2c20  time.date(2010, 
-00017f00: 332c 2033 292c 2027 6f6f 7073 2729 0a0a  3, 3), 'oops')..
-00017f10: 2020 2020 2222 220a 0a20 2020 2064 6566      """..    def
-00017f20: 205f 5f69 6e69 745f 5f28 0a20 2020 2020   __init__(.     
-00017f30: 2020 2073 656c 662c 206d 696e 696d 756d     self, minimum
-00017f40: 3d4e 6f6e 652c 206d 6178 696d 756d 3d4e  =None, maximum=N
-00017f50: 6f6e 652c 2066 6f72 6d61 743d 2225 592d  one, format="%Y-
-00017f60: 256d 2d25 6422 2c20 6572 726f 725f 6d65  %m-%d", error_me
-00017f70: 7373 6167 653d 4e6f 6e65 0a20 2020 2029  ssage=None.    )
-00017f80: 3a0a 2020 2020 2020 2020 7365 6c66 2e6d  :.        self.m
-00017f90: 696e 696d 756d 203d 206d 696e 696d 756d  inimum = minimum
-00017fa0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-00017fb0: 7869 6d75 6d20 3d20 6d61 7869 6d75 6d0a  ximum = maximum.
-00017fc0: 2020 2020 2020 2020 6966 2065 7272 6f72          if error
-00017fd0: 5f6d 6573 7361 6765 2069 7320 4e6f 6e65  _message is None
-00017fe0: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-00017ff0: 206d 696e 696d 756d 2069 7320 4e6f 6e65   minimum is None
-00018000: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00018010: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
-00018020: 3d20 2245 6e74 6572 2064 6174 6520 6f6e  = "Enter date on
-00018030: 206f 7220 6265 666f 7265 2025 286d 6178   or before %(max
-00018040: 2973 220a 2020 2020 2020 2020 2020 2020  )s".            
-00018050: 656c 6966 206d 6178 696d 756d 2069 7320  elif maximum is 
-00018060: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00018070: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
-00018080: 6167 6520 3d20 2245 6e74 6572 2064 6174  age = "Enter dat
-00018090: 6520 6f6e 206f 7220 6166 7465 7220 2528  e on or after %(
-000180a0: 6d69 6e29 7322 0a20 2020 2020 2020 2020  min)s".         
-000180b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000180c0: 2020 2020 2020 2020 2065 7272 6f72 5f6d           error_m
-000180d0: 6573 7361 6765 203d 2022 456e 7465 7220  essage = "Enter 
-000180e0: 6461 7465 2069 6e20 7261 6e67 6520 2528  date in range %(
-000180f0: 6d69 6e29 7320 2528 6d61 7829 7322 0a20  min)s %(max)s". 
-00018100: 2020 2020 2020 2049 535f 4441 5445 2e5f         IS_DATE._
-00018110: 5f69 6e69 745f 5f28 7365 6c66 2c20 666f  _init__(self, fo
-00018120: 726d 6174 3d66 6f72 6d61 742c 2065 7272  rmat=format, err
-00018130: 6f72 5f6d 6573 7361 6765 3d65 7272 6f72  or_message=error
-00018140: 5f6d 6573 7361 6765 290a 2020 2020 2020  _message).      
-00018150: 2020 7365 6c66 2e65 7874 7265 6d65 7320    self.extremes 
-00018160: 3d20 6469 6374 286d 696e 3d73 656c 662e  = dict(min=self.
-00018170: 666f 726d 6174 7465 7228 6d69 6e69 6d75  formatter(minimu
-00018180: 6d29 2c20 6d61 783d 7365 6c66 2e66 6f72  m), max=self.for
-00018190: 6d61 7474 6572 286d 6178 696d 756d 2929  matter(maximum))
-000181a0: 0a0a 2020 2020 6465 6620 7661 6c69 6461  ..    def valida
-000181b0: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-000181c0: 7265 636f 7264 5f69 643d 4e6f 6e65 293a  record_id=None):
-000181d0: 0a20 2020 2020 2020 2076 616c 7565 203d  .        value =
-000181e0: 2049 535f 4441 5445 2e76 616c 6964 6174   IS_DATE.validat
-000181f0: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
-00018200: 6563 6f72 645f 6964 3d4e 6f6e 6529 0a20  ecord_id=None). 
-00018210: 2020 2020 2020 2069 6620 7365 6c66 2e6d         if self.m
-00018220: 696e 696d 756d 2061 6e64 2073 656c 662e  inimum and self.
-00018230: 6d69 6e69 6d75 6d20 3e20 7661 6c75 653a  minimum > value:
-00018240: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00018250: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
-00018260: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
-00018270: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
-00018280: 7373 6167 6529 2025 2073 656c 662e 6578  ssage) % self.ex
-00018290: 7472 656d 6573 290a 2020 2020 2020 2020  tremes).        
-000182a0: 6966 2073 656c 662e 6d61 7869 6d75 6d20  if self.maximum 
-000182b0: 616e 6420 7661 6c75 6520 3e20 7365 6c66  and value > self
-000182c0: 2e6d 6178 696d 756d 3a0a 2020 2020 2020  .maximum:.      
-000182d0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-000182e0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
-000182f0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-00018300: 2e65 7272 6f72 5f6d 6573 7361 6765 2920  .error_message) 
-00018310: 2520 7365 6c66 2e65 7874 7265 6d65 7329  % self.extremes)
-00018320: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00018330: 7661 6c75 650a 0a0a 636c 6173 7320 4953  value...class IS
-00018340: 5f44 4154 4554 494d 455f 494e 5f52 414e  _DATETIME_IN_RAN
-00018350: 4745 2849 535f 4441 5445 5449 4d45 293a  GE(IS_DATETIME):
-00018360: 0a20 2020 2022 2222 0a20 2020 2045 7861  .    """.    Exa
-00018370: 6d70 6c65 733a 0a20 2020 2020 2020 2055  mples:.        U
-00018380: 7365 2061 733a 3a0a 2020 2020 2020 2020  se as::.        
-00018390: 2020 2020 3e3e 3e20 7620 3d20 4953 5f44      >>> v = IS_D
-000183a0: 4154 4554 494d 455f 494e 5f52 414e 4745  ATETIME_IN_RANGE
-000183b0: 285c 0a20 2020 2020 2020 2020 2020 2020  (\.             
-000183c0: 2020 2020 2020 206d 696e 696d 756d 3d64         minimum=d
-000183d0: 6174 6574 696d 652e 6461 7465 7469 6d65  atetime.datetime
-000183e0: 2832 3030 382c 312c 312c 3132 2c32 3029  (2008,1,1,12,20)
-000183f0: 2c20 5c0a 2020 2020 2020 2020 2020 2020  , \.            
-00018400: 2020 2020 2020 2020 6d61 7869 6d75 6d3d          maximum=
-00018410: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
-00018420: 6528 3230 3039 2c31 322c 3331 2c31 322c  e(2009,12,31,12,
-00018430: 3230 292c 205c 0a20 2020 2020 2020 2020  20), \.         
-00018440: 2020 2020 2020 2020 2020 2066 6f72 6d61             forma
-00018450: 743d 2225 6d2f 2564 2f25 5920 2548 3a25  t="%m/%d/%Y %H:%
-00018460: 4d22 2c65 7272 6f72 5f6d 6573 7361 6765  M",error_message
-00018470: 3d22 4f6f 7073 2229 0a20 2020 2020 2020  ="Oops").       
-00018480: 2020 2020 203e 3e3e 2076 2827 3033 2f30       >>> v('03/0
-00018490: 332f 3230 3038 2031 323a 3430 2729 0a20  3/2008 12:40'). 
-000184a0: 2020 2020 2020 2020 2020 2028 6461 7465             (date
-000184b0: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
-000184c0: 3038 2c20 332c 2033 2c20 3132 2c20 3430  08, 3, 3, 12, 40
-000184d0: 292c 204e 6f6e 6529 0a0a 2020 2020 2020  ), None)..      
-000184e0: 2020 2020 2020 3e3e 3e20 7628 2730 332f        >>> v('03/
-000184f0: 3033 2f32 3031 3020 3130 3a33 3427 290a  03/2010 10:34').
-00018500: 2020 2020 2020 2020 2020 2020 2827 3033              ('03
-00018510: 2f30 332f 3230 3130 2031 303a 3334 272c  /03/2010 10:34',
-00018520: 2027 6f6f 7073 2729 0a0a 2020 2020 2020   'oops')..      
-00018530: 2020 2020 2020 3e3e 3e20 7628 6461 7465        >>> v(date
-00018540: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
-00018550: 3038 2c33 2c33 2c30 2c30 2929 0a20 2020  08,3,3,0,0)).   
-00018560: 2020 2020 2020 2020 2028 6461 7465 7469           (dateti
-00018570: 6d65 2e64 6174 6574 696d 6528 3230 3038  me.datetime(2008
-00018580: 2c20 332c 2033 2c20 302c 2030 292c 204e  , 3, 3, 0, 0), N
-00018590: 6f6e 6529 0a0a 2020 2020 2020 2020 2020  one)..          
-000185a0: 2020 3e3e 3e20 7628 6461 7465 7469 6d65    >>> v(datetime
-000185b0: 2e64 6174 6574 696d 6528 3230 3130 2c33  .datetime(2010,3
-000185c0: 2c33 2c30 2c30 2929 0a20 2020 2020 2020  ,3,0,0)).       
-000185d0: 2020 2020 2028 6461 7465 7469 6d65 2e64       (datetime.d
-000185e0: 6174 6574 696d 6528 3230 3130 2c20 332c  atetime(2010, 3,
-000185f0: 2033 2c20 302c 2030 292c 2027 6f6f 7073   3, 0, 0), 'oops
-00018600: 2729 0a0a 2020 2020 2222 220a 0a20 2020  ')..    """..   
-00018610: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
-00018620: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00018630: 2020 2020 206d 696e 696d 756d 3d4e 6f6e       minimum=Non
-00018640: 652c 0a20 2020 2020 2020 206d 6178 696d  e,.        maxim
-00018650: 756d 3d4e 6f6e 652c 0a20 2020 2020 2020  um=None,.       
-00018660: 2066 6f72 6d61 743d 2225 592d 256d 2d25   format="%Y-%m-%
-00018670: 6420 2548 3a25 4d3a 2553 222c 0a20 2020  d %H:%M:%S",.   
-00018680: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
-00018690: 6765 3d4e 6f6e 652c 0a20 2020 2020 2020  ge=None,.       
-000186a0: 2074 696d 657a 6f6e 653d 4e6f 6e65 2c0a   timezone=None,.
-000186b0: 2020 2020 293a 0a20 2020 2020 2020 2073      ):.        s
-000186c0: 656c 662e 6d69 6e69 6d75 6d20 3d20 6d69  elf.minimum = mi
-000186d0: 6e69 6d75 6d0a 2020 2020 2020 2020 7365  nimum.        se
-000186e0: 6c66 2e6d 6178 696d 756d 203d 206d 6178  lf.maximum = max
-000186f0: 696d 756d 0a20 2020 2020 2020 2069 6620  imum.        if 
-00018700: 6572 726f 725f 6d65 7373 6167 6520 6973  error_message is
-00018710: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00018720: 2020 2069 6620 6d69 6e69 6d75 6d20 6973     if minimum is
-00018730: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00018740: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
-00018750: 7361 6765 203d 2022 456e 7465 7220 6461  sage = "Enter da
-00018760: 7465 2061 6e64 2074 696d 6520 6f6e 206f  te and time on o
-00018770: 7220 6265 666f 7265 2025 286d 6178 2973  r before %(max)s
-00018780: 220a 2020 2020 2020 2020 2020 2020 656c  ".            el
-00018790: 6966 206d 6178 696d 756d 2069 7320 4e6f  if maximum is No
-000187a0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-000187b0: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
-000187c0: 6520 3d20 2245 6e74 6572 2064 6174 6520  e = "Enter date 
-000187d0: 616e 6420 7469 6d65 206f 6e20 6f72 2061  and time on or a
-000187e0: 6674 6572 2025 286d 696e 2973 220a 2020  fter %(min)s".  
-000187f0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00018800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018810: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
-00018820: 2245 6e74 6572 2064 6174 6520 616e 6420  "Enter date and 
-00018830: 7469 6d65 2069 6e20 7261 6e67 6520 2528  time in range %(
-00018840: 6d69 6e29 7320 2528 6d61 7829 7322 0a20  min)s %(max)s". 
-00018850: 2020 2020 2020 2049 535f 4441 5445 5449         IS_DATETI
-00018860: 4d45 2e5f 5f69 6e69 745f 5f28 0a20 2020  ME.__init__(.   
-00018870: 2020 2020 2020 2020 2073 656c 662c 2066           self, f
-00018880: 6f72 6d61 743d 666f 726d 6174 2c20 6572  ormat=format, er
-00018890: 726f 725f 6d65 7373 6167 653d 6572 726f  ror_message=erro
-000188a0: 725f 6d65 7373 6167 652c 2074 696d 657a  r_message, timez
-000188b0: 6f6e 653d 7469 6d65 7a6f 6e65 0a20 2020  one=timezone.   
-000188c0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-000188d0: 656c 662e 6578 7472 656d 6573 203d 2064  elf.extremes = d
-000188e0: 6963 7428 6d69 6e3d 7365 6c66 2e66 6f72  ict(min=self.for
-000188f0: 6d61 7474 6572 286d 696e 696d 756d 292c  matter(minimum),
-00018900: 206d 6178 3d73 656c 662e 666f 726d 6174   max=self.format
-00018910: 7465 7228 6d61 7869 6d75 6d29 290a 0a20  ter(maximum)).. 
-00018920: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
-00018930: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
-00018940: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
-00018950: 2020 2020 2020 7661 6c75 6520 3d20 4953        value = IS
-00018960: 5f44 4154 4554 494d 452e 7661 6c69 6461  _DATETIME.valida
-00018970: 7465 2873 656c 662c 2076 616c 7565 2c20  te(self, value, 
-00018980: 7265 636f 7264 5f69 643d 4e6f 6e65 290a  record_id=None).
-00018990: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-000189a0: 6d69 6e69 6d75 6d20 616e 6420 7365 6c66  minimum and self
-000189b0: 2e6d 696e 696d 756d 203e 2076 616c 7565  .minimum > value
-000189c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000189d0: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-000189e0: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
-000189f0: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
-00018a00: 6573 7361 6765 2920 2520 7365 6c66 2e65  essage) % self.e
-00018a10: 7874 7265 6d65 7329 0a20 2020 2020 2020  xtremes).       
-00018a20: 2069 6620 7365 6c66 2e6d 6178 696d 756d   if self.maximum
-00018a30: 2061 6e64 2076 616c 7565 203e 2073 656c   and value > sel
-00018a40: 662e 6d61 7869 6d75 6d3a 0a20 2020 2020  f.maximum:.     
-00018a50: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-00018a60: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
-00018a70: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
-00018a80: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
-00018a90: 2025 2073 656c 662e 6578 7472 656d 6573   % self.extremes
-00018aa0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00018ab0: 2076 616c 7565 0a0a 0a63 6c61 7373 2049   value...class I
-00018ac0: 535f 4c49 5354 5f4f 4628 5661 6c69 6461  S_LIST_OF(Valida
-00018ad0: 746f 7229 3a0a 2020 2020 6465 6620 5f5f  tor):.    def __
-00018ae0: 696e 6974 5f5f 2873 656c 662c 206f 7468  init__(self, oth
-00018af0: 6572 3d4e 6f6e 652c 206d 696e 696d 756d  er=None, minimum
-00018b00: 3d4e 6f6e 652c 206d 6178 696d 756d 3d4e  =None, maximum=N
-00018b10: 6f6e 652c 2065 7272 6f72 5f6d 6573 7361  one, error_messa
-00018b20: 6765 3d4e 6f6e 6529 3a0a 2020 2020 2020  ge=None):.      
-00018b30: 2020 7365 6c66 2e6f 7468 6572 203d 206f    self.other = o
-00018b40: 7468 6572 0a20 2020 2020 2020 2073 656c  ther.        sel
-00018b50: 662e 6d69 6e69 6d75 6d20 3d20 6d69 6e69  f.minimum = mini
-00018b60: 6d75 6d0a 2020 2020 2020 2020 7365 6c66  mum.        self
-00018b70: 2e6d 6178 696d 756d 203d 206d 6178 696d  .maximum = maxim
-00018b80: 756d 0a20 2020 2020 2020 2073 656c 662e  um.        self.
-00018b90: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
-00018ba0: 6572 726f 725f 6d65 7373 6167 650a 0a20  error_message.. 
-00018bb0: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
-00018bc0: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
-00018bd0: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
-00018be0: 2020 2020 2020 6976 616c 7565 203d 2076        ivalue = v
-00018bf0: 616c 7565 0a20 2020 2020 2020 2069 6620  alue.        if 
-00018c00: 6e6f 7420 6973 696e 7374 616e 6365 2876  not isinstance(v
-00018c10: 616c 7565 2c20 6c69 7374 293a 0a20 2020  alue, list):.   
-00018c20: 2020 2020 2020 2020 2069 7661 6c75 6520           ivalue 
-00018c30: 3d20 5b69 7661 6c75 655d 0a20 2020 2020  = [ivalue].     
-00018c40: 2020 2069 7661 6c75 6520 3d20 5b69 2066     ivalue = [i f
-00018c50: 6f72 2069 2069 6e20 6976 616c 7565 2069  or i in ivalue i
-00018c60: 6620 7374 7228 6929 2e73 7472 6970 2829  f str(i).strip()
-00018c70: 5d0a 2020 2020 2020 2020 6966 2073 656c  ].        if sel
-00018c80: 662e 6d69 6e69 6d75 6d20 6973 206e 6f74  f.minimum is not
-00018c90: 204e 6f6e 6520 616e 6420 6c65 6e28 6976   None and len(iv
-00018ca0: 616c 7565 2920 3c20 7365 6c66 2e6d 696e  alue) < self.min
-00018cb0: 696d 756d 3a0a 2020 2020 2020 2020 2020  imum:.          
-00018cc0: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-00018cd0: 6f6e 4572 726f 7228 0a20 2020 2020 2020  onError(.       
-00018ce0: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-00018cf0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
-00018d00: 726f 725f 6d65 7373 6167 6520 6f72 2022  ror_message or "
-00018d10: 4d69 6e69 6d75 6d20 6c65 6e67 7468 2069  Minimum length i
-00018d20: 7320 2528 6d69 6e29 7322 290a 2020 2020  s %(min)s").    
-00018d30: 2020 2020 2020 2020 2020 2020 2520 6469              % di
-00018d40: 6374 286d 696e 3d73 656c 662e 6d69 6e69  ct(min=self.mini
-00018d50: 6d75 6d2c 206d 6178 3d73 656c 662e 6d61  mum, max=self.ma
-00018d60: 7869 6d75 6d29 0a20 2020 2020 2020 2020  ximum).         
-00018d70: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-00018d80: 7365 6c66 2e6d 6178 696d 756d 2069 7320  self.maximum is 
-00018d90: 6e6f 7420 4e6f 6e65 2061 6e64 206c 656e  not None and len
-00018da0: 2869 7661 6c75 6529 203e 2073 656c 662e  (ivalue) > self.
-00018db0: 6d61 7869 6d75 6d3a 0a20 2020 2020 2020  maximum:.       
-00018dc0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00018dd0: 6174 696f 6e45 7272 6f72 280a 2020 2020  ationError(.    
-00018de0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00018df0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-00018e00: 2e65 7272 6f72 5f6d 6573 7361 6765 206f  .error_message o
-00018e10: 7220 224d 6178 696d 756d 206c 656e 6774  r "Maximum lengt
-00018e20: 6820 6973 2025 286d 6178 2973 2229 0a20  h is %(max)s"). 
-00018e30: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-00018e40: 2064 6963 7428 6d69 6e3d 7365 6c66 2e6d   dict(min=self.m
-00018e50: 696e 696d 756d 2c20 6d61 783d 7365 6c66  inimum, max=self
-00018e60: 2e6d 6178 696d 756d 290a 2020 2020 2020  .maximum).      
-00018e70: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00018e80: 6e65 775f 7661 6c75 6520 3d20 5b5d 0a20  new_value = []. 
-00018e90: 2020 2020 2020 206f 7468 6572 203d 2073         other = s
-00018ea0: 656c 662e 6f74 6865 720a 2020 2020 2020  elf.other.      
-00018eb0: 2020 6966 2073 656c 662e 6f74 6865 723a    if self.other:
-00018ec0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00018ed0: 6e6f 7420 6973 696e 7374 616e 6365 286f  not isinstance(o
-00018ee0: 7468 6572 2c20 286c 6973 742c 2074 7570  ther, (list, tup
-00018ef0: 6c65 2929 3a0a 2020 2020 2020 2020 2020  le)):.          
-00018f00: 2020 2020 2020 6f74 6865 7220 3d20 5b6f        other = [o
-00018f10: 7468 6572 5d0a 2020 2020 2020 2020 2020  ther].          
-00018f20: 2020 666f 7220 6974 656d 2069 6e20 6976    for item in iv
-00018f30: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
-00018f40: 2020 2020 2020 7620 3d20 6974 656d 0a20        v = item. 
-00018f50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00018f60: 6f72 2076 616c 6964 6174 6f72 2069 6e20  or validator in 
-00018f70: 6f74 6865 723a 0a20 2020 2020 2020 2020  other:.         
-00018f80: 2020 2020 2020 2020 2020 2076 203d 2076             v = v
-00018f90: 616c 6964 6174 6f72 5f63 616c 6c65 7228  alidator_caller(
-00018fa0: 7661 6c69 6461 746f 722c 2076 2c20 7265  validator, v, re
-00018fb0: 636f 7264 5f69 6429 0a20 2020 2020 2020  cord_id).       
-00018fc0: 2020 2020 2020 2020 206e 6577 5f76 616c           new_val
-00018fd0: 7565 2e61 7070 656e 6428 7629 0a20 2020  ue.append(v).   
-00018fe0: 2020 2020 2020 2020 2069 7661 6c75 6520           ivalue 
-00018ff0: 3d20 6e65 775f 7661 6c75 650a 2020 2020  = new_value.    
-00019000: 2020 2020 7265 7475 726e 2069 7661 6c75      return ivalu
-00019010: 650a 0a0a 636c 6173 7320 4953 5f4c 4f57  e...class IS_LOW
-00019020: 4552 2856 616c 6964 6174 6f72 293a 0a20  ER(Validator):. 
-00019030: 2020 2022 2222 0a20 2020 2043 6f6e 7665     """.    Conve
-00019040: 7274 7320 746f 206c 6f77 6572 6361 7365  rts to lowercase
-00019050: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
-00019060: 4953 5f4c 4f57 4552 2829 2827 4142 4327  IS_LOWER()('ABC'
-00019070: 290a 2020 2020 2020 2020 2827 6162 6327  ).        ('abc'
-00019080: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00019090: 3e3e 3e20 4953 5f4c 4f57 4552 2829 2827  >>> IS_LOWER()('
-000190a0: c391 2729 0a20 2020 2020 2020 2028 275c  ..').        ('\
-000190b0: 5c78 6333 5c5c 7862 3127 2c20 4e6f 6e65  \xc3\\xb1', None
-000190c0: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
-000190d0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-000190e0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-000190f0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-00019100: 2020 2063 6173 745f 6261 636b 203d 206c     cast_back = l
-00019110: 616d 6264 6120 783a 2078 0a20 2020 2020  ambda x: x.     
-00019120: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00019130: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
-00019140: 2020 2020 2020 2020 2020 6361 7374 5f62            cast_b
-00019150: 6163 6b20 3d20 746f 5f6e 6174 6976 650a  ack = to_native.
-00019160: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00019170: 6e73 7461 6e63 6528 7661 6c75 652c 2062  nstance(value, b
-00019180: 7974 6573 293a 0a20 2020 2020 2020 2020  ytes):.         
-00019190: 2020 2063 6173 745f 6261 636b 203d 2074     cast_back = t
-000191a0: 6f5f 6279 7465 730a 2020 2020 2020 2020  o_bytes.        
-000191b0: 7661 6c75 6520 3d20 746f 5f75 6e69 636f  value = to_unico
-000191c0: 6465 2876 616c 7565 292e 6c6f 7765 7228  de(value).lower(
-000191d0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-000191e0: 2063 6173 745f 6261 636b 2876 616c 7565   cast_back(value
-000191f0: 290a 0a0a 636c 6173 7320 4953 5f55 5050  )...class IS_UPP
-00019200: 4552 2856 616c 6964 6174 6f72 293a 0a20  ER(Validator):. 
-00019210: 2020 2022 2222 0a20 2020 2043 6f6e 7665     """.    Conve
-00019220: 7274 7320 746f 2075 7070 6572 6361 7365  rts to uppercase
-00019230: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
-00019240: 4953 5f55 5050 4552 2829 2827 6162 6327  IS_UPPER()('abc'
-00019250: 290a 2020 2020 2020 2020 2827 4142 4327  ).        ('ABC'
-00019260: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00019270: 3e3e 3e20 4953 5f55 5050 4552 2829 2827  >>> IS_UPPER()('
-00019280: c3b1 2729 0a20 2020 2020 2020 2028 275c  ..').        ('\
-00019290: 5c78 6333 5c5c 7839 3127 2c20 4e6f 6e65  \xc3\\x91', None
-000192a0: 290a 0a20 2020 2022 2222 0a0a 2020 2020  )..    """..    
-000192b0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-000192c0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-000192d0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-000192e0: 2020 2063 6173 745f 6261 636b 203d 206c     cast_back = l
-000192f0: 616d 6264 6120 783a 2078 0a20 2020 2020  ambda x: x.     
-00019300: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00019310: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
-00019320: 2020 2020 2020 2020 2020 6361 7374 5f62            cast_b
-00019330: 6163 6b20 3d20 746f 5f6e 6174 6976 650a  ack = to_native.
-00019340: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
-00019350: 6e73 7461 6e63 6528 7661 6c75 652c 2062  nstance(value, b
-00019360: 7974 6573 293a 0a20 2020 2020 2020 2020  ytes):.         
-00019370: 2020 2063 6173 745f 6261 636b 203d 2074     cast_back = t
-00019380: 6f5f 6279 7465 730a 2020 2020 2020 2020  o_bytes.        
-00019390: 7661 6c75 6520 3d20 746f 5f75 6e69 636f  value = to_unico
-000193a0: 6465 2876 616c 7565 292e 7570 7065 7228  de(value).upper(
-000193b0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-000193c0: 2063 6173 745f 6261 636b 2876 616c 7565   cast_back(value
-000193d0: 290a 0a0a 6465 6620 7572 6c69 6679 2873  )...def urlify(s
-000193e0: 2c20 6d61 786c 656e 3d38 302c 206b 6565  , maxlen=80, kee
-000193f0: 705f 756e 6465 7273 636f 7265 733d 4661  p_underscores=Fa
-00019400: 6c73 6529 3a0a 2020 2020 2222 220a 2020  lse):.    """.  
-00019410: 2020 436f 6e76 6572 7473 2069 6e63 6f6d    Converts incom
-00019420: 696e 6720 7374 7269 6e67 2074 6f20 6120  ing string to a 
-00019430: 7369 6d70 6c69 6669 6564 2041 5343 4949  simplified ASCII
-00019440: 2073 7562 7365 742e 0a20 2020 2069 6620   subset..    if 
-00019450: 286b 6565 705f 756e 6465 7273 636f 7265  (keep_underscore
-00019460: 7329 3a20 756e 6465 7273 636f 7265 7320  s): underscores 
-00019470: 6172 6520 7265 7461 696e 6564 2069 6e20  are retained in 
-00019480: 7468 6520 7374 7269 6e67 0a20 2020 2065  the string.    e
-00019490: 6c73 653a 2075 6e64 6572 7363 6f72 6573  lse: underscores
-000194a0: 2061 7265 2074 7261 6e73 6c61 7465 6420   are translated 
-000194b0: 746f 2068 7970 6865 6e73 2028 6465 6661  to hyphens (defa
-000194c0: 756c 7429 0a20 2020 2022 2222 0a20 2020  ult).    """.   
-000194d0: 2073 203d 2074 6f5f 756e 6963 6f64 6528   s = to_unicode(
-000194e0: 7329 2020 2320 746f 2075 6e69 636f 6465  s)  # to unicode
-000194f0: 0a20 2020 2073 203d 2073 2e6c 6f77 6572  .    s = s.lower
-00019500: 2829 2020 2320 746f 206c 6f77 6572 6361  ()  # to lowerca
-00019510: 7365 0a20 2020 2073 203d 2075 6e69 636f  se.    s = unico
-00019520: 6465 6461 7461 2e6e 6f72 6d61 6c69 7a65  dedata.normalize
-00019530: 2822 4e46 4b44 222c 2073 2920 2023 2072  ("NFKD", s)  # r
-00019540: 6570 6c61 6365 2073 7065 6369 616c 2063  eplace special c
-00019550: 6861 7261 6374 6572 730a 2020 2020 7320  haracters.    s 
-00019560: 3d20 746f 5f6e 6174 6976 6528 732c 2063  = to_native(s, c
-00019570: 6861 7273 6574 3d22 6173 6369 6922 2c20  harset="ascii", 
-00019580: 6572 726f 7273 3d22 6967 6e6f 7265 2229  errors="ignore")
-00019590: 2020 2320 656e 636f 6465 2061 7320 4153    # encode as AS
-000195a0: 4349 490a 2020 2020 7320 3d20 7265 2e73  CII.    s = re.s
-000195b0: 7562 2872 2226 5c77 2b3f 3b22 2c20 2222  ub(r"&\w+?;", ""
-000195c0: 2c20 7329 2020 2320 7374 7269 7020 6874  , s)  # strip ht
-000195d0: 6d6c 2065 6e74 6974 6965 730a 2020 2020  ml entities.    
-000195e0: 6966 206b 6565 705f 756e 6465 7273 636f  if keep_undersco
-000195f0: 7265 733a 0a20 2020 2020 2020 2073 203d  res:.        s =
-00019600: 2072 652e 7375 6228 7222 5c73 2b22 2c20   re.sub(r"\s+", 
-00019610: 222d 222c 2073 2920 2023 2077 6869 7465  "-", s)  # white
-00019620: 7370 6163 6520 746f 2068 7970 6865 6e73  space to hyphens
-00019630: 0a20 2020 2020 2020 2073 203d 2072 652e  .        s = re.
-00019640: 7375 6228 7222 5b5e 5c77 5c2d 5d22 2c20  sub(r"[^\w\-]", 
-00019650: 2222 2c20 7329 0a20 2020 2020 2020 2023  "", s).        #
-00019660: 2073 7472 6970 2061 6c6c 2062 7574 2061   strip all but a
-00019670: 6c70 6861 6e75 6d65 7269 632f 756e 6465  lphanumeric/unde
-00019680: 7273 636f 7265 2f68 7970 6865 6e0a 2020  rscore/hyphen.  
-00019690: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-000196a0: 7320 3d20 7265 2e73 7562 2872 225b 5c73  s = re.sub(r"[\s
-000196b0: 5f5d 2b22 2c20 222d 222c 2073 2920 2023  _]+", "-", s)  #
-000196c0: 2077 6869 7465 7370 6163 6520 2620 756e   whitespace & un
-000196d0: 6465 7273 636f 7265 7320 746f 2068 7970  derscores to hyp
-000196e0: 6865 6e73 0a20 2020 2020 2020 2073 203d  hens.        s =
-000196f0: 2072 652e 7375 6228 7222 5b5e 612d 7a30   re.sub(r"[^a-z0
-00019700: 2d39 5c2d 5d22 2c20 2222 2c20 7329 2020  -9\-]", "", s)  
-00019710: 2320 7374 7269 7020 616c 6c20 6275 7420  # strip all but 
-00019720: 616c 7068 616e 756d 6572 6963 2f68 7970  alphanumeric/hyp
-00019730: 6865 6e0a 2020 2020 7320 3d20 7265 2e73  hen.    s = re.s
-00019740: 7562 2872 225b 2d5f 5d5b 2d5f 5d2b 222c  ub(r"[-_][-_]+",
-00019750: 2022 2d22 2c20 7329 2020 2320 636f 6c6c   "-", s)  # coll
-00019760: 6170 7365 2073 7472 696e 6773 206f 6620  apse strings of 
-00019770: 6879 7068 656e 730a 2020 2020 7320 3d20  hyphens.    s = 
-00019780: 732e 7374 7269 7028 222d 2229 2020 2320  s.strip("-")  # 
-00019790: 7265 6d6f 7665 206c 6561 6469 6e67 2061  remove leading a
-000197a0: 6e64 2074 7261 696c 696e 6720 6879 7068  nd trailing hyph
-000197b0: 656e 730a 2020 2020 7265 7475 726e 2073  ens.    return s
-000197c0: 5b3a 6d61 786c 656e 5d20 2023 2065 6e66  [:maxlen]  # enf
-000197d0: 6f72 6365 206d 6178 696d 756d 206c 656e  orce maximum len
-000197e0: 6774 680a 0a0a 636c 6173 7320 4953 5f53  gth...class IS_S
-000197f0: 4c55 4728 5661 6c69 6461 746f 7229 3a0a  LUG(Validator):.
-00019800: 2020 2020 2222 220a 2020 2020 636f 6e76      """.    conv
-00019810: 6572 7473 2061 7262 6974 7261 7279 2074  erts arbitrary t
-00019820: 6578 7420 7374 7269 6e67 2074 6f20 6120  ext string to a 
-00019830: 736c 7567 3a3a 0a0a 2020 2020 2020 2020  slug::..        
-00019840: 3e3e 3e20 4953 5f53 4c55 4728 2928 2761  >>> IS_SLUG()('a
-00019850: 6263 3132 3327 290a 2020 2020 2020 2020  bc123').        
-00019860: 2827 6162 6331 3233 272c 204e 6f6e 6529  ('abc123', None)
-00019870: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00019880: 534c 5547 2829 2827 4142 4331 3233 2729  SLUG()('ABC123')
-00019890: 0a20 2020 2020 2020 2028 2761 6263 3132  .        ('abc12
-000198a0: 3327 2c20 4e6f 6e65 290a 2020 2020 2020  3', None).      
-000198b0: 2020 3e3e 3e20 4953 5f53 4c55 4728 2928    >>> IS_SLUG()(
-000198c0: 2761 6263 2d31 3233 2729 0a20 2020 2020  'abc-123').     
-000198d0: 2020 2028 2761 6263 2d31 3233 272c 204e     ('abc-123', N
-000198e0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-000198f0: 2049 535f 534c 5547 2829 2827 6162 632d   IS_SLUG()('abc-
-00019900: 2d31 3233 2729 0a20 2020 2020 2020 2028  -123').        (
-00019910: 2761 6263 2d31 3233 272c 204e 6f6e 6529  'abc-123', None)
-00019920: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00019930: 534c 5547 2829 2827 6162 6320 3132 3327  SLUG()('abc 123'
-00019940: 290a 2020 2020 2020 2020 2827 6162 632d  ).        ('abc-
-00019950: 3132 3327 2c20 4e6f 6e65 290a 2020 2020  123', None).    
-00019960: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
-00019970: 2928 2761 6263 5c74 5f31 3233 2729 0a20  )('abc\t_123'). 
-00019980: 2020 2020 2020 2028 2761 6263 2d31 3233         ('abc-123
-00019990: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-000199a0: 203e 3e3e 2049 535f 534c 5547 2829 2827   >>> IS_SLUG()('
-000199b0: 2d61 6263 2d27 290a 2020 2020 2020 2020  -abc-').        
-000199c0: 2827 6162 6327 2c20 4e6f 6e65 290a 2020  ('abc', None).  
-000199d0: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
-000199e0: 4728 2928 272d 2d61 2d2d 622d 2d5f 202d  G()('--a--b--_ -
-000199f0: 632d 2d27 290a 2020 2020 2020 2020 2827  c--').        ('
-00019a00: 612d 622d 6327 2c20 4e6f 6e65 290a 2020  a-b-c', None).  
-00019a10: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
-00019a20: 4728 2928 2761 6263 2661 6d70 3b31 3233  G()('abc&amp;123
-00019a30: 2729 0a20 2020 2020 2020 2028 2761 6263  ').        ('abc
-00019a40: 3132 3327 2c20 4e6f 6e65 290a 2020 2020  123', None).    
-00019a50: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
-00019a60: 2928 2761 6263 2661 6d70 3b31 3233 2661  )('abc&amp;123&a
-00019a70: 6d70 3b64 6566 2729 0a20 2020 2020 2020  mp;def').       
-00019a80: 2028 2761 6263 3132 3364 6566 272c 204e   ('abc123def', N
-00019a90: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00019aa0: 2049 535f 534c 5547 2829 2827 c3b1 2729   IS_SLUG()('..')
-00019ab0: 0a20 2020 2020 2020 2028 276e 272c 204e  .        ('n', N
-00019ac0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00019ad0: 2049 535f 534c 5547 286d 6178 6c65 6e3d   IS_SLUG(maxlen=
-00019ae0: 3429 2827 6162 6331 3233 2729 0a20 2020  4)('abc123').   
-00019af0: 2020 2020 2028 2761 6263 3127 2c20 4e6f       ('abc1', No
-00019b00: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
-00019b10: 4953 5f53 4c55 4728 2928 2761 6263 5f31  IS_SLUG()('abc_1
-00019b20: 3233 2729 0a20 2020 2020 2020 2028 2761  23').        ('a
-00019b30: 6263 2d31 3233 272c 204e 6f6e 6529 0a20  bc-123', None). 
-00019b40: 2020 2020 2020 203e 3e3e 2049 535f 534c         >>> IS_SL
-00019b50: 5547 286b 6565 705f 756e 6465 7273 636f  UG(keep_undersco
-00019b60: 7265 733d 4661 6c73 6529 2827 6162 635f  res=False)('abc_
-00019b70: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
-00019b80: 6162 632d 3132 3327 2c20 4e6f 6e65 290a  abc-123', None).
-00019b90: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
-00019ba0: 4c55 4728 6b65 6570 5f75 6e64 6572 7363  LUG(keep_undersc
-00019bb0: 6f72 6573 3d54 7275 6529 2827 6162 635f  ores=True)('abc_
-00019bc0: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
-00019bd0: 6162 635f 3132 3327 2c20 4e6f 6e65 290a  abc_123', None).
-00019be0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
-00019bf0: 4c55 4728 6368 6563 6b3d 4661 6c73 6529  LUG(check=False)
-00019c00: 2827 6162 6327 290a 2020 2020 2020 2020  ('abc').        
-00019c10: 2827 6162 6327 2c20 4e6f 6e65 290a 2020  ('abc', None).  
-00019c20: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
-00019c30: 4728 6368 6563 6b3d 5472 7565 2928 2761  G(check=True)('a
-00019c40: 6263 2729 0a20 2020 2020 2020 2028 2761  bc').        ('a
-00019c50: 6263 272c 204e 6f6e 6529 0a20 2020 2020  bc', None).     
-00019c60: 2020 203e 3e3e 2049 535f 534c 5547 2863     >>> IS_SLUG(c
-00019c70: 6865 636b 3d46 616c 7365 2928 2761 2062  heck=False)('a b
-00019c80: 6327 290a 2020 2020 2020 2020 2827 612d  c').        ('a-
-00019c90: 6263 272c 204e 6f6e 6529 0a20 2020 2020  bc', None).     
-00019ca0: 2020 203e 3e3e 2049 535f 534c 5547 2863     >>> IS_SLUG(c
-00019cb0: 6865 636b 3d54 7275 6529 2827 6120 6263  heck=True)('a bc
-00019cc0: 2729 0a20 2020 2020 2020 2028 2761 2062  ').        ('a b
-00019cd0: 6327 2c20 276d 7573 7420 6265 2073 6c75  c', 'must be slu
-00019ce0: 6727 290a 2020 2020 2222 220a 0a20 2020  g').    """..   
-00019cf0: 2040 7374 6174 6963 6d65 7468 6f64 0a20   @staticmethod. 
-00019d00: 2020 2064 6566 2075 726c 6966 7928 7661     def urlify(va
-00019d10: 6c75 652c 206d 6178 6c65 6e3d 3830 2c20  lue, maxlen=80, 
-00019d20: 6b65 6570 5f75 6e64 6572 7363 6f72 6573  keep_underscores
-00019d30: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-00019d40: 2072 6574 7572 6e20 7572 6c69 6679 2876   return urlify(v
-00019d50: 616c 7565 2c20 6d61 786c 656e 2c20 6b65  alue, maxlen, ke
-00019d60: 6570 5f75 6e64 6572 7363 6f72 6573 290a  ep_underscores).
-00019d70: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-00019d80: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
-00019d90: 0a20 2020 2020 2020 206d 6178 6c65 6e3d  .        maxlen=
-00019da0: 3830 2c0a 2020 2020 2020 2020 6368 6563  80,.        chec
-00019db0: 6b3d 4661 6c73 652c 0a20 2020 2020 2020  k=False,.       
-00019dc0: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
-00019dd0: 4d75 7374 2062 6520 736c 7567 222c 0a20  Must be slug",. 
-00019de0: 2020 2020 2020 206b 6565 705f 756e 6465         keep_unde
-00019df0: 7273 636f 7265 733d 4661 6c73 652c 0a20  rscores=False,. 
-00019e00: 2020 2029 3a0a 2020 2020 2020 2020 7365     ):.        se
-00019e10: 6c66 2e6d 6178 6c65 6e20 3d20 6d61 786c  lf.maxlen = maxl
-00019e20: 656e 0a20 2020 2020 2020 2073 656c 662e  en.        self.
-00019e30: 6368 6563 6b20 3d20 6368 6563 6b0a 2020  check = check.  
-00019e40: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
-00019e50: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
-00019e60: 5f6d 6573 7361 6765 0a20 2020 2020 2020  _message.       
-00019e70: 2073 656c 662e 6b65 6570 5f75 6e64 6572   self.keep_under
-00019e80: 7363 6f72 6573 203d 206b 6565 705f 756e  scores = keep_un
-00019e90: 6465 7273 636f 7265 730a 0a20 2020 2064  derscores..    d
-00019ea0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-00019eb0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-00019ec0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-00019ed0: 2020 6966 2073 656c 662e 6368 6563 6b20    if self.check 
-00019ee0: 616e 6420 7661 6c75 6520 213d 2075 726c  and value != url
-00019ef0: 6966 7928 7661 6c75 652c 2073 656c 662e  ify(value, self.
-00019f00: 6d61 786c 656e 2c20 7365 6c66 2e6b 6565  maxlen, self.kee
-00019f10: 705f 756e 6465 7273 636f 7265 7329 3a0a  p_underscores):.
-00019f20: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00019f30: 6520 5661 6c69 6461 7469 6f6e 4572 726f  e ValidationErro
-00019f40: 7228 7365 6c66 2e74 7261 6e73 6c61 746f  r(self.translato
-00019f50: 7228 7365 6c66 2e65 7272 6f72 5f6d 6573  r(self.error_mes
-00019f60: 7361 6765 2929 0a20 2020 2020 2020 2072  sage)).        r
-00019f70: 6574 7572 6e20 7572 6c69 6679 2876 616c  eturn urlify(val
-00019f80: 7565 2c20 7365 6c66 2e6d 6178 6c65 6e2c  ue, self.maxlen,
-00019f90: 2073 656c 662e 6b65 6570 5f75 6e64 6572   self.keep_under
-00019fa0: 7363 6f72 6573 290a 0a0a 636c 6173 7320  scores)...class 
-00019fb0: 414e 595f 4f46 2856 616c 6964 6174 6f72  ANY_OF(Validator
-00019fc0: 293a 0a20 2020 2022 2222 0a20 2020 2054  ):.    """.    T
-00019fd0: 6573 7473 2069 6620 616e 7920 6f66 2074  ests if any of t
-00019fe0: 6865 2076 616c 6964 6174 6f72 7320 696e  he validators in
-00019ff0: 2061 206c 6973 7420 7265 7475 726e 7320   a list returns 
-0001a000: 7375 6363 6573 7366 756c 6c79 3a3a 0a0a  successfully::..
-0001a010: 2020 2020 2020 2020 3e3e 3e20 414e 595f          >>> ANY_
-0001a020: 4f46 285b 4953 5f45 4d41 494c 2829 2c49  OF([IS_EMAIL(),I
-0001a030: 535f 414c 5048 414e 554d 4552 4943 2829  S_ALPHANUMERIC()
-0001a040: 5d29 2827 6140 622e 636f 2729 0a20 2020  ])('a@b.co').   
-0001a050: 2020 2020 2028 2761 4062 2e63 6f27 2c20       ('a@b.co', 
-0001a060: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
-0001a070: 3e20 414e 595f 4f46 285b 4953 5f45 4d41  > ANY_OF([IS_EMA
-0001a080: 494c 2829 2c49 535f 414c 5048 414e 554d  IL(),IS_ALPHANUM
-0001a090: 4552 4943 2829 5d29 2827 6162 636f 2729  ERIC()])('abco')
-0001a0a0: 0a20 2020 2020 2020 2028 2761 6263 6f27  .        ('abco'
-0001a0b0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-0001a0c0: 3e3e 3e20 414e 595f 4f46 285b 4953 5f45  >>> ANY_OF([IS_E
-0001a0d0: 4d41 494c 2829 2c49 535f 414c 5048 414e  MAIL(),IS_ALPHAN
-0001a0e0: 554d 4552 4943 2829 5d29 2827 4061 622e  UMERIC()])('@ab.
-0001a0f0: 636f 2729 0a20 2020 2020 2020 2028 2740  co').        ('@
-0001a100: 6162 2e63 6f27 2c20 2765 6e74 6572 206f  ab.co', 'enter o
-0001a110: 6e6c 7920 6c65 7474 6572 732c 206e 756d  nly letters, num
-0001a120: 6265 7273 2c20 616e 6420 756e 6465 7273  bers, and unders
-0001a130: 636f 7265 2729 0a20 2020 2020 2020 203e  core').        >
-0001a140: 3e3e 2041 4e59 5f4f 4628 5b49 535f 414c  >> ANY_OF([IS_AL
-0001a150: 5048 414e 554d 4552 4943 2829 2c49 535f  PHANUMERIC(),IS_
-0001a160: 454d 4149 4c28 295d 2928 2740 6162 2e63  EMAIL()])('@ab.c
-0001a170: 6f27 290a 2020 2020 2020 2020 2827 4061  o').        ('@a
-0001a180: 622e 636f 272c 2027 656e 7465 7220 6120  b.co', 'enter a 
-0001a190: 7661 6c69 6420 656d 6169 6c20 6164 6472  valid email addr
-0001a1a0: 6573 7327 290a 0a20 2020 2022 2222 0a0a  ess')..    """..
-0001a1b0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0001a1c0: 2873 656c 662c 2073 7562 732c 2065 7272  (self, subs, err
-0001a1d0: 6f72 5f6d 6573 7361 6765 3d4e 6f6e 6529  or_message=None)
-0001a1e0: 3a0a 2020 2020 2020 2020 7365 6c66 2e73  :.        self.s
-0001a1f0: 7562 7320 3d20 7375 6273 0a20 2020 2020  ubs = subs.     
-0001a200: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
-0001a210: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
-0001a220: 7373 6167 650a 0a20 2020 2064 6566 2076  ssage..    def v
-0001a230: 616c 6964 6174 6528 7365 6c66 2c20 7661  alidate(self, va
-0001a240: 6c75 652c 2072 6563 6f72 645f 6964 3d4e  lue, record_id=N
-0001a250: 6f6e 6529 3a0a 2020 2020 2020 2020 666f  one):.        fo
-0001a260: 7220 7661 6c69 6461 746f 7220 696e 2073  r validator in s
-0001a270: 656c 662e 7375 6273 3a0a 2020 2020 2020  elf.subs:.      
-0001a280: 2020 2020 2020 762c 2065 203d 2076 616c        v, e = val
-0001a290: 6964 6174 6f72 2876 616c 7565 290a 2020  idator(value).  
-0001a2a0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-0001a2b0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-0001a2c0: 2020 2020 7265 7475 726e 2076 0a20 2020      return v.   
-0001a2d0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-0001a2e0: 6174 696f 6e45 7272 6f72 2865 290a 0a20  ationError(e).. 
-0001a2f0: 2020 2064 6566 2066 6f72 6d61 7474 6572     def formatter
-0001a300: 2873 656c 662c 2076 616c 7565 293a 0a20  (self, value):. 
-0001a310: 2020 2020 2020 2023 2055 7365 2074 6865         # Use the
-0001a320: 2066 6f72 6d61 7474 6572 206f 6620 7468   formatter of th
-0001a330: 6520 6669 7273 7420 7375 6276 616c 6964  e first subvalid
-0001a340: 6174 6f72 0a20 2020 2020 2020 2023 2074  ator.        # t
-0001a350: 6861 7420 7661 6c69 6461 7465 7320 7468  hat validates th
-0001a360: 6520 7661 6c75 6520 616e 6420 6861 7320  e value and has 
-0001a370: 6120 666f 726d 6174 7465 720a 2020 2020  a formatter.    
-0001a380: 2020 2020 666f 7220 7661 6c69 6461 746f      for validato
-0001a390: 7220 696e 2073 656c 662e 7375 6273 3a0a  r in self.subs:.
-0001a3a0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
-0001a3b0: 6173 6174 7472 2876 616c 6964 6174 6f72  asattr(validator
-0001a3c0: 2c20 2266 6f72 6d61 7474 6572 2229 2061  , "formatter") a
-0001a3d0: 6e64 2076 616c 6964 6174 6f72 2876 616c  nd validator(val
-0001a3e0: 7565 295b 315d 2069 7320 4e6f 6e65 3a0a  ue)[1] is None:.
-0001a3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a400: 7265 7475 726e 2076 616c 6964 6174 6f72  return validator
-0001a410: 2e66 6f72 6d61 7474 6572 2876 616c 7565  .formatter(value
-0001a420: 290a 0a0a 636c 6173 7320 4953 5f45 4d50  )...class IS_EMP
-0001a430: 5459 5f4f 5228 5661 6c69 6461 746f 7229  TY_OR(Validator)
-0001a440: 3a0a 2020 2020 2222 220a 2020 2020 4475  :.    """.    Du
-0001a450: 6d6d 7920 636c 6173 7320 666f 7220 7465  mmy class for te
-0001a460: 7374 696e 6720 4953 5f45 4d50 5459 5f4f  sting IS_EMPTY_O
-0001a470: 523a 3a0a 0a20 2020 2020 2020 203e 3e3e  R::..        >>>
-0001a480: 2049 535f 454d 5054 595f 4f52 2849 535f   IS_EMPTY_OR(IS_
-0001a490: 454d 4149 4c28 2929 2827 6162 6340 6465  EMAIL())('abc@de
-0001a4a0: 662e 636f 6d27 290a 2020 2020 2020 2020  f.com').        
-0001a4b0: 2827 6162 6340 6465 662e 636f 6d27 2c20  ('abc@def.com', 
-0001a4c0: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
-0001a4d0: 3e20 4953 5f45 4d50 5459 5f4f 5228 4953  > IS_EMPTY_OR(IS
-0001a4e0: 5f45 4d41 494c 2829 2928 2720 2020 2729  _EMAIL())('   ')
-0001a4f0: 0a20 2020 2020 2020 2028 4e6f 6e65 2c20  .        (None, 
-0001a500: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
-0001a510: 3e20 4953 5f45 4d50 5459 5f4f 5228 4953  > IS_EMPTY_OR(IS
-0001a520: 5f45 4d41 494c 2829 2c20 6e75 6c6c 3d27  _EMAIL(), null='
-0001a530: 6162 6327 2928 2720 2020 2729 0a20 2020  abc')('   ').   
-0001a540: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
-0001a550: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-0001a560: 535f 454d 5054 595f 4f52 2849 535f 454d  S_EMPTY_OR(IS_EM
-0001a570: 4149 4c28 292c 206e 756c 6c3d 2761 6263  AIL(), null='abc
-0001a580: 272c 2065 6d70 7479 5f72 6567 6578 3d27  ', empty_regex='
-0001a590: 6465 6627 2928 2764 6566 2729 0a20 2020  def')('def').   
-0001a5a0: 2020 2020 2028 2761 6263 272c 204e 6f6e       ('abc', Non
-0001a5b0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
-0001a5c0: 535f 454d 5054 595f 4f52 2849 535f 454d  S_EMPTY_OR(IS_EM
-0001a5d0: 4149 4c28 2929 2827 6162 6327 290a 2020  AIL())('abc').  
-0001a5e0: 2020 2020 2020 2827 6162 6327 2c20 2765        ('abc', 'e
-0001a5f0: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
-0001a600: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
-0001a610: 2020 2020 203e 3e3e 2049 535f 454d 5054       >>> IS_EMPT
-0001a620: 595f 4f52 2849 535f 454d 4149 4c28 2929  Y_OR(IS_EMAIL())
-0001a630: 2827 2061 6263 2027 290a 2020 2020 2020  (' abc ').      
-0001a640: 2020 2827 6162 6327 2c20 2765 6e74 6572    ('abc', 'enter
-0001a650: 2061 2076 616c 6964 2065 6d61 696c 2061   a valid email a
-0001a660: 6464 7265 7373 2729 0a20 2020 2022 2222  ddress').    """
-0001a670: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-0001a680: 5f5f 2873 656c 662c 206f 7468 6572 2c20  __(self, other, 
-0001a690: 6e75 6c6c 3d4e 6f6e 652c 2065 6d70 7479  null=None, empty
-0001a6a0: 5f72 6567 6578 3d4e 6f6e 6529 3a0a 2020  _regex=None):.  
-0001a6b0: 2020 2020 2020 2873 656c 662e 6f74 6865        (self.othe
-0001a6c0: 722c 2073 656c 662e 6e75 6c6c 2920 3d20  r, self.null) = 
-0001a6d0: 286f 7468 6572 2c20 6e75 6c6c 290a 2020  (other, null).  
-0001a6e0: 2020 2020 2020 6966 2065 6d70 7479 5f72        if empty_r
-0001a6f0: 6567 6578 2069 7320 6e6f 7420 4e6f 6e65  egex is not None
-0001a700: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0001a710: 6c66 2e65 6d70 7479 5f72 6567 6578 203d  lf.empty_regex =
-0001a720: 2072 652e 636f 6d70 696c 6528 656d 7074   re.compile(empt
-0001a730: 795f 7265 6765 7829 0a20 2020 2020 2020  y_regex).       
-0001a740: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001a750: 2020 2073 656c 662e 656d 7074 795f 7265     self.empty_re
-0001a760: 6765 7820 3d20 4e6f 6e65 0a20 2020 2020  gex = None.     
-0001a770: 2020 2069 6620 6861 7361 7474 7228 6f74     if hasattr(ot
-0001a780: 6865 722c 2022 6d75 6c74 6970 6c65 2229  her, "multiple")
-0001a790: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0001a7a0: 6c66 2e6d 756c 7469 706c 6520 3d20 6f74  lf.multiple = ot
-0001a7b0: 6865 722e 6d75 6c74 6970 6c65 0a20 2020  her.multiple.   
-0001a7c0: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
-0001a7d0: 6f74 6865 722c 2022 6f70 7469 6f6e 7322  other, "options"
-0001a7e0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-0001a7f0: 656c 662e 6f70 7469 6f6e 7320 3d20 7365  elf.options = se
-0001a800: 6c66 2e5f 6f70 7469 6f6e 730a 0a20 2020  lf._options..   
-0001a810: 2064 6566 205f 6f70 7469 6f6e 7328 7365   def _options(se
-0001a820: 6c66 2c20 2a61 7267 732c 202a 2a6b 7761  lf, *args, **kwa
-0001a830: 7267 7329 3a0a 2020 2020 2020 2020 6f70  rgs):.        op
-0001a840: 7469 6f6e 7320 3d20 7365 6c66 2e6f 7468  tions = self.oth
-0001a850: 6572 2e6f 7074 696f 6e73 282a 6172 6773  er.options(*args
-0001a860: 2c20 2a2a 6b77 6172 6773 290a 2020 2020  , **kwargs).    
-0001a870: 2020 2020 6966 2028 6e6f 7420 6f70 7469      if (not opti
-0001a880: 6f6e 7320 6f72 206f 7074 696f 6e73 5b30  ons or options[0
-0001a890: 5d5b 305d 2021 3d20 2222 2920 616e 6420  ][0] != "") and 
-0001a8a0: 6e6f 7420 7365 6c66 2e6d 756c 7469 706c  not self.multipl
-0001a8b0: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
-0001a8c0: 7074 696f 6e73 2e69 6e73 6572 7428 302c  ptions.insert(0,
-0001a8d0: 2028 2222 2c20 2222 2929 0a20 2020 2020   ("", "")).     
-0001a8e0: 2020 2072 6574 7572 6e20 6f70 7469 6f6e     return option
-0001a8f0: 730a 0a20 2020 2064 6566 2073 6574 5f73  s..    def set_s
-0001a900: 656c 665f 6964 2873 656c 662c 2069 6429  elf_id(self, id)
-0001a910: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
-0001a920: 6e73 7461 6e63 6528 7365 6c66 2e6f 7468  nstance(self.oth
-0001a930: 6572 2c20 286c 6973 742c 2074 7570 6c65  er, (list, tuple
-0001a940: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0001a950: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
-0001a960: 2e6f 7468 6572 3a0a 2020 2020 2020 2020  .other:.        
-0001a970: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-0001a980: 7472 2869 7465 6d2c 2022 7365 745f 7365  tr(item, "set_se
-0001a990: 6c66 5f69 6422 293a 0a20 2020 2020 2020  lf_id"):.       
-0001a9a0: 2020 2020 2020 2020 2020 2020 2069 7465               ite
-0001a9b0: 6d2e 7365 745f 7365 6c66 5f69 6428 6964  m.set_self_id(id
-0001a9c0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0001a9d0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
-0001a9e0: 6173 6174 7472 2873 656c 662e 6f74 6865  asattr(self.othe
-0001a9f0: 722c 2022 7365 745f 7365 6c66 5f69 6422  r, "set_self_id"
-0001aa00: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001aa10: 2020 2073 656c 662e 6f74 6865 722e 7365     self.other.se
-0001aa20: 745f 7365 6c66 5f69 6428 6964 290a 0a20  t_self_id(id).. 
-0001aa30: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
-0001aa40: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
-0001aa50: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
-0001aa60: 2020 2020 2020 7661 6c75 652c 2065 6d70        value, emp
-0001aa70: 7479 203d 2069 735f 656d 7074 7928 7661  ty = is_empty(va
-0001aa80: 6c75 652c 2065 6d70 7479 5f72 6567 6578  lue, empty_regex
-0001aa90: 3d73 656c 662e 656d 7074 795f 7265 6765  =self.empty_rege
-0001aaa0: 7829 0a20 2020 2020 2020 2069 6620 656d  x).        if em
-0001aab0: 7074 793a 0a20 2020 2020 2020 2020 2020  pty:.           
-0001aac0: 2072 6574 7572 6e20 7365 6c66 2e6e 756c   return self.nul
-0001aad0: 6c0a 2020 2020 2020 2020 6966 2069 7369  l.        if isi
-0001aae0: 6e73 7461 6e63 6528 7365 6c66 2e6f 7468  nstance(self.oth
-0001aaf0: 6572 2c20 286c 6973 742c 2074 7570 6c65  er, (list, tuple
-0001ab00: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-0001ab10: 666f 7220 6974 656d 2069 6e20 7365 6c66  for item in self
-0001ab20: 2e6f 7468 6572 3a0a 2020 2020 2020 2020  .other:.        
-0001ab30: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-0001ab40: 7661 6c69 6461 746f 725f 6361 6c6c 6572  validator_caller
-0001ab50: 2869 7465 6d2c 2076 616c 7565 2c20 7265  (item, value, re
-0001ab60: 636f 7264 5f69 6429 0a20 2020 2020 2020  cord_id).       
-0001ab70: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-0001ab80: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
-0001ab90: 2076 616c 6964 6174 6f72 5f63 616c 6c65   validator_calle
-0001aba0: 7228 7365 6c66 2e6f 7468 6572 2c20 7661  r(self.other, va
-0001abb0: 6c75 652c 2072 6563 6f72 645f 6964 290a  lue, record_id).
-0001abc0: 0a20 2020 2064 6566 2066 6f72 6d61 7474  .    def formatt
-0001abd0: 6572 2873 656c 662c 2076 616c 7565 293a  er(self, value):
-0001abe0: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-0001abf0: 7474 7228 7365 6c66 2e6f 7468 6572 2c20  ttr(self.other, 
-0001ac00: 2266 6f72 6d61 7474 6572 2229 3a0a 2020  "formatter"):.  
-0001ac10: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001ac20: 2073 656c 662e 6f74 6865 722e 666f 726d   self.other.form
-0001ac30: 6174 7465 7228 7661 6c75 6529 0a20 2020  atter(value).   
-0001ac40: 2020 2020 2072 6574 7572 6e20 7661 6c75       return valu
-0001ac50: 650a 0a0a 4953 5f4e 554c 4c5f 4f52 203d  e...IS_NULL_OR =
-0001ac60: 2049 535f 454d 5054 595f 4f52 2020 2320   IS_EMPTY_OR  # 
-0001ac70: 666f 7220 6261 636b 7761 7264 2063 6f6d  for backward com
-0001ac80: 7061 7469 6269 6c69 7479 0a0a 0a63 6c61  patibility...cla
-0001ac90: 7373 2043 4c45 414e 5550 2856 616c 6964  ss CLEANUP(Valid
-0001aca0: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
-0001acb0: 2020 2045 7861 6d70 6c65 733a 0a20 2020     Examples:.   
-0001acc0: 2020 2020 2055 7365 2061 733a 3a0a 0a20       Use as::.. 
-0001acd0: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-0001ace0: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-0001acf0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-0001ad00: 7569 7265 733d 434c 4541 4e55 5028 2929  uires=CLEANUP())
-0001ad10: 0a0a 2020 2020 7265 6d6f 7665 7320 7370  ..    removes sp
-0001ad20: 6563 6961 6c20 6368 6172 6163 7465 7273  ecial characters
-0001ad30: 206f 6e20 7661 6c69 6461 7469 6f6e 0a20   on validation. 
-0001ad40: 2020 2022 2222 0a0a 2020 2020 5245 4745     """..    REGE
-0001ad50: 585f 434c 4541 4e55 5020 3d20 225b 5e5c  X_CLEANUP = "[^\
-0001ad60: 7830 395c 7830 615c 7830 645c 7832 302d  x09\x0a\x0d\x20-
-0001ad70: 5c78 3765 5d22 0a0a 2020 2020 6465 6620  \x7e]"..    def 
-0001ad80: 5f5f 696e 6974 5f5f 2873 656c 662c 2072  __init__(self, r
-0001ad90: 6567 6578 3d4e 6f6e 6529 3a0a 2020 2020  egex=None):.    
-0001ada0: 2020 2020 7365 6c66 2e72 6567 6578 203d      self.regex =
-0001adb0: 2028 0a20 2020 2020 2020 2020 2020 2072   (.            r
-0001adc0: 652e 636f 6d70 696c 6528 7365 6c66 2e52  e.compile(self.R
-0001add0: 4547 4558 5f43 4c45 414e 5550 2920 6966  EGEX_CLEANUP) if
-0001ade0: 2072 6567 6578 2069 7320 4e6f 6e65 2065   regex is None e
-0001adf0: 6c73 6520 7265 2e63 6f6d 7069 6c65 2872  lse re.compile(r
-0001ae00: 6567 6578 290a 2020 2020 2020 2020 290a  egex).        ).
-0001ae10: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
-0001ae20: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
-0001ae30: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
-0001ae40: 2020 2020 2020 2020 7620 3d20 7365 6c66          v = self
-0001ae50: 2e72 6567 6578 2e73 7562 2822 222c 2073  .regex.sub("", s
-0001ae60: 7472 2876 616c 7565 292e 7374 7269 7028  tr(value).strip(
-0001ae70: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-0001ae80: 6e20 760a 0a0a 6465 6620 7062 6b64 6632  n v...def pbkdf2
-0001ae90: 5f68 6578 2864 6174 612c 2073 616c 742c  _hex(data, salt,
-0001aea0: 2069 7465 7261 7469 6f6e 733d 3130 3030   iterations=1000
-0001aeb0: 2c20 6b65 796c 656e 3d32 342c 2068 6173  , keylen=24, has
-0001aec0: 6866 756e 633d 4e6f 6e65 293a 0a20 2020  hfunc=None):.   
-0001aed0: 2068 6173 6866 756e 6320 3d20 6861 7368   hashfunc = hash
-0001aee0: 6675 6e63 206f 7220 6861 7368 6c69 622e  func or hashlib.
-0001aef0: 7368 6131 0a20 2020 2068 6d61 6320 3d20  sha1.    hmac = 
-0001af00: 6861 7368 6c69 622e 7062 6b64 6632 5f68  hashlib.pbkdf2_h
-0001af10: 6d61 6328 0a20 2020 2020 2020 2068 6173  mac(.        has
-0001af20: 6866 756e 6328 292e 6e61 6d65 2c20 746f  hfunc().name, to
-0001af30: 5f62 7974 6573 2864 6174 6129 2c20 746f  _bytes(data), to
-0001af40: 5f62 7974 6573 2873 616c 7429 2c20 6974  _bytes(salt), it
-0001af50: 6572 6174 696f 6e73 2c20 6b65 796c 656e  erations, keylen
-0001af60: 0a20 2020 2029 0a20 2020 2072 6574 7572  .    ).    retur
-0001af70: 6e20 6269 6e61 7363 6969 2e68 6578 6c69  n binascii.hexli
-0001af80: 6679 2868 6d61 6329 0a0a 0a64 6566 2073  fy(hmac)...def s
-0001af90: 696d 706c 655f 6861 7368 2874 6578 742c  imple_hash(text,
-0001afa0: 206b 6579 3d22 222c 2073 616c 743d 2222   key="", salt=""
-0001afb0: 2c20 6469 6765 7374 5f61 6c67 3d22 6d64  , digest_alg="md
-0001afc0: 3522 293a 0a20 2020 2022 2222 4765 6e65  5"):.    """Gene
-0001afd0: 7261 7465 2068 6173 6820 7769 7468 2074  rate hash with t
-0001afe0: 6865 2067 6976 656e 2074 6578 7420 7573  he given text us
-0001aff0: 696e 6720 7468 6520 7370 6563 6966 6965  ing the specifie
-0001b000: 6420 6469 6765 7374 2061 6c67 6f72 6974  d digest algorit
-0001b010: 686d 2e22 2222 0a20 2020 2074 6578 7420  hm.""".    text 
-0001b020: 3d20 746f 5f62 7974 6573 2874 6578 7429  = to_bytes(text)
-0001b030: 0a20 2020 206b 6579 203d 2074 6f5f 6279  .    key = to_by
-0001b040: 7465 7328 6b65 7929 0a20 2020 2073 616c  tes(key).    sal
-0001b050: 7420 3d20 746f 5f62 7974 6573 2873 616c  t = to_bytes(sal
-0001b060: 7429 0a20 2020 2069 6620 6e6f 7420 6469  t).    if not di
-0001b070: 6765 7374 5f61 6c67 3a0a 2020 2020 2020  gest_alg:.      
-0001b080: 2020 7261 6973 6520 5275 6e74 696d 6545    raise RuntimeE
-0001b090: 7272 6f72 2822 7369 6d70 6c65 5f68 6173  rror("simple_has
-0001b0a0: 6820 7769 7468 2064 6967 6573 745f 616c  h with digest_al
-0001b0b0: 673d 4e6f 6e65 2229 0a20 2020 2065 6c69  g=None").    eli
-0001b0c0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-0001b0d0: 2864 6967 6573 745f 616c 672c 2073 7472  (digest_alg, str
-0001b0e0: 293a 2020 2320 6d61 6e75 616c 2061 7070  ):  # manual app
-0001b0f0: 726f 6163 680a 2020 2020 2020 2020 6820  roach.        h 
-0001b100: 3d20 6469 6765 7374 5f61 6c67 2874 6578  = digest_alg(tex
-0001b110: 7420 2b20 6b65 7920 2b20 7361 6c74 290a  t + key + salt).
-0001b120: 2020 2020 656c 6966 2064 6967 6573 745f      elif digest_
-0001b130: 616c 672e 7374 6172 7473 7769 7468 2822  alg.startswith("
-0001b140: 7062 6b64 6632 2229 3a20 2023 206c 6174  pbkdf2"):  # lat
-0001b150: 6573 7420 616e 6420 636f 6f6c 6573 7421  est and coolest!
-0001b160: 0a20 2020 2020 2020 2069 7465 7261 7469  .        iterati
-0001b170: 6f6e 732c 206b 6579 6c65 6e2c 2061 6c67  ons, keylen, alg
-0001b180: 203d 2064 6967 6573 745f 616c 675b 373a   = digest_alg[7:
-0001b190: 2d31 5d2e 7370 6c69 7428 222c 2229 0a20  -1].split(","). 
-0001b1a0: 2020 2020 2020 2072 6574 7572 6e20 746f         return to
-0001b1b0: 5f6e 6174 6976 6528 0a20 2020 2020 2020  _native(.       
-0001b1c0: 2020 2020 2070 626b 6466 325f 6865 7828       pbkdf2_hex(
-0001b1d0: 7465 7874 2c20 7361 6c74 2c20 696e 7428  text, salt, int(
-0001b1e0: 6974 6572 6174 696f 6e73 292c 2069 6e74  iterations), int
-0001b1f0: 286b 6579 6c65 6e29 2c20 6765 745f 6469  (keylen), get_di
-0001b200: 6765 7374 2861 6c67 2929 0a20 2020 2020  gest(alg)).     
-0001b210: 2020 2029 0a20 2020 2065 6c69 6620 6b65     ).    elif ke
-0001b220: 793a 2020 2320 7573 6520 686d 6163 0a20  y:  # use hmac. 
-0001b230: 2020 2020 2020 2064 6967 6573 745f 616c         digest_al
-0001b240: 6720 3d20 6765 745f 6469 6765 7374 2864  g = get_digest(d
-0001b250: 6967 6573 745f 616c 6729 0a20 2020 2020  igest_alg).     
-0001b260: 2020 2068 203d 2068 6d61 632e 6e65 7728     h = hmac.new(
-0001b270: 6b65 7920 2b20 7361 6c74 2c20 7465 7874  key + salt, text
-0001b280: 2c20 6469 6765 7374 5f61 6c67 290a 2020  , digest_alg).  
-0001b290: 2020 656c 7365 3a20 2023 2063 6f6d 7061    else:  # compa
-0001b2a0: 7469 626c 6520 7769 7468 2074 6869 7264  tible with third
-0001b2b0: 2070 6172 7479 2073 7973 7465 6d73 0a20   party systems. 
-0001b2c0: 2020 2020 2020 2068 203d 2067 6574 5f64         h = get_d
-0001b2d0: 6967 6573 7428 6469 6765 7374 5f61 6c67  igest(digest_alg
-0001b2e0: 2928 290a 2020 2020 2020 2020 682e 7570  )().        h.up
-0001b2f0: 6461 7465 2874 6578 7420 2b20 7361 6c74  date(text + salt
-0001b300: 290a 2020 2020 7265 7475 726e 2068 2e68  ).    return h.h
-0001b310: 6578 6469 6765 7374 2829 0a0a 0a64 6566  exdigest()...def
-0001b320: 2067 6574 5f64 6967 6573 7428 7661 6c75   get_digest(valu
-0001b330: 6529 3a0a 2020 2020 2222 2252 6574 7572  e):.    """Retur
-0001b340: 6e20 6120 6861 7368 6c69 6220 6469 6765  n a hashlib dige
-0001b350: 7374 2061 6c67 6f72 6974 686d 2066 726f  st algorithm fro
-0001b360: 6d20 6120 7374 7269 6e67 2e22 2222 0a20  m a string.""". 
-0001b370: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001b380: 2876 616c 7565 2c20 7374 7229 3a0a 2020  (value, str):.  
-0001b390: 2020 2020 2020 7661 6c75 6520 3d20 7661        value = va
-0001b3a0: 6c75 652e 6c6f 7765 7228 290a 2020 2020  lue.lower().    
-0001b3b0: 2020 2020 6966 2076 616c 7565 206e 6f74      if value not
-0001b3c0: 2069 6e20 2822 6d64 3522 2c20 2273 6861   in ("md5", "sha
-0001b3d0: 3122 2c20 2273 6861 3232 3422 2c20 2273  1", "sha224", "s
-0001b3e0: 6861 3235 3622 2c20 2273 6861 3338 3422  ha256", "sha384"
-0001b3f0: 2c20 2273 6861 3531 3222 293a 0a20 2020  , "sha512"):.   
-0001b400: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-0001b410: 616c 7565 4572 726f 7228 2249 6e76 616c  alueError("Inval
-0001b420: 6964 2064 6967 6573 7420 616c 676f 7269  id digest algori
-0001b430: 7468 6d3a 2025 7322 2025 2076 616c 7565  thm: %s" % value
-0001b440: 290a 2020 2020 2020 2020 7661 6c75 6520  ).        value 
-0001b450: 3d20 6765 7461 7474 7228 6861 7368 6c69  = getattr(hashli
-0001b460: 622c 2076 616c 7565 290a 2020 2020 7265  b, value).    re
-0001b470: 7475 726e 2076 616c 7565 0a0a 0a44 4947  turn value...DIG
-0001b480: 4553 545f 414c 475f 4259 5f53 495a 4520  EST_ALG_BY_SIZE 
-0001b490: 3d20 7b0a 2020 2020 3132 3820 2f2f 2034  = {.    128 // 4
-0001b4a0: 3a20 226d 6435 222c 0a20 2020 2031 3630  : "md5",.    160
-0001b4b0: 202f 2f20 343a 2022 7368 6131 222c 0a20   // 4: "sha1",. 
-0001b4c0: 2020 2032 3234 202f 2f20 343a 2022 7368     224 // 4: "sh
-0001b4d0: 6132 3234 222c 0a20 2020 2032 3536 202f  a224",.    256 /
-0001b4e0: 2f20 343a 2022 7368 6132 3536 222c 0a20  / 4: "sha256",. 
-0001b4f0: 2020 2033 3834 202f 2f20 343a 2022 7368     384 // 4: "sh
-0001b500: 6133 3834 222c 0a20 2020 2035 3132 202f  a384",.    512 /
-0001b510: 2f20 343a 2022 7368 6135 3132 222c 0a7d  / 4: "sha512",.}
-0001b520: 0a0a 0a63 6c61 7373 204c 617a 7943 7279  ...class LazyCry
-0001b530: 7074 286f 626a 6563 7429 3a0a 2020 2020  pt(object):.    
-0001b540: 2222 220a 2020 2020 5374 6f72 6573 2061  """.    Stores a
-0001b550: 206c 617a 7920 7061 7373 776f 7264 2068   lazy password h
-0001b560: 6173 680a 2020 2020 2222 220a 0a20 2020  ash.    """..   
-0001b570: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
-0001b580: 6c66 2c20 6372 7970 742c 2070 6173 7377  lf, crypt, passw
-0001b590: 6f72 6429 3a0a 2020 2020 2020 2020 2222  ord):.        ""
-0001b5a0: 220a 2020 2020 2020 2020 6372 7970 7420  ".        crypt 
-0001b5b0: 6973 2061 6e20 696e 7374 616e 6365 206f  is an instance o
-0001b5c0: 6620 7468 6520 4352 5950 5420 7661 6c69  f the CRYPT vali
-0001b5d0: 6461 746f 722c 0a20 2020 2020 2020 2070  dator,.        p
-0001b5e0: 6173 7377 6f72 6420 6973 2074 6865 2070  assword is the p
-0001b5f0: 6173 7377 6f72 6420 6173 2069 6e73 6572  assword as inser
-0001b600: 7465 6420 6279 2074 6865 2075 7365 720a  ted by the user.
-0001b610: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001b620: 2020 2020 7365 6c66 2e63 7279 7074 203d      self.crypt =
-0001b630: 2063 7279 7074 0a20 2020 2020 2020 2073   crypt.        s
-0001b640: 656c 662e 7061 7373 776f 7264 203d 2070  elf.password = p
-0001b650: 6173 7377 6f72 640a 2020 2020 2020 2020  assword.        
-0001b660: 7365 6c66 2e63 7279 7074 6564 203d 204e  self.crypted = N
-0001b670: 6f6e 650a 0a20 2020 2064 6566 205f 5f73  one..    def __s
-0001b680: 7472 5f5f 2873 656c 6629 3a0a 2020 2020  tr__(self):.    
-0001b690: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001b6a0: 456e 6372 7970 7465 6420 7365 6c66 2e70  Encrypted self.p
-0001b6b0: 6173 7377 6f72 6420 616e 6420 6361 6368  assword and cach
-0001b6c0: 6573 2069 7420 696e 2073 656c 662e 6372  es it in self.cr
-0001b6d0: 7970 7465 642e 0a20 2020 2020 2020 2049  ypted..        I
-0001b6e0: 6620 7365 6c66 2e63 7279 7074 2e73 616c  f self.crypt.sal
-0001b6f0: 7420 7468 6520 6f75 7470 7574 2069 7320  t the output is 
-0001b700: 696e 2074 6865 2066 6f72 6d61 7420 3c61  in the format <a
-0001b710: 6c67 6f72 6974 686d 3e24 3c73 616c 743e  lgorithm>$<salt>
-0001b720: 243c 6861 7368 3e0a 0a20 2020 2020 2020  $<hash>..       
-0001b730: 2054 7279 2067 6574 2074 6865 2064 6967   Try get the dig
-0001b740: 6573 745f 616c 6720 6672 6f6d 2074 6865  est_alg from the
-0001b750: 206b 6579 2028 6966 2069 7420 6578 6973   key (if it exis
-0001b760: 7473 290a 2020 2020 2020 2020 656c 7365  ts).        else
-0001b770: 2061 7373 756d 6520 7468 6520 6465 6661   assume the defa
-0001b780: 756c 7420 6469 6765 7374 5f61 6c67 2e20  ult digest_alg. 
-0001b790: 4966 206e 6f74 206b 6579 2061 7420 616c  If not key at al
-0001b7a0: 6c2c 2073 6574 206b 6579 3d27 270a 0a20  l, set key=''.. 
-0001b7b0: 2020 2020 2020 2049 6620 6120 7361 6c74         If a salt
-0001b7c0: 2069 7320 7370 6563 6966 6965 6420 7573   is specified us
-0001b7d0: 6520 6974 2c20 6966 2073 616c 7420 6973  e it, if salt is
-0001b7e0: 2054 7275 652c 2073 6574 2073 616c 7420   True, set salt 
-0001b7f0: 746f 2075 7569 640a 2020 2020 2020 2020  to uuid.        
-0001b800: 2874 6869 7320 7368 6f75 6c64 2061 6c6c  (this should all
-0001b810: 2062 6520 6261 636b 7761 7264 2063 6f6d   be backward com
-0001b820: 7061 7469 626c 6529 0a0a 2020 2020 2020  patible)..      
-0001b830: 2020 4f70 7469 6f6e 733a 0a20 2020 2020    Options:.     
-0001b840: 2020 206b 6579 203d 2027 7575 6964 270a     key = 'uuid'.
-0001b850: 2020 2020 2020 2020 6b65 7920 3d20 276d          key = 'm
-0001b860: 6435 3a75 7569 6427 0a20 2020 2020 2020  d5:uuid'.       
-0001b870: 206b 6579 203d 2027 7368 6135 3132 3a75   key = 'sha512:u
-0001b880: 7569 6427 0a20 2020 2020 2020 202e 2e2e  uid'.        ...
-0001b890: 0a20 2020 2020 2020 206b 6579 203d 2027  .        key = '
-0001b8a0: 7062 6b64 6632 2831 3030 302c 3634 2c73  pbkdf2(1000,64,s
-0001b8b0: 6861 3531 3229 3a75 7569 6427 2031 3030  ha512):uuid' 100
-0001b8c0: 3020 6974 6572 6174 696f 6e73 2061 6e64  0 iterations and
-0001b8d0: 2036 3420 6368 6172 7320 6c65 6e67 7468   64 chars length
-0001b8e0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-0001b8f0: 2020 2020 2069 6620 7365 6c66 2e63 7279       if self.cry
-0001b900: 7074 6564 3a0a 2020 2020 2020 2020 2020  pted:.          
-0001b910: 2020 7265 7475 726e 2073 656c 662e 6372    return self.cr
-0001b920: 7970 7465 640a 2020 2020 2020 2020 6966  ypted.        if
-0001b930: 2073 656c 662e 6372 7970 742e 6b65 793a   self.crypt.key:
-0001b940: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001b950: 223a 2220 696e 2073 656c 662e 6372 7970  ":" in self.cryp
-0001b960: 742e 6b65 793a 0a20 2020 2020 2020 2020  t.key:.         
-0001b970: 2020 2020 2020 2064 6967 6573 745f 616c         digest_al
-0001b980: 672c 206b 6579 203d 2073 656c 662e 6372  g, key = self.cr
-0001b990: 7970 742e 6b65 792e 7370 6c69 7428 223a  ypt.key.split(":
-0001b9a0: 222c 2031 290a 2020 2020 2020 2020 2020  ", 1).          
-0001b9b0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001b9c0: 2020 2020 2020 2020 6469 6765 7374 5f61          digest_a
-0001b9d0: 6c67 2c20 6b65 7920 3d20 7365 6c66 2e63  lg, key = self.c
-0001b9e0: 7279 7074 2e64 6967 6573 745f 616c 672c  rypt.digest_alg,
-0001b9f0: 2073 656c 662e 6372 7970 742e 6b65 790a   self.crypt.key.
-0001ba00: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001ba10: 2020 2020 2020 2020 2020 6469 6765 7374            digest
-0001ba20: 5f61 6c67 2c20 6b65 7920 3d20 7365 6c66  _alg, key = self
-0001ba30: 2e63 7279 7074 2e64 6967 6573 745f 616c  .crypt.digest_al
-0001ba40: 672c 2022 220a 2020 2020 2020 2020 6966  g, "".        if
-0001ba50: 2073 656c 662e 6372 7970 742e 7361 6c74   self.crypt.salt
-0001ba60: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
-0001ba70: 2073 656c 662e 6372 7970 742e 7361 6c74   self.crypt.salt
-0001ba80: 2069 7320 5472 7565 3a0a 2020 2020 2020   is True:.      
-0001ba90: 2020 2020 2020 2020 2020 7361 6c74 203d            salt =
-0001baa0: 2073 7472 2875 7569 642e 7575 6964 3428   str(uuid.uuid4(
-0001bab0: 2929 2e72 6570 6c61 6365 2822 2d22 2c20  )).replace("-", 
-0001bac0: 2222 295b 2d31 363a 5d0a 2020 2020 2020  "")[-16:].      
-0001bad0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0001bae0: 2020 2020 2020 2020 2020 2020 7361 6c74              salt
-0001baf0: 203d 2073 656c 662e 6372 7970 742e 7361   = self.crypt.sa
-0001bb00: 6c74 0a20 2020 2020 2020 2065 6c73 653a  lt.        else:
-0001bb10: 0a20 2020 2020 2020 2020 2020 2073 616c  .            sal
-0001bb20: 7420 3d20 2222 0a20 2020 2020 2020 2068  t = "".        h
-0001bb30: 6173 6865 6420 3d20 7369 6d70 6c65 5f68  ashed = simple_h
-0001bb40: 6173 6828 7365 6c66 2e70 6173 7377 6f72  ash(self.passwor
-0001bb50: 642c 206b 6579 2c20 7361 6c74 2c20 6469  d, key, salt, di
-0001bb60: 6765 7374 5f61 6c67 290a 2020 2020 2020  gest_alg).      
-0001bb70: 2020 7365 6c66 2e63 7279 7074 6564 203d    self.crypted =
-0001bb80: 2022 2573 2425 7324 2573 2220 2520 2864   "%s$%s$%s" % (d
-0001bb90: 6967 6573 745f 616c 672c 2073 616c 742c  igest_alg, salt,
-0001bba0: 2068 6173 6865 6429 0a20 2020 2020 2020   hashed).       
-0001bbb0: 2072 6574 7572 6e20 7365 6c66 2e63 7279   return self.cry
-0001bbc0: 7074 6564 0a0a 2020 2020 6465 6620 5f5f  pted..    def __
-0001bbd0: 6571 5f5f 2873 656c 662c 2073 746f 7265  eq__(self, store
-0001bbe0: 645f 7061 7373 776f 7264 293a 0a20 2020  d_password):.   
-0001bbf0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001bc00: 2063 6f6d 7061 7265 7320 7468 6520 6375   compares the cu
-0001bc10: 7272 656e 7420 6c61 7a79 2063 7279 7074  rrent lazy crypt
-0001bc20: 6564 2070 6173 7377 6f72 6420 7769 7468  ed password with
-0001bc30: 2061 2073 746f 7265 6420 7061 7373 776f   a stored passwo
-0001bc40: 7264 0a20 2020 2020 2020 2022 2222 0a0a  rd.        """..
-0001bc50: 2020 2020 2020 2020 2320 4c61 7a79 4372          # LazyCr
-0001bc60: 7970 7420 6f62 6a65 6374 7320 636f 6d70  ypt objects comp
-0001bc70: 6172 6973 6f6e 0a20 2020 2020 2020 2069  arison.        i
-0001bc80: 6620 6973 696e 7374 616e 6365 2873 746f  f isinstance(sto
-0001bc90: 7265 645f 7061 7373 776f 7264 2c20 7365  red_password, se
-0001bca0: 6c66 2e5f 5f63 6c61 7373 5f5f 293a 0a20  lf.__class__):. 
-0001bcb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001bcc0: 6e20 2873 656c 6620 6973 2073 746f 7265  n (self is store
-0001bcd0: 645f 7061 7373 776f 7264 2920 6f72 2028  d_password) or (
-0001bce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001bcf0: 2028 7365 6c66 2e63 7279 7074 2e6b 6579   (self.crypt.key
-0001bd00: 203d 3d20 7374 6f72 6564 5f70 6173 7377   == stored_passw
-0001bd10: 6f72 642e 6372 7970 742e 6b65 7929 0a20  ord.crypt.key). 
-0001bd20: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001bd30: 6e64 2028 7365 6c66 2e70 6173 7377 6f72  nd (self.passwor
-0001bd40: 6420 3d3d 2073 746f 7265 645f 7061 7373  d == stored_pass
-0001bd50: 776f 7264 2e70 6173 7377 6f72 6429 0a20  word.password). 
-0001bd60: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-0001bd70: 2020 2020 2020 6966 2073 656c 662e 6372        if self.cr
-0001bd80: 7970 742e 6b65 793a 0a20 2020 2020 2020  ypt.key:.       
-0001bd90: 2020 2020 2069 6620 223a 2220 696e 2073       if ":" in s
-0001bda0: 656c 662e 6372 7970 742e 6b65 793a 0a20  elf.crypt.key:. 
-0001bdb0: 2020 2020 2020 2020 2020 2020 2020 206b                 k
-0001bdc0: 6579 203d 2073 656c 662e 6372 7970 742e  ey = self.crypt.
-0001bdd0: 6b65 792e 7370 6c69 7428 223a 2229 5b31  key.split(":")[1
-0001bde0: 5d0a 2020 2020 2020 2020 2020 2020 656c  ].            el
-0001bdf0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001be00: 2020 2020 6b65 7920 3d20 7365 6c66 2e63      key = self.c
-0001be10: 7279 7074 2e6b 6579 0a20 2020 2020 2020  rypt.key.       
-0001be20: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001be30: 2020 206b 6579 203d 2022 220a 2020 2020     key = "".    
-0001be40: 2020 2020 6966 2073 746f 7265 645f 7061      if stored_pa
-0001be50: 7373 776f 7264 2069 7320 4e6f 6e65 3a0a  ssword is None:.
-0001be60: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001be70: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-0001be80: 2065 6c69 6620 7374 6f72 6564 5f70 6173   elif stored_pas
-0001be90: 7377 6f72 642e 636f 756e 7428 2224 2229  sword.count("$")
-0001bea0: 203d 3d20 323a 0a20 2020 2020 2020 2020   == 2:.         
-0001beb0: 2020 2028 6469 6765 7374 5f61 6c67 2c20     (digest_alg, 
-0001bec0: 7361 6c74 2c20 6861 7368 2920 3d20 7374  salt, hash) = st
-0001bed0: 6f72 6564 5f70 6173 7377 6f72 642e 7370  ored_password.sp
-0001bee0: 6c69 7428 2224 2229 0a20 2020 2020 2020  lit("$").       
-0001bef0: 2020 2020 2068 203d 2073 696d 706c 655f       h = simple_
-0001bf00: 6861 7368 2873 656c 662e 7061 7373 776f  hash(self.passwo
-0001bf10: 7264 2c20 6b65 792c 2073 616c 742c 2064  rd, key, salt, d
-0001bf20: 6967 6573 745f 616c 6729 0a20 2020 2020  igest_alg).     
-0001bf30: 2020 2020 2020 2074 656d 705f 7061 7373         temp_pass
-0001bf40: 203d 2022 2573 2425 7324 2573 2220 2520   = "%s$%s$%s" % 
-0001bf50: 2864 6967 6573 745f 616c 672c 2073 616c  (digest_alg, sal
-0001bf60: 742c 2068 290a 2020 2020 2020 2020 656c  t, h).        el
-0001bf70: 7365 3a20 2023 206e 6f20 7361 6c74 696e  se:  # no saltin
-0001bf80: 670a 2020 2020 2020 2020 2020 2020 2320  g.            # 
-0001bf90: 6775 6573 7320 6469 6765 7374 5f61 6c67  guess digest_alg
-0001bfa0: 0a20 2020 2020 2020 2020 2020 2064 6967  .            dig
-0001bfb0: 6573 745f 616c 6720 3d20 4449 4745 5354  est_alg = DIGEST
-0001bfc0: 5f41 4c47 5f42 595f 5349 5a45 2e67 6574  _ALG_BY_SIZE.get
-0001bfd0: 286c 656e 2873 746f 7265 645f 7061 7373  (len(stored_pass
-0001bfe0: 776f 7264 292c 204e 6f6e 6529 0a20 2020  word), None).   
-0001bff0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0001c000: 6469 6765 7374 5f61 6c67 3a0a 2020 2020  digest_alg:.    
-0001c010: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0001c020: 726e 2046 616c 7365 0a20 2020 2020 2020  rn False.       
-0001c030: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001c040: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
-0001c050: 7061 7373 203d 2073 696d 706c 655f 6861  pass = simple_ha
-0001c060: 7368 2873 656c 662e 7061 7373 776f 7264  sh(self.password
-0001c070: 2c20 6b65 792c 2022 222c 2064 6967 6573  , key, "", diges
-0001c080: 745f 616c 6729 0a20 2020 2020 2020 2072  t_alg).        r
-0001c090: 6574 7572 6e20 7465 6d70 5f70 6173 7320  eturn temp_pass 
-0001c0a0: 3d3d 2073 746f 7265 645f 7061 7373 776f  == stored_passwo
-0001c0b0: 7264 0a0a 2020 2020 6465 6620 5f5f 6e65  rd..    def __ne
-0001c0c0: 5f5f 2873 656c 662c 206f 7468 6572 293a  __(self, other):
-0001c0d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001c0e0: 6e6f 7420 7365 6c66 2e5f 5f65 715f 5f28  not self.__eq__(
-0001c0f0: 6f74 6865 7229 0a0a 0a63 6c61 7373 2043  other)...class C
-0001c100: 5259 5054 2856 616c 6964 6174 6f72 293a  RYPT(Validator):
-0001c110: 0a20 2020 2022 2222 0a20 2020 2045 7861  .    """.    Exa
-0001c120: 6d70 6c65 733a 0a20 2020 2020 2020 2055  mples:.        U
-0001c130: 7365 2061 733a 3a0a 0a20 2020 2020 2020  se as::..       
-0001c140: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
-0001c150: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
-0001c160: 6e61 6d65 272c 2072 6571 7569 7265 733d  name', requires=
-0001c170: 4352 5950 5428 2929 0a0a 2020 2020 656e  CRYPT())..    en
-0001c180: 636f 6465 7320 7468 6520 7661 6c75 6520  codes the value 
-0001c190: 6f6e 2076 616c 6964 6174 696f 6e20 7769  on validation wi
-0001c1a0: 7468 2061 2064 6967 6573 742e 0a0a 2020  th a digest...  
-0001c1b0: 2020 4966 206e 6f20 6172 6775 6d65 6e74    If no argument
-0001c1c0: 7320 6172 6520 7072 6f76 6964 6564 2043  s are provided C
-0001c1d0: 5259 5054 2075 7365 7320 7468 6520 4d44  RYPT uses the MD
-0001c1e0: 3520 616c 676f 7269 7468 6d2e 0a20 2020  5 algorithm..   
-0001c1f0: 2049 6620 7468 6520 6b65 7920 6172 6775   If the key argu
-0001c200: 6d65 6e74 2069 7320 7072 6f76 6964 6564  ment is provided
-0001c210: 2074 6865 2048 4d41 432b 4d44 3520 616c   the HMAC+MD5 al
-0001c220: 676f 7269 7468 6d20 6973 2075 7365 642e  gorithm is used.
-0001c230: 0a20 2020 2049 6620 7468 6520 6469 6765  .    If the dige
-0001c240: 7374 5f61 6c67 2069 7320 7370 6563 6966  st_alg is specif
-0001c250: 6965 6420 7468 6973 2069 7320 7573 6564  ied this is used
-0001c260: 2074 6f20 7265 706c 6163 6520 7468 650a   to replace the.
-0001c270: 2020 2020 4d44 3520 7769 7468 2c20 666f      MD5 with, fo
-0001c280: 7220 6578 616d 706c 652c 2053 4841 3531  r example, SHA51
-0001c290: 322e 2054 6865 2064 6967 6573 745f 616c  2. The digest_al
-0001c2a0: 6720 6361 6e20 6265 0a20 2020 2074 6865  g can be.    the
-0001c2b0: 206e 616d 6520 6f66 2061 2068 6173 686c   name of a hashl
-0001c2c0: 6962 2061 6c67 6f72 6974 686d 2061 7320  ib algorithm as 
-0001c2d0: 6120 7374 7269 6e67 206f 7220 7468 6520  a string or the 
-0001c2e0: 616c 676f 7269 7468 6d20 6974 7365 6c66  algorithm itself
-0001c2f0: 2e0a 0a20 2020 206d 696e 5f6c 656e 6774  ...    min_lengt
-0001c300: 6820 6973 2074 6865 206d 696e 696d 616c  h is the minimal
-0001c310: 2070 6173 7377 6f72 6420 6c65 6e67 7468   password length
-0001c320: 2028 6465 6661 756c 7420 3429 202d 2049   (default 4) - I
-0001c330: 535f 5354 524f 4e47 2066 6f72 2073 6572  S_STRONG for ser
-0001c340: 696f 7573 2073 6563 7572 6974 790a 2020  ious security.  
-0001c350: 2020 6572 726f 725f 6d65 7373 6167 6520    error_message 
-0001c360: 6973 2074 6865 206d 6573 7361 6765 2069  is the message i
-0001c370: 6620 7061 7373 776f 7264 2069 7320 746f  f password is to
-0001c380: 6f20 7368 6f72 740a 0a20 2020 204e 6f74  o short..    Not
-0001c390: 6963 6520 7468 6174 2061 6e20 656d 7074  ice that an empt
-0001c3a0: 7920 7061 7373 776f 7264 2069 7320 6163  y password is ac
-0001c3b0: 6365 7074 6564 2062 7574 2069 6e76 616c  cepted but inval
-0001c3c0: 6964 2e20 4974 2077 696c 6c20 6e6f 7420  id. It will not 
-0001c3d0: 616c 6c6f 7720 6c6f 6769 6e20 6261 636b  allow login back
-0001c3e0: 2e0a 2020 2020 5374 6f72 6573 206a 756e  ..    Stores jun
-0001c3f0: 6b20 6173 2068 6173 6865 6420 7061 7373  k as hashed pass
-0001c400: 776f 7264 2e0a 0a20 2020 2053 7065 6369  word...    Speci
-0001c410: 6679 2061 6e20 616c 676f 7269 7468 6d20  fy an algorithm 
-0001c420: 6f72 2062 7920 6465 6661 756c 7420 7765  or by default we
-0001c430: 2077 696c 6c20 7573 6520 7368 6135 3132   will use sha512
-0001c440: 2e0a 0a20 2020 2054 7970 6963 616c 2061  ...    Typical a
-0001c450: 7661 696c 6162 6c65 2061 6c67 6f72 6974  vailable algorit
-0001c460: 686d 733a 0a20 2020 2020 206d 6435 2c20  hms:.      md5, 
-0001c470: 7368 6131 2c20 7368 6132 3234 2c20 7368  sha1, sha224, sh
-0001c480: 6132 3536 2c20 7368 6133 3834 2c20 7368  a256, sha384, sh
-0001c490: 6135 3132 0a0a 2020 2020 4966 2073 616c  a512..    If sal
-0001c4a0: 742c 2069 7420 6861 7368 6573 2061 2070  t, it hashes a p
-0001c4b0: 6173 7377 6f72 6420 7769 7468 2061 2073  assword with a s
-0001c4c0: 616c 742e 0a20 2020 2049 6620 7361 6c74  alt..    If salt
-0001c4d0: 2069 7320 5472 7565 2c20 7468 6973 206d   is True, this m
-0001c4e0: 6574 686f 6420 7769 6c6c 2061 7574 6f6d  ethod will autom
-0001c4f0: 6174 6963 616c 6c79 2067 656e 6572 6174  atically generat
-0001c500: 6520 6f6e 652e 0a20 2020 2045 6974 6865  e one..    Eithe
-0001c510: 7220 6361 7365 2069 7420 7265 7475 726e  r case it return
-0001c520: 7320 616e 2065 6e63 7279 7074 6564 2070  s an encrypted p
-0001c530: 6173 7377 6f72 6420 7374 7269 6e67 2069  assword string i
-0001c540: 6e20 7468 6520 666f 6c6c 6f77 696e 6720  n the following 
-0001c550: 666f 726d 6174 3a0a 0a20 2020 2020 203c  format:..      <
-0001c560: 616c 676f 7269 7468 6d3e 243c 7361 6c74  algorithm>$<salt
-0001c570: 3e24 3c68 6173 683e 0a0a 2020 2020 496d  >$<hash>..    Im
-0001c580: 706f 7274 616e 743a 2068 6173 6865 6420  portant: hashed 
-0001c590: 7061 7373 776f 7264 2069 7320 7265 7475  password is retu
-0001c5a0: 726e 6564 2061 7320 6120 4c61 7a79 4372  rned as a LazyCr
-0001c5b0: 7970 7420 6f62 6a65 6374 2061 6e64 2063  ypt object and c
-0001c5c0: 6f6d 7075 7465 6420 6f6e 6c79 2069 6620  omputed only if 
-0001c5d0: 6e65 6564 6564 2e0a 2020 2020 5468 6520  needed..    The 
-0001c5e0: 4c61 7379 4372 7970 7420 6f62 6a65 6374  LasyCrypt object
-0001c5f0: 2061 6c73 6f20 6b6e 6f77 7320 686f 7720   also knows how 
-0001c600: 746f 2063 6f6d 7061 7265 2069 7473 656c  to compare itsel
-0001c610: 6620 7769 7468 2061 6e20 6578 6973 7469  f with an existi
-0001c620: 6e67 2073 616c 7465 6420 7061 7373 776f  ng salted passwo
-0001c630: 7264 0a0a 2020 2020 5375 7070 6f72 7473  rd..    Supports
-0001c640: 2073 7461 6e64 6172 6420 616c 676f 7269   standard algori
-0001c650: 7468 6d73 0a0a 2020 2020 2020 2020 3e3e  thms..        >>
-0001c660: 3e20 666f 7220 616c 6720 696e 2028 276d  > for alg in ('m
-0001c670: 6435 272c 2773 6861 3127 2c27 7368 6132  d5','sha1','sha2
-0001c680: 3536 272c 2773 6861 3338 3427 2c27 7368  56','sha384','sh
-0001c690: 6135 3132 2729 3a0a 2020 2020 2020 2020  a512'):.        
-0001c6a0: 2e2e 2e20 2020 2020 7072 696e 7428 7374  ...     print(st
-0001c6b0: 7228 4352 5950 5428 6469 6765 7374 5f61  r(CRYPT(digest_a
-0001c6c0: 6c67 3d61 6c67 2c73 616c 743d 5472 7565  lg=alg,salt=True
-0001c6d0: 2928 2774 6573 7427 295b 305d 2929 0a20  )('test')[0])). 
-0001c6e0: 2020 2020 2020 206d 6435 242e 2e2e 242e         md5$...$.
-0001c6f0: 2e2e 0a20 2020 2020 2020 2073 6861 3124  ...        sha1$
-0001c700: 2e2e 2e24 2e2e 2e0a 2020 2020 2020 2020  ...$....        
-0001c710: 7368 6132 3536 242e 2e2e 242e 2e2e 0a20  sha256$...$.... 
-0001c720: 2020 2020 2020 2073 6861 3338 3424 2e2e         sha384$..
-0001c730: 2e24 2e2e 2e0a 2020 2020 2020 2020 7368  .$....        sh
-0001c740: 6135 3132 242e 2e2e 242e 2e2e 0a0a 2020  a512$...$.....  
-0001c750: 2020 5468 6520 7379 6e74 6178 2069 7320    The syntax is 
-0001c760: 616c 7761 7973 2061 6c67 2473 616c 7424  always alg$salt$
-0001c770: 6861 7368 0a0a 2020 2020 5375 7070 6f72  hash..    Suppor
-0001c780: 7473 2066 6f72 2070 626b 6466 320a 0a20  ts for pbkdf2.. 
-0001c790: 2020 2020 2020 203e 3e3e 2061 6c67 203d         >>> alg =
-0001c7a0: 2027 7062 6b64 6632 2831 3030 302c 3230   'pbkdf2(1000,20
-0001c7b0: 2c73 6861 3531 3229 270a 2020 2020 2020  ,sha512)'.      
-0001c7c0: 2020 3e3e 3e20 7072 696e 7428 7374 7228    >>> print(str(
-0001c7d0: 4352 5950 5428 6469 6765 7374 5f61 6c67  CRYPT(digest_alg
-0001c7e0: 3d61 6c67 2c73 616c 743d 5472 7565 2928  =alg,salt=True)(
-0001c7f0: 2774 6573 7427 295b 305d 2929 0a20 2020  'test')[0])).   
-0001c800: 2020 2020 2070 626b 6466 3228 3130 3030       pbkdf2(1000
-0001c810: 2c32 302c 7368 6135 3132 2924 2e2e 2e24  ,20,sha512)$...$
-0001c820: 2e2e 2e0a 0a20 2020 2041 6e20 6f70 7469  .....    An opti
-0001c830: 6f6e 616c 2068 6d61 635f 6b65 7920 6361  onal hmac_key ca
-0001c840: 6e20 6265 2073 7065 6369 6669 6564 2061  n be specified a
-0001c850: 6e64 2069 7420 6973 2075 7365 6420 6173  nd it is used as
-0001c860: 2073 616c 7420 7072 6566 6978 0a0a 2020   salt prefix..  
-0001c870: 2020 2020 2020 3e3e 3e20 6120 3d20 7374        >>> a = st
-0001c880: 7228 4352 5950 5428 6469 6765 7374 5f61  r(CRYPT(digest_a
-0001c890: 6c67 3d27 6d64 3527 2c6b 6579 3d27 6d79  lg='md5',key='my
-0001c8a0: 6b65 7927 2c73 616c 743d 5472 7565 2928  key',salt=True)(
-0001c8b0: 2774 6573 7427 295b 305d 290a 2020 2020  'test')[0]).    
-0001c8c0: 2020 2020 3e3e 3e20 7072 696e 7428 6129      >>> print(a)
-0001c8d0: 0a20 2020 2020 2020 206d 6435 242e 2e2e  .        md5$...
-0001c8e0: 242e 2e2e 0a0a 2020 2020 4576 656e 2069  $.....    Even i
-0001c8f0: 6620 7468 6520 616c 676f 7269 7468 6d20  f the algorithm 
-0001c900: 6368 616e 6765 7320 7468 6520 6861 7368  changes the hash
-0001c910: 2063 616e 2073 7469 6c6c 2062 6520 7661   can still be va
-0001c920: 6c69 6461 7465 640a 0a20 2020 2020 2020  lidated..       
-0001c930: 203e 3e3e 2043 5259 5054 2864 6967 6573   >>> CRYPT(diges
-0001c940: 745f 616c 673d 2773 6861 3127 2c6b 6579  t_alg='sha1',key
-0001c950: 3d27 6d79 6b65 7927 2c73 616c 743d 5472  ='mykey',salt=Tr
-0001c960: 7565 2928 2774 6573 7427 295b 305d 203d  ue)('test')[0] =
-0001c970: 3d20 610a 2020 2020 2020 2020 5472 7565  = a.        True
-0001c980: 0a0a 2020 2020 4966 206e 6f20 7361 6c74  ..    If no salt
-0001c990: 2069 7320 7370 6563 6966 6965 6420 4352   is specified CR
-0001c9a0: 5950 5420 6361 6e20 6775 6573 7320 7468  YPT can guess th
-0001c9b0: 6520 616c 676f 7269 7468 6d73 2066 726f  e algorithms fro
-0001c9c0: 6d20 6c65 6e67 7468 3a0a 0a20 2020 2020  m length:..     
-0001c9d0: 2020 203e 3e3e 2061 203d 2073 7472 2843     >>> a = str(C
-0001c9e0: 5259 5054 2864 6967 6573 745f 616c 673d  RYPT(digest_alg=
-0001c9f0: 2773 6861 3127 2c73 616c 743d 4661 6c73  'sha1',salt=Fals
-0001ca00: 6529 2827 7465 7374 2729 5b30 5d29 0a20  e)('test')[0]). 
-0001ca10: 2020 2020 2020 203e 3e3e 2061 0a20 2020         >>> a.   
-0001ca20: 2020 2020 2027 7368 6131 2424 6139 3461       'sha1$$a94a
-0001ca30: 3866 6535 6363 6231 3962 6136 3163 3463  8fe5ccb19ba61c4c
-0001ca40: 3038 3733 6433 3931 6539 3837 3938 3266  0873d391e987982f
-0001ca50: 6262 6433 270a 2020 2020 2020 2020 3e3e  bbd3'.        >>
-0001ca60: 3e20 4352 5950 5428 6469 6765 7374 5f61  > CRYPT(digest_a
-0001ca70: 6c67 3d27 7368 6131 272c 7361 6c74 3d46  lg='sha1',salt=F
-0001ca80: 616c 7365 2928 2774 6573 7427 295b 305d  alse)('test')[0]
-0001ca90: 203d 3d20 610a 2020 2020 2020 2020 5472   == a.        Tr
-0001caa0: 7565 0a20 2020 2020 2020 203e 3e3e 2043  ue.        >>> C
-0001cab0: 5259 5054 2864 6967 6573 745f 616c 673d  RYPT(digest_alg=
-0001cac0: 2773 6861 3127 2c73 616c 743d 4661 6c73  'sha1',salt=Fals
-0001cad0: 6529 2827 7465 7374 2729 5b30 5d20 3d3d  e)('test')[0] ==
-0001cae0: 2061 5b36 3a5d 0a20 2020 2020 2020 2054   a[6:].        T
-0001caf0: 7275 650a 2020 2020 2020 2020 3e3e 3e20  rue.        >>> 
-0001cb00: 4352 5950 5428 6469 6765 7374 5f61 6c67  CRYPT(digest_alg
-0001cb10: 3d27 6d64 3527 2c73 616c 743d 4661 6c73  ='md5',salt=Fals
-0001cb20: 6529 2827 7465 7374 2729 5b30 5d20 3d3d  e)('test')[0] ==
-0001cb30: 2061 0a20 2020 2020 2020 2054 7275 650a   a.        True.
-0001cb40: 2020 2020 2020 2020 3e3e 3e20 4352 5950          >>> CRYP
-0001cb50: 5428 6469 6765 7374 5f61 6c67 3d27 6d64  T(digest_alg='md
-0001cb60: 3527 2c73 616c 743d 4661 6c73 6529 2827  5',salt=False)('
-0001cb70: 7465 7374 2729 5b30 5d20 3d3d 2061 5b36  test')[0] == a[6
-0001cb80: 3a5d 0a20 2020 2020 2020 2054 7275 650a  :].        True.
-0001cb90: 2020 2020 2222 220a 0a20 2020 2053 5441      """..    STA
-0001cba0: 5253 203d 2022 2a2a 2a2a 2a2a 220a 0a20  RS = "******".. 
-0001cbb0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-0001cbc0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0001cbd0: 2020 2020 2020 206b 6579 3d4e 6f6e 652c         key=None,
-0001cbe0: 0a20 2020 2020 2020 2064 6967 6573 745f  .        digest_
-0001cbf0: 616c 673d 2270 626b 6466 3228 3130 3030  alg="pbkdf2(1000
-0001cc00: 2c32 302c 7368 6135 3132 2922 2c0a 2020  ,20,sha512)",.  
-0001cc10: 2020 2020 2020 6d69 6e5f 6c65 6e67 7468        min_length
-0001cc20: 3d30 2c0a 2020 2020 2020 2020 6572 726f  =0,.        erro
-0001cc30: 725f 6d65 7373 6167 653d 2254 6f6f 2073  r_message="Too s
-0001cc40: 686f 7274 222c 0a20 2020 2020 2020 2073  hort",.        s
-0001cc50: 616c 743d 5472 7565 2c0a 2020 2020 2020  alt=True,.      
-0001cc60: 2020 6d61 785f 6c65 6e67 7468 3d31 3032    max_length=102
-0001cc70: 342c 0a20 2020 2029 3a0a 2020 2020 2020  4,.    ):.      
-0001cc80: 2020 2222 220a 2020 2020 2020 2020 696d    """.        im
-0001cc90: 706f 7274 616e 742c 2064 6967 6573 745f  portant, digest_
-0001cca0: 616c 673d 276d 6435 2720 6973 206e 6f74  alg='md5' is not
-0001ccb0: 2074 6865 2064 6566 6175 6c74 2068 6173   the default has
-0001ccc0: 6869 6e67 2061 6c67 6f72 6974 686d 2066  hing algorithm f
-0001ccd0: 6f72 0a20 2020 2020 2020 2077 6562 3270  or.        web2p
-0001cce0: 792e 2054 6869 7320 6973 206f 6e6c 7920  y. This is only 
-0001ccf0: 616e 2065 7861 6d70 6c65 206f 6620 7573  an example of us
-0001cd00: 6167 6520 6f66 2074 6869 7320 6675 6e63  age of this func
-0001cd10: 7469 6f6e 2e0a 0a20 2020 2020 2020 2054  tion...        T
-0001cd20: 6865 2061 6374 7561 6c20 6861 7368 2061  he actual hash a
-0001cd30: 6c67 6f72 6974 686d 2069 7320 6465 7465  lgorithm is dete
-0001cd40: 726d 696e 6564 2066 726f 6d20 7468 6520  rmined from the 
-0001cd50: 6b65 7920 7768 6963 6820 6973 0a20 2020  key which is.   
-0001cd60: 2020 2020 2067 656e 6572 6174 6564 2062       generated b
-0001cd70: 7920 7765 6232 7079 2069 6e20 746f 6f6c  y web2py in tool
-0001cd80: 732e 7079 2e20 5468 6973 2064 6566 6175  s.py. This defau
-0001cd90: 6c74 7320 746f 2068 6d61 632b 7368 6135  lts to hmac+sha5
-0001cda0: 3132 2e0a 2020 2020 2020 2020 2222 220a  12..        """.
-0001cdb0: 2020 2020 2020 2020 7365 6c66 2e6b 6579          self.key
-0001cdc0: 203d 206b 6579 0a20 2020 2020 2020 2073   = key.        s
-0001cdd0: 656c 662e 6469 6765 7374 5f61 6c67 203d  elf.digest_alg =
-0001cde0: 2064 6967 6573 745f 616c 670a 2020 2020   digest_alg.    
-0001cdf0: 2020 2020 7365 6c66 2e6d 696e 5f6c 656e      self.min_len
-0001ce00: 6774 6820 3d20 6d69 6e5f 6c65 6e67 7468  gth = min_length
-0001ce10: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0001ce20: 785f 6c65 6e67 7468 203d 206d 6178 5f6c  x_length = max_l
-0001ce30: 656e 6774 680a 2020 2020 2020 2020 7365  ength.        se
-0001ce40: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
-0001ce50: 203d 2065 7272 6f72 5f6d 6573 7361 6765   = error_message
-0001ce60: 0a20 2020 2020 2020 2073 656c 662e 7361  .        self.sa
-0001ce70: 6c74 203d 2073 616c 740a 0a20 2020 2064  lt = salt..    d
-0001ce80: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
-0001ce90: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
-0001cea0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
-0001ceb0: 2020 6966 2076 616c 7565 203d 3d20 7365    if value == se
-0001cec0: 6c66 2e53 5441 5253 3a0a 2020 2020 2020  lf.STARS:.      
-0001ced0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
-0001cee0: 650a 2020 2020 2020 2020 7620 3d20 7661  e.        v = va
-0001cef0: 6c75 6520 616e 6420 7374 7228 7661 6c75  lue and str(valu
-0001cf00: 6529 5b3a 2073 656c 662e 6d61 785f 6c65  e)[: self.max_le
-0001cf10: 6e67 7468 5d0a 2020 2020 2020 2020 6966  ngth].        if
-0001cf20: 206e 6f74 2076 206f 7220 6c65 6e28 7629   not v or len(v)
-0001cf30: 203c 2073 656c 662e 6d69 6e5f 6c65 6e67   < self.min_leng
-0001cf40: 7468 3a0a 2020 2020 2020 2020 2020 2020  th:.            
-0001cf50: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-0001cf60: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-0001cf70: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-0001cf80: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
-0001cf90: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-0001cfa0: 2876 616c 7565 2c20 4c61 7a79 4372 7970  (value, LazyCryp
-0001cfb0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-0001cfc0: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
-0001cfd0: 2020 2020 2072 6574 7572 6e20 4c61 7a79       return Lazy
-0001cfe0: 4372 7970 7428 7365 6c66 2c20 7661 6c75  Crypt(self, valu
-0001cff0: 6529 0a0a 2020 2020 6465 6620 666f 726d  e)..    def form
-0001d000: 6174 7465 7228 7365 6c66 2c20 7661 6c75  atter(self, valu
-0001d010: 6529 3a0a 2020 2020 2020 2020 7265 7475  e):.        retu
-0001d020: 726e 2073 656c 662e 5354 4152 530a 0a0a  rn self.STARS...
-0001d030: 2320 2065 6e74 726f 7079 2063 616c 6375  #  entropy calcu
-0001d040: 6c61 746f 7220 666f 7220 4953 5f53 5452  lator for IS_STR
-0001d050: 4f4e 470a 230a 6c6f 7765 7273 6574 203d  ONG.#.lowerset =
-0001d060: 2066 726f 7a65 6e73 6574 2862 2261 6263   frozenset(b"abc
-0001d070: 6465 6667 6869 6a6b 6c6d 6e6f 7071 7273  defghijklmnopqrs
-0001d080: 7475 7677 7879 7a22 290a 7570 7065 7273  tuvwxyz").uppers
-0001d090: 6574 203d 2066 726f 7a65 6e73 6574 2862  et = frozenset(b
-0001d0a0: 2241 4243 4445 4647 4849 4a4b 4c4d 4e4f  "ABCDEFGHIJKLMNO
-0001d0b0: 5051 5253 5455 5657 5859 5a22 290a 6e75  PQRSTUVWXYZ").nu
-0001d0c0: 6d62 6572 7365 7420 3d20 6672 6f7a 656e  mberset = frozen
-0001d0d0: 7365 7428 6222 3031 3233 3435 3637 3839  set(b"0123456789
-0001d0e0: 2229 0a73 796d 3173 6574 203d 2066 726f  ").sym1set = fro
-0001d0f0: 7a65 6e73 6574 2862 2221 4023 2425 5e26  zenset(b"!@#$%^&
-0001d100: 2a28 2920 2229 0a73 796d 3273 6574 203d  *() ").sym2set =
-0001d110: 2066 726f 7a65 6e73 6574 2862 227e 602d   frozenset(b"~`-
-0001d120: 5f3d 2b5b 5d7b 7d5c 5c7c 3b3a 275c 222c  _=+[]{}\\|;:'\",
-0001d130: 2e3c 3e3f 2f22 290a 6f74 6865 7273 6574  .<>?/").otherset
-0001d140: 203d 2066 726f 7a65 6e73 6574 2862 2222   = frozenset(b""
-0001d150: 2e6a 6f69 6e28 6368 7228 7829 2069 6620  .join(chr(x) if 
-0001d160: 5059 3220 656c 7365 2063 6872 2878 292e  PY2 else chr(x).
-0001d170: 656e 636f 6465 2829 2066 6f72 2078 2069  encode() for x i
-0001d180: 6e20 7261 6e67 6528 3235 3629 2929 0a0a  n range(256)))..
-0001d190: 0a64 6566 2063 616c 635f 656e 7472 6f70  .def calc_entrop
-0001d1a0: 7928 7374 7269 6e67 293a 0a20 2020 2022  y(string):.    "
-0001d1b0: 2222 6361 6c63 756c 6174 6573 2061 2073  ""calculates a s
-0001d1c0: 696d 706c 6520 656e 7472 6f70 7920 666f  imple entropy fo
-0001d1d0: 7220 6120 6769 7665 6e20 7374 7269 6e67  r a given string
-0001d1e0: 2222 220a 2020 2020 616c 7068 6162 6574  """.    alphabet
-0001d1f0: 203d 2030 2020 2320 616c 7068 6162 6574   = 0  # alphabet
-0001d200: 2073 697a 650a 2020 2020 6f74 6865 7220   size.    other 
-0001d210: 3d20 7365 7428 290a 2020 2020 7365 656e  = set().    seen
-0001d220: 203d 2073 6574 2829 0a20 2020 206c 6173   = set().    las
-0001d230: 7473 6574 203d 204e 6f6e 650a 2020 2020  tset = None.    
-0001d240: 7374 7269 6e67 203d 2074 6f5f 6279 7465  string = to_byte
-0001d250: 7328 7374 7269 6e67 206f 7220 2222 290a  s(string or "").
-0001d260: 2020 2020 666f 7220 6320 696e 2073 7472      for c in str
-0001d270: 696e 673a 0a20 2020 2020 2020 2023 2063  ing:.        # c
-0001d280: 6c61 7373 6966 7920 7468 6973 2063 6861  lassify this cha
-0001d290: 7261 6374 6572 0a20 2020 2020 2020 2069  racter.        i
-0001d2a0: 6e73 6574 203d 204e 6f6e 650a 2020 2020  nset = None.    
-0001d2b0: 2020 2020 666f 7220 6373 6574 2069 6e20      for cset in 
-0001d2c0: 286c 6f77 6572 7365 742c 2075 7070 6572  (lowerset, upper
-0001d2d0: 7365 742c 206e 756d 6265 7273 6574 2c20  set, numberset, 
-0001d2e0: 7379 6d31 7365 742c 2073 796d 3273 6574  sym1set, sym2set
-0001d2f0: 2c20 6f74 6865 7273 6574 293a 0a20 2020  , otherset):.   
-0001d300: 2020 2020 2020 2020 2069 6620 6320 696e           if c in
-0001d310: 2063 7365 743a 0a20 2020 2020 2020 2020   cset:.         
-0001d320: 2020 2020 2020 2069 6e73 6574 203d 2063         inset = c
-0001d330: 7365 740a 2020 2020 2020 2020 2020 2020  set.            
-0001d340: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-0001d350: 2020 6173 7365 7274 2069 6e73 6574 2069    assert inset i
-0001d360: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-0001d370: 2020 2023 2063 616c 6375 6c61 7465 2065     # calculate e
-0001d380: 6666 6563 7420 6f66 2063 6861 7261 6374  ffect of charact
-0001d390: 6572 206f 6e20 616c 7068 6162 6574 2073  er on alphabet s
-0001d3a0: 697a 650a 2020 2020 2020 2020 6966 2069  ize.        if i
-0001d3b0: 6e73 6574 206e 6f74 2069 6e20 7365 656e  nset not in seen
-0001d3c0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0001d3d0: 656e 2e61 6464 2869 6e73 6574 290a 2020  en.add(inset).  
-0001d3e0: 2020 2020 2020 2020 2020 616c 7068 6162            alphab
-0001d3f0: 6574 202b 3d20 6c65 6e28 696e 7365 7429  et += len(inset)
-0001d400: 2020 2320 6372 6564 6974 2066 6f72 2061    # credit for a
-0001d410: 206e 6577 2063 6861 7261 6374 6572 2073   new character s
-0001d420: 6574 0a20 2020 2020 2020 2065 6c69 6620  et.        elif 
-0001d430: 6320 6e6f 7420 696e 206f 7468 6572 3a0a  c not in other:.
-0001d440: 2020 2020 2020 2020 2020 2020 616c 7068              alph
-0001d450: 6162 6574 202b 3d20 3120 2023 2063 7265  abet += 1  # cre
-0001d460: 6469 7420 666f 7220 756e 6971 7565 2063  dit for unique c
-0001d470: 6861 7261 6374 6572 730a 2020 2020 2020  haracters.      
-0001d480: 2020 2020 2020 6f74 6865 722e 6164 6428        other.add(
-0001d490: 6329 0a20 2020 2020 2020 2069 6620 696e  c).        if in
-0001d4a0: 7365 7420 6973 206e 6f74 206c 6173 7473  set is not lasts
-0001d4b0: 6574 3a0a 2020 2020 2020 2020 2020 2020  et:.            
-0001d4c0: 616c 7068 6162 6574 202b 3d20 3120 2023  alphabet += 1  #
-0001d4d0: 2063 7265 6469 7420 666f 7220 7365 7420   credit for set 
-0001d4e0: 7472 616e 7369 7469 6f6e 730a 2020 2020  transitions.    
-0001d4f0: 2020 2020 2020 2020 6c61 7374 7365 7420          lastset 
-0001d500: 3d20 6373 6574 0a20 2020 2065 6e74 726f  = cset.    entro
-0001d510: 7079 203d 206c 656e 2873 7472 696e 6729  py = len(string)
-0001d520: 202a 206d 6174 682e 6c6f 6728 616c 7068   * math.log(alph
-0001d530: 6162 6574 206f 7220 3129 202f 2030 2e36  abet or 1) / 0.6
-0001d540: 3933 3134 3731 3830 3535 3939 3435 3320  931471805599453 
-0001d550: 2023 206d 6174 682e 6c6f 6728 3229 0a20   # math.log(2). 
-0001d560: 2020 2072 6574 7572 6e20 726f 756e 6428     return round(
-0001d570: 656e 7472 6f70 792c 2032 290a 0a0a 636c  entropy, 2)...cl
-0001d580: 6173 7320 4953 5f53 5452 4f4e 4728 5661  ass IS_STRONG(Va
-0001d590: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
-0001d5a0: 220a 2020 2020 4578 616d 706c 6573 3a0a  ".    Examples:.
-0001d5b0: 2020 2020 2020 2020 5573 6520 6173 3a3a          Use as::
-0001d5c0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
-0001d5d0: 5055 5428 5f74 7970 653d 2770 6173 7377  PUT(_type='passw
-0001d5e0: 6f72 6427 2c20 5f6e 616d 653d 2770 6173  ord', _name='pas
-0001d5f0: 7377 6427 2c0a 2020 2020 2020 2020 2020  swd',.          
-0001d600: 2020 7265 7175 6972 6573 3d49 535f 5354    requires=IS_ST
-0001d610: 524f 4e47 286d 696e 3d31 302c 2073 7065  RONG(min=10, spe
-0001d620: 6369 616c 3d32 2c20 7570 7065 723d 3229  cial=2, upper=2)
-0001d630: 290a 0a20 2020 2065 6e66 6f72 6365 7320  )..    enforces 
-0001d640: 636f 6d70 6c65 7869 7479 2072 6571 7569  complexity requi
-0001d650: 7265 6d65 6e74 7320 6f6e 2061 2066 6965  rements on a fie
-0001d660: 6c64 0a0a 2020 2020 2020 2020 3e3e 3e20  ld..        >>> 
-0001d670: 4953 5f53 5452 4f4e 4728 6573 3d54 7275  IS_STRONG(es=Tru
-0001d680: 6529 2827 4162 6364 3132 3334 2729 0a20  e)('Abcd1234'). 
-0001d690: 2020 2020 2020 2028 2741 6263 6431 3233         ('Abcd123
-0001d6a0: 3427 2c0a 2020 2020 2020 2020 2027 4d75  4',.         'Mu
-0001d6b0: 7374 2069 6e63 6c75 6465 2061 7420 6c65  st include at le
-0001d6c0: 6173 7420 3120 6f66 2074 6865 2066 6f6c  ast 1 of the fol
-0001d6d0: 6c6f 7769 6e67 3a20 7e21 4023 2425 5e26  lowing: ~!@#$%^&
-0001d6e0: 2a28 295f 2b2d 3d3f 3c3e 2c2e 3a3b 7b7d  *()_+-=?<>,.:;{}
-0001d6f0: 5b5d 7c27 290a 2020 2020 2020 2020 3e3e  []|').        >>
-0001d700: 3e20 4953 5f53 5452 4f4e 4728 6573 3d54  > IS_STRONG(es=T
-0001d710: 7275 6529 2827 4162 6364 3132 3334 2127  rue)('Abcd1234!'
-0001d720: 290a 2020 2020 2020 2020 2827 4162 6364  ).        ('Abcd
-0001d730: 3132 3334 2127 2c20 4e6f 6e65 290a 2020  1234!', None).  
-0001d740: 2020 2020 2020 3e3e 3e20 4953 5f53 5452        >>> IS_STR
-0001d750: 4f4e 4728 6573 3d54 7275 652c 2065 6e74  ONG(es=True, ent
-0001d760: 726f 7079 3d31 2928 2761 2729 0a20 2020  ropy=1)('a').   
-0001d770: 2020 2020 2028 2761 272c 204e 6f6e 6529       ('a', None)
-0001d780: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-0001d790: 5354 524f 4e47 2865 733d 5472 7565 2c20  STRONG(es=True, 
-0001d7a0: 656e 7472 6f70 793d 312c 206d 696e 3d32  entropy=1, min=2
-0001d7b0: 2928 2761 2729 0a20 2020 2020 2020 2028  )('a').        (
-0001d7c0: 2761 272c 2027 4d69 6e69 6d75 6d20 6c65  'a', 'Minimum le
-0001d7d0: 6e67 7468 2069 7320 3227 290a 2020 2020  ngth is 2').    
-0001d7e0: 2020 2020 3e3e 3e20 4953 5f53 5452 4f4e      >>> IS_STRON
-0001d7f0: 4728 6573 3d54 7275 652c 2065 6e74 726f  G(es=True, entro
-0001d800: 7079 3d31 3030 2928 2761 6263 3132 3327  py=100)('abc123'
-0001d810: 290a 2020 2020 2020 2020 2827 6162 6331  ).        ('abc1
-0001d820: 3233 272c 2027 5061 7373 776f 7264 2074  23', 'Password t
-0001d830: 6f6f 2073 696d 706c 6520 2833 322e 3335  oo simple (32.35
-0001d840: 2f31 3030 2927 290a 2020 2020 2020 2020  /100)').        
-0001d850: 3e3e 3e20 4953 5f53 5452 4f4e 4728 6573  >>> IS_STRONG(es
-0001d860: 3d54 7275 652c 2065 6e74 726f 7079 3d31  =True, entropy=1
-0001d870: 3030 2928 2761 6e64 2729 0a20 2020 2020  00)('and').     
-0001d880: 2020 2028 2761 6e64 272c 2027 5061 7373     ('and', 'Pass
-0001d890: 776f 7264 2074 6f6f 2073 696d 706c 6520  word too simple 
-0001d8a0: 2831 342e 3537 2f31 3030 2927 290a 2020  (14.57/100)').  
-0001d8b0: 2020 2020 2020 3e3e 3e20 4953 5f53 5452        >>> IS_STR
-0001d8c0: 4f4e 4728 6573 3d54 7275 652c 2065 6e74  ONG(es=True, ent
-0001d8d0: 726f 7079 3d31 3030 2928 2761 6161 2729  ropy=100)('aaa')
-0001d8e0: 0a20 2020 2020 2020 2028 2761 6161 272c  .        ('aaa',
-0001d8f0: 2027 5061 7373 776f 7264 2074 6f6f 2073   'Password too s
-0001d900: 696d 706c 6520 2831 342e 3432 2f31 3030  imple (14.42/100
-0001d910: 2927 290a 2020 2020 2020 2020 3e3e 3e20  )').        >>> 
-0001d920: 4953 5f53 5452 4f4e 4728 6573 3d54 7275  IS_STRONG(es=Tru
-0001d930: 652c 2065 6e74 726f 7079 3d31 3030 2928  e, entropy=100)(
-0001d940: 2761 3164 2729 0a20 2020 2020 2020 2028  'a1d').        (
-0001d950: 2761 3164 272c 2027 5061 7373 776f 7264  'a1d', 'Password
-0001d960: 2074 6f6f 2073 696d 706c 6520 2831 352e   too simple (15.
-0001d970: 3937 2f31 3030 2927 290a 2020 2020 2020  97/100)').      
-0001d980: 2020 3e3e 3e20 4953 5f53 5452 4f4e 4728    >>> IS_STRONG(
-0001d990: 6573 3d54 7275 652c 2065 6e74 726f 7079  es=True, entropy
-0001d9a0: 3d31 3030 2928 2761 c3b1 6427 290a 2020  =100)('a..d').  
-0001d9b0: 2020 2020 2020 2827 615c 5c78 6333 5c5c        ('a\\xc3\\
-0001d9c0: 7862 3164 272c 2027 5061 7373 776f 7264  xb1d', 'Password
-0001d9d0: 2074 6f6f 2073 696d 706c 6520 2833 312e   too simple (31.
-0001d9e0: 3236 2f31 3029 2729 0a0a 2020 2020 2222  26/10)')..    ""
-0001d9f0: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
-0001da00: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
-0001da10: 662c 0a20 2020 2020 2020 206d 696e 3d4e  f,.        min=N
-0001da20: 6f6e 652c 0a20 2020 2020 2020 206d 6178  one,.        max
-0001da30: 3d4e 6f6e 652c 0a20 2020 2020 2020 2075  =None,.        u
-0001da40: 7070 6572 3d4e 6f6e 652c 0a20 2020 2020  pper=None,.     
-0001da50: 2020 206c 6f77 6572 3d4e 6f6e 652c 0a20     lower=None,. 
-0001da60: 2020 2020 2020 206e 756d 6265 723d 4e6f         number=No
-0001da70: 6e65 2c0a 2020 2020 2020 2020 656e 7472  ne,.        entr
-0001da80: 6f70 793d 4e6f 6e65 2c0a 2020 2020 2020  opy=None,.      
-0001da90: 2020 7370 6563 6961 6c3d 4e6f 6e65 2c0a    special=None,.
-0001daa0: 2020 2020 2020 2020 7370 6563 6961 6c73          specials
-0001dab0: 3d72 227e 2140 2324 255e 262a 2829 5f2b  =r"~!@#$%^&*()_+
-0001dac0: 2d3d 3f3c 3e2c 2e3a 3b7b 7d5b 5d7c 222c  -=?<>,.:;{}[]|",
-0001dad0: 0a20 2020 2020 2020 2069 6e76 616c 6964  .        invalid
-0001dae0: 3d27 2022 272c 0a20 2020 2020 2020 2065  =' "',.        e
-0001daf0: 7272 6f72 5f6d 6573 7361 6765 3d4e 6f6e  rror_message=Non
-0001db00: 652c 0a20 2020 2020 2020 2065 733d 4661  e,.        es=Fa
-0001db10: 6c73 652c 0a20 2020 2029 3a0a 2020 2020  lse,.    ):.    
-0001db20: 2020 2020 7365 6c66 2e65 6e74 726f 7079      self.entropy
-0001db30: 203d 2065 6e74 726f 7079 0a20 2020 2020   = entropy.     
-0001db40: 2020 2069 6620 656e 7472 6f70 7920 6973     if entropy is
-0001db50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0001db60: 2020 2023 2065 6e66 6f72 6365 2064 6566     # enforce def
-0001db70: 6175 6c74 2072 6571 7569 7265 6d65 6e74  ault requirement
-0001db80: 730a 2020 2020 2020 2020 2020 2020 7365  s.            se
-0001db90: 6c66 2e6d 696e 203d 2038 2069 6620 6d69  lf.min = 8 if mi
-0001dba0: 6e20 6973 204e 6f6e 6520 656c 7365 206d  n is None else m
-0001dbb0: 696e 0a20 2020 2020 2020 2020 2020 2073  in.            s
-0001dbc0: 656c 662e 6d61 7820 3d20 6d61 7820 2023  elf.max = max  #
-0001dbd0: 2077 6173 2032 302c 2062 7574 2074 6861   was 20, but tha
-0001dbe0: 7420 646f 6573 6e27 7420 6d61 6b65 2073  t doesn't make s
-0001dbf0: 656e 7365 0a20 2020 2020 2020 2020 2020  ense.           
-0001dc00: 2073 656c 662e 7570 7065 7220 3d20 3120   self.upper = 1 
-0001dc10: 6966 2075 7070 6572 2069 7320 4e6f 6e65  if upper is None
-0001dc20: 2065 6c73 6520 7570 7065 720a 2020 2020   else upper.    
-0001dc30: 2020 2020 2020 2020 7365 6c66 2e6c 6f77          self.low
-0001dc40: 6572 203d 2031 2069 6620 6c6f 7765 7220  er = 1 if lower 
-0001dc50: 6973 204e 6f6e 6520 656c 7365 206c 6f77  is None else low
-0001dc60: 6572 0a20 2020 2020 2020 2020 2020 2073  er.            s
-0001dc70: 656c 662e 6e75 6d62 6572 203d 2031 2069  elf.number = 1 i
-0001dc80: 6620 6e75 6d62 6572 2069 7320 4e6f 6e65  f number is None
-0001dc90: 2065 6c73 6520 6e75 6d62 6572 0a20 2020   else number.   
-0001dca0: 2020 2020 2020 2020 2073 656c 662e 7370           self.sp
-0001dcb0: 6563 6961 6c20 3d20 3120 6966 2073 7065  ecial = 1 if spe
-0001dcc0: 6369 616c 2069 7320 4e6f 6e65 2065 6c73  cial is None els
-0001dcd0: 6520 7370 6563 6961 6c0a 2020 2020 2020  e special.      
-0001dce0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0001dcf0: 2020 2020 2320 6279 2064 6566 6175 6c74      # by default
-0001dd00: 2c20 616e 2065 6e74 726f 7079 2073 7065  , an entropy spe
-0001dd10: 6320 6973 2065 7863 6c75 7369 7665 0a20  c is exclusive. 
-0001dd20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001dd30: 6d69 6e20 3d20 6d69 6e0a 2020 2020 2020  min = min.      
-0001dd40: 2020 2020 2020 7365 6c66 2e6d 6178 203d        self.max =
-0001dd50: 206d 6178 0a20 2020 2020 2020 2020 2020   max.           
-0001dd60: 2073 656c 662e 7570 7065 7220 3d20 7570   self.upper = up
-0001dd70: 7065 720a 2020 2020 2020 2020 2020 2020  per.            
-0001dd80: 7365 6c66 2e6c 6f77 6572 203d 206c 6f77  self.lower = low
-0001dd90: 6572 0a20 2020 2020 2020 2020 2020 2073  er.            s
-0001dda0: 656c 662e 6e75 6d62 6572 203d 206e 756d  elf.number = num
-0001ddb0: 6265 720a 2020 2020 2020 2020 2020 2020  ber.            
-0001ddc0: 7365 6c66 2e73 7065 6369 616c 203d 2073  self.special = s
-0001ddd0: 7065 6369 616c 0a20 2020 2020 2020 2073  pecial.        s
-0001dde0: 656c 662e 7370 6563 6961 6c73 203d 2073  elf.specials = s
-0001ddf0: 7065 6369 616c 730a 2020 2020 2020 2020  pecials.        
-0001de00: 7365 6c66 2e69 6e76 616c 6964 203d 2069  self.invalid = i
-0001de10: 6e76 616c 6964 0a20 2020 2020 2020 2073  nvalid.        s
-0001de20: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-0001de30: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
-0001de40: 650a 2020 2020 2020 2020 7365 6c66 2e65  e.        self.e
-0001de50: 7374 7269 6e67 203d 2065 7320 2023 2072  string = es  # r
-0001de60: 6574 7572 6e20 6572 726f 7220 6d65 7373  eturn error mess
-0001de70: 6167 6520 6173 2073 7472 696e 6720 2866  age as string (f
-0001de80: 6f72 2064 6f63 7465 7374 290a 0a20 2020  or doctest)..   
-0001de90: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
-0001dea0: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
-0001deb0: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-0001dec0: 2020 2020 6661 696c 7572 6573 203d 205b      failures = [
-0001ded0: 5d0a 2020 2020 2020 2020 6966 2076 616c  ].        if val
-0001dee0: 7565 2069 7320 4e6f 6e65 3a0a 2020 2020  ue is None:.    
-0001def0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-0001df00: 2222 0a20 2020 2020 2020 2069 6620 7661  "".        if va
-0001df10: 6c75 6520 616e 6420 6c65 6e28 7661 6c75  lue and len(valu
-0001df20: 6529 203d 3d20 7661 6c75 652e 636f 756e  e) == value.coun
-0001df30: 7428 222a 2229 203e 2034 3a0a 2020 2020  t("*") > 4:.    
-0001df40: 2020 2020 2020 2020 7265 7475 726e 2076          return v
-0001df50: 616c 7565 0a20 2020 2020 2020 2069 6620  alue.        if 
-0001df60: 7365 6c66 2e65 6e74 726f 7079 2069 7320  self.entropy is 
-0001df70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0001df80: 2020 2020 2020 656e 7472 6f70 7920 3d20        entropy = 
-0001df90: 6361 6c63 5f65 6e74 726f 7079 2876 616c  calc_entropy(val
-0001dfa0: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-0001dfb0: 6966 2065 6e74 726f 7079 203c 2073 656c  if entropy < sel
-0001dfc0: 662e 656e 7472 6f70 793a 0a20 2020 2020  f.entropy:.     
-0001dfd0: 2020 2020 2020 2020 2020 2066 6169 6c75             failu
-0001dfe0: 7265 732e 6170 7065 6e64 280a 2020 2020  res.append(.    
-0001dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e000: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-0001e010: 2250 6173 7377 6f72 6420 746f 6f20 7369  "Password too si
-0001e020: 6d70 6c65 2028 2528 6861 7665 2973 2f25  mple (%(have)s/%
-0001e030: 286e 6565 6429 7329 2229 0a20 2020 2020  (need)s)").     
-0001e040: 2020 2020 2020 2020 2020 2020 2020 2025                 %
-0001e050: 2064 6963 7428 6861 7665 3d65 6e74 726f   dict(have=entro
-0001e060: 7079 2c20 6e65 6564 3d73 656c 662e 656e  py, need=self.en
-0001e070: 7472 6f70 7929 0a20 2020 2020 2020 2020  tropy).         
-0001e080: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001e090: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-0001e0a0: 656c 662e 6d69 6e2c 2069 6e74 2920 616e  elf.min, int) an
-0001e0b0: 6420 7365 6c66 2e6d 696e 203e 2030 3a0a  d self.min > 0:.
-0001e0c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e0d0: 6f74 206c 656e 2876 616c 7565 2920 3e3d  ot len(value) >=
-0001e0e0: 2073 656c 662e 6d69 6e3a 0a20 2020 2020   self.min:.     
-0001e0f0: 2020 2020 2020 2020 2020 2066 6169 6c75             failu
-0001e100: 7265 732e 6170 7065 6e64 2873 656c 662e  res.append(self.
-0001e110: 7472 616e 736c 6174 6f72 2822 4d69 6e69  translator("Mini
-0001e120: 6d75 6d20 6c65 6e67 7468 2069 7320 2573  mum length is %s
-0001e130: 2229 2025 2073 656c 662e 6d69 6e29 0a20  ") % self.min). 
-0001e140: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
-0001e150: 616e 6365 2873 656c 662e 6d61 782c 2069  ance(self.max, i
-0001e160: 6e74 2920 616e 6420 7365 6c66 2e6d 6178  nt) and self.max
-0001e170: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
-0001e180: 2020 6966 206e 6f74 206c 656e 2876 616c    if not len(val
-0001e190: 7565 2920 3c3d 2073 656c 662e 6d61 783a  ue) <= self.max:
-0001e1a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e1b0: 2066 6169 6c75 7265 732e 6170 7065 6e64   failures.append
-0001e1c0: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
-0001e1d0: 2822 4d61 7869 6d75 6d20 6c65 6e67 7468  ("Maximum length
-0001e1e0: 2069 7320 2573 2229 2025 2073 656c 662e   is %s") % self.
-0001e1f0: 6d61 7829 0a20 2020 2020 2020 2069 6620  max).        if 
-0001e200: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
-0001e210: 7370 6563 6961 6c2c 2069 6e74 293a 0a20  special, int):. 
-0001e220: 2020 2020 2020 2020 2020 2061 6c6c 5f73             all_s
-0001e230: 7065 6369 616c 203d 205b 6368 2069 6e20  pecial = [ch in 
-0001e240: 7661 6c75 6520 666f 7220 6368 2069 6e20  value for ch in 
-0001e250: 7365 6c66 2e73 7065 6369 616c 735d 0a20  self.specials]. 
-0001e260: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-0001e270: 6c66 2e73 7065 6369 616c 203e 2030 3a0a  lf.special > 0:.
-0001e280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e290: 6966 206e 6f74 2061 6c6c 5f73 7065 6369  if not all_speci
-0001e2a0: 616c 2e63 6f75 6e74 2854 7275 6529 203e  al.count(True) >
-0001e2b0: 3d20 7365 6c66 2e73 7065 6369 616c 3a0a  = self.special:.
-0001e2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e2d0: 2020 2020 6661 696c 7572 6573 2e61 7070      failures.app
-0001e2e0: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
-0001e2f0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0001e300: 662e 7472 616e 736c 6174 6f72 2822 4d75  f.translator("Mu
-0001e310: 7374 2069 6e63 6c75 6465 2061 7420 6c65  st include at le
-0001e320: 6173 7420 2573 206f 6620 7468 6520 666f  ast %s of the fo
-0001e330: 6c6c 6f77 696e 673a 2025 7322 290a 2020  llowing: %s").  
-0001e340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e350: 2020 2020 2020 2520 2873 656c 662e 7370        % (self.sp
-0001e360: 6563 6961 6c2c 2073 656c 662e 7370 6563  ecial, self.spec
-0001e370: 6961 6c73 290a 2020 2020 2020 2020 2020  ials).          
-0001e380: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0001e390: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-0001e3a0: 662e 7370 6563 6961 6c20 3d3d 2030 2061  f.special == 0 a
-0001e3b0: 6e64 2073 656c 662e 7370 6563 6961 6c20  nd self.special 
-0001e3c0: 6973 206e 6f74 2046 616c 7365 3a0a 2020  is not False:.  
-0001e3d0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001e3e0: 206c 656e 285b 6974 656d 2066 6f72 2069   len([item for i
-0001e3f0: 7465 6d20 696e 2061 6c6c 5f73 7065 6369  tem in all_speci
-0001e400: 616c 2069 6620 6974 656d 5d29 203e 2030  al if item]) > 0
-0001e410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e420: 2020 2020 2020 6661 696c 7572 6573 2e61        failures.a
-0001e430: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
-0001e440: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e450: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
-0001e460: 4d61 7920 6e6f 7420 636f 6e74 6169 6e20  May not contain 
-0001e470: 616e 7920 6f66 2074 6865 2066 6f6c 6c6f  any of the follo
-0001e480: 7769 6e67 3a20 2573 2229 0a20 2020 2020  wing: %s").     
-0001e490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e4a0: 2020 2025 2073 656c 662e 7370 6563 6961     % self.specia
-0001e4b0: 6c73 0a20 2020 2020 2020 2020 2020 2020  ls.             
-0001e4c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001e4d0: 2069 6620 7365 6c66 2e69 6e76 616c 6964   if self.invalid
-0001e4e0: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
-0001e4f0: 6c5f 696e 7661 6c69 6420 3d20 5b63 6820  l_invalid = [ch 
-0001e500: 696e 2076 616c 7565 2066 6f72 2063 6820  in value for ch 
-0001e510: 696e 2073 656c 662e 696e 7661 6c69 645d  in self.invalid]
-0001e520: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001e530: 616c 6c5f 696e 7661 6c69 642e 636f 756e  all_invalid.coun
-0001e540: 7428 5472 7565 2920 3e20 303a 0a20 2020  t(True) > 0:.   
-0001e550: 2020 2020 2020 2020 2020 2020 2066 6169               fai
-0001e560: 6c75 7265 732e 6170 7065 6e64 280a 2020  lures.append(.  
-0001e570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e580: 2020 7365 6c66 2e74 7261 6e73 6c61 746f    self.translato
-0001e590: 7228 224d 6179 206e 6f74 2063 6f6e 7461  r("May not conta
-0001e5a0: 696e 2061 6e79 206f 6620 7468 6520 666f  in any of the fo
-0001e5b0: 6c6c 6f77 696e 673a 2025 7322 290a 2020  llowing: %s").  
-0001e5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e5d0: 2020 2520 7365 6c66 2e69 6e76 616c 6964    % self.invalid
-0001e5e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001e5f0: 2029 0a20 2020 2020 2020 2069 6620 6973   ).        if is
-0001e600: 696e 7374 616e 6365 2873 656c 662e 7570  instance(self.up
-0001e610: 7065 722c 2069 6e74 293a 0a20 2020 2020  per, int):.     
-0001e620: 2020 2020 2020 2061 6c6c 5f75 7070 6572         all_upper
-0001e630: 203d 2072 652e 6669 6e64 616c 6c28 225b   = re.findall("[
-0001e640: 412d 5a5d 222c 2076 616c 7565 290a 2020  A-Z]", value).  
-0001e650: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001e660: 662e 7570 7065 7220 3e20 303a 0a20 2020  f.upper > 0:.   
-0001e670: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001e680: 6e6f 7420 6c65 6e28 616c 6c5f 7570 7065  not len(all_uppe
-0001e690: 7229 203e 3d20 7365 6c66 2e75 7070 6572  r) >= self.upper
-0001e6a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001e6b0: 2020 2020 2020 6661 696c 7572 6573 2e61        failures.a
-0001e6c0: 7070 656e 6428 0a20 2020 2020 2020 2020  ppend(.         
-0001e6d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001e6e0: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
-0001e6f0: 4d75 7374 2069 6e63 6c75 6465 2061 7420  Must include at 
-0001e700: 6c65 6173 7420 2573 2075 7070 6572 6361  least %s upperca
-0001e710: 7365 2229 0a20 2020 2020 2020 2020 2020  se").           
-0001e720: 2020 2020 2020 2020 2020 2020 2025 2073               % s
-0001e730: 7472 2873 656c 662e 7570 7065 7229 0a20  tr(self.upper). 
-0001e740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e750: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-0001e760: 2065 6c69 6620 7365 6c66 2e75 7070 6572   elif self.upper
-0001e770: 203d 3d20 3020 616e 6420 7365 6c66 2e75   == 0 and self.u
-0001e780: 7070 6572 2069 7320 6e6f 7420 4661 6c73  pper is not Fals
-0001e790: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0001e7a0: 2020 2069 6620 6c65 6e28 616c 6c5f 7570     if len(all_up
-0001e7b0: 7065 7229 203e 2030 3a0a 2020 2020 2020  per) > 0:.      
-0001e7c0: 2020 2020 2020 2020 2020 2020 2020 6661                fa
-0001e7d0: 696c 7572 6573 2e61 7070 656e 6428 0a20  ilures.append(. 
-0001e7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7f0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
-0001e800: 736c 6174 6f72 2822 4d61 7920 6e6f 7420  slator("May not 
-0001e810: 696e 636c 7564 6520 616e 7920 7570 7065  include any uppe
-0001e820: 7263 6173 6520 6c65 7474 6572 7322 290a  rcase letters").
-0001e830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e840: 2020 2020 290a 2020 2020 2020 2020 6966      ).        if
-0001e850: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
-0001e860: 2e6c 6f77 6572 2c20 696e 7429 3a0a 2020  .lower, int):.  
-0001e870: 2020 2020 2020 2020 2020 616c 6c5f 6c6f            all_lo
-0001e880: 7765 7220 3d20 7265 2e66 696e 6461 6c6c  wer = re.findall
-0001e890: 2822 5b61 2d7a 5d22 2c20 7661 6c75 6529  ("[a-z]", value)
-0001e8a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001e8b0: 7365 6c66 2e6c 6f77 6572 203e 2030 3a0a  self.lower > 0:.
-0001e8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e8d0: 6966 206e 6f74 206c 656e 2861 6c6c 5f6c  if not len(all_l
-0001e8e0: 6f77 6572 2920 3e3d 2073 656c 662e 6c6f  ower) >= self.lo
-0001e8f0: 7765 723a 0a20 2020 2020 2020 2020 2020  wer:.           
-0001e900: 2020 2020 2020 2020 2066 6169 6c75 7265           failure
-0001e910: 732e 6170 7065 6e64 280a 2020 2020 2020  s.append(.      
-0001e920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e930: 2020 7365 6c66 2e74 7261 6e73 6c61 746f    self.translato
-0001e940: 7228 224d 7573 7420 696e 636c 7564 6520  r("Must include 
-0001e950: 6174 206c 6561 7374 2025 7320 6c6f 7765  at least %s lowe
-0001e960: 7263 6173 6522 290a 2020 2020 2020 2020  rcase").        
-0001e970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e980: 2520 7374 7228 7365 6c66 2e6c 6f77 6572  % str(self.lower
-0001e990: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001e9a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001e9b0: 2020 2020 656c 6966 2073 656c 662e 6c6f      elif self.lo
-0001e9c0: 7765 7220 3d3d 2030 2061 6e64 2073 656c  wer == 0 and sel
-0001e9d0: 662e 6c6f 7765 7220 6973 206e 6f74 2046  f.lower is not F
-0001e9e0: 616c 7365 3a0a 2020 2020 2020 2020 2020  alse:.          
-0001e9f0: 2020 2020 2020 6966 206c 656e 2861 6c6c        if len(all
-0001ea00: 5f6c 6f77 6572 2920 3e20 303a 0a20 2020  _lower) > 0:.   
-0001ea10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ea20: 2066 6169 6c75 7265 732e 6170 7065 6e64   failures.append
-0001ea30: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001ea40: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0001ea50: 7261 6e73 6c61 746f 7228 224d 6179 206e  ranslator("May n
-0001ea60: 6f74 2069 6e63 6c75 6465 2061 6e79 206c  ot include any l
-0001ea70: 6f77 6572 6361 7365 206c 6574 7465 7273  owercase letters
-0001ea80: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-0001ea90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001eaa0: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
-0001eab0: 656c 662e 6e75 6d62 6572 2c20 696e 7429  elf.number, int)
-0001eac0: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
-0001ead0: 6c5f 6e75 6d62 6572 203d 2072 652e 6669  l_number = re.fi
-0001eae0: 6e64 616c 6c28 225b 302d 395d 222c 2076  ndall("[0-9]", v
-0001eaf0: 616c 7565 290a 2020 2020 2020 2020 2020  alue).          
-0001eb00: 2020 6966 2073 656c 662e 6e75 6d62 6572    if self.number
-0001eb10: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
-0001eb20: 2020 2020 2020 6e75 6d62 6572 7320 3d20        numbers = 
-0001eb30: 226e 756d 6265 7222 0a20 2020 2020 2020  "number".       
-0001eb40: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-0001eb50: 2e6e 756d 6265 7220 3e20 313a 0a20 2020  .number > 1:.   
-0001eb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001eb70: 206e 756d 6265 7273 203d 2022 6e75 6d62   numbers = "numb
-0001eb80: 6572 7322 0a20 2020 2020 2020 2020 2020  ers".           
-0001eb90: 2020 2020 206e 756d 6265 7273 203d 2073       numbers = s
-0001eba0: 656c 662e 7472 616e 736c 6174 6f72 286e  elf.translator(n
-0001ebb0: 756d 6265 7273 290a 2020 2020 2020 2020  umbers).        
-0001ebc0: 2020 2020 2020 2020 6966 206e 6f74 206c          if not l
-0001ebd0: 656e 2861 6c6c 5f6e 756d 6265 7229 203e  en(all_number) >
-0001ebe0: 3d20 7365 6c66 2e6e 756d 6265 723a 0a20  = self.number:. 
-0001ebf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ec00: 2020 2066 6169 6c75 7265 732e 6170 7065     failures.appe
-0001ec10: 6e64 280a 2020 2020 2020 2020 2020 2020  nd(.            
-0001ec20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001ec30: 2e74 7261 6e73 6c61 746f 7228 224d 7573  .translator("Mus
-0001ec40: 7420 696e 636c 7564 6520 6174 206c 6561  t include at lea
-0001ec50: 7374 2025 7320 2573 2229 0a20 2020 2020  st %s %s").     
+00009d50: 454d 4149 4c28 2928 2761 6263 4064 6566  EMAIL()('abc@def
+00009d60: 2e63 5f6d 2729 2020 2020 2020 2020 2320  .c_m')        # 
+00009d70: 756e 6465 7273 636f 7265 2069 6e20 544c  underscore in TL
+00009d80: 440a 2020 2020 2020 2020 2020 2020 2827  D.            ('
+00009d90: 6162 6340 6465 662e 635f 6d27 2c20 2765  abc@def.c_m', 'e
+00009da0: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
+00009db0: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
+00009dc0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+00009dd0: 454d 4149 4c28 2928 274e 6f74 416e 456d  EMAIL()('NotAnEm
+00009de0: 6169 6c27 2920 2020 2020 2020 2020 2320  ail')         # 
+00009df0: 6d69 7373 696e 6720 400a 2020 2020 2020  missing @.      
+00009e00: 2020 2020 2020 2827 4e6f 7441 6e45 6d61        ('NotAnEma
+00009e10: 696c 272c 2027 656e 7465 7220 6120 7661  il', 'enter a va
+00009e20: 6c69 6420 656d 6169 6c20 6164 6472 6573  lid email addres
+00009e30: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
+00009e40: 3e3e 3e20 4953 5f45 4d41 494c 2829 2827  >>> IS_EMAIL()('
+00009e50: 6162 6340 4e6f 7441 6e45 6d61 696c 2729  abc@NotAnEmail')
+00009e60: 2020 2020 2023 206d 6973 7369 6e67 2054       # missing T
+00009e70: 4c44 0a20 2020 2020 2020 2020 2020 2028  LD.            (
+00009e80: 2761 6263 404e 6f74 416e 456d 6169 6c27  'abc@NotAnEmail'
+00009e90: 2c20 2765 6e74 6572 2061 2076 616c 6964  , 'enter a valid
+00009ea0: 2065 6d61 696c 2061 6464 7265 7373 2729   email address')
+00009eb0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00009ec0: 2049 535f 454d 4149 4c28 2928 2763 7573   IS_EMAIL()('cus
+00009ed0: 746f 6d65 722f 6465 7061 7274 6d65 6e74  tomer/department
+00009ee0: 4065 7861 6d70 6c65 2e63 6f6d 2729 0a20  @example.com'). 
+00009ef0: 2020 2020 2020 2020 2020 2028 2763 7573             ('cus
+00009f00: 746f 6d65 722f 6465 7061 7274 6d65 6e74  tomer/department
+00009f10: 4065 7861 6d70 6c65 2e63 6f6d 272c 204e  @example.com', N
+00009f20: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00009f30: 203e 3e3e 2049 535f 454d 4149 4c28 2928   >>> IS_EMAIL()(
+00009f40: 2724 4131 3233 3435 4065 7861 6d70 6c65  '$A12345@example
+00009f50: 2e63 6f6d 2729 0a20 2020 2020 2020 2020  .com').         
+00009f60: 2020 2028 2724 4131 3233 3435 4065 7861     ('$A12345@exa
+00009f70: 6d70 6c65 2e63 6f6d 272c 204e 6f6e 6529  mple.com', None)
+00009f80: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00009f90: 2049 535f 454d 4149 4c28 2928 2721 6465   IS_EMAIL()('!de
+00009fa0: 6621 7879 7a25 6162 6340 6578 616d 706c  f!xyz%abc@exampl
+00009fb0: 652e 636f 6d27 290a 2020 2020 2020 2020  e.com').        
+00009fc0: 2020 2020 2827 2164 6566 2178 797a 2561      ('!def!xyz%a
+00009fd0: 6263 4065 7861 6d70 6c65 2e63 6f6d 272c  bc@example.com',
+00009fe0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00009ff0: 2020 203e 3e3e 2049 535f 454d 4149 4c28     >>> IS_EMAIL(
+0000a000: 2928 275f 596f 7365 6d69 7465 2e53 616d  )('_Yosemite.Sam
+0000a010: 4065 7861 6d70 6c65 2e63 6f6d 2729 0a20  @example.com'). 
+0000a020: 2020 2020 2020 2020 2020 2028 275f 596f             ('_Yo
+0000a030: 7365 6d69 7465 2e53 616d 4065 7861 6d70  semite.Sam@examp
+0000a040: 6c65 2e63 6f6d 272c 204e 6f6e 6529 0a20  le.com', None). 
+0000a050: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+0000a060: 535f 454d 4149 4c28 2928 277e 4065 7861  S_EMAIL()('~@exa
+0000a070: 6d70 6c65 2e63 6f6d 2729 0a20 2020 2020  mple.com').     
+0000a080: 2020 2020 2020 2028 277e 4065 7861 6d70         ('~@examp
+0000a090: 6c65 2e63 6f6d 272c 204e 6f6e 6529 0a20  le.com', None). 
+0000a0a0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+0000a0b0: 535f 454d 4149 4c28 2928 272e 776f 6f6c  S_EMAIL()('.wool
+0000a0c0: 7940 6578 616d 706c 652e 636f 6d27 2920  y@example.com') 
+0000a0d0: 2020 2020 2020 2320 646f 7420 7374 6172        # dot star
+0000a0e0: 7473 206e 616d 650a 2020 2020 2020 2020  ts name.        
+0000a0f0: 2020 2020 2827 2e77 6f6f 6c79 4065 7861      ('.wooly@exa
+0000a100: 6d70 6c65 2e63 6f6d 272c 2027 656e 7465  mple.com', 'ente
+0000a110: 7220 6120 7661 6c69 6420 656d 6169 6c20  r a valid email 
+0000a120: 6164 6472 6573 7327 290a 2020 2020 2020  address').      
+0000a130: 2020 2020 2020 3e3e 3e20 4953 5f45 4d41        >>> IS_EMA
+0000a140: 494c 2829 2827 776f 2e2e 6f6c 7940 6578  IL()('wo..oly@ex
+0000a150: 616d 706c 652e 636f 6d27 2920 2020 2020  ample.com')     
+0000a160: 2023 2061 646a 6163 656e 7420 646f 7473   # adjacent dots
+0000a170: 2069 6e20 6e61 6d65 0a20 2020 2020 2020   in name.       
+0000a180: 2020 2020 2028 2777 6f2e 2e6f 6c79 4065       ('wo..oly@e
+0000a190: 7861 6d70 6c65 2e63 6f6d 272c 2027 656e  xample.com', 'en
+0000a1a0: 7465 7220 6120 7661 6c69 6420 656d 6169  ter a valid emai
+0000a1b0: 6c20 6164 6472 6573 7327 290a 2020 2020  l address').    
+0000a1c0: 2020 2020 2020 2020 3e3e 3e20 4953 5f45          >>> IS_E
+0000a1d0: 4d41 494c 2829 2827 706f 6f74 6965 7461  MAIL()('pootieta
+0000a1e0: 6e67 2e40 6578 616d 706c 652e 636f 6d27  ng.@example.com'
+0000a1f0: 2920 2023 2064 6f74 2065 6e64 7320 6e61  )  # dot ends na
+0000a200: 6d65 0a20 2020 2020 2020 2020 2020 2028  me.            (
+0000a210: 2770 6f6f 7469 6574 616e 672e 4065 7861  'pootietang.@exa
+0000a220: 6d70 6c65 2e63 6f6d 272c 2027 656e 7465  mple.com', 'ente
+0000a230: 7220 6120 7661 6c69 6420 656d 6169 6c20  r a valid email 
+0000a240: 6164 6472 6573 7327 290a 2020 2020 2020  address').      
+0000a250: 2020 2020 2020 3e3e 3e20 4953 5f45 4d41        >>> IS_EMA
+0000a260: 494c 2829 2827 2e40 6578 616d 706c 652e  IL()('.@example.
+0000a270: 636f 6d27 2920 2020 2020 2020 2020 2020  com')           
+0000a280: 2023 206e 616d 6520 6973 2062 6172 6520   # name is bare 
+0000a290: 646f 740a 2020 2020 2020 2020 2020 2020  dot.            
+0000a2a0: 2827 2e40 6578 616d 706c 652e 636f 6d27  ('.@example.com'
+0000a2b0: 2c20 2765 6e74 6572 2061 2076 616c 6964  , 'enter a valid
+0000a2c0: 2065 6d61 696c 2061 6464 7265 7373 2729   email address')
+0000a2d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+0000a2e0: 2049 535f 454d 4149 4c28 2928 2749 6d61   IS_EMAIL()('Ima
+0000a2f0: 2e46 6f6f 6c40 6578 616d 706c 652e 636f  .Fool@example.co
+0000a300: 6d27 290a 2020 2020 2020 2020 2020 2020  m').            
+0000a310: 2827 496d 612e 466f 6f6c 4065 7861 6d70  ('Ima.Fool@examp
+0000a320: 6c65 2e63 6f6d 272c 204e 6f6e 6529 0a20  le.com', None). 
+0000a330: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+0000a340: 535f 454d 4149 4c28 2928 2749 6d61 2046  S_EMAIL()('Ima F
+0000a350: 6f6f 6c40 6578 616d 706c 652e 636f 6d27  ool@example.com'
+0000a360: 2920 2020 2020 2320 7370 6163 6520 696e  )     # space in
+0000a370: 206e 616d 650a 2020 2020 2020 2020 2020   name.          
+0000a380: 2020 2827 496d 6120 466f 6f6c 4065 7861    ('Ima Fool@exa
+0000a390: 6d70 6c65 2e63 6f6d 272c 2027 656e 7465  mple.com', 'ente
+0000a3a0: 7220 6120 7661 6c69 6420 656d 6169 6c20  r a valid email 
+0000a3b0: 6164 6472 6573 7327 290a 2020 2020 2020  address').      
+0000a3c0: 2020 2020 2020 3e3e 3e20 4953 5f45 4d41        >>> IS_EMA
+0000a3d0: 494c 2829 2827 6c6f 6361 6c67 7579 406c  IL()('localguy@l
+0000a3e0: 6f63 616c 686f 7374 2729 2020 2020 2020  ocalhost')      
+0000a3f0: 2023 206c 6f63 616c 686f 7374 2061 7320   # localhost as 
+0000a400: 646f 6d61 696e 0a20 2020 2020 2020 2020  domain.         
+0000a410: 2020 2028 276c 6f63 616c 6775 7940 6c6f     ('localguy@lo
+0000a420: 6361 6c68 6f73 7427 2c20 4e6f 6e65 290a  calhost', None).
+0000a430: 0a20 2020 2022 2222 0a0a 2020 2020 2320  .    """..    # 
+0000a440: 4e4f 5445 3a20 7573 6520 7468 6573 6520  NOTE: use these 
+0000a450: 7769 7468 2066 6c61 6773 203d 2072 652e  with flags = re.
+0000a460: 5645 5242 4f53 4520 7c20 7265 2e49 474e  VERBOSE | re.IGN
+0000a470: 4f52 4543 4153 450a 2020 2020 5245 4745  ORECASE.    REGE
+0000a480: 585f 424f 4459 203d 2072 2222 220a 2020  X_BODY = r""".  
+0000a490: 2020 2020 2020 5e28 3f21 5c2e 2920 2020        ^(?!\.)   
+0000a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a4b0: 2020 2020 2020 2020 2320 6e61 6d65 206d          # name m
+0000a4c0: 6179 206e 6f74 2062 6567 696e 2077 6974  ay not begin wit
+0000a4d0: 6820 6120 646f 740a 2020 2020 2020 2020  h a dot.        
+0000a4e0: 280a 2020 2020 2020 2020 2020 5b2d 612d  (.          [-a-
+0000a4f0: 7a30 2d39 215c 2324 2526 272a 2b2f 3d3f  z0-9!\#$%&'*+/=?
+0000a500: 5e5f 607b 7c7d 7e5d 2020 2020 2320 616c  ^_`{|}~]    # al
+0000a510: 6c20 6c65 6761 6c20 6368 6172 6163 7465  l legal characte
+0000a520: 7273 2065 7863 6570 7420 646f 740a 2020  rs except dot.  
+0000a530: 2020 2020 2020 2020 7c0a 2020 2020 2020          |.      
+0000a540: 2020 2020 283f 3c21 5c2e 295c 2e20 2020      (?<!\.)\.   
+0000a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a560: 2020 2020 2320 7369 6e67 6c65 2064 6f74      # single dot
+0000a570: 7320 6f6e 6c79 0a20 2020 2020 2020 2029  s only.        )
+0000a580: 2b0a 2020 2020 2020 2020 283f 3c21 5c2e  +.        (?<!\.
+0000a590: 2924 2020 2020 2020 2020 2020 2020 2020  )$              
+0000a5a0: 2020 2020 2020 2020 2020 2020 2320 6e61              # na
+0000a5b0: 6d65 206d 6179 206e 6f74 2065 6e64 2077  me may not end w
+0000a5c0: 6974 6820 6120 646f 740a 2020 2020 2222  ith a dot.    ""
+0000a5d0: 220a 2020 2020 5245 4745 585f 444f 4d41  ".    REGEX_DOMA
+0000a5e0: 494e 203d 2072 2222 220a 2020 2020 2020  IN = r""".      
+0000a5f0: 2020 280a 2020 2020 2020 2020 2020 6c6f    (.          lo
+0000a600: 6361 6c68 6f73 740a 2020 2020 2020 2020  calhost.        
+0000a610: 2020 7c0a 2020 2020 2020 2020 2020 280a    |.          (.
+0000a620: 2020 2020 2020 2020 2020 2020 5b61 2d7a              [a-z
+0000a630: 302d 395d 2020 2020 2020 2320 5b73 7562  0-9]      # [sub
+0000a640: 5d64 6f6d 6169 6e20 6265 6769 6e73 2077  ]domain begins w
+0000a650: 6974 6820 616c 7068 616e 756d 6572 6963  ith alphanumeric
+0000a660: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
+0000a670: 2020 2020 2020 2020 2020 2020 205b 2d5c               [-\
+0000a680: 775d 2a20 2020 2020 2023 2061 6c70 6861  w]*      # alpha
+0000a690: 6e75 6d65 7269 632c 2075 6e64 6572 7363  numeric, undersc
+0000a6a0: 6f72 652c 2064 6f74 2c20 6879 7068 656e  ore, dot, hyphen
+0000a6b0: 0a20 2020 2020 2020 2020 2020 2020 205b  .              [
+0000a6c0: 612d 7a30 2d39 5d20 2020 2023 2065 6e64  a-z0-9]    # end
+0000a6d0: 696e 6720 616c 7068 616e 756d 6572 6963  ing alphanumeric
+0000a6e0: 0a20 2020 2020 2020 2020 2020 2029 3f0a  .            )?.
+0000a6f0: 2020 2020 2020 2020 2020 5c2e 2020 2020            \.    
+0000a700: 2020 2020 2020 2020 2020 2320 656e 6469            # endi
+0000a710: 6e67 2064 6f74 0a20 2020 2020 2020 2020  ng dot.         
+0000a720: 2029 2b0a 2020 2020 2020 2020 2020 5b61   )+.          [a
+0000a730: 2d7a 5d7b 322c 7d20 2020 2020 2020 2320  -z]{2,}       # 
+0000a740: 544c 4420 616c 7068 612d 6f6e 6c79 0a20  TLD alpha-only. 
+0000a750: 2020 2020 2020 2924 0a20 2020 2022 2222        )$.    """
+0000a760: 0a20 2020 2023 2072 6567 6578 5f70 726f  .    # regex_pro
+0000a770: 706f 7365 645f 6275 745f 6661 696c 6564  posed_but_failed
+0000a780: 203d 2072 652e 636f 6d70 696c 6528 7227   = re.compile(r'
+0000a790: 5e28 5b5c 775c 215c 2324 5c25 5c26 5c27  ^([\w\!\#$\%\&\'
+0000a7a0: 5c2a 5c2b 5c2d 5c2f 5c3d 5c3f 5c5e 5c60  \*\+\-\/\=\?\^\`
+0000a7b0: 7b5c 7c5c 7d5c 7e5d 2b5c 2e29 2a5b 5c77  {\|\}\~]+\.)*[\w
+0000a7c0: 5c21 5c23 245c 255c 265c 275c 2a5c 2b5c  \!\#$\%\&\'\*\+\
+0000a7d0: 2d5c 2f5c 3d5c 3f5c 5e5c 607b 5c7c 5c7d  -\/\=\?\^\`{\|\}
+0000a7e0: 5c7e 5d2b 4028 2828 2828 5b61 2d7a 302d  \~]+@((((([a-z0-
+0000a7f0: 395d 7b31 7d5b 612d 7a30 2d39 5c2d 5d7b  9]{1}[a-z0-9\-]{
+0000a800: 302c 3632 7d5b 612d 7a30 2d39 5d7b 317d  0,62}[a-z0-9]{1}
+0000a810: 297c 5b61 2d7a 5d29 5c2e 292b 5b61 2d7a  )|[a-z])\.)+[a-z
+0000a820: 5d7b 322c 367d 297c 285c 647b 312c 337d  ]{2,6})|(\d{1,3}
+0000a830: 5c2e 297b 337d 5c64 7b31 2c33 7d28 5c3a  \.){3}\d{1,3}(\:
+0000a840: 5c64 7b31 2c35 7d29 3f29 2427 2c20 7265  \d{1,5})?)$', re
+0000a850: 2e56 4552 424f 5345 207c 2072 652e 4947  .VERBOSE | re.IG
+0000a860: 4e4f 5245 4341 5345 290a 0a20 2020 2064  NORECASE)..    d
+0000a870: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+0000a880: 2020 2020 2073 656c 662c 2062 616e 6e65       self, banne
+0000a890: 643d 4e6f 6e65 2c20 666f 7263 6564 3d4e  d=None, forced=N
+0000a8a0: 6f6e 652c 2065 7272 6f72 5f6d 6573 7361  one, error_messa
+0000a8b0: 6765 3d22 456e 7465 7220 6120 7661 6c69  ge="Enter a vali
+0000a8c0: 6420 656d 6169 6c20 6164 6472 6573 7322  d email address"
+0000a8d0: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+0000a8e0: 6966 2069 7369 6e73 7461 6e63 6528 6261  if isinstance(ba
+0000a8f0: 6e6e 6564 2c20 7374 7229 3a0a 2020 2020  nned, str):.    
+0000a900: 2020 2020 2020 2020 6261 6e6e 6564 203d          banned =
+0000a910: 2072 652e 636f 6d70 696c 6528 6261 6e6e   re.compile(bann
+0000a920: 6564 290a 2020 2020 2020 2020 6966 2069  ed).        if i
+0000a930: 7369 6e73 7461 6e63 6528 666f 7263 6564  sinstance(forced
+0000a940: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+0000a950: 2020 2020 666f 7263 6564 203d 2072 652e      forced = re.
+0000a960: 636f 6d70 696c 6528 666f 7263 6564 290a  compile(forced).
+0000a970: 2020 2020 2020 2020 7365 6c66 2e62 616e          self.ban
+0000a980: 6e65 6420 3d20 6261 6e6e 6564 0a20 2020  ned = banned.   
+0000a990: 2020 2020 2073 656c 662e 666f 7263 6564       self.forced
+0000a9a0: 203d 2066 6f72 6365 640a 2020 2020 2020   = forced.      
+0000a9b0: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
+0000a9c0: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
+0000a9d0: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
+0000a9e0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+0000a9f0: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+0000aa00: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
+0000aa10: 280a 2020 2020 2020 2020 2020 2020 6e6f  (.            no
+0000aa20: 7420 2869 7369 6e73 7461 6e63 6528 7661  t (isinstance(va
+0000aa30: 6c75 652c 2028 6261 7365 7374 7269 6e67  lue, (basestring
+0000aa40: 2c20 756e 6963 6f64 6554 2929 290a 2020  , unicodeT))).  
+0000aa50: 2020 2020 2020 2020 2020 6f72 206e 6f74            or not
+0000aa60: 2076 616c 7565 0a20 2020 2020 2020 2020   value.         
+0000aa70: 2020 206f 7220 2240 2220 6e6f 7420 696e     or "@" not in
+0000aa80: 2076 616c 7565 0a20 2020 2020 2020 2029   value.        )
+0000aa90: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0000aaa0: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+0000aab0: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
+0000aac0: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
+0000aad0: 6573 7361 6765 2929 0a0a 2020 2020 2020  essage))..      
+0000aae0: 2020 626f 6479 2c20 646f 6d61 696e 203d    body, domain =
+0000aaf0: 2076 616c 7565 2e72 7370 6c69 7428 2240   value.rsplit("@
+0000ab00: 222c 2031 290a 0a20 2020 2020 2020 2074  ", 1)..        t
+0000ab10: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
+0000ab20: 7265 6765 785f 666c 6167 7320 3d20 7265  regex_flags = re
+0000ab30: 2e56 4552 424f 5345 207c 2072 652e 4947  .VERBOSE | re.IG
+0000ab40: 4e4f 5245 4341 5345 0a20 2020 2020 2020  NORECASE.       
+0000ab50: 2020 2020 206d 6174 6368 5f62 6f64 7920       match_body 
+0000ab60: 3d20 7265 2e6d 6174 6368 2873 656c 662e  = re.match(self.
+0000ab70: 5245 4745 585f 424f 4459 2c20 626f 6479  REGEX_BODY, body
+0000ab80: 2c20 7265 6765 785f 666c 6167 7329 0a20  , regex_flags). 
+0000ab90: 2020 2020 2020 2020 2020 206d 6174 6368             match
+0000aba0: 5f64 6f6d 6169 6e20 3d20 7265 2e6d 6174  _domain = re.mat
+0000abb0: 6368 2873 656c 662e 5245 4745 585f 444f  ch(self.REGEX_DO
+0000abc0: 4d41 494e 2c20 646f 6d61 696e 2c20 7265  MAIN, domain, re
+0000abd0: 6765 785f 666c 6167 7329 0a0a 2020 2020  gex_flags)..    
+0000abe0: 2020 2020 2020 2020 6966 206e 6f74 206d          if not m
+0000abf0: 6174 6368 5f64 6f6d 6169 6e3a 0a20 2020  atch_domain:.   
+0000ac00: 2020 2020 2020 2020 2020 2020 2023 2063               # c
+0000ac10: 6865 636b 2066 6f72 2049 6e74 6572 6e61  heck for Interna
+0000ac20: 7469 6f6e 616c 697a 6564 2044 6f6d 6169  tionalized Domai
+0000ac30: 6e20 4e61 6d65 730a 2020 2020 2020 2020  n Names.        
+0000ac40: 2020 2020 2020 2020 2320 7365 6520 6874          # see ht
+0000ac50: 7470 733a 2f2f 646f 6373 2e70 7974 686f  tps://docs.pytho
+0000ac60: 6e2e 6f72 672f 322f 6c69 6272 6172 792f  n.org/2/library/
+0000ac70: 636f 6465 6373 2e68 746d 6c23 6d6f 6475  codecs.html#modu
+0000ac80: 6c65 2d65 6e63 6f64 696e 6773 2e69 646e  le-encodings.idn
+0000ac90: 610a 2020 2020 2020 2020 2020 2020 2020  a.              
+0000aca0: 2020 646f 6d61 696e 5f65 6e63 6f64 6564    domain_encoded
+0000acb0: 203d 2074 6f5f 756e 6963 6f64 6528 646f   = to_unicode(do
+0000acc0: 6d61 696e 292e 656e 636f 6465 2822 6964  main).encode("id
+0000acd0: 6e61 2229 2e64 6563 6f64 6528 2261 7363  na").decode("asc
+0000ace0: 6969 2229 0a20 2020 2020 2020 2020 2020  ii").           
+0000acf0: 2020 2020 206d 6174 6368 5f64 6f6d 6169       match_domai
+0000ad00: 6e20 3d20 7265 2e6d 6174 6368 2873 656c  n = re.match(sel
+0000ad10: 662e 5245 4745 585f 444f 4d41 494e 2c20  f.REGEX_DOMAIN, 
+0000ad20: 646f 6d61 696e 5f65 6e63 6f64 6564 2c20  domain_encoded, 
+0000ad30: 7265 6765 785f 666c 6167 7329 0a0a 2020  regex_flags)..  
+0000ad40: 2020 2020 2020 2020 2020 6d61 7463 6820            match 
+0000ad50: 3d20 286d 6174 6368 5f62 6f64 7920 6973  = (match_body is
+0000ad60: 206e 6f74 204e 6f6e 6529 2061 6e64 2028   not None) and (
+0000ad70: 6d61 7463 685f 646f 6d61 696e 2069 7320  match_domain is 
+0000ad80: 6e6f 7420 4e6f 6e65 290a 2020 2020 2020  not None).      
+0000ad90: 2020 6578 6365 7074 2028 5479 7065 4572    except (TypeEr
+0000ada0: 726f 722c 2055 6e69 636f 6465 4572 726f  ror, UnicodeErro
+0000adb0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+0000adc0: 2320 5661 6c75 6520 6d61 7920 6e6f 7420  # Value may not 
+0000add0: 6265 2061 2073 7472 696e 6720 7768 6572  be a string wher
+0000ade0: 6520 7765 2063 616e 206c 6f6f 6b20 666f  e we can look fo
+0000adf0: 7220 6d61 7463 6865 732e 0a20 2020 2020  r matches..     
+0000ae00: 2020 2020 2020 2023 2045 7861 6d70 6c65         # Example
+0000ae10: 3a20 7765 2772 6520 6361 6c6c 696e 6720  : we're calling 
+0000ae20: 414e 595f 4f46 2066 6f72 6d61 7474 6572  ANY_OF formatter
+0000ae30: 2061 6e64 2049 535f 454d 4149 4c20 6973   and IS_EMAIL is
+0000ae40: 2061 736b 6564 2074 6f20 7661 6c69 6461   asked to valida
+0000ae50: 7465 2061 2064 6174 652e 0a20 2020 2020  te a date..     
+0000ae60: 2020 2020 2020 206d 6174 6368 203d 204e         match = N
+0000ae70: 6f6e 650a 2020 2020 2020 2020 6966 206d  one.        if m
+0000ae80: 6174 6368 3a0a 2020 2020 2020 2020 2020  atch:.          
+0000ae90: 2020 6966 2028 6e6f 7420 7365 6c66 2e62    if (not self.b
+0000aea0: 616e 6e65 6420 6f72 206e 6f74 2073 656c  anned or not sel
+0000aeb0: 662e 6261 6e6e 6564 2e6d 6174 6368 2864  f.banned.match(d
+0000aec0: 6f6d 6169 6e29 2920 616e 6420 280a 2020  omain)) and (.  
+0000aed0: 2020 2020 2020 2020 2020 2020 2020 6e6f                no
+0000aee0: 7420 7365 6c66 2e66 6f72 6365 6420 6f72  t self.forced or
+0000aef0: 2073 656c 662e 666f 7263 6564 2e6d 6174   self.forced.mat
+0000af00: 6368 2864 6f6d 6169 6e29 0a20 2020 2020  ch(domain).     
+0000af10: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+0000af20: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000af30: 2076 616c 7565 0a20 2020 2020 2020 2072   value.        r
+0000af40: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+0000af50: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+0000af60: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+0000af70: 6d65 7373 6167 6529 290a 0a0a 636c 6173  message))...clas
+0000af80: 7320 4953 5f4c 4953 545f 4f46 5f45 4d41  s IS_LIST_OF_EMA
+0000af90: 494c 5328 5661 6c69 6461 746f 7229 3a0a  ILS(Validator):.
+0000afa0: 2020 2020 2222 220a 2020 2020 4578 616d      """.    Exam
+0000afb0: 706c 653a 0a20 2020 2020 2020 2055 7365  ple:.        Use
+0000afc0: 6420 6173 3a3a 0a0a 2020 2020 2020 2020  d as::..        
+0000afd0: 4669 656c 6428 2765 6d61 696c 7327 2c20  Field('emails', 
+0000afe0: 276c 6973 743a 7374 7269 6e67 272c 0a20  'list:string',. 
+0000aff0: 2020 2020 2020 2020 2020 2020 2077 6964               wid
+0000b000: 6765 743d 5351 4c46 4f52 4d2e 7769 6467  get=SQLFORM.widg
+0000b010: 6574 732e 7465 7874 2e77 6964 6765 742c  ets.text.widget,
+0000b020: 0a20 2020 2020 2020 2020 2020 2020 2072  .              r
+0000b030: 6571 7569 7265 733d 4953 5f4c 4953 545f  equires=IS_LIST_
+0000b040: 4f46 5f45 4d41 494c 5328 292c 0a20 2020  OF_EMAILS(),.   
+0000b050: 2020 2020 2020 2020 2020 2072 6570 7265             repre
+0000b060: 7365 6e74 3d6c 616d 6264 6120 762c 2072  sent=lambda v, r
+0000b070: 3a20 5c0a 2020 2020 2020 2020 2020 2020  : \.            
+0000b080: 2020 2020 584d 4c28 272c 2027 2e6a 6f69      XML(', '.joi
+0000b090: 6e28 5b41 2878 2c20 5f68 7265 663d 276d  n([A(x, _href='m
+0000b0a0: 6169 6c74 6f3a 272b 7829 2e78 6d6c 2829  ailto:'+x).xml()
+0000b0b0: 2066 6f72 2078 2069 6e20 2876 206f 7220   for x in (v or 
+0000b0c0: 5b5d 295d 2929 0a20 2020 2020 2020 2020  [])])).         
+0000b0d0: 2020 2020 290a 2020 2020 2222 220a 0a20      ).    """.. 
+0000b0e0: 2020 2052 4547 4558 5f4e 4f54 5f45 4d41     REGEX_NOT_EMA
+0000b0f0: 494c 5f53 504c 4954 5445 5220 3d20 7222  IL_SPLITTER = r"
+0000b100: 5b5e 2c3b 5c73 5d2b 220a 0a20 2020 2064  [^,;\s]+"..    d
+0000b110: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+0000b120: 2c20 6572 726f 725f 6d65 7373 6167 653d  , error_message=
+0000b130: 2249 6e76 616c 6964 2065 6d61 696c 733a  "Invalid emails:
+0000b140: 2025 7322 293a 0a20 2020 2020 2020 2073   %s"):.        s
+0000b150: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+0000b160: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
+0000b170: 650a 0a20 2020 2064 6566 2076 616c 6964  e..    def valid
+0000b180: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
+0000b190: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
+0000b1a0: 3a0a 2020 2020 2020 2020 6261 645f 656d  :.        bad_em
+0000b1b0: 6169 6c73 203d 205b 5d0a 2020 2020 2020  ails = [].      
+0000b1c0: 2020 6620 3d20 4953 5f45 4d41 494c 2829    f = IS_EMAIL()
+0000b1d0: 0a20 2020 2020 2020 2066 6f72 2065 6d61  .        for ema
+0000b1e0: 696c 2069 6e20 7265 2e66 696e 6461 6c6c  il in re.findall
+0000b1f0: 2873 656c 662e 5245 4745 585f 4e4f 545f  (self.REGEX_NOT_
+0000b200: 454d 4149 4c5f 5350 4c49 5454 4552 2c20  EMAIL_SPLITTER, 
+0000b210: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+0000b220: 2020 2020 6572 726f 7220 3d20 6628 656d      error = f(em
+0000b230: 6169 6c29 5b31 5d0a 2020 2020 2020 2020  ail)[1].        
+0000b240: 2020 2020 6966 2065 7272 6f72 2061 6e64      if error and
+0000b250: 2065 6d61 696c 206e 6f74 2069 6e20 6261   email not in ba
+0000b260: 645f 656d 6169 6c73 3a0a 2020 2020 2020  d_emails:.      
+0000b270: 2020 2020 2020 2020 2020 6261 645f 656d            bad_em
+0000b280: 6169 6c73 2e61 7070 656e 6428 656d 6169  ails.append(emai
+0000b290: 6c29 0a20 2020 2020 2020 2069 6620 6261  l).        if ba
+0000b2a0: 645f 656d 6169 6c73 3a0a 2020 2020 2020  d_emails:.      
+0000b2b0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+0000b2c0: 6461 7469 6f6e 4572 726f 7228 0a20 2020  dationError(.   
+0000b2d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000b2e0: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+0000b2f0: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+0000b300: 2025 2022 2c20 222e 6a6f 696e 2862 6164   % ", ".join(bad
+0000b310: 5f65 6d61 696c 7329 0a20 2020 2020 2020  _emails).       
+0000b320: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
+0000b330: 6574 7572 6e20 7661 6c75 650a 0a20 2020  eturn value..   
+0000b340: 2064 6566 2066 6f72 6d61 7474 6572 2873   def formatter(s
+0000b350: 656c 662c 2076 616c 7565 2c20 726f 773d  elf, value, row=
+0000b360: 4e6f 6e65 293a 0a20 2020 2020 2020 2072  None):.        r
+0000b370: 6574 7572 6e20 222c 2022 2e6a 6f69 6e28  eturn ", ".join(
+0000b380: 7661 6c75 6520 6f72 205b 5d29 0a0a 0a23  value or [])...#
+0000b390: 2055 524c 2073 6368 656d 6520 736f 7572   URL scheme sour
+0000b3a0: 6365 3a0a 2320 3c68 7474 703a 2f2f 656e  ce:.# <http://en
+0000b3b0: 2e77 696b 6970 6564 6961 2e6f 7267 2f77  .wikipedia.org/w
+0000b3c0: 696b 692f 5552 495f 7363 6865 6d65 3e20  iki/URI_scheme> 
+0000b3d0: 6f62 7461 696e 6564 206f 6e20 3230 3038  obtained on 2008
+0000b3e0: 2d4e 6f76 2d31 300a 0a6f 6666 6963 6961  -Nov-10..officia
+0000b3f0: 6c5f 7572 6c5f 7363 6865 6d65 7320 3d20  l_url_schemes = 
+0000b400: 5b0a 2020 2020 2261 6161 222c 0a20 2020  [.    "aaa",.   
+0000b410: 2022 6161 6173 222c 0a20 2020 2022 6163   "aaas",.    "ac
+0000b420: 6170 222c 0a20 2020 2022 6361 7022 2c0a  ap",.    "cap",.
+0000b430: 2020 2020 2263 6964 222c 0a20 2020 2022      "cid",.    "
+0000b440: 6372 6964 222c 0a20 2020 2022 6461 7461  crid",.    "data
+0000b450: 222c 0a20 2020 2022 6461 7622 2c0a 2020  ",.    "dav",.  
+0000b460: 2020 2264 6963 7422 2c0a 2020 2020 2264    "dict",.    "d
+0000b470: 6e73 222c 0a20 2020 2022 6661 7822 2c0a  ns",.    "fax",.
+0000b480: 2020 2020 2266 696c 6522 2c0a 2020 2020      "file",.    
+0000b490: 2266 7470 222c 0a20 2020 2022 676f 222c  "ftp",.    "go",
+0000b4a0: 0a20 2020 2022 676f 7068 6572 222c 0a20  .    "gopher",. 
+0000b4b0: 2020 2022 6833 3233 222c 0a20 2020 2022     "h323",.    "
+0000b4c0: 6874 7470 222c 0a20 2020 2022 6874 7470  http",.    "http
+0000b4d0: 7322 2c0a 2020 2020 2269 6361 7022 2c0a  s",.    "icap",.
+0000b4e0: 2020 2020 2269 6d22 2c0a 2020 2020 2269      "im",.    "i
+0000b4f0: 6d61 7022 2c0a 2020 2020 2269 6e66 6f22  map",.    "info"
+0000b500: 2c0a 2020 2020 2269 7070 222c 0a20 2020  ,.    "ipp",.   
+0000b510: 2022 6972 6973 222c 0a20 2020 2022 6972   "iris",.    "ir
+0000b520: 6973 2e62 6565 7022 2c0a 2020 2020 2269  is.beep",.    "i
+0000b530: 7269 732e 7870 6322 2c0a 2020 2020 2269  ris.xpc",.    "i
+0000b540: 7269 732e 7870 6373 222c 0a20 2020 2022  ris.xpcs",.    "
+0000b550: 6972 6973 2e6c 7773 222c 0a20 2020 2022  iris.lws",.    "
+0000b560: 6c64 6170 222c 0a20 2020 2022 6d61 696c  ldap",.    "mail
+0000b570: 746f 222c 0a20 2020 2022 6d69 6422 2c0a  to",.    "mid",.
+0000b580: 2020 2020 226d 6f64 656d 222c 0a20 2020      "modem",.   
+0000b590: 2022 6d73 7270 222c 0a20 2020 2022 6d73   "msrp",.    "ms
+0000b5a0: 7270 7322 2c0a 2020 2020 226d 7471 7022  rps",.    "mtqp"
+0000b5b0: 2c0a 2020 2020 226d 7570 6461 7465 222c  ,.    "mupdate",
+0000b5c0: 0a20 2020 2022 6e65 7773 222c 0a20 2020  .    "news",.   
+0000b5d0: 2022 6e66 7322 2c0a 2020 2020 226e 6e74   "nfs",.    "nnt
+0000b5e0: 7022 2c0a 2020 2020 226f 7061 7175 656c  p",.    "opaquel
+0000b5f0: 6f63 6b74 6f6b 656e 222c 0a20 2020 2022  ocktoken",.    "
+0000b600: 706f 7022 2c0a 2020 2020 2270 7265 7322  pop",.    "pres"
+0000b610: 2c0a 2020 2020 2270 726f 7370 6572 6f22  ,.    "prospero"
+0000b620: 2c0a 2020 2020 2272 7473 7022 2c0a 2020  ,.    "rtsp",.  
+0000b630: 2020 2273 6572 7669 6365 222c 0a20 2020    "service",.   
+0000b640: 2022 7368 7474 7022 2c0a 2020 2020 2273   "shttp",.    "s
+0000b650: 6970 222c 0a20 2020 2022 7369 7073 222c  ip",.    "sips",
+0000b660: 0a20 2020 2022 736e 6d70 222c 0a20 2020  .    "snmp",.   
+0000b670: 2022 736f 6170 2e62 6565 7022 2c0a 2020   "soap.beep",.  
+0000b680: 2020 2273 6f61 702e 6265 6570 7322 2c0a    "soap.beeps",.
+0000b690: 2020 2020 2274 6167 222c 0a20 2020 2022      "tag",.    "
+0000b6a0: 7465 6c22 2c0a 2020 2020 2274 656c 6e65  tel",.    "telne
+0000b6b0: 7422 2c0a 2020 2020 2274 6674 7022 2c0a  t",.    "tftp",.
+0000b6c0: 2020 2020 2274 6869 736d 6573 7361 6765      "thismessage
+0000b6d0: 222c 0a20 2020 2022 7469 7022 2c0a 2020  ",.    "tip",.  
+0000b6e0: 2020 2274 7622 2c0a 2020 2020 2275 726e    "tv",.    "urn
+0000b6f0: 222c 0a20 2020 2022 7665 6d6d 6922 2c0a  ",.    "vemmi",.
+0000b700: 2020 2020 2277 6169 7322 2c0a 2020 2020      "wais",.    
+0000b710: 2278 6d6c 7270 632e 6265 6570 222c 0a20  "xmlrpc.beep",. 
+0000b720: 2020 2022 786d 6c72 7063 2e62 6565 7022     "xmlrpc.beep"
+0000b730: 2c0a 2020 2020 2278 6d70 7022 2c0a 2020  ,.    "xmpp",.  
+0000b740: 2020 227a 3339 2e35 3072 222c 0a20 2020    "z39.50r",.   
+0000b750: 2022 7a33 392e 3530 7322 2c0a 5d0a 756e   "z39.50s",.].un
+0000b760: 6f66 6669 6369 616c 5f75 726c 5f73 6368  official_url_sch
+0000b770: 656d 6573 203d 205b 0a20 2020 2022 6162  emes = [.    "ab
+0000b780: 6f75 7422 2c0a 2020 2020 2261 6469 756d  out",.    "adium
+0000b790: 7874 7261 222c 0a20 2020 2022 6169 6d22  xtra",.    "aim"
+0000b7a0: 2c0a 2020 2020 2261 6670 222c 0a20 2020  ,.    "afp",.   
+0000b7b0: 2022 6177 222c 0a20 2020 2022 6361 6c6c   "aw",.    "call
+0000b7c0: 746f 222c 0a20 2020 2022 6368 726f 6d65  to",.    "chrome
+0000b7d0: 222c 0a20 2020 2022 6376 7322 2c0a 2020  ",.    "cvs",.  
+0000b7e0: 2020 2265 6432 6b22 2c0a 2020 2020 2266    "ed2k",.    "f
+0000b7f0: 6565 6422 2c0a 2020 2020 2266 6973 6822  eed",.    "fish"
+0000b800: 2c0a 2020 2020 2267 6722 2c0a 2020 2020  ,.    "gg",.    
+0000b810: 2267 697a 6d6f 7072 6f6a 6563 7422 2c0a  "gizmoproject",.
+0000b820: 2020 2020 2269 6178 3222 2c0a 2020 2020      "iax2",.    
+0000b830: 2269 7263 222c 0a20 2020 2022 6972 6373  "irc",.    "ircs
+0000b840: 222c 0a20 2020 2022 6974 6d73 222c 0a20  ",.    "itms",. 
+0000b850: 2020 2022 6a61 7222 2c0a 2020 2020 226a     "jar",.    "j
+0000b860: 6176 6173 6372 6970 7422 2c0a 2020 2020  avascript",.    
+0000b870: 226b 6579 7061 7263 222c 0a20 2020 2022  "keyparc",.    "
+0000b880: 6c61 7374 666d 222c 0a20 2020 2022 6c64  lastfm",.    "ld
+0000b890: 6170 7322 2c0a 2020 2020 226d 6167 6e65  aps",.    "magne
+0000b8a0: 7422 2c0a 2020 2020 226d 6d73 222c 0a20  t",.    "mms",. 
+0000b8b0: 2020 2022 6d73 6e69 6d22 2c0a 2020 2020     "msnim",.    
+0000b8c0: 226d 766e 222c 0a20 2020 2022 6e6f 7465  "mvn",.    "note
+0000b8d0: 7322 2c0a 2020 2020 226e 7366 7722 2c0a  s",.    "nsfw",.
+0000b8e0: 2020 2020 2270 7379 6322 2c0a 2020 2020      "psyc",.    
+0000b8f0: 2270 6170 6172 617a 7a69 3a68 7474 7022  "paparazzi:http"
+0000b900: 2c0a 2020 2020 2272 6d69 222c 0a20 2020  ,.    "rmi",.   
+0000b910: 2022 7273 796e 6322 2c0a 2020 2020 2273   "rsync",.    "s
+0000b920: 6563 6f6e 646c 6966 6522 2c0a 2020 2020  econdlife",.    
+0000b930: 2273 676e 222c 0a20 2020 2022 736b 7970  "sgn",.    "skyp
+0000b940: 6522 2c0a 2020 2020 2273 7368 222c 0a20  e",.    "ssh",. 
+0000b950: 2020 2022 7366 7470 222c 0a20 2020 2022     "sftp",.    "
+0000b960: 736d 6222 2c0a 2020 2020 2273 6d73 222c  smb",.    "sms",
+0000b970: 0a20 2020 2022 736f 6c64 6174 222c 0a20  .    "soldat",. 
+0000b980: 2020 2022 7374 6561 6d22 2c0a 2020 2020     "steam",.    
+0000b990: 2273 766e 222c 0a20 2020 2022 7465 616d  "svn",.    "team
+0000b9a0: 7370 6561 6b22 2c0a 2020 2020 2275 6e72  speak",.    "unr
+0000b9b0: 6561 6c22 2c0a 2020 2020 2275 7432 3030  eal",.    "ut200
+0000b9c0: 3422 2c0a 2020 2020 2276 656e 7472 696c  4",.    "ventril
+0000b9d0: 6f22 2c0a 2020 2020 2276 6965 772d 736f  o",.    "view-so
+0000b9e0: 7572 6365 222c 0a20 2020 2022 7765 6263  urce",.    "webc
+0000b9f0: 616c 222c 0a20 2020 2022 7779 6369 7779  al",.    "wyciwy
+0000ba00: 6722 2c0a 2020 2020 2278 6669 7265 222c  g",.    "xfire",
+0000ba10: 0a20 2020 2022 7872 6922 2c0a 2020 2020  .    "xri",.    
+0000ba20: 2279 6d73 6772 222c 0a5d 0a61 6c6c 5f75  "ymsgr",.].all_u
+0000ba30: 726c 5f73 6368 656d 6573 203d 205b 4e6f  rl_schemes = [No
+0000ba40: 6e65 5d20 2b20 6f66 6669 6369 616c 5f75  ne] + official_u
+0000ba50: 726c 5f73 6368 656d 6573 202b 2075 6e6f  rl_schemes + uno
+0000ba60: 6666 6963 6961 6c5f 7572 6c5f 7363 6865  fficial_url_sche
+0000ba70: 6d65 730a 6874 7470 5f73 6368 656d 6573  mes.http_schemes
+0000ba80: 203d 205b 4e6f 6e65 2c20 2268 7474 7022   = [None, "http"
+0000ba90: 2c20 2268 7474 7073 225d 0a0a 2320 4465  , "https"]..# De
+0000baa0: 6669 6e65 6420 696e 2052 4643 2033 3439  fined in RFC 349
+0000bab0: 302c 2053 6563 7469 6f6e 2033 2e31 2c20  0, Section 3.1, 
+0000bac0: 5265 7175 6972 656d 656e 7420 2331 0a23  Requirement #1.#
+0000bad0: 2055 7365 2074 6869 7320 7265 6765 7820   Use this regex 
+0000bae0: 746f 2073 706c 6974 2074 6865 2061 7574  to split the aut
+0000baf0: 686f 7269 7479 2063 6f6d 706f 6e65 6e74  hority component
+0000bb00: 206f 6620 6120 756e 6963 6f64 6520 5552   of a unicode UR
+0000bb10: 4c20 696e 746f 0a23 2069 7473 2063 6f6d  L into.# its com
+0000bb20: 706f 6e65 6e74 206c 6162 656c 730a 5245  ponent labels.RE
+0000bb30: 4745 585f 4155 5448 4f52 4954 595f 5350  GEX_AUTHORITY_SP
+0000bb40: 4c49 5454 4552 203d 2022 5b5c 7530 3032  LITTER = "[\u002
+0000bb50: 655c 7533 3030 325c 7566 6630 655c 7566  e\u3002\uff0e\uf
+0000bb60: 6636 315d 220a 0a0a 6465 6620 6573 6361  f61]"...def esca
+0000bb70: 7065 5f75 6e69 636f 6465 2873 7472 696e  pe_unicode(strin
+0000bb80: 6729 3a0a 2020 2020 2222 220a 2020 2020  g):.    """.    
+0000bb90: 436f 6e76 6572 7473 2061 2075 6e69 636f  Converts a unico
+0000bba0: 6465 2073 7472 696e 6720 696e 746f 2055  de string into U
+0000bbb0: 532d 4153 4349 492c 2075 7369 6e67 2061  S-ASCII, using a
+0000bbc0: 2073 696d 706c 6520 636f 6e76 6572 7369   simple conversi
+0000bbd0: 6f6e 2073 6368 656d 652e 0a20 2020 2045  on scheme..    E
+0000bbe0: 6163 6820 756e 6963 6f64 6520 6368 6172  ach unicode char
+0000bbf0: 6163 7465 7220 7468 6174 2064 6f65 7320  acter that does 
+0000bc00: 6e6f 7420 6861 7665 2061 2055 532d 4153  not have a US-AS
+0000bc10: 4349 4920 6571 7569 7661 6c65 6e74 2069  CII equivalent i
+0000bc20: 730a 2020 2020 636f 6e76 6572 7465 6420  s.    converted 
+0000bc30: 696e 746f 2061 2055 524c 2065 7363 6170  into a URL escap
+0000bc40: 6564 2066 6f72 6d20 6261 7365 6420 6f6e  ed form based on
+0000bc50: 2069 7473 2068 6578 6164 6563 696d 616c   its hexadecimal
+0000bc60: 2076 616c 7565 2e0a 2020 2020 466f 7220   value..    For 
+0000bc70: 6578 616d 706c 652c 2074 6865 2075 6e69  example, the uni
+0000bc80: 636f 6465 2063 6861 7261 6374 6572 2027  code character '
+0000bc90: 5c5c 7534 6538 3627 2077 696c 6c20 6265  \\u4e86' will be
+0000bca0: 636f 6d65 2074 6865 2073 7472 696e 6720  come the string 
+0000bcb0: 2725 3465 2538 3627 0a0a 2020 2020 4172  '%4e%86'..    Ar
+0000bcc0: 6773 3a0a 2020 2020 2020 2020 7374 7269  gs:.        stri
+0000bcd0: 6e67 3a20 756e 6963 6f64 6520 7374 7269  ng: unicode stri
+0000bce0: 6e67 2c20 7468 6520 756e 6963 6f64 6520  ng, the unicode 
+0000bcf0: 7374 7269 6e67 2074 6f20 636f 6e76 6572  string to conver
+0000bd00: 7420 696e 746f 2061 6e0a 2020 2020 2020  t into an.      
+0000bd10: 2020 2020 2020 6573 6361 7065 6420 5553        escaped US
+0000bd20: 2d41 5343 4949 2066 6f72 6d0a 0a20 2020  -ASCII form..   
+0000bd30: 2052 6574 7572 6e73 3a0a 2020 2020 2020   Returns:.      
+0000bd40: 2020 7374 7269 6e67 3a20 7468 6520 5553    string: the US
+0000bd50: 2d41 5343 4949 2065 7363 6170 6564 2066  -ASCII escaped f
+0000bd60: 6f72 6d20 6f66 2074 6865 2069 6e70 7574  orm of the input
+0000bd70: 7465 6420 7374 7269 6e67 0a0a 2020 2020  ted string..    
+0000bd80: 4061 7574 686f 723a 204a 6f6e 6174 6861  @author: Jonatha
+0000bd90: 6e20 4265 6e6e 0a20 2020 2022 2222 0a20  n Benn.    """. 
+0000bda0: 2020 2072 6574 7572 6e56 616c 7565 203d     returnValue =
+0000bdb0: 2053 7472 696e 6749 4f28 290a 0a20 2020   StringIO()..   
+0000bdc0: 2066 6f72 2063 6861 7261 6374 6572 2069   for character i
+0000bdd0: 6e20 7374 7269 6e67 3a0a 2020 2020 2020  n string:.      
+0000bde0: 2020 636f 6465 203d 206f 7264 2863 6861    code = ord(cha
+0000bdf0: 7261 6374 6572 290a 2020 2020 2020 2020  racter).        
+0000be00: 6966 2063 6f64 6520 3e20 3078 3746 3a0a  if code > 0x7F:.
+0000be10: 2020 2020 2020 2020 2020 2020 6865 7843              hexC
+0000be20: 6f64 6520 3d20 6865 7828 636f 6465 290a  ode = hex(code).
+0000be30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000be40: 726e 5661 6c75 652e 7772 6974 6528 2225  rnValue.write("%
+0000be50: 2220 2b20 6865 7843 6f64 655b 323a 345d  " + hexCode[2:4]
+0000be60: 202b 2022 2522 202b 2068 6578 436f 6465   + "%" + hexCode
+0000be70: 5b34 3a36 5d29 0a20 2020 2020 2020 2065  [4:6]).        e
+0000be80: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0000be90: 2072 6574 7572 6e56 616c 7565 2e77 7269   returnValue.wri
+0000bea0: 7465 2863 6861 7261 6374 6572 290a 0a20  te(character).. 
+0000beb0: 2020 2072 6574 7572 6e20 7265 7475 726e     return return
+0000bec0: 5661 6c75 652e 6765 7476 616c 7565 2829  Value.getvalue()
+0000bed0: 0a0a 0a64 6566 2075 6e69 636f 6465 5f74  ...def unicode_t
+0000bee0: 6f5f 6173 6369 695f 6175 7468 6f72 6974  o_ascii_authorit
+0000bef0: 7928 6175 7468 6f72 6974 7929 3a0a 2020  y(authority):.  
+0000bf00: 2020 2222 220a 2020 2020 466f 6c6c 6f77    """.    Follow
+0000bf10: 7320 7468 6520 7374 6570 7320 696e 2052  s the steps in R
+0000bf20: 4643 2033 3439 302c 2053 6563 7469 6f6e  FC 3490, Section
+0000bf30: 2034 2074 6f20 636f 6e76 6572 7420 6120   4 to convert a 
+0000bf40: 756e 6963 6f64 6520 6175 7468 6f72 6974  unicode authorit
+0000bf50: 790a 2020 2020 7374 7269 6e67 2069 6e74  y.    string int
+0000bf60: 6f20 6974 7320 4153 4349 4920 6571 7569  o its ASCII equi
+0000bf70: 7661 6c65 6e74 2e0a 2020 2020 466f 7220  valent..    For 
+0000bf80: 6578 616d 706c 652c 2075 2777 7777 2e41  example, u'www.A
+0000bf90: 6c6c 6961 6e63 6566 7261 6e5c 5c78 6537  lliancefran\\xe7
+0000bfa0: 6169 7365 2e6e 7527 2077 696c 6c20 6265  aise.nu' will be
+0000bfb0: 2063 6f6e 7665 7274 6564 2069 6e74 6f0a   converted into.
+0000bfc0: 2020 2020 2777 7777 2e78 6e2d 2d61 6c6c      'www.xn--all
+0000bfd0: 6961 6e63 6566 7261 6e61 6973 652d 6e70  iancefranaise-np
+0000bfe0: 622e 6e75 270a 0a20 2020 2041 7267 733a  b.nu'..    Args:
+0000bff0: 0a20 2020 2020 2020 2061 7574 686f 7269  .        authori
+0000c000: 7479 3a20 756e 6963 6f64 6520 7374 7269  ty: unicode stri
+0000c010: 6e67 2c20 7468 6520 5552 4c20 6175 7468  ng, the URL auth
+0000c020: 6f72 6974 7920 636f 6d70 6f6e 656e 7420  ority component 
+0000c030: 746f 2063 6f6e 7665 7274 2c0a 2020 2020  to convert,.    
+0000c040: 2020 2020 2020 2020 652e 672e 2075 2777          e.g. u'w
+0000c050: 7777 2e41 6c6c 6961 6e63 6566 7261 6e5c  ww.Alliancefran\
+0000c060: 5c78 6537 6169 7365 2e6e 7527 0a0a 2020  \xe7aise.nu'..  
+0000c070: 2020 5265 7475 726e 733a 0a20 2020 2020    Returns:.     
+0000c080: 2020 2073 7472 696e 673a 2074 6865 2055     string: the U
+0000c090: 532d 4153 4349 4920 6368 6172 6163 7465  S-ASCII characte
+0000c0a0: 7220 6571 7569 7661 6c65 6e74 2074 6f20  r equivalent to 
+0000c0b0: 7468 6520 696e 7075 7474 6564 2061 7574  the inputted aut
+0000c0c0: 686f 7269 7479 2c0a 2020 2020 2020 2020  hority,.        
+0000c0d0: 2020 2020 2065 2e67 2e20 2777 7777 2e78       e.g. 'www.x
+0000c0e0: 6e2d 2d61 6c6c 6961 6e63 6566 7261 6e61  n--alliancefrana
+0000c0f0: 6973 652d 6e70 622e 6e75 270a 0a20 2020  ise-npb.nu'..   
+0000c100: 2052 6169 7365 733a 0a20 2020 2020 2020   Raises:.       
+0000c110: 2045 7863 6570 7469 6f6e 3a20 6966 2074   Exception: if t
+0000c120: 6865 2066 756e 6374 696f 6e20 6973 206e  he function is n
+0000c130: 6f74 2061 626c 6520 746f 2063 6f6e 7665  ot able to conve
+0000c140: 7274 2074 6865 2069 6e70 7574 7465 640a  rt the inputted.
+0000c150: 2020 2020 2020 2020 2020 2020 6175 7468              auth
+0000c160: 6f72 6974 790a 0a20 2020 2040 6175 7468  ority..    @auth
+0000c170: 6f72 3a20 4a6f 6e61 7468 616e 2042 656e  or: Jonathan Ben
+0000c180: 6e0a 2020 2020 2222 220a 2020 2020 2320  n.    """.    # 
+0000c190: 5246 4320 3334 3930 2c20 5365 6374 696f  RFC 3490, Sectio
+0000c1a0: 6e20 342c 2053 7465 7020 310a 2020 2020  n 4, Step 1.    
+0000c1b0: 2320 5468 6520 656e 636f 6469 6e67 732e  # The encodings.
+0000c1c0: 6964 6e61 2050 7974 686f 6e20 6d6f 6475  idna Python modu
+0000c1d0: 6c65 2061 7373 756d 6573 2074 6861 7420  le assumes that 
+0000c1e0: 416c 6c6f 7755 6e61 7373 6967 6e65 6420  AllowUnassigned 
+0000c1f0: 3d3d 2054 7275 650a 0a20 2020 2023 2052  == True..    # R
+0000c200: 4643 2033 3439 302c 2053 6563 7469 6f6e  FC 3490, Section
+0000c210: 2034 2c20 5374 6570 2032 0a20 2020 206c   4, Step 2.    l
+0000c220: 6162 656c 7320 3d20 7265 2e73 706c 6974  abels = re.split
+0000c230: 2852 4547 4558 5f41 5554 484f 5249 5459  (REGEX_AUTHORITY
+0000c240: 5f53 504c 4954 5445 522c 2061 7574 686f  _SPLITTER, autho
+0000c250: 7269 7479 290a 0a20 2020 2023 2052 4643  rity)..    # RFC
+0000c260: 2033 3439 302c 2053 6563 7469 6f6e 2034   3490, Section 4
+0000c270: 2c20 5374 6570 2033 0a20 2020 2023 2054  , Step 3.    # T
+0000c280: 6865 2065 6e63 6f64 696e 6773 2e69 646e  he encodings.idn
+0000c290: 6120 5079 7468 6f6e 206d 6f64 756c 6520  a Python module 
+0000c2a0: 6173 7375 6d65 7320 7468 6174 2055 7365  assumes that Use
+0000c2b0: 5354 4433 4153 4349 4952 756c 6573 203d  STD3ASCIIRules =
+0000c2c0: 3d20 4661 6c73 650a 0a20 2020 2023 2052  = False..    # R
+0000c2d0: 4643 2033 3439 302c 2053 6563 7469 6f6e  FC 3490, Section
+0000c2e0: 2034 2c20 5374 6570 2034 0a20 2020 2023   4, Step 4.    #
+0000c2f0: 2057 6520 7573 6520 7468 6520 546f 4153   We use the ToAS
+0000c300: 4349 4920 6f70 6572 6174 696f 6e20 6265  CII operation be
+0000c310: 6361 7573 6520 7765 2061 7265 2061 626f  cause we are abo
+0000c320: 7574 2074 6f20 7075 7420 7468 6520 6175  ut to put the au
+0000c330: 7468 6f72 6974 790a 2020 2020 2320 696e  thority.    # in
+0000c340: 746f 2061 6e20 4944 4e2d 756e 6177 6172  to an IDN-unawar
+0000c350: 6520 736c 6f74 0a20 2020 2061 7363 6969  e slot.    ascii
+0000c360: 4c61 6265 6c73 203d 205b 5d0a 2020 2020  Labels = [].    
+0000c370: 666f 7220 6c61 6265 6c20 696e 206c 6162  for label in lab
+0000c380: 656c 733a 0a20 2020 2020 2020 2069 6620  els:.        if 
+0000c390: 6c61 6265 6c3a 0a20 2020 2020 2020 2020  label:.         
+0000c3a0: 2020 2061 7363 6969 4c61 6265 6c73 2e61     asciiLabels.a
+0000c3b0: 7070 656e 6428 746f 5f6e 6174 6976 6528  ppend(to_native(
+0000c3c0: 656e 636f 6469 6e67 732e 6964 6e61 2e54  encodings.idna.T
+0000c3d0: 6f41 5343 4949 286c 6162 656c 2929 290a  oASCII(label))).
+0000c3e0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0000c3f0: 2020 2020 2020 2020 2020 2320 656e 636f            # enco
+0000c400: 6469 6e67 732e 6964 6e61 2e54 6f41 5343  dings.idna.ToASC
+0000c410: 4949 2064 6f65 7320 6e6f 7420 6163 6365  II does not acce
+0000c420: 7074 2061 6e20 656d 7074 7920 7374 7269  pt an empty stri
+0000c430: 6e67 2c20 6275 740a 2020 2020 2020 2020  ng, but.        
+0000c440: 2020 2020 2320 6974 2069 7320 6e65 6365      # it is nece
+0000c450: 7373 6172 7920 666f 7220 7573 2074 6f20  ssary for us to 
+0000c460: 616c 6c6f 7720 666f 7220 656d 7074 7920  allow for empty 
+0000c470: 6c61 6265 6c73 2073 6f20 7468 6174 2077  labels so that w
+0000c480: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+0000c490: 646f 6e27 7420 6d6f 6469 6679 2074 6865  don't modify the
+0000c4a0: 2055 524c 0a20 2020 2020 2020 2020 2020   URL.           
+0000c4b0: 2061 7363 6969 4c61 6265 6c73 2e61 7070   asciiLabels.app
+0000c4c0: 656e 6428 2222 290a 2020 2020 2320 5246  end("").    # RF
+0000c4d0: 4320 3334 3930 2c20 5365 6374 696f 6e20  C 3490, Section 
+0000c4e0: 342c 2053 7465 7020 350a 2020 2020 7265  4, Step 5.    re
+0000c4f0: 7475 726e 2073 7472 2872 6564 7563 6528  turn str(reduce(
+0000c500: 6c61 6d62 6461 2078 2c20 793a 2078 202b  lambda x, y: x +
+0000c510: 2075 6e69 6368 7228 3078 3030 3245 2920   unichr(0x002E) 
+0000c520: 2b20 792c 2061 7363 6969 4c61 6265 6c73  + y, asciiLabels
+0000c530: 2929 0a0a 0a64 6566 2075 6e69 636f 6465  ))...def unicode
+0000c540: 5f74 6f5f 6173 6369 695f 7572 6c28 7572  _to_ascii_url(ur
+0000c550: 6c2c 2070 7265 7065 6e64 5f73 6368 656d  l, prepend_schem
+0000c560: 6529 3a0a 2020 2020 2222 220a 2020 2020  e):.    """.    
+0000c570: 436f 6e76 6572 7473 2074 6865 2069 6e70  Converts the inp
+0000c580: 7574 7465 6420 756e 6963 6f64 6520 7572  utted unicode ur
+0000c590: 6c20 696e 746f 2061 2055 532d 4153 4349  l into a US-ASCI
+0000c5a0: 4920 6571 7569 7661 6c65 6e74 2e20 5468  I equivalent. Th
+0000c5b0: 6973 2066 756e 6374 696f 6e0a 2020 2020  is function.    
+0000c5c0: 676f 6573 2061 206c 6974 746c 6520 6265  goes a little be
+0000c5d0: 796f 6e64 2052 4643 2033 3439 302c 2077  yond RFC 3490, w
+0000c5e0: 6869 6368 2069 7320 6c69 6d69 7465 6420  hich is limited 
+0000c5f0: 696e 2073 636f 7065 2074 6f20 7468 6520  in scope to the 
+0000c600: 646f 6d61 696e 206e 616d 650a 2020 2020  domain name.    
+0000c610: 2861 7574 686f 7269 7479 2920 6f6e 6c79  (authority) only
+0000c620: 2e20 4865 7265 2c20 7468 6520 6675 6e63  . Here, the func
+0000c630: 7469 6f6e 616c 6974 7920 6973 2065 7870  tionality is exp
+0000c640: 616e 6465 6420 746f 2077 6861 7420 7761  anded to what wa
+0000c650: 7320 6f62 7365 7276 6564 0a20 2020 206f  s observed.    o
+0000c660: 6e20 5769 6b69 7065 6469 6120 6f6e 2032  n Wikipedia on 2
+0000c670: 3030 392d 4a61 6e2d 3232 3a0a 0a20 2020  009-Jan-22:..   
+0000c680: 2020 2020 436f 6d70 6f6e 656e 7420 2020      Component   
+0000c690: 2043 616e 2055 7365 2055 6e69 636f 6465   Can Use Unicode
+0000c6a0: 3f0a 2020 2020 2020 202d 2d2d 2d2d 2d2d  ?.       -------
+0000c6b0: 2d2d 2020 2020 2d2d 2d2d 2d2d 2d2d 2d2d  --    ----------
+0000c6c0: 2d2d 2d2d 2d2d 0a20 2020 2020 2020 7363  ------.       sc
+0000c6d0: 6865 6d65 2020 2020 2020 204e 6f0a 2020  heme       No.  
+0000c6e0: 2020 2020 2061 7574 686f 7269 7479 2020       authority  
+0000c6f0: 2020 5965 730a 2020 2020 2020 2070 6174    Yes.       pat
+0000c700: 6820 2020 2020 2020 2020 5965 730a 2020  h         Yes.  
+0000c710: 2020 2020 2071 7565 7279 2020 2020 2020       query      
+0000c720: 2020 5965 730a 2020 2020 2020 2066 7261    Yes.       fra
+0000c730: 676d 656e 7420 2020 2020 4e6f 0a0a 2020  gment     No..  
+0000c740: 2020 5468 6520 6175 7468 6f72 6974 7920    The authority 
+0000c750: 636f 6d70 6f6e 656e 7420 6765 7473 2063  component gets c
+0000c760: 6f6e 7665 7274 6564 2074 6f20 7075 6e79  onverted to puny
+0000c770: 636f 6465 2c20 6275 7420 6f63 6375 7272  code, but occurr
+0000c780: 656e 6365 7320 6f66 0a20 2020 2075 6e69  ences of.    uni
+0000c790: 636f 6465 2069 6e20 6f74 6865 7220 636f  code in other co
+0000c7a0: 6d70 6f6e 656e 7473 2067 6574 2063 6f6e  mponents get con
+0000c7b0: 7665 7274 6564 2069 6e74 6f20 6120 7061  verted into a pa
+0000c7c0: 6972 206f 6620 5552 4920 6573 6361 7065  ir of URI escape
+0000c7d0: 7320 2877 650a 2020 2020 6173 7375 6d65  s (we.    assume
+0000c7e0: 2034 2d62 7974 6520 756e 6963 6f64 6529   4-byte unicode)
+0000c7f0: 2e20 452e 672e 2074 6865 2075 6e69 636f  . E.g. the unico
+0000c800: 6465 2063 6861 7261 6374 6572 2055 2b34  de character U+4
+0000c810: 4532 4420 7769 6c6c 2062 650a 2020 2020  E2D will be.    
+0000c820: 636f 6e76 6572 7465 6420 696e 746f 2027  converted into '
+0000c830: 2534 4525 3244 272e 2054 6573 7469 6e67  %4E%2D'. Testing
+0000c840: 2077 6974 6820 4669 7265 666f 7820 7633   with Firefox v3
+0000c850: 2e30 2e35 2068 6173 2073 686f 776e 2074  .0.5 has shown t
+0000c860: 6861 7420 6974 2063 616e 0a20 2020 2075  hat it can.    u
+0000c870: 6e64 6572 7374 616e 6420 7468 6973 206b  nderstand this k
+0000c880: 696e 6420 6f66 2055 5249 2065 6e63 6f64  ind of URI encod
+0000c890: 696e 672e 0a0a 2020 2020 4172 6773 3a0a  ing...    Args:.
+0000c8a0: 2020 2020 2020 2020 7572 6c3a 2075 6e69          url: uni
+0000c8b0: 636f 6465 2073 7472 696e 672c 2074 6865  code string, the
+0000c8c0: 2055 524c 2074 6f20 636f 6e76 6572 7420   URL to convert 
+0000c8d0: 6672 6f6d 2075 6e69 636f 6465 2069 6e74  from unicode int
+0000c8e0: 6f20 5553 2d41 5343 4949 0a20 2020 2020  o US-ASCII.     
+0000c8f0: 2020 2070 7265 7065 6e64 5f73 6368 656d     prepend_schem
+0000c900: 653a 2073 7472 696e 672c 2061 2070 726f  e: string, a pro
+0000c910: 746f 636f 6c20 7363 6865 6d65 2074 6f20  tocol scheme to 
+0000c920: 7072 6570 656e 6420 746f 2074 6865 2055  prepend to the U
+0000c930: 524c 2069 660a 2020 2020 2020 2020 2020  RL if.          
+0000c940: 2020 7765 2772 6520 6861 7669 6e67 2074    we're having t
+0000c950: 726f 7562 6c65 2070 6172 7369 6e67 2069  rouble parsing i
+0000c960: 742e 0a20 2020 2020 2020 2020 2020 2065  t..            e
+0000c970: 2e67 2e20 2268 7474 7022 2e20 496e 7075  .g. "http". Inpu
+0000c980: 7420 4e6f 6e65 2074 6f20 6469 7361 626c  t None to disabl
+0000c990: 6520 7468 6973 2066 756e 6374 696f 6e61  e this functiona
+0000c9a0: 6c69 7479 0a0a 2020 2020 5265 7475 726e  lity..    Return
+0000c9b0: 733a 0a20 2020 2020 2020 2073 7472 696e  s:.        strin
+0000c9c0: 673a 2061 2055 532d 4153 4349 4920 6571  g: a US-ASCII eq
+0000c9d0: 7569 7661 6c65 6e74 206f 6620 7468 6520  uivalent of the 
+0000c9e0: 696e 7075 7474 6564 2075 726c 0a0a 2020  inputted url..  
+0000c9f0: 2020 4061 7574 686f 723a 204a 6f6e 6174    @author: Jonat
+0000ca00: 6861 6e20 4265 6e6e 0a20 2020 2022 2222  han Benn.    """
+0000ca10: 0a20 2020 2023 2063 6f6e 7665 7274 2074  .    # convert t
+0000ca20: 6865 2061 7574 686f 7269 7479 2063 6f6d  he authority com
+0000ca30: 706f 6e65 6e74 206f 6620 7468 6520 5552  ponent of the UR
+0000ca40: 4c20 696e 746f 2061 6e20 4153 4349 4920  L into an ASCII 
+0000ca50: 7075 6e79 636f 6465 2073 7472 696e 672c  punycode string,
+0000ca60: 0a20 2020 2023 2062 7574 2065 6e63 6f64  .    # but encod
+0000ca70: 6520 7468 6520 7265 7374 2075 7369 6e67  e the rest using
+0000ca80: 2074 6865 2072 6567 756c 6172 2055 5249   the regular URI
+0000ca90: 2063 6861 7261 6374 6572 2065 6e63 6f64   character encod
+0000caa0: 696e 670a 2020 2020 636f 6d70 6f6e 656e  ing.    componen
+0000cab0: 7473 203d 2075 726c 7061 7273 652e 7572  ts = urlparse.ur
+0000cac0: 6c70 6172 7365 2875 726c 290a 2020 2020  lparse(url).    
+0000cad0: 7072 6570 656e 6465 6420 3d20 4661 6c73  prepended = Fals
+0000cae0: 650a 2020 2020 2320 4966 206e 6f20 6175  e.    # If no au
+0000caf0: 7468 6f72 6974 7920 7761 7320 666f 756e  thority was foun
+0000cb00: 640a 2020 2020 6966 206e 6f74 2063 6f6d  d.    if not com
+0000cb10: 706f 6e65 6e74 732e 6e65 746c 6f63 3a0a  ponents.netloc:.
+0000cb20: 2020 2020 2020 2020 2320 5472 7920 6170          # Try ap
+0000cb30: 7065 6e64 696e 6720 6120 7363 6865 6d65  pending a scheme
+0000cb40: 2074 6f20 7365 6520 6966 2074 6861 7420   to see if that 
+0000cb50: 6669 7865 7320 7468 6520 7072 6f62 6c65  fixes the proble
+0000cb60: 6d0a 2020 2020 2020 2020 7363 6865 6d65  m.        scheme
+0000cb70: 5f74 6f5f 7072 6570 656e 6420 3d20 7072  _to_prepend = pr
+0000cb80: 6570 656e 645f 7363 6865 6d65 206f 7220  epend_scheme or 
+0000cb90: 2268 7474 7022 0a20 2020 2020 2020 2063  "http".        c
+0000cba0: 6f6d 706f 6e65 6e74 7320 3d20 7572 6c70  omponents = urlp
+0000cbb0: 6172 7365 2e75 726c 7061 7273 6528 746f  arse.urlparse(to
+0000cbc0: 5f75 6e69 636f 6465 2873 6368 656d 655f  _unicode(scheme_
+0000cbd0: 746f 5f70 7265 7065 6e64 2920 2b20 223a  to_prepend) + ":
+0000cbe0: 2f2f 2220 2b20 7572 6c29 0a20 2020 2020  //" + url).     
+0000cbf0: 2020 2070 7265 7065 6e64 6564 203d 2054     prepended = T
+0000cc00: 7275 650a 0a20 2020 2023 2069 6620 7765  rue..    # if we
+0000cc10: 2073 7469 6c6c 2063 616e 2774 2066 696e   still can't fin
+0000cc20: 6420 7468 6520 6175 7468 6f72 6974 790a  d the authority.
+0000cc30: 2020 2020 6966 206e 6f74 2063 6f6d 706f      if not compo
+0000cc40: 6e65 6e74 732e 6e65 746c 6f63 3a0a 2020  nents.netloc:.  
+0000cc50: 2020 2020 2020 2320 416e 6420 6974 2773        # And it's
+0000cc60: 206e 6f74 2062 6563 6175 7365 2074 6865   not because the
+0000cc70: 2075 726c 2069 7320 6120 7265 6c61 7469   url is a relati
+0000cc80: 7665 2075 726c 0a20 2020 2020 2020 2069  ve url.        i
+0000cc90: 6620 6e6f 7420 7572 6c2e 7374 6172 7473  f not url.starts
+0000cca0: 7769 7468 2822 2f22 293a 0a20 2020 2020  with("/"):.     
+0000ccb0: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+0000ccc0: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
+0000ccd0: 2020 2020 2020 2020 224e 6f20 6175 7468          "No auth
+0000cce0: 6f72 6974 7920 636f 6d70 6f6e 656e 7420  ority component 
+0000ccf0: 666f 756e 642c 2022 0a20 2020 2020 2020  found, ".       
+0000cd00: 2020 2020 2020 2020 202b 2022 636f 756c           + "coul
+0000cd10: 6420 6e6f 7420 6465 636f 6465 2075 6e69  d not decode uni
+0000cd20: 636f 6465 2074 6f20 5553 2d41 5343 4949  code to US-ASCII
+0000cd30: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+0000cd40: 0a20 2020 2023 2057 6527 7265 2068 6572  .    # We're her
+0000cd50: 6520 6966 2077 6520 666f 756e 6420 616e  e if we found an
+0000cd60: 2061 7574 686f 7269 7479 2c20 6c65 7427   authority, let'
+0000cd70: 7320 7265 6275 696c 6420 7468 6520 5552  s rebuild the UR
+0000cd80: 4c0a 2020 2020 7363 6865 6d65 203d 2063  L.    scheme = c
+0000cd90: 6f6d 706f 6e65 6e74 732e 7363 6865 6d65  omponents.scheme
+0000cda0: 0a20 2020 2061 7574 686f 7269 7479 203d  .    authority =
+0000cdb0: 2063 6f6d 706f 6e65 6e74 732e 6e65 746c   components.netl
+0000cdc0: 6f63 0a20 2020 2070 6174 6820 3d20 636f  oc.    path = co
+0000cdd0: 6d70 6f6e 656e 7473 2e70 6174 680a 2020  mponents.path.  
+0000cde0: 2020 7175 6572 7920 3d20 636f 6d70 6f6e    query = compon
+0000cdf0: 656e 7473 2e71 7565 7279 0a20 2020 2066  ents.query.    f
+0000ce00: 7261 676d 656e 7420 3d20 636f 6d70 6f6e  ragment = compon
+0000ce10: 656e 7473 2e66 7261 676d 656e 740a 0a20  ents.fragment.. 
+0000ce20: 2020 2069 6620 7072 6570 656e 6465 643a     if prepended:
+0000ce30: 0a20 2020 2020 2020 2073 6368 656d 6520  .        scheme 
+0000ce40: 3d20 2222 0a0a 2020 2020 756e 7061 7273  = ""..    unpars
+0000ce50: 6564 203d 2075 726c 7061 7273 652e 7572  ed = urlparse.ur
+0000ce60: 6c75 6e70 6172 7365 280a 2020 2020 2020  lunparse(.      
+0000ce70: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0000ce80: 7363 6865 6d65 2c0a 2020 2020 2020 2020  scheme,.        
+0000ce90: 2020 2020 756e 6963 6f64 655f 746f 5f61      unicode_to_a
+0000cea0: 7363 6969 5f61 7574 686f 7269 7479 2861  scii_authority(a
+0000ceb0: 7574 686f 7269 7479 292c 0a20 2020 2020  uthority),.     
+0000cec0: 2020 2020 2020 2065 7363 6170 655f 756e         escape_un
+0000ced0: 6963 6f64 6528 7061 7468 292c 0a20 2020  icode(path),.   
+0000cee0: 2020 2020 2020 2020 2022 222c 0a20 2020           "",.   
+0000cef0: 2020 2020 2020 2020 2065 7363 6170 655f           escape_
+0000cf00: 756e 6963 6f64 6528 7175 6572 7929 2c0a  unicode(query),.
+0000cf10: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0000cf20: 6672 6167 6d65 6e74 292c 0a20 2020 2020  fragment),.     
+0000cf30: 2020 2029 0a20 2020 2029 0a20 2020 2069     ).    ).    i
+0000cf40: 6620 756e 7061 7273 6564 2e73 7461 7274  f unparsed.start
+0000cf50: 7377 6974 6828 222f 2f22 293a 0a20 2020  swith("//"):.   
+0000cf60: 2020 2020 2075 6e70 6172 7365 6420 3d20       unparsed = 
+0000cf70: 756e 7061 7273 6564 5b32 3a5d 2020 2320  unparsed[2:]  # 
+0000cf80: 5265 6d6f 7665 2074 6865 202f 2f20 7572  Remove the // ur
+0000cf90: 6c75 6e70 6172 7365 2070 7574 7320 696e  lunparse puts in
+0000cfa0: 2074 6865 2062 6567 696e 6e69 6e67 0a20   the beginning. 
+0000cfb0: 2020 2072 6574 7572 6e20 756e 7061 7273     return unpars
+0000cfc0: 6564 0a0a 0a63 6c61 7373 2049 535f 4745  ed...class IS_GE
+0000cfd0: 4e45 5249 435f 5552 4c28 5661 6c69 6461  NERIC_URL(Valida
+0000cfe0: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
+0000cff0: 2020 5265 6a65 6374 7320 6120 5552 4c20    Rejects a URL 
+0000d000: 7374 7269 6e67 2069 6620 616e 7920 6f66  string if any of
+0000d010: 2074 6865 2066 6f6c 6c6f 7769 6e67 2069   the following i
+0000d020: 7320 7472 7565 3a0a 2020 2020 2020 202a  s true:.       *
+0000d030: 2054 6865 2073 7472 696e 6720 6973 2065   The string is e
+0000d040: 6d70 7479 206f 7220 4e6f 6e65 0a20 2020  mpty or None.   
+0000d050: 2020 2020 2a20 5468 6520 7374 7269 6e67      * The string
+0000d060: 2075 7365 7320 6368 6172 6163 7465 7273   uses characters
+0000d070: 2074 6861 7420 6172 6520 6e6f 7420 616c   that are not al
+0000d080: 6c6f 7765 6420 696e 2061 2055 524c 0a20  lowed in a URL. 
+0000d090: 2020 2020 2020 2a20 5468 6520 5552 4c20        * The URL 
+0000d0a0: 7363 6865 6d65 2073 7065 6369 6669 6564  scheme specified
+0000d0b0: 2028 6966 206f 6e65 2069 7320 7370 6563   (if one is spec
+0000d0c0: 6966 6965 6429 2069 7320 6e6f 7420 7661  ified) is not va
+0000d0d0: 6c69 640a 0a20 2020 2042 6173 6564 206f  lid..    Based o
+0000d0e0: 6e20 5246 4320 3233 3936 3a20 6874 7470  n RFC 2396: http
+0000d0f0: 3a2f 2f77 7777 2e66 6171 732e 6f72 672f  ://www.faqs.org/
+0000d100: 7266 6373 2f72 6663 3233 3936 2e68 746d  rfcs/rfc2396.htm
+0000d110: 6c0a 0a20 2020 2054 6869 7320 6675 6e63  l..    This func
+0000d120: 7469 6f6e 206f 6e6c 7920 6368 6563 6b73  tion only checks
+0000d130: 2074 6865 2055 524c 2773 2073 796e 7461   the URL's synta
+0000d140: 782e 2049 7420 646f 6573 206e 6f74 2063  x. It does not c
+0000d150: 6865 636b 2074 6861 7420 7468 6520 5552  heck that the UR
+0000d160: 4c0a 2020 2020 706f 696e 7473 2074 6f20  L.    points to 
+0000d170: 6120 7265 616c 2064 6f63 756d 656e 742c  a real document,
+0000d180: 2066 6f72 2065 7861 6d70 6c65 2c20 6f72   for example, or
+0000d190: 2074 6861 7420 6974 206f 7468 6572 7769   that it otherwi
+0000d1a0: 7365 206d 616b 6573 2073 656e 7365 0a20  se makes sense. 
+0000d1b0: 2020 2073 656d 616e 7469 6361 6c6c 792e     semantically.
+0000d1c0: 2054 6869 7320 6675 6e63 7469 6f6e 2064   This function d
+0000d1d0: 6f65 7320 6175 746f 6d61 7469 6361 6c6c  oes automaticall
+0000d1e0: 7920 7072 6570 656e 6420 2768 7474 703a  y prepend 'http:
+0000d1f0: 2f2f 2720 696e 2066 726f 6e74 0a20 2020  //' in front.   
+0000d200: 206f 6620 6120 5552 4c20 6966 2061 6e64   of a URL if and
+0000d210: 206f 6e6c 7920 6966 2074 6861 7427 7320   only if that's 
+0000d220: 6e65 6365 7373 6172 7920 746f 2073 7563  necessary to suc
+0000d230: 6365 7373 6675 6c6c 7920 7061 7273 6520  cessfully parse 
+0000d240: 7468 6520 5552 4c2e 0a20 2020 2050 6c65  the URL..    Ple
+0000d250: 6173 6520 6e6f 7465 2074 6861 7420 6120  ase note that a 
+0000d260: 7363 6865 6d65 2077 696c 6c20 6265 2070  scheme will be p
+0000d270: 7265 7065 6e64 6564 206f 6e6c 7920 666f  repended only fo
+0000d280: 7220 7261 7265 2063 6173 6573 0a20 2020  r rare cases.   
+0000d290: 2028 652e 672e 2027 676f 6f67 6c65 2e63   (e.g. 'google.c
+0000d2a0: 613a 3830 2729 0a0a 2020 2020 5468 6520  a:80')..    The 
+0000d2b0: 6c69 7374 206f 6620 616c 6c6f 7765 6420  list of allowed 
+0000d2c0: 7363 6865 6d65 7320 6973 2063 7573 746f  schemes is custo
+0000d2d0: 6d69 7a61 626c 6520 7769 7468 2074 6865  mizable with the
+0000d2e0: 2061 6c6c 6f77 6564 5f73 6368 656d 6573   allowed_schemes
+0000d2f0: 0a20 2020 2070 6172 616d 6574 6572 2e20  .    parameter. 
+0000d300: 4966 2079 6f75 2065 7863 6c75 6465 204e  If you exclude N
+0000d310: 6f6e 6520 6672 6f6d 2074 6865 206c 6973  one from the lis
+0000d320: 742c 2074 6865 6e20 6162 6272 6576 6961  t, then abbrevia
+0000d330: 7465 6420 5552 4c73 0a20 2020 2028 6c61  ted URLs.    (la
+0000d340: 636b 696e 6720 6120 7363 6865 6d65 2073  cking a scheme s
+0000d350: 7563 6820 6173 2027 6874 7470 2729 2077  uch as 'http') w
+0000d360: 696c 6c20 6265 2072 656a 6563 7465 642e  ill be rejected.
+0000d370: 0a0a 2020 2020 5468 6520 6465 6661 756c  ..    The defaul
+0000d380: 7420 7072 6570 656e 6465 6420 7363 6865  t prepended sche
+0000d390: 6d65 2069 7320 6375 7374 6f6d 697a 6162  me is customizab
+0000d3a0: 6c65 2077 6974 6820 7468 6520 7072 6570  le with the prep
+0000d3b0: 656e 645f 7363 6865 6d65 0a20 2020 2070  end_scheme.    p
+0000d3c0: 6172 616d 6574 6572 2e20 4966 2079 6f75  arameter. If you
+0000d3d0: 2073 6574 2070 7265 7065 6e64 5f73 6368   set prepend_sch
+0000d3e0: 656d 6520 746f 204e 6f6e 6520 7468 656e  eme to None then
+0000d3f0: 2070 7265 7065 6e64 696e 6720 7769 6c6c   prepending will
+0000d400: 2062 650a 2020 2020 6469 7361 626c 6564   be.    disabled
+0000d410: 2e20 5552 4c73 2074 6861 7420 7265 7175  . URLs that requ
+0000d420: 6972 6520 7072 6570 656e 6469 6e67 2074  ire prepending t
+0000d430: 6f20 7061 7273 6520 7769 6c6c 2073 7469  o parse will sti
+0000d440: 6c6c 2062 6520 6163 6365 7074 6564 2c0a  ll be accepted,.
+0000d450: 2020 2020 6275 7420 7468 6520 7265 7475      but the retu
+0000d460: 726e 2076 616c 7565 2077 696c 6c20 6e6f  rn value will no
+0000d470: 7420 6265 206d 6f64 6966 6965 642e 0a0a  t be modified...
+0000d480: 2020 2020 4061 7574 686f 723a 204a 6f6e      @author: Jon
+0000d490: 6174 6861 6e20 4265 6e6e 0a0a 2020 2020  athan Benn..    
+0000d4a0: 2020 2020 3e3e 3e20 4953 5f47 454e 4552      >>> IS_GENER
+0000d4b0: 4943 5f55 524c 2829 2827 6874 7470 3a2f  IC_URL()('http:/
+0000d4c0: 2f75 7365 7240 6162 632e 636f 6d27 290a  /user@abc.com').
+0000d4d0: 2020 2020 2020 2020 2827 6874 7470 3a2f          ('http:/
+0000d4e0: 2f75 7365 7240 6162 632e 636f 6d27 2c20  /user@abc.com', 
+0000d4f0: 4e6f 6e65 290a 0a20 2020 2041 7267 733a  None)..    Args:
+0000d500: 0a20 2020 2020 2020 2065 7272 6f72 5f6d  .        error_m
+0000d510: 6573 7361 6765 3a20 6120 7374 7269 6e67  essage: a string
+0000d520: 2c20 7468 6520 6572 726f 7220 6d65 7373  , the error mess
+0000d530: 6167 6520 746f 2067 6976 6520 7468 6520  age to give the 
+0000d540: 656e 6420 7573 6572 0a20 2020 2020 2020  end user.       
+0000d550: 2020 2020 2069 6620 7468 6520 5552 4c20       if the URL 
+0000d560: 646f 6573 206e 6f74 2076 616c 6964 6174  does not validat
+0000d570: 650a 2020 2020 2020 2020 616c 6c6f 7765  e.        allowe
+0000d580: 645f 7363 6865 6d65 733a 2061 206c 6973  d_schemes: a lis
+0000d590: 7420 636f 6e74 6169 6e69 6e67 2073 7472  t containing str
+0000d5a0: 696e 6773 206f 7220 4e6f 6e65 2e20 4561  ings or None. Ea
+0000d5b0: 6368 2065 6c65 6d65 6e74 0a20 2020 2020  ch element.     
+0000d5c0: 2020 2020 2020 2069 7320 6120 7363 6865         is a sche
+0000d5d0: 6d65 2074 6865 2069 6e70 7574 7465 6420  me the inputted 
+0000d5e0: 5552 4c20 6973 2061 6c6c 6f77 6564 2074  URL is allowed t
+0000d5f0: 6f20 7573 650a 2020 2020 2020 2020 7072  o use.        pr
+0000d600: 6570 656e 645f 7363 6865 6d65 3a20 6120  epend_scheme: a 
+0000d610: 7374 7269 6e67 2c20 7468 6973 2073 6368  string, this sch
+0000d620: 656d 6520 6973 2070 7265 7065 6e64 6564  eme is prepended
+0000d630: 2069 6620 6974 2773 0a20 2020 2020 2020   if it's.       
+0000d640: 2020 2020 206e 6563 6573 7361 7279 2074       necessary t
+0000d650: 6f20 6d61 6b65 2074 6865 2055 524c 2076  o make the URL v
+0000d660: 616c 6964 0a0a 2020 2020 2222 220a 0a20  alid..    """.. 
+0000d670: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0000d680: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+0000d690: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+0000d6a0: 7361 6765 3d22 456e 7465 7220 6120 7661  sage="Enter a va
+0000d6b0: 6c69 6420 5552 4c22 2c0a 2020 2020 2020  lid URL",.      
+0000d6c0: 2020 616c 6c6f 7765 645f 7363 6865 6d65    allowed_scheme
+0000d6d0: 733d 4e6f 6e65 2c0a 2020 2020 2020 2020  s=None,.        
+0000d6e0: 7072 6570 656e 645f 7363 6865 6d65 3d4e  prepend_scheme=N
+0000d6f0: 6f6e 652c 0a20 2020 2029 3a0a 2020 2020  one,.    ):.    
+0000d700: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
+0000d710: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
+0000d720: 6573 7361 6765 0a20 2020 2020 2020 2069  essage.        i
+0000d730: 6620 616c 6c6f 7765 645f 7363 6865 6d65  f allowed_scheme
+0000d740: 7320 6973 204e 6f6e 653a 0a20 2020 2020  s is None:.     
+0000d750: 2020 2020 2020 2073 656c 662e 616c 6c6f         self.allo
+0000d760: 7765 645f 7363 6865 6d65 7320 3d20 616c  wed_schemes = al
+0000d770: 6c5f 7572 6c5f 7363 6865 6d65 730a 2020  l_url_schemes.  
+0000d780: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000d790: 2020 2020 2020 2020 7365 6c66 2e61 6c6c          self.all
+0000d7a0: 6f77 6564 5f73 6368 656d 6573 203d 2061  owed_schemes = a
+0000d7b0: 6c6c 6f77 6564 5f73 6368 656d 6573 0a20  llowed_schemes. 
+0000d7c0: 2020 2020 2020 2073 656c 662e 7072 6570         self.prep
+0000d7d0: 656e 645f 7363 6865 6d65 203d 2070 7265  end_scheme = pre
+0000d7e0: 7065 6e64 5f73 6368 656d 650a 2020 2020  pend_scheme.    
+0000d7f0: 2020 2020 6966 2073 656c 662e 7072 6570      if self.prep
+0000d800: 656e 645f 7363 6865 6d65 206e 6f74 2069  end_scheme not i
+0000d810: 6e20 7365 6c66 2e61 6c6c 6f77 6564 5f73  n self.allowed_s
+0000d820: 6368 656d 6573 3a0a 2020 2020 2020 2020  chemes:.        
+0000d830: 2020 2020 7261 6973 6520 5379 6e74 6178      raise Syntax
+0000d840: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+0000d850: 2020 2020 2020 2022 7072 6570 656e 645f         "prepend_
+0000d860: 7363 6865 6d65 3d27 2573 2720 6973 206e  scheme='%s' is n
+0000d870: 6f74 2069 6e20 616c 6c6f 7765 645f 7363  ot in allowed_sc
+0000d880: 6865 6d65 733d 2573 220a 2020 2020 2020  hemes=%s".      
+0000d890: 2020 2020 2020 2020 2020 2520 2873 656c            % (sel
+0000d8a0: 662e 7072 6570 656e 645f 7363 6865 6d65  f.prepend_scheme
+0000d8b0: 2c20 7365 6c66 2e61 6c6c 6f77 6564 5f73  , self.allowed_s
+0000d8c0: 6368 656d 6573 290a 2020 2020 2020 2020  chemes).        
+0000d8d0: 2020 2020 290a 0a20 2020 2052 4547 4558      )..    REGEX
+0000d8e0: 5f47 454e 4552 4943 5f55 524c 203d 2072  _GENERIC_URL = r
+0000d8f0: 2225 5b5e 302d 3941 2d46 612d 665d 7b32  "%[^0-9A-Fa-f]{2
+0000d900: 7d7c 255b 5e30 2d39 412d 4661 2d66 5d5b  }|%[^0-9A-Fa-f][
+0000d910: 302d 3941 2d46 612d 665d 7c25 5b30 2d39  0-9A-Fa-f]|%[0-9
+0000d920: 412d 4661 2d66 5d5b 5e30 2d39 412d 4661  A-Fa-f][^0-9A-Fa
+0000d930: 2d66 5d7c 2524 7c25 5b30 2d39 412d 4661  -f]|%$|%[0-9A-Fa
+0000d940: 2d66 5d24 7c25 5b5e 302d 3941 2d46 612d  -f]$|%[^0-9A-Fa-
+0000d950: 665d 2422 0a20 2020 2052 4547 4558 5f47  f]$".    REGEX_G
+0000d960: 454e 4552 4943 5f55 524c 5f56 414c 4944  ENERIC_URL_VALID
+0000d970: 203d 2072 225b 412d 5a61 2d7a 302d 393b   = r"[A-Za-z0-9;
+0000d980: 2f3f 3a40 263d 2b24 2c5c 2d5f 5c2e 217e  /?:@&=+$,\-_\.!~
+0000d990: 2a27 5c28 5c29 255d 2b24 220a 2020 2020  *'\(\)%]+$".    
+0000d9a0: 5245 4745 585f 5552 4c5f 4652 4147 4d45  REGEX_URL_FRAGME
+0000d9b0: 4e54 5f56 414c 4944 203d 2072 225b 7c41  NT_VALID = r"[|A
+0000d9c0: 2d5a 612d 7a30 2d39 3b2f 3f3a 4026 3d2b  -Za-z0-9;/?:@&=+
+0000d9d0: 242c 5c2d 5f5c 2e21 7e2a 275c 285c 2925  $,\-_\.!~*'\(\)%
+0000d9e0: 5d2b 2422 0a0a 2020 2020 6465 6620 7661  ]+$"..    def va
+0000d9f0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+0000da00: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+0000da10: 6e65 293a 0a20 2020 2020 2020 2022 2222  ne):.        """
+0000da20: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+0000da30: 2020 2020 2020 2020 2020 2076 616c 7565             value
+0000da40: 3a20 6120 7374 7269 6e67 2c20 7468 6520  : a string, the 
+0000da50: 5552 4c20 746f 2076 616c 6964 6174 650a  URL to validate.
+0000da60: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+0000da70: 3a0a 2020 2020 2020 2020 2020 2020 6120  :.            a 
+0000da80: 7475 706c 652c 2077 6865 7265 2074 7570  tuple, where tup
+0000da90: 6c65 5b30 5d20 6973 2074 6865 2069 6e70  le[0] is the inp
+0000daa0: 7574 7465 6420 7661 6c75 6520 2870 6f73  utted value (pos
+0000dab0: 7369 626c 650a 2020 2020 2020 2020 2020  sible.          
+0000dac0: 2020 7072 6570 656e 6465 6420 7769 7468    prepended with
+0000dad0: 2070 7265 7065 6e64 5f73 6368 656d 6529   prepend_scheme)
+0000dae0: 2c20 616e 6420 7475 706c 655b 315d 2069  , and tuple[1] i
+0000daf0: 7320 6569 7468 6572 0a20 2020 2020 2020  s either.       
+0000db00: 2020 2020 204e 6f6e 6520 2873 7563 6365       None (succe
+0000db10: 7373 2129 206f 7220 7468 6520 7374 7269  ss!) or the stri
+0000db20: 6e67 2065 7272 6f72 5f6d 6573 7361 6765  ng error_message
+0000db30: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+0000db40: 2020 2020 2020 2320 6966 2077 6520 646f        # if we do
+0000db50: 6e74 2068 6176 6520 616e 7974 6869 6e67  nt have anything
+0000db60: 206f 7220 7468 6520 5552 4c20 6d69 7375   or the URL misu
+0000db70: 7365 7320 7468 6520 2725 2720 6368 6172  ses the '%' char
+0000db80: 6163 7465 720a 0a20 2020 2020 2020 2069  acter..        i
+0000db90: 6620 6e6f 7420 7661 6c75 6520 6f72 2072  f not value or r
+0000dba0: 652e 7365 6172 6368 2873 656c 662e 5245  e.search(self.RE
+0000dbb0: 4745 585f 4745 4e45 5249 435f 5552 4c2c  GEX_GENERIC_URL,
+0000dbc0: 2076 616c 7565 293a 0a20 2020 2020 2020   value):.       
+0000dbd0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+0000dbe0: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
+0000dbf0: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
+0000dc00: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
+0000dc10: 0a20 2020 2020 2020 2069 6620 2223 2220  .        if "#" 
+0000dc20: 696e 2076 616c 7565 3a0a 2020 2020 2020  in value:.      
+0000dc30: 2020 2020 2020 7572 6c2c 2066 7261 676d        url, fragm
+0000dc40: 656e 745f 7061 7274 203d 2076 616c 7565  ent_part = value
+0000dc50: 2e73 706c 6974 2822 2322 290a 2020 2020  .split("#").    
+0000dc60: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000dc70: 2020 2020 2020 7572 6c2c 2066 7261 676d        url, fragm
+0000dc80: 656e 745f 7061 7274 203d 2076 616c 7565  ent_part = value
+0000dc90: 2c20 2222 0a20 2020 2020 2020 2023 2069  , "".        # i
+0000dca0: 6620 7468 6520 5552 4c20 6973 206f 6e6c  f the URL is onl
+0000dcb0: 7920 636f 6d70 6f73 6564 206f 6620 7661  y composed of va
+0000dcc0: 6c69 6420 6368 6172 6163 7465 7273 0a20  lid characters. 
+0000dcd0: 2020 2020 2020 2069 6620 6e6f 7420 7265         if not re
+0000dce0: 2e6d 6174 6368 2873 656c 662e 5245 4745  .match(self.REGE
+0000dcf0: 585f 4745 4e45 5249 435f 5552 4c5f 5641  X_GENERIC_URL_VA
+0000dd00: 4c49 442c 2075 726c 2920 6f72 2028 0a20  LID, url) or (. 
+0000dd10: 2020 2020 2020 2020 2020 2066 7261 676d             fragm
+0000dd20: 656e 745f 7061 7274 2061 6e64 206e 6f74  ent_part and not
+0000dd30: 2072 652e 6d61 7463 6828 7365 6c66 2e52   re.match(self.R
+0000dd40: 4547 4558 5f55 524c 5f46 5241 474d 454e  EGEX_URL_FRAGMEN
+0000dd50: 545f 5641 4c49 442c 2066 7261 676d 656e  T_VALID, fragmen
+0000dd60: 745f 7061 7274 290a 2020 2020 2020 2020  t_part).        
+0000dd70: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0000dd80: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+0000dd90: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+0000dda0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+0000ddb0: 6d65 7373 6167 6529 290a 2020 2020 2020  message)).      
+0000ddc0: 2020 2320 5468 656e 2070 6172 7365 2074    # Then parse t
+0000ddd0: 6865 2055 524c 2069 6e74 6f20 6974 7320  he URL into its 
+0000dde0: 636f 6d70 6f6e 656e 7473 2061 6e64 2063  components and c
+0000ddf0: 6865 636b 206f 6e0a 2020 2020 2020 2020  heck on.        
+0000de00: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0000de10: 2063 6f6d 706f 6e65 6e74 7320 3d20 7572   components = ur
+0000de20: 6c70 6172 7365 2e75 726c 7061 7273 6528  lparse.urlparse(
+0000de30: 7572 6c6c 6962 5f75 6e71 756f 7465 2876  urllib_unquote(v
+0000de40: 616c 7565 2929 2e5f 6173 6469 6374 2829  alue))._asdict()
+0000de50: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+0000de60: 5661 6c75 6545 7272 6f72 3a0a 2020 2020  ValueError:.    
+0000de70: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+0000de80: 6c69 6461 7469 6f6e 4572 726f 7228 7365  lidationError(se
+0000de90: 6c66 2e74 7261 6e73 6c61 746f 7228 7365  lf.translator(se
+0000dea0: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+0000deb0: 2929 0a0a 2020 2020 2020 2020 2320 436c  ))..        # Cl
+0000dec0: 6561 6e20 7570 2074 6865 2073 6368 656d  ean up the schem
+0000ded0: 6520 6265 666f 7265 2077 6520 6368 6563  e before we chec
+0000dee0: 6b20 6974 0a20 2020 2020 2020 2073 6368  k it.        sch
+0000def0: 656d 6520 3d20 636f 6d70 6f6e 656e 7473  eme = components
+0000df00: 5b22 7363 6865 6d65 225d 0a20 2020 2020  ["scheme"].     
+0000df10: 2020 2069 6620 6c65 6e28 7363 6865 6d65     if len(scheme
+0000df20: 2920 3d3d 2030 3a0a 2020 2020 2020 2020  ) == 0:.        
+0000df30: 2020 2020 7363 6865 6d65 203d 204e 6f6e      scheme = Non
+0000df40: 650a 2020 2020 2020 2020 656c 7365 3a0a  e.        else:.
+0000df50: 2020 2020 2020 2020 2020 2020 7363 6865              sche
+0000df60: 6d65 203d 2063 6f6d 706f 6e65 6e74 735b  me = components[
+0000df70: 2273 6368 656d 6522 5d2e 6c6f 7765 7228  "scheme"].lower(
+0000df80: 290a 2020 2020 2020 2020 2320 4966 2074  ).        # If t
+0000df90: 6865 2073 6368 656d 6520 646f 6573 6e27  he scheme doesn'
+0000dfa0: 7420 7265 616c 6c79 2065 7869 7374 730a  t really exists.
+0000dfb0: 2020 2020 2020 2020 6966 2028 0a20 2020          if (.   
+0000dfc0: 2020 2020 2020 2020 2073 6368 656d 6520           scheme 
+0000dfd0: 6e6f 7420 696e 2073 656c 662e 616c 6c6f  not in self.allo
+0000dfe0: 7765 645f 7363 6865 6d65 730a 2020 2020  wed_schemes.    
+0000dff0: 2020 2020 2020 2020 6f72 206e 6f74 2073          or not s
+0000e000: 6368 656d 650a 2020 2020 2020 2020 2020  cheme.          
+0000e010: 2020 616e 6420 223a 2220 696e 2063 6f6d    and ":" in com
+0000e020: 706f 6e65 6e74 735b 2270 6174 6822 5d0a  ponents["path"].
+0000e030: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0000e040: 2020 2020 2020 2023 2066 6f72 2074 6865         # for the
+0000e050: 2070 6f73 7369 626c 6520 6361 7365 206f   possible case o
+0000e060: 6620 6162 6272 6576 6961 7465 6420 5552  f abbreviated UR
+0000e070: 4c73 2077 6974 680a 2020 2020 2020 2020  Ls with.        
+0000e080: 2020 2020 2320 706f 7274 732c 2063 6865      # ports, che
+0000e090: 636b 2074 6f20 7365 6520 6966 2061 6464  ck to see if add
+0000e0a0: 696e 6720 6120 7661 6c69 6420 7363 6865  ing a valid sche
+0000e0b0: 6d65 2066 6978 6573 0a20 2020 2020 2020  me fixes.       
+0000e0c0: 2020 2020 2023 2074 6865 2070 726f 626c       # the probl
+0000e0d0: 656d 2028 6275 7420 6f6e 6c79 2064 6f20  em (but only do 
+0000e0e0: 7468 6973 2069 6620 6974 2064 6f65 736e  this if it doesn
+0000e0f0: 2774 2068 6176 650a 2020 2020 2020 2020  't have.        
+0000e100: 2020 2020 2320 6f6e 6520 616c 7265 6164      # one alread
+0000e110: 7921 290a 2020 2020 2020 2020 2020 2020  y!).            
+0000e120: 6966 2022 3a2f 2f22 206e 6f74 2069 6e20  if "://" not in 
+0000e130: 7661 6c75 6520 616e 6420 4e6f 6e65 2069  value and None i
+0000e140: 6e20 7365 6c66 2e61 6c6c 6f77 6564 5f73  n self.allowed_s
+0000e150: 6368 656d 6573 3a0a 2020 2020 2020 2020  chemes:.        
+0000e160: 2020 2020 2020 2020 7363 6865 6d65 546f          schemeTo
+0000e170: 5573 6520 3d20 7365 6c66 2e70 7265 7065  Use = self.prepe
+0000e180: 6e64 5f73 6368 656d 6520 6f72 2022 6874  nd_scheme or "ht
+0000e190: 7470 220a 2020 2020 2020 2020 2020 2020  tp".            
+0000e1a0: 2020 2020 6e65 775f 7661 6c75 6520 3d20      new_value = 
+0000e1b0: 7365 6c66 2e76 616c 6964 6174 6528 7363  self.validate(sc
+0000e1c0: 6865 6d65 546f 5573 6520 2b20 223a 2f2f  hemeToUse + "://
+0000e1d0: 2220 2b20 7661 6c75 6529 0a20 2020 2020  " + value).     
+0000e1e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000e1f0: 6e20 6e65 775f 7661 6c75 6520 6966 2073  n new_value if s
+0000e200: 656c 662e 7072 6570 656e 645f 7363 6865  elf.prepend_sche
+0000e210: 6d65 2065 6c73 6520 7661 6c75 650a 2020  me else value.  
+0000e220: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0000e230: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+0000e240: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+0000e250: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+0000e260: 6765 2929 0a20 2020 2020 2020 2072 6574  ge)).        ret
+0000e270: 7572 6e20 7661 6c75 650a 0a0a 2320 536f  urn value...# So
+0000e280: 7572 6365 7320 286f 6274 6169 6e65 6420  urces (obtained 
+0000e290: 3230 3137 2d4e 6f76 2d31 3129 3a0a 2320  2017-Nov-11):.# 
+0000e2a0: 2020 2068 7474 703a 2f2f 6461 7461 2e69     http://data.i
+0000e2b0: 616e 612e 6f72 672f 544c 442f 746c 6473  ana.org/TLD/tlds
+0000e2c0: 2d61 6c70 6861 2d62 792d 646f 6d61 696e  -alpha-by-domain
+0000e2d0: 2e74 7874 0a23 2073 6565 2073 6372 6970  .txt.# see scrip
+0000e2e0: 7473 2f70 6172 7365 5f74 6f70 5f6c 6576  ts/parse_top_lev
+0000e2f0: 656c 5f64 6f6d 6169 6e73 2e70 7920 666f  el_domains.py fo
+0000e300: 7220 616e 2065 6173 7920 7570 6461 7465  r an easy update
+0000e310: 0a0a 6f66 6669 6369 616c 5f74 6f70 5f6c  ..official_top_l
+0000e320: 6576 656c 5f64 6f6d 6169 6e73 203d 205b  evel_domains = [
+0000e330: 0a20 2020 2023 2061 0a20 2020 2022 6161  .    # a.    "aa
+0000e340: 6122 2c0a 2020 2020 2261 6172 7022 2c0a  a",.    "aarp",.
+0000e350: 2020 2020 2261 6261 7274 6822 2c0a 2020      "abarth",.  
+0000e360: 2020 2261 6262 222c 0a20 2020 2022 6162    "abb",.    "ab
+0000e370: 626f 7474 222c 0a20 2020 2022 6162 6276  bott",.    "abbv
+0000e380: 6965 222c 0a20 2020 2022 6162 6322 2c0a  ie",.    "abc",.
+0000e390: 2020 2020 2261 626c 6522 2c0a 2020 2020      "able",.    
+0000e3a0: 2261 626f 6761 646f 222c 0a20 2020 2022  "abogado",.    "
+0000e3b0: 6162 7564 6861 6269 222c 0a20 2020 2022  abudhabi",.    "
+0000e3c0: 6163 222c 0a20 2020 2022 6163 6164 656d  ac",.    "academ
+0000e3d0: 7922 2c0a 2020 2020 2261 6363 656e 7475  y",.    "accentu
+0000e3e0: 7265 222c 0a20 2020 2022 6163 636f 756e  re",.    "accoun
+0000e3f0: 7461 6e74 222c 0a20 2020 2022 6163 636f  tant",.    "acco
+0000e400: 756e 7461 6e74 7322 2c0a 2020 2020 2261  untants",.    "a
+0000e410: 636f 222c 0a20 2020 2022 6163 7469 7665  co",.    "active
+0000e420: 222c 0a20 2020 2022 6163 746f 7222 2c0a  ",.    "actor",.
+0000e430: 2020 2020 2261 6422 2c0a 2020 2020 2261      "ad",.    "a
+0000e440: 6461 6322 2c0a 2020 2020 2261 6473 222c  dac",.    "ads",
+0000e450: 0a20 2020 2022 6164 756c 7422 2c0a 2020  .    "adult",.  
+0000e460: 2020 2261 6522 2c0a 2020 2020 2261 6567    "ae",.    "aeg
+0000e470: 222c 0a20 2020 2022 6165 726f 222c 0a20  ",.    "aero",. 
+0000e480: 2020 2022 6165 746e 6122 2c0a 2020 2020     "aetna",.    
+0000e490: 2261 6622 2c0a 2020 2020 2261 6661 6d69  "af",.    "afami
+0000e4a0: 6c79 636f 6d70 616e 7922 2c0a 2020 2020  lycompany",.    
+0000e4b0: 2261 666c 222c 0a20 2020 2022 6166 7269  "afl",.    "afri
+0000e4c0: 6361 222c 0a20 2020 2022 6167 222c 0a20  ca",.    "ag",. 
+0000e4d0: 2020 2022 6167 616b 6861 6e22 2c0a 2020     "agakhan",.  
+0000e4e0: 2020 2261 6765 6e63 7922 2c0a 2020 2020    "agency",.    
+0000e4f0: 2261 6922 2c0a 2020 2020 2261 6967 222c  "ai",.    "aig",
+0000e500: 0a20 2020 2022 6169 676f 222c 0a20 2020  .    "aigo",.   
+0000e510: 2022 6169 7262 7573 222c 0a20 2020 2022   "airbus",.    "
+0000e520: 6169 7266 6f72 6365 222c 0a20 2020 2022  airforce",.    "
+0000e530: 6169 7274 656c 222c 0a20 2020 2022 616b  airtel",.    "ak
+0000e540: 646e 222c 0a20 2020 2022 616c 222c 0a20  dn",.    "al",. 
+0000e550: 2020 2022 616c 6661 726f 6d65 6f22 2c0a     "alfaromeo",.
+0000e560: 2020 2020 2261 6c69 6261 6261 222c 0a20      "alibaba",. 
+0000e570: 2020 2022 616c 6970 6179 222c 0a20 2020     "alipay",.   
+0000e580: 2022 616c 6c66 696e 616e 7a22 2c0a 2020   "allfinanz",.  
+0000e590: 2020 2261 6c6c 7374 6174 6522 2c0a 2020    "allstate",.  
+0000e5a0: 2020 2261 6c6c 7922 2c0a 2020 2020 2261    "ally",.    "a
+0000e5b0: 6c73 6163 6522 2c0a 2020 2020 2261 6c73  lsace",.    "als
+0000e5c0: 746f 6d22 2c0a 2020 2020 2261 6d22 2c0a  tom",.    "am",.
+0000e5d0: 2020 2020 2261 6d65 7269 6361 6e65 7870      "americanexp
+0000e5e0: 7265 7373 222c 0a20 2020 2022 616d 6572  ress",.    "amer
+0000e5f0: 6963 616e 6661 6d69 6c79 222c 0a20 2020  icanfamily",.   
+0000e600: 2022 616d 6578 222c 0a20 2020 2022 616d   "amex",.    "am
+0000e610: 6661 6d22 2c0a 2020 2020 2261 6d69 6361  fam",.    "amica
+0000e620: 222c 0a20 2020 2022 616d 7374 6572 6461  ",.    "amsterda
+0000e630: 6d22 2c0a 2020 2020 2261 6e61 6c79 7469  m",.    "analyti
+0000e640: 6373 222c 0a20 2020 2022 616e 6472 6f69  cs",.    "androi
+0000e650: 6422 2c0a 2020 2020 2261 6e71 7561 6e22  d",.    "anquan"
+0000e660: 2c0a 2020 2020 2261 6e7a 222c 0a20 2020  ,.    "anz",.   
+0000e670: 2022 616f 222c 0a20 2020 2022 616f 6c22   "ao",.    "aol"
+0000e680: 2c0a 2020 2020 2261 7061 7274 6d65 6e74  ,.    "apartment
+0000e690: 7322 2c0a 2020 2020 2261 7070 222c 0a20  s",.    "app",. 
+0000e6a0: 2020 2022 6170 706c 6522 2c0a 2020 2020     "apple",.    
+0000e6b0: 2261 7122 2c0a 2020 2020 2261 7175 6172  "aq",.    "aquar
+0000e6c0: 656c 6c65 222c 0a20 2020 2022 6172 222c  elle",.    "ar",
+0000e6d0: 0a20 2020 2022 6172 6162 222c 0a20 2020  .    "arab",.   
+0000e6e0: 2022 6172 616d 636f 222c 0a20 2020 2022   "aramco",.    "
+0000e6f0: 6172 6368 6922 2c0a 2020 2020 2261 726d  archi",.    "arm
+0000e700: 7922 2c0a 2020 2020 2261 7270 6122 2c0a  y",.    "arpa",.
+0000e710: 2020 2020 2261 7274 222c 0a20 2020 2022      "art",.    "
+0000e720: 6172 7465 222c 0a20 2020 2022 6173 222c  arte",.    "as",
+0000e730: 0a20 2020 2022 6173 6461 222c 0a20 2020  .    "asda",.   
+0000e740: 2022 6173 6961 222c 0a20 2020 2022 6173   "asia",.    "as
+0000e750: 736f 6369 6174 6573 222c 0a20 2020 2022  sociates",.    "
+0000e760: 6174 222c 0a20 2020 2022 6174 686c 6574  at",.    "athlet
+0000e770: 6122 2c0a 2020 2020 2261 7474 6f72 6e65  a",.    "attorne
+0000e780: 7922 2c0a 2020 2020 2261 7522 2c0a 2020  y",.    "au",.  
+0000e790: 2020 2261 7563 7469 6f6e 222c 0a20 2020    "auction",.   
+0000e7a0: 2022 6175 6469 222c 0a20 2020 2022 6175   "audi",.    "au
+0000e7b0: 6469 626c 6522 2c0a 2020 2020 2261 7564  dible",.    "aud
+0000e7c0: 696f 222c 0a20 2020 2022 6175 7370 6f73  io",.    "auspos
+0000e7d0: 7422 2c0a 2020 2020 2261 7574 686f 7222  t",.    "author"
+0000e7e0: 2c0a 2020 2020 2261 7574 6f22 2c0a 2020  ,.    "auto",.  
+0000e7f0: 2020 2261 7574 6f73 222c 0a20 2020 2022    "autos",.    "
+0000e800: 6176 6961 6e63 6122 2c0a 2020 2020 2261  avianca",.    "a
+0000e810: 7722 2c0a 2020 2020 2261 7773 222c 0a20  w",.    "aws",. 
+0000e820: 2020 2022 6178 222c 0a20 2020 2022 6178     "ax",.    "ax
+0000e830: 6122 2c0a 2020 2020 2261 7a22 2c0a 2020  a",.    "az",.  
+0000e840: 2020 2261 7a75 7265 222c 0a20 2020 2023    "azure",.    #
+0000e850: 2062 0a20 2020 2022 6261 222c 0a20 2020   b.    "ba",.   
+0000e860: 2022 6261 6279 222c 0a20 2020 2022 6261   "baby",.    "ba
+0000e870: 6964 7522 2c0a 2020 2020 2262 616e 616d  idu",.    "banam
+0000e880: 6578 222c 0a20 2020 2022 6261 6e61 6e61  ex",.    "banana
+0000e890: 7265 7075 626c 6963 222c 0a20 2020 2022  republic",.    "
+0000e8a0: 6261 6e64 222c 0a20 2020 2022 6261 6e6b  band",.    "bank
+0000e8b0: 222c 0a20 2020 2022 6261 7222 2c0a 2020  ",.    "bar",.  
+0000e8c0: 2020 2262 6172 6365 6c6f 6e61 222c 0a20    "barcelona",. 
+0000e8d0: 2020 2022 6261 7263 6c61 7963 6172 6422     "barclaycard"
+0000e8e0: 2c0a 2020 2020 2262 6172 636c 6179 7322  ,.    "barclays"
+0000e8f0: 2c0a 2020 2020 2262 6172 6566 6f6f 7422  ,.    "barefoot"
+0000e900: 2c0a 2020 2020 2262 6172 6761 696e 7322  ,.    "bargains"
+0000e910: 2c0a 2020 2020 2262 6173 6562 616c 6c22  ,.    "baseball"
+0000e920: 2c0a 2020 2020 2262 6173 6b65 7462 616c  ,.    "basketbal
+0000e930: 6c22 2c0a 2020 2020 2262 6175 6861 7573  l",.    "bauhaus
+0000e940: 222c 0a20 2020 2022 6261 7965 726e 222c  ",.    "bayern",
+0000e950: 0a20 2020 2022 6262 222c 0a20 2020 2022  .    "bb",.    "
+0000e960: 6262 6322 2c0a 2020 2020 2262 6274 222c  bbc",.    "bbt",
+0000e970: 0a20 2020 2022 6262 7661 222c 0a20 2020  .    "bbva",.   
+0000e980: 2022 6263 6722 2c0a 2020 2020 2262 636e   "bcg",.    "bcn
+0000e990: 222c 0a20 2020 2022 6264 222c 0a20 2020  ",.    "bd",.   
+0000e9a0: 2022 6265 222c 0a20 2020 2022 6265 6174   "be",.    "beat
+0000e9b0: 7322 2c0a 2020 2020 2262 6561 7574 7922  s",.    "beauty"
+0000e9c0: 2c0a 2020 2020 2262 6565 7222 2c0a 2020  ,.    "beer",.  
+0000e9d0: 2020 2262 656e 746c 6579 222c 0a20 2020    "bentley",.   
+0000e9e0: 2022 6265 726c 696e 222c 0a20 2020 2022   "berlin",.    "
+0000e9f0: 6265 7374 222c 0a20 2020 2022 6265 7374  best",.    "best
+0000ea00: 6275 7922 2c0a 2020 2020 2262 6574 222c  buy",.    "bet",
+0000ea10: 0a20 2020 2022 6266 222c 0a20 2020 2022  .    "bf",.    "
+0000ea20: 6267 222c 0a20 2020 2022 6268 222c 0a20  bg",.    "bh",. 
+0000ea30: 2020 2022 6268 6172 7469 222c 0a20 2020     "bharti",.   
+0000ea40: 2022 6269 222c 0a20 2020 2022 6269 626c   "bi",.    "bibl
+0000ea50: 6522 2c0a 2020 2020 2262 6964 222c 0a20  e",.    "bid",. 
+0000ea60: 2020 2022 6269 6b65 222c 0a20 2020 2022     "bike",.    "
+0000ea70: 6269 6e67 222c 0a20 2020 2022 6269 6e67  bing",.    "bing
+0000ea80: 6f22 2c0a 2020 2020 2262 696f 222c 0a20  o",.    "bio",. 
+0000ea90: 2020 2022 6269 7a22 2c0a 2020 2020 2262     "biz",.    "b
+0000eaa0: 6a22 2c0a 2020 2020 2262 6c61 636b 222c  j",.    "black",
+0000eab0: 0a20 2020 2022 626c 6163 6b66 7269 6461  .    "blackfrida
+0000eac0: 7922 2c0a 2020 2020 2262 6c61 6e63 6f22  y",.    "blanco"
+0000ead0: 2c0a 2020 2020 2262 6c6f 636b 6275 7374  ,.    "blockbust
+0000eae0: 6572 222c 0a20 2020 2022 626c 6f67 222c  er",.    "blog",
+0000eaf0: 0a20 2020 2022 626c 6f6f 6d62 6572 6722  .    "bloomberg"
+0000eb00: 2c0a 2020 2020 2262 6c75 6522 2c0a 2020  ,.    "blue",.  
+0000eb10: 2020 2262 6d22 2c0a 2020 2020 2262 6d73    "bm",.    "bms
+0000eb20: 222c 0a20 2020 2022 626d 7722 2c0a 2020  ",.    "bmw",.  
+0000eb30: 2020 2262 6e22 2c0a 2020 2020 2262 6e6c    "bn",.    "bnl
+0000eb40: 222c 0a20 2020 2022 626e 7070 6172 6962  ",.    "bnpparib
+0000eb50: 6173 222c 0a20 2020 2022 626f 222c 0a20  as",.    "bo",. 
+0000eb60: 2020 2022 626f 6174 7322 2c0a 2020 2020     "boats",.    
+0000eb70: 2262 6f65 6872 696e 6765 7222 2c0a 2020  "boehringer",.  
+0000eb80: 2020 2262 6f66 6122 2c0a 2020 2020 2262    "bofa",.    "b
+0000eb90: 6f6d 222c 0a20 2020 2022 626f 6e64 222c  om",.    "bond",
+0000eba0: 0a20 2020 2022 626f 6f22 2c0a 2020 2020  .    "boo",.    
+0000ebb0: 2262 6f6f 6b22 2c0a 2020 2020 2262 6f6f  "book",.    "boo
+0000ebc0: 6b69 6e67 222c 0a20 2020 2022 626f 6f74  king",.    "boot
+0000ebd0: 7322 2c0a 2020 2020 2262 6f73 6368 222c  s",.    "bosch",
+0000ebe0: 0a20 2020 2022 626f 7374 696b 222c 0a20  .    "bostik",. 
+0000ebf0: 2020 2022 626f 7374 6f6e 222c 0a20 2020     "boston",.   
+0000ec00: 2022 626f 7422 2c0a 2020 2020 2262 6f75   "bot",.    "bou
+0000ec10: 7469 7175 6522 2c0a 2020 2020 2262 6f78  tique",.    "box
+0000ec20: 222c 0a20 2020 2022 6272 222c 0a20 2020  ",.    "br",.   
+0000ec30: 2022 6272 6164 6573 636f 222c 0a20 2020   "bradesco",.   
+0000ec40: 2022 6272 6964 6765 7374 6f6e 6522 2c0a   "bridgestone",.
+0000ec50: 2020 2020 2262 726f 6164 7761 7922 2c0a      "broadway",.
+0000ec60: 2020 2020 2262 726f 6b65 7222 2c0a 2020      "broker",.  
+0000ec70: 2020 2262 726f 7468 6572 222c 0a20 2020    "brother",.   
+0000ec80: 2022 6272 7573 7365 6c73 222c 0a20 2020   "brussels",.   
+0000ec90: 2022 6273 222c 0a20 2020 2022 6274 222c   "bs",.    "bt",
+0000eca0: 0a20 2020 2022 6275 6461 7065 7374 222c  .    "budapest",
+0000ecb0: 0a20 2020 2022 6275 6761 7474 6922 2c0a  .    "bugatti",.
+0000ecc0: 2020 2020 2262 7569 6c64 222c 0a20 2020      "build",.   
+0000ecd0: 2022 6275 696c 6465 7273 222c 0a20 2020   "builders",.   
+0000ece0: 2022 6275 7369 6e65 7373 222c 0a20 2020   "business",.   
+0000ecf0: 2022 6275 7922 2c0a 2020 2020 2262 757a   "buy",.    "buz
+0000ed00: 7a22 2c0a 2020 2020 2262 7622 2c0a 2020  z",.    "bv",.  
+0000ed10: 2020 2262 7722 2c0a 2020 2020 2262 7922    "bw",.    "by"
+0000ed20: 2c0a 2020 2020 2262 7a22 2c0a 2020 2020  ,.    "bz",.    
+0000ed30: 2262 7a68 222c 0a20 2020 2023 2063 0a20  "bzh",.    # c. 
+0000ed40: 2020 2022 6361 222c 0a20 2020 2022 6361     "ca",.    "ca
+0000ed50: 6222 2c0a 2020 2020 2263 6166 6522 2c0a  b",.    "cafe",.
+0000ed60: 2020 2020 2263 616c 222c 0a20 2020 2022      "cal",.    "
+0000ed70: 6361 6c6c 222c 0a20 2020 2022 6361 6c76  call",.    "calv
+0000ed80: 696e 6b6c 6569 6e22 2c0a 2020 2020 2263  inklein",.    "c
+0000ed90: 616d 222c 0a20 2020 2022 6361 6d65 7261  am",.    "camera
+0000eda0: 222c 0a20 2020 2022 6361 6d70 222c 0a20  ",.    "camp",. 
+0000edb0: 2020 2022 6361 6e63 6572 7265 7365 6172     "cancerresear
+0000edc0: 6368 222c 0a20 2020 2022 6361 6e6f 6e22  ch",.    "canon"
+0000edd0: 2c0a 2020 2020 2263 6170 6574 6f77 6e22  ,.    "capetown"
+0000ede0: 2c0a 2020 2020 2263 6170 6974 616c 222c  ,.    "capital",
+0000edf0: 0a20 2020 2022 6361 7069 7461 6c6f 6e65  .    "capitalone
+0000ee00: 222c 0a20 2020 2022 6361 7222 2c0a 2020  ",.    "car",.  
+0000ee10: 2020 2263 6172 6176 616e 222c 0a20 2020    "caravan",.   
+0000ee20: 2022 6361 7264 7322 2c0a 2020 2020 2263   "cards",.    "c
+0000ee30: 6172 6522 2c0a 2020 2020 2263 6172 6565  are",.    "caree
+0000ee40: 7222 2c0a 2020 2020 2263 6172 6565 7273  r",.    "careers
+0000ee50: 222c 0a20 2020 2022 6361 7273 222c 0a20  ",.    "cars",. 
+0000ee60: 2020 2022 6361 7274 6965 7222 2c0a 2020     "cartier",.  
+0000ee70: 2020 2263 6173 6122 2c0a 2020 2020 2263    "casa",.    "c
+0000ee80: 6173 6522 2c0a 2020 2020 2263 6173 6569  ase",.    "casei
+0000ee90: 6822 2c0a 2020 2020 2263 6173 6822 2c0a  h",.    "cash",.
+0000eea0: 2020 2020 2263 6173 696e 6f22 2c0a 2020      "casino",.  
+0000eeb0: 2020 2263 6174 222c 0a20 2020 2022 6361    "cat",.    "ca
+0000eec0: 7465 7269 6e67 222c 0a20 2020 2022 6361  tering",.    "ca
+0000eed0: 7468 6f6c 6963 222c 0a20 2020 2022 6362  tholic",.    "cb
+0000eee0: 6122 2c0a 2020 2020 2263 626e 222c 0a20  a",.    "cbn",. 
+0000eef0: 2020 2022 6362 7265 222c 0a20 2020 2022     "cbre",.    "
+0000ef00: 6362 7322 2c0a 2020 2020 2263 6322 2c0a  cbs",.    "cc",.
+0000ef10: 2020 2020 2263 6422 2c0a 2020 2020 2263      "cd",.    "c
+0000ef20: 6562 222c 0a20 2020 2022 6365 6e74 6572  eb",.    "center
+0000ef30: 222c 0a20 2020 2022 6365 6f22 2c0a 2020  ",.    "ceo",.  
+0000ef40: 2020 2263 6572 6e22 2c0a 2020 2020 2263    "cern",.    "c
+0000ef50: 6622 2c0a 2020 2020 2263 6661 222c 0a20  f",.    "cfa",. 
+0000ef60: 2020 2022 6366 6422 2c0a 2020 2020 2263     "cfd",.    "c
+0000ef70: 6722 2c0a 2020 2020 2263 6822 2c0a 2020  g",.    "ch",.  
+0000ef80: 2020 2263 6861 6e65 6c22 2c0a 2020 2020    "chanel",.    
+0000ef90: 2263 6861 6e6e 656c 222c 0a20 2020 2022  "channel",.    "
+0000efa0: 6368 6173 6522 2c0a 2020 2020 2263 6861  chase",.    "cha
+0000efb0: 7422 2c0a 2020 2020 2263 6865 6170 222c  t",.    "cheap",
+0000efc0: 0a20 2020 2022 6368 696e 7461 6922 2c0a  .    "chintai",.
+0000efd0: 2020 2020 2263 6872 6973 746d 6173 222c      "christmas",
+0000efe0: 0a20 2020 2022 6368 726f 6d65 222c 0a20  .    "chrome",. 
+0000eff0: 2020 2022 6368 7279 736c 6572 222c 0a20     "chrysler",. 
+0000f000: 2020 2022 6368 7572 6368 222c 0a20 2020     "church",.   
+0000f010: 2022 6369 222c 0a20 2020 2022 6369 7072   "ci",.    "cipr
+0000f020: 6961 6e69 222c 0a20 2020 2022 6369 7263  iani",.    "circ
+0000f030: 6c65 222c 0a20 2020 2022 6369 7363 6f22  le",.    "cisco"
+0000f040: 2c0a 2020 2020 2263 6974 6164 656c 222c  ,.    "citadel",
+0000f050: 0a20 2020 2022 6369 7469 222c 0a20 2020  .    "citi",.   
+0000f060: 2022 6369 7469 6322 2c0a 2020 2020 2263   "citic",.    "c
+0000f070: 6974 7922 2c0a 2020 2020 2263 6974 7965  ity",.    "citye
+0000f080: 6174 7322 2c0a 2020 2020 2263 6b22 2c0a  ats",.    "ck",.
+0000f090: 2020 2020 2263 6c22 2c0a 2020 2020 2263      "cl",.    "c
+0000f0a0: 6c61 696d 7322 2c0a 2020 2020 2263 6c65  laims",.    "cle
+0000f0b0: 616e 696e 6722 2c0a 2020 2020 2263 6c69  aning",.    "cli
+0000f0c0: 636b 222c 0a20 2020 2022 636c 696e 6963  ck",.    "clinic
+0000f0d0: 222c 0a20 2020 2022 636c 696e 6971 7565  ",.    "clinique
+0000f0e0: 222c 0a20 2020 2022 636c 6f74 6869 6e67  ",.    "clothing
+0000f0f0: 222c 0a20 2020 2022 636c 6f75 6422 2c0a  ",.    "cloud",.
+0000f100: 2020 2020 2263 6c75 6222 2c0a 2020 2020      "club",.    
+0000f110: 2263 6c75 626d 6564 222c 0a20 2020 2022  "clubmed",.    "
+0000f120: 636d 222c 0a20 2020 2022 636e 222c 0a20  cm",.    "cn",. 
+0000f130: 2020 2022 636f 222c 0a20 2020 2022 636f     "co",.    "co
+0000f140: 6163 6822 2c0a 2020 2020 2263 6f64 6573  ach",.    "codes
+0000f150: 222c 0a20 2020 2022 636f 6666 6565 222c  ",.    "coffee",
+0000f160: 0a20 2020 2022 636f 6c6c 6567 6522 2c0a  .    "college",.
+0000f170: 2020 2020 2263 6f6c 6f67 6e65 222c 0a20      "cologne",. 
+0000f180: 2020 2022 636f 6d22 2c0a 2020 2020 2263     "com",.    "c
+0000f190: 6f6d 6361 7374 222c 0a20 2020 2022 636f  omcast",.    "co
+0000f1a0: 6d6d 6261 6e6b 222c 0a20 2020 2022 636f  mmbank",.    "co
+0000f1b0: 6d6d 756e 6974 7922 2c0a 2020 2020 2263  mmunity",.    "c
+0000f1c0: 6f6d 7061 6e79 222c 0a20 2020 2022 636f  ompany",.    "co
+0000f1d0: 6d70 6172 6522 2c0a 2020 2020 2263 6f6d  mpare",.    "com
+0000f1e0: 7075 7465 7222 2c0a 2020 2020 2263 6f6d  puter",.    "com
+0000f1f0: 7365 6322 2c0a 2020 2020 2263 6f6e 646f  sec",.    "condo
+0000f200: 7322 2c0a 2020 2020 2263 6f6e 7374 7275  s",.    "constru
+0000f210: 6374 696f 6e22 2c0a 2020 2020 2263 6f6e  ction",.    "con
+0000f220: 7375 6c74 696e 6722 2c0a 2020 2020 2263  sulting",.    "c
+0000f230: 6f6e 7461 6374 222c 0a20 2020 2022 636f  ontact",.    "co
+0000f240: 6e74 7261 6374 6f72 7322 2c0a 2020 2020  ntractors",.    
+0000f250: 2263 6f6f 6b69 6e67 222c 0a20 2020 2022  "cooking",.    "
+0000f260: 636f 6f6b 696e 6763 6861 6e6e 656c 222c  cookingchannel",
+0000f270: 0a20 2020 2022 636f 6f6c 222c 0a20 2020  .    "cool",.   
+0000f280: 2022 636f 6f70 222c 0a20 2020 2022 636f   "coop",.    "co
+0000f290: 7273 6963 6122 2c0a 2020 2020 2263 6f75  rsica",.    "cou
+0000f2a0: 6e74 7279 222c 0a20 2020 2022 636f 7570  ntry",.    "coup
+0000f2b0: 6f6e 222c 0a20 2020 2022 636f 7570 6f6e  on",.    "coupon
+0000f2c0: 7322 2c0a 2020 2020 2263 6f75 7273 6573  s",.    "courses
+0000f2d0: 222c 0a20 2020 2022 6372 222c 0a20 2020  ",.    "cr",.   
+0000f2e0: 2022 6372 6564 6974 222c 0a20 2020 2022   "credit",.    "
+0000f2f0: 6372 6564 6974 6361 7264 222c 0a20 2020  creditcard",.   
+0000f300: 2022 6372 6564 6974 756e 696f 6e22 2c0a   "creditunion",.
+0000f310: 2020 2020 2263 7269 636b 6574 222c 0a20      "cricket",. 
+0000f320: 2020 2022 6372 6f77 6e22 2c0a 2020 2020     "crown",.    
+0000f330: 2263 7273 222c 0a20 2020 2022 6372 7569  "crs",.    "crui
+0000f340: 7365 222c 0a20 2020 2022 6372 7569 7365  se",.    "cruise
+0000f350: 7322 2c0a 2020 2020 2263 7363 222c 0a20  s",.    "csc",. 
+0000f360: 2020 2022 6375 222c 0a20 2020 2022 6375     "cu",.    "cu
+0000f370: 6973 696e 656c 6c61 222c 0a20 2020 2022  isinella",.    "
+0000f380: 6376 222c 0a20 2020 2022 6377 222c 0a20  cv",.    "cw",. 
+0000f390: 2020 2022 6378 222c 0a20 2020 2022 6379     "cx",.    "cy
+0000f3a0: 222c 0a20 2020 2022 6379 6d72 7522 2c0a  ",.    "cymru",.
+0000f3b0: 2020 2020 2263 796f 7522 2c0a 2020 2020      "cyou",.    
+0000f3c0: 2263 7a22 2c0a 2020 2020 2320 640a 2020  "cz",.    # d.  
+0000f3d0: 2020 2264 6162 7572 222c 0a20 2020 2022    "dabur",.    "
+0000f3e0: 6461 6422 2c0a 2020 2020 2264 616e 6365  dad",.    "dance
+0000f3f0: 222c 0a20 2020 2022 6461 7461 222c 0a20  ",.    "data",. 
+0000f400: 2020 2022 6461 7465 222c 0a20 2020 2022     "date",.    "
+0000f410: 6461 7469 6e67 222c 0a20 2020 2022 6461  dating",.    "da
+0000f420: 7473 756e 222c 0a20 2020 2022 6461 7922  tsun",.    "day"
+0000f430: 2c0a 2020 2020 2264 636c 6b22 2c0a 2020  ,.    "dclk",.  
+0000f440: 2020 2264 6473 222c 0a20 2020 2022 6465    "dds",.    "de
+0000f450: 222c 0a20 2020 2022 6465 616c 222c 0a20  ",.    "deal",. 
+0000f460: 2020 2022 6465 616c 6572 222c 0a20 2020     "dealer",.   
+0000f470: 2022 6465 616c 7322 2c0a 2020 2020 2264   "deals",.    "d
+0000f480: 6567 7265 6522 2c0a 2020 2020 2264 656c  egree",.    "del
+0000f490: 6976 6572 7922 2c0a 2020 2020 2264 656c  ivery",.    "del
+0000f4a0: 6c22 2c0a 2020 2020 2264 656c 6f69 7474  l",.    "deloitt
+0000f4b0: 6522 2c0a 2020 2020 2264 656c 7461 222c  e",.    "delta",
+0000f4c0: 0a20 2020 2022 6465 6d6f 6372 6174 222c  .    "democrat",
+0000f4d0: 0a20 2020 2022 6465 6e74 616c 222c 0a20  .    "dental",. 
+0000f4e0: 2020 2022 6465 6e74 6973 7422 2c0a 2020     "dentist",.  
+0000f4f0: 2020 2264 6573 6922 2c0a 2020 2020 2264    "desi",.    "d
+0000f500: 6573 6967 6e22 2c0a 2020 2020 2264 6576  esign",.    "dev
+0000f510: 222c 0a20 2020 2022 6468 6c22 2c0a 2020  ",.    "dhl",.  
+0000f520: 2020 2264 6961 6d6f 6e64 7322 2c0a 2020    "diamonds",.  
+0000f530: 2020 2264 6965 7422 2c0a 2020 2020 2264    "diet",.    "d
+0000f540: 6967 6974 616c 222c 0a20 2020 2022 6469  igital",.    "di
+0000f550: 7265 6374 222c 0a20 2020 2022 6469 7265  rect",.    "dire
+0000f560: 6374 6f72 7922 2c0a 2020 2020 2264 6973  ctory",.    "dis
+0000f570: 636f 756e 7422 2c0a 2020 2020 2264 6973  count",.    "dis
+0000f580: 636f 7665 7222 2c0a 2020 2020 2264 6973  cover",.    "dis
+0000f590: 6822 2c0a 2020 2020 2264 6979 222c 0a20  h",.    "diy",. 
+0000f5a0: 2020 2022 646a 222c 0a20 2020 2022 646b     "dj",.    "dk
+0000f5b0: 222c 0a20 2020 2022 646d 222c 0a20 2020  ",.    "dm",.   
+0000f5c0: 2022 646e 7022 2c0a 2020 2020 2264 6f22   "dnp",.    "do"
+0000f5d0: 2c0a 2020 2020 2264 6f63 7322 2c0a 2020  ,.    "docs",.  
+0000f5e0: 2020 2264 6f63 746f 7222 2c0a 2020 2020    "doctor",.    
+0000f5f0: 2264 6f64 6765 222c 0a20 2020 2022 646f  "dodge",.    "do
+0000f600: 6722 2c0a 2020 2020 2264 6f68 6122 2c0a  g",.    "doha",.
+0000f610: 2020 2020 2264 6f6d 6169 6e73 222c 0a20      "domains",. 
+0000f620: 2020 2022 646f 7422 2c0a 2020 2020 2264     "dot",.    "d
+0000f630: 6f77 6e6c 6f61 6422 2c0a 2020 2020 2264  ownload",.    "d
+0000f640: 7269 7665 222c 0a20 2020 2022 6474 7622  rive",.    "dtv"
+0000f650: 2c0a 2020 2020 2264 7562 6169 222c 0a20  ,.    "dubai",. 
+0000f660: 2020 2022 6475 636b 222c 0a20 2020 2022     "duck",.    "
+0000f670: 6475 6e6c 6f70 222c 0a20 2020 2022 6475  dunlop",.    "du
+0000f680: 6e73 222c 0a20 2020 2022 6475 706f 6e74  ns",.    "dupont
+0000f690: 222c 0a20 2020 2022 6475 7262 616e 222c  ",.    "durban",
+0000f6a0: 0a20 2020 2022 6476 6167 222c 0a20 2020  .    "dvag",.   
+0000f6b0: 2022 6476 7222 2c0a 2020 2020 2264 7a22   "dvr",.    "dz"
+0000f6c0: 2c0a 2020 2020 2320 650a 2020 2020 2265  ,.    # e.    "e
+0000f6d0: 6172 7468 222c 0a20 2020 2022 6561 7422  arth",.    "eat"
+0000f6e0: 2c0a 2020 2020 2265 6322 2c0a 2020 2020  ,.    "ec",.    
+0000f6f0: 2265 636f 222c 0a20 2020 2022 6564 656b  "eco",.    "edek
+0000f700: 6122 2c0a 2020 2020 2265 6475 222c 0a20  a",.    "edu",. 
+0000f710: 2020 2022 6564 7563 6174 696f 6e22 2c0a     "education",.
+0000f720: 2020 2020 2265 6522 2c0a 2020 2020 2265      "ee",.    "e
+0000f730: 6722 2c0a 2020 2020 2265 6d61 696c 222c  g",.    "email",
+0000f740: 0a20 2020 2022 656d 6572 636b 222c 0a20  .    "emerck",. 
+0000f750: 2020 2022 656e 6572 6779 222c 0a20 2020     "energy",.   
+0000f760: 2022 656e 6769 6e65 6572 222c 0a20 2020   "engineer",.   
+0000f770: 2022 656e 6769 6e65 6572 696e 6722 2c0a   "engineering",.
+0000f780: 2020 2020 2265 6e74 6572 7072 6973 6573      "enterprises
+0000f790: 222c 0a20 2020 2022 6570 6f73 7422 2c0a  ",.    "epost",.
+0000f7a0: 2020 2020 2265 7073 6f6e 222c 0a20 2020      "epson",.   
+0000f7b0: 2022 6571 7569 706d 656e 7422 2c0a 2020   "equipment",.  
+0000f7c0: 2020 2265 7222 2c0a 2020 2020 2265 7269    "er",.    "eri
+0000f7d0: 6373 736f 6e22 2c0a 2020 2020 2265 726e  csson",.    "ern
+0000f7e0: 6922 2c0a 2020 2020 2265 7322 2c0a 2020  i",.    "es",.  
+0000f7f0: 2020 2265 7371 222c 0a20 2020 2022 6573    "esq",.    "es
+0000f800: 7461 7465 222c 0a20 2020 2022 6573 7572  tate",.    "esur
+0000f810: 616e 6365 222c 0a20 2020 2022 6574 222c  ance",.    "et",
+0000f820: 0a20 2020 2022 6574 6973 616c 6174 222c  .    "etisalat",
+0000f830: 0a20 2020 2022 6575 222c 0a20 2020 2022  .    "eu",.    "
+0000f840: 6575 726f 7669 7369 6f6e 222c 0a20 2020  eurovision",.   
+0000f850: 2022 6575 7322 2c0a 2020 2020 2265 7665   "eus",.    "eve
+0000f860: 6e74 7322 2c0a 2020 2020 2265 7665 7262  nts",.    "everb
+0000f870: 616e 6b22 2c0a 2020 2020 2265 7863 6861  ank",.    "excha
+0000f880: 6e67 6522 2c0a 2020 2020 2265 7870 6572  nge",.    "exper
+0000f890: 7422 2c0a 2020 2020 2265 7870 6f73 6564  t",.    "exposed
+0000f8a0: 222c 0a20 2020 2022 6578 7072 6573 7322  ",.    "express"
+0000f8b0: 2c0a 2020 2020 2265 7874 7261 7370 6163  ,.    "extraspac
+0000f8c0: 6522 2c0a 2020 2020 2320 660a 2020 2020  e",.    # f.    
+0000f8d0: 2266 6167 6522 2c0a 2020 2020 2266 6169  "fage",.    "fai
+0000f8e0: 6c22 2c0a 2020 2020 2266 6169 7277 696e  l",.    "fairwin
+0000f8f0: 6473 222c 0a20 2020 2022 6661 6974 6822  ds",.    "faith"
+0000f900: 2c0a 2020 2020 2266 616d 696c 7922 2c0a  ,.    "family",.
+0000f910: 2020 2020 2266 616e 222c 0a20 2020 2022      "fan",.    "
+0000f920: 6661 6e73 222c 0a20 2020 2022 6661 726d  fans",.    "farm
+0000f930: 222c 0a20 2020 2022 6661 726d 6572 7322  ",.    "farmers"
+0000f940: 2c0a 2020 2020 2266 6173 6869 6f6e 222c  ,.    "fashion",
+0000f950: 0a20 2020 2022 6661 7374 222c 0a20 2020  .    "fast",.   
+0000f960: 2022 6665 6465 7822 2c0a 2020 2020 2266   "fedex",.    "f
+0000f970: 6565 6462 6163 6b22 2c0a 2020 2020 2266  eedback",.    "f
+0000f980: 6572 7261 7269 222c 0a20 2020 2022 6665  errari",.    "fe
+0000f990: 7272 6572 6f22 2c0a 2020 2020 2266 6922  rrero",.    "fi"
+0000f9a0: 2c0a 2020 2020 2266 6961 7422 2c0a 2020  ,.    "fiat",.  
+0000f9b0: 2020 2266 6964 656c 6974 7922 2c0a 2020    "fidelity",.  
+0000f9c0: 2020 2266 6964 6f22 2c0a 2020 2020 2266    "fido",.    "f
+0000f9d0: 696c 6d22 2c0a 2020 2020 2266 696e 616c  ilm",.    "final
+0000f9e0: 222c 0a20 2020 2022 6669 6e61 6e63 6522  ",.    "finance"
+0000f9f0: 2c0a 2020 2020 2266 696e 616e 6369 616c  ,.    "financial
+0000fa00: 222c 0a20 2020 2022 6669 7265 222c 0a20  ",.    "fire",. 
+0000fa10: 2020 2022 6669 7265 7374 6f6e 6522 2c0a     "firestone",.
+0000fa20: 2020 2020 2266 6972 6d64 616c 6522 2c0a      "firmdale",.
+0000fa30: 2020 2020 2266 6973 6822 2c0a 2020 2020      "fish",.    
+0000fa40: 2266 6973 6869 6e67 222c 0a20 2020 2022  "fishing",.    "
+0000fa50: 6669 7422 2c0a 2020 2020 2266 6974 6e65  fit",.    "fitne
+0000fa60: 7373 222c 0a20 2020 2022 666a 222c 0a20  ss",.    "fj",. 
+0000fa70: 2020 2022 666b 222c 0a20 2020 2022 666c     "fk",.    "fl
+0000fa80: 6963 6b72 222c 0a20 2020 2022 666c 6967  ickr",.    "flig
+0000fa90: 6874 7322 2c0a 2020 2020 2266 6c69 7222  hts",.    "flir"
+0000faa0: 2c0a 2020 2020 2266 6c6f 7269 7374 222c  ,.    "florist",
+0000fab0: 0a20 2020 2022 666c 6f77 6572 7322 2c0a  .    "flowers",.
+0000fac0: 2020 2020 2266 6c79 222c 0a20 2020 2022      "fly",.    "
+0000fad0: 666d 222c 0a20 2020 2022 666f 222c 0a20  fm",.    "fo",. 
+0000fae0: 2020 2022 666f 6f22 2c0a 2020 2020 2266     "foo",.    "f
+0000faf0: 6f6f 6422 2c0a 2020 2020 2266 6f6f 646e  ood",.    "foodn
+0000fb00: 6574 776f 726b 222c 0a20 2020 2022 666f  etwork",.    "fo
+0000fb10: 6f74 6261 6c6c 222c 0a20 2020 2022 666f  otball",.    "fo
+0000fb20: 7264 222c 0a20 2020 2022 666f 7265 7822  rd",.    "forex"
+0000fb30: 2c0a 2020 2020 2266 6f72 7361 6c65 222c  ,.    "forsale",
+0000fb40: 0a20 2020 2022 666f 7275 6d22 2c0a 2020  .    "forum",.  
+0000fb50: 2020 2266 6f75 6e64 6174 696f 6e22 2c0a    "foundation",.
+0000fb60: 2020 2020 2266 6f78 222c 0a20 2020 2022      "fox",.    "
+0000fb70: 6672 222c 0a20 2020 2022 6672 6565 222c  fr",.    "free",
+0000fb80: 0a20 2020 2022 6672 6573 656e 6975 7322  .    "fresenius"
+0000fb90: 2c0a 2020 2020 2266 726c 222c 0a20 2020  ,.    "frl",.   
+0000fba0: 2022 6672 6f67 616e 7322 2c0a 2020 2020   "frogans",.    
+0000fbb0: 2266 726f 6e74 646f 6f72 222c 0a20 2020  "frontdoor",.   
+0000fbc0: 2022 6672 6f6e 7469 6572 222c 0a20 2020   "frontier",.   
+0000fbd0: 2022 6674 7222 2c0a 2020 2020 2266 756a   "ftr",.    "fuj
+0000fbe0: 6974 7375 222c 0a20 2020 2022 6675 6a69  itsu",.    "fuji
+0000fbf0: 7865 726f 7822 2c0a 2020 2020 2266 756e  xerox",.    "fun
+0000fc00: 222c 0a20 2020 2022 6675 6e64 222c 0a20  ",.    "fund",. 
+0000fc10: 2020 2022 6675 726e 6974 7572 6522 2c0a     "furniture",.
+0000fc20: 2020 2020 2266 7574 626f 6c22 2c0a 2020      "futbol",.  
+0000fc30: 2020 2266 7969 222c 0a20 2020 2023 2067    "fyi",.    # g
+0000fc40: 0a20 2020 2022 6761 222c 0a20 2020 2022  .    "ga",.    "
+0000fc50: 6761 6c22 2c0a 2020 2020 2267 616c 6c65  gal",.    "galle
+0000fc60: 7279 222c 0a20 2020 2022 6761 6c6c 6f22  ry",.    "gallo"
+0000fc70: 2c0a 2020 2020 2267 616c 6c75 7022 2c0a  ,.    "gallup",.
+0000fc80: 2020 2020 2267 616d 6522 2c0a 2020 2020      "game",.    
+0000fc90: 2267 616d 6573 222c 0a20 2020 2022 6761  "games",.    "ga
+0000fca0: 7022 2c0a 2020 2020 2267 6172 6465 6e22  p",.    "garden"
+0000fcb0: 2c0a 2020 2020 2267 6222 2c0a 2020 2020  ,.    "gb",.    
+0000fcc0: 2267 6269 7a22 2c0a 2020 2020 2267 6422  "gbiz",.    "gd"
+0000fcd0: 2c0a 2020 2020 2267 646e 222c 0a20 2020  ,.    "gdn",.   
+0000fce0: 2022 6765 222c 0a20 2020 2022 6765 6122   "ge",.    "gea"
+0000fcf0: 2c0a 2020 2020 2267 656e 7422 2c0a 2020  ,.    "gent",.  
+0000fd00: 2020 2267 656e 7469 6e67 222c 0a20 2020    "genting",.   
+0000fd10: 2022 6765 6f72 6765 222c 0a20 2020 2022   "george",.    "
+0000fd20: 6766 222c 0a20 2020 2022 6767 222c 0a20  gf",.    "gg",. 
+0000fd30: 2020 2022 6767 6565 222c 0a20 2020 2022     "ggee",.    "
+0000fd40: 6768 222c 0a20 2020 2022 6769 222c 0a20  gh",.    "gi",. 
+0000fd50: 2020 2022 6769 6674 222c 0a20 2020 2022     "gift",.    "
+0000fd60: 6769 6674 7322 2c0a 2020 2020 2267 6976  gifts",.    "giv
+0000fd70: 6573 222c 0a20 2020 2022 6769 7669 6e67  es",.    "giving
+0000fd80: 222c 0a20 2020 2022 676c 222c 0a20 2020  ",.    "gl",.   
+0000fd90: 2022 676c 6164 6522 2c0a 2020 2020 2267   "glade",.    "g
+0000fda0: 6c61 7373 222c 0a20 2020 2022 676c 6522  lass",.    "gle"
+0000fdb0: 2c0a 2020 2020 2267 6c6f 6261 6c22 2c0a  ,.    "global",.
+0000fdc0: 2020 2020 2267 6c6f 626f 222c 0a20 2020      "globo",.   
+0000fdd0: 2022 676d 222c 0a20 2020 2022 676d 6169   "gm",.    "gmai
+0000fde0: 6c22 2c0a 2020 2020 2267 6d62 6822 2c0a  l",.    "gmbh",.
+0000fdf0: 2020 2020 2267 6d6f 222c 0a20 2020 2022      "gmo",.    "
+0000fe00: 676d 7822 2c0a 2020 2020 2267 6e22 2c0a  gmx",.    "gn",.
+0000fe10: 2020 2020 2267 6f64 6164 6479 222c 0a20      "godaddy",. 
+0000fe20: 2020 2022 676f 6c64 222c 0a20 2020 2022     "gold",.    "
+0000fe30: 676f 6c64 706f 696e 7422 2c0a 2020 2020  goldpoint",.    
+0000fe40: 2267 6f6c 6622 2c0a 2020 2020 2267 6f6f  "golf",.    "goo
+0000fe50: 222c 0a20 2020 2022 676f 6f64 6861 6e64  ",.    "goodhand
+0000fe60: 7322 2c0a 2020 2020 2267 6f6f 6479 6561  s",.    "goodyea
+0000fe70: 7222 2c0a 2020 2020 2267 6f6f 6722 2c0a  r",.    "goog",.
+0000fe80: 2020 2020 2267 6f6f 676c 6522 2c0a 2020      "google",.  
+0000fe90: 2020 2267 6f70 222c 0a20 2020 2022 676f    "gop",.    "go
+0000fea0: 7422 2c0a 2020 2020 2267 6f76 222c 0a20  t",.    "gov",. 
+0000feb0: 2020 2022 6770 222c 0a20 2020 2022 6771     "gp",.    "gq
+0000fec0: 222c 0a20 2020 2022 6772 222c 0a20 2020  ",.    "gr",.   
+0000fed0: 2022 6772 6169 6e67 6572 222c 0a20 2020   "grainger",.   
+0000fee0: 2022 6772 6170 6869 6373 222c 0a20 2020   "graphics",.   
+0000fef0: 2022 6772 6174 6973 222c 0a20 2020 2022   "gratis",.    "
+0000ff00: 6772 6565 6e22 2c0a 2020 2020 2267 7269  green",.    "gri
+0000ff10: 7065 222c 0a20 2020 2022 6772 6f63 6572  pe",.    "grocer
+0000ff20: 7922 2c0a 2020 2020 2267 726f 7570 222c  y",.    "group",
+0000ff30: 0a20 2020 2022 6773 222c 0a20 2020 2022  .    "gs",.    "
+0000ff40: 6774 222c 0a20 2020 2022 6775 222c 0a20  gt",.    "gu",. 
+0000ff50: 2020 2022 6775 6172 6469 616e 222c 0a20     "guardian",. 
+0000ff60: 2020 2022 6775 6363 6922 2c0a 2020 2020     "gucci",.    
+0000ff70: 2267 7567 6522 2c0a 2020 2020 2267 7569  "guge",.    "gui
+0000ff80: 6465 222c 0a20 2020 2022 6775 6974 6172  de",.    "guitar
+0000ff90: 7322 2c0a 2020 2020 2267 7572 7522 2c0a  s",.    "guru",.
+0000ffa0: 2020 2020 2267 7722 2c0a 2020 2020 2267      "gw",.    "g
+0000ffb0: 7922 2c0a 2020 2020 2320 680a 2020 2020  y",.    # h.    
+0000ffc0: 2268 6169 7222 2c0a 2020 2020 2268 616d  "hair",.    "ham
+0000ffd0: 6275 7267 222c 0a20 2020 2022 6861 6e67  burg",.    "hang
+0000ffe0: 6f75 7422 2c0a 2020 2020 2268 6175 7322  out",.    "haus"
+0000fff0: 2c0a 2020 2020 2268 626f 222c 0a20 2020  ,.    "hbo",.   
+00010000: 2022 6864 6663 222c 0a20 2020 2022 6864   "hdfc",.    "hd
+00010010: 6663 6261 6e6b 222c 0a20 2020 2022 6865  fcbank",.    "he
+00010020: 616c 7468 222c 0a20 2020 2022 6865 616c  alth",.    "heal
+00010030: 7468 6361 7265 222c 0a20 2020 2022 6865  thcare",.    "he
+00010040: 6c70 222c 0a20 2020 2022 6865 6c73 696e  lp",.    "helsin
+00010050: 6b69 222c 0a20 2020 2022 6865 7265 222c  ki",.    "here",
+00010060: 0a20 2020 2022 6865 726d 6573 222c 0a20  .    "hermes",. 
+00010070: 2020 2022 6867 7476 222c 0a20 2020 2022     "hgtv",.    "
+00010080: 6869 7068 6f70 222c 0a20 2020 2022 6869  hiphop",.    "hi
+00010090: 7361 6d69 7473 7522 2c0a 2020 2020 2268  samitsu",.    "h
+000100a0: 6974 6163 6869 222c 0a20 2020 2022 6869  itachi",.    "hi
+000100b0: 7622 2c0a 2020 2020 2268 6b22 2c0a 2020  v",.    "hk",.  
+000100c0: 2020 2268 6b74 222c 0a20 2020 2022 686d    "hkt",.    "hm
+000100d0: 222c 0a20 2020 2022 686e 222c 0a20 2020  ",.    "hn",.   
+000100e0: 2022 686f 636b 6579 222c 0a20 2020 2022   "hockey",.    "
+000100f0: 686f 6c64 696e 6773 222c 0a20 2020 2022  holdings",.    "
+00010100: 686f 6c69 6461 7922 2c0a 2020 2020 2268  holiday",.    "h
+00010110: 6f6d 6564 6570 6f74 222c 0a20 2020 2022  omedepot",.    "
+00010120: 686f 6d65 676f 6f64 7322 2c0a 2020 2020  homegoods",.    
+00010130: 2268 6f6d 6573 222c 0a20 2020 2022 686f  "homes",.    "ho
+00010140: 6d65 7365 6e73 6522 2c0a 2020 2020 2268  mesense",.    "h
+00010150: 6f6e 6461 222c 0a20 2020 2022 686f 6e65  onda",.    "hone
+00010160: 7977 656c 6c22 2c0a 2020 2020 2268 6f72  ywell",.    "hor
+00010170: 7365 222c 0a20 2020 2022 686f 7370 6974  se",.    "hospit
+00010180: 616c 222c 0a20 2020 2022 686f 7374 222c  al",.    "host",
+00010190: 0a20 2020 2022 686f 7374 696e 6722 2c0a  .    "hosting",.
+000101a0: 2020 2020 2268 6f74 222c 0a20 2020 2022      "hot",.    "
+000101b0: 686f 7465 6c65 7322 2c0a 2020 2020 2268  hoteles",.    "h
+000101c0: 6f74 656c 7322 2c0a 2020 2020 2268 6f74  otels",.    "hot
+000101d0: 6d61 696c 222c 0a20 2020 2022 686f 7573  mail",.    "hous
+000101e0: 6522 2c0a 2020 2020 2268 6f77 222c 0a20  e",.    "how",. 
+000101f0: 2020 2022 6872 222c 0a20 2020 2022 6873     "hr",.    "hs
+00010200: 6263 222c 0a20 2020 2022 6874 222c 0a20  bc",.    "ht",. 
+00010210: 2020 2022 6875 222c 0a20 2020 2022 6875     "hu",.    "hu
+00010220: 6768 6573 222c 0a20 2020 2022 6879 6174  ghes",.    "hyat
+00010230: 7422 2c0a 2020 2020 2268 7975 6e64 6169  t",.    "hyundai
+00010240: 222c 0a20 2020 2023 2069 0a20 2020 2022  ",.    # i.    "
+00010250: 6962 6d22 2c0a 2020 2020 2269 6362 6322  ibm",.    "icbc"
+00010260: 2c0a 2020 2020 2269 6365 222c 0a20 2020  ,.    "ice",.   
+00010270: 2022 6963 7522 2c0a 2020 2020 2269 6422   "icu",.    "id"
+00010280: 2c0a 2020 2020 2269 6522 2c0a 2020 2020  ,.    "ie",.    
+00010290: 2269 6565 6522 2c0a 2020 2020 2269 666d  "ieee",.    "ifm
+000102a0: 222c 0a20 2020 2022 696b 616e 6f22 2c0a  ",.    "ikano",.
+000102b0: 2020 2020 2269 6c22 2c0a 2020 2020 2269      "il",.    "i
+000102c0: 6d22 2c0a 2020 2020 2269 6d61 6d61 7422  m",.    "imamat"
+000102d0: 2c0a 2020 2020 2269 6d64 6222 2c0a 2020  ,.    "imdb",.  
+000102e0: 2020 2269 6d6d 6f22 2c0a 2020 2020 2269    "immo",.    "i
+000102f0: 6d6d 6f62 696c 6965 6e22 2c0a 2020 2020  mmobilien",.    
+00010300: 2269 6e22 2c0a 2020 2020 2269 6e64 7573  "in",.    "indus
+00010310: 7472 6965 7322 2c0a 2020 2020 2269 6e66  tries",.    "inf
+00010320: 696e 6974 6922 2c0a 2020 2020 2269 6e66  initi",.    "inf
+00010330: 6f22 2c0a 2020 2020 2269 6e67 222c 0a20  o",.    "ing",. 
+00010340: 2020 2022 696e 6b22 2c0a 2020 2020 2269     "ink",.    "i
+00010350: 6e73 7469 7475 7465 222c 0a20 2020 2022  nstitute",.    "
+00010360: 696e 7375 7261 6e63 6522 2c0a 2020 2020  insurance",.    
+00010370: 2269 6e73 7572 6522 2c0a 2020 2020 2269  "insure",.    "i
+00010380: 6e74 222c 0a20 2020 2022 696e 7465 6c22  nt",.    "intel"
+00010390: 2c0a 2020 2020 2269 6e74 6572 6e61 7469  ,.    "internati
+000103a0: 6f6e 616c 222c 0a20 2020 2022 696e 7475  onal",.    "intu
+000103b0: 6974 222c 0a20 2020 2022 696e 7665 7374  it",.    "invest
+000103c0: 6d65 6e74 7322 2c0a 2020 2020 2269 6f22  ments",.    "io"
+000103d0: 2c0a 2020 2020 2269 7069 7261 6e67 6122  ,.    "ipiranga"
+000103e0: 2c0a 2020 2020 2269 7122 2c0a 2020 2020  ,.    "iq",.    
+000103f0: 2269 7222 2c0a 2020 2020 2269 7269 7368  "ir",.    "irish
+00010400: 222c 0a20 2020 2022 6973 222c 0a20 2020  ",.    "is",.   
+00010410: 2022 6973 656c 6563 7422 2c0a 2020 2020   "iselect",.    
+00010420: 2269 736d 6169 6c69 222c 0a20 2020 2022  "ismaili",.    "
+00010430: 6973 7422 2c0a 2020 2020 2269 7374 616e  ist",.    "istan
+00010440: 6275 6c22 2c0a 2020 2020 2269 7422 2c0a  bul",.    "it",.
+00010450: 2020 2020 2269 7461 7522 2c0a 2020 2020      "itau",.    
+00010460: 2269 7476 222c 0a20 2020 2022 6976 6563  "itv",.    "ivec
+00010470: 6f22 2c0a 2020 2020 2269 7763 222c 0a20  o",.    "iwc",. 
+00010480: 2020 2023 206a 0a20 2020 2022 6a61 6775     # j.    "jagu
+00010490: 6172 222c 0a20 2020 2022 6a61 7661 222c  ar",.    "java",
+000104a0: 0a20 2020 2022 6a63 6222 2c0a 2020 2020  .    "jcb",.    
+000104b0: 226a 6370 222c 0a20 2020 2022 6a65 222c  "jcp",.    "je",
+000104c0: 0a20 2020 2022 6a65 6570 222c 0a20 2020  .    "jeep",.   
+000104d0: 2022 6a65 747a 7422 2c0a 2020 2020 226a   "jetzt",.    "j
+000104e0: 6577 656c 7279 222c 0a20 2020 2022 6a69  ewelry",.    "ji
+000104f0: 6f22 2c0a 2020 2020 226a 6c63 222c 0a20  o",.    "jlc",. 
+00010500: 2020 2022 6a6c 6c22 2c0a 2020 2020 226a     "jll",.    "j
+00010510: 6d22 2c0a 2020 2020 226a 6d70 222c 0a20  m",.    "jmp",. 
+00010520: 2020 2022 6a6e 6a22 2c0a 2020 2020 226a     "jnj",.    "j
+00010530: 6f22 2c0a 2020 2020 226a 6f62 7322 2c0a  o",.    "jobs",.
+00010540: 2020 2020 226a 6f62 7572 6722 2c0a 2020      "joburg",.  
+00010550: 2020 226a 6f74 222c 0a20 2020 2022 6a6f    "jot",.    "jo
+00010560: 7922 2c0a 2020 2020 226a 7022 2c0a 2020  y",.    "jp",.  
+00010570: 2020 226a 706d 6f72 6761 6e22 2c0a 2020    "jpmorgan",.  
+00010580: 2020 226a 7072 7322 2c0a 2020 2020 226a    "jprs",.    "j
+00010590: 7565 676f 7322 2c0a 2020 2020 226a 756e  uegos",.    "jun
+000105a0: 6970 6572 222c 0a20 2020 2023 206b 0a20  iper",.    # k. 
+000105b0: 2020 2022 6b61 7566 656e 222c 0a20 2020     "kaufen",.   
+000105c0: 2022 6b64 6469 222c 0a20 2020 2022 6b65   "kddi",.    "ke
+000105d0: 222c 0a20 2020 2022 6b65 7272 7968 6f74  ",.    "kerryhot
+000105e0: 656c 7322 2c0a 2020 2020 226b 6572 7279  els",.    "kerry
+000105f0: 6c6f 6769 7374 6963 7322 2c0a 2020 2020  logistics",.    
+00010600: 226b 6572 7279 7072 6f70 6572 7469 6573  "kerryproperties
+00010610: 222c 0a20 2020 2022 6b66 6822 2c0a 2020  ",.    "kfh",.  
+00010620: 2020 226b 6722 2c0a 2020 2020 226b 6822    "kg",.    "kh"
+00010630: 2c0a 2020 2020 226b 6922 2c0a 2020 2020  ,.    "ki",.    
+00010640: 226b 6961 222c 0a20 2020 2022 6b69 6d22  "kia",.    "kim"
+00010650: 2c0a 2020 2020 226b 696e 6465 7222 2c0a  ,.    "kinder",.
+00010660: 2020 2020 226b 696e 646c 6522 2c0a 2020      "kindle",.  
+00010670: 2020 226b 6974 6368 656e 222c 0a20 2020    "kitchen",.   
+00010680: 2022 6b69 7769 222c 0a20 2020 2022 6b6d   "kiwi",.    "km
+00010690: 222c 0a20 2020 2022 6b6e 222c 0a20 2020  ",.    "kn",.   
+000106a0: 2022 6b6f 656c 6e22 2c0a 2020 2020 226b   "koeln",.    "k
+000106b0: 6f6d 6174 7375 222c 0a20 2020 2022 6b6f  omatsu",.    "ko
+000106c0: 7368 6572 222c 0a20 2020 2022 6b70 222c  sher",.    "kp",
+000106d0: 0a20 2020 2022 6b70 6d67 222c 0a20 2020  .    "kpmg",.   
+000106e0: 2022 6b70 6e22 2c0a 2020 2020 226b 7222   "kpn",.    "kr"
+000106f0: 2c0a 2020 2020 226b 7264 222c 0a20 2020  ,.    "krd",.   
+00010700: 2022 6b72 6564 222c 0a20 2020 2022 6b75   "kred",.    "ku
+00010710: 6f6b 6772 6f75 7022 2c0a 2020 2020 226b  okgroup",.    "k
+00010720: 7722 2c0a 2020 2020 226b 7922 2c0a 2020  w",.    "ky",.  
+00010730: 2020 226b 796f 746f 222c 0a20 2020 2022    "kyoto",.    "
+00010740: 6b7a 222c 0a20 2020 2023 206c 0a20 2020  kz",.    # l.   
+00010750: 2022 6c61 222c 0a20 2020 2022 6c61 6361   "la",.    "laca
+00010760: 6978 6122 2c0a 2020 2020 226c 6164 6272  ixa",.    "ladbr
+00010770: 6f6b 6573 222c 0a20 2020 2022 6c61 6d62  okes",.    "lamb
+00010780: 6f72 6768 696e 6922 2c0a 2020 2020 226c  orghini",.    "l
+00010790: 616d 6572 222c 0a20 2020 2022 6c61 6e63  amer",.    "lanc
+000107a0: 6173 7465 7222 2c0a 2020 2020 226c 616e  aster",.    "lan
+000107b0: 6369 6122 2c0a 2020 2020 226c 616e 636f  cia",.    "lanco
+000107c0: 6d65 222c 0a20 2020 2022 6c61 6e64 222c  me",.    "land",
+000107d0: 0a20 2020 2022 6c61 6e64 726f 7665 7222  .    "landrover"
+000107e0: 2c0a 2020 2020 226c 616e 7865 7373 222c  ,.    "lanxess",
+000107f0: 0a20 2020 2022 6c61 7361 6c6c 6522 2c0a  .    "lasalle",.
+00010800: 2020 2020 226c 6174 222c 0a20 2020 2022      "lat",.    "
+00010810: 6c61 7469 6e6f 222c 0a20 2020 2022 6c61  latino",.    "la
+00010820: 7472 6f62 6522 2c0a 2020 2020 226c 6177  trobe",.    "law
+00010830: 222c 0a20 2020 2022 6c61 7779 6572 222c  ",.    "lawyer",
+00010840: 0a20 2020 2022 6c62 222c 0a20 2020 2022  .    "lb",.    "
+00010850: 6c63 222c 0a20 2020 2022 6c64 7322 2c0a  lc",.    "lds",.
+00010860: 2020 2020 226c 6561 7365 222c 0a20 2020      "lease",.   
+00010870: 2022 6c65 636c 6572 6322 2c0a 2020 2020   "leclerc",.    
+00010880: 226c 6566 7261 6b22 2c0a 2020 2020 226c  "lefrak",.    "l
+00010890: 6567 616c 222c 0a20 2020 2022 6c65 676f  egal",.    "lego
+000108a0: 222c 0a20 2020 2022 6c65 7875 7322 2c0a  ",.    "lexus",.
+000108b0: 2020 2020 226c 6762 7422 2c0a 2020 2020      "lgbt",.    
+000108c0: 226c 6922 2c0a 2020 2020 226c 6961 6973  "li",.    "liais
+000108d0: 6f6e 222c 0a20 2020 2022 6c69 646c 222c  on",.    "lidl",
+000108e0: 0a20 2020 2022 6c69 6665 222c 0a20 2020  .    "life",.   
+000108f0: 2022 6c69 6665 696e 7375 7261 6e63 6522   "lifeinsurance"
+00010900: 2c0a 2020 2020 226c 6966 6573 7479 6c65  ,.    "lifestyle
+00010910: 222c 0a20 2020 2022 6c69 6768 7469 6e67  ",.    "lighting
+00010920: 222c 0a20 2020 2022 6c69 6b65 222c 0a20  ",.    "like",. 
+00010930: 2020 2022 6c69 6c6c 7922 2c0a 2020 2020     "lilly",.    
+00010940: 226c 696d 6974 6564 222c 0a20 2020 2022  "limited",.    "
+00010950: 6c69 6d6f 222c 0a20 2020 2022 6c69 6e63  limo",.    "linc
+00010960: 6f6c 6e22 2c0a 2020 2020 226c 696e 6465  oln",.    "linde
+00010970: 222c 0a20 2020 2022 6c69 6e6b 222c 0a20  ",.    "link",. 
+00010980: 2020 2022 6c69 7073 7922 2c0a 2020 2020     "lipsy",.    
+00010990: 226c 6976 6522 2c0a 2020 2020 226c 6976  "live",.    "liv
+000109a0: 696e 6722 2c0a 2020 2020 226c 6978 696c  ing",.    "lixil
+000109b0: 222c 0a20 2020 2022 6c6b 222c 0a20 2020  ",.    "lk",.   
+000109c0: 2022 6c6f 616e 222c 0a20 2020 2022 6c6f   "loan",.    "lo
+000109d0: 616e 7322 2c0a 2020 2020 226c 6f63 616c  ans",.    "local
+000109e0: 686f 7374 222c 0a20 2020 2022 6c6f 636b  host",.    "lock
+000109f0: 6572 222c 0a20 2020 2022 6c6f 6375 7322  er",.    "locus"
+00010a00: 2c0a 2020 2020 226c 6f66 7422 2c0a 2020  ,.    "loft",.  
+00010a10: 2020 226c 6f6c 222c 0a20 2020 2022 6c6f    "lol",.    "lo
+00010a20: 6e64 6f6e 222c 0a20 2020 2022 6c6f 7474  ndon",.    "lott
+00010a30: 6522 2c0a 2020 2020 226c 6f74 746f 222c  e",.    "lotto",
+00010a40: 0a20 2020 2022 6c6f 7665 222c 0a20 2020  .    "love",.   
+00010a50: 2022 6c70 6c22 2c0a 2020 2020 226c 706c   "lpl",.    "lpl
+00010a60: 6669 6e61 6e63 6961 6c22 2c0a 2020 2020  financial",.    
+00010a70: 226c 7222 2c0a 2020 2020 226c 7322 2c0a  "lr",.    "ls",.
+00010a80: 2020 2020 226c 7422 2c0a 2020 2020 226c      "lt",.    "l
+00010a90: 7464 222c 0a20 2020 2022 6c74 6461 222c  td",.    "ltda",
+00010aa0: 0a20 2020 2022 6c75 222c 0a20 2020 2022  .    "lu",.    "
+00010ab0: 6c75 6e64 6265 636b 222c 0a20 2020 2022  lundbeck",.    "
+00010ac0: 6c75 7069 6e22 2c0a 2020 2020 226c 7578  lupin",.    "lux
+00010ad0: 6522 2c0a 2020 2020 226c 7578 7572 7922  e",.    "luxury"
+00010ae0: 2c0a 2020 2020 226c 7622 2c0a 2020 2020  ,.    "lv",.    
+00010af0: 226c 7922 2c0a 2020 2020 2320 6d0a 2020  "ly",.    # m.  
+00010b00: 2020 226d 6122 2c0a 2020 2020 226d 6163    "ma",.    "mac
+00010b10: 7973 222c 0a20 2020 2022 6d61 6472 6964  ys",.    "madrid
+00010b20: 222c 0a20 2020 2022 6d61 6966 222c 0a20  ",.    "maif",. 
+00010b30: 2020 2022 6d61 6973 6f6e 222c 0a20 2020     "maison",.   
+00010b40: 2022 6d61 6b65 7570 222c 0a20 2020 2022   "makeup",.    "
+00010b50: 6d61 6e22 2c0a 2020 2020 226d 616e 6167  man",.    "manag
+00010b60: 656d 656e 7422 2c0a 2020 2020 226d 616e  ement",.    "man
+00010b70: 676f 222c 0a20 2020 2022 6d61 7022 2c0a  go",.    "map",.
+00010b80: 2020 2020 226d 6172 6b65 7422 2c0a 2020      "market",.  
+00010b90: 2020 226d 6172 6b65 7469 6e67 222c 0a20    "marketing",. 
+00010ba0: 2020 2022 6d61 726b 6574 7322 2c0a 2020     "markets",.  
+00010bb0: 2020 226d 6172 7269 6f74 7422 2c0a 2020    "marriott",.  
+00010bc0: 2020 226d 6172 7368 616c 6c73 222c 0a20    "marshalls",. 
+00010bd0: 2020 2022 6d61 7365 7261 7469 222c 0a20     "maserati",. 
+00010be0: 2020 2022 6d61 7474 656c 222c 0a20 2020     "mattel",.   
+00010bf0: 2022 6d62 6122 2c0a 2020 2020 226d 6322   "mba",.    "mc"
+00010c00: 2c0a 2020 2020 226d 636b 696e 7365 7922  ,.    "mckinsey"
+00010c10: 2c0a 2020 2020 226d 6422 2c0a 2020 2020  ,.    "md",.    
+00010c20: 226d 6522 2c0a 2020 2020 226d 6564 222c  "me",.    "med",
+00010c30: 0a20 2020 2022 6d65 6469 6122 2c0a 2020  .    "media",.  
+00010c40: 2020 226d 6565 7422 2c0a 2020 2020 226d    "meet",.    "m
+00010c50: 656c 626f 7572 6e65 222c 0a20 2020 2022  elbourne",.    "
+00010c60: 6d65 6d65 222c 0a20 2020 2022 6d65 6d6f  meme",.    "memo
+00010c70: 7269 616c 222c 0a20 2020 2022 6d65 6e22  rial",.    "men"
+00010c80: 2c0a 2020 2020 226d 656e 7522 2c0a 2020  ,.    "menu",.  
+00010c90: 2020 226d 656f 222c 0a20 2020 2022 6d65    "meo",.    "me
+00010ca0: 7263 6b6d 7364 222c 0a20 2020 2022 6d65  rckmsd",.    "me
+00010cb0: 746c 6966 6522 2c0a 2020 2020 226d 6722  tlife",.    "mg"
+00010cc0: 2c0a 2020 2020 226d 6822 2c0a 2020 2020  ,.    "mh",.    
+00010cd0: 226d 6961 6d69 222c 0a20 2020 2022 6d69  "miami",.    "mi
+00010ce0: 6372 6f73 6f66 7422 2c0a 2020 2020 226d  crosoft",.    "m
+00010cf0: 696c 222c 0a20 2020 2022 6d69 6e69 222c  il",.    "mini",
+00010d00: 0a20 2020 2022 6d69 6e74 222c 0a20 2020  .    "mint",.   
+00010d10: 2022 6d69 7422 2c0a 2020 2020 226d 6974   "mit",.    "mit
+00010d20: 7375 6269 7368 6922 2c0a 2020 2020 226d  subishi",.    "m
+00010d30: 6b22 2c0a 2020 2020 226d 6c22 2c0a 2020  k",.    "ml",.  
+00010d40: 2020 226d 6c62 222c 0a20 2020 2022 6d6c    "mlb",.    "ml
+00010d50: 7322 2c0a 2020 2020 226d 6d22 2c0a 2020  s",.    "mm",.  
+00010d60: 2020 226d 6d61 222c 0a20 2020 2022 6d6e    "mma",.    "mn
+00010d70: 222c 0a20 2020 2022 6d6f 222c 0a20 2020  ",.    "mo",.   
+00010d80: 2022 6d6f 6269 222c 0a20 2020 2022 6d6f   "mobi",.    "mo
+00010d90: 6269 6c65 222c 0a20 2020 2022 6d6f 6269  bile",.    "mobi
+00010da0: 6c79 222c 0a20 2020 2022 6d6f 6461 222c  ly",.    "moda",
+00010db0: 0a20 2020 2022 6d6f 6522 2c0a 2020 2020  .    "moe",.    
+00010dc0: 226d 6f69 222c 0a20 2020 2022 6d6f 6d22  "moi",.    "mom"
+00010dd0: 2c0a 2020 2020 226d 6f6e 6173 6822 2c0a  ,.    "monash",.
+00010de0: 2020 2020 226d 6f6e 6579 222c 0a20 2020      "money",.   
+00010df0: 2022 6d6f 6e73 7465 7222 2c0a 2020 2020   "monster",.    
+00010e00: 226d 6f70 6172 222c 0a20 2020 2022 6d6f  "mopar",.    "mo
+00010e10: 726d 6f6e 222c 0a20 2020 2022 6d6f 7274  rmon",.    "mort
+00010e20: 6761 6765 222c 0a20 2020 2022 6d6f 7363  gage",.    "mosc
+00010e30: 6f77 222c 0a20 2020 2022 6d6f 746f 222c  ow",.    "moto",
+00010e40: 0a20 2020 2022 6d6f 746f 7263 7963 6c65  .    "motorcycle
+00010e50: 7322 2c0a 2020 2020 226d 6f76 222c 0a20  s",.    "mov",. 
+00010e60: 2020 2022 6d6f 7669 6522 2c0a 2020 2020     "movie",.    
+00010e70: 226d 6f76 6973 7461 7222 2c0a 2020 2020  "movistar",.    
+00010e80: 226d 7022 2c0a 2020 2020 226d 7122 2c0a  "mp",.    "mq",.
+00010e90: 2020 2020 226d 7222 2c0a 2020 2020 226d      "mr",.    "m
+00010ea0: 7322 2c0a 2020 2020 226d 7364 222c 0a20  s",.    "msd",. 
+00010eb0: 2020 2022 6d74 222c 0a20 2020 2022 6d74     "mt",.    "mt
+00010ec0: 6e22 2c0a 2020 2020 226d 7472 222c 0a20  n",.    "mtr",. 
+00010ed0: 2020 2022 6d75 222c 0a20 2020 2022 6d75     "mu",.    "mu
+00010ee0: 7365 756d 222c 0a20 2020 2022 6d75 7475  seum",.    "mutu
+00010ef0: 616c 222c 0a20 2020 2022 6d76 222c 0a20  al",.    "mv",. 
+00010f00: 2020 2022 6d77 222c 0a20 2020 2022 6d78     "mw",.    "mx
+00010f10: 222c 0a20 2020 2022 6d79 222c 0a20 2020  ",.    "my",.   
+00010f20: 2022 6d7a 222c 0a20 2020 2023 206e 0a20   "mz",.    # n. 
+00010f30: 2020 2022 6e61 222c 0a20 2020 2022 6e61     "na",.    "na
+00010f40: 6222 2c0a 2020 2020 226e 6164 6578 222c  b",.    "nadex",
+00010f50: 0a20 2020 2022 6e61 676f 7961 222c 0a20  .    "nagoya",. 
+00010f60: 2020 2022 6e61 6d65 222c 0a20 2020 2022     "name",.    "
+00010f70: 6e61 7469 6f6e 7769 6465 222c 0a20 2020  nationwide",.   
+00010f80: 2022 6e61 7475 7261 222c 0a20 2020 2022   "natura",.    "
+00010f90: 6e61 7679 222c 0a20 2020 2022 6e62 6122  navy",.    "nba"
+00010fa0: 2c0a 2020 2020 226e 6322 2c0a 2020 2020  ,.    "nc",.    
+00010fb0: 226e 6522 2c0a 2020 2020 226e 6563 222c  "ne",.    "nec",
+00010fc0: 0a20 2020 2022 6e65 7422 2c0a 2020 2020  .    "net",.    
+00010fd0: 226e 6574 6261 6e6b 222c 0a20 2020 2022  "netbank",.    "
+00010fe0: 6e65 7466 6c69 7822 2c0a 2020 2020 226e  netflix",.    "n
+00010ff0: 6574 776f 726b 222c 0a20 2020 2022 6e65  etwork",.    "ne
+00011000: 7573 7461 7222 2c0a 2020 2020 226e 6577  ustar",.    "new
+00011010: 222c 0a20 2020 2022 6e65 7768 6f6c 6c61  ",.    "newholla
+00011020: 6e64 222c 0a20 2020 2022 6e65 7773 222c  nd",.    "news",
+00011030: 0a20 2020 2022 6e65 7874 222c 0a20 2020  .    "next",.   
+00011040: 2022 6e65 7874 6469 7265 6374 222c 0a20   "nextdirect",. 
+00011050: 2020 2022 6e65 7875 7322 2c0a 2020 2020     "nexus",.    
+00011060: 226e 6622 2c0a 2020 2020 226e 666c 222c  "nf",.    "nfl",
+00011070: 0a20 2020 2022 6e67 222c 0a20 2020 2022  .    "ng",.    "
+00011080: 6e67 6f22 2c0a 2020 2020 226e 686b 222c  ngo",.    "nhk",
+00011090: 0a20 2020 2022 6e69 222c 0a20 2020 2022  .    "ni",.    "
+000110a0: 6e69 636f 222c 0a20 2020 2022 6e69 6b65  nico",.    "nike
+000110b0: 222c 0a20 2020 2022 6e69 6b6f 6e22 2c0a  ",.    "nikon",.
+000110c0: 2020 2020 226e 696e 6a61 222c 0a20 2020      "ninja",.   
+000110d0: 2022 6e69 7373 616e 222c 0a20 2020 2022   "nissan",.    "
+000110e0: 6e69 7373 6179 222c 0a20 2020 2022 6e6c  nissay",.    "nl
+000110f0: 222c 0a20 2020 2022 6e6f 222c 0a20 2020  ",.    "no",.   
+00011100: 2022 6e6f 6b69 6122 2c0a 2020 2020 226e   "nokia",.    "n
+00011110: 6f72 7468 7765 7374 6572 6e6d 7574 7561  orthwesternmutua
+00011120: 6c22 2c0a 2020 2020 226e 6f72 746f 6e22  l",.    "norton"
+00011130: 2c0a 2020 2020 226e 6f77 222c 0a20 2020  ,.    "now",.   
+00011140: 2022 6e6f 7772 757a 222c 0a20 2020 2022   "nowruz",.    "
+00011150: 6e6f 7774 7622 2c0a 2020 2020 226e 7022  nowtv",.    "np"
+00011160: 2c0a 2020 2020 226e 7222 2c0a 2020 2020  ,.    "nr",.    
+00011170: 226e 7261 222c 0a20 2020 2022 6e72 7722  "nra",.    "nrw"
+00011180: 2c0a 2020 2020 226e 7474 222c 0a20 2020  ,.    "ntt",.   
+00011190: 2022 6e75 222c 0a20 2020 2022 6e79 6322   "nu",.    "nyc"
+000111a0: 2c0a 2020 2020 226e 7a22 2c0a 2020 2020  ,.    "nz",.    
+000111b0: 2320 6f0a 2020 2020 226f 6269 222c 0a20  # o.    "obi",. 
+000111c0: 2020 2022 6f62 7365 7276 6572 222c 0a20     "observer",. 
+000111d0: 2020 2022 6f66 6622 2c0a 2020 2020 226f     "off",.    "o
+000111e0: 6666 6963 6522 2c0a 2020 2020 226f 6b69  ffice",.    "oki
+000111f0: 6e61 7761 222c 0a20 2020 2022 6f6c 6179  nawa",.    "olay
+00011200: 616e 222c 0a20 2020 2022 6f6c 6179 616e  an",.    "olayan
+00011210: 6772 6f75 7022 2c0a 2020 2020 226f 6c64  group",.    "old
+00011220: 6e61 7679 222c 0a20 2020 2022 6f6c 6c6f  navy",.    "ollo
+00011230: 222c 0a20 2020 2022 6f6d 222c 0a20 2020  ",.    "om",.   
+00011240: 2022 6f6d 6567 6122 2c0a 2020 2020 226f   "omega",.    "o
+00011250: 6e65 222c 0a20 2020 2022 6f6e 6722 2c0a  ne",.    "ong",.
+00011260: 2020 2020 226f 6e6c 222c 0a20 2020 2022      "onl",.    "
+00011270: 6f6e 6c69 6e65 222c 0a20 2020 2022 6f6e  online",.    "on
+00011280: 796f 7572 7369 6465 222c 0a20 2020 2022  yourside",.    "
+00011290: 6f6f 6f22 2c0a 2020 2020 226f 7065 6e22  ooo",.    "open"
+000112a0: 2c0a 2020 2020 226f 7261 636c 6522 2c0a  ,.    "oracle",.
+000112b0: 2020 2020 226f 7261 6e67 6522 2c0a 2020      "orange",.  
+000112c0: 2020 226f 7267 222c 0a20 2020 2022 6f72    "org",.    "or
+000112d0: 6761 6e69 6322 2c0a 2020 2020 226f 7269  ganic",.    "ori
+000112e0: 6769 6e73 222c 0a20 2020 2022 6f73 616b  gins",.    "osak
+000112f0: 6122 2c0a 2020 2020 226f 7473 756b 6122  a",.    "otsuka"
+00011300: 2c0a 2020 2020 226f 7474 222c 0a20 2020  ,.    "ott",.   
+00011310: 2022 6f76 6822 2c0a 2020 2020 2320 700a   "ovh",.    # p.
+00011320: 2020 2020 2270 6122 2c0a 2020 2020 2270      "pa",.    "p
+00011330: 6167 6522 2c0a 2020 2020 2270 616e 6173  age",.    "panas
+00011340: 6f6e 6963 222c 0a20 2020 2022 7061 6e65  onic",.    "pane
+00011350: 7261 6922 2c0a 2020 2020 2270 6172 6973  rai",.    "paris
+00011360: 222c 0a20 2020 2022 7061 7273 222c 0a20  ",.    "pars",. 
+00011370: 2020 2022 7061 7274 6e65 7273 222c 0a20     "partners",. 
+00011380: 2020 2022 7061 7274 7322 2c0a 2020 2020     "parts",.    
+00011390: 2270 6172 7479 222c 0a20 2020 2022 7061  "party",.    "pa
+000113a0: 7373 6167 656e 7322 2c0a 2020 2020 2270  ssagens",.    "p
+000113b0: 6179 222c 0a20 2020 2022 7063 6377 222c  ay",.    "pccw",
+000113c0: 0a20 2020 2022 7065 222c 0a20 2020 2022  .    "pe",.    "
+000113d0: 7065 7422 2c0a 2020 2020 2270 6622 2c0a  pet",.    "pf",.
+000113e0: 2020 2020 2270 6669 7a65 7222 2c0a 2020      "pfizer",.  
+000113f0: 2020 2270 6722 2c0a 2020 2020 2270 6822    "pg",.    "ph"
+00011400: 2c0a 2020 2020 2270 6861 726d 6163 7922  ,.    "pharmacy"
+00011410: 2c0a 2020 2020 2270 6864 222c 0a20 2020  ,.    "phd",.   
+00011420: 2022 7068 696c 6970 7322 2c0a 2020 2020   "philips",.    
+00011430: 2270 686f 6e65 222c 0a20 2020 2022 7068  "phone",.    "ph
+00011440: 6f74 6f22 2c0a 2020 2020 2270 686f 746f  oto",.    "photo
+00011450: 6772 6170 6879 222c 0a20 2020 2022 7068  graphy",.    "ph
+00011460: 6f74 6f73 222c 0a20 2020 2022 7068 7973  otos",.    "phys
+00011470: 696f 222c 0a20 2020 2022 7069 6167 6574  io",.    "piaget
+00011480: 222c 0a20 2020 2022 7069 6373 222c 0a20  ",.    "pics",. 
+00011490: 2020 2022 7069 6374 6574 222c 0a20 2020     "pictet",.   
+000114a0: 2022 7069 6374 7572 6573 222c 0a20 2020   "pictures",.   
+000114b0: 2022 7069 6422 2c0a 2020 2020 2270 696e   "pid",.    "pin
+000114c0: 222c 0a20 2020 2022 7069 6e67 222c 0a20  ",.    "ping",. 
+000114d0: 2020 2022 7069 6e6b 222c 0a20 2020 2022     "pink",.    "
+000114e0: 7069 6f6e 6565 7222 2c0a 2020 2020 2270  pioneer",.    "p
+000114f0: 697a 7a61 222c 0a20 2020 2022 706b 222c  izza",.    "pk",
+00011500: 0a20 2020 2022 706c 222c 0a20 2020 2022  .    "pl",.    "
+00011510: 706c 6163 6522 2c0a 2020 2020 2270 6c61  place",.    "pla
+00011520: 7922 2c0a 2020 2020 2270 6c61 7973 7461  y",.    "playsta
+00011530: 7469 6f6e 222c 0a20 2020 2022 706c 756d  tion",.    "plum
+00011540: 6269 6e67 222c 0a20 2020 2022 706c 7573  bing",.    "plus
+00011550: 222c 0a20 2020 2022 706d 222c 0a20 2020  ",.    "pm",.   
+00011560: 2022 706e 222c 0a20 2020 2022 706e 6322   "pn",.    "pnc"
+00011570: 2c0a 2020 2020 2270 6f68 6c22 2c0a 2020  ,.    "pohl",.  
+00011580: 2020 2270 6f6b 6572 222c 0a20 2020 2022    "poker",.    "
+00011590: 706f 6c69 7469 6522 2c0a 2020 2020 2270  politie",.    "p
+000115a0: 6f72 6e22 2c0a 2020 2020 2270 6f73 7422  orn",.    "post"
+000115b0: 2c0a 2020 2020 2270 7222 2c0a 2020 2020  ,.    "pr",.    
+000115c0: 2270 7261 6d65 7269 6361 222c 0a20 2020  "pramerica",.   
+000115d0: 2022 7072 6178 6922 2c0a 2020 2020 2270   "praxi",.    "p
+000115e0: 7265 7373 222c 0a20 2020 2022 7072 696d  ress",.    "prim
+000115f0: 6522 2c0a 2020 2020 2270 726f 222c 0a20  e",.    "pro",. 
+00011600: 2020 2022 7072 6f64 222c 0a20 2020 2022     "prod",.    "
+00011610: 7072 6f64 7563 7469 6f6e 7322 2c0a 2020  productions",.  
+00011620: 2020 2270 726f 6622 2c0a 2020 2020 2270    "prof",.    "p
+00011630: 726f 6772 6573 7369 7665 222c 0a20 2020  rogressive",.   
+00011640: 2022 7072 6f6d 6f22 2c0a 2020 2020 2270   "promo",.    "p
+00011650: 726f 7065 7274 6965 7322 2c0a 2020 2020  roperties",.    
+00011660: 2270 726f 7065 7274 7922 2c0a 2020 2020  "property",.    
+00011670: 2270 726f 7465 6374 696f 6e22 2c0a 2020  "protection",.  
+00011680: 2020 2270 7275 222c 0a20 2020 2022 7072    "pru",.    "pr
+00011690: 7564 656e 7469 616c 222c 0a20 2020 2022  udential",.    "
+000116a0: 7073 222c 0a20 2020 2022 7074 222c 0a20  ps",.    "pt",. 
+000116b0: 2020 2022 7075 6222 2c0a 2020 2020 2270     "pub",.    "p
+000116c0: 7722 2c0a 2020 2020 2270 7763 222c 0a20  w",.    "pwc",. 
+000116d0: 2020 2022 7079 222c 0a20 2020 2023 2071     "py",.    # q
+000116e0: 0a20 2020 2022 7161 222c 0a20 2020 2022  .    "qa",.    "
+000116f0: 7170 6f6e 222c 0a20 2020 2022 7175 6562  qpon",.    "queb
+00011700: 6563 222c 0a20 2020 2022 7175 6573 7422  ec",.    "quest"
+00011710: 2c0a 2020 2020 2271 7663 222c 0a20 2020  ,.    "qvc",.   
+00011720: 2023 2072 0a20 2020 2022 7261 6369 6e67   # r.    "racing
+00011730: 222c 0a20 2020 2022 7261 6469 6f22 2c0a  ",.    "radio",.
+00011740: 2020 2020 2272 6169 6422 2c0a 2020 2020      "raid",.    
+00011750: 2272 6522 2c0a 2020 2020 2272 6561 6422  "re",.    "read"
+00011760: 2c0a 2020 2020 2272 6561 6c65 7374 6174  ,.    "realestat
+00011770: 6522 2c0a 2020 2020 2272 6561 6c74 6f72  e",.    "realtor
+00011780: 222c 0a20 2020 2022 7265 616c 7479 222c  ",.    "realty",
+00011790: 0a20 2020 2022 7265 6369 7065 7322 2c0a  .    "recipes",.
+000117a0: 2020 2020 2272 6564 222c 0a20 2020 2022      "red",.    "
+000117b0: 7265 6473 746f 6e65 222c 0a20 2020 2022  redstone",.    "
+000117c0: 7265 6475 6d62 7265 6c6c 6122 2c0a 2020  redumbrella",.  
+000117d0: 2020 2272 6568 6162 222c 0a20 2020 2022    "rehab",.    "
+000117e0: 7265 6973 6522 2c0a 2020 2020 2272 6569  reise",.    "rei
+000117f0: 7365 6e22 2c0a 2020 2020 2272 6569 7422  sen",.    "reit"
+00011800: 2c0a 2020 2020 2272 656c 6961 6e63 6522  ,.    "reliance"
+00011810: 2c0a 2020 2020 2272 656e 222c 0a20 2020  ,.    "ren",.   
+00011820: 2022 7265 6e74 222c 0a20 2020 2022 7265   "rent",.    "re
+00011830: 6e74 616c 7322 2c0a 2020 2020 2272 6570  ntals",.    "rep
+00011840: 6169 7222 2c0a 2020 2020 2272 6570 6f72  air",.    "repor
+00011850: 7422 2c0a 2020 2020 2272 6570 7562 6c69  t",.    "republi
+00011860: 6361 6e22 2c0a 2020 2020 2272 6573 7422  can",.    "rest"
+00011870: 2c0a 2020 2020 2272 6573 7461 7572 616e  ,.    "restauran
+00011880: 7422 2c0a 2020 2020 2272 6576 6965 7722  t",.    "review"
+00011890: 2c0a 2020 2020 2272 6576 6965 7773 222c  ,.    "reviews",
+000118a0: 0a20 2020 2022 7265 7872 6f74 6822 2c0a  .    "rexroth",.
+000118b0: 2020 2020 2272 6963 6822 2c0a 2020 2020      "rich",.    
+000118c0: 2272 6963 6861 7264 6c69 222c 0a20 2020  "richardli",.   
+000118d0: 2022 7269 636f 6822 2c0a 2020 2020 2272   "ricoh",.    "r
+000118e0: 6967 6874 6174 686f 6d65 222c 0a20 2020  ightathome",.   
+000118f0: 2022 7269 6c22 2c0a 2020 2020 2272 696f   "ril",.    "rio
+00011900: 222c 0a20 2020 2022 7269 7022 2c0a 2020  ",.    "rip",.  
+00011910: 2020 2272 6d69 7422 2c0a 2020 2020 2272    "rmit",.    "r
+00011920: 6f22 2c0a 2020 2020 2272 6f63 6865 7222  o",.    "rocher"
+00011930: 2c0a 2020 2020 2272 6f63 6b73 222c 0a20  ,.    "rocks",. 
+00011940: 2020 2022 726f 6465 6f22 2c0a 2020 2020     "rodeo",.    
+00011950: 2272 6f67 6572 7322 2c0a 2020 2020 2272  "rogers",.    "r
+00011960: 6f6f 6d22 2c0a 2020 2020 2272 7322 2c0a  oom",.    "rs",.
+00011970: 2020 2020 2272 7376 7022 2c0a 2020 2020      "rsvp",.    
+00011980: 2272 7522 2c0a 2020 2020 2272 7567 6279  "ru",.    "rugby
+00011990: 222c 0a20 2020 2022 7275 6872 222c 0a20  ",.    "ruhr",. 
+000119a0: 2020 2022 7275 6e22 2c0a 2020 2020 2272     "run",.    "r
+000119b0: 7722 2c0a 2020 2020 2272 7765 222c 0a20  w",.    "rwe",. 
+000119c0: 2020 2022 7279 756b 7975 222c 0a20 2020     "ryukyu",.   
+000119d0: 2023 2073 0a20 2020 2022 7361 222c 0a20   # s.    "sa",. 
+000119e0: 2020 2022 7361 6172 6c61 6e64 222c 0a20     "saarland",. 
+000119f0: 2020 2022 7361 6665 222c 0a20 2020 2022     "safe",.    "
+00011a00: 7361 6665 7479 222c 0a20 2020 2022 7361  safety",.    "sa
+00011a10: 6b75 7261 222c 0a20 2020 2022 7361 6c65  kura",.    "sale
+00011a20: 222c 0a20 2020 2022 7361 6c6f 6e22 2c0a  ",.    "salon",.
+00011a30: 2020 2020 2273 616d 7363 6c75 6222 2c0a      "samsclub",.
+00011a40: 2020 2020 2273 616d 7375 6e67 222c 0a20      "samsung",. 
+00011a50: 2020 2022 7361 6e64 7669 6b22 2c0a 2020     "sandvik",.  
+00011a60: 2020 2273 616e 6476 696b 636f 726f 6d61    "sandvikcoroma
+00011a70: 6e74 222c 0a20 2020 2022 7361 6e6f 6669  nt",.    "sanofi
+00011a80: 222c 0a20 2020 2022 7361 7022 2c0a 2020  ",.    "sap",.  
+00011a90: 2020 2273 6170 6f22 2c0a 2020 2020 2273    "sapo",.    "s
+00011aa0: 6172 6c22 2c0a 2020 2020 2273 6173 222c  arl",.    "sas",
+00011ab0: 0a20 2020 2022 7361 7665 222c 0a20 2020  .    "save",.   
+00011ac0: 2022 7361 786f 222c 0a20 2020 2022 7362   "saxo",.    "sb
+00011ad0: 222c 0a20 2020 2022 7362 6922 2c0a 2020  ",.    "sbi",.  
+00011ae0: 2020 2273 6273 222c 0a20 2020 2022 7363    "sbs",.    "sc
+00011af0: 222c 0a20 2020 2022 7363 6122 2c0a 2020  ",.    "sca",.  
+00011b00: 2020 2273 6362 222c 0a20 2020 2022 7363    "scb",.    "sc
+00011b10: 6861 6566 666c 6572 222c 0a20 2020 2022  haeffler",.    "
+00011b20: 7363 686d 6964 7422 2c0a 2020 2020 2273  schmidt",.    "s
+00011b30: 6368 6f6c 6172 7368 6970 7322 2c0a 2020  cholarships",.  
+00011b40: 2020 2273 6368 6f6f 6c22 2c0a 2020 2020    "school",.    
+00011b50: 2273 6368 756c 6522 2c0a 2020 2020 2273  "schule",.    "s
+00011b60: 6368 7761 727a 222c 0a20 2020 2022 7363  chwarz",.    "sc
+00011b70: 6965 6e63 6522 2c0a 2020 2020 2273 636a  ience",.    "scj
+00011b80: 6f68 6e73 6f6e 222c 0a20 2020 2022 7363  ohnson",.    "sc
+00011b90: 6f72 222c 0a20 2020 2022 7363 6f74 222c  or",.    "scot",
+00011ba0: 0a20 2020 2022 7364 222c 0a20 2020 2022  .    "sd",.    "
+00011bb0: 7365 222c 0a20 2020 2022 7365 6172 6368  se",.    "search
+00011bc0: 222c 0a20 2020 2022 7365 6174 222c 0a20  ",.    "seat",. 
+00011bd0: 2020 2022 7365 6375 7265 222c 0a20 2020     "secure",.   
+00011be0: 2022 7365 6375 7269 7479 222c 0a20 2020   "security",.   
+00011bf0: 2022 7365 656b 222c 0a20 2020 2022 7365   "seek",.    "se
+00011c00: 6c65 6374 222c 0a20 2020 2022 7365 6e65  lect",.    "sene
+00011c10: 7222 2c0a 2020 2020 2273 6572 7669 6365  r",.    "service
+00011c20: 7322 2c0a 2020 2020 2273 6573 222c 0a20  s",.    "ses",. 
+00011c30: 2020 2022 7365 7665 6e22 2c0a 2020 2020     "seven",.    
+00011c40: 2273 6577 222c 0a20 2020 2022 7365 7822  "sew",.    "sex"
+00011c50: 2c0a 2020 2020 2273 6578 7922 2c0a 2020  ,.    "sexy",.  
+00011c60: 2020 2273 6672 222c 0a20 2020 2022 7367    "sfr",.    "sg
+00011c70: 222c 0a20 2020 2022 7368 222c 0a20 2020  ",.    "sh",.   
+00011c80: 2022 7368 616e 6772 696c 6122 2c0a 2020   "shangrila",.  
+00011c90: 2020 2273 6861 7270 222c 0a20 2020 2022    "sharp",.    "
+00011ca0: 7368 6177 222c 0a20 2020 2022 7368 656c  shaw",.    "shel
+00011cb0: 6c22 2c0a 2020 2020 2273 6869 6122 2c0a  l",.    "shia",.
+00011cc0: 2020 2020 2273 6869 6b73 6861 222c 0a20      "shiksha",. 
+00011cd0: 2020 2022 7368 6f65 7322 2c0a 2020 2020     "shoes",.    
+00011ce0: 2273 686f 7022 2c0a 2020 2020 2273 686f  "shop",.    "sho
+00011cf0: 7070 696e 6722 2c0a 2020 2020 2273 686f  pping",.    "sho
+00011d00: 756a 6922 2c0a 2020 2020 2273 686f 7722  uji",.    "show"
+00011d10: 2c0a 2020 2020 2273 686f 7774 696d 6522  ,.    "showtime"
+00011d20: 2c0a 2020 2020 2273 6872 6972 616d 222c  ,.    "shriram",
+00011d30: 0a20 2020 2022 7369 222c 0a20 2020 2022  .    "si",.    "
+00011d40: 7369 6c6b 222c 0a20 2020 2022 7369 6e61  silk",.    "sina
+00011d50: 222c 0a20 2020 2022 7369 6e67 6c65 7322  ",.    "singles"
+00011d60: 2c0a 2020 2020 2273 6974 6522 2c0a 2020  ,.    "site",.  
+00011d70: 2020 2273 6a22 2c0a 2020 2020 2273 6b22    "sj",.    "sk"
+00011d80: 2c0a 2020 2020 2273 6b69 222c 0a20 2020  ,.    "ski",.   
+00011d90: 2022 736b 696e 222c 0a20 2020 2022 736b   "skin",.    "sk
+00011da0: 7922 2c0a 2020 2020 2273 6b79 7065 222c  y",.    "skype",
+00011db0: 0a20 2020 2022 736c 222c 0a20 2020 2022  .    "sl",.    "
+00011dc0: 736c 696e 6722 2c0a 2020 2020 2273 6d22  sling",.    "sm"
+00011dd0: 2c0a 2020 2020 2273 6d61 7274 222c 0a20  ,.    "smart",. 
+00011de0: 2020 2022 736d 696c 6522 2c0a 2020 2020     "smile",.    
+00011df0: 2273 6e22 2c0a 2020 2020 2273 6e63 6622  "sn",.    "sncf"
+00011e00: 2c0a 2020 2020 2273 6f22 2c0a 2020 2020  ,.    "so",.    
+00011e10: 2273 6f63 6365 7222 2c0a 2020 2020 2273  "soccer",.    "s
+00011e20: 6f63 6961 6c22 2c0a 2020 2020 2273 6f66  ocial",.    "sof
+00011e30: 7462 616e 6b22 2c0a 2020 2020 2273 6f66  tbank",.    "sof
+00011e40: 7477 6172 6522 2c0a 2020 2020 2273 6f68  tware",.    "soh
+00011e50: 7522 2c0a 2020 2020 2273 6f6c 6172 222c  u",.    "solar",
+00011e60: 0a20 2020 2022 736f 6c75 7469 6f6e 7322  .    "solutions"
+00011e70: 2c0a 2020 2020 2273 6f6e 6722 2c0a 2020  ,.    "song",.  
+00011e80: 2020 2273 6f6e 7922 2c0a 2020 2020 2273    "sony",.    "s
+00011e90: 6f79 222c 0a20 2020 2022 7370 6163 6522  oy",.    "space"
+00011ea0: 2c0a 2020 2020 2273 7069 6567 656c 222c  ,.    "spiegel",
+00011eb0: 0a20 2020 2022 7370 6f74 222c 0a20 2020  .    "spot",.   
+00011ec0: 2022 7370 7265 6164 6265 7474 696e 6722   "spreadbetting"
+00011ed0: 2c0a 2020 2020 2273 7222 2c0a 2020 2020  ,.    "sr",.    
+00011ee0: 2273 726c 222c 0a20 2020 2022 7372 7422  "srl",.    "srt"
+00011ef0: 2c0a 2020 2020 2273 7422 2c0a 2020 2020  ,.    "st",.    
+00011f00: 2273 7461 6461 222c 0a20 2020 2022 7374  "stada",.    "st
+00011f10: 6170 6c65 7322 2c0a 2020 2020 2273 7461  aples",.    "sta
+00011f20: 7222 2c0a 2020 2020 2273 7461 7268 7562  r",.    "starhub
+00011f30: 222c 0a20 2020 2022 7374 6174 6562 616e  ",.    "stateban
+00011f40: 6b22 2c0a 2020 2020 2273 7461 7465 6661  k",.    "statefa
+00011f50: 726d 222c 0a20 2020 2022 7374 6174 6f69  rm",.    "statoi
+00011f60: 6c22 2c0a 2020 2020 2273 7463 222c 0a20  l",.    "stc",. 
+00011f70: 2020 2022 7374 6367 726f 7570 222c 0a20     "stcgroup",. 
+00011f80: 2020 2022 7374 6f63 6b68 6f6c 6d22 2c0a     "stockholm",.
+00011f90: 2020 2020 2273 746f 7261 6765 222c 0a20      "storage",. 
+00011fa0: 2020 2022 7374 6f72 6522 2c0a 2020 2020     "store",.    
+00011fb0: 2273 7472 6561 6d22 2c0a 2020 2020 2273  "stream",.    "s
+00011fc0: 7475 6469 6f22 2c0a 2020 2020 2273 7475  tudio",.    "stu
+00011fd0: 6479 222c 0a20 2020 2022 7374 796c 6522  dy",.    "style"
+00011fe0: 2c0a 2020 2020 2273 7522 2c0a 2020 2020  ,.    "su",.    
+00011ff0: 2273 7563 6b73 222c 0a20 2020 2022 7375  "sucks",.    "su
+00012000: 7070 6c69 6573 222c 0a20 2020 2022 7375  pplies",.    "su
+00012010: 7070 6c79 222c 0a20 2020 2022 7375 7070  pply",.    "supp
+00012020: 6f72 7422 2c0a 2020 2020 2273 7572 6622  ort",.    "surf"
+00012030: 2c0a 2020 2020 2273 7572 6765 7279 222c  ,.    "surgery",
+00012040: 0a20 2020 2022 7375 7a75 6b69 222c 0a20  .    "suzuki",. 
+00012050: 2020 2022 7376 222c 0a20 2020 2022 7377     "sv",.    "sw
+00012060: 6174 6368 222c 0a20 2020 2022 7377 6966  atch",.    "swif
+00012070: 7463 6f76 6572 222c 0a20 2020 2022 7377  tcover",.    "sw
+00012080: 6973 7322 2c0a 2020 2020 2273 7822 2c0a  iss",.    "sx",.
+00012090: 2020 2020 2273 7922 2c0a 2020 2020 2273      "sy",.    "s
+000120a0: 7964 6e65 7922 2c0a 2020 2020 2273 796d  ydney",.    "sym
+000120b0: 616e 7465 6322 2c0a 2020 2020 2273 7973  antec",.    "sys
+000120c0: 7465 6d73 222c 0a20 2020 2022 737a 222c  tems",.    "sz",
+000120d0: 0a20 2020 2023 2074 0a20 2020 2022 7461  .    # t.    "ta
+000120e0: 6222 2c0a 2020 2020 2274 6169 7065 6922  b",.    "taipei"
+000120f0: 2c0a 2020 2020 2274 616c 6b22 2c0a 2020  ,.    "talk",.  
+00012100: 2020 2274 616f 6261 6f22 2c0a 2020 2020    "taobao",.    
+00012110: 2274 6172 6765 7422 2c0a 2020 2020 2274  "target",.    "t
+00012120: 6174 616d 6f74 6f72 7322 2c0a 2020 2020  atamotors",.    
+00012130: 2274 6174 6172 222c 0a20 2020 2022 7461  "tatar",.    "ta
+00012140: 7474 6f6f 222c 0a20 2020 2022 7461 7822  ttoo",.    "tax"
+00012150: 2c0a 2020 2020 2274 6178 6922 2c0a 2020  ,.    "taxi",.  
+00012160: 2020 2274 6322 2c0a 2020 2020 2274 6369    "tc",.    "tci
+00012170: 222c 0a20 2020 2022 7464 222c 0a20 2020  ",.    "td",.   
+00012180: 2022 7464 6b22 2c0a 2020 2020 2274 6561   "tdk",.    "tea
+00012190: 6d22 2c0a 2020 2020 2274 6563 6822 2c0a  m",.    "tech",.
+000121a0: 2020 2020 2274 6563 686e 6f6c 6f67 7922      "technology"
+000121b0: 2c0a 2020 2020 2274 656c 222c 0a20 2020  ,.    "tel",.   
+000121c0: 2022 7465 6c65 6369 7479 222c 0a20 2020   "telecity",.   
+000121d0: 2022 7465 6c65 666f 6e69 6361 222c 0a20   "telefonica",. 
+000121e0: 2020 2022 7465 6d61 7365 6b22 2c0a 2020     "temasek",.  
+000121f0: 2020 2274 656e 6e69 7322 2c0a 2020 2020    "tennis",.    
+00012200: 2274 6576 6122 2c0a 2020 2020 2274 6622  "teva",.    "tf"
+00012210: 2c0a 2020 2020 2274 6722 2c0a 2020 2020  ,.    "tg",.    
+00012220: 2274 6822 2c0a 2020 2020 2274 6864 222c  "th",.    "thd",
+00012230: 0a20 2020 2022 7468 6561 7465 7222 2c0a  .    "theater",.
+00012240: 2020 2020 2274 6865 6174 7265 222c 0a20      "theatre",. 
+00012250: 2020 2022 7469 6161 222c 0a20 2020 2022     "tiaa",.    "
+00012260: 7469 636b 6574 7322 2c0a 2020 2020 2274  tickets",.    "t
+00012270: 6965 6e64 6122 2c0a 2020 2020 2274 6966  ienda",.    "tif
+00012280: 6661 6e79 222c 0a20 2020 2022 7469 7073  fany",.    "tips
+00012290: 222c 0a20 2020 2022 7469 7265 7322 2c0a  ",.    "tires",.
+000122a0: 2020 2020 2274 6972 6f6c 222c 0a20 2020      "tirol",.   
+000122b0: 2022 746a 222c 0a20 2020 2022 746a 6d61   "tj",.    "tjma
+000122c0: 7878 222c 0a20 2020 2022 746a 7822 2c0a  xx",.    "tjx",.
+000122d0: 2020 2020 2274 6b22 2c0a 2020 2020 2274      "tk",.    "t
+000122e0: 6b6d 6178 7822 2c0a 2020 2020 2274 6c22  kmaxx",.    "tl"
+000122f0: 2c0a 2020 2020 2274 6d22 2c0a 2020 2020  ,.    "tm",.    
+00012300: 2274 6d61 6c6c 222c 0a20 2020 2022 746e  "tmall",.    "tn
+00012310: 222c 0a20 2020 2022 746f 222c 0a20 2020  ",.    "to",.   
+00012320: 2022 746f 6461 7922 2c0a 2020 2020 2274   "today",.    "t
+00012330: 6f6b 796f 222c 0a20 2020 2022 746f 6f6c  okyo",.    "tool
+00012340: 7322 2c0a 2020 2020 2274 6f70 222c 0a20  s",.    "top",. 
+00012350: 2020 2022 746f 7261 7922 2c0a 2020 2020     "toray",.    
+00012360: 2274 6f73 6869 6261 222c 0a20 2020 2022  "toshiba",.    "
+00012370: 746f 7461 6c22 2c0a 2020 2020 2274 6f75  total",.    "tou
+00012380: 7273 222c 0a20 2020 2022 746f 776e 222c  rs",.    "town",
+00012390: 0a20 2020 2022 746f 796f 7461 222c 0a20  .    "toyota",. 
+000123a0: 2020 2022 746f 7973 222c 0a20 2020 2022     "toys",.    "
+000123b0: 7472 222c 0a20 2020 2022 7472 6164 6522  tr",.    "trade"
+000123c0: 2c0a 2020 2020 2274 7261 6469 6e67 222c  ,.    "trading",
+000123d0: 0a20 2020 2022 7472 6169 6e69 6e67 222c  .    "training",
+000123e0: 0a20 2020 2022 7472 6176 656c 222c 0a20  .    "travel",. 
+000123f0: 2020 2022 7472 6176 656c 6368 616e 6e65     "travelchanne
+00012400: 6c22 2c0a 2020 2020 2274 7261 7665 6c65  l",.    "travele
+00012410: 7273 222c 0a20 2020 2022 7472 6176 656c  rs",.    "travel
+00012420: 6572 7369 6e73 7572 616e 6365 222c 0a20  ersinsurance",. 
+00012430: 2020 2022 7472 7573 7422 2c0a 2020 2020     "trust",.    
+00012440: 2274 7276 222c 0a20 2020 2022 7474 222c  "trv",.    "tt",
+00012450: 0a20 2020 2022 7475 6265 222c 0a20 2020  .    "tube",.   
+00012460: 2022 7475 6922 2c0a 2020 2020 2274 756e   "tui",.    "tun
+00012470: 6573 222c 0a20 2020 2022 7475 7368 7522  es",.    "tushu"
+00012480: 2c0a 2020 2020 2274 7622 2c0a 2020 2020  ,.    "tv",.    
+00012490: 2274 7673 222c 0a20 2020 2022 7477 222c  "tvs",.    "tw",
+000124a0: 0a20 2020 2022 747a 222c 0a20 2020 2023  .    "tz",.    #
+000124b0: 2075 0a20 2020 2022 7561 222c 0a20 2020   u.    "ua",.   
+000124c0: 2022 7562 616e 6b22 2c0a 2020 2020 2275   "ubank",.    "u
+000124d0: 6273 222c 0a20 2020 2022 7563 6f6e 6e65  bs",.    "uconne
+000124e0: 6374 222c 0a20 2020 2022 7567 222c 0a20  ct",.    "ug",. 
+000124f0: 2020 2022 756b 222c 0a20 2020 2022 756e     "uk",.    "un
+00012500: 6963 6f6d 222c 0a20 2020 2022 756e 6976  icom",.    "univ
+00012510: 6572 7369 7479 222c 0a20 2020 2022 756e  ersity",.    "un
+00012520: 6f22 2c0a 2020 2020 2275 6f6c 222c 0a20  o",.    "uol",. 
+00012530: 2020 2022 7570 7322 2c0a 2020 2020 2275     "ups",.    "u
+00012540: 7322 2c0a 2020 2020 2275 7922 2c0a 2020  s",.    "uy",.  
+00012550: 2020 2275 7a22 2c0a 2020 2020 2320 760a    "uz",.    # v.
+00012560: 2020 2020 2276 6122 2c0a 2020 2020 2276      "va",.    "v
+00012570: 6163 6174 696f 6e73 222c 0a20 2020 2022  acations",.    "
+00012580: 7661 6e61 222c 0a20 2020 2022 7661 6e67  vana",.    "vang
+00012590: 7561 7264 222c 0a20 2020 2022 7663 222c  uard",.    "vc",
+000125a0: 0a20 2020 2022 7665 222c 0a20 2020 2022  .    "ve",.    "
+000125b0: 7665 6761 7322 2c0a 2020 2020 2276 656e  vegas",.    "ven
+000125c0: 7475 7265 7322 2c0a 2020 2020 2276 6572  tures",.    "ver
+000125d0: 6973 6967 6e22 2c0a 2020 2020 2276 6572  isign",.    "ver
+000125e0: 7369 6368 6572 756e 6722 2c0a 2020 2020  sicherung",.    
+000125f0: 2276 6574 222c 0a20 2020 2022 7667 222c  "vet",.    "vg",
+00012600: 0a20 2020 2022 7669 222c 0a20 2020 2022  .    "vi",.    "
+00012610: 7669 616a 6573 222c 0a20 2020 2022 7669  viajes",.    "vi
+00012620: 6465 6f22 2c0a 2020 2020 2276 6967 222c  deo",.    "vig",
+00012630: 0a20 2020 2022 7669 6b69 6e67 222c 0a20  .    "viking",. 
+00012640: 2020 2022 7669 6c6c 6173 222c 0a20 2020     "villas",.   
+00012650: 2022 7669 6e22 2c0a 2020 2020 2276 6970   "vin",.    "vip
+00012660: 222c 0a20 2020 2022 7669 7267 696e 222c  ",.    "virgin",
+00012670: 0a20 2020 2022 7669 7361 222c 0a20 2020  .    "visa",.   
+00012680: 2022 7669 7369 6f6e 222c 0a20 2020 2022   "vision",.    "
+00012690: 7669 7374 6122 2c0a 2020 2020 2276 6973  vista",.    "vis
+000126a0: 7461 7072 696e 7422 2c0a 2020 2020 2276  taprint",.    "v
+000126b0: 6976 6122 2c0a 2020 2020 2276 6976 6f22  iva",.    "vivo"
+000126c0: 2c0a 2020 2020 2276 6c61 616e 6465 7265  ,.    "vlaandere
+000126d0: 6e22 2c0a 2020 2020 2276 6e22 2c0a 2020  n",.    "vn",.  
+000126e0: 2020 2276 6f64 6b61 222c 0a20 2020 2022    "vodka",.    "
+000126f0: 766f 6c6b 7377 6167 656e 222c 0a20 2020  volkswagen",.   
+00012700: 2022 766f 6c76 6f22 2c0a 2020 2020 2276   "volvo",.    "v
+00012710: 6f74 6522 2c0a 2020 2020 2276 6f74 696e  ote",.    "votin
+00012720: 6722 2c0a 2020 2020 2276 6f74 6f22 2c0a  g",.    "voto",.
+00012730: 2020 2020 2276 6f79 6167 6522 2c0a 2020      "voyage",.  
+00012740: 2020 2276 7522 2c0a 2020 2020 2276 7565    "vu",.    "vue
+00012750: 6c6f 7322 2c0a 2020 2020 2320 770a 2020  los",.    # w.  
+00012760: 2020 2277 616c 6573 222c 0a20 2020 2022    "wales",.    "
+00012770: 7761 6c6d 6172 7422 2c0a 2020 2020 2277  walmart",.    "w
+00012780: 616c 7465 7222 2c0a 2020 2020 2277 616e  alter",.    "wan
+00012790: 6722 2c0a 2020 2020 2277 616e 6767 6f75  g",.    "wanggou
+000127a0: 222c 0a20 2020 2022 7761 726d 616e 222c  ",.    "warman",
+000127b0: 0a20 2020 2022 7761 7463 6822 2c0a 2020  .    "watch",.  
+000127c0: 2020 2277 6174 6368 6573 222c 0a20 2020    "watches",.   
+000127d0: 2022 7765 6174 6865 7222 2c0a 2020 2020   "weather",.    
+000127e0: 2277 6561 7468 6572 6368 616e 6e65 6c22  "weatherchannel"
+000127f0: 2c0a 2020 2020 2277 6562 6361 6d22 2c0a  ,.    "webcam",.
+00012800: 2020 2020 2277 6562 6572 222c 0a20 2020      "weber",.   
+00012810: 2022 7765 6273 6974 6522 2c0a 2020 2020   "website",.    
+00012820: 2277 6564 222c 0a20 2020 2022 7765 6464  "wed",.    "wedd
+00012830: 696e 6722 2c0a 2020 2020 2277 6569 626f  ing",.    "weibo
+00012840: 222c 0a20 2020 2022 7765 6972 222c 0a20  ",.    "weir",. 
+00012850: 2020 2022 7766 222c 0a20 2020 2022 7768     "wf",.    "wh
+00012860: 6f73 7768 6f22 2c0a 2020 2020 2277 6965  oswho",.    "wie
+00012870: 6e22 2c0a 2020 2020 2277 696b 6922 2c0a  n",.    "wiki",.
+00012880: 2020 2020 2277 696c 6c69 616d 6869 6c6c      "williamhill
+00012890: 222c 0a20 2020 2022 7769 6e22 2c0a 2020  ",.    "win",.  
+000128a0: 2020 2277 696e 646f 7773 222c 0a20 2020    "windows",.   
+000128b0: 2022 7769 6e65 222c 0a20 2020 2022 7769   "wine",.    "wi
+000128c0: 6e6e 6572 7322 2c0a 2020 2020 2277 6d65  nners",.    "wme
+000128d0: 222c 0a20 2020 2022 776f 6c74 6572 736b  ",.    "woltersk
+000128e0: 6c75 7765 7222 2c0a 2020 2020 2277 6f6f  luwer",.    "woo
+000128f0: 6473 6964 6522 2c0a 2020 2020 2277 6f72  dside",.    "wor
+00012900: 6b22 2c0a 2020 2020 2277 6f72 6b73 222c  k",.    "works",
+00012910: 0a20 2020 2022 776f 726c 6422 2c0a 2020  .    "world",.  
+00012920: 2020 2277 6f77 222c 0a20 2020 2022 7773    "wow",.    "ws
+00012930: 222c 0a20 2020 2022 7774 6322 2c0a 2020  ",.    "wtc",.  
+00012940: 2020 2277 7466 222c 0a20 2020 2023 2078    "wtf",.    # x
+00012950: 0a20 2020 2022 7862 6f78 222c 0a20 2020  .    "xbox",.   
+00012960: 2022 7865 726f 7822 2c0a 2020 2020 2278   "xerox",.    "x
+00012970: 6669 6e69 7479 222c 0a20 2020 2022 7869  finity",.    "xi
+00012980: 6875 616e 222c 0a20 2020 2022 7869 6e22  huan",.    "xin"
+00012990: 2c0a 2020 2020 2278 6e2d 2d31 3162 3463  ,.    "xn--11b4c
+000129a0: 3364 222c 0a20 2020 2022 786e 2d2d 3163  3d",.    "xn--1c
+000129b0: 6b32 6531 6222 2c0a 2020 2020 2278 6e2d  k2e1b",.    "xn-
+000129c0: 2d31 7171 7732 3361 222c 0a20 2020 2022  -1qqw23a",.    "
+000129d0: 786e 2d2d 3273 6372 6a39 6322 2c0a 2020  xn--2scrj9c",.  
+000129e0: 2020 2278 6e2d 2d33 3072 7237 7922 2c0a    "xn--30rr7y",.
+000129f0: 2020 2020 2278 6e2d 2d33 6273 7430 306d      "xn--3bst00m
+00012a00: 222c 0a20 2020 2022 786e 2d2d 3364 7334  ",.    "xn--3ds4
+00012a10: 3433 6722 2c0a 2020 2020 2278 6e2d 2d33  43g",.    "xn--3
+00012a20: 6530 6237 3037 6522 2c0a 2020 2020 2278  e0b707e",.    "x
+00012a30: 6e2d 2d33 6863 726a 3963 222c 0a20 2020  n--3hcrj9c",.   
+00012a40: 2022 786e 2d2d 336f 7131 3876 6c38 706e   "xn--3oq18vl8pn
+00012a50: 3336 6122 2c0a 2020 2020 2278 6e2d 2d33  36a",.    "xn--3
+00012a60: 7078 7538 6b22 2c0a 2020 2020 2278 6e2d  pxu8k",.    "xn-
+00012a70: 2d34 3263 3264 3961 222c 0a20 2020 2022  -42c2d9a",.    "
+00012a80: 786e 2d2d 3435 6272 3563 796c 222c 0a20  xn--45br5cyl",. 
+00012a90: 2020 2022 786e 2d2d 3435 6272 6a39 6322     "xn--45brj9c"
+00012aa0: 2c0a 2020 2020 2278 6e2d 2d34 3571 3131  ,.    "xn--45q11
+00012ab0: 6322 2c0a 2020 2020 2278 6e2d 2d34 6762  c",.    "xn--4gb
+00012ac0: 7269 6d22 2c0a 2020 2020 2278 6e2d 2d35  rim",.    "xn--5
+00012ad0: 3462 3766 7461 3063 6322 2c0a 2020 2020  4b7fta0cc",.    
+00012ae0: 2278 6e2d 2d35 3571 7734 3267 222c 0a20  "xn--55qw42g",. 
+00012af0: 2020 2022 786e 2d2d 3535 7178 3564 222c     "xn--55qx5d",
+00012b00: 0a20 2020 2022 786e 2d2d 3573 7533 346a  .    "xn--5su34j
+00012b10: 3933 3662 6773 6722 2c0a 2020 2020 2278  936bgsg",.    "x
+00012b20: 6e2d 2d35 747a 6d35 6722 2c0a 2020 2020  n--5tzm5g",.    
+00012b30: 2278 6e2d 2d36 6672 7a38 3267 222c 0a20  "xn--6frz82g",. 
+00012b40: 2020 2022 786e 2d2d 3671 7139 3836 6233     "xn--6qq986b3
+00012b50: 786c 222c 0a20 2020 2022 786e 2d2d 3830  xl",.    "xn--80
+00012b60: 6164 7868 6b73 222c 0a20 2020 2022 786e  adxhks",.    "xn
+00012b70: 2d2d 3830 616f 3231 6122 2c0a 2020 2020  --80ao21a",.    
+00012b80: 2278 6e2d 2d38 3061 7165 6364 7231 6122  "xn--80aqecdr1a"
+00012b90: 2c0a 2020 2020 2278 6e2d 2d38 3061 7365  ,.    "xn--80ase
+00012ba0: 6864 6222 2c0a 2020 2020 2278 6e2d 2d38  hdb",.    "xn--8
+00012bb0: 3061 7377 6722 2c0a 2020 2020 2278 6e2d  0aswg",.    "xn-
+00012bc0: 2d38 7930 6130 3633 6122 2c0a 2020 2020  -8y0a063a",.    
+00012bd0: 2278 6e2d 2d39 3061 3361 6322 2c0a 2020  "xn--90a3ac",.  
+00012be0: 2020 2278 6e2d 2d39 3061 6522 2c0a 2020    "xn--90ae",.  
+00012bf0: 2020 2278 6e2d 2d39 3061 6973 222c 0a20    "xn--90ais",. 
+00012c00: 2020 2022 786e 2d2d 3964 6271 3261 222c     "xn--9dbq2a",
+00012c10: 0a20 2020 2022 786e 2d2d 3965 7435 3275  .    "xn--9et52u
+00012c20: 222c 0a20 2020 2022 786e 2d2d 396b 7274  ",.    "xn--9krt
+00012c30: 3030 6122 2c0a 2020 2020 2278 6e2d 2d62  00a",.    "xn--b
+00012c40: 3477 3630 3566 6572 6422 2c0a 2020 2020  4w605ferd",.    
+00012c50: 2278 6e2d 2d62 636b 3162 3961 3564 7265  "xn--bck1b9a5dre
+00012c60: 3463 222c 0a20 2020 2022 786e 2d2d 6331  4c",.    "xn--c1
+00012c70: 6176 6722 2c0a 2020 2020 2278 6e2d 2d63  avg",.    "xn--c
+00012c80: 3262 7237 6722 2c0a 2020 2020 2278 6e2d  2br7g",.    "xn-
+00012c90: 2d63 636b 3262 3362 222c 0a20 2020 2022  -cck2b3b",.    "
+00012ca0: 786e 2d2d 6367 3462 6b69 222c 0a20 2020  xn--cg4bki",.   
+00012cb0: 2022 786e 2d2d 636c 6368 6330 6561 3062   "xn--clchc0ea0b
+00012cc0: 3267 3261 3967 6364 222c 0a20 2020 2022  2g2a9gcd",.    "
+00012cd0: 786e 2d2d 637a 7236 3934 6222 2c0a 2020  xn--czr694b",.  
+00012ce0: 2020 2278 6e2d 2d63 7a72 7330 7422 2c0a    "xn--czrs0t",.
+00012cf0: 2020 2020 2278 6e2d 2d63 7a72 7532 6422      "xn--czru2d"
+00012d00: 2c0a 2020 2020 2278 6e2d 2d64 3161 636a  ,.    "xn--d1acj
+00012d10: 3362 222c 0a20 2020 2022 786e 2d2d 6431  3b",.    "xn--d1
+00012d20: 616c 6622 2c0a 2020 2020 2278 6e2d 2d65  alf",.    "xn--e
+00012d30: 3161 3463 222c 0a20 2020 2022 786e 2d2d  1a4c",.    "xn--
+00012d40: 6563 6b76 6474 6339 6422 2c0a 2020 2020  eckvdtc9d",.    
+00012d50: 2278 6e2d 2d65 6676 7938 3868 222c 0a20  "xn--efvy88h",. 
+00012d60: 2020 2022 786e 2d2d 6573 7476 3735 6722     "xn--estv75g"
+00012d70: 2c0a 2020 2020 2278 6e2d 2d66 6374 3432  ,.    "xn--fct42
+00012d80: 396b 222c 0a20 2020 2022 786e 2d2d 6668  9k",.    "xn--fh
+00012d90: 6265 6922 2c0a 2020 2020 2278 6e2d 2d66  bei",.    "xn--f
+00012da0: 6971 3232 3863 3568 7322 2c0a 2020 2020  iq228c5hs",.    
+00012db0: 2278 6e2d 2d66 6971 3634 6222 2c0a 2020  "xn--fiq64b",.  
+00012dc0: 2020 2278 6e2d 2d66 6971 7338 7322 2c0a    "xn--fiqs8s",.
+00012dd0: 2020 2020 2278 6e2d 2d66 6971 7a39 7322      "xn--fiqz9s"
+00012de0: 2c0a 2020 2020 2278 6e2d 2d66 6a71 3732  ,.    "xn--fjq72
+00012df0: 3061 222c 0a20 2020 2022 786e 2d2d 666c  0a",.    "xn--fl
+00012e00: 7733 3531 6522 2c0a 2020 2020 2278 6e2d  w351e",.    "xn-
+00012e10: 2d66 7063 726a 3963 3364 222c 0a20 2020  -fpcrj9c3d",.   
+00012e20: 2022 786e 2d2d 667a 6332 6339 6532 6322   "xn--fzc2c9e2c"
+00012e30: 2c0a 2020 2020 2278 6e2d 2d66 7a79 7338  ,.    "xn--fzys8
+00012e40: 6436 3975 7667 6d22 2c0a 2020 2020 2278  d69uvgm",.    "x
+00012e50: 6e2d 2d67 3278 7834 3863 222c 0a20 2020  n--g2xx48c",.   
+00012e60: 2022 786e 2d2d 6763 6b72 3366 3066 222c   "xn--gckr3f0f",
+00012e70: 0a20 2020 2022 786e 2d2d 6765 6372 6a39  .    "xn--gecrj9
+00012e80: 6322 2c0a 2020 2020 2278 6e2d 2d67 6b33  c",.    "xn--gk3
+00012e90: 6174 3165 222c 0a20 2020 2022 786e 2d2d  at1e",.    "xn--
+00012ea0: 6832 6272 6567 3365 7665 222c 0a20 2020  h2breg3eve",.   
+00012eb0: 2022 786e 2d2d 6832 6272 6a39 6322 2c0a   "xn--h2brj9c",.
+00012ec0: 2020 2020 2278 6e2d 2d68 3262 726a 3963      "xn--h2brj9c
+00012ed0: 3863 222c 0a20 2020 2022 786e 2d2d 6878  8c",.    "xn--hx
+00012ee0: 7438 3134 6522 2c0a 2020 2020 2278 6e2d  t814e",.    "xn-
+00012ef0: 2d69 3162 3662 3161 3661 3265 222c 0a20  -i1b6b1a6a2e",. 
+00012f00: 2020 2022 786e 2d2d 696d 7235 3133 6e22     "xn--imr513n"
+00012f10: 2c0a 2020 2020 2278 6e2d 2d69 6f30 6137  ,.    "xn--io0a7
+00012f20: 6922 2c0a 2020 2020 2278 6e2d 2d6a 3161  i",.    "xn--j1a
+00012f30: 6566 222c 0a20 2020 2022 786e 2d2d 6a31  ef",.    "xn--j1
+00012f40: 616d 6822 2c0a 2020 2020 2278 6e2d 2d6a  amh",.    "xn--j
+00012f50: 3677 3139 3367 222c 0a20 2020 2022 786e  6w193g",.    "xn
+00012f60: 2d2d 6a6c 7136 3175 3977 3762 222c 0a20  --jlq61u9w7b",. 
+00012f70: 2020 2022 786e 2d2d 6a76 7231 3839 6d22     "xn--jvr189m"
+00012f80: 2c0a 2020 2020 2278 6e2d 2d6b 6372 7837  ,.    "xn--kcrx7
+00012f90: 3764 3178 3461 222c 0a20 2020 2022 786e  7d1x4a",.    "xn
+00012fa0: 2d2d 6b70 7277 3133 6422 2c0a 2020 2020  --kprw13d",.    
+00012fb0: 2278 6e2d 2d6b 7072 7935 3764 222c 0a20  "xn--kpry57d",. 
+00012fc0: 2020 2022 786e 2d2d 6b70 7537 3136 6622     "xn--kpu716f"
+00012fd0: 2c0a 2020 2020 2278 6e2d 2d6b 7075 7433  ,.    "xn--kput3
+00012fe0: 6922 2c0a 2020 2020 2278 6e2d 2d6c 3161  i",.    "xn--l1a
+00012ff0: 6363 222c 0a20 2020 2022 786e 2d2d 6c67  cc",.    "xn--lg
+00013000: 6262 6174 3161 6438 6a22 2c0a 2020 2020  bbat1ad8j",.    
+00013010: 2278 6e2d 2d6d 6762 3961 7762 6622 2c0a  "xn--mgb9awbf",.
+00013020: 2020 2020 2278 6e2d 2d6d 6762 6133 6133      "xn--mgba3a3
+00013030: 656a 7422 2c0a 2020 2020 2278 6e2d 2d6d  ejt",.    "xn--m
+00013040: 6762 6133 6134 6631 3661 222c 0a20 2020  gba3a4f16a",.   
+00013050: 2022 786e 2d2d 6d67 6261 3763 3062 626e   "xn--mgba7c0bbn
+00013060: 3061 222c 0a20 2020 2022 786e 2d2d 6d67  0a",.    "xn--mg
+00013070: 6261 616b 6337 6476 6622 2c0a 2020 2020  baakc7dvf",.    
+00013080: 2278 6e2d 2d6d 6762 6161 6d37 6138 6822  "xn--mgbaam7a8h"
+00013090: 2c0a 2020 2020 2278 6e2d 2d6d 6762 6162  ,.    "xn--mgbab
+000130a0: 3262 6422 2c0a 2020 2020 2278 6e2d 2d6d  2bd",.    "xn--m
+000130b0: 6762 6169 3961 7a67 7170 366a 222c 0a20  gbai9azgqp6j",. 
+000130c0: 2020 2022 786e 2d2d 6d67 6261 7968 3767     "xn--mgbayh7g
+000130d0: 7061 222c 0a20 2020 2022 786e 2d2d 6d67  pa",.    "xn--mg
+000130e0: 6262 3966 6270 6f62 222c 0a20 2020 2022  bb9fbpob",.    "
+000130f0: 786e 2d2d 6d67 6262 6831 6122 2c0a 2020  xn--mgbbh1a",.  
+00013100: 2020 2278 6e2d 2d6d 6762 6268 3161 3731    "xn--mgbbh1a71
+00013110: 6522 2c0a 2020 2020 2278 6e2d 2d6d 6762  e",.    "xn--mgb
+00013120: 6330 6139 617a 6367 222c 0a20 2020 2022  c0a9azcg",.    "
+00013130: 786e 2d2d 6d67 6263 6137 647a 646f 222c  xn--mgbca7dzdo",
+00013140: 0a20 2020 2022 786e 2d2d 6d67 6265 7270  .    "xn--mgberp
+00013150: 3461 3564 3461 7222 2c0a 2020 2020 2278  4a5d4ar",.    "x
+00013160: 6e2d 2d6d 6762 6775 3832 6122 2c0a 2020  n--mgbgu82a",.  
+00013170: 2020 2278 6e2d 2d6d 6762 6934 6563 6578    "xn--mgbi4ecex
+00013180: 7022 2c0a 2020 2020 2278 6e2d 2d6d 6762  p",.    "xn--mgb
+00013190: 706c 3266 6822 2c0a 2020 2020 2278 6e2d  pl2fh",.    "xn-
+000131a0: 2d6d 6762 7433 6468 6422 2c0a 2020 2020  -mgbt3dhd",.    
+000131b0: 2278 6e2d 2d6d 6762 7478 3262 222c 0a20  "xn--mgbtx2b",. 
+000131c0: 2020 2022 786e 2d2d 6d67 6278 3463 6430     "xn--mgbx4cd0
+000131d0: 6162 222c 0a20 2020 2022 786e 2d2d 6d69  ab",.    "xn--mi
+000131e0: 7838 3931 6622 2c0a 2020 2020 2278 6e2d  x891f",.    "xn-
+000131f0: 2d6d 6b31 6275 3434 6322 2c0a 2020 2020  -mk1bu44c",.    
+00013200: 2278 6e2d 2d6d 7874 7131 6d22 2c0a 2020  "xn--mxtq1m",.  
+00013210: 2020 2278 6e2d 2d6e 6762 6335 617a 6422    "xn--ngbc5azd"
+00013220: 2c0a 2020 2020 2278 6e2d 2d6e 6762 6539  ,.    "xn--ngbe9
+00013230: 6530 6122 2c0a 2020 2020 2278 6e2d 2d6e  e0a",.    "xn--n
+00013240: 6762 7278 222c 0a20 2020 2022 786e 2d2d  gbrx",.    "xn--
+00013250: 6e6f 6465 222c 0a20 2020 2022 786e 2d2d  node",.    "xn--
+00013260: 6e71 7637 6622 2c0a 2020 2020 2278 6e2d  nqv7f",.    "xn-
+00013270: 2d6e 7176 3766 7330 3065 6d61 222c 0a20  -nqv7fs00ema",. 
+00013280: 2020 2022 786e 2d2d 6e79 7179 3236 6122     "xn--nyqy26a"
+00013290: 2c0a 2020 2020 2278 6e2d 2d6f 3363 7734  ,.    "xn--o3cw4
+000132a0: 6822 2c0a 2020 2020 2278 6e2d 2d6f 6762  h",.    "xn--ogb
+000132b0: 7066 3866 6c22 2c0a 2020 2020 2278 6e2d  pf8fl",.    "xn-
+000132c0: 2d70 3161 6366 222c 0a20 2020 2022 786e  -p1acf",.    "xn
+000132d0: 2d2d 7031 6169 222c 0a20 2020 2022 786e  --p1ai",.    "xn
+000132e0: 2d2d 7062 7439 3737 6322 2c0a 2020 2020  --pbt977c",.    
+000132f0: 2278 6e2d 2d70 6762 7330 6468 222c 0a20  "xn--pgbs0dh",. 
+00013300: 2020 2022 786e 2d2d 7073 7379 3275 222c     "xn--pssy2u",
+00013310: 0a20 2020 2022 786e 2d2d 7139 6a79 6234  .    "xn--q9jyb4
+00013320: 6322 2c0a 2020 2020 2278 6e2d 2d71 636b  c",.    "xn--qck
+00013330: 6131 706d 6322 2c0a 2020 2020 2278 6e2d  a1pmc",.    "xn-
+00013340: 2d71 7861 6d22 2c0a 2020 2020 2278 6e2d  -qxam",.    "xn-
+00013350: 2d72 6871 7639 3667 222c 0a20 2020 2022  -rhqv96g",.    "
+00013360: 786e 2d2d 726f 7675 3838 6222 2c0a 2020  xn--rovu88b",.  
+00013370: 2020 2278 6e2d 2d72 7663 3165 3061 6d33    "xn--rvc1e0am3
+00013380: 6522 2c0a 2020 2020 2278 6e2d 2d73 3962  e",.    "xn--s9b
+00013390: 726a 3963 222c 0a20 2020 2022 786e 2d2d  rj9c",.    "xn--
+000133a0: 7365 7335 3534 6722 2c0a 2020 2020 2278  ses554g",.    "x
+000133b0: 6e2d 2d74 3630 6235 3661 222c 0a20 2020  n--t60b56a",.   
+000133c0: 2022 786e 2d2d 7463 6b77 6522 2c0a 2020   "xn--tckwe",.  
+000133d0: 2020 2278 6e2d 2d74 6971 3439 7871 796a    "xn--tiq49xqyj
+000133e0: 222c 0a20 2020 2022 786e 2d2d 756e 7570  ",.    "xn--unup
+000133f0: 3479 222c 0a20 2020 2022 786e 2d2d 7665  4y",.    "xn--ve
+00013400: 726d 6765 6e73 6265 7261 7465 722d 6374  rmgensberater-ct
+00013410: 6222 2c0a 2020 2020 2278 6e2d 2d76 6572  b",.    "xn--ver
+00013420: 6d67 656e 7362 6572 6174 756e 672d 7077  mgensberatung-pw
+00013430: 6222 2c0a 2020 2020 2278 6e2d 2d76 6871  b",.    "xn--vhq
+00013440: 7576 222c 0a20 2020 2022 786e 2d2d 7675  uv",.    "xn--vu
+00013450: 7138 3631 6222 2c0a 2020 2020 2278 6e2d  q861b",.    "xn-
+00013460: 2d77 3472 3835 656c 3866 6875 3564 6e72  -w4r85el8fhu5dnr
+00013470: 6122 2c0a 2020 2020 2278 6e2d 2d77 3472  a",.    "xn--w4r
+00013480: 7334 306c 222c 0a20 2020 2022 786e 2d2d  s40l",.    "xn--
+00013490: 7767 6268 3163 222c 0a20 2020 2022 786e  wgbh1c",.    "xn
+000134a0: 2d2d 7767 626c 3661 222c 0a20 2020 2022  --wgbl6a",.    "
+000134b0: 786e 2d2d 7868 7135 3231 6222 2c0a 2020  xn--xhq521b",.  
+000134c0: 2020 2278 6e2d 2d78 6b63 3261 6c33 6879    "xn--xkc2al3hy
+000134d0: 6532 6122 2c0a 2020 2020 2278 6e2d 2d78  e2a",.    "xn--x
+000134e0: 6b63 3264 6c33 6135 6565 3068 222c 0a20  kc2dl3a5ee0h",. 
+000134f0: 2020 2022 786e 2d2d 7939 6133 6171 222c     "xn--y9a3aq",
+00013500: 0a20 2020 2022 786e 2d2d 7966 726f 3469  .    "xn--yfro4i
+00013510: 3637 6f22 2c0a 2020 2020 2278 6e2d 2d79  67o",.    "xn--y
+00013520: 6762 6932 616d 6d78 222c 0a20 2020 2022  gbi2ammx",.    "
+00013530: 786e 2d2d 7a66 7231 3634 6222 2c0a 2020  xn--zfr164b",.  
+00013540: 2020 2278 7065 7269 6122 2c0a 2020 2020    "xperia",.    
+00013550: 2278 7878 222c 0a20 2020 2022 7879 7a22  "xxx",.    "xyz"
+00013560: 2c0a 2020 2020 2320 790a 2020 2020 2279  ,.    # y.    "y
+00013570: 6163 6874 7322 2c0a 2020 2020 2279 6168  achts",.    "yah
+00013580: 6f6f 222c 0a20 2020 2022 7961 6d61 7875  oo",.    "yamaxu
+00013590: 6e22 2c0a 2020 2020 2279 616e 6465 7822  n",.    "yandex"
+000135a0: 2c0a 2020 2020 2279 6522 2c0a 2020 2020  ,.    "ye",.    
+000135b0: 2279 6f64 6f62 6173 6869 222c 0a20 2020  "yodobashi",.   
+000135c0: 2022 796f 6761 222c 0a20 2020 2022 796f   "yoga",.    "yo
+000135d0: 6b6f 6861 6d61 222c 0a20 2020 2022 796f  kohama",.    "yo
+000135e0: 7522 2c0a 2020 2020 2279 6f75 7475 6265  u",.    "youtube
+000135f0: 222c 0a20 2020 2022 7974 222c 0a20 2020  ",.    "yt",.   
+00013600: 2022 7975 6e22 2c0a 2020 2020 2320 7a0a   "yun",.    # z.
+00013610: 2020 2020 227a 6122 2c0a 2020 2020 227a      "za",.    "z
+00013620: 6170 706f 7322 2c0a 2020 2020 227a 6172  appos",.    "zar
+00013630: 6122 2c0a 2020 2020 227a 6572 6f22 2c0a  a",.    "zero",.
+00013640: 2020 2020 227a 6970 222c 0a20 2020 2022      "zip",.    "
+00013650: 7a69 7070 6f22 2c0a 2020 2020 227a 6d22  zippo",.    "zm"
+00013660: 2c0a 2020 2020 227a 6f6e 6522 2c0a 2020  ,.    "zone",.  
+00013670: 2020 227a 7565 7269 6368 222c 0a20 2020    "zuerich",.   
+00013680: 2022 7a77 222c 0a5d 0a0a 0a63 6c61 7373   "zw",.]...class
+00013690: 2049 535f 4854 5450 5f55 524c 2856 616c   IS_HTTP_URL(Val
+000136a0: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
+000136b0: 0a20 2020 2052 656a 6563 7473 2061 2055  .    Rejects a U
+000136c0: 524c 2073 7472 696e 6720 6966 2061 6e79  RL string if any
+000136d0: 206f 6620 7468 6520 666f 6c6c 6f77 696e   of the followin
+000136e0: 6720 6973 2074 7275 653a 0a20 2020 2020  g is true:.     
+000136f0: 2020 2a20 5468 6520 7374 7269 6e67 2069    * The string i
+00013700: 7320 656d 7074 7920 6f72 204e 6f6e 650a  s empty or None.
+00013710: 2020 2020 2020 202a 2054 6865 2073 7472         * The str
+00013720: 696e 6720 7573 6573 2063 6861 7261 6374  ing uses charact
+00013730: 6572 7320 7468 6174 2061 7265 206e 6f74  ers that are not
+00013740: 2061 6c6c 6f77 6564 2069 6e20 6120 5552   allowed in a UR
+00013750: 4c0a 2020 2020 2020 202a 2054 6865 2073  L.       * The s
+00013760: 7472 696e 6720 6272 6561 6b73 2061 6e79  tring breaks any
+00013770: 206f 6620 7468 6520 4854 5450 2073 796e   of the HTTP syn
+00013780: 7461 6374 6963 2072 756c 6573 0a20 2020  tactic rules.   
+00013790: 2020 2020 2a20 5468 6520 5552 4c20 7363      * The URL sc
+000137a0: 6865 6d65 2073 7065 6369 6669 6564 2028  heme specified (
+000137b0: 6966 206f 6e65 2069 7320 7370 6563 6966  if one is specif
+000137c0: 6965 6429 2069 7320 6e6f 7420 2768 7474  ied) is not 'htt
+000137d0: 7027 206f 7220 2768 7474 7073 270a 2020  p' or 'https'.  
+000137e0: 2020 2020 202a 2054 6865 2074 6f70 2d6c       * The top-l
+000137f0: 6576 656c 2064 6f6d 6169 6e20 2869 6620  evel domain (if 
+00013800: 6120 686f 7374 206e 616d 6520 6973 2073  a host name is s
+00013810: 7065 6369 6669 6564 2920 646f 6573 206e  pecified) does n
+00013820: 6f74 2065 7869 7374 0a0a 2020 2020 4261  ot exist..    Ba
+00013830: 7365 6420 6f6e 2052 4643 2032 3631 363a  sed on RFC 2616:
+00013840: 2068 7474 703a 2f2f 7777 772e 6661 7173   http://www.faqs
+00013850: 2e6f 7267 2f72 6663 732f 7266 6332 3631  .org/rfcs/rfc261
+00013860: 362e 6874 6d6c 0a0a 2020 2020 5468 6973  6.html..    This
+00013870: 2066 756e 6374 696f 6e20 6f6e 6c79 2063   function only c
+00013880: 6865 636b 7320 7468 6520 5552 4c27 7320  hecks the URL's 
+00013890: 7379 6e74 6178 2e20 4974 2064 6f65 7320  syntax. It does 
+000138a0: 6e6f 7420 6368 6563 6b20 7468 6174 2074  not check that t
+000138b0: 6865 2055 524c 0a20 2020 2070 6f69 6e74  he URL.    point
+000138c0: 7320 746f 2061 2072 6561 6c20 646f 6375  s to a real docu
+000138d0: 6d65 6e74 2c20 666f 7220 6578 616d 706c  ment, for exampl
+000138e0: 652c 206f 7220 7468 6174 2069 7420 6f74  e, or that it ot
+000138f0: 6865 7277 6973 6520 6d61 6b65 7320 7365  herwise makes se
+00013900: 6e73 650a 2020 2020 7365 6d61 6e74 6963  nse.    semantic
+00013910: 616c 6c79 2e20 5468 6973 2066 756e 6374  ally. This funct
+00013920: 696f 6e20 646f 6573 2061 7574 6f6d 6174  ion does automat
+00013930: 6963 616c 6c79 2070 7265 7065 6e64 2027  ically prepend '
+00013940: 6874 7470 3a2f 2f27 2069 6e20 6672 6f6e  http://' in fron
+00013950: 740a 2020 2020 6f66 2061 2055 524c 2069  t.    of a URL i
+00013960: 6e20 7468 6520 6361 7365 206f 6620 616e  n the case of an
+00013970: 2061 6262 7265 7669 6174 6564 2055 524c   abbreviated URL
+00013980: 2028 652e 672e 2027 676f 6f67 6c65 2e63   (e.g. 'google.c
+00013990: 6127 292e 0a0a 2020 2020 5468 6520 6c69  a')...    The li
+000139a0: 7374 206f 6620 616c 6c6f 7765 6420 7363  st of allowed sc
+000139b0: 6865 6d65 7320 6973 2063 7573 746f 6d69  hemes is customi
+000139c0: 7a61 626c 6520 7769 7468 2074 6865 2061  zable with the a
+000139d0: 6c6c 6f77 6564 5f73 6368 656d 6573 0a20  llowed_schemes. 
+000139e0: 2020 2070 6172 616d 6574 6572 2e20 4966     parameter. If
+000139f0: 2079 6f75 2065 7863 6c75 6465 204e 6f6e   you exclude Non
+00013a00: 6520 6672 6f6d 2074 6865 206c 6973 742c  e from the list,
+00013a10: 2074 6865 6e20 6162 6272 6576 6961 7465   then abbreviate
+00013a20: 6420 5552 4c73 0a20 2020 2028 6c61 636b  d URLs.    (lack
+00013a30: 696e 6720 6120 7363 6865 6d65 2073 7563  ing a scheme suc
+00013a40: 6820 6173 2027 6874 7470 2729 2077 696c  h as 'http') wil
+00013a50: 6c20 6265 2072 656a 6563 7465 642e 0a0a  l be rejected...
+00013a60: 2020 2020 5468 6520 6465 6661 756c 7420      The default 
+00013a70: 7072 6570 656e 6465 6420 7363 6865 6d65  prepended scheme
+00013a80: 2069 7320 6375 7374 6f6d 697a 6162 6c65   is customizable
+00013a90: 2077 6974 6820 7468 6520 7072 6570 656e   with the prepen
+00013aa0: 645f 7363 6865 6d65 0a20 2020 2070 6172  d_scheme.    par
+00013ab0: 616d 6574 6572 2e20 4966 2079 6f75 2073  ameter. If you s
+00013ac0: 6574 2070 7265 7065 6e64 5f73 6368 656d  et prepend_schem
+00013ad0: 6520 746f 204e 6f6e 6520 7468 656e 2070  e to None then p
+00013ae0: 7265 7065 6e64 696e 6720 7769 6c6c 2062  repending will b
+00013af0: 650a 2020 2020 6469 7361 626c 6564 2e20  e.    disabled. 
+00013b00: 5552 4c73 2074 6861 7420 7265 7175 6972  URLs that requir
+00013b10: 6520 7072 6570 656e 6469 6e67 2074 6f20  e prepending to 
+00013b20: 7061 7273 6520 7769 6c6c 2073 7469 6c6c  parse will still
+00013b30: 2062 6520 6163 6365 7074 6564 2c0a 2020   be accepted,.  
+00013b40: 2020 6275 7420 7468 6520 7265 7475 726e    but the return
+00013b50: 2076 616c 7565 2077 696c 6c20 6e6f 7420   value will not 
+00013b60: 6265 206d 6f64 6966 6965 642e 0a0a 2020  be modified...  
+00013b70: 2020 4061 7574 686f 723a 204a 6f6e 6174    @author: Jonat
+00013b80: 6861 6e20 4265 6e6e 0a0a 2020 2020 2020  han Benn..      
+00013b90: 2020 3e3e 3e20 4953 5f48 5454 505f 5552    >>> IS_HTTP_UR
+00013ba0: 4c28 2928 2768 7474 703a 2f2f 312e 322e  L()('http://1.2.
+00013bb0: 332e 3427 290a 2020 2020 2020 2020 2827  3.4').        ('
+00013bc0: 6874 7470 3a2f 2f31 2e32 2e33 2e34 272c  http://1.2.3.4',
+00013bd0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+00013be0: 3e3e 2049 535f 4854 5450 5f55 524c 2829  >> IS_HTTP_URL()
+00013bf0: 2827 6874 7470 3a2f 2f61 6263 2e63 6f6d  ('http://abc.com
+00013c00: 2729 0a20 2020 2020 2020 2028 2768 7474  ').        ('htt
+00013c10: 703a 2f2f 6162 632e 636f 6d27 2c20 4e6f  p://abc.com', No
+00013c20: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+00013c30: 4953 5f48 5454 505f 5552 4c28 2928 2768  IS_HTTP_URL()('h
+00013c40: 7474 7073 3a2f 2f61 6263 2e63 6f6d 2729  ttps://abc.com')
+00013c50: 0a20 2020 2020 2020 2028 2768 7474 7073  .        ('https
+00013c60: 3a2f 2f61 6263 2e63 6f6d 272c 204e 6f6e  ://abc.com', Non
+00013c70: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+00013c80: 535f 4854 5450 5f55 524c 2829 2827 6874  S_HTTP_URL()('ht
+00013c90: 7470 783a 2f2f 6162 632e 636f 6d27 290a  tpx://abc.com').
+00013ca0: 2020 2020 2020 2020 2827 6874 7470 783a          ('httpx:
+00013cb0: 2f2f 6162 632e 636f 6d27 2c20 2765 6e74  //abc.com', 'ent
+00013cc0: 6572 2061 2076 616c 6964 2055 524c 2729  er a valid URL')
+00013cd0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00013ce0: 4854 5450 5f55 524c 2829 2827 6874 7470  HTTP_URL()('http
+00013cf0: 3a2f 2f61 6263 2e63 6f6d 3a38 3027 290a  ://abc.com:80').
+00013d00: 2020 2020 2020 2020 2827 6874 7470 3a2f          ('http:/
+00013d10: 2f61 6263 2e63 6f6d 3a38 3027 2c20 4e6f  /abc.com:80', No
+00013d20: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+00013d30: 4953 5f48 5454 505f 5552 4c28 2928 2768  IS_HTTP_URL()('h
+00013d40: 7474 703a 2f2f 7573 6572 4061 6263 2e63  ttp://user@abc.c
+00013d50: 6f6d 2729 0a20 2020 2020 2020 2028 2768  om').        ('h
+00013d60: 7474 703a 2f2f 7573 6572 4061 6263 2e63  ttp://user@abc.c
+00013d70: 6f6d 272c 204e 6f6e 6529 0a20 2020 2020  om', None).     
+00013d80: 2020 203e 3e3e 2049 535f 4854 5450 5f55     >>> IS_HTTP_U
+00013d90: 524c 2829 2827 6874 7470 3a2f 2f75 7365  RL()('http://use
+00013da0: 7240 312e 322e 332e 3427 290a 2020 2020  r@1.2.3.4').    
+00013db0: 2020 2020 2827 6874 7470 3a2f 2f75 7365      ('http://use
+00013dc0: 7240 312e 322e 332e 3427 2c20 4e6f 6e65  r@1.2.3.4', None
+00013dd0: 290a 0a20 2020 2041 7267 733a 0a20 2020  )..    Args:.   
+00013de0: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+00013df0: 6765 3a20 6120 7374 7269 6e67 2c20 7468  ge: a string, th
+00013e00: 6520 6572 726f 7220 6d65 7373 6167 6520  e error message 
+00013e10: 746f 2067 6976 6520 7468 6520 656e 6420  to give the end 
+00013e20: 7573 6572 0a20 2020 2020 2020 2020 2020  user.           
+00013e30: 2069 6620 7468 6520 5552 4c20 646f 6573   if the URL does
+00013e40: 206e 6f74 2076 616c 6964 6174 650a 2020   not validate.  
+00013e50: 2020 2020 2020 616c 6c6f 7765 645f 7363        allowed_sc
+00013e60: 6865 6d65 733a 2061 206c 6973 7420 636f  hemes: a list co
+00013e70: 6e74 6169 6e69 6e67 2073 7472 696e 6773  ntaining strings
+00013e80: 206f 7220 4e6f 6e65 2e20 4561 6368 2065   or None. Each e
+00013e90: 6c65 6d65 6e74 0a20 2020 2020 2020 2020  lement.         
+00013ea0: 2020 2069 7320 6120 7363 6865 6d65 2074     is a scheme t
+00013eb0: 6865 2069 6e70 7574 7465 6420 5552 4c20  he inputted URL 
+00013ec0: 6973 2061 6c6c 6f77 6564 2074 6f20 7573  is allowed to us
+00013ed0: 650a 2020 2020 2020 2020 7072 6570 656e  e.        prepen
+00013ee0: 645f 7363 6865 6d65 3a20 6120 7374 7269  d_scheme: a stri
+00013ef0: 6e67 2c20 7468 6973 2073 6368 656d 6520  ng, this scheme 
+00013f00: 6973 2070 7265 7065 6e64 6564 2069 6620  is prepended if 
+00013f10: 6974 2773 0a20 2020 2020 2020 2020 2020  it's.           
+00013f20: 206e 6563 6573 7361 7279 2074 6f20 6d61   necessary to ma
+00013f30: 6b65 2074 6865 2055 524c 2076 616c 6964  ke the URL valid
+00013f40: 0a20 2020 2022 2222 0a0a 2020 2020 5245  .    """..    RE
+00013f50: 4745 585f 4745 4e45 5249 435f 5641 4c49  GEX_GENERIC_VALI
+00013f60: 445f 4950 203d 2072 2228 5b5c 772e 217e  D_IP = r"([\w.!~
+00013f70: 2a27 7c3b 3a26 3d2b 242c 2d5d 2b40 293f  *'|;:&=+$,-]+@)?
+00013f80: 5c64 2b5c 2e5c 642b 5c2e 5c64 2b5c 2e5c  \d+\.\d+\.\d+\.\
+00013f90: 642b 283a 5c64 2a29 2a24 220a 2020 2020  d+(:\d*)*$".    
+00013fa0: 5245 4745 585f 4745 4e45 5249 435f 5641  REGEX_GENERIC_VA
+00013fb0: 4c49 445f 444f 4d41 494e 203d 2072 2228  LID_DOMAIN = r"(
+00013fc0: 5b5c 772e 217e 2a27 7c3b 3a26 3d2b 242c  [\w.!~*'|;:&=+$,
+00013fd0: 2d5d 2b40 293f 2828 5b41 2d5a 612d 7a30  -]+@)?(([A-Za-z0
+00013fe0: 2d39 5d2b 5b41 2d5a 612d 7a30 2d39 5c2d  -9]+[A-Za-z0-9\-
+00013ff0: 5d2a 5b41 2d5a 612d 7a30 2d39 5d2b 5c2e  ]*[A-Za-z0-9]+\.
+00014000: 292a 285b 412d 5a61 2d7a 302d 395d 2b5c  )*([A-Za-z0-9]+\
+00014010: 2e29 2a29 2a28 5b41 2d5a 612d 7a5d 2b5b  .)*)*([A-Za-z]+[
+00014020: 412d 5a61 2d7a 302d 395c 2d5d 2a5b 412d  A-Za-z0-9\-]*[A-
+00014030: 5a61 2d7a 302d 395d 2b29 5c2e 3f28 3a5c  Za-z0-9]+)\.?(:\
+00014040: 642a 292a 2422 0a0a 2020 2020 6465 6620  d*)*$"..    def 
+00014050: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+00014060: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00014070: 6572 726f 725f 6d65 7373 6167 653d 2245  error_message="E
+00014080: 6e74 6572 2061 2076 616c 6964 2055 524c  nter a valid URL
+00014090: 222c 0a20 2020 2020 2020 2061 6c6c 6f77  ",.        allow
+000140a0: 6564 5f73 6368 656d 6573 3d4e 6f6e 652c  ed_schemes=None,
+000140b0: 0a20 2020 2020 2020 2070 7265 7065 6e64  .        prepend
+000140c0: 5f73 6368 656d 653d 2268 7474 7022 2c0a  _scheme="http",.
+000140d0: 2020 2020 2020 2020 616c 6c6f 7765 645f          allowed_
+000140e0: 746c 6473 3d4e 6f6e 652c 0a20 2020 2029  tlds=None,.    )
+000140f0: 3a0a 2020 2020 2020 2020 7365 6c66 2e65  :.        self.e
+00014100: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
+00014110: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
+00014120: 2020 2020 2069 6620 616c 6c6f 7765 645f       if allowed_
+00014130: 7363 6865 6d65 7320 6973 204e 6f6e 653a  schemes is None:
+00014140: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00014150: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
+00014160: 7320 3d20 6874 7470 5f73 6368 656d 6573  s = http_schemes
+00014170: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00014180: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00014190: 616c 6c6f 7765 645f 7363 6865 6d65 7320  allowed_schemes 
+000141a0: 3d20 616c 6c6f 7765 645f 7363 6865 6d65  = allowed_scheme
+000141b0: 730a 2020 2020 2020 2020 6966 2061 6c6c  s.        if all
+000141c0: 6f77 6564 5f74 6c64 7320 6973 204e 6f6e  owed_tlds is Non
+000141d0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+000141e0: 656c 662e 616c 6c6f 7765 645f 746c 6473  elf.allowed_tlds
+000141f0: 203d 206f 6666 6963 6961 6c5f 746f 705f   = official_top_
+00014200: 6c65 7665 6c5f 646f 6d61 696e 730a 2020  level_domains.  
+00014210: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00014220: 2020 2020 2020 2020 7365 6c66 2e61 6c6c          self.all
+00014230: 6f77 6564 5f74 6c64 7320 3d20 616c 6c6f  owed_tlds = allo
+00014240: 7765 645f 746c 6473 0a20 2020 2020 2020  wed_tlds.       
+00014250: 2073 656c 662e 7072 6570 656e 645f 7363   self.prepend_sc
+00014260: 6865 6d65 203d 2070 7265 7065 6e64 5f73  heme = prepend_s
+00014270: 6368 656d 650a 0a20 2020 2020 2020 2066  cheme..        f
+00014280: 6f72 2069 2069 6e20 7365 6c66 2e61 6c6c  or i in self.all
+00014290: 6f77 6564 5f73 6368 656d 6573 3a0a 2020  owed_schemes:.  
+000142a0: 2020 2020 2020 2020 2020 6966 2069 206e            if i n
+000142b0: 6f74 2069 6e20 6874 7470 5f73 6368 656d  ot in http_schem
+000142c0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
+000142d0: 2020 2020 7261 6973 6520 5379 6e74 6178      raise Syntax
+000142e0: 4572 726f 7228 0a20 2020 2020 2020 2020  Error(.         
+000142f0: 2020 2020 2020 2020 2020 2022 616c 6c6f             "allo
+00014300: 7765 645f 7363 6865 6d65 2076 616c 7565  wed_scheme value
+00014310: 2027 2573 2720 6973 206e 6f74 2069 6e20   '%s' is not in 
+00014320: 2573 2220 2520 2869 2c20 6874 7470 5f73  %s" % (i, http_s
+00014330: 6368 656d 6573 290a 2020 2020 2020 2020  chemes).        
+00014340: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00014350: 2020 2069 6620 7365 6c66 2e70 7265 7065     if self.prepe
+00014360: 6e64 5f73 6368 656d 6520 6e6f 7420 696e  nd_scheme not in
+00014370: 2073 656c 662e 616c 6c6f 7765 645f 7363   self.allowed_sc
+00014380: 6865 6d65 733a 0a20 2020 2020 2020 2020  hemes:.         
+00014390: 2020 2072 6169 7365 2053 796e 7461 7845     raise SyntaxE
+000143a0: 7272 6f72 280a 2020 2020 2020 2020 2020  rror(.          
+000143b0: 2020 2020 2020 2270 7265 7065 6e64 5f73        "prepend_s
+000143c0: 6368 656d 653d 2725 7327 2069 7320 6e6f  cheme='%s' is no
+000143d0: 7420 696e 2061 6c6c 6f77 6564 5f73 6368  t in allowed_sch
+000143e0: 656d 6573 3d25 7322 0a20 2020 2020 2020  emes=%s".       
+000143f0: 2020 2020 2020 2020 2025 2028 7365 6c66           % (self
+00014400: 2e70 7265 7065 6e64 5f73 6368 656d 652c  .prepend_scheme,
+00014410: 2073 656c 662e 616c 6c6f 7765 645f 7363   self.allowed_sc
+00014420: 6865 6d65 7329 0a20 2020 2020 2020 2020  hemes).         
+00014430: 2020 2029 0a0a 2020 2020 6465 6620 7661     )..    def va
+00014440: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+00014450: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+00014460: 6e65 293a 0a20 2020 2020 2020 2022 2222  ne):.        """
+00014470: 0a20 2020 2020 2020 2041 7267 733a 0a20  .        Args:. 
+00014480: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00014490: 3a20 6120 7374 7269 6e67 2c20 7468 6520  : a string, the 
+000144a0: 5552 4c20 746f 2076 616c 6964 6174 650a  URL to validate.
+000144b0: 0a20 2020 2020 2020 2052 6574 7572 6e73  .        Returns
+000144c0: 3a0a 2020 2020 2020 2020 2020 2020 6120  :.            a 
+000144d0: 7475 706c 652c 2077 6865 7265 2074 7570  tuple, where tup
+000144e0: 6c65 5b30 5d20 6973 2074 6865 2069 6e70  le[0] is the inp
+000144f0: 7574 7465 6420 7661 6c75 650a 2020 2020  utted value.    
+00014500: 2020 2020 2020 2020 2870 6f73 7369 626c          (possibl
+00014510: 6520 7072 6570 656e 6465 6420 7769 7468  e prepended with
+00014520: 2070 7265 7065 6e64 5f73 6368 656d 6529   prepend_scheme)
+00014530: 2c20 616e 6420 7475 706c 655b 315d 2069  , and tuple[1] i
+00014540: 7320 6569 7468 6572 0a20 2020 2020 2020  s either.       
+00014550: 2020 2020 204e 6f6e 6520 2873 7563 6365       None (succe
+00014560: 7373 2129 206f 7220 7468 6520 7374 7269  ss!) or the stri
+00014570: 6e67 2065 7272 6f72 5f6d 6573 7361 6765  ng error_message
+00014580: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00014590: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000145a0: 2020 2020 2020 2320 6966 2074 6865 2055        # if the U
+000145b0: 524c 2070 6173 7365 7320 6765 6e65 7269  RL passes generi
+000145c0: 6320 7661 6c69 6461 7469 6f6e 0a20 2020  c validation.   
+000145d0: 2020 2020 2020 2020 2078 203d 2049 535f           x = IS_
+000145e0: 4745 4e45 5249 435f 5552 4c28 0a20 2020  GENERIC_URL(.   
+000145f0: 2020 2020 2020 2020 2020 2020 2065 7272               err
+00014600: 6f72 5f6d 6573 7361 6765 3d73 656c 662e  or_message=self.
+00014610: 6572 726f 725f 6d65 7373 6167 652c 0a20  error_message,. 
+00014620: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00014630: 6c6c 6f77 6564 5f73 6368 656d 6573 3d73  llowed_schemes=s
+00014640: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
+00014650: 6d65 732c 0a20 2020 2020 2020 2020 2020  mes,.           
+00014660: 2020 2020 2070 7265 7065 6e64 5f73 6368       prepend_sch
+00014670: 656d 653d 7365 6c66 2e70 7265 7065 6e64  eme=self.prepend
+00014680: 5f73 6368 656d 652c 0a20 2020 2020 2020  _scheme,.       
+00014690: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+000146a0: 2020 2069 6620 7828 7661 6c75 6529 5b31     if x(value)[1
+000146b0: 5d20 6973 204e 6f6e 653a 0a20 2020 2020  ] is None:.     
+000146c0: 2020 2020 2020 2020 2020 2063 6f6d 706f             compo
+000146d0: 6e65 6e74 7320 3d20 7572 6c70 6172 7365  nents = urlparse
+000146e0: 2e75 726c 7061 7273 6528 7661 6c75 6529  .urlparse(value)
+000146f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014700: 2061 7574 686f 7269 7479 203d 2063 6f6d   authority = com
+00014710: 706f 6e65 6e74 732e 6e65 746c 6f63 0a20  ponents.netloc. 
+00014720: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014730: 2069 6620 7468 6572 6520 6973 2061 6e20   if there is an 
+00014740: 6175 7468 6f72 6974 7920 636f 6d70 6f6e  authority compon
+00014750: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
+00014760: 2020 2020 6966 2061 7574 686f 7269 7479      if authority
+00014770: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00014780: 2020 2020 2020 2320 6966 2061 7574 686f        # if autho
+00014790: 7269 7479 2069 7320 6120 7661 6c69 6420  rity is a valid 
+000147a0: 4950 2061 6464 7265 7373 0a20 2020 2020  IP address.     
+000147b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000147c0: 6620 7265 2e6d 6174 6368 2873 656c 662e  f re.match(self.
+000147d0: 5245 4745 585f 4745 4e45 5249 435f 5641  REGEX_GENERIC_VA
+000147e0: 4c49 445f 4950 2c20 6175 7468 6f72 6974  LID_IP, authorit
+000147f0: 7929 3a0a 2020 2020 2020 2020 2020 2020  y):.            
+00014800: 2020 2020 2020 2020 2020 2020 2320 5468              # Th
+00014810: 656e 2074 6869 7320 4854 5450 2055 524c  en this HTTP URL
+00014820: 2069 7320 7661 6c69 640a 2020 2020 2020   is valid.      
+00014830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014840: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+00014850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014860: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00014870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014880: 2023 2065 6c73 6520 6966 2061 7574 686f   # else if autho
+00014890: 7269 7479 2069 7320 6120 7661 6c69 6420  rity is a valid 
+000148a0: 646f 6d61 696e 206e 616d 650a 2020 2020  domain name.    
+000148b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000148c0: 2020 2020 646f 6d61 696e 4d61 7463 6820      domainMatch 
+000148d0: 3d20 7265 2e6d 6174 6368 280a 2020 2020  = re.match(.    
+000148e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000148f0: 2020 2020 2020 2020 7365 6c66 2e52 4547          self.REG
+00014900: 4558 5f47 454e 4552 4943 5f56 414c 4944  EX_GENERIC_VALID
+00014910: 5f44 4f4d 4149 4e2c 2061 7574 686f 7269  _DOMAIN, authori
+00014920: 7479 0a20 2020 2020 2020 2020 2020 2020  ty.             
+00014930: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00014940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014950: 2020 2020 2069 6620 646f 6d61 696e 4d61       if domainMa
+00014960: 7463 683a 0a20 2020 2020 2020 2020 2020  tch:.           
+00014970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014980: 2023 2069 6620 7468 6520 746f 702d 6c65   # if the top-le
+00014990: 7665 6c20 646f 6d61 696e 2072 6561 6c6c  vel domain reall
+000149a0: 7920 6578 6973 7473 0a20 2020 2020 2020  y exists.       
+000149b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000149c0: 2020 2020 2069 6620 646f 6d61 696e 4d61       if domainMa
+000149d0: 7463 682e 6772 6f75 7028 3529 2e6c 6f77  tch.group(5).low
+000149e0: 6572 2829 2069 6e20 7365 6c66 2e61 6c6c  er() in self.all
+000149f0: 6f77 6564 5f74 6c64 733a 0a20 2020 2020  owed_tlds:.     
+00014a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a10: 2020 2020 2020 2020 2020 2023 2054 6865             # The
+00014a20: 6e20 7468 6973 2048 5454 5020 5552 4c20  n this HTTP URL 
+00014a30: 6973 2076 616c 6964 0a20 2020 2020 2020  is valid.       
+00014a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a50: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00014a60: 7661 6c75 650a 2020 2020 2020 2020 2020  value.          
+00014a70: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00014a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014a90: 2320 656c 7365 2074 6869 7320 6973 2061  # else this is a
+00014aa0: 2072 656c 6174 6976 652f 6162 6272 6576   relative/abbrev
+00014ab0: 6961 7465 6420 5552 4c2c 2077 6869 6368  iated URL, which
+00014ac0: 2077 696c 6c20 7061 7273 650a 2020 2020   will parse.    
+00014ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ae0: 2320 696e 746f 2074 6865 2055 524c 2773  # into the URL's
+00014af0: 2070 6174 6820 636f 6d70 6f6e 656e 740a   path component.
+00014b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014b10: 2020 2020 7061 7468 203d 2063 6f6d 706f      path = compo
+00014b20: 6e65 6e74 732e 7061 7468 0a20 2020 2020  nents.path.     
+00014b30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014b40: 2072 656c 6174 6976 6520 6361 7365 3a20   relative case: 
+00014b50: 6966 2074 6869 7320 6973 2061 2076 616c  if this is a val
+00014b60: 6964 2070 6174 6820 2869 6620 6974 2073  id path (if it s
+00014b70: 7461 7274 7320 7769 7468 0a20 2020 2020  tarts with.     
+00014b80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014b90: 2061 2073 6c61 7368 290a 2020 2020 2020   a slash).      
+00014ba0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00014bb0: 206e 6f74 2070 6174 682e 7374 6172 7473   not path.starts
+00014bc0: 7769 7468 2822 2f22 293a 0a20 2020 2020  with("/"):.     
+00014bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014be0: 2020 2023 2061 6262 7265 7669 6174 6564     # abbreviated
+00014bf0: 2063 6173 653a 2069 6620 7765 2068 6176   case: if we hav
+00014c00: 656e 2774 2061 6c72 6561 6479 2c20 7072  en't already, pr
+00014c10: 6570 656e 6420 610a 2020 2020 2020 2020  epend a.        
+00014c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c30: 2320 7363 6865 6d65 2061 6e64 2073 6565  # scheme and see
+00014c40: 2069 6620 6974 2066 6978 6573 2074 6865   if it fixes the
+00014c50: 2070 726f 626c 656d 0a20 2020 2020 2020   problem.       
+00014c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014c70: 2069 6620 223a 2f2f 2220 6e6f 7420 696e   if "://" not in
+00014c80: 2076 616c 7565 2061 6e64 204e 6f6e 6520   value and None 
+00014c90: 696e 2073 656c 662e 616c 6c6f 7765 645f  in self.allowed_
+00014ca0: 7363 6865 6d65 733a 0a20 2020 2020 2020  schemes:.       
+00014cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014cc0: 2020 2020 2073 6368 656d 6554 6f55 7365       schemeToUse
+00014cd0: 203d 2073 656c 662e 7072 6570 656e 645f   = self.prepend_
+00014ce0: 7363 6865 6d65 206f 7220 2268 7474 7022  scheme or "http"
+00014cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014d00: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00014d10: 5f76 616c 7565 203d 2073 656c 662e 7661  _value = self.va
+00014d20: 6c69 6461 7465 2873 6368 656d 6554 6f55  lidate(schemeToU
+00014d30: 7365 202b 2022 3a2f 2f22 202b 2076 616c  se + "://" + val
+00014d40: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00014d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014d60: 7265 7475 726e 206e 6577 5f76 616c 7565  return new_value
+00014d70: 2069 6620 7365 6c66 2e70 7265 7065 6e64   if self.prepend
+00014d80: 5f73 6368 656d 6520 656c 7365 2076 616c  _scheme else val
+00014d90: 7565 0a20 2020 2020 2020 2020 2020 2020  ue.             
+00014da0: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
+00014db0: 6c75 650a 2020 2020 2020 2020 6578 6365  lue.        exce
+00014dc0: 7074 3a0a 2020 2020 2020 2020 2020 2020  pt:.            
+00014dd0: 7061 7373 0a20 2020 2020 2020 2072 6169  pass.        rai
+00014de0: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00014df0: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+00014e00: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+00014e10: 7373 6167 6529 290a 0a0a 636c 6173 7320  ssage))...class 
+00014e20: 4953 5f55 524c 2856 616c 6964 6174 6f72  IS_URL(Validator
+00014e30: 293a 0a20 2020 2022 2222 0a20 2020 2052  ):.    """.    R
+00014e40: 656a 6563 7473 2061 2055 524c 2073 7472  ejects a URL str
+00014e50: 696e 6720 6966 2061 6e79 206f 6620 7468  ing if any of th
+00014e60: 6520 666f 6c6c 6f77 696e 6720 6973 2074  e following is t
+00014e70: 7275 653a 0a0a 2020 2020 2020 202a 2054  rue:..       * T
+00014e80: 6865 2073 7472 696e 6720 6973 2065 6d70  he string is emp
+00014e90: 7479 206f 7220 4e6f 6e65 0a20 2020 2020  ty or None.     
+00014ea0: 2020 2a20 5468 6520 7374 7269 6e67 2075    * The string u
+00014eb0: 7365 7320 6368 6172 6163 7465 7273 2074  ses characters t
+00014ec0: 6861 7420 6172 6520 6e6f 7420 616c 6c6f  hat are not allo
+00014ed0: 7765 6420 696e 2061 2055 524c 0a20 2020  wed in a URL.   
+00014ee0: 2020 2020 2a20 5468 6520 7374 7269 6e67      * The string
+00014ef0: 2062 7265 616b 7320 616e 7920 6f66 2074   breaks any of t
+00014f00: 6865 2048 5454 5020 7379 6e74 6163 7469  he HTTP syntacti
+00014f10: 6320 7275 6c65 730a 2020 2020 2020 202a  c rules.       *
+00014f20: 2054 6865 2055 524c 2073 6368 656d 6520   The URL scheme 
+00014f30: 7370 6563 6966 6965 6420 2869 6620 6f6e  specified (if on
+00014f40: 6520 6973 2073 7065 6369 6669 6564 2920  e is specified) 
+00014f50: 6973 206e 6f74 2027 6874 7470 2720 6f72  is not 'http' or
+00014f60: 2027 6874 7470 7327 0a20 2020 2020 2020   'https'.       
+00014f70: 2a20 5468 6520 746f 702d 6c65 7665 6c20  * The top-level 
+00014f80: 646f 6d61 696e 2028 6966 2061 2068 6f73  domain (if a hos
+00014f90: 7420 6e61 6d65 2069 7320 7370 6563 6966  t name is specif
+00014fa0: 6965 6429 2064 6f65 7320 6e6f 7420 6578  ied) does not ex
+00014fb0: 6973 740a 0a20 2020 2028 5468 6573 6520  ist..    (These 
+00014fc0: 7275 6c65 7320 6172 6520 6261 7365 6420  rules are based 
+00014fd0: 6f6e 2052 4643 2032 3631 363a 2068 7474  on RFC 2616: htt
+00014fe0: 703a 2f2f 7777 772e 6661 7173 2e6f 7267  p://www.faqs.org
+00014ff0: 2f72 6663 732f 7266 6332 3631 362e 6874  /rfcs/rfc2616.ht
+00015000: 6d6c 290a 0a20 2020 2054 6869 7320 6675  ml)..    This fu
+00015010: 6e63 7469 6f6e 206f 6e6c 7920 6368 6563  nction only chec
+00015020: 6b73 2074 6865 2055 524c 2773 2073 796e  ks the URL's syn
+00015030: 7461 782e 2049 7420 646f 6573 206e 6f74  tax. It does not
+00015040: 2063 6865 636b 2074 6861 7420 7468 6520   check that the 
+00015050: 5552 4c0a 2020 2020 706f 696e 7473 2074  URL.    points t
+00015060: 6f20 6120 7265 616c 2064 6f63 756d 656e  o a real documen
+00015070: 742c 2066 6f72 2065 7861 6d70 6c65 2c20  t, for example, 
+00015080: 6f72 2074 6861 7420 6974 206f 7468 6572  or that it other
+00015090: 7769 7365 206d 616b 6573 2073 656e 7365  wise makes sense
+000150a0: 0a20 2020 2073 656d 616e 7469 6361 6c6c  .    semanticall
+000150b0: 792e 2054 6869 7320 6675 6e63 7469 6f6e  y. This function
+000150c0: 2064 6f65 7320 6175 746f 6d61 7469 6361   does automatica
+000150d0: 6c6c 7920 7072 6570 656e 6420 2768 7474  lly prepend 'htt
+000150e0: 703a 2f2f 2720 696e 2066 726f 6e74 0a20  p://' in front. 
+000150f0: 2020 206f 6620 6120 5552 4c20 696e 2074     of a URL in t
+00015100: 6865 2063 6173 6520 6f66 2061 6e20 6162  he case of an ab
+00015110: 6272 6576 6961 7465 6420 5552 4c20 2865  breviated URL (e
+00015120: 2e67 2e20 2767 6f6f 676c 652e 6361 2729  .g. 'google.ca')
+00015130: 2e0a 0a20 2020 2049 6620 7468 6520 7061  ...    If the pa
+00015140: 7261 6d65 7465 7220 6d6f 6465 3d27 6765  rameter mode='ge
+00015150: 6e65 7269 6327 2069 7320 7573 6564 2c20  neric' is used, 
+00015160: 7468 656e 2074 6869 7320 6675 6e63 7469  then this functi
+00015170: 6f6e 2773 2062 6568 6176 696f 720a 2020  on's behavior.  
+00015180: 2020 6368 616e 6765 732e 2049 7420 7468    changes. It th
+00015190: 656e 2072 656a 6563 7473 2061 2055 524c  en rejects a URL
+000151a0: 2073 7472 696e 6720 6966 2061 6e79 206f   string if any o
+000151b0: 6620 7468 6520 666f 6c6c 6f77 696e 6720  f the following 
+000151c0: 6973 2074 7275 653a 0a0a 2020 2020 2020  is true:..      
+000151d0: 202a 2054 6865 2073 7472 696e 6720 6973   * The string is
+000151e0: 2065 6d70 7479 206f 7220 4e6f 6e65 0a20   empty or None. 
+000151f0: 2020 2020 2020 2a20 5468 6520 7374 7269        * The stri
+00015200: 6e67 2075 7365 7320 6368 6172 6163 7465  ng uses characte
+00015210: 7273 2074 6861 7420 6172 6520 6e6f 7420  rs that are not 
+00015220: 616c 6c6f 7765 6420 696e 2061 2055 524c  allowed in a URL
+00015230: 0a20 2020 2020 2020 2a20 5468 6520 5552  .       * The UR
+00015240: 4c20 7363 6865 6d65 2073 7065 6369 6669  L scheme specifi
+00015250: 6564 2028 6966 206f 6e65 2069 7320 7370  ed (if one is sp
+00015260: 6563 6966 6965 6429 2069 7320 6e6f 7420  ecified) is not 
+00015270: 7661 6c69 640a 0a20 2020 2028 5468 6573  valid..    (Thes
+00015280: 6520 7275 6c65 7320 6172 6520 6261 7365  e rules are base
+00015290: 6420 6f6e 2052 4643 2032 3339 363a 2068  d on RFC 2396: h
+000152a0: 7474 703a 2f2f 7777 772e 6661 7173 2e6f  ttp://www.faqs.o
+000152b0: 7267 2f72 6663 732f 7266 6332 3339 362e  rg/rfcs/rfc2396.
+000152c0: 6874 6d6c 290a 0a20 2020 2054 6865 206c  html)..    The l
+000152d0: 6973 7420 6f66 2061 6c6c 6f77 6564 2073  ist of allowed s
+000152e0: 6368 656d 6573 2069 7320 6375 7374 6f6d  chemes is custom
+000152f0: 697a 6162 6c65 2077 6974 6820 7468 6520  izable with the 
+00015300: 616c 6c6f 7765 645f 7363 6865 6d65 730a  allowed_schemes.
+00015310: 2020 2020 7061 7261 6d65 7465 722e 2049      parameter. I
+00015320: 6620 796f 7520 6578 636c 7564 6520 4e6f  f you exclude No
+00015330: 6e65 2066 726f 6d20 7468 6520 6c69 7374  ne from the list
+00015340: 2c20 7468 656e 2061 6262 7265 7669 6174  , then abbreviat
+00015350: 6564 2055 524c 730a 2020 2020 286c 6163  ed URLs.    (lac
+00015360: 6b69 6e67 2061 2073 6368 656d 6520 7375  king a scheme su
+00015370: 6368 2061 7320 2768 7474 7027 2920 7769  ch as 'http') wi
+00015380: 6c6c 2062 6520 7265 6a65 6374 6564 2e0a  ll be rejected..
+00015390: 0a20 2020 2054 6865 2064 6566 6175 6c74  .    The default
+000153a0: 2070 7265 7065 6e64 6564 2073 6368 656d   prepended schem
+000153b0: 6520 6973 2063 7573 746f 6d69 7a61 626c  e is customizabl
+000153c0: 6520 7769 7468 2074 6865 2070 7265 7065  e with the prepe
+000153d0: 6e64 5f73 6368 656d 650a 2020 2020 7061  nd_scheme.    pa
+000153e0: 7261 6d65 7465 722e 2049 6620 796f 7520  rameter. If you 
+000153f0: 7365 7420 7072 6570 656e 645f 7363 6865  set prepend_sche
+00015400: 6d65 2074 6f20 4e6f 6e65 2074 6865 6e20  me to None then 
+00015410: 7072 6570 656e 6469 6e67 2077 696c 6c20  prepending will 
+00015420: 6265 0a20 2020 2064 6973 6162 6c65 642e  be.    disabled.
+00015430: 2055 524c 7320 7468 6174 2072 6571 7569   URLs that requi
+00015440: 7265 2070 7265 7065 6e64 696e 6720 746f  re prepending to
+00015450: 2070 6172 7365 2077 696c 6c20 7374 696c   parse will stil
+00015460: 6c20 6265 2061 6363 6570 7465 642c 0a20  l be accepted,. 
+00015470: 2020 2062 7574 2074 6865 2072 6574 7572     but the retur
+00015480: 6e20 7661 6c75 6520 7769 6c6c 206e 6f74  n value will not
+00015490: 2062 6520 6d6f 6469 6669 6564 2e0a 0a20   be modified... 
+000154a0: 2020 2049 535f 5552 4c20 6973 2063 6f6d     IS_URL is com
+000154b0: 7061 7469 626c 6520 7769 7468 2074 6865  patible with the
+000154c0: 2049 6e74 6572 6e61 7469 6f6e 616c 697a   Internationaliz
+000154d0: 6564 2044 6f6d 6169 6e20 4e61 6d65 2028  ed Domain Name (
+000154e0: 4944 4e29 2073 7461 6e64 6172 640a 2020  IDN) standard.  
+000154f0: 2020 7370 6563 6966 6965 6420 696e 2052    specified in R
+00015500: 4643 2033 3439 3020 2868 7474 703a 2f2f  FC 3490 (http://
+00015510: 746f 6f6c 732e 6965 7466 2e6f 7267 2f68  tools.ietf.org/h
+00015520: 746d 6c2f 7266 6333 3439 3029 2e20 4173  tml/rfc3490). As
+00015530: 2061 2072 6573 756c 742c 0a20 2020 2055   a result,.    U
+00015540: 524c 7320 6361 6e20 6265 2072 6567 756c  RLs can be regul
+00015550: 6172 2073 7472 696e 6773 206f 7220 756e  ar strings or un
+00015560: 6963 6f64 6520 7374 7269 6e67 732e 0a20  icode strings.. 
+00015570: 2020 2049 6620 7468 6520 5552 4c27 7320     If the URL's 
+00015580: 646f 6d61 696e 2063 6f6d 706f 6e65 6e74  domain component
+00015590: 2028 652e 672e 2067 6f6f 676c 652e 6361   (e.g. google.ca
+000155a0: 2920 636f 6e74 6169 6e73 206e 6f6e 2d55  ) contains non-U
+000155b0: 532d 4153 4349 490a 2020 2020 6c65 7474  S-ASCII.    lett
+000155c0: 6572 732c 2074 6865 6e20 7468 6520 646f  ers, then the do
+000155d0: 6d61 696e 2077 696c 6c20 6265 2063 6f6e  main will be con
+000155e0: 7665 7274 6564 2069 6e74 6f20 5075 6e79  verted into Puny
+000155f0: 636f 6465 2028 6465 6669 6e65 6420 696e  code (defined in
+00015600: 0a20 2020 2052 4643 2033 3439 322c 2068  .    RFC 3492, h
+00015610: 7474 703a 2f2f 746f 6f6c 732e 6965 7466  ttp://tools.ietf
+00015620: 2e6f 7267 2f68 746d 6c2f 7266 6333 3439  .org/html/rfc349
+00015630: 3229 2e20 4953 5f55 524c 2067 6f65 7320  2). IS_URL goes 
+00015640: 6120 6269 7420 6265 796f 6e64 0a20 2020  a bit beyond.   
+00015650: 2074 6865 2073 7461 6e64 6172 6473 2c20   the standards, 
+00015660: 616e 6420 616c 6c6f 7773 206e 6f6e 2d55  and allows non-U
+00015670: 532d 4153 4349 4920 6368 6172 6163 7465  S-ASCII characte
+00015680: 7273 2074 6f20 6265 2070 7265 7365 6e74  rs to be present
+00015690: 2069 6e20 7468 6520 7061 7468 0a20 2020   in the path.   
+000156a0: 2061 6e64 2071 7565 7279 2063 6f6d 706f   and query compo
+000156b0: 6e65 6e74 7320 6f66 2074 6865 2055 524c  nents of the URL
+000156c0: 2061 7320 7765 6c6c 2e20 5468 6573 6520   as well. These 
+000156d0: 6e6f 6e2d 5553 2d41 5343 4949 2063 6861  non-US-ASCII cha
+000156e0: 7261 6374 6572 7320 7769 6c6c 0a20 2020  racters will.   
+000156f0: 2062 6520 6573 6361 7065 6420 7573 696e   be escaped usin
+00015700: 6720 7468 6520 7374 616e 6461 7264 2027  g the standard '
+00015710: 2532 3027 2074 7970 6520 7379 6e74 6178  %20' type syntax
+00015720: 2e20 652e 672e 2074 6865 2075 6e69 636f  . e.g. the unico
+00015730: 6465 0a20 2020 2063 6861 7261 6374 6572  de.    character
+00015740: 2077 6974 6820 6865 7820 636f 6465 2030   with hex code 0
+00015750: 7834 6538 3620 7769 6c6c 2062 6563 6f6d  x4e86 will becom
+00015760: 6520 2725 3465 2538 3627 0a0a 2020 2020  e '%4e%86'..    
+00015770: 4172 6773 3a0a 2020 2020 2020 2020 6572  Args:.        er
+00015780: 726f 725f 6d65 7373 6167 653a 2061 2073  ror_message: a s
+00015790: 7472 696e 672c 2074 6865 2065 7272 6f72  tring, the error
+000157a0: 206d 6573 7361 6765 2074 6f20 6769 7665   message to give
+000157b0: 2074 6865 2065 6e64 2075 7365 720a 2020   the end user.  
+000157c0: 2020 2020 2020 2020 2020 6966 2074 6865            if the
+000157d0: 2055 524c 2064 6f65 7320 6e6f 7420 7661   URL does not va
+000157e0: 6c69 6461 7465 0a20 2020 2020 2020 2061  lidate.        a
+000157f0: 6c6c 6f77 6564 5f73 6368 656d 6573 3a20  llowed_schemes: 
+00015800: 6120 6c69 7374 2063 6f6e 7461 696e 696e  a list containin
+00015810: 6720 7374 7269 6e67 7320 6f72 204e 6f6e  g strings or Non
+00015820: 652e 2045 6163 6820 656c 656d 656e 740a  e. Each element.
+00015830: 2020 2020 2020 2020 2020 2020 6973 2061              is a
+00015840: 2073 6368 656d 6520 7468 6520 696e 7075   scheme the inpu
+00015850: 7474 6564 2055 524c 2069 7320 616c 6c6f  tted URL is allo
+00015860: 7765 6420 746f 2075 7365 0a20 2020 2020  wed to use.     
+00015870: 2020 2070 7265 7065 6e64 5f73 6368 656d     prepend_schem
+00015880: 653a 2061 2073 7472 696e 672c 2074 6869  e: a string, thi
+00015890: 7320 7363 6865 6d65 2069 7320 7072 6570  s scheme is prep
+000158a0: 656e 6465 6420 6966 2069 7427 730a 2020  ended if it's.  
+000158b0: 2020 2020 2020 2020 2020 6e65 6365 7373            necess
+000158c0: 6172 7920 746f 206d 616b 6520 7468 6520  ary to make the 
+000158d0: 5552 4c20 7661 6c69 640a 0a20 2020 2043  URL valid..    C
+000158e0: 6f64 6520 4578 616d 706c 6573 3a3a 0a0a  ode Examples::..
+000158f0: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00015900: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00015910: 653d 276e 616d 6527 2c20 7265 7175 6972  e='name', requir
+00015920: 6573 3d49 535f 5552 4c28 2929 0a20 2020  es=IS_URL()).   
+00015930: 2020 2020 203e 3e3e 2049 535f 5552 4c28       >>> IS_URL(
+00015940: 2928 2761 6263 2e63 6f6d 2729 0a20 2020  )('abc.com').   
+00015950: 2020 2020 2028 2768 7474 703a 2f2f 6162       ('http://ab
+00015960: 632e 636f 6d27 2c20 4e6f 6e65 290a 0a20  c.com', None).. 
+00015970: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+00015980: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
+00015990: 3d27 6e61 6d65 272c 2072 6571 7569 7265  ='name', require
+000159a0: 733d 4953 5f55 524c 286d 6f64 653d 2767  s=IS_URL(mode='g
+000159b0: 656e 6572 6963 2729 290a 2020 2020 2020  eneric')).      
+000159c0: 2020 3e3e 3e20 4953 5f55 524c 286d 6f64    >>> IS_URL(mod
+000159d0: 653d 2767 656e 6572 6963 2729 2827 6162  e='generic')('ab
+000159e0: 632e 636f 6d27 290a 2020 2020 2020 2020  c.com').        
+000159f0: 2827 6162 632e 636f 6d27 2c20 4e6f 6e65  ('abc.com', None
+00015a00: 290a 0a20 2020 2020 2020 2049 4e50 5554  )..        INPUT
+00015a10: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
+00015a20: 6e61 6d65 3d27 6e61 6d65 272c 0a20 2020  name='name',.   
+00015a30: 2020 2020 2020 2020 2072 6571 7569 7265           require
+00015a40: 733d 4953 5f55 524c 2861 6c6c 6f77 6564  s=IS_URL(allowed
+00015a50: 5f73 6368 656d 6573 3d5b 2768 7474 7073  _schemes=['https
+00015a60: 275d 2c20 7072 6570 656e 645f 7363 6865  '], prepend_sche
+00015a70: 6d65 3d27 6874 7470 7327 2929 0a20 2020  me='https')).   
+00015a80: 2020 2020 203e 3e3e 2049 535f 5552 4c28       >>> IS_URL(
+00015a90: 616c 6c6f 7765 645f 7363 6865 6d65 733d  allowed_schemes=
+00015aa0: 5b27 6874 7470 7327 5d2c 2070 7265 7065  ['https'], prepe
+00015ab0: 6e64 5f73 6368 656d 653d 2768 7474 7073  nd_scheme='https
+00015ac0: 2729 2827 6874 7470 733a 2f2f 6162 632e  ')('https://abc.
+00015ad0: 636f 6d27 290a 2020 2020 2020 2020 2827  com').        ('
+00015ae0: 6874 7470 733a 2f2f 6162 632e 636f 6d27  https://abc.com'
+00015af0: 2c20 4e6f 6e65 290a 0a20 2020 2020 2020  , None)..       
+00015b00: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
+00015b10: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
+00015b20: 272c 0a20 2020 2020 2020 2020 2020 2072  ',.            r
+00015b30: 6571 7569 7265 733d 4953 5f55 524c 2870  equires=IS_URL(p
+00015b40: 7265 7065 6e64 5f73 6368 656d 653d 2768  repend_scheme='h
+00015b50: 7474 7073 2729 290a 2020 2020 2020 2020  ttps')).        
+00015b60: 3e3e 3e20 4953 5f55 524c 2870 7265 7065  >>> IS_URL(prepe
+00015b70: 6e64 5f73 6368 656d 653d 2768 7474 7073  nd_scheme='https
+00015b80: 2729 2827 6162 632e 636f 6d27 290a 2020  ')('abc.com').  
+00015b90: 2020 2020 2020 2827 6874 7470 733a 2f2f        ('https://
+00015ba0: 6162 632e 636f 6d27 2c20 4e6f 6e65 290a  abc.com', None).
+00015bb0: 0a20 2020 2020 2020 2049 4e50 5554 285f  .        INPUT(_
+00015bc0: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
+00015bd0: 6d65 3d27 6e61 6d65 272c 0a20 2020 2020  me='name',.     
+00015be0: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
+00015bf0: 4953 5f55 524c 286d 6f64 653d 2767 656e  IS_URL(mode='gen
+00015c00: 6572 6963 272c 2061 6c6c 6f77 6564 5f73  eric', allowed_s
+00015c10: 6368 656d 6573 3d5b 2766 7470 7327 2c20  chemes=['ftps', 
+00015c20: 2768 7474 7073 275d 2c0a 2020 2020 2020  'https'],.      
+00015c30: 2020 2020 2020 2020 2020 7072 6570 656e            prepen
+00015c40: 645f 7363 6865 6d65 3d27 6874 7470 7327  d_scheme='https'
+00015c50: 2929 0a20 2020 2020 2020 203e 3e3e 2049  )).        >>> I
+00015c60: 535f 5552 4c28 6d6f 6465 3d27 6765 6e65  S_URL(mode='gene
+00015c70: 7269 6327 2c20 616c 6c6f 7765 645f 7363  ric', allowed_sc
+00015c80: 6865 6d65 733d 5b27 6674 7073 272c 2027  hemes=['ftps', '
+00015c90: 6874 7470 7327 5d2c 2070 7265 7065 6e64  https'], prepend
+00015ca0: 5f73 6368 656d 653d 2768 7474 7073 2729  _scheme='https')
+00015cb0: 2827 6874 7470 733a 2f2f 6162 632e 636f  ('https://abc.co
+00015cc0: 6d27 290a 2020 2020 2020 2020 2827 6874  m').        ('ht
+00015cd0: 7470 733a 2f2f 6162 632e 636f 6d27 2c20  tps://abc.com', 
+00015ce0: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+00015cf0: 3e20 4953 5f55 524c 286d 6f64 653d 2767  > IS_URL(mode='g
+00015d00: 656e 6572 6963 272c 2061 6c6c 6f77 6564  eneric', allowed
+00015d10: 5f73 6368 656d 6573 3d5b 2766 7470 7327  _schemes=['ftps'
+00015d20: 2c20 2768 7474 7073 272c 204e 6f6e 655d  , 'https', None]
+00015d30: 2c20 7072 6570 656e 645f 7363 6865 6d65  , prepend_scheme
+00015d40: 3d27 6874 7470 7327 2928 2761 6263 2e63  ='https')('abc.c
+00015d50: 6f6d 2729 0a20 2020 2020 2020 2028 2761  om').        ('a
+00015d60: 6263 2e63 6f6d 272c 204e 6f6e 6529 0a0a  bc.com', None)..
+00015d70: 2020 2020 4061 7574 686f 723a 204a 6f6e      @author: Jon
+00015d80: 6174 6861 6e20 4265 6e6e 0a20 2020 2022  athan Benn.    "
+00015d90: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+00015da0: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
+00015db0: 6c66 2c0a 2020 2020 2020 2020 6572 726f  lf,.        erro
+00015dc0: 725f 6d65 7373 6167 653d 2245 6e74 6572  r_message="Enter
+00015dd0: 2061 2076 616c 6964 2055 524c 222c 0a20   a valid URL",. 
+00015de0: 2020 2020 2020 206d 6f64 653d 2268 7474         mode="htt
+00015df0: 7022 2c0a 2020 2020 2020 2020 616c 6c6f  p",.        allo
+00015e00: 7765 645f 7363 6865 6d65 733d 4e6f 6e65  wed_schemes=None
+00015e10: 2c0a 2020 2020 2020 2020 7072 6570 656e  ,.        prepen
+00015e20: 645f 7363 6865 6d65 3d22 6874 7470 222c  d_scheme="http",
+00015e30: 0a20 2020 2020 2020 2061 6c6c 6f77 6564  .        allowed
+00015e40: 5f74 6c64 733d 4e6f 6e65 2c0a 2020 2020  _tlds=None,.    
+00015e50: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00015e60: 6572 726f 725f 6d65 7373 6167 6520 3d20  error_message = 
+00015e70: 6572 726f 725f 6d65 7373 6167 650a 2020  error_message.  
+00015e80: 2020 2020 2020 7365 6c66 2e6d 6f64 6520        self.mode 
+00015e90: 3d20 6d6f 6465 2e6c 6f77 6572 2829 0a20  = mode.lower(). 
+00015ea0: 2020 2020 2020 2069 6620 7365 6c66 2e6d         if self.m
+00015eb0: 6f64 6520 6e6f 7420 696e 205b 2267 656e  ode not in ["gen
+00015ec0: 6572 6963 222c 2022 6874 7470 225d 3a0a  eric", "http"]:.
+00015ed0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00015ee0: 6520 5379 6e74 6178 4572 726f 7228 2269  e SyntaxError("i
+00015ef0: 6e76 616c 6964 206d 6f64 6520 2725 7327  nvalid mode '%s'
+00015f00: 2069 6e20 4953 5f55 524c 2220 2520 7365   in IS_URL" % se
+00015f10: 6c66 2e6d 6f64 6529 0a20 2020 2020 2020  lf.mode).       
+00015f20: 2073 656c 662e 616c 6c6f 7765 645f 7363   self.allowed_sc
+00015f30: 6865 6d65 7320 3d20 616c 6c6f 7765 645f  hemes = allowed_
+00015f40: 7363 6865 6d65 730a 2020 2020 2020 2020  schemes.        
+00015f50: 6966 2061 6c6c 6f77 6564 5f74 6c64 7320  if allowed_tlds 
+00015f60: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00015f70: 2020 2020 2073 656c 662e 616c 6c6f 7765       self.allowe
+00015f80: 645f 746c 6473 203d 206f 6666 6963 6961  d_tlds = officia
+00015f90: 6c5f 746f 705f 6c65 7665 6c5f 646f 6d61  l_top_level_doma
+00015fa0: 696e 730a 2020 2020 2020 2020 656c 7365  ins.        else
+00015fb0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00015fc0: 6c66 2e61 6c6c 6f77 6564 5f74 6c64 7320  lf.allowed_tlds 
+00015fd0: 3d20 616c 6c6f 7765 645f 746c 6473 0a0a  = allowed_tlds..
+00015fe0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00015ff0: 616c 6c6f 7765 645f 7363 6865 6d65 733a  allowed_schemes:
+00016000: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00016010: 7072 6570 656e 645f 7363 6865 6d65 206e  prepend_scheme n
+00016020: 6f74 2069 6e20 7365 6c66 2e61 6c6c 6f77  ot in self.allow
+00016030: 6564 5f73 6368 656d 6573 3a0a 2020 2020  ed_schemes:.    
+00016040: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00016050: 6520 5379 6e74 6178 4572 726f 7228 0a20  e SyntaxError(. 
+00016060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016070: 2020 2022 7072 6570 656e 645f 7363 6865     "prepend_sche
+00016080: 6d65 3d27 2573 2720 6973 206e 6f74 2069  me='%s' is not i
+00016090: 6e20 616c 6c6f 7765 645f 7363 6865 6d65  n allowed_scheme
+000160a0: 733d 2573 220a 2020 2020 2020 2020 2020  s=%s".          
+000160b0: 2020 2020 2020 2020 2020 2520 2870 7265            % (pre
+000160c0: 7065 6e64 5f73 6368 656d 652c 2073 656c  pend_scheme, sel
+000160d0: 662e 616c 6c6f 7765 645f 7363 6865 6d65  f.allowed_scheme
+000160e0: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
+000160f0: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+00016100: 6966 2061 6c6c 6f77 6564 5f73 6368 656d  if allowed_schem
+00016110: 6573 2069 7320 4e6f 6e65 2c20 7468 656e  es is None, then
+00016120: 2077 6520 7769 6c6c 2064 6566 6572 2074   we will defer t
+00016130: 6573 7469 6e67 0a20 2020 2020 2020 2023  esting.        #
+00016140: 2070 7265 7065 6e64 5f73 6368 656d 6527   prepend_scheme'
+00016150: 7320 7661 6c69 6469 7479 2074 6f20 6120  s validity to a 
+00016160: 7375 622d 6d65 7468 6f64 0a0a 2020 2020  sub-method..    
+00016170: 2020 2020 7365 6c66 2e70 7265 7065 6e64      self.prepend
+00016180: 5f73 6368 656d 6520 3d20 7072 6570 656e  _scheme = prepen
+00016190: 645f 7363 6865 6d65 0a0a 2020 2020 6465  d_scheme..    de
+000161a0: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+000161b0: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+000161c0: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+000161d0: 2022 2222 0a20 2020 2020 2020 2041 7267   """.        Arg
+000161e0: 733a 0a20 2020 2020 2020 2020 2020 2076  s:.            v
+000161f0: 616c 7565 3a20 6120 756e 6963 6f64 6520  alue: a unicode 
+00016200: 6f72 2072 6567 756c 6172 2073 7472 696e  or regular strin
+00016210: 672c 2074 6865 2055 524c 2074 6f20 7661  g, the URL to va
+00016220: 6c69 6461 7465 0a0a 2020 2020 2020 2020  lidate..        
+00016230: 5265 7475 726e 733a 0a20 2020 2020 2020  Returns:.       
+00016240: 2020 2020 2061 2028 7374 7269 6e67 2c20       a (string, 
+00016250: 7374 7269 6e67 2920 7475 706c 652c 2077  string) tuple, w
+00016260: 6865 7265 2074 7570 6c65 5b30 5d20 6973  here tuple[0] is
+00016270: 2074 6865 206d 6f64 6966 6965 640a 2020   the modified.  
+00016280: 2020 2020 2020 2020 2020 696e 7075 7420            input 
+00016290: 7661 6c75 6520 616e 6420 7475 706c 655b  value and tuple[
+000162a0: 315d 2069 7320 6569 7468 6572 204e 6f6e  1] is either Non
+000162b0: 6520 2873 7563 6365 7373 2129 206f 7220  e (success!) or 
+000162c0: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
+000162d0: 7374 7269 6e67 2065 7272 6f72 5f6d 6573  string error_mes
+000162e0: 7361 6765 2e20 5468 6520 696e 7075 7420  sage. The input 
+000162f0: 7661 6c75 6520 7769 6c6c 206e 6576 6572  value will never
+00016300: 2062 6520 6d6f 6469 6669 6564 2069 6e20   be modified in 
+00016310: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
+00016320: 6361 7365 206f 6620 616e 2065 7272 6f72  case of an error
+00016330: 2e20 486f 7765 7665 722c 2069 6620 7468  . However, if th
+00016340: 6572 6520 6973 2073 7563 6365 7373 2074  ere is success t
+00016350: 6865 6e20 7468 6520 696e 7075 7420 5552  hen the input UR
+00016360: 4c0a 2020 2020 2020 2020 2020 2020 6d61  L.            ma
+00016370: 7920 6265 206d 6f64 6966 6965 6420 746f  y be modified to
+00016380: 2028 3129 2070 7265 7065 6e64 2061 2073   (1) prepend a s
+00016390: 6368 656d 652c 2061 6e64 2f6f 7220 2832  cheme, and/or (2
+000163a0: 2920 636f 6e76 6572 7420 610a 2020 2020  ) convert a.    
+000163b0: 2020 2020 2020 2020 6e6f 6e2d 636f 6d70          non-comp
+000163c0: 6c69 616e 7420 756e 6963 6f64 6520 5552  liant unicode UR
+000163d0: 4c20 696e 746f 2061 2063 6f6d 706c 6961  L into a complia
+000163e0: 6e74 2055 532d 4153 4349 4920 7665 7273  nt US-ASCII vers
+000163f0: 696f 6e2e 0a20 2020 2020 2020 2022 2222  ion..        """
+00016400: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00016410: 2e6d 6f64 6520 3d3d 2022 6765 6e65 7269  .mode == "generi
+00016420: 6322 3a0a 2020 2020 2020 2020 2020 2020  c":.            
+00016430: 7375 624d 6574 686f 6420 3d20 4953 5f47  subMethod = IS_G
+00016440: 454e 4552 4943 5f55 524c 280a 2020 2020  ENERIC_URL(.    
+00016450: 2020 2020 2020 2020 2020 2020 6572 726f              erro
+00016460: 725f 6d65 7373 6167 653d 7365 6c66 2e65  r_message=self.e
+00016470: 7272 6f72 5f6d 6573 7361 6765 2c0a 2020  rror_message,.  
+00016480: 2020 2020 2020 2020 2020 2020 2020 616c                al
+00016490: 6c6f 7765 645f 7363 6865 6d65 733d 7365  lowed_schemes=se
+000164a0: 6c66 2e61 6c6c 6f77 6564 5f73 6368 656d  lf.allowed_schem
+000164b0: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
+000164c0: 2020 2020 7072 6570 656e 645f 7363 6865      prepend_sche
+000164d0: 6d65 3d73 656c 662e 7072 6570 656e 645f  me=self.prepend_
+000164e0: 7363 6865 6d65 2c0a 2020 2020 2020 2020  scheme,.        
+000164f0: 2020 2020 290a 2020 2020 2020 2020 656c      ).        el
+00016500: 6966 2073 656c 662e 6d6f 6465 203d 3d20  if self.mode == 
+00016510: 2268 7474 7022 3a0a 2020 2020 2020 2020  "http":.        
+00016520: 2020 2020 7375 624d 6574 686f 6420 3d20      subMethod = 
+00016530: 4953 5f48 5454 505f 5552 4c28 0a20 2020  IS_HTTP_URL(.   
+00016540: 2020 2020 2020 2020 2020 2020 2065 7272               err
+00016550: 6f72 5f6d 6573 7361 6765 3d73 656c 662e  or_message=self.
+00016560: 6572 726f 725f 6d65 7373 6167 652c 0a20  error_message,. 
+00016570: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00016580: 6c6c 6f77 6564 5f73 6368 656d 6573 3d73  llowed_schemes=s
+00016590: 656c 662e 616c 6c6f 7765 645f 7363 6865  elf.allowed_sche
+000165a0: 6d65 732c 0a20 2020 2020 2020 2020 2020  mes,.           
+000165b0: 2020 2020 2070 7265 7065 6e64 5f73 6368       prepend_sch
+000165c0: 656d 653d 7365 6c66 2e70 7265 7065 6e64  eme=self.prepend
+000165d0: 5f73 6368 656d 652c 0a20 2020 2020 2020  _scheme,.       
+000165e0: 2020 2020 2020 2020 2061 6c6c 6f77 6564           allowed
+000165f0: 5f74 6c64 733d 7365 6c66 2e61 6c6c 6f77  _tlds=self.allow
+00016600: 6564 5f74 6c64 732c 0a20 2020 2020 2020  ed_tlds,.       
+00016610: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+00016620: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00016630: 2072 6169 7365 2053 796e 7461 7845 7272   raise SyntaxErr
+00016640: 6f72 2822 696e 7661 6c69 6420 6d6f 6465  or("invalid mode
+00016650: 2027 2573 2720 696e 2049 535f 5552 4c22   '%s' in IS_URL"
+00016660: 2025 2073 656c 662e 6d6f 6465 290a 0a20   % self.mode).. 
+00016670: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00016680: 616e 6365 2876 616c 7565 2c20 756e 6963  ance(value, unic
+00016690: 6f64 6554 293a 0a20 2020 2020 2020 2020  odeT):.         
+000166a0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+000166b0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+000166c0: 756e 6963 6f64 655f 746f 5f61 7363 6969  unicode_to_ascii
+000166d0: 5f75 726c 2876 616c 7565 2c20 7365 6c66  _url(value, self
+000166e0: 2e70 7265 7065 6e64 5f73 6368 656d 6529  .prepend_scheme)
+000166f0: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
+00016700: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+00016710: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+00016720: 2020 2020 2320 4966 2077 6520 6172 6520      # If we are 
+00016730: 6e6f 7420 6162 6c65 2074 6f20 636f 6e76  not able to conv
+00016740: 6572 7420 7468 6520 756e 6963 6f64 6520  ert the unicode 
+00016750: 7572 6c20 696e 746f 2061 0a20 2020 2020  url into a.     
+00016760: 2020 2020 2020 2020 2020 2023 2055 532d             # US-
+00016770: 4153 4349 4920 5552 4c2c 2074 6865 6e20  ASCII URL, then 
+00016780: 7468 6520 5552 4c20 6973 206e 6f74 2076  the URL is not v
+00016790: 616c 6964 0a20 2020 2020 2020 2020 2020  alid.           
+000167a0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+000167b0: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
+000167c0: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
+000167d0: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
+000167e0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000167f0: 7562 4d65 7468 6f64 2e76 616c 6964 6174  ubMethod.validat
+00016800: 6528 7661 6c75 652c 2072 6563 6f72 645f  e(value, record_
+00016810: 6964 290a 0a0a 636c 6173 7320 4953 5f54  id)...class IS_T
+00016820: 494d 4528 5661 6c69 6461 746f 7229 3a0a  IME(Validator):.
+00016830: 2020 2020 2222 220a 2020 2020 4578 616d      """.    Exam
+00016840: 706c 653a 0a20 2020 2020 2020 2055 7365  ple:.        Use
+00016850: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
+00016860: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+00016870: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
+00016880: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+00016890: 5f54 494d 4528 2929 0a0a 2020 2020 756e  _TIME())..    un
+000168a0: 6465 7273 7461 6e64 7320 7468 6520 666f  derstands the fo
+000168b0: 6c6c 6f77 696e 6720 666f 726d 6174 730a  llowing formats.
+000168c0: 2020 2020 6868 3a6d 6d3a 7373 205b 616d      hh:mm:ss [am
+000168d0: 2f70 6d5d 0a20 2020 2068 683a 6d6d 205b  /pm].    hh:mm [
+000168e0: 616d 2f70 6d5d 0a20 2020 2068 6820 5b61  am/pm].    hh [a
+000168f0: 6d2f 706d 5d0a 0a20 2020 205b 616d 2f70  m/pm]..    [am/p
+00016900: 6d5d 2069 7320 6f70 7469 6f6e 616c 2c20  m] is optional, 
+00016910: 273a 2720 6361 6e20 6265 2072 6570 6c61  ':' can be repla
+00016920: 6365 6420 6279 2061 6e79 206f 7468 6572  ced by any other
+00016930: 206e 6f6e 2d73 7061 6365 206e 6f6e 2d64   non-space non-d
+00016940: 6967 6974 3a3a 0a0a 2020 2020 2020 2020  igit::..        
+00016950: 3e3e 3e20 4953 5f54 494d 4528 2928 2732  >>> IS_TIME()('2
+00016960: 313a 3330 2729 0a20 2020 2020 2020 2028  1:30').        (
+00016970: 6461 7465 7469 6d65 2e74 696d 6528 3231  datetime.time(21
+00016980: 2c20 3330 292c 204e 6f6e 6529 0a20 2020  , 30), None).   
+00016990: 2020 2020 203e 3e3e 2049 535f 5449 4d45       >>> IS_TIME
+000169a0: 2829 2827 3231 2d33 3027 290a 2020 2020  ()('21-30').    
+000169b0: 2020 2020 2864 6174 6574 696d 652e 7469      (datetime.ti
+000169c0: 6d65 2832 312c 2033 3029 2c20 4e6f 6e65  me(21, 30), None
+000169d0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+000169e0: 5f54 494d 4528 2928 2732 312e 3330 2729  _TIME()('21.30')
+000169f0: 0a20 2020 2020 2020 2028 6461 7465 7469  .        (dateti
+00016a00: 6d65 2e74 696d 6528 3231 2c20 3330 292c  me.time(21, 30),
+00016a10: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+00016a20: 3e3e 2049 535f 5449 4d45 2829 2827 3231  >> IS_TIME()('21
+00016a30: 3a33 303a 3539 2729 0a20 2020 2020 2020  :30:59').       
+00016a40: 2028 6461 7465 7469 6d65 2e74 696d 6528   (datetime.time(
+00016a50: 3231 2c20 3330 2c20 3539 292c 204e 6f6e  21, 30, 59), Non
+00016a60: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+00016a70: 535f 5449 4d45 2829 2827 353a 3330 2729  S_TIME()('5:30')
+00016a80: 0a20 2020 2020 2020 2028 6461 7465 7469  .        (dateti
+00016a90: 6d65 2e74 696d 6528 352c 2033 3029 2c20  me.time(5, 30), 
+00016aa0: 4e6f 6e65 290a 2020 2020 2020 2020 3e3e  None).        >>
+00016ab0: 3e20 4953 5f54 494d 4528 2928 2735 3a33  > IS_TIME()('5:3
+00016ac0: 3020 616d 2729 0a20 2020 2020 2020 2028  0 am').        (
+00016ad0: 6461 7465 7469 6d65 2e74 696d 6528 352c  datetime.time(5,
+00016ae0: 2033 3029 2c20 4e6f 6e65 290a 2020 2020   30), None).    
+00016af0: 2020 2020 3e3e 3e20 4953 5f54 494d 4528      >>> IS_TIME(
+00016b00: 2928 2735 3a33 3020 706d 2729 0a20 2020  )('5:30 pm').   
+00016b10: 2020 2020 2028 6461 7465 7469 6d65 2e74       (datetime.t
+00016b20: 696d 6528 3137 2c20 3330 292c 204e 6f6e  ime(17, 30), Non
+00016b30: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+00016b40: 535f 5449 4d45 2829 2827 353a 3330 2077  S_TIME()('5:30 w
+00016b50: 6861 7465 7665 7227 290a 2020 2020 2020  hatever').      
+00016b60: 2020 2827 353a 3330 2077 6861 7465 7665    ('5:30 whateve
+00016b70: 7227 2c20 2765 6e74 6572 2074 696d 6520  r', 'enter time 
+00016b80: 6173 2068 683a 6d6d 3a73 7320 2873 6563  as hh:mm:ss (sec
+00016b90: 6f6e 6473 2c20 616d 2c20 706d 206f 7074  onds, am, pm opt
+00016ba0: 696f 6e61 6c29 2729 0a20 2020 2020 2020  ional)').       
+00016bb0: 203e 3e3e 2049 535f 5449 4d45 2829 2827   >>> IS_TIME()('
+00016bc0: 353a 3330 2032 3027 290a 2020 2020 2020  5:30 20').      
+00016bd0: 2020 2827 353a 3330 2032 3027 2c20 2765    ('5:30 20', 'e
+00016be0: 6e74 6572 2074 696d 6520 6173 2068 683a  nter time as hh:
+00016bf0: 6d6d 3a73 7320 2873 6563 6f6e 6473 2c20  mm:ss (seconds, 
+00016c00: 616d 2c20 706d 206f 7074 696f 6e61 6c29  am, pm optional)
+00016c10: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
+00016c20: 535f 5449 4d45 2829 2827 3234 3a33 3027  S_TIME()('24:30'
+00016c30: 290a 2020 2020 2020 2020 2827 3234 3a33  ).        ('24:3
+00016c40: 3027 2c20 2765 6e74 6572 2074 696d 6520  0', 'enter time 
+00016c50: 6173 2068 683a 6d6d 3a73 7320 2873 6563  as hh:mm:ss (sec
+00016c60: 6f6e 6473 2c20 616d 2c20 706d 206f 7074  onds, am, pm opt
+00016c70: 696f 6e61 6c29 2729 0a20 2020 2020 2020  ional)').       
+00016c80: 203e 3e3e 2049 535f 5449 4d45 2829 2827   >>> IS_TIME()('
+00016c90: 3231 3a36 3027 290a 2020 2020 2020 2020  21:60').        
+00016ca0: 2827 3231 3a36 3027 2c20 2765 6e74 6572  ('21:60', 'enter
+00016cb0: 2074 696d 6520 6173 2068 683a 6d6d 3a73   time as hh:mm:s
+00016cc0: 7320 2873 6563 6f6e 6473 2c20 616d 2c20  s (seconds, am, 
+00016cd0: 706d 206f 7074 696f 6e61 6c29 2729 0a20  pm optional)'). 
+00016ce0: 2020 2020 2020 203e 3e3e 2049 535f 5449         >>> IS_TI
+00016cf0: 4d45 2829 2827 3231 3a33 303a 3a27 290a  ME()('21:30::').
+00016d00: 2020 2020 2020 2020 2827 3231 3a33 303a          ('21:30:
+00016d10: 3a27 2c20 2765 6e74 6572 2074 696d 6520  :', 'enter time 
+00016d20: 6173 2068 683a 6d6d 3a73 7320 2873 6563  as hh:mm:ss (sec
+00016d30: 6f6e 6473 2c20 616d 2c20 706d 206f 7074  onds, am, pm opt
+00016d40: 696f 6e61 6c29 2729 0a20 2020 2020 2020  ional)').       
+00016d50: 203e 3e3e 2049 535f 5449 4d45 2829 2827   >>> IS_TIME()('
+00016d60: 2729 0a20 2020 2020 2020 2028 2727 2c20  ').        ('', 
+00016d70: 2765 6e74 6572 2074 696d 6520 6173 2068  'enter time as h
+00016d80: 683a 6d6d 3a73 7320 2873 6563 6f6e 6473  h:mm:ss (seconds
+00016d90: 2c20 616d 2c20 706d 206f 7074 696f 6e61  , am, pm optiona
+00016da0: 6c29 2729 c3b9 0a0a 2020 2020 2222 220a  l)')....    """.
+00016db0: 0a20 2020 2052 4547 4558 5f54 494d 4520  .    REGEX_TIME 
+00016dc0: 3d20 2228 283f 503c 683e 5b30 2d39 5d2b  = "((?P<h>[0-9]+
+00016dd0: 2929 285b 5e30 2d39 205d 2b28 3f50 3c6d  ))([^0-9 ]+(?P<m
+00016de0: 3e5b 302d 3920 5d2b 2929 3f28 5b5e 302d  >[0-9 ]+))?([^0-
+00016df0: 3961 7020 5d2b 283f 503c 733e 5b30 2d39  9ap ]+(?P<s>[0-9
+00016e00: 5d2a 2929 3f28 283f 503c 643e 5b61 705d  ]*))?((?P<d>[ap]
+00016e10: 6d29 293f 220a 0a20 2020 2064 6566 205f  m))?"..    def _
+00016e20: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+00016e30: 2073 656c 662c 2065 7272 6f72 5f6d 6573   self, error_mes
+00016e40: 7361 6765 3d22 456e 7465 7220 7469 6d65  sage="Enter time
+00016e50: 2061 7320 6868 3a6d 6d3a 7373 2028 7365   as hh:mm:ss (se
+00016e60: 636f 6e64 732c 2061 6d2c 2070 6d20 6f70  conds, am, pm op
+00016e70: 7469 6f6e 616c 2922 0a20 2020 2029 3a0a  tional)".    ):.
+00016e80: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00016e90: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+00016ea0: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
+00016eb0: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+00016ec0: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+00016ed0: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00016ee0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00016ef0: 2020 2020 6976 616c 7565 203d 2076 616c      ivalue = val
+00016f00: 7565 0a20 2020 2020 2020 2020 2020 2076  ue.            v
+00016f10: 616c 7565 203d 2072 652e 6d61 7463 6828  alue = re.match(
+00016f20: 7365 6c66 2e52 4547 4558 5f54 494d 452c  self.REGEX_TIME,
+00016f30: 2076 616c 7565 2e6c 6f77 6572 2829 290a   value.lower()).
+00016f40: 2020 2020 2020 2020 2020 2020 2868 2c20              (h, 
+00016f50: 6d2c 2073 2920 3d20 2869 6e74 2876 616c  m, s) = (int(val
+00016f60: 7565 2e67 726f 7570 2822 6822 2929 2c20  ue.group("h")), 
+00016f70: 302c 2030 290a 2020 2020 2020 2020 2020  0, 0).          
+00016f80: 2020 6966 206e 6f74 2076 616c 7565 2e67    if not value.g
+00016f90: 726f 7570 2822 6d22 2920 6973 204e 6f6e  roup("m") is Non
+00016fa0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00016fb0: 2020 206d 203d 2069 6e74 2876 616c 7565     m = int(value
+00016fc0: 2e67 726f 7570 2822 6d22 2929 0a20 2020  .group("m")).   
+00016fd0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+00016fe0: 7661 6c75 652e 6772 6f75 7028 2273 2229  value.group("s")
+00016ff0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00017000: 2020 2020 2020 2020 2020 7320 3d20 696e            s = in
+00017010: 7428 7661 6c75 652e 6772 6f75 7028 2273  t(value.group("s
+00017020: 2229 290a 2020 2020 2020 2020 2020 2020  ")).            
+00017030: 6966 2076 616c 7565 2e67 726f 7570 2822  if value.group("
+00017040: 6422 2920 3d3d 2022 706d 2220 616e 6420  d") == "pm" and 
+00017050: 3020 3c20 6820 3c20 3132 3a0a 2020 2020  0 < h < 12:.    
+00017060: 2020 2020 2020 2020 2020 2020 6820 2b3d              h +=
+00017070: 2031 320a 2020 2020 2020 2020 2020 2020   12.            
+00017080: 6966 2076 616c 7565 2e67 726f 7570 2822  if value.group("
+00017090: 6422 2920 3d3d 2022 616d 2220 616e 6420  d") == "am" and 
+000170a0: 6820 3d3d 2031 323a 0a20 2020 2020 2020  h == 12:.       
+000170b0: 2020 2020 2020 2020 2068 203d 2030 0a20           h = 0. 
+000170c0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+000170d0: 7420 2868 2069 6e20 7261 6e67 6528 3234  t (h in range(24
+000170e0: 2920 616e 6420 6d20 696e 2072 616e 6765  ) and m in range
+000170f0: 2836 3029 2061 6e64 2073 2069 6e20 7261  (60) and s in ra
+00017100: 6e67 6528 3630 2929 3a0a 2020 2020 2020  nge(60)):.      
+00017110: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00017120: 5661 6c75 6545 7272 6f72 280a 2020 2020  ValueError(.    
+00017130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017140: 2248 6f75 7273 206f 7220 6d69 6e75 7465  "Hours or minute
+00017150: 7320 6f72 2073 6563 6f6e 6473 2061 7265  s or seconds are
+00017160: 206f 7574 7369 6465 206f 6620 616c 6c6f   outside of allo
+00017170: 7765 6420 7261 6e67 6522 0a20 2020 2020  wed range".     
+00017180: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00017190: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+000171a0: 2064 6174 6574 696d 652e 7469 6d65 2868   datetime.time(h
+000171b0: 2c20 6d2c 2073 290a 2020 2020 2020 2020  , m, s).        
+000171c0: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+000171d0: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
+000171e0: 4578 6365 7074 696f 6e3a 0a20 2020 2020  Exception:.     
+000171f0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00017200: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
+00017210: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+00017220: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+00017230: 290a 0a0a 2320 4120 5554 4320 636c 6173  )...# A UTC clas
+00017240: 732e 0a63 6c61 7373 2055 5443 2864 6174  s..class UTC(dat
+00017250: 6574 696d 652e 747a 696e 666f 293a 0a20  etime.tzinfo):. 
+00017260: 2020 2022 2222 5554 4322 2222 0a0a 2020     """UTC"""..  
+00017270: 2020 5a45 524f 203d 2064 6174 6574 696d    ZERO = datetim
+00017280: 652e 7469 6d65 6465 6c74 6128 3029 0a0a  e.timedelta(0)..
+00017290: 2020 2020 6465 6620 7574 636f 6666 7365      def utcoffse
+000172a0: 7428 7365 6c66 2c20 6474 293a 0a20 2020  t(self, dt):.   
+000172b0: 2020 2020 2072 6574 7572 6e20 5554 432e       return UTC.
+000172c0: 5a45 524f 0a0a 2020 2020 6465 6620 747a  ZERO..    def tz
+000172d0: 6e61 6d65 2873 656c 662c 2064 7429 3a0a  name(self, dt):.
+000172e0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
+000172f0: 5554 4322 0a0a 2020 2020 6465 6620 6473  UTC"..    def ds
+00017300: 7428 7365 6c66 2c20 6474 293a 0a20 2020  t(self, dt):.   
+00017310: 2020 2020 2072 6574 7572 6e20 5554 432e       return UTC.
+00017320: 5a45 524f 0a0a 0a75 7463 203d 2055 5443  ZERO...utc = UTC
+00017330: 2829 0a0a 0a63 6c61 7373 2049 535f 4441  ()...class IS_DA
+00017340: 5445 2856 616c 6964 6174 6f72 293a 0a20  TE(Validator):. 
+00017350: 2020 2022 2222 0a20 2020 2045 7861 6d70     """.    Examp
+00017360: 6c65 733a 0a20 2020 2020 2020 2055 7365  les:.        Use
+00017370: 2061 733a 3a0a 0a20 2020 2020 2020 2020   as::..         
+00017380: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+00017390: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
+000173a0: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+000173b0: 5f44 4154 4528 2929 0a0a 2020 2020 6461  _DATE())..    da
+000173c0: 7465 2068 6173 2074 6f20 6265 2069 6e20  te has to be in 
+000173d0: 7468 6520 4953 4f38 3936 3020 666f 726d  the ISO8960 form
+000173e0: 6174 2059 5959 592d 4d4d 2d44 440a 2020  at YYYY-MM-DD.  
+000173f0: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
+00017400: 5f69 6e69 745f 5f28 7365 6c66 2c20 666f  _init__(self, fo
+00017410: 726d 6174 3d22 2559 2d25 6d2d 2564 222c  rmat="%Y-%m-%d",
+00017420: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+00017430: 456e 7465 7220 6461 7465 2061 7320 2528  Enter date as %(
+00017440: 666f 726d 6174 2973 2229 3a0a 2020 2020  format)s"):.    
+00017450: 2020 2020 7365 6c66 2e66 6f72 6d61 7420      self.format 
+00017460: 3d20 7365 6c66 2e74 7261 6e73 6c61 746f  = self.translato
+00017470: 7228 666f 726d 6174 290a 2020 2020 2020  r(format).      
+00017480: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
+00017490: 7361 6765 203d 2073 7472 2865 7272 6f72  sage = str(error
+000174a0: 5f6d 6573 7361 6765 290a 2020 2020 2020  _message).      
+000174b0: 2020 7365 6c66 2e65 7874 7265 6d65 7320    self.extremes 
+000174c0: 3d20 7b7d 0a0a 2020 2020 6465 6620 7661  = {}..    def va
+000174d0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+000174e0: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+000174f0: 6e65 293a 0a20 2020 2020 2020 2069 6620  ne):.        if 
+00017500: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
+00017510: 2c20 6461 7465 7469 6d65 2e64 6174 6529  , datetime.date)
+00017520: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00017530: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
+00017540: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00017550: 2020 2020 2879 2c20 6d2c 2064 2c20 6868      (y, m, d, hh
+00017560: 2c20 6d6d 2c20 7373 2c20 7430 2c20 7431  , mm, ss, t0, t1
+00017570: 2c20 7432 2920 3d20 7469 6d65 2e73 7472  , t2) = time.str
+00017580: 7074 696d 6528 7661 6c75 652c 2073 7472  ptime(value, str
+00017590: 2873 656c 662e 666f 726d 6174 2929 0a20  (self.format)). 
+000175a0: 2020 2020 2020 2020 2020 2076 616c 7565             value
+000175b0: 203d 2064 6174 6574 696d 652e 6461 7465   = datetime.date
+000175c0: 2879 2c20 6d2c 2064 290a 2020 2020 2020  (y, m, d).      
+000175d0: 2020 2020 2020 7265 7475 726e 2076 616c        return val
+000175e0: 7565 0a20 2020 2020 2020 2065 7863 6570  ue.        excep
+000175f0: 743a 0a20 2020 2020 2020 2020 2020 2073  t:.            s
+00017600: 656c 662e 6578 7472 656d 6573 2e75 7064  elf.extremes.upd
+00017610: 6174 6528 4953 5f44 4154 4554 494d 452e  ate(IS_DATETIME.
+00017620: 6e69 6365 2873 656c 662e 666f 726d 6174  nice(self.format
+00017630: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
+00017640: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+00017650: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
+00017660: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
+00017670: 6d65 7373 6167 6529 2025 2073 656c 662e  message) % self.
+00017680: 6578 7472 656d 6573 290a 0a20 2020 2064  extremes)..    d
+00017690: 6566 2066 6f72 6d61 7474 6572 2873 656c  ef formatter(sel
+000176a0: 662c 2076 616c 7565 293a 0a20 2020 2020  f, value):.     
+000176b0: 2020 2069 6620 7661 6c75 6520 6973 204e     if value is N
+000176c0: 6f6e 6520 6f72 2076 616c 7565 203d 3d20  one or value == 
+000176d0: 2222 3a0a 2020 2020 2020 2020 2020 2020  "":.            
+000176e0: 7265 7475 726e 204e 6f6e 650a 2020 2020  return None.    
+000176f0: 2020 2020 666f 726d 6174 203d 2073 656c      format = sel
+00017700: 662e 666f 726d 6174 0a20 2020 2020 2020  f.format.       
+00017710: 2079 6561 7220 3d20 7661 6c75 652e 7965   year = value.ye
+00017720: 6172 0a20 2020 2020 2020 2079 203d 2022  ar.        y = "
+00017730: 252e 3469 2220 2520 7965 6172 0a20 2020  %.4i" % year.   
+00017740: 2020 2020 2066 6f72 6d61 7420 3d20 666f       format = fo
+00017750: 726d 6174 2e72 6570 6c61 6365 2822 2579  rmat.replace("%y
+00017760: 222c 2079 5b2d 323a 5d29 0a20 2020 2020  ", y[-2:]).     
+00017770: 2020 2066 6f72 6d61 7420 3d20 666f 726d     format = form
+00017780: 6174 2e72 6570 6c61 6365 2822 2559 222c  at.replace("%Y",
+00017790: 2079 290a 2020 2020 2020 2020 6966 2079   y).        if y
+000177a0: 6561 7220 3c20 3139 3030 3a0a 2020 2020  ear < 1900:.    
+000177b0: 2020 2020 2020 2020 7965 6172 203d 2032          year = 2
+000177c0: 3030 300a 2020 2020 2020 2020 6420 3d20  000.        d = 
+000177d0: 6461 7465 7469 6d65 2e64 6174 6528 7965  datetime.date(ye
+000177e0: 6172 2c20 7661 6c75 652e 6d6f 6e74 682c  ar, value.month,
+000177f0: 2076 616c 7565 2e64 6179 290a 2020 2020   value.day).    
+00017800: 2020 2020 7265 7475 726e 2064 2e73 7472      return d.str
+00017810: 6674 696d 6528 666f 726d 6174 290a 0a0a  ftime(format)...
+00017820: 636c 6173 7320 4953 5f44 4154 4554 494d  class IS_DATETIM
+00017830: 4528 5661 6c69 6461 746f 7229 3a0a 2020  E(Validator):.  
+00017840: 2020 2222 220a 2020 2020 4578 616d 706c    """.    Exampl
+00017850: 6573 3a0a 2020 2020 2020 2020 5573 6520  es:.        Use 
+00017860: 6173 3a3a 0a0a 2020 2020 2020 2020 2020  as::..          
+00017870: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
+00017880: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
+00017890: 6527 2c20 7265 7175 6972 6573 3d49 535f  e', requires=IS_
+000178a0: 4441 5445 5449 4d45 2829 290a 0a20 2020  DATETIME())..   
+000178b0: 2064 6174 6574 696d 6520 6861 7320 746f   datetime has to
+000178c0: 2062 6520 696e 2074 6865 2049 534f 3839   be in the ISO89
+000178d0: 3630 2066 6f72 6d61 7420 5959 5959 2d4d  60 format YYYY-M
+000178e0: 4d2d 4444 2068 683a 6d6d 3a73 730a 2020  M-DD hh:mm:ss.  
+000178f0: 2020 7469 6d65 7a6f 6d65 206d 7573 7420    timezome must 
+00017900: 6265 204e 6f6e 6520 6f72 2061 2070 7974  be None or a pyt
+00017910: 7a2e 7469 6d65 7a6f 6e65 2822 416d 6572  z.timezone("Amer
+00017920: 6963 612f 4368 6963 6167 6f22 2920 6f62  ica/Chicago") ob
+00017930: 6a65 6374 0a20 2020 2022 2222 0a0a 2020  ject.    """..  
+00017940: 2020 6973 6f64 6174 6574 696d 6520 3d20    isodatetime = 
+00017950: 2225 592d 256d 2d25 6420 2548 3a25 4d3a  "%Y-%m-%d %H:%M:
+00017960: 2553 220a 0a20 2020 2040 7374 6174 6963  %S"..    @static
+00017970: 6d65 7468 6f64 0a20 2020 2064 6566 206e  method.    def n
+00017980: 6963 6528 666f 726d 6174 293a 0a20 2020  ice(format):.   
+00017990: 2020 2020 2063 6f64 6520 3d20 280a 2020       code = (.  
+000179a0: 2020 2020 2020 2020 2020 2822 2559 222c            ("%Y",
+000179b0: 2022 3139 3633 2229 2c0a 2020 2020 2020   "1963"),.      
+000179c0: 2020 2020 2020 2822 2579 222c 2022 3633        ("%y", "63
+000179d0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+000179e0: 2822 2564 222c 2022 3238 2229 2c0a 2020  ("%d", "28"),.  
+000179f0: 2020 2020 2020 2020 2020 2822 256d 222c            ("%m",
+00017a00: 2022 3038 2229 2c0a 2020 2020 2020 2020   "08"),.        
+00017a10: 2020 2020 2822 2562 222c 2022 4175 6722      ("%b", "Aug"
+00017a20: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+00017a30: 2225 4222 2c20 2241 7567 7573 7422 292c  "%B", "August"),
+00017a40: 0a20 2020 2020 2020 2020 2020 2028 2225  .            ("%
+00017a50: 4822 2c20 2231 3422 292c 0a20 2020 2020  H", "14"),.     
+00017a60: 2020 2020 2020 2028 2225 4922 2c20 2230         ("%I", "0
+00017a70: 3222 292c 0a20 2020 2020 2020 2020 2020  2"),.           
+00017a80: 2028 2225 7022 2c20 2250 4d22 292c 0a20   ("%p", "PM"),. 
+00017a90: 2020 2020 2020 2020 2020 2028 2225 4d22             ("%M"
+00017aa0: 2c20 2233 3022 292c 0a20 2020 2020 2020  , "30"),.       
+00017ab0: 2020 2020 2028 2225 5322 2c20 2235 3922       ("%S", "59"
+00017ac0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
+00017ad0: 2020 2020 2066 6f72 2061 2c20 6220 696e       for a, b in
+00017ae0: 2063 6f64 653a 0a20 2020 2020 2020 2020   code:.         
+00017af0: 2020 2066 6f72 6d61 7420 3d20 666f 726d     format = form
+00017b00: 6174 2e72 6570 6c61 6365 2861 2c20 6229  at.replace(a, b)
+00017b10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00017b20: 6469 6374 2866 6f72 6d61 743d 666f 726d  dict(format=form
+00017b30: 6174 290a 0a20 2020 2064 6566 205f 5f69  at)..    def __i
+00017b40: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+00017b50: 656c 662c 0a20 2020 2020 2020 2066 6f72  elf,.        for
+00017b60: 6d61 743d 2225 592d 256d 2d25 6420 2548  mat="%Y-%m-%d %H
+00017b70: 3a25 4d3a 2553 222c 0a20 2020 2020 2020  :%M:%S",.       
+00017b80: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
+00017b90: 456e 7465 7220 6461 7465 2061 6e64 2074  Enter date and t
+00017ba0: 696d 6520 6173 2025 2866 6f72 6d61 7429  ime as %(format)
+00017bb0: 7322 2c0a 2020 2020 2020 2020 7469 6d65  s",.        time
+00017bc0: 7a6f 6e65 3d4e 6f6e 652c 0a20 2020 2029  zone=None,.    )
+00017bd0: 3a0a 2020 2020 2020 2020 7365 6c66 2e66  :.        self.f
+00017be0: 6f72 6d61 7420 3d20 7365 6c66 2e74 7261  ormat = self.tra
+00017bf0: 6e73 6c61 746f 7228 666f 726d 6174 290a  nslator(format).
+00017c00: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00017c10: 6f72 5f6d 6573 7361 6765 203d 2073 7472  or_message = str
+00017c20: 2865 7272 6f72 5f6d 6573 7361 6765 290a  (error_message).
+00017c30: 2020 2020 2020 2020 7365 6c66 2e65 7874          self.ext
+00017c40: 7265 6d65 7320 3d20 7b7d 0a20 2020 2020  remes = {}.     
+00017c50: 2020 2073 656c 662e 7469 6d65 7a6f 6e65     self.timezone
+00017c60: 203d 2074 696d 657a 6f6e 650a 0a20 2020   = timezone..   
+00017c70: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
+00017c80: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
+00017c90: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
+00017ca0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00017cb0: 6528 7661 6c75 652c 2064 6174 6574 696d  e(value, datetim
+00017cc0: 652e 6461 7465 7469 6d65 293a 0a20 2020  e.datetime):.   
+00017cd0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00017ce0: 7661 6c75 650a 2020 2020 2020 2020 7472  value.        tr
+00017cf0: 793a 0a20 2020 2020 2020 2020 2020 2069  y:.            i
+00017d00: 6620 7365 6c66 2e66 6f72 6d61 7420 3d3d  f self.format ==
+00017d10: 2073 656c 662e 6973 6f64 6174 6574 696d   self.isodatetim
+00017d20: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00017d30: 2020 2076 616c 7565 203d 2076 616c 7565     value = value
+00017d40: 2e72 6570 6c61 6365 2822 5422 2c20 2220  .replace("T", " 
+00017d50: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00017d60: 2020 2069 6620 6c65 6e28 7661 6c75 6529     if len(value)
+00017d70: 203d 3d20 3136 3a0a 2020 2020 2020 2020   == 16:.        
+00017d80: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+00017d90: 6520 2b3d 2022 3a30 3022 0a20 2020 2020  e += ":00".     
+00017da0: 2020 2020 2020 2028 792c 206d 2c20 642c         (y, m, d,
+00017db0: 2068 682c 206d 6d2c 2073 732c 2074 302c   hh, mm, ss, t0,
+00017dc0: 2074 312c 2074 3229 203d 2074 696d 652e   t1, t2) = time.
+00017dd0: 7374 7270 7469 6d65 2876 616c 7565 2c20  strptime(value, 
+00017de0: 7374 7228 7365 6c66 2e66 6f72 6d61 7429  str(self.format)
+00017df0: 290a 2020 2020 2020 2020 2020 2020 7661  ).            va
+00017e00: 6c75 6520 3d20 6461 7465 7469 6d65 2e64  lue = datetime.d
+00017e10: 6174 6574 696d 6528 792c 206d 2c20 642c  atetime(y, m, d,
+00017e20: 2068 682c 206d 6d2c 2073 7329 0a20 2020   hh, mm, ss).   
+00017e30: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
+00017e40: 2e74 696d 657a 6f6e 6520 6973 206e 6f74  .timezone is not
+00017e50: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00017e60: 2020 2020 2020 2023 2054 4f44 4f3a 2068         # TODO: h
+00017e70: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+00017e80: 6d2f 7765 6232 7079 2f77 6562 3270 792f  m/web2py/web2py/
+00017e90: 6973 7375 6573 2f31 3039 3420 2874 656d  issues/1094 (tem
+00017ea0: 706f 7261 7279 2073 6f6c 7574 696f 6e29  porary solution)
+00017eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017ec0: 2076 616c 7565 203d 2028 0a20 2020 2020   value = (.     
+00017ed0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00017ee0: 656c 662e 7469 6d65 7a6f 6e65 2e6c 6f63  elf.timezone.loc
+00017ef0: 616c 697a 6528 7661 6c75 6529 2e61 7374  alize(value).ast
+00017f00: 696d 657a 6f6e 6528 7574 6329 2e72 6570  imezone(utc).rep
+00017f10: 6c61 6365 2874 7a69 6e66 6f3d 4e6f 6e65  lace(tzinfo=None
+00017f20: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00017f30: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00017f40: 7265 7475 726e 2076 616c 7565 0a20 2020  return value.   
+00017f50: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
+00017f60: 2020 2020 2020 2020 2073 656c 662e 6578           self.ex
+00017f70: 7472 656d 6573 2e75 7064 6174 6528 4953  tremes.update(IS
+00017f80: 5f44 4154 4554 494d 452e 6e69 6365 2873  _DATETIME.nice(s
+00017f90: 656c 662e 666f 726d 6174 2929 0a20 2020  elf.format)).   
+00017fa0: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00017fb0: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+00017fc0: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+00017fd0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+00017fe0: 6529 2025 2073 656c 662e 6578 7472 656d  e) % self.extrem
+00017ff0: 6573 290a 0a20 2020 2064 6566 2066 6f72  es)..    def for
+00018000: 6d61 7474 6572 2873 656c 662c 2076 616c  matter(self, val
+00018010: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
+00018020: 7661 6c75 6520 6973 204e 6f6e 6520 6f72  value is None or
+00018030: 2076 616c 7565 203d 3d20 2222 3a0a 2020   value == "":.  
+00018040: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00018050: 204e 6f6e 650a 2020 2020 2020 2020 666f   None.        fo
+00018060: 726d 6174 203d 2073 656c 662e 666f 726d  rmat = self.form
+00018070: 6174 0a20 2020 2020 2020 2079 6561 7220  at.        year 
+00018080: 3d20 7661 6c75 652e 7965 6172 0a20 2020  = value.year.   
+00018090: 2020 2020 2079 203d 2022 252e 3469 2220       y = "%.4i" 
+000180a0: 2520 7965 6172 0a20 2020 2020 2020 2066  % year.        f
+000180b0: 6f72 6d61 7420 3d20 666f 726d 6174 2e72  ormat = format.r
+000180c0: 6570 6c61 6365 2822 2579 222c 2079 5b2d  eplace("%y", y[-
+000180d0: 323a 5d29 0a20 2020 2020 2020 2066 6f72  2:]).        for
+000180e0: 6d61 7420 3d20 666f 726d 6174 2e72 6570  mat = format.rep
+000180f0: 6c61 6365 2822 2559 222c 2079 290a 2020  lace("%Y", y).  
+00018100: 2020 2020 2020 6966 2079 6561 7220 3c20        if year < 
+00018110: 3139 3030 3a0a 2020 2020 2020 2020 2020  1900:.          
+00018120: 2020 7965 6172 203d 2032 3030 300a 2020    year = 2000.  
+00018130: 2020 2020 2020 6420 3d20 6461 7465 7469        d = dateti
+00018140: 6d65 2e64 6174 6574 696d 6528 0a20 2020  me.datetime(.   
+00018150: 2020 2020 2020 2020 2079 6561 722c 2076           year, v
+00018160: 616c 7565 2e6d 6f6e 7468 2c20 7661 6c75  alue.month, valu
+00018170: 652e 6461 792c 2076 616c 7565 2e68 6f75  e.day, value.hou
+00018180: 722c 2076 616c 7565 2e6d 696e 7574 652c  r, value.minute,
+00018190: 2076 616c 7565 2e73 6563 6f6e 640a 2020   value.second.  
+000181a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000181b0: 6966 2073 656c 662e 7469 6d65 7a6f 6e65  if self.timezone
+000181c0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000181d0: 2020 2020 2020 2020 2020 6420 3d20 642e            d = d.
+000181e0: 7265 706c 6163 6528 747a 696e 666f 3d75  replace(tzinfo=u
+000181f0: 7463 292e 6173 7469 6d65 7a6f 6e65 2873  tc).astimezone(s
+00018200: 656c 662e 7469 6d65 7a6f 6e65 290a 2020  elf.timezone).  
+00018210: 2020 2020 2020 7265 7475 726e 2064 2e73        return d.s
+00018220: 7472 6674 696d 6528 666f 726d 6174 290a  trftime(format).
+00018230: 0a0a 636c 6173 7320 4953 5f44 4154 455f  ..class IS_DATE_
+00018240: 494e 5f52 414e 4745 2849 535f 4441 5445  IN_RANGE(IS_DATE
+00018250: 293a 0a20 2020 2022 2222 0a20 2020 2045  ):.    """.    E
+00018260: 7861 6d70 6c65 733a 0a20 2020 2020 2020  xamples:.       
+00018270: 2055 7365 2061 733a 3a0a 0a20 2020 2020   Use as::..     
+00018280: 2020 2020 2020 203e 3e3e 2076 203d 2049         >>> v = I
+00018290: 535f 4441 5445 5f49 4e5f 5241 4e47 4528  S_DATE_IN_RANGE(
+000182a0: 6d69 6e69 6d75 6d3d 6461 7465 7469 6d65  minimum=datetime
+000182b0: 2e64 6174 6528 3230 3038 2c31 2c31 292c  .date(2008,1,1),
+000182c0: 205c 0a20 2020 2020 2020 2020 2020 2020   \.             
+000182d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000182e0: 2020 2020 2020 2020 6d61 7869 6d75 6d3d          maximum=
+000182f0: 6461 7465 7469 6d65 2e64 6174 6528 3230  datetime.date(20
+00018300: 3039 2c31 322c 3331 292c 205c 0a20 2020  09,12,31), \.   
+00018310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018330: 2020 666f 726d 6174 3d22 256d 2f25 642f    format="%m/%d/
+00018340: 2559 222c 6572 726f 725f 6d65 7373 6167  %Y",error_messag
+00018350: 653d 224f 6f70 7322 290a 0a20 2020 2020  e="Oops")..     
+00018360: 2020 2020 2020 203e 3e3e 2076 2827 3033         >>> v('03
+00018370: 2f30 332f 3230 3038 2729 0a20 2020 2020  /03/2008').     
+00018380: 2020 2020 2020 2028 6461 7465 7469 6d65         (datetime
+00018390: 2e64 6174 6528 3230 3038 2c20 332c 2033  .date(2008, 3, 3
+000183a0: 292c 204e 6f6e 6529 0a0a 2020 2020 2020  ), None)..      
+000183b0: 2020 2020 2020 3e3e 3e20 7628 2730 332f        >>> v('03/
+000183c0: 3033 2f32 3031 3027 290a 2020 2020 2020  03/2010').      
+000183d0: 2020 2020 2020 2827 3033 2f30 332f 3230        ('03/03/20
+000183e0: 3130 272c 2027 6f6f 7073 2729 0a0a 2020  10', 'oops')..  
+000183f0: 2020 2020 2020 2020 2020 3e3e 3e20 7628            >>> v(
+00018400: 6461 7465 7469 6d65 2e64 6174 6528 3230  datetime.date(20
+00018410: 3038 2c33 2c33 2929 0a20 2020 2020 2020  08,3,3)).       
+00018420: 2020 2020 2028 6461 7465 7469 6d65 2e64       (datetime.d
+00018430: 6174 6528 3230 3038 2c20 332c 2033 292c  ate(2008, 3, 3),
+00018440: 204e 6f6e 6529 0a0a 2020 2020 2020 2020   None)..        
+00018450: 2020 2020 3e3e 3e20 7628 6461 7465 7469      >>> v(dateti
+00018460: 6d65 2e64 6174 6528 3230 3130 2c33 2c33  me.date(2010,3,3
+00018470: 2929 0a20 2020 2020 2020 2020 2020 2028  )).            (
+00018480: 6461 7465 7469 6d65 2e64 6174 6528 3230  datetime.date(20
+00018490: 3130 2c20 332c 2033 292c 2027 6f6f 7073  10, 3, 3), 'oops
+000184a0: 2729 0a0a 2020 2020 2222 220a 0a20 2020  ')..    """..   
+000184b0: 2064 6566 205f 5f69 6e69 745f 5f28 0a20   def __init__(. 
+000184c0: 2020 2020 2020 2073 656c 662c 206d 696e         self, min
+000184d0: 696d 756d 3d4e 6f6e 652c 206d 6178 696d  imum=None, maxim
+000184e0: 756d 3d4e 6f6e 652c 2066 6f72 6d61 743d  um=None, format=
+000184f0: 2225 592d 256d 2d25 6422 2c20 6572 726f  "%Y-%m-%d", erro
+00018500: 725f 6d65 7373 6167 653d 4e6f 6e65 0a20  r_message=None. 
+00018510: 2020 2029 3a0a 2020 2020 2020 2020 7365     ):.        se
+00018520: 6c66 2e6d 696e 696d 756d 203d 206d 696e  lf.minimum = min
+00018530: 696d 756d 0a20 2020 2020 2020 2073 656c  imum.        sel
+00018540: 662e 6d61 7869 6d75 6d20 3d20 6d61 7869  f.maximum = maxi
+00018550: 6d75 6d0a 2020 2020 2020 2020 6966 2065  mum.        if e
+00018560: 7272 6f72 5f6d 6573 7361 6765 2069 7320  rror_message is 
+00018570: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00018580: 2020 6966 206d 696e 696d 756d 2069 7320    if minimum is 
+00018590: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000185a0: 2020 2020 2020 6572 726f 725f 6d65 7373        error_mess
+000185b0: 6167 6520 3d20 2245 6e74 6572 2064 6174  age = "Enter dat
+000185c0: 6520 6f6e 206f 7220 6265 666f 7265 2025  e on or before %
+000185d0: 286d 6178 2973 220a 2020 2020 2020 2020  (max)s".        
+000185e0: 2020 2020 656c 6966 206d 6178 696d 756d      elif maximum
+000185f0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00018600: 2020 2020 2020 2020 2020 6572 726f 725f            error_
+00018610: 6d65 7373 6167 6520 3d20 2245 6e74 6572  message = "Enter
+00018620: 2064 6174 6520 6f6e 206f 7220 6166 7465   date on or afte
+00018630: 7220 2528 6d69 6e29 7322 0a20 2020 2020  r %(min)s".     
+00018640: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00018650: 2020 2020 2020 2020 2020 2020 2065 7272               err
+00018660: 6f72 5f6d 6573 7361 6765 203d 2022 456e  or_message = "En
+00018670: 7465 7220 6461 7465 2069 6e20 7261 6e67  ter date in rang
+00018680: 6520 2528 6d69 6e29 7320 2528 6d61 7829  e %(min)s %(max)
+00018690: 7322 0a20 2020 2020 2020 2049 535f 4441  s".        IS_DA
+000186a0: 5445 2e5f 5f69 6e69 745f 5f28 7365 6c66  TE.__init__(self
+000186b0: 2c20 666f 726d 6174 3d66 6f72 6d61 742c  , format=format,
+000186c0: 2065 7272 6f72 5f6d 6573 7361 6765 3d65   error_message=e
+000186d0: 7272 6f72 5f6d 6573 7361 6765 290a 2020  rror_message).  
+000186e0: 2020 2020 2020 7365 6c66 2e65 7874 7265        self.extre
+000186f0: 6d65 7320 3d20 6469 6374 286d 696e 3d73  mes = dict(min=s
+00018700: 656c 662e 666f 726d 6174 7465 7228 6d69  elf.formatter(mi
+00018710: 6e69 6d75 6d29 2c20 6d61 783d 7365 6c66  nimum), max=self
+00018720: 2e66 6f72 6d61 7474 6572 286d 6178 696d  .formatter(maxim
+00018730: 756d 2929 0a0a 2020 2020 6465 6620 7661  um))..    def va
+00018740: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+00018750: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+00018760: 6e65 293a 0a20 2020 2020 2020 2076 616c  ne):.        val
+00018770: 7565 203d 2049 535f 4441 5445 2e76 616c  ue = IS_DATE.val
+00018780: 6964 6174 6528 7365 6c66 2c20 7661 6c75  idate(self, valu
+00018790: 652c 2072 6563 6f72 645f 6964 3d4e 6f6e  e, record_id=Non
+000187a0: 6529 0a20 2020 2020 2020 2069 6620 7365  e).        if se
+000187b0: 6c66 2e6d 696e 696d 756d 2061 6e64 2073  lf.minimum and s
+000187c0: 656c 662e 6d69 6e69 6d75 6d20 3e20 7661  elf.minimum > va
+000187d0: 6c75 653a 0a20 2020 2020 2020 2020 2020  lue:.           
+000187e0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+000187f0: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
+00018800: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+00018810: 725f 6d65 7373 6167 6529 2025 2073 656c  r_message) % sel
+00018820: 662e 6578 7472 656d 6573 290a 2020 2020  f.extremes).    
+00018830: 2020 2020 6966 2073 656c 662e 6d61 7869      if self.maxi
+00018840: 6d75 6d20 616e 6420 7661 6c75 6520 3e20  mum and value > 
+00018850: 7365 6c66 2e6d 6178 696d 756d 3a0a 2020  self.maximum:.  
+00018860: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00018870: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+00018880: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+00018890: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+000188a0: 6765 2920 2520 7365 6c66 2e65 7874 7265  ge) % self.extre
+000188b0: 6d65 7329 0a20 2020 2020 2020 2072 6574  mes).        ret
+000188c0: 7572 6e20 7661 6c75 650a 0a0a 636c 6173  urn value...clas
+000188d0: 7320 4953 5f44 4154 4554 494d 455f 494e  s IS_DATETIME_IN
+000188e0: 5f52 414e 4745 2849 535f 4441 5445 5449  _RANGE(IS_DATETI
+000188f0: 4d45 293a 0a20 2020 2022 2222 0a20 2020  ME):.    """.   
+00018900: 2045 7861 6d70 6c65 733a 0a20 2020 2020   Examples:.     
+00018910: 2020 2055 7365 2061 733a 3a0a 2020 2020     Use as::.    
+00018920: 2020 2020 2020 2020 3e3e 3e20 7620 3d20          >>> v = 
+00018930: 4953 5f44 4154 4554 494d 455f 494e 5f52  IS_DATETIME_IN_R
+00018940: 414e 4745 285c 0a20 2020 2020 2020 2020  ANGE(\.         
+00018950: 2020 2020 2020 2020 2020 206d 696e 696d             minim
+00018960: 756d 3d64 6174 6574 696d 652e 6461 7465  um=datetime.date
+00018970: 7469 6d65 2832 3030 382c 312c 312c 3132  time(2008,1,1,12
+00018980: 2c32 3029 2c20 5c0a 2020 2020 2020 2020  ,20), \.        
+00018990: 2020 2020 2020 2020 2020 2020 6d61 7869              maxi
+000189a0: 6d75 6d3d 6461 7465 7469 6d65 2e64 6174  mum=datetime.dat
+000189b0: 6574 696d 6528 3230 3039 2c31 322c 3331  etime(2009,12,31
+000189c0: 2c31 322c 3230 292c 205c 0a20 2020 2020  ,12,20), \.     
+000189d0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+000189e0: 6f72 6d61 743d 2225 6d2f 2564 2f25 5920  ormat="%m/%d/%Y 
+000189f0: 2548 3a25 4d22 2c65 7272 6f72 5f6d 6573  %H:%M",error_mes
+00018a00: 7361 6765 3d22 4f6f 7073 2229 0a20 2020  sage="Oops").   
+00018a10: 2020 2020 2020 2020 203e 3e3e 2076 2827           >>> v('
+00018a20: 3033 2f30 332f 3230 3038 2031 323a 3430  03/03/2008 12:40
+00018a30: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+00018a40: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+00018a50: 6528 3230 3038 2c20 332c 2033 2c20 3132  e(2008, 3, 3, 12
+00018a60: 2c20 3430 292c 204e 6f6e 6529 0a0a 2020  , 40), None)..  
+00018a70: 2020 2020 2020 2020 2020 3e3e 3e20 7628            >>> v(
+00018a80: 2730 332f 3033 2f32 3031 3020 3130 3a33  '03/03/2010 10:3
+00018a90: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
+00018aa0: 2827 3033 2f30 332f 3230 3130 2031 303a  ('03/03/2010 10:
+00018ab0: 3334 272c 2027 6f6f 7073 2729 0a0a 2020  34', 'oops')..  
+00018ac0: 2020 2020 2020 2020 2020 3e3e 3e20 7628            >>> v(
+00018ad0: 6461 7465 7469 6d65 2e64 6174 6574 696d  datetime.datetim
+00018ae0: 6528 3230 3038 2c33 2c33 2c30 2c30 2929  e(2008,3,3,0,0))
+00018af0: 0a20 2020 2020 2020 2020 2020 2028 6461  .            (da
+00018b00: 7465 7469 6d65 2e64 6174 6574 696d 6528  tetime.datetime(
+00018b10: 3230 3038 2c20 332c 2033 2c20 302c 2030  2008, 3, 3, 0, 0
+00018b20: 292c 204e 6f6e 6529 0a0a 2020 2020 2020  ), None)..      
+00018b30: 2020 2020 2020 3e3e 3e20 7628 6461 7465        >>> v(date
+00018b40: 7469 6d65 2e64 6174 6574 696d 6528 3230  time.datetime(20
+00018b50: 3130 2c33 2c33 2c30 2c30 2929 0a20 2020  10,3,3,0,0)).   
+00018b60: 2020 2020 2020 2020 2028 6461 7465 7469           (dateti
+00018b70: 6d65 2e64 6174 6574 696d 6528 3230 3130  me.datetime(2010
+00018b80: 2c20 332c 2033 2c20 302c 2030 292c 2027  , 3, 3, 0, 0), '
+00018b90: 6f6f 7073 2729 0a0a 2020 2020 2222 220a  oops')..    """.
+00018ba0: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00018bb0: 5f28 0a20 2020 2020 2020 2073 656c 662c  _(.        self,
+00018bc0: 0a20 2020 2020 2020 206d 696e 696d 756d  .        minimum
+00018bd0: 3d4e 6f6e 652c 0a20 2020 2020 2020 206d  =None,.        m
+00018be0: 6178 696d 756d 3d4e 6f6e 652c 0a20 2020  aximum=None,.   
+00018bf0: 2020 2020 2066 6f72 6d61 743d 2225 592d       format="%Y-
+00018c00: 256d 2d25 6420 2548 3a25 4d3a 2553 222c  %m-%d %H:%M:%S",
+00018c10: 0a20 2020 2020 2020 2065 7272 6f72 5f6d  .        error_m
+00018c20: 6573 7361 6765 3d4e 6f6e 652c 0a20 2020  essage=None,.   
+00018c30: 2020 2020 2074 696d 657a 6f6e 653d 4e6f       timezone=No
+00018c40: 6e65 2c0a 2020 2020 293a 0a20 2020 2020  ne,.    ):.     
+00018c50: 2020 2073 656c 662e 6d69 6e69 6d75 6d20     self.minimum 
+00018c60: 3d20 6d69 6e69 6d75 6d0a 2020 2020 2020  = minimum.      
+00018c70: 2020 7365 6c66 2e6d 6178 696d 756d 203d    self.maximum =
+00018c80: 206d 6178 696d 756d 0a20 2020 2020 2020   maximum.       
+00018c90: 2069 6620 6572 726f 725f 6d65 7373 6167   if error_messag
+00018ca0: 6520 6973 204e 6f6e 653a 0a20 2020 2020  e is None:.     
+00018cb0: 2020 2020 2020 2069 6620 6d69 6e69 6d75         if minimu
+00018cc0: 6d20 6973 204e 6f6e 653a 0a20 2020 2020  m is None:.     
+00018cd0: 2020 2020 2020 2020 2020 2065 7272 6f72             error
+00018ce0: 5f6d 6573 7361 6765 203d 2022 456e 7465  _message = "Ente
+00018cf0: 7220 6461 7465 2061 6e64 2074 696d 6520  r date and time 
+00018d00: 6f6e 206f 7220 6265 666f 7265 2025 286d  on or before %(m
+00018d10: 6178 2973 220a 2020 2020 2020 2020 2020  ax)s".          
+00018d20: 2020 656c 6966 206d 6178 696d 756d 2069    elif maximum i
+00018d30: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00018d40: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
+00018d50: 7373 6167 6520 3d20 2245 6e74 6572 2064  ssage = "Enter d
+00018d60: 6174 6520 616e 6420 7469 6d65 206f 6e20  ate and time on 
+00018d70: 6f72 2061 6674 6572 2025 286d 696e 2973  or after %(min)s
+00018d80: 220a 2020 2020 2020 2020 2020 2020 656c  ".            el
+00018d90: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00018da0: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
+00018db0: 6520 3d20 2245 6e74 6572 2064 6174 6520  e = "Enter date 
+00018dc0: 616e 6420 7469 6d65 2069 6e20 7261 6e67  and time in rang
+00018dd0: 6520 2528 6d69 6e29 7320 2528 6d61 7829  e %(min)s %(max)
+00018de0: 7322 0a20 2020 2020 2020 2049 535f 4441  s".        IS_DA
+00018df0: 5445 5449 4d45 2e5f 5f69 6e69 745f 5f28  TETIME.__init__(
+00018e00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00018e10: 662c 2066 6f72 6d61 743d 666f 726d 6174  f, format=format
+00018e20: 2c20 6572 726f 725f 6d65 7373 6167 653d  , error_message=
+00018e30: 6572 726f 725f 6d65 7373 6167 652c 2074  error_message, t
+00018e40: 696d 657a 6f6e 653d 7469 6d65 7a6f 6e65  imezone=timezone
+00018e50: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00018e60: 2020 2073 656c 662e 6578 7472 656d 6573     self.extremes
+00018e70: 203d 2064 6963 7428 6d69 6e3d 7365 6c66   = dict(min=self
+00018e80: 2e66 6f72 6d61 7474 6572 286d 696e 696d  .formatter(minim
+00018e90: 756d 292c 206d 6178 3d73 656c 662e 666f  um), max=self.fo
+00018ea0: 726d 6174 7465 7228 6d61 7869 6d75 6d29  rmatter(maximum)
+00018eb0: 290a 0a20 2020 2064 6566 2076 616c 6964  )..    def valid
+00018ec0: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
+00018ed0: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
+00018ee0: 3a0a 2020 2020 2020 2020 7661 6c75 6520  :.        value 
+00018ef0: 3d20 4953 5f44 4154 4554 494d 452e 7661  = IS_DATETIME.va
+00018f00: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
+00018f10: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
+00018f20: 6e65 290a 2020 2020 2020 2020 6966 2073  ne).        if s
+00018f30: 656c 662e 6d69 6e69 6d75 6d20 616e 6420  elf.minimum and 
+00018f40: 7365 6c66 2e6d 696e 696d 756d 203e 2076  self.minimum > v
+00018f50: 616c 7565 3a0a 2020 2020 2020 2020 2020  alue:.          
+00018f60: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+00018f70: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
+00018f80: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
+00018f90: 6f72 5f6d 6573 7361 6765 2920 2520 7365  or_message) % se
+00018fa0: 6c66 2e65 7874 7265 6d65 7329 0a20 2020  lf.extremes).   
+00018fb0: 2020 2020 2069 6620 7365 6c66 2e6d 6178       if self.max
+00018fc0: 696d 756d 2061 6e64 2076 616c 7565 203e  imum and value >
+00018fd0: 2073 656c 662e 6d61 7869 6d75 6d3a 0a20   self.maximum:. 
+00018fe0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00018ff0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
+00019000: 2873 656c 662e 7472 616e 736c 6174 6f72  (self.translator
+00019010: 2873 656c 662e 6572 726f 725f 6d65 7373  (self.error_mess
+00019020: 6167 6529 2025 2073 656c 662e 6578 7472  age) % self.extr
+00019030: 656d 6573 290a 2020 2020 2020 2020 7265  emes).        re
+00019040: 7475 726e 2076 616c 7565 0a0a 0a63 6c61  turn value...cla
+00019050: 7373 2049 535f 4c49 5354 5f4f 4628 5661  ss IS_LIST_OF(Va
+00019060: 6c69 6461 746f 7229 3a0a 2020 2020 6465  lidator):.    de
+00019070: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00019080: 206f 7468 6572 3d4e 6f6e 652c 206d 696e   other=None, min
+00019090: 696d 756d 3d4e 6f6e 652c 206d 6178 696d  imum=None, maxim
+000190a0: 756d 3d4e 6f6e 652c 2065 7272 6f72 5f6d  um=None, error_m
+000190b0: 6573 7361 6765 3d4e 6f6e 6529 3a0a 2020  essage=None):.  
+000190c0: 2020 2020 2020 7365 6c66 2e6f 7468 6572        self.other
+000190d0: 203d 206f 7468 6572 0a20 2020 2020 2020   = other.       
+000190e0: 2073 656c 662e 6d69 6e69 6d75 6d20 3d20   self.minimum = 
+000190f0: 6d69 6e69 6d75 6d0a 2020 2020 2020 2020  minimum.        
+00019100: 7365 6c66 2e6d 6178 696d 756d 203d 206d  self.maximum = m
+00019110: 6178 696d 756d 0a20 2020 2020 2020 2073  aximum.        s
+00019120: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+00019130: 6520 3d20 6572 726f 725f 6d65 7373 6167  e = error_messag
+00019140: 650a 0a20 2020 2064 6566 2076 616c 6964  e..    def valid
+00019150: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
+00019160: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
+00019170: 3a0a 2020 2020 2020 2020 6976 616c 7565  :.        ivalue
+00019180: 203d 2076 616c 7565 0a20 2020 2020 2020   = value.       
+00019190: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+000191a0: 6365 2876 616c 7565 2c20 6c69 7374 293a  ce(value, list):
+000191b0: 0a20 2020 2020 2020 2020 2020 2069 7661  .            iva
+000191c0: 6c75 6520 3d20 5b69 7661 6c75 655d 0a20  lue = [ivalue]. 
+000191d0: 2020 2020 2020 2069 7661 6c75 6520 3d20         ivalue = 
+000191e0: 5b69 2066 6f72 2069 2069 6e20 6976 616c  [i for i in ival
+000191f0: 7565 2069 6620 7374 7228 6929 2e73 7472  ue if str(i).str
+00019200: 6970 2829 5d0a 2020 2020 2020 2020 6966  ip()].        if
+00019210: 2073 656c 662e 6d69 6e69 6d75 6d20 6973   self.minimum is
+00019220: 206e 6f74 204e 6f6e 6520 616e 6420 6c65   not None and le
+00019230: 6e28 6976 616c 7565 2920 3c20 7365 6c66  n(ivalue) < self
+00019240: 2e6d 696e 696d 756d 3a0a 2020 2020 2020  .minimum:.      
+00019250: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+00019260: 6461 7469 6f6e 4572 726f 7228 0a20 2020  dationError(.   
+00019270: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00019280: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+00019290: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
+000192a0: 6f72 2022 4d69 6e69 6d75 6d20 6c65 6e67  or "Minimum leng
+000192b0: 7468 2069 7320 2528 6d69 6e29 7322 290a  th is %(min)s").
+000192c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000192d0: 2520 6469 6374 286d 696e 3d73 656c 662e  % dict(min=self.
+000192e0: 6d69 6e69 6d75 6d2c 206d 6178 3d73 656c  minimum, max=sel
+000192f0: 662e 6d61 7869 6d75 6d29 0a20 2020 2020  f.maximum).     
+00019300: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00019310: 2069 6620 7365 6c66 2e6d 6178 696d 756d   if self.maximum
+00019320: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
+00019330: 206c 656e 2869 7661 6c75 6529 203e 2073   len(ivalue) > s
+00019340: 656c 662e 6d61 7869 6d75 6d3a 0a20 2020  elf.maximum:.   
+00019350: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00019360: 616c 6964 6174 696f 6e45 7272 6f72 280a  alidationError(.
+00019370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019380: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+00019390: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+000193a0: 6765 206f 7220 224d 6178 696d 756d 206c  ge or "Maximum l
+000193b0: 656e 6774 6820 6973 2025 286d 6178 2973  ength is %(max)s
+000193c0: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+000193d0: 2020 2025 2064 6963 7428 6d69 6e3d 7365     % dict(min=se
+000193e0: 6c66 2e6d 696e 696d 756d 2c20 6d61 783d  lf.minimum, max=
+000193f0: 7365 6c66 2e6d 6178 696d 756d 290a 2020  self.maximum).  
+00019400: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00019410: 2020 2020 6e65 775f 7661 6c75 6520 3d20      new_value = 
+00019420: 5b5d 0a20 2020 2020 2020 206f 7468 6572  [].        other
+00019430: 203d 2073 656c 662e 6f74 6865 720a 2020   = self.other.  
+00019440: 2020 2020 2020 6966 2073 656c 662e 6f74        if self.ot
+00019450: 6865 723a 0a20 2020 2020 2020 2020 2020  her:.           
+00019460: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
+00019470: 6365 286f 7468 6572 2c20 286c 6973 742c  ce(other, (list,
+00019480: 2074 7570 6c65 2929 3a0a 2020 2020 2020   tuple)):.      
+00019490: 2020 2020 2020 2020 2020 6f74 6865 7220            other 
+000194a0: 3d20 5b6f 7468 6572 5d0a 2020 2020 2020  = [other].      
+000194b0: 2020 2020 2020 666f 7220 6974 656d 2069        for item i
+000194c0: 6e20 6976 616c 7565 3a0a 2020 2020 2020  n ivalue:.      
+000194d0: 2020 2020 2020 2020 2020 7620 3d20 6974            v = it
+000194e0: 656d 0a20 2020 2020 2020 2020 2020 2020  em.             
+000194f0: 2020 2066 6f72 2076 616c 6964 6174 6f72     for validator
+00019500: 2069 6e20 6f74 6865 723a 0a20 2020 2020   in other:.     
+00019510: 2020 2020 2020 2020 2020 2020 2020 2076                 v
+00019520: 203d 2076 616c 6964 6174 6f72 5f63 616c   = validator_cal
+00019530: 6c65 7228 7661 6c69 6461 746f 722c 2076  ler(validator, v
+00019540: 2c20 7265 636f 7264 5f69 6429 0a20 2020  , record_id).   
+00019550: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00019560: 5f76 616c 7565 2e61 7070 656e 6428 7629  _value.append(v)
+00019570: 0a20 2020 2020 2020 2020 2020 2069 7661  .            iva
+00019580: 6c75 6520 3d20 6e65 775f 7661 6c75 650a  lue = new_value.
+00019590: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+000195a0: 7661 6c75 650a 0a0a 636c 6173 7320 4953  value...class IS
+000195b0: 5f4c 4f57 4552 2856 616c 6964 6174 6f72  _LOWER(Validator
+000195c0: 293a 0a20 2020 2022 2222 0a20 2020 2043  ):.    """.    C
+000195d0: 6f6e 7665 7274 7320 746f 206c 6f77 6572  onverts to lower
+000195e0: 6361 7365 3a3a 0a0a 2020 2020 2020 2020  case::..        
+000195f0: 3e3e 3e20 4953 5f4c 4f57 4552 2829 2827  >>> IS_LOWER()('
+00019600: 4142 4327 290a 2020 2020 2020 2020 2827  ABC').        ('
+00019610: 6162 6327 2c20 4e6f 6e65 290a 2020 2020  abc', None).    
+00019620: 2020 2020 3e3e 3e20 4953 5f4c 4f57 4552      >>> IS_LOWER
+00019630: 2829 2827 c391 2729 0a20 2020 2020 2020  ()('..').       
+00019640: 2028 275c 5c78 6333 5c5c 7862 3127 2c20   ('\\xc3\\xb1', 
+00019650: 4e6f 6e65 290a 0a20 2020 2022 2222 0a0a  None)..    """..
+00019660: 2020 2020 6465 6620 7661 6c69 6461 7465      def validate
+00019670: 2873 656c 662c 2076 616c 7565 2c20 7265  (self, value, re
+00019680: 636f 7264 5f69 643d 4e6f 6e65 293a 0a20  cord_id=None):. 
+00019690: 2020 2020 2020 2063 6173 745f 6261 636b         cast_back
+000196a0: 203d 206c 616d 6264 6120 783a 2078 0a20   = lambda x: x. 
+000196b0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000196c0: 616e 6365 2876 616c 7565 2c20 7374 7229  ance(value, str)
+000196d0: 3a0a 2020 2020 2020 2020 2020 2020 6361  :.            ca
+000196e0: 7374 5f62 6163 6b20 3d20 746f 5f6e 6174  st_back = to_nat
+000196f0: 6976 650a 2020 2020 2020 2020 656c 6966  ive.        elif
+00019700: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
+00019710: 652c 2062 7974 6573 293a 0a20 2020 2020  e, bytes):.     
+00019720: 2020 2020 2020 2063 6173 745f 6261 636b         cast_back
+00019730: 203d 2074 6f5f 6279 7465 730a 2020 2020   = to_bytes.    
+00019740: 2020 2020 7661 6c75 6520 3d20 746f 5f75      value = to_u
+00019750: 6e69 636f 6465 2876 616c 7565 292e 6c6f  nicode(value).lo
+00019760: 7765 7228 290a 2020 2020 2020 2020 7265  wer().        re
+00019770: 7475 726e 2063 6173 745f 6261 636b 2876  turn cast_back(v
+00019780: 616c 7565 290a 0a0a 636c 6173 7320 4953  alue)...class IS
+00019790: 5f55 5050 4552 2856 616c 6964 6174 6f72  _UPPER(Validator
+000197a0: 293a 0a20 2020 2022 2222 0a20 2020 2043  ):.    """.    C
+000197b0: 6f6e 7665 7274 7320 746f 2075 7070 6572  onverts to upper
+000197c0: 6361 7365 3a3a 0a0a 2020 2020 2020 2020  case::..        
+000197d0: 3e3e 3e20 4953 5f55 5050 4552 2829 2827  >>> IS_UPPER()('
+000197e0: 6162 6327 290a 2020 2020 2020 2020 2827  abc').        ('
+000197f0: 4142 4327 2c20 4e6f 6e65 290a 2020 2020  ABC', None).    
+00019800: 2020 2020 3e3e 3e20 4953 5f55 5050 4552      >>> IS_UPPER
+00019810: 2829 2827 c3b1 2729 0a20 2020 2020 2020  ()('..').       
+00019820: 2028 275c 5c78 6333 5c5c 7839 3127 2c20   ('\\xc3\\x91', 
+00019830: 4e6f 6e65 290a 0a20 2020 2022 2222 0a0a  None)..    """..
+00019840: 2020 2020 6465 6620 7661 6c69 6461 7465      def validate
+00019850: 2873 656c 662c 2076 616c 7565 2c20 7265  (self, value, re
+00019860: 636f 7264 5f69 643d 4e6f 6e65 293a 0a20  cord_id=None):. 
+00019870: 2020 2020 2020 2063 6173 745f 6261 636b         cast_back
+00019880: 203d 206c 616d 6264 6120 783a 2078 0a20   = lambda x: x. 
+00019890: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000198a0: 616e 6365 2876 616c 7565 2c20 7374 7229  ance(value, str)
+000198b0: 3a0a 2020 2020 2020 2020 2020 2020 6361  :.            ca
+000198c0: 7374 5f62 6163 6b20 3d20 746f 5f6e 6174  st_back = to_nat
+000198d0: 6976 650a 2020 2020 2020 2020 656c 6966  ive.        elif
+000198e0: 2069 7369 6e73 7461 6e63 6528 7661 6c75   isinstance(valu
+000198f0: 652c 2062 7974 6573 293a 0a20 2020 2020  e, bytes):.     
+00019900: 2020 2020 2020 2063 6173 745f 6261 636b         cast_back
+00019910: 203d 2074 6f5f 6279 7465 730a 2020 2020   = to_bytes.    
+00019920: 2020 2020 7661 6c75 6520 3d20 746f 5f75      value = to_u
+00019930: 6e69 636f 6465 2876 616c 7565 292e 7570  nicode(value).up
+00019940: 7065 7228 290a 2020 2020 2020 2020 7265  per().        re
+00019950: 7475 726e 2063 6173 745f 6261 636b 2876  turn cast_back(v
+00019960: 616c 7565 290a 0a0a 6465 6620 7572 6c69  alue)...def urli
+00019970: 6679 2873 2c20 6d61 786c 656e 3d38 302c  fy(s, maxlen=80,
+00019980: 206b 6565 705f 756e 6465 7273 636f 7265   keep_underscore
+00019990: 733d 4661 6c73 6529 3a0a 2020 2020 2222  s=False):.    ""
+000199a0: 220a 2020 2020 436f 6e76 6572 7473 2069  ".    Converts i
+000199b0: 6e63 6f6d 696e 6720 7374 7269 6e67 2074  ncoming string t
+000199c0: 6f20 6120 7369 6d70 6c69 6669 6564 2041  o a simplified A
+000199d0: 5343 4949 2073 7562 7365 742e 0a20 2020  SCII subset..   
+000199e0: 2069 6620 286b 6565 705f 756e 6465 7273   if (keep_unders
+000199f0: 636f 7265 7329 3a20 756e 6465 7273 636f  cores): undersco
+00019a00: 7265 7320 6172 6520 7265 7461 696e 6564  res are retained
+00019a10: 2069 6e20 7468 6520 7374 7269 6e67 0a20   in the string. 
+00019a20: 2020 2065 6c73 653a 2075 6e64 6572 7363     else: undersc
+00019a30: 6f72 6573 2061 7265 2074 7261 6e73 6c61  ores are transla
+00019a40: 7465 6420 746f 2068 7970 6865 6e73 2028  ted to hyphens (
+00019a50: 6465 6661 756c 7429 0a20 2020 2022 2222  default).    """
+00019a60: 0a20 2020 2073 203d 2074 6f5f 756e 6963  .    s = to_unic
+00019a70: 6f64 6528 7329 2020 2320 746f 2075 6e69  ode(s)  # to uni
+00019a80: 636f 6465 0a20 2020 2073 203d 2073 2e6c  code.    s = s.l
+00019a90: 6f77 6572 2829 2020 2320 746f 206c 6f77  ower()  # to low
+00019aa0: 6572 6361 7365 0a20 2020 2073 203d 2075  ercase.    s = u
+00019ab0: 6e69 636f 6465 6461 7461 2e6e 6f72 6d61  nicodedata.norma
+00019ac0: 6c69 7a65 2822 4e46 4b44 222c 2073 2920  lize("NFKD", s) 
+00019ad0: 2023 2072 6570 6c61 6365 2073 7065 6369   # replace speci
+00019ae0: 616c 2063 6861 7261 6374 6572 730a 2020  al characters.  
+00019af0: 2020 7320 3d20 746f 5f6e 6174 6976 6528    s = to_native(
+00019b00: 732c 2063 6861 7273 6574 3d22 6173 6369  s, charset="asci
+00019b10: 6922 2c20 6572 726f 7273 3d22 6967 6e6f  i", errors="igno
+00019b20: 7265 2229 2020 2320 656e 636f 6465 2061  re")  # encode a
+00019b30: 7320 4153 4349 490a 2020 2020 7320 3d20  s ASCII.    s = 
+00019b40: 7265 2e73 7562 2872 2226 5c77 2b3f 3b22  re.sub(r"&\w+?;"
+00019b50: 2c20 2222 2c20 7329 2020 2320 7374 7269  , "", s)  # stri
+00019b60: 7020 6874 6d6c 2065 6e74 6974 6965 730a  p html entities.
+00019b70: 2020 2020 6966 206b 6565 705f 756e 6465      if keep_unde
+00019b80: 7273 636f 7265 733a 0a20 2020 2020 2020  rscores:.       
+00019b90: 2073 203d 2072 652e 7375 6228 7222 5c73   s = re.sub(r"\s
+00019ba0: 2b22 2c20 222d 222c 2073 2920 2023 2077  +", "-", s)  # w
+00019bb0: 6869 7465 7370 6163 6520 746f 2068 7970  hitespace to hyp
+00019bc0: 6865 6e73 0a20 2020 2020 2020 2073 203d  hens.        s =
+00019bd0: 2072 652e 7375 6228 7222 5b5e 5c77 5c2d   re.sub(r"[^\w\-
+00019be0: 5d22 2c20 2222 2c20 7329 0a20 2020 2020  ]", "", s).     
+00019bf0: 2020 2023 2073 7472 6970 2061 6c6c 2062     # strip all b
+00019c00: 7574 2061 6c70 6861 6e75 6d65 7269 632f  ut alphanumeric/
+00019c10: 756e 6465 7273 636f 7265 2f68 7970 6865  underscore/hyphe
+00019c20: 6e0a 2020 2020 656c 7365 3a0a 2020 2020  n.    else:.    
+00019c30: 2020 2020 7320 3d20 7265 2e73 7562 2872      s = re.sub(r
+00019c40: 225b 5c73 5f5d 2b22 2c20 222d 222c 2073  "[\s_]+", "-", s
+00019c50: 2920 2023 2077 6869 7465 7370 6163 6520  )  # whitespace 
+00019c60: 2620 756e 6465 7273 636f 7265 7320 746f  & underscores to
+00019c70: 2068 7970 6865 6e73 0a20 2020 2020 2020   hyphens.       
+00019c80: 2073 203d 2072 652e 7375 6228 7222 5b5e   s = re.sub(r"[^
+00019c90: 612d 7a30 2d39 5c2d 5d22 2c20 2222 2c20  a-z0-9\-]", "", 
+00019ca0: 7329 2020 2320 7374 7269 7020 616c 6c20  s)  # strip all 
+00019cb0: 6275 7420 616c 7068 616e 756d 6572 6963  but alphanumeric
+00019cc0: 2f68 7970 6865 6e0a 2020 2020 7320 3d20  /hyphen.    s = 
+00019cd0: 7265 2e73 7562 2872 225b 2d5f 5d5b 2d5f  re.sub(r"[-_][-_
+00019ce0: 5d2b 222c 2022 2d22 2c20 7329 2020 2320  ]+", "-", s)  # 
+00019cf0: 636f 6c6c 6170 7365 2073 7472 696e 6773  collapse strings
+00019d00: 206f 6620 6879 7068 656e 730a 2020 2020   of hyphens.    
+00019d10: 7320 3d20 732e 7374 7269 7028 222d 2229  s = s.strip("-")
+00019d20: 2020 2320 7265 6d6f 7665 206c 6561 6469    # remove leadi
+00019d30: 6e67 2061 6e64 2074 7261 696c 696e 6720  ng and trailing 
+00019d40: 6879 7068 656e 730a 2020 2020 7265 7475  hyphens.    retu
+00019d50: 726e 2073 5b3a 6d61 786c 656e 5d20 2023  rn s[:maxlen]  #
+00019d60: 2065 6e66 6f72 6365 206d 6178 696d 756d   enforce maximum
+00019d70: 206c 656e 6774 680a 0a0a 636c 6173 7320   length...class 
+00019d80: 4953 5f53 4c55 4728 5661 6c69 6461 746f  IS_SLUG(Validato
+00019d90: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
+00019da0: 636f 6e76 6572 7473 2061 7262 6974 7261  converts arbitra
+00019db0: 7279 2074 6578 7420 7374 7269 6e67 2074  ry text string t
+00019dc0: 6f20 6120 736c 7567 3a3a 0a0a 2020 2020  o a slug::..    
+00019dd0: 2020 2020 3e3e 3e20 4953 5f53 4c55 4728      >>> IS_SLUG(
+00019de0: 2928 2761 6263 3132 3327 290a 2020 2020  )('abc123').    
+00019df0: 2020 2020 2827 6162 6331 3233 272c 204e      ('abc123', N
+00019e00: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00019e10: 2049 535f 534c 5547 2829 2827 4142 4331   IS_SLUG()('ABC1
+00019e20: 3233 2729 0a20 2020 2020 2020 2028 2761  23').        ('a
+00019e30: 6263 3132 3327 2c20 4e6f 6e65 290a 2020  bc123', None).  
+00019e40: 2020 2020 2020 3e3e 3e20 4953 5f53 4c55        >>> IS_SLU
+00019e50: 4728 2928 2761 6263 2d31 3233 2729 0a20  G()('abc-123'). 
+00019e60: 2020 2020 2020 2028 2761 6263 2d31 3233         ('abc-123
+00019e70: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00019e80: 203e 3e3e 2049 535f 534c 5547 2829 2827   >>> IS_SLUG()('
+00019e90: 6162 632d 2d31 3233 2729 0a20 2020 2020  abc--123').     
+00019ea0: 2020 2028 2761 6263 2d31 3233 272c 204e     ('abc-123', N
+00019eb0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00019ec0: 2049 535f 534c 5547 2829 2827 6162 6320   IS_SLUG()('abc 
+00019ed0: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
+00019ee0: 6162 632d 3132 3327 2c20 4e6f 6e65 290a  abc-123', None).
+00019ef0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
+00019f00: 4c55 4728 2928 2761 6263 5c74 5f31 3233  LUG()('abc\t_123
+00019f10: 2729 0a20 2020 2020 2020 2028 2761 6263  ').        ('abc
+00019f20: 2d31 3233 272c 204e 6f6e 6529 0a20 2020  -123', None).   
+00019f30: 2020 2020 203e 3e3e 2049 535f 534c 5547       >>> IS_SLUG
+00019f40: 2829 2827 2d61 6263 2d27 290a 2020 2020  ()('-abc-').    
+00019f50: 2020 2020 2827 6162 6327 2c20 4e6f 6e65      ('abc', None
+00019f60: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00019f70: 5f53 4c55 4728 2928 272d 2d61 2d2d 622d  _SLUG()('--a--b-
+00019f80: 2d5f 202d 632d 2d27 290a 2020 2020 2020  -_ -c--').      
+00019f90: 2020 2827 612d 622d 6327 2c20 4e6f 6e65    ('a-b-c', None
+00019fa0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00019fb0: 5f53 4c55 4728 2928 2761 6263 2661 6d70  _SLUG()('abc&amp
+00019fc0: 3b31 3233 2729 0a20 2020 2020 2020 2028  ;123').        (
+00019fd0: 2761 6263 3132 3327 2c20 4e6f 6e65 290a  'abc123', None).
+00019fe0: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
+00019ff0: 4c55 4728 2928 2761 6263 2661 6d70 3b31  LUG()('abc&amp;1
+0001a000: 3233 2661 6d70 3b64 6566 2729 0a20 2020  23&amp;def').   
+0001a010: 2020 2020 2028 2761 6263 3132 3364 6566       ('abc123def
+0001a020: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+0001a030: 203e 3e3e 2049 535f 534c 5547 2829 2827   >>> IS_SLUG()('
+0001a040: c3b1 2729 0a20 2020 2020 2020 2028 276e  ..').        ('n
+0001a050: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+0001a060: 203e 3e3e 2049 535f 534c 5547 286d 6178   >>> IS_SLUG(max
+0001a070: 6c65 6e3d 3429 2827 6162 6331 3233 2729  len=4)('abc123')
+0001a080: 0a20 2020 2020 2020 2028 2761 6263 3127  .        ('abc1'
+0001a090: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
+0001a0a0: 3e3e 3e20 4953 5f53 4c55 4728 2928 2761  >>> IS_SLUG()('a
+0001a0b0: 6263 5f31 3233 2729 0a20 2020 2020 2020  bc_123').       
+0001a0c0: 2028 2761 6263 2d31 3233 272c 204e 6f6e   ('abc-123', Non
+0001a0d0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+0001a0e0: 535f 534c 5547 286b 6565 705f 756e 6465  S_SLUG(keep_unde
+0001a0f0: 7273 636f 7265 733d 4661 6c73 6529 2827  rscores=False)('
+0001a100: 6162 635f 3132 3327 290a 2020 2020 2020  abc_123').      
+0001a110: 2020 2827 6162 632d 3132 3327 2c20 4e6f    ('abc-123', No
+0001a120: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+0001a130: 4953 5f53 4c55 4728 6b65 6570 5f75 6e64  IS_SLUG(keep_und
+0001a140: 6572 7363 6f72 6573 3d54 7275 6529 2827  erscores=True)('
+0001a150: 6162 635f 3132 3327 290a 2020 2020 2020  abc_123').      
+0001a160: 2020 2827 6162 635f 3132 3327 2c20 4e6f    ('abc_123', No
+0001a170: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+0001a180: 4953 5f53 4c55 4728 6368 6563 6b3d 4661  IS_SLUG(check=Fa
+0001a190: 6c73 6529 2827 6162 6327 290a 2020 2020  lse)('abc').    
+0001a1a0: 2020 2020 2827 6162 6327 2c20 4e6f 6e65      ('abc', None
+0001a1b0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+0001a1c0: 5f53 4c55 4728 6368 6563 6b3d 5472 7565  _SLUG(check=True
+0001a1d0: 2928 2761 6263 2729 0a20 2020 2020 2020  )('abc').       
+0001a1e0: 2028 2761 6263 272c 204e 6f6e 6529 0a20   ('abc', None). 
+0001a1f0: 2020 2020 2020 203e 3e3e 2049 535f 534c         >>> IS_SL
+0001a200: 5547 2863 6865 636b 3d46 616c 7365 2928  UG(check=False)(
+0001a210: 2761 2062 6327 290a 2020 2020 2020 2020  'a bc').        
+0001a220: 2827 612d 6263 272c 204e 6f6e 6529 0a20  ('a-bc', None). 
+0001a230: 2020 2020 2020 203e 3e3e 2049 535f 534c         >>> IS_SL
+0001a240: 5547 2863 6865 636b 3d54 7275 6529 2827  UG(check=True)('
+0001a250: 6120 6263 2729 0a20 2020 2020 2020 2028  a bc').        (
+0001a260: 2761 2062 6327 2c20 276d 7573 7420 6265  'a bc', 'must be
+0001a270: 2073 6c75 6727 290a 2020 2020 2222 220a   slug').    """.
+0001a280: 0a20 2020 2040 7374 6174 6963 6d65 7468  .    @staticmeth
+0001a290: 6f64 0a20 2020 2064 6566 2075 726c 6966  od.    def urlif
+0001a2a0: 7928 7661 6c75 652c 206d 6178 6c65 6e3d  y(value, maxlen=
+0001a2b0: 3830 2c20 6b65 6570 5f75 6e64 6572 7363  80, keep_undersc
+0001a2c0: 6f72 6573 3d46 616c 7365 293a 0a20 2020  ores=False):.   
+0001a2d0: 2020 2020 2072 6574 7572 6e20 7572 6c69       return urli
+0001a2e0: 6679 2876 616c 7565 2c20 6d61 786c 656e  fy(value, maxlen
+0001a2f0: 2c20 6b65 6570 5f75 6e64 6572 7363 6f72  , keep_underscor
+0001a300: 6573 290a 0a20 2020 2064 6566 205f 5f69  es)..    def __i
+0001a310: 6e69 745f 5f28 0a20 2020 2020 2020 2073  nit__(.        s
+0001a320: 656c 662c 0a20 2020 2020 2020 206d 6178  elf,.        max
+0001a330: 6c65 6e3d 3830 2c0a 2020 2020 2020 2020  len=80,.        
+0001a340: 6368 6563 6b3d 4661 6c73 652c 0a20 2020  check=False,.   
+0001a350: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+0001a360: 6765 3d22 4d75 7374 2062 6520 736c 7567  ge="Must be slug
+0001a370: 222c 0a20 2020 2020 2020 206b 6565 705f  ",.        keep_
+0001a380: 756e 6465 7273 636f 7265 733d 4661 6c73  underscores=Fals
+0001a390: 652c 0a20 2020 2029 3a0a 2020 2020 2020  e,.    ):.      
+0001a3a0: 2020 7365 6c66 2e6d 6178 6c65 6e20 3d20    self.maxlen = 
+0001a3b0: 6d61 786c 656e 0a20 2020 2020 2020 2073  maxlen.        s
+0001a3c0: 656c 662e 6368 6563 6b20 3d20 6368 6563  elf.check = chec
+0001a3d0: 6b0a 2020 2020 2020 2020 7365 6c66 2e65  k.        self.e
+0001a3e0: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
+0001a3f0: 7272 6f72 5f6d 6573 7361 6765 0a20 2020  rror_message.   
+0001a400: 2020 2020 2073 656c 662e 6b65 6570 5f75       self.keep_u
+0001a410: 6e64 6572 7363 6f72 6573 203d 206b 6565  nderscores = kee
+0001a420: 705f 756e 6465 7273 636f 7265 730a 0a20  p_underscores.. 
+0001a430: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+0001a440: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+0001a450: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+0001a460: 2020 2020 2020 6966 2073 656c 662e 6368        if self.ch
+0001a470: 6563 6b20 616e 6420 7661 6c75 6520 213d  eck and value !=
+0001a480: 2075 726c 6966 7928 7661 6c75 652c 2073   urlify(value, s
+0001a490: 656c 662e 6d61 786c 656e 2c20 7365 6c66  elf.maxlen, self
+0001a4a0: 2e6b 6565 705f 756e 6465 7273 636f 7265  .keep_underscore
+0001a4b0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+0001a4c0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+0001a4d0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
+0001a4e0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
+0001a4f0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
+0001a500: 2020 2072 6574 7572 6e20 7572 6c69 6679     return urlify
+0001a510: 2876 616c 7565 2c20 7365 6c66 2e6d 6178  (value, self.max
+0001a520: 6c65 6e2c 2073 656c 662e 6b65 6570 5f75  len, self.keep_u
+0001a530: 6e64 6572 7363 6f72 6573 290a 0a0a 636c  nderscores)...cl
+0001a540: 6173 7320 414e 595f 4f46 2856 616c 6964  ass ANY_OF(Valid
+0001a550: 6174 6f72 293a 0a20 2020 2022 2222 0a20  ator):.    """. 
+0001a560: 2020 2054 6573 7473 2069 6620 616e 7920     Tests if any 
+0001a570: 6f66 2074 6865 2076 616c 6964 6174 6f72  of the validator
+0001a580: 7320 696e 2061 206c 6973 7420 7265 7475  s in a list retu
+0001a590: 726e 7320 7375 6363 6573 7366 756c 6c79  rns successfully
+0001a5a0: 3a3a 0a0a 2020 2020 2020 2020 3e3e 3e20  ::..        >>> 
+0001a5b0: 414e 595f 4f46 285b 4953 5f45 4d41 494c  ANY_OF([IS_EMAIL
+0001a5c0: 2829 2c49 535f 414c 5048 414e 554d 4552  (),IS_ALPHANUMER
+0001a5d0: 4943 2829 5d29 2827 6140 622e 636f 2729  IC()])('a@b.co')
+0001a5e0: 0a20 2020 2020 2020 2028 2761 4062 2e63  .        ('a@b.c
+0001a5f0: 6f27 2c20 4e6f 6e65 290a 2020 2020 2020  o', None).      
+0001a600: 2020 3e3e 3e20 414e 595f 4f46 285b 4953    >>> ANY_OF([IS
+0001a610: 5f45 4d41 494c 2829 2c49 535f 414c 5048  _EMAIL(),IS_ALPH
+0001a620: 414e 554d 4552 4943 2829 5d29 2827 6162  ANUMERIC()])('ab
+0001a630: 636f 2729 0a20 2020 2020 2020 2028 2761  co').        ('a
+0001a640: 6263 6f27 2c20 4e6f 6e65 290a 2020 2020  bco', None).    
+0001a650: 2020 2020 3e3e 3e20 414e 595f 4f46 285b      >>> ANY_OF([
+0001a660: 4953 5f45 4d41 494c 2829 2c49 535f 414c  IS_EMAIL(),IS_AL
+0001a670: 5048 414e 554d 4552 4943 2829 5d29 2827  PHANUMERIC()])('
+0001a680: 4061 622e 636f 2729 0a20 2020 2020 2020  @ab.co').       
+0001a690: 2028 2740 6162 2e63 6f27 2c20 2765 6e74   ('@ab.co', 'ent
+0001a6a0: 6572 206f 6e6c 7920 6c65 7474 6572 732c  er only letters,
+0001a6b0: 206e 756d 6265 7273 2c20 616e 6420 756e   numbers, and un
+0001a6c0: 6465 7273 636f 7265 2729 0a20 2020 2020  derscore').     
+0001a6d0: 2020 203e 3e3e 2041 4e59 5f4f 4628 5b49     >>> ANY_OF([I
+0001a6e0: 535f 414c 5048 414e 554d 4552 4943 2829  S_ALPHANUMERIC()
+0001a6f0: 2c49 535f 454d 4149 4c28 295d 2928 2740  ,IS_EMAIL()])('@
+0001a700: 6162 2e63 6f27 290a 2020 2020 2020 2020  ab.co').        
+0001a710: 2827 4061 622e 636f 272c 2027 656e 7465  ('@ab.co', 'ente
+0001a720: 7220 6120 7661 6c69 6420 656d 6169 6c20  r a valid email 
+0001a730: 6164 6472 6573 7327 290a 0a20 2020 2022  address')..    "
+0001a740: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
+0001a750: 6974 5f5f 2873 656c 662c 2073 7562 732c  it__(self, subs,
+0001a760: 2065 7272 6f72 5f6d 6573 7361 6765 3d4e   error_message=N
+0001a770: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
+0001a780: 6c66 2e73 7562 7320 3d20 7375 6273 0a20  lf.subs = subs. 
+0001a790: 2020 2020 2020 2073 656c 662e 6572 726f         self.erro
+0001a7a0: 725f 6d65 7373 6167 6520 3d20 6572 726f  r_message = erro
+0001a7b0: 725f 6d65 7373 6167 650a 0a20 2020 2064  r_message..    d
+0001a7c0: 6566 2076 616c 6964 6174 6528 7365 6c66  ef validate(self
+0001a7d0: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
+0001a7e0: 6964 3d4e 6f6e 6529 3a0a 2020 2020 2020  id=None):.      
+0001a7f0: 2020 666f 7220 7661 6c69 6461 746f 7220    for validator 
+0001a800: 696e 2073 656c 662e 7375 6273 3a0a 2020  in self.subs:.  
+0001a810: 2020 2020 2020 2020 2020 762c 2065 203d            v, e =
+0001a820: 2076 616c 6964 6174 6f72 2876 616c 7565   validator(value
+0001a830: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0001a840: 206e 6f74 2065 3a0a 2020 2020 2020 2020   not e:.        
+0001a850: 2020 2020 2020 2020 7265 7475 726e 2076          return v
+0001a860: 0a20 2020 2020 2020 2072 6169 7365 2056  .        raise V
+0001a870: 616c 6964 6174 696f 6e45 7272 6f72 2865  alidationError(e
+0001a880: 290a 0a20 2020 2064 6566 2066 6f72 6d61  )..    def forma
+0001a890: 7474 6572 2873 656c 662c 2076 616c 7565  tter(self, value
+0001a8a0: 293a 0a20 2020 2020 2020 2023 2055 7365  ):.        # Use
+0001a8b0: 2074 6865 2066 6f72 6d61 7474 6572 206f   the formatter o
+0001a8c0: 6620 7468 6520 6669 7273 7420 7375 6276  f the first subv
+0001a8d0: 616c 6964 6174 6f72 0a20 2020 2020 2020  alidator.       
+0001a8e0: 2023 2074 6861 7420 7661 6c69 6461 7465   # that validate
+0001a8f0: 7320 7468 6520 7661 6c75 6520 616e 6420  s the value and 
+0001a900: 6861 7320 6120 666f 726d 6174 7465 720a  has a formatter.
+0001a910: 2020 2020 2020 2020 666f 7220 7661 6c69          for vali
+0001a920: 6461 746f 7220 696e 2073 656c 662e 7375  dator in self.su
+0001a930: 6273 3a0a 2020 2020 2020 2020 2020 2020  bs:.            
+0001a940: 6966 2068 6173 6174 7472 2876 616c 6964  if hasattr(valid
+0001a950: 6174 6f72 2c20 2266 6f72 6d61 7474 6572  ator, "formatter
+0001a960: 2229 2061 6e64 2076 616c 6964 6174 6f72  ") and validator
+0001a970: 2876 616c 7565 295b 315d 2069 7320 4e6f  (value)[1] is No
+0001a980: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0001a990: 2020 2020 7265 7475 726e 2076 616c 6964      return valid
+0001a9a0: 6174 6f72 2e66 6f72 6d61 7474 6572 2876  ator.formatter(v
+0001a9b0: 616c 7565 290a 0a0a 636c 6173 7320 4953  alue)...class IS
+0001a9c0: 5f45 4d50 5459 5f4f 5228 5661 6c69 6461  _EMPTY_OR(Valida
+0001a9d0: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
+0001a9e0: 2020 4475 6d6d 7920 636c 6173 7320 666f    Dummy class fo
+0001a9f0: 7220 7465 7374 696e 6720 4953 5f45 4d50  r testing IS_EMP
+0001aa00: 5459 5f4f 523a 3a0a 0a20 2020 2020 2020  TY_OR::..       
+0001aa10: 203e 3e3e 2049 535f 454d 5054 595f 4f52   >>> IS_EMPTY_OR
+0001aa20: 2849 535f 454d 4149 4c28 2929 2827 6162  (IS_EMAIL())('ab
+0001aa30: 6340 6465 662e 636f 6d27 290a 2020 2020  c@def.com').    
+0001aa40: 2020 2020 2827 6162 6340 6465 662e 636f      ('abc@def.co
+0001aa50: 6d27 2c20 4e6f 6e65 290a 2020 2020 2020  m', None).      
+0001aa60: 2020 3e3e 3e20 4953 5f45 4d50 5459 5f4f    >>> IS_EMPTY_O
+0001aa70: 5228 4953 5f45 4d41 494c 2829 2928 2720  R(IS_EMAIL())(' 
+0001aa80: 2020 2729 0a20 2020 2020 2020 2028 4e6f    ').        (No
+0001aa90: 6e65 2c20 4e6f 6e65 290a 2020 2020 2020  ne, None).      
+0001aaa0: 2020 3e3e 3e20 4953 5f45 4d50 5459 5f4f    >>> IS_EMPTY_O
+0001aab0: 5228 4953 5f45 4d41 494c 2829 2c20 6e75  R(IS_EMAIL(), nu
+0001aac0: 6c6c 3d27 6162 6327 2928 2720 2020 2729  ll='abc')('   ')
+0001aad0: 0a20 2020 2020 2020 2028 2761 6263 272c  .        ('abc',
+0001aae0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+0001aaf0: 3e3e 2049 535f 454d 5054 595f 4f52 2849  >> IS_EMPTY_OR(I
+0001ab00: 535f 454d 4149 4c28 292c 206e 756c 6c3d  S_EMAIL(), null=
+0001ab10: 2761 6263 272c 2065 6d70 7479 5f72 6567  'abc', empty_reg
+0001ab20: 6578 3d27 6465 6627 2928 2764 6566 2729  ex='def')('def')
+0001ab30: 0a20 2020 2020 2020 2028 2761 6263 272c  .        ('abc',
+0001ab40: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
+0001ab50: 3e3e 2049 535f 454d 5054 595f 4f52 2849  >> IS_EMPTY_OR(I
+0001ab60: 535f 454d 4149 4c28 2929 2827 6162 6327  S_EMAIL())('abc'
+0001ab70: 290a 2020 2020 2020 2020 2827 6162 6327  ).        ('abc'
+0001ab80: 2c20 2765 6e74 6572 2061 2076 616c 6964  , 'enter a valid
+0001ab90: 2065 6d61 696c 2061 6464 7265 7373 2729   email address')
+0001aba0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+0001abb0: 454d 5054 595f 4f52 2849 535f 454d 4149  EMPTY_OR(IS_EMAI
+0001abc0: 4c28 2929 2827 2061 6263 2027 290a 2020  L())(' abc ').  
+0001abd0: 2020 2020 2020 2827 6162 6327 2c20 2765        ('abc', 'e
+0001abe0: 6e74 6572 2061 2076 616c 6964 2065 6d61  nter a valid ema
+0001abf0: 696c 2061 6464 7265 7373 2729 0a20 2020  il address').   
+0001ac00: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+0001ac10: 696e 6974 5f5f 2873 656c 662c 206f 7468  init__(self, oth
+0001ac20: 6572 2c20 6e75 6c6c 3d4e 6f6e 652c 2065  er, null=None, e
+0001ac30: 6d70 7479 5f72 6567 6578 3d4e 6f6e 6529  mpty_regex=None)
+0001ac40: 3a0a 2020 2020 2020 2020 2873 656c 662e  :.        (self.
+0001ac50: 6f74 6865 722c 2073 656c 662e 6e75 6c6c  other, self.null
+0001ac60: 2920 3d20 286f 7468 6572 2c20 6e75 6c6c  ) = (other, null
+0001ac70: 290a 2020 2020 2020 2020 6966 2065 6d70  ).        if emp
+0001ac80: 7479 5f72 6567 6578 2069 7320 6e6f 7420  ty_regex is not 
+0001ac90: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0001aca0: 2020 7365 6c66 2e65 6d70 7479 5f72 6567    self.empty_reg
+0001acb0: 6578 203d 2072 652e 636f 6d70 696c 6528  ex = re.compile(
+0001acc0: 656d 7074 795f 7265 6765 7829 0a20 2020  empty_regex).   
+0001acd0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001ace0: 2020 2020 2020 2073 656c 662e 656d 7074         self.empt
+0001acf0: 795f 7265 6765 7820 3d20 4e6f 6e65 0a20  y_regex = None. 
+0001ad00: 2020 2020 2020 2069 6620 6861 7361 7474         if hasatt
+0001ad10: 7228 6f74 6865 722c 2022 6d75 6c74 6970  r(other, "multip
+0001ad20: 6c65 2229 3a0a 2020 2020 2020 2020 2020  le"):.          
+0001ad30: 2020 7365 6c66 2e6d 756c 7469 706c 6520    self.multiple 
+0001ad40: 3d20 6f74 6865 722e 6d75 6c74 6970 6c65  = other.multiple
+0001ad50: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
+0001ad60: 7474 7228 6f74 6865 722c 2022 6f70 7469  ttr(other, "opti
+0001ad70: 6f6e 7322 293a 0a20 2020 2020 2020 2020  ons"):.         
+0001ad80: 2020 2073 656c 662e 6f70 7469 6f6e 7320     self.options 
+0001ad90: 3d20 7365 6c66 2e5f 6f70 7469 6f6e 730a  = self._options.
+0001ada0: 0a20 2020 2064 6566 205f 6f70 7469 6f6e  .    def _option
+0001adb0: 7328 7365 6c66 2c20 2a61 7267 732c 202a  s(self, *args, *
+0001adc0: 2a6b 7761 7267 7329 3a0a 2020 2020 2020  *kwargs):.      
+0001add0: 2020 6f70 7469 6f6e 7320 3d20 7365 6c66    options = self
+0001ade0: 2e6f 7468 6572 2e6f 7074 696f 6e73 282a  .other.options(*
+0001adf0: 6172 6773 2c20 2a2a 6b77 6172 6773 290a  args, **kwargs).
+0001ae00: 2020 2020 2020 2020 6966 2028 6e6f 7420          if (not 
+0001ae10: 6f70 7469 6f6e 7320 6f72 206f 7074 696f  options or optio
+0001ae20: 6e73 5b30 5d5b 305d 2021 3d20 2222 2920  ns[0][0] != "") 
+0001ae30: 616e 6420 6e6f 7420 7365 6c66 2e6d 756c  and not self.mul
+0001ae40: 7469 706c 653a 0a20 2020 2020 2020 2020  tiple:.         
+0001ae50: 2020 206f 7074 696f 6e73 2e69 6e73 6572     options.inser
+0001ae60: 7428 302c 2028 2222 2c20 2222 2929 0a20  t(0, ("", "")). 
+0001ae70: 2020 2020 2020 2072 6574 7572 6e20 6f70         return op
+0001ae80: 7469 6f6e 730a 0a20 2020 2064 6566 2073  tions..    def s
+0001ae90: 6574 5f73 656c 665f 6964 2873 656c 662c  et_self_id(self,
+0001aea0: 2069 6429 3a0a 2020 2020 2020 2020 6966   id):.        if
+0001aeb0: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+0001aec0: 2e6f 7468 6572 2c20 286c 6973 742c 2074  .other, (list, t
+0001aed0: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
+0001aee0: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
+0001aef0: 7365 6c66 2e6f 7468 6572 3a0a 2020 2020  self.other:.    
+0001af00: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+0001af10: 6173 6174 7472 2869 7465 6d2c 2022 7365  asattr(item, "se
+0001af20: 745f 7365 6c66 5f69 6422 293a 0a20 2020  t_self_id"):.   
+0001af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af40: 2069 7465 6d2e 7365 745f 7365 6c66 5f69   item.set_self_i
+0001af50: 6428 6964 290a 2020 2020 2020 2020 656c  d(id).        el
+0001af60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0001af70: 6966 2068 6173 6174 7472 2873 656c 662e  if hasattr(self.
+0001af80: 6f74 6865 722c 2022 7365 745f 7365 6c66  other, "set_self
+0001af90: 5f69 6422 293a 0a20 2020 2020 2020 2020  _id"):.         
+0001afa0: 2020 2020 2020 2073 656c 662e 6f74 6865         self.othe
+0001afb0: 722e 7365 745f 7365 6c66 5f69 6428 6964  r.set_self_id(id
+0001afc0: 290a 0a20 2020 2064 6566 2076 616c 6964  )..    def valid
+0001afd0: 6174 6528 7365 6c66 2c20 7661 6c75 652c  ate(self, value,
+0001afe0: 2072 6563 6f72 645f 6964 3d4e 6f6e 6529   record_id=None)
+0001aff0: 3a0a 2020 2020 2020 2020 7661 6c75 652c  :.        value,
+0001b000: 2065 6d70 7479 203d 2069 735f 656d 7074   empty = is_empt
+0001b010: 7928 7661 6c75 652c 2065 6d70 7479 5f72  y(value, empty_r
+0001b020: 6567 6578 3d73 656c 662e 656d 7074 795f  egex=self.empty_
+0001b030: 7265 6765 7829 0a20 2020 2020 2020 2069  regex).        i
+0001b040: 6620 656d 7074 793a 0a20 2020 2020 2020  f empty:.       
+0001b050: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001b060: 2e6e 756c 6c0a 2020 2020 2020 2020 6966  .null.        if
+0001b070: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+0001b080: 2e6f 7468 6572 2c20 286c 6973 742c 2074  .other, (list, t
+0001b090: 7570 6c65 2929 3a0a 2020 2020 2020 2020  uple)):.        
+0001b0a0: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
+0001b0b0: 7365 6c66 2e6f 7468 6572 3a0a 2020 2020  self.other:.    
+0001b0c0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+0001b0d0: 6520 3d20 7661 6c69 6461 746f 725f 6361  e = validator_ca
+0001b0e0: 6c6c 6572 2869 7465 6d2c 2076 616c 7565  ller(item, value
+0001b0f0: 2c20 7265 636f 7264 5f69 6429 0a20 2020  , record_id).   
+0001b100: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0001b110: 7661 6c75 650a 2020 2020 2020 2020 7265  value.        re
+0001b120: 7475 726e 2076 616c 6964 6174 6f72 5f63  turn validator_c
+0001b130: 616c 6c65 7228 7365 6c66 2e6f 7468 6572  aller(self.other
+0001b140: 2c20 7661 6c75 652c 2072 6563 6f72 645f  , value, record_
+0001b150: 6964 290a 0a20 2020 2064 6566 2066 6f72  id)..    def for
+0001b160: 6d61 7474 6572 2873 656c 662c 2076 616c  matter(self, val
+0001b170: 7565 293a 0a20 2020 2020 2020 2069 6620  ue):.        if 
+0001b180: 6861 7361 7474 7228 7365 6c66 2e6f 7468  hasattr(self.oth
+0001b190: 6572 2c20 2266 6f72 6d61 7474 6572 2229  er, "formatter")
+0001b1a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0001b1b0: 7475 726e 2073 656c 662e 6f74 6865 722e  turn self.other.
+0001b1c0: 666f 726d 6174 7465 7228 7661 6c75 6529  formatter(value)
+0001b1d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001b1e0: 7661 6c75 650a 0a0a 4953 5f4e 554c 4c5f  value...IS_NULL_
+0001b1f0: 4f52 203d 2049 535f 454d 5054 595f 4f52  OR = IS_EMPTY_OR
+0001b200: 2020 2320 666f 7220 6261 636b 7761 7264    # for backward
+0001b210: 2063 6f6d 7061 7469 6269 6c69 7479 0a0a   compatibility..
+0001b220: 0a63 6c61 7373 2043 4c45 414e 5550 2856  .class CLEANUP(V
+0001b230: 616c 6964 6174 6f72 293a 0a20 2020 2022  alidator):.    "
+0001b240: 2222 0a20 2020 2045 7861 6d70 6c65 733a  "".    Examples:
+0001b250: 0a20 2020 2020 2020 2055 7365 2061 733a  .        Use as:
+0001b260: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+0001b270: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+0001b280: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+0001b290: 2072 6571 7569 7265 733d 434c 4541 4e55   requires=CLEANU
+0001b2a0: 5028 2929 0a0a 2020 2020 7265 6d6f 7665  P())..    remove
+0001b2b0: 7320 7370 6563 6961 6c20 6368 6172 6163  s special charac
+0001b2c0: 7465 7273 206f 6e20 7661 6c69 6461 7469  ters on validati
+0001b2d0: 6f6e 0a20 2020 2022 2222 0a0a 2020 2020  on.    """..    
+0001b2e0: 5245 4745 585f 434c 4541 4e55 5020 3d20  REGEX_CLEANUP = 
+0001b2f0: 225b 5e5c 7830 395c 7830 615c 7830 645c  "[^\x09\x0a\x0d\
+0001b300: 7832 302d 5c78 3765 5d22 0a0a 2020 2020  x20-\x7e]"..    
+0001b310: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+0001b320: 662c 2072 6567 6578 3d4e 6f6e 6529 3a0a  f, regex=None):.
+0001b330: 2020 2020 2020 2020 7365 6c66 2e72 6567          self.reg
+0001b340: 6578 203d 2028 0a20 2020 2020 2020 2020  ex = (.         
+0001b350: 2020 2072 652e 636f 6d70 696c 6528 7365     re.compile(se
+0001b360: 6c66 2e52 4547 4558 5f43 4c45 414e 5550  lf.REGEX_CLEANUP
+0001b370: 2920 6966 2072 6567 6578 2069 7320 4e6f  ) if regex is No
+0001b380: 6e65 2065 6c73 6520 7265 2e63 6f6d 7069  ne else re.compi
+0001b390: 6c65 2872 6567 6578 290a 2020 2020 2020  le(regex).      
+0001b3a0: 2020 290a 0a20 2020 2064 6566 2076 616c    )..    def val
+0001b3b0: 6964 6174 6528 7365 6c66 2c20 7661 6c75  idate(self, valu
+0001b3c0: 652c 2072 6563 6f72 645f 6964 3d4e 6f6e  e, record_id=Non
+0001b3d0: 6529 3a0a 2020 2020 2020 2020 7620 3d20  e):.        v = 
+0001b3e0: 7365 6c66 2e72 6567 6578 2e73 7562 2822  self.regex.sub("
+0001b3f0: 222c 2073 7472 2876 616c 7565 292e 7374  ", str(value).st
+0001b400: 7269 7028 2929 0a20 2020 2020 2020 2072  rip()).        r
+0001b410: 6574 7572 6e20 760a 0a0a 6465 6620 7062  eturn v...def pb
+0001b420: 6b64 6632 5f68 6578 2864 6174 612c 2073  kdf2_hex(data, s
+0001b430: 616c 742c 2069 7465 7261 7469 6f6e 733d  alt, iterations=
+0001b440: 3130 3030 2c20 6b65 796c 656e 3d32 342c  1000, keylen=24,
+0001b450: 2068 6173 6866 756e 633d 4e6f 6e65 293a   hashfunc=None):
+0001b460: 0a20 2020 2068 6173 6866 756e 6320 3d20  .    hashfunc = 
+0001b470: 6861 7368 6675 6e63 206f 7220 6861 7368  hashfunc or hash
+0001b480: 6c69 622e 7368 6131 0a20 2020 2068 6d61  lib.sha1.    hma
+0001b490: 6320 3d20 6861 7368 6c69 622e 7062 6b64  c = hashlib.pbkd
+0001b4a0: 6632 5f68 6d61 6328 0a20 2020 2020 2020  f2_hmac(.       
+0001b4b0: 2068 6173 6866 756e 6328 292e 6e61 6d65   hashfunc().name
+0001b4c0: 2c20 746f 5f62 7974 6573 2864 6174 6129  , to_bytes(data)
+0001b4d0: 2c20 746f 5f62 7974 6573 2873 616c 7429  , to_bytes(salt)
+0001b4e0: 2c20 6974 6572 6174 696f 6e73 2c20 6b65  , iterations, ke
+0001b4f0: 796c 656e 0a20 2020 2029 0a20 2020 2072  ylen.    ).    r
+0001b500: 6574 7572 6e20 6269 6e61 7363 6969 2e68  eturn binascii.h
+0001b510: 6578 6c69 6679 2868 6d61 6329 0a0a 0a64  exlify(hmac)...d
+0001b520: 6566 2073 696d 706c 655f 6861 7368 2874  ef simple_hash(t
+0001b530: 6578 742c 206b 6579 3d22 222c 2073 616c  ext, key="", sal
+0001b540: 743d 2222 2c20 6469 6765 7374 5f61 6c67  t="", digest_alg
+0001b550: 3d22 6d64 3522 293a 0a20 2020 2022 2222  ="md5"):.    """
+0001b560: 4765 6e65 7261 7465 2068 6173 6820 7769  Generate hash wi
+0001b570: 7468 2074 6865 2067 6976 656e 2074 6578  th the given tex
+0001b580: 7420 7573 696e 6720 7468 6520 7370 6563  t using the spec
+0001b590: 6966 6965 6420 6469 6765 7374 2061 6c67  ified digest alg
+0001b5a0: 6f72 6974 686d 2e22 2222 0a20 2020 2074  orithm.""".    t
+0001b5b0: 6578 7420 3d20 746f 5f62 7974 6573 2874  ext = to_bytes(t
+0001b5c0: 6578 7429 0a20 2020 206b 6579 203d 2074  ext).    key = t
+0001b5d0: 6f5f 6279 7465 7328 6b65 7929 0a20 2020  o_bytes(key).   
+0001b5e0: 2073 616c 7420 3d20 746f 5f62 7974 6573   salt = to_bytes
+0001b5f0: 2873 616c 7429 0a20 2020 2069 6620 6e6f  (salt).    if no
+0001b600: 7420 6469 6765 7374 5f61 6c67 3a0a 2020  t digest_alg:.  
+0001b610: 2020 2020 2020 7261 6973 6520 5275 6e74        raise Runt
+0001b620: 696d 6545 7272 6f72 2822 7369 6d70 6c65  imeError("simple
+0001b630: 5f68 6173 6820 7769 7468 2064 6967 6573  _hash with diges
+0001b640: 745f 616c 673d 4e6f 6e65 2229 0a20 2020  t_alg=None").   
+0001b650: 2065 6c69 6620 6e6f 7420 6973 696e 7374   elif not isinst
+0001b660: 616e 6365 2864 6967 6573 745f 616c 672c  ance(digest_alg,
+0001b670: 2073 7472 293a 2020 2320 6d61 6e75 616c   str):  # manual
+0001b680: 2061 7070 726f 6163 680a 2020 2020 2020   approach.      
+0001b690: 2020 6820 3d20 6469 6765 7374 5f61 6c67    h = digest_alg
+0001b6a0: 2874 6578 7420 2b20 6b65 7920 2b20 7361  (text + key + sa
+0001b6b0: 6c74 290a 2020 2020 656c 6966 2064 6967  lt).    elif dig
+0001b6c0: 6573 745f 616c 672e 7374 6172 7473 7769  est_alg.startswi
+0001b6d0: 7468 2822 7062 6b64 6632 2229 3a20 2023  th("pbkdf2"):  #
+0001b6e0: 206c 6174 6573 7420 616e 6420 636f 6f6c   latest and cool
+0001b6f0: 6573 7421 0a20 2020 2020 2020 2069 7465  est!.        ite
+0001b700: 7261 7469 6f6e 732c 206b 6579 6c65 6e2c  rations, keylen,
+0001b710: 2061 6c67 203d 2064 6967 6573 745f 616c   alg = digest_al
+0001b720: 675b 373a 2d31 5d2e 7370 6c69 7428 222c  g[7:-1].split(",
+0001b730: 2229 0a20 2020 2020 2020 2072 6574 7572  ").        retur
+0001b740: 6e20 746f 5f6e 6174 6976 6528 0a20 2020  n to_native(.   
+0001b750: 2020 2020 2020 2020 2070 626b 6466 325f           pbkdf2_
+0001b760: 6865 7828 7465 7874 2c20 7361 6c74 2c20  hex(text, salt, 
+0001b770: 696e 7428 6974 6572 6174 696f 6e73 292c  int(iterations),
+0001b780: 2069 6e74 286b 6579 6c65 6e29 2c20 6765   int(keylen), ge
+0001b790: 745f 6469 6765 7374 2861 6c67 2929 0a20  t_digest(alg)). 
+0001b7a0: 2020 2020 2020 2029 0a20 2020 2065 6c69         ).    eli
+0001b7b0: 6620 6b65 793a 2020 2320 7573 6520 686d  f key:  # use hm
+0001b7c0: 6163 0a20 2020 2020 2020 2064 6967 6573  ac.        diges
+0001b7d0: 745f 616c 6720 3d20 6765 745f 6469 6765  t_alg = get_dige
+0001b7e0: 7374 2864 6967 6573 745f 616c 6729 0a20  st(digest_alg). 
+0001b7f0: 2020 2020 2020 2068 203d 2068 6d61 632e         h = hmac.
+0001b800: 6e65 7728 6b65 7920 2b20 7361 6c74 2c20  new(key + salt, 
+0001b810: 7465 7874 2c20 6469 6765 7374 5f61 6c67  text, digest_alg
+0001b820: 290a 2020 2020 656c 7365 3a20 2023 2063  ).    else:  # c
+0001b830: 6f6d 7061 7469 626c 6520 7769 7468 2074  ompatible with t
+0001b840: 6869 7264 2070 6172 7479 2073 7973 7465  hird party syste
+0001b850: 6d73 0a20 2020 2020 2020 2068 203d 2067  ms.        h = g
+0001b860: 6574 5f64 6967 6573 7428 6469 6765 7374  et_digest(digest
+0001b870: 5f61 6c67 2928 290a 2020 2020 2020 2020  _alg)().        
+0001b880: 682e 7570 6461 7465 2874 6578 7420 2b20  h.update(text + 
+0001b890: 7361 6c74 290a 2020 2020 7265 7475 726e  salt).    return
+0001b8a0: 2068 2e68 6578 6469 6765 7374 2829 0a0a   h.hexdigest()..
+0001b8b0: 0a64 6566 2067 6574 5f64 6967 6573 7428  .def get_digest(
+0001b8c0: 7661 6c75 6529 3a0a 2020 2020 2222 2252  value):.    """R
+0001b8d0: 6574 7572 6e20 6120 6861 7368 6c69 6220  eturn a hashlib 
+0001b8e0: 6469 6765 7374 2061 6c67 6f72 6974 686d  digest algorithm
+0001b8f0: 2066 726f 6d20 6120 7374 7269 6e67 2e22   from a string."
+0001b900: 2222 0a20 2020 2069 6620 6973 696e 7374  "".    if isinst
+0001b910: 616e 6365 2876 616c 7565 2c20 7374 7229  ance(value, str)
+0001b920: 3a0a 2020 2020 2020 2020 7661 6c75 6520  :.        value 
+0001b930: 3d20 7661 6c75 652e 6c6f 7765 7228 290a  = value.lower().
+0001b940: 2020 2020 2020 2020 6966 2076 616c 7565          if value
+0001b950: 206e 6f74 2069 6e20 2822 6d64 3522 2c20   not in ("md5", 
+0001b960: 2273 6861 3122 2c20 2273 6861 3232 3422  "sha1", "sha224"
+0001b970: 2c20 2273 6861 3235 3622 2c20 2273 6861  , "sha256", "sha
+0001b980: 3338 3422 2c20 2273 6861 3531 3222 293a  384", "sha512"):
+0001b990: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0001b9a0: 7365 2056 616c 7565 4572 726f 7228 2249  se ValueError("I
+0001b9b0: 6e76 616c 6964 2064 6967 6573 7420 616c  nvalid digest al
+0001b9c0: 676f 7269 7468 6d3a 2025 7322 2025 2076  gorithm: %s" % v
+0001b9d0: 616c 7565 290a 2020 2020 2020 2020 7661  alue).        va
+0001b9e0: 6c75 6520 3d20 6765 7461 7474 7228 6861  lue = getattr(ha
+0001b9f0: 7368 6c69 622c 2076 616c 7565 290a 2020  shlib, value).  
+0001ba00: 2020 7265 7475 726e 2076 616c 7565 0a0a    return value..
+0001ba10: 0a44 4947 4553 545f 414c 475f 4259 5f53  .DIGEST_ALG_BY_S
+0001ba20: 495a 4520 3d20 7b0a 2020 2020 3132 3820  IZE = {.    128 
+0001ba30: 2f2f 2034 3a20 226d 6435 222c 0a20 2020  // 4: "md5",.   
+0001ba40: 2031 3630 202f 2f20 343a 2022 7368 6131   160 // 4: "sha1
+0001ba50: 222c 0a20 2020 2032 3234 202f 2f20 343a  ",.    224 // 4:
+0001ba60: 2022 7368 6132 3234 222c 0a20 2020 2032   "sha224",.    2
+0001ba70: 3536 202f 2f20 343a 2022 7368 6132 3536  56 // 4: "sha256
+0001ba80: 222c 0a20 2020 2033 3834 202f 2f20 343a  ",.    384 // 4:
+0001ba90: 2022 7368 6133 3834 222c 0a20 2020 2035   "sha384",.    5
+0001baa0: 3132 202f 2f20 343a 2022 7368 6135 3132  12 // 4: "sha512
+0001bab0: 222c 0a7d 0a0a 0a63 6c61 7373 204c 617a  ",.}...class Laz
+0001bac0: 7943 7279 7074 286f 626a 6563 7429 3a0a  yCrypt(object):.
+0001bad0: 2020 2020 2222 220a 2020 2020 5374 6f72      """.    Stor
+0001bae0: 6573 2061 206c 617a 7920 7061 7373 776f  es a lazy passwo
+0001baf0: 7264 2068 6173 680a 2020 2020 2222 220a  rd hash.    """.
+0001bb00: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0001bb10: 5f28 7365 6c66 2c20 6372 7970 742c 2070  _(self, crypt, p
+0001bb20: 6173 7377 6f72 6429 3a0a 2020 2020 2020  assword):.      
+0001bb30: 2020 2222 220a 2020 2020 2020 2020 6372    """.        cr
+0001bb40: 7970 7420 6973 2061 6e20 696e 7374 616e  ypt is an instan
+0001bb50: 6365 206f 6620 7468 6520 4352 5950 5420  ce of the CRYPT 
+0001bb60: 7661 6c69 6461 746f 722c 0a20 2020 2020  validator,.     
+0001bb70: 2020 2070 6173 7377 6f72 6420 6973 2074     password is t
+0001bb80: 6865 2070 6173 7377 6f72 6420 6173 2069  he password as i
+0001bb90: 6e73 6572 7465 6420 6279 2074 6865 2075  nserted by the u
+0001bba0: 7365 720a 2020 2020 2020 2020 2222 220a  ser.        """.
+0001bbb0: 2020 2020 2020 2020 7365 6c66 2e63 7279          self.cry
+0001bbc0: 7074 203d 2063 7279 7074 0a20 2020 2020  pt = crypt.     
+0001bbd0: 2020 2073 656c 662e 7061 7373 776f 7264     self.password
+0001bbe0: 203d 2070 6173 7377 6f72 640a 2020 2020   = password.    
+0001bbf0: 2020 2020 7365 6c66 2e63 7279 7074 6564      self.crypted
+0001bc00: 203d 204e 6f6e 650a 0a20 2020 2064 6566   = None..    def
+0001bc10: 205f 5f73 7472 5f5f 2873 656c 6629 3a0a   __str__(self):.
+0001bc20: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001bc30: 2020 2020 456e 6372 7970 7465 6420 7365      Encrypted se
+0001bc40: 6c66 2e70 6173 7377 6f72 6420 616e 6420  lf.password and 
+0001bc50: 6361 6368 6573 2069 7420 696e 2073 656c  caches it in sel
+0001bc60: 662e 6372 7970 7465 642e 0a20 2020 2020  f.crypted..     
+0001bc70: 2020 2049 6620 7365 6c66 2e63 7279 7074     If self.crypt
+0001bc80: 2e73 616c 7420 7468 6520 6f75 7470 7574  .salt the output
+0001bc90: 2069 7320 696e 2074 6865 2066 6f72 6d61   is in the forma
+0001bca0: 7420 3c61 6c67 6f72 6974 686d 3e24 3c73  t <algorithm>$<s
+0001bcb0: 616c 743e 243c 6861 7368 3e0a 0a20 2020  alt>$<hash>..   
+0001bcc0: 2020 2020 2054 7279 2067 6574 2074 6865       Try get the
+0001bcd0: 2064 6967 6573 745f 616c 6720 6672 6f6d   digest_alg from
+0001bce0: 2074 6865 206b 6579 2028 6966 2069 7420   the key (if it 
+0001bcf0: 6578 6973 7473 290a 2020 2020 2020 2020  exists).        
+0001bd00: 656c 7365 2061 7373 756d 6520 7468 6520  else assume the 
+0001bd10: 6465 6661 756c 7420 6469 6765 7374 5f61  default digest_a
+0001bd20: 6c67 2e20 4966 206e 6f74 206b 6579 2061  lg. If not key a
+0001bd30: 7420 616c 6c2c 2073 6574 206b 6579 3d27  t all, set key='
+0001bd40: 270a 0a20 2020 2020 2020 2049 6620 6120  '..        If a 
+0001bd50: 7361 6c74 2069 7320 7370 6563 6966 6965  salt is specifie
+0001bd60: 6420 7573 6520 6974 2c20 6966 2073 616c  d use it, if sal
+0001bd70: 7420 6973 2054 7275 652c 2073 6574 2073  t is True, set s
+0001bd80: 616c 7420 746f 2075 7569 640a 2020 2020  alt to uuid.    
+0001bd90: 2020 2020 2874 6869 7320 7368 6f75 6c64      (this should
+0001bda0: 2061 6c6c 2062 6520 6261 636b 7761 7264   all be backward
+0001bdb0: 2063 6f6d 7061 7469 626c 6529 0a0a 2020   compatible)..  
+0001bdc0: 2020 2020 2020 4f70 7469 6f6e 733a 0a20        Options:. 
+0001bdd0: 2020 2020 2020 206b 6579 203d 2027 7575         key = 'uu
+0001bde0: 6964 270a 2020 2020 2020 2020 6b65 7920  id'.        key 
+0001bdf0: 3d20 276d 6435 3a75 7569 6427 0a20 2020  = 'md5:uuid'.   
+0001be00: 2020 2020 206b 6579 203d 2027 7368 6135       key = 'sha5
+0001be10: 3132 3a75 7569 6427 0a20 2020 2020 2020  12:uuid'.       
+0001be20: 202e 2e2e 0a20 2020 2020 2020 206b 6579   ....        key
+0001be30: 203d 2027 7062 6b64 6632 2831 3030 302c   = 'pbkdf2(1000,
+0001be40: 3634 2c73 6861 3531 3229 3a75 7569 6427  64,sha512):uuid'
+0001be50: 2031 3030 3020 6974 6572 6174 696f 6e73   1000 iterations
+0001be60: 2061 6e64 2036 3420 6368 6172 7320 6c65   and 64 chars le
+0001be70: 6e67 7468 0a20 2020 2020 2020 2022 2222  ngth.        """
+0001be80: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+0001be90: 2e63 7279 7074 6564 3a0a 2020 2020 2020  .crypted:.      
+0001bea0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001beb0: 662e 6372 7970 7465 640a 2020 2020 2020  f.crypted.      
+0001bec0: 2020 6966 2073 656c 662e 6372 7970 742e    if self.crypt.
+0001bed0: 6b65 793a 0a20 2020 2020 2020 2020 2020  key:.           
+0001bee0: 2069 6620 223a 2220 696e 2073 656c 662e   if ":" in self.
+0001bef0: 6372 7970 742e 6b65 793a 0a20 2020 2020  crypt.key:.     
+0001bf00: 2020 2020 2020 2020 2020 2064 6967 6573             diges
+0001bf10: 745f 616c 672c 206b 6579 203d 2073 656c  t_alg, key = sel
+0001bf20: 662e 6372 7970 742e 6b65 792e 7370 6c69  f.crypt.key.spli
+0001bf30: 7428 223a 222c 2031 290a 2020 2020 2020  t(":", 1).      
+0001bf40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001bf50: 2020 2020 2020 2020 2020 2020 6469 6765              dige
+0001bf60: 7374 5f61 6c67 2c20 6b65 7920 3d20 7365  st_alg, key = se
+0001bf70: 6c66 2e63 7279 7074 2e64 6967 6573 745f  lf.crypt.digest_
+0001bf80: 616c 672c 2073 656c 662e 6372 7970 742e  alg, self.crypt.
+0001bf90: 6b65 790a 2020 2020 2020 2020 656c 7365  key.        else
+0001bfa0: 3a0a 2020 2020 2020 2020 2020 2020 6469  :.            di
+0001bfb0: 6765 7374 5f61 6c67 2c20 6b65 7920 3d20  gest_alg, key = 
+0001bfc0: 7365 6c66 2e63 7279 7074 2e64 6967 6573  self.crypt.diges
+0001bfd0: 745f 616c 672c 2022 220a 2020 2020 2020  t_alg, "".      
+0001bfe0: 2020 6966 2073 656c 662e 6372 7970 742e    if self.crypt.
+0001bff0: 7361 6c74 3a0a 2020 2020 2020 2020 2020  salt:.          
+0001c000: 2020 6966 2073 656c 662e 6372 7970 742e    if self.crypt.
+0001c010: 7361 6c74 2069 7320 5472 7565 3a0a 2020  salt is True:.  
+0001c020: 2020 2020 2020 2020 2020 2020 2020 7361                sa
+0001c030: 6c74 203d 2073 7472 2875 7569 642e 7575  lt = str(uuid.uu
+0001c040: 6964 3428 2929 2e72 6570 6c61 6365 2822  id4()).replace("
+0001c050: 2d22 2c20 2222 295b 2d31 363a 5d0a 2020  -", "")[-16:].  
+0001c060: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0001c070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c080: 7361 6c74 203d 2073 656c 662e 6372 7970  salt = self.cryp
+0001c090: 742e 7361 6c74 0a20 2020 2020 2020 2065  t.salt.        e
+0001c0a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001c0b0: 2073 616c 7420 3d20 2222 0a20 2020 2020   salt = "".     
+0001c0c0: 2020 2068 6173 6865 6420 3d20 7369 6d70     hashed = simp
+0001c0d0: 6c65 5f68 6173 6828 7365 6c66 2e70 6173  le_hash(self.pas
+0001c0e0: 7377 6f72 642c 206b 6579 2c20 7361 6c74  sword, key, salt
+0001c0f0: 2c20 6469 6765 7374 5f61 6c67 290a 2020  , digest_alg).  
+0001c100: 2020 2020 2020 7365 6c66 2e63 7279 7074        self.crypt
+0001c110: 6564 203d 2022 2573 2425 7324 2573 2220  ed = "%s$%s$%s" 
+0001c120: 2520 2864 6967 6573 745f 616c 672c 2073  % (digest_alg, s
+0001c130: 616c 742c 2068 6173 6865 6429 0a20 2020  alt, hashed).   
+0001c140: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001c150: 2e63 7279 7074 6564 0a0a 2020 2020 6465  .crypted..    de
+0001c160: 6620 5f5f 6571 5f5f 2873 656c 662c 2073  f __eq__(self, s
+0001c170: 746f 7265 645f 7061 7373 776f 7264 293a  tored_password):
+0001c180: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0001c190: 2020 2020 2063 6f6d 7061 7265 7320 7468       compares th
+0001c1a0: 6520 6375 7272 656e 7420 6c61 7a79 2063  e current lazy c
+0001c1b0: 7279 7074 6564 2070 6173 7377 6f72 6420  rypted password 
+0001c1c0: 7769 7468 2061 2073 746f 7265 6420 7061  with a stored pa
+0001c1d0: 7373 776f 7264 0a20 2020 2020 2020 2022  ssword.        "
+0001c1e0: 2222 0a0a 2020 2020 2020 2020 2320 4c61  ""..        # La
+0001c1f0: 7a79 4372 7970 7420 6f62 6a65 6374 7320  zyCrypt objects 
+0001c200: 636f 6d70 6172 6973 6f6e 0a20 2020 2020  comparison.     
+0001c210: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+0001c220: 2873 746f 7265 645f 7061 7373 776f 7264  (stored_password
+0001c230: 2c20 7365 6c66 2e5f 5f63 6c61 7373 5f5f  , self.__class__
+0001c240: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0001c250: 6574 7572 6e20 2873 656c 6620 6973 2073  eturn (self is s
+0001c260: 746f 7265 645f 7061 7373 776f 7264 2920  tored_password) 
+0001c270: 6f72 2028 0a20 2020 2020 2020 2020 2020  or (.           
+0001c280: 2020 2020 2028 7365 6c66 2e63 7279 7074       (self.crypt
+0001c290: 2e6b 6579 203d 3d20 7374 6f72 6564 5f70  .key == stored_p
+0001c2a0: 6173 7377 6f72 642e 6372 7970 742e 6b65  assword.crypt.ke
+0001c2b0: 7929 0a20 2020 2020 2020 2020 2020 2020  y).             
+0001c2c0: 2020 2061 6e64 2028 7365 6c66 2e70 6173     and (self.pas
+0001c2d0: 7377 6f72 6420 3d3d 2073 746f 7265 645f  sword == stored_
+0001c2e0: 7061 7373 776f 7264 2e70 6173 7377 6f72  password.passwor
+0001c2f0: 6429 0a20 2020 2020 2020 2020 2020 2029  d).            )
+0001c300: 0a0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+0001c310: 662e 6372 7970 742e 6b65 793a 0a20 2020  f.crypt.key:.   
+0001c320: 2020 2020 2020 2020 2069 6620 223a 2220           if ":" 
+0001c330: 696e 2073 656c 662e 6372 7970 742e 6b65  in self.crypt.ke
+0001c340: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
+0001c350: 2020 206b 6579 203d 2073 656c 662e 6372     key = self.cr
+0001c360: 7970 742e 6b65 792e 7370 6c69 7428 223a  ypt.key.split(":
+0001c370: 2229 5b31 5d0a 2020 2020 2020 2020 2020  ")[1].          
+0001c380: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001c390: 2020 2020 2020 2020 6b65 7920 3d20 7365          key = se
+0001c3a0: 6c66 2e63 7279 7074 2e6b 6579 0a20 2020  lf.crypt.key.   
+0001c3b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0001c3c0: 2020 2020 2020 206b 6579 203d 2022 220a         key = "".
+0001c3d0: 2020 2020 2020 2020 6966 2073 746f 7265          if store
+0001c3e0: 645f 7061 7373 776f 7264 2069 7320 4e6f  d_password is No
+0001c3f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0001c400: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+0001c410: 2020 2020 2065 6c69 6620 7374 6f72 6564       elif stored
+0001c420: 5f70 6173 7377 6f72 642e 636f 756e 7428  _password.count(
+0001c430: 2224 2229 203d 3d20 323a 0a20 2020 2020  "$") == 2:.     
+0001c440: 2020 2020 2020 2028 6469 6765 7374 5f61         (digest_a
+0001c450: 6c67 2c20 7361 6c74 2c20 6861 7368 2920  lg, salt, hash) 
+0001c460: 3d20 7374 6f72 6564 5f70 6173 7377 6f72  = stored_passwor
+0001c470: 642e 7370 6c69 7428 2224 2229 0a20 2020  d.split("$").   
+0001c480: 2020 2020 2020 2020 2068 203d 2073 696d           h = sim
+0001c490: 706c 655f 6861 7368 2873 656c 662e 7061  ple_hash(self.pa
+0001c4a0: 7373 776f 7264 2c20 6b65 792c 2073 616c  ssword, key, sal
+0001c4b0: 742c 2064 6967 6573 745f 616c 6729 0a20  t, digest_alg). 
+0001c4c0: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
+0001c4d0: 7061 7373 203d 2022 2573 2425 7324 2573  pass = "%s$%s$%s
+0001c4e0: 2220 2520 2864 6967 6573 745f 616c 672c  " % (digest_alg,
+0001c4f0: 2073 616c 742c 2068 290a 2020 2020 2020   salt, h).      
+0001c500: 2020 656c 7365 3a20 2023 206e 6f20 7361    else:  # no sa
+0001c510: 6c74 696e 670a 2020 2020 2020 2020 2020  lting.          
+0001c520: 2020 2320 6775 6573 7320 6469 6765 7374    # guess digest
+0001c530: 5f61 6c67 0a20 2020 2020 2020 2020 2020  _alg.           
+0001c540: 2064 6967 6573 745f 616c 6720 3d20 4449   digest_alg = DI
+0001c550: 4745 5354 5f41 4c47 5f42 595f 5349 5a45  GEST_ALG_BY_SIZE
+0001c560: 2e67 6574 286c 656e 2873 746f 7265 645f  .get(len(stored_
+0001c570: 7061 7373 776f 7264 292c 204e 6f6e 6529  password), None)
+0001c580: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001c590: 6e6f 7420 6469 6765 7374 5f61 6c67 3a0a  not digest_alg:.
+0001c5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c5b0: 7265 7475 726e 2046 616c 7365 0a20 2020  return False.   
+0001c5c0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+0001c5d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001c5e0: 656d 705f 7061 7373 203d 2073 696d 706c  emp_pass = simpl
+0001c5f0: 655f 6861 7368 2873 656c 662e 7061 7373  e_hash(self.pass
+0001c600: 776f 7264 2c20 6b65 792c 2022 222c 2064  word, key, "", d
+0001c610: 6967 6573 745f 616c 6729 0a20 2020 2020  igest_alg).     
+0001c620: 2020 2072 6574 7572 6e20 7465 6d70 5f70     return temp_p
+0001c630: 6173 7320 3d3d 2073 746f 7265 645f 7061  ass == stored_pa
+0001c640: 7373 776f 7264 0a0a 2020 2020 6465 6620  ssword..    def 
+0001c650: 5f5f 6e65 5f5f 2873 656c 662c 206f 7468  __ne__(self, oth
+0001c660: 6572 293a 0a20 2020 2020 2020 2072 6574  er):.        ret
+0001c670: 7572 6e20 6e6f 7420 7365 6c66 2e5f 5f65  urn not self.__e
+0001c680: 715f 5f28 6f74 6865 7229 0a0a 0a63 6c61  q__(other)...cla
+0001c690: 7373 2043 5259 5054 2856 616c 6964 6174  ss CRYPT(Validat
+0001c6a0: 6f72 293a 0a20 2020 2022 2222 0a20 2020  or):.    """.   
+0001c6b0: 2045 7861 6d70 6c65 733a 0a20 2020 2020   Examples:.     
+0001c6c0: 2020 2055 7365 2061 733a 3a0a 0a20 2020     Use as::..   
+0001c6d0: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
+0001c6e0: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
+0001c6f0: 6d65 3d27 6e61 6d65 272c 2072 6571 7569  me='name', requi
+0001c700: 7265 733d 4352 5950 5428 2929 0a0a 2020  res=CRYPT())..  
+0001c710: 2020 656e 636f 6465 7320 7468 6520 7661    encodes the va
+0001c720: 6c75 6520 6f6e 2076 616c 6964 6174 696f  lue on validatio
+0001c730: 6e20 7769 7468 2061 2064 6967 6573 742e  n with a digest.
+0001c740: 0a0a 2020 2020 4966 206e 6f20 6172 6775  ..    If no argu
+0001c750: 6d65 6e74 7320 6172 6520 7072 6f76 6964  ments are provid
+0001c760: 6564 2043 5259 5054 2075 7365 7320 7468  ed CRYPT uses th
+0001c770: 6520 4d44 3520 616c 676f 7269 7468 6d2e  e MD5 algorithm.
+0001c780: 0a20 2020 2049 6620 7468 6520 6b65 7920  .    If the key 
+0001c790: 6172 6775 6d65 6e74 2069 7320 7072 6f76  argument is prov
+0001c7a0: 6964 6564 2074 6865 2048 4d41 432b 4d44  ided the HMAC+MD
+0001c7b0: 3520 616c 676f 7269 7468 6d20 6973 2075  5 algorithm is u
+0001c7c0: 7365 642e 0a20 2020 2049 6620 7468 6520  sed..    If the 
+0001c7d0: 6469 6765 7374 5f61 6c67 2069 7320 7370  digest_alg is sp
+0001c7e0: 6563 6966 6965 6420 7468 6973 2069 7320  ecified this is 
+0001c7f0: 7573 6564 2074 6f20 7265 706c 6163 6520  used to replace 
+0001c800: 7468 650a 2020 2020 4d44 3520 7769 7468  the.    MD5 with
+0001c810: 2c20 666f 7220 6578 616d 706c 652c 2053  , for example, S
+0001c820: 4841 3531 322e 2054 6865 2064 6967 6573  HA512. The diges
+0001c830: 745f 616c 6720 6361 6e20 6265 0a20 2020  t_alg can be.   
+0001c840: 2074 6865 206e 616d 6520 6f66 2061 2068   the name of a h
+0001c850: 6173 686c 6962 2061 6c67 6f72 6974 686d  ashlib algorithm
+0001c860: 2061 7320 6120 7374 7269 6e67 206f 7220   as a string or 
+0001c870: 7468 6520 616c 676f 7269 7468 6d20 6974  the algorithm it
+0001c880: 7365 6c66 2e0a 0a20 2020 206d 696e 5f6c  self...    min_l
+0001c890: 656e 6774 6820 6973 2074 6865 206d 696e  ength is the min
+0001c8a0: 696d 616c 2070 6173 7377 6f72 6420 6c65  imal password le
+0001c8b0: 6e67 7468 2028 6465 6661 756c 7420 3429  ngth (default 4)
+0001c8c0: 202d 2049 535f 5354 524f 4e47 2066 6f72   - IS_STRONG for
+0001c8d0: 2073 6572 696f 7573 2073 6563 7572 6974   serious securit
+0001c8e0: 790a 2020 2020 6572 726f 725f 6d65 7373  y.    error_mess
+0001c8f0: 6167 6520 6973 2074 6865 206d 6573 7361  age is the messa
+0001c900: 6765 2069 6620 7061 7373 776f 7264 2069  ge if password i
+0001c910: 7320 746f 6f20 7368 6f72 740a 0a20 2020  s too short..   
+0001c920: 204e 6f74 6963 6520 7468 6174 2061 6e20   Notice that an 
+0001c930: 656d 7074 7920 7061 7373 776f 7264 2069  empty password i
+0001c940: 7320 6163 6365 7074 6564 2062 7574 2069  s accepted but i
+0001c950: 6e76 616c 6964 2e20 4974 2077 696c 6c20  nvalid. It will 
+0001c960: 6e6f 7420 616c 6c6f 7720 6c6f 6769 6e20  not allow login 
+0001c970: 6261 636b 2e0a 2020 2020 5374 6f72 6573  back..    Stores
+0001c980: 206a 756e 6b20 6173 2068 6173 6865 6420   junk as hashed 
+0001c990: 7061 7373 776f 7264 2e0a 0a20 2020 2053  password...    S
+0001c9a0: 7065 6369 6679 2061 6e20 616c 676f 7269  pecify an algori
+0001c9b0: 7468 6d20 6f72 2062 7920 6465 6661 756c  thm or by defaul
+0001c9c0: 7420 7765 2077 696c 6c20 7573 6520 7368  t we will use sh
+0001c9d0: 6135 3132 2e0a 0a20 2020 2054 7970 6963  a512...    Typic
+0001c9e0: 616c 2061 7661 696c 6162 6c65 2061 6c67  al available alg
+0001c9f0: 6f72 6974 686d 733a 0a20 2020 2020 206d  orithms:.      m
+0001ca00: 6435 2c20 7368 6131 2c20 7368 6132 3234  d5, sha1, sha224
+0001ca10: 2c20 7368 6132 3536 2c20 7368 6133 3834  , sha256, sha384
+0001ca20: 2c20 7368 6135 3132 0a0a 2020 2020 4966  , sha512..    If
+0001ca30: 2073 616c 742c 2069 7420 6861 7368 6573   salt, it hashes
+0001ca40: 2061 2070 6173 7377 6f72 6420 7769 7468   a password with
+0001ca50: 2061 2073 616c 742e 0a20 2020 2049 6620   a salt..    If 
+0001ca60: 7361 6c74 2069 7320 5472 7565 2c20 7468  salt is True, th
+0001ca70: 6973 206d 6574 686f 6420 7769 6c6c 2061  is method will a
+0001ca80: 7574 6f6d 6174 6963 616c 6c79 2067 656e  utomatically gen
+0001ca90: 6572 6174 6520 6f6e 652e 0a20 2020 2045  erate one..    E
+0001caa0: 6974 6865 7220 6361 7365 2069 7420 7265  ither case it re
+0001cab0: 7475 726e 7320 616e 2065 6e63 7279 7074  turns an encrypt
+0001cac0: 6564 2070 6173 7377 6f72 6420 7374 7269  ed password stri
+0001cad0: 6e67 2069 6e20 7468 6520 666f 6c6c 6f77  ng in the follow
+0001cae0: 696e 6720 666f 726d 6174 3a0a 0a20 2020  ing format:..   
+0001caf0: 2020 203c 616c 676f 7269 7468 6d3e 243c     <algorithm>$<
+0001cb00: 7361 6c74 3e24 3c68 6173 683e 0a0a 2020  salt>$<hash>..  
+0001cb10: 2020 496d 706f 7274 616e 743a 2068 6173    Important: has
+0001cb20: 6865 6420 7061 7373 776f 7264 2069 7320  hed password is 
+0001cb30: 7265 7475 726e 6564 2061 7320 6120 4c61  returned as a La
+0001cb40: 7a79 4372 7970 7420 6f62 6a65 6374 2061  zyCrypt object a
+0001cb50: 6e64 2063 6f6d 7075 7465 6420 6f6e 6c79  nd computed only
+0001cb60: 2069 6620 6e65 6564 6564 2e0a 2020 2020   if needed..    
+0001cb70: 5468 6520 4c61 7379 4372 7970 7420 6f62  The LasyCrypt ob
+0001cb80: 6a65 6374 2061 6c73 6f20 6b6e 6f77 7320  ject also knows 
+0001cb90: 686f 7720 746f 2063 6f6d 7061 7265 2069  how to compare i
+0001cba0: 7473 656c 6620 7769 7468 2061 6e20 6578  tself with an ex
+0001cbb0: 6973 7469 6e67 2073 616c 7465 6420 7061  isting salted pa
+0001cbc0: 7373 776f 7264 0a0a 2020 2020 5375 7070  ssword..    Supp
+0001cbd0: 6f72 7473 2073 7461 6e64 6172 6420 616c  orts standard al
+0001cbe0: 676f 7269 7468 6d73 0a0a 2020 2020 2020  gorithms..      
+0001cbf0: 2020 3e3e 3e20 666f 7220 616c 6720 696e    >>> for alg in
+0001cc00: 2028 276d 6435 272c 2773 6861 3127 2c27   ('md5','sha1','
+0001cc10: 7368 6132 3536 272c 2773 6861 3338 3427  sha256','sha384'
+0001cc20: 2c27 7368 6135 3132 2729 3a0a 2020 2020  ,'sha512'):.    
+0001cc30: 2020 2020 2e2e 2e20 2020 2020 7072 696e      ...     prin
+0001cc40: 7428 7374 7228 4352 5950 5428 6469 6765  t(str(CRYPT(dige
+0001cc50: 7374 5f61 6c67 3d61 6c67 2c73 616c 743d  st_alg=alg,salt=
+0001cc60: 5472 7565 2928 2774 6573 7427 295b 305d  True)('test')[0]
+0001cc70: 2929 0a20 2020 2020 2020 206d 6435 242e  )).        md5$.
+0001cc80: 2e2e 242e 2e2e 0a20 2020 2020 2020 2073  ..$....        s
+0001cc90: 6861 3124 2e2e 2e24 2e2e 2e0a 2020 2020  ha1$...$....    
+0001cca0: 2020 2020 7368 6132 3536 242e 2e2e 242e      sha256$...$.
+0001ccb0: 2e2e 0a20 2020 2020 2020 2073 6861 3338  ...        sha38
+0001ccc0: 3424 2e2e 2e24 2e2e 2e0a 2020 2020 2020  4$...$....      
+0001ccd0: 2020 7368 6135 3132 242e 2e2e 242e 2e2e    sha512$...$...
+0001cce0: 0a0a 2020 2020 5468 6520 7379 6e74 6178  ..    The syntax
+0001ccf0: 2069 7320 616c 7761 7973 2061 6c67 2473   is always alg$s
+0001cd00: 616c 7424 6861 7368 0a0a 2020 2020 5375  alt$hash..    Su
+0001cd10: 7070 6f72 7473 2066 6f72 2070 626b 6466  pports for pbkdf
+0001cd20: 320a 0a20 2020 2020 2020 203e 3e3e 2061  2..        >>> a
+0001cd30: 6c67 203d 2027 7062 6b64 6632 2831 3030  lg = 'pbkdf2(100
+0001cd40: 302c 3230 2c73 6861 3531 3229 270a 2020  0,20,sha512)'.  
+0001cd50: 2020 2020 2020 3e3e 3e20 7072 696e 7428        >>> print(
+0001cd60: 7374 7228 4352 5950 5428 6469 6765 7374  str(CRYPT(digest
+0001cd70: 5f61 6c67 3d61 6c67 2c73 616c 743d 5472  _alg=alg,salt=Tr
+0001cd80: 7565 2928 2774 6573 7427 295b 305d 2929  ue)('test')[0]))
+0001cd90: 0a20 2020 2020 2020 2070 626b 6466 3228  .        pbkdf2(
+0001cda0: 3130 3030 2c32 302c 7368 6135 3132 2924  1000,20,sha512)$
+0001cdb0: 2e2e 2e24 2e2e 2e0a 0a20 2020 2041 6e20  ...$.....    An 
+0001cdc0: 6f70 7469 6f6e 616c 2068 6d61 635f 6b65  optional hmac_ke
+0001cdd0: 7920 6361 6e20 6265 2073 7065 6369 6669  y can be specifi
+0001cde0: 6564 2061 6e64 2069 7420 6973 2075 7365  ed and it is use
+0001cdf0: 6420 6173 2073 616c 7420 7072 6566 6978  d as salt prefix
+0001ce00: 0a0a 2020 2020 2020 2020 3e3e 3e20 6120  ..        >>> a 
+0001ce10: 3d20 7374 7228 4352 5950 5428 6469 6765  = str(CRYPT(dige
+0001ce20: 7374 5f61 6c67 3d27 6d64 3527 2c6b 6579  st_alg='md5',key
+0001ce30: 3d27 6d79 6b65 7927 2c73 616c 743d 5472  ='mykey',salt=Tr
+0001ce40: 7565 2928 2774 6573 7427 295b 305d 290a  ue)('test')[0]).
+0001ce50: 2020 2020 2020 2020 3e3e 3e20 7072 696e          >>> prin
+0001ce60: 7428 6129 0a20 2020 2020 2020 206d 6435  t(a).        md5
+0001ce70: 242e 2e2e 242e 2e2e 0a0a 2020 2020 4576  $...$.....    Ev
+0001ce80: 656e 2069 6620 7468 6520 616c 676f 7269  en if the algori
+0001ce90: 7468 6d20 6368 616e 6765 7320 7468 6520  thm changes the 
+0001cea0: 6861 7368 2063 616e 2073 7469 6c6c 2062  hash can still b
+0001ceb0: 6520 7661 6c69 6461 7465 640a 0a20 2020  e validated..   
+0001cec0: 2020 2020 203e 3e3e 2043 5259 5054 2864       >>> CRYPT(d
+0001ced0: 6967 6573 745f 616c 673d 2773 6861 3127  igest_alg='sha1'
+0001cee0: 2c6b 6579 3d27 6d79 6b65 7927 2c73 616c  ,key='mykey',sal
+0001cef0: 743d 5472 7565 2928 2774 6573 7427 295b  t=True)('test')[
+0001cf00: 305d 203d 3d20 610a 2020 2020 2020 2020  0] == a.        
+0001cf10: 5472 7565 0a0a 2020 2020 4966 206e 6f20  True..    If no 
+0001cf20: 7361 6c74 2069 7320 7370 6563 6966 6965  salt is specifie
+0001cf30: 6420 4352 5950 5420 6361 6e20 6775 6573  d CRYPT can gues
+0001cf40: 7320 7468 6520 616c 676f 7269 7468 6d73  s the algorithms
+0001cf50: 2066 726f 6d20 6c65 6e67 7468 3a0a 0a20   from length:.. 
+0001cf60: 2020 2020 2020 203e 3e3e 2061 203d 2073         >>> a = s
+0001cf70: 7472 2843 5259 5054 2864 6967 6573 745f  tr(CRYPT(digest_
+0001cf80: 616c 673d 2773 6861 3127 2c73 616c 743d  alg='sha1',salt=
+0001cf90: 4661 6c73 6529 2827 7465 7374 2729 5b30  False)('test')[0
+0001cfa0: 5d29 0a20 2020 2020 2020 203e 3e3e 2061  ]).        >>> a
+0001cfb0: 0a20 2020 2020 2020 2027 7368 6131 2424  .        'sha1$$
+0001cfc0: 6139 3461 3866 6535 6363 6231 3962 6136  a94a8fe5ccb19ba6
+0001cfd0: 3163 3463 3038 3733 6433 3931 6539 3837  1c4c0873d391e987
+0001cfe0: 3938 3266 6262 6433 270a 2020 2020 2020  982fbbd3'.      
+0001cff0: 2020 3e3e 3e20 4352 5950 5428 6469 6765    >>> CRYPT(dige
+0001d000: 7374 5f61 6c67 3d27 7368 6131 272c 7361  st_alg='sha1',sa
+0001d010: 6c74 3d46 616c 7365 2928 2774 6573 7427  lt=False)('test'
+0001d020: 295b 305d 203d 3d20 610a 2020 2020 2020  )[0] == a.      
+0001d030: 2020 5472 7565 0a20 2020 2020 2020 203e    True.        >
+0001d040: 3e3e 2043 5259 5054 2864 6967 6573 745f  >> CRYPT(digest_
+0001d050: 616c 673d 2773 6861 3127 2c73 616c 743d  alg='sha1',salt=
+0001d060: 4661 6c73 6529 2827 7465 7374 2729 5b30  False)('test')[0
+0001d070: 5d20 3d3d 2061 5b36 3a5d 0a20 2020 2020  ] == a[6:].     
+0001d080: 2020 2054 7275 650a 2020 2020 2020 2020     True.        
+0001d090: 3e3e 3e20 4352 5950 5428 6469 6765 7374  >>> CRYPT(digest
+0001d0a0: 5f61 6c67 3d27 6d64 3527 2c73 616c 743d  _alg='md5',salt=
+0001d0b0: 4661 6c73 6529 2827 7465 7374 2729 5b30  False)('test')[0
+0001d0c0: 5d20 3d3d 2061 0a20 2020 2020 2020 2054  ] == a.        T
+0001d0d0: 7275 650a 2020 2020 2020 2020 3e3e 3e20  rue.        >>> 
+0001d0e0: 4352 5950 5428 6469 6765 7374 5f61 6c67  CRYPT(digest_alg
+0001d0f0: 3d27 6d64 3527 2c73 616c 743d 4661 6c73  ='md5',salt=Fals
+0001d100: 6529 2827 7465 7374 2729 5b30 5d20 3d3d  e)('test')[0] ==
+0001d110: 2061 5b36 3a5d 0a20 2020 2020 2020 2054   a[6:].        T
+0001d120: 7275 650a 2020 2020 2222 220a 0a20 2020  rue.    """..   
+0001d130: 2053 5441 5253 203d 2022 2a2a 2a2a 2a2a   STARS = "******
+0001d140: 220a 0a20 2020 2064 6566 205f 5f69 6e69  "..    def __ini
+0001d150: 745f 5f28 0a20 2020 2020 2020 2073 656c  t__(.        sel
+0001d160: 662c 0a20 2020 2020 2020 206b 6579 3d4e  f,.        key=N
+0001d170: 6f6e 652c 0a20 2020 2020 2020 2064 6967  one,.        dig
+0001d180: 6573 745f 616c 673d 2270 626b 6466 3228  est_alg="pbkdf2(
+0001d190: 3130 3030 2c32 302c 7368 6135 3132 2922  1000,20,sha512)"
+0001d1a0: 2c0a 2020 2020 2020 2020 6d69 6e5f 6c65  ,.        min_le
+0001d1b0: 6e67 7468 3d30 2c0a 2020 2020 2020 2020  ngth=0,.        
+0001d1c0: 6572 726f 725f 6d65 7373 6167 653d 2254  error_message="T
+0001d1d0: 6f6f 2073 686f 7274 222c 0a20 2020 2020  oo short",.     
+0001d1e0: 2020 2073 616c 743d 5472 7565 2c0a 2020     salt=True,.  
+0001d1f0: 2020 2020 2020 6d61 785f 6c65 6e67 7468        max_length
+0001d200: 3d31 3032 342c 0a20 2020 2029 3a0a 2020  =1024,.    ):.  
+0001d210: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001d220: 2020 696d 706f 7274 616e 742c 2064 6967    important, dig
+0001d230: 6573 745f 616c 673d 276d 6435 2720 6973  est_alg='md5' is
+0001d240: 206e 6f74 2074 6865 2064 6566 6175 6c74   not the default
+0001d250: 2068 6173 6869 6e67 2061 6c67 6f72 6974   hashing algorit
+0001d260: 686d 2066 6f72 0a20 2020 2020 2020 2077  hm for.        w
+0001d270: 6562 3270 792e 2054 6869 7320 6973 206f  eb2py. This is o
+0001d280: 6e6c 7920 616e 2065 7861 6d70 6c65 206f  nly an example o
+0001d290: 6620 7573 6167 6520 6f66 2074 6869 7320  f usage of this 
+0001d2a0: 6675 6e63 7469 6f6e 2e0a 0a20 2020 2020  function...     
+0001d2b0: 2020 2054 6865 2061 6374 7561 6c20 6861     The actual ha
+0001d2c0: 7368 2061 6c67 6f72 6974 686d 2069 7320  sh algorithm is 
+0001d2d0: 6465 7465 726d 696e 6564 2066 726f 6d20  determined from 
+0001d2e0: 7468 6520 6b65 7920 7768 6963 6820 6973  the key which is
+0001d2f0: 0a20 2020 2020 2020 2067 656e 6572 6174  .        generat
+0001d300: 6564 2062 7920 7765 6232 7079 2069 6e20  ed by web2py in 
+0001d310: 746f 6f6c 732e 7079 2e20 5468 6973 2064  tools.py. This d
+0001d320: 6566 6175 6c74 7320 746f 2068 6d61 632b  efaults to hmac+
+0001d330: 7368 6135 3132 2e0a 2020 2020 2020 2020  sha512..        
+0001d340: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0001d350: 2e6b 6579 203d 206b 6579 0a20 2020 2020  .key = key.     
+0001d360: 2020 2073 656c 662e 6469 6765 7374 5f61     self.digest_a
+0001d370: 6c67 203d 2064 6967 6573 745f 616c 670a  lg = digest_alg.
+0001d380: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
+0001d390: 5f6c 656e 6774 6820 3d20 6d69 6e5f 6c65  _length = min_le
+0001d3a0: 6e67 7468 0a20 2020 2020 2020 2073 656c  ngth.        sel
+0001d3b0: 662e 6d61 785f 6c65 6e67 7468 203d 206d  f.max_length = m
+0001d3c0: 6178 5f6c 656e 6774 680a 2020 2020 2020  ax_length.      
+0001d3d0: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
+0001d3e0: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
+0001d3f0: 7361 6765 0a20 2020 2020 2020 2073 656c  sage.        sel
+0001d400: 662e 7361 6c74 203d 2073 616c 740a 0a20  f.salt = salt.. 
+0001d410: 2020 2064 6566 2076 616c 6964 6174 6528     def validate(
+0001d420: 7365 6c66 2c20 7661 6c75 652c 2072 6563  self, value, rec
+0001d430: 6f72 645f 6964 3d4e 6f6e 6529 3a0a 2020  ord_id=None):.  
+0001d440: 2020 2020 2020 6966 2076 616c 7565 203d        if value =
+0001d450: 3d20 7365 6c66 2e53 5441 5253 3a0a 2020  = self.STARS:.  
+0001d460: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0001d470: 204e 6f6e 650a 2020 2020 2020 2020 7620   None.        v 
+0001d480: 3d20 7661 6c75 6520 616e 6420 7374 7228  = value and str(
+0001d490: 7661 6c75 6529 5b3a 2073 656c 662e 6d61  value)[: self.ma
+0001d4a0: 785f 6c65 6e67 7468 5d0a 2020 2020 2020  x_length].      
+0001d4b0: 2020 6966 206e 6f74 2076 206f 7220 6c65    if not v or le
+0001d4c0: 6e28 7629 203c 2073 656c 662e 6d69 6e5f  n(v) < self.min_
+0001d4d0: 6c65 6e67 7468 3a0a 2020 2020 2020 2020  length:.        
+0001d4e0: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+0001d4f0: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+0001d500: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+0001d510: 7272 6f72 5f6d 6573 7361 6765 2929 0a20  rror_message)). 
+0001d520: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+0001d530: 616e 6365 2876 616c 7565 2c20 4c61 7a79  ance(value, Lazy
+0001d540: 4372 7970 7429 3a0a 2020 2020 2020 2020  Crypt):.        
+0001d550: 2020 2020 7265 7475 726e 2076 616c 7565      return value
+0001d560: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0001d570: 4c61 7a79 4372 7970 7428 7365 6c66 2c20  LazyCrypt(self, 
+0001d580: 7661 6c75 6529 0a0a 2020 2020 6465 6620  value)..    def 
+0001d590: 666f 726d 6174 7465 7228 7365 6c66 2c20  formatter(self, 
+0001d5a0: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+0001d5b0: 7265 7475 726e 2073 656c 662e 5354 4152  return self.STAR
+0001d5c0: 530a 0a0a 2320 2065 6e74 726f 7079 2063  S...#  entropy c
+0001d5d0: 616c 6375 6c61 746f 7220 666f 7220 4953  alculator for IS
+0001d5e0: 5f53 5452 4f4e 470a 230a 6c6f 7765 7273  _STRONG.#.lowers
+0001d5f0: 6574 203d 2066 726f 7a65 6e73 6574 2862  et = frozenset(b
+0001d600: 2261 6263 6465 6667 6869 6a6b 6c6d 6e6f  "abcdefghijklmno
+0001d610: 7071 7273 7475 7677 7879 7a22 290a 7570  pqrstuvwxyz").up
+0001d620: 7065 7273 6574 203d 2066 726f 7a65 6e73  perset = frozens
+0001d630: 6574 2862 2241 4243 4445 4647 4849 4a4b  et(b"ABCDEFGHIJK
+0001d640: 4c4d 4e4f 5051 5253 5455 5657 5859 5a22  LMNOPQRSTUVWXYZ"
+0001d650: 290a 6e75 6d62 6572 7365 7420 3d20 6672  ).numberset = fr
+0001d660: 6f7a 656e 7365 7428 6222 3031 3233 3435  ozenset(b"012345
+0001d670: 3637 3839 2229 0a73 796d 3173 6574 203d  6789").sym1set =
+0001d680: 2066 726f 7a65 6e73 6574 2862 2221 4023   frozenset(b"!@#
+0001d690: 2425 5e26 2a28 2920 2229 0a73 796d 3273  $%^&*() ").sym2s
+0001d6a0: 6574 203d 2066 726f 7a65 6e73 6574 2862  et = frozenset(b
+0001d6b0: 227e 602d 5f3d 2b5b 5d7b 7d5c 5c7c 3b3a  "~`-_=+[]{}\\|;:
+0001d6c0: 275c 222c 2e3c 3e3f 2f22 290a 6f74 6865  '\",.<>?/").othe
+0001d6d0: 7273 6574 203d 2066 726f 7a65 6e73 6574  rset = frozenset
+0001d6e0: 2862 2222 2e6a 6f69 6e28 6368 7228 7829  (b"".join(chr(x)
+0001d6f0: 2069 6620 5059 3220 656c 7365 2063 6872   if PY2 else chr
+0001d700: 2878 292e 656e 636f 6465 2829 2066 6f72  (x).encode() for
+0001d710: 2078 2069 6e20 7261 6e67 6528 3235 3629   x in range(256)
+0001d720: 2929 0a0a 0a64 6566 2063 616c 635f 656e  ))...def calc_en
+0001d730: 7472 6f70 7928 7374 7269 6e67 293a 0a20  tropy(string):. 
+0001d740: 2020 2022 2222 6361 6c63 756c 6174 6573     """calculates
+0001d750: 2061 2073 696d 706c 6520 656e 7472 6f70   a simple entrop
+0001d760: 7920 666f 7220 6120 6769 7665 6e20 7374  y for a given st
+0001d770: 7269 6e67 2222 220a 2020 2020 616c 7068  ring""".    alph
+0001d780: 6162 6574 203d 2030 2020 2320 616c 7068  abet = 0  # alph
+0001d790: 6162 6574 2073 697a 650a 2020 2020 6f74  abet size.    ot
+0001d7a0: 6865 7220 3d20 7365 7428 290a 2020 2020  her = set().    
+0001d7b0: 7365 656e 203d 2073 6574 2829 0a20 2020  seen = set().   
+0001d7c0: 206c 6173 7473 6574 203d 204e 6f6e 650a   lastset = None.
+0001d7d0: 2020 2020 7374 7269 6e67 203d 2074 6f5f      string = to_
+0001d7e0: 6279 7465 7328 7374 7269 6e67 206f 7220  bytes(string or 
+0001d7f0: 2222 290a 2020 2020 666f 7220 6320 696e  "").    for c in
+0001d800: 2073 7472 696e 673a 0a20 2020 2020 2020   string:.       
+0001d810: 2023 2063 6c61 7373 6966 7920 7468 6973   # classify this
+0001d820: 2063 6861 7261 6374 6572 0a20 2020 2020   character.     
+0001d830: 2020 2069 6e73 6574 203d 204e 6f6e 650a     inset = None.
+0001d840: 2020 2020 2020 2020 666f 7220 6373 6574          for cset
+0001d850: 2069 6e20 286c 6f77 6572 7365 742c 2075   in (lowerset, u
+0001d860: 7070 6572 7365 742c 206e 756d 6265 7273  pperset, numbers
+0001d870: 6574 2c20 7379 6d31 7365 742c 2073 796d  et, sym1set, sym
+0001d880: 3273 6574 2c20 6f74 6865 7273 6574 293a  2set, otherset):
+0001d890: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001d8a0: 6320 696e 2063 7365 743a 0a20 2020 2020  c in cset:.     
+0001d8b0: 2020 2020 2020 2020 2020 2069 6e73 6574             inset
+0001d8c0: 203d 2063 7365 740a 2020 2020 2020 2020   = cset.        
+0001d8d0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+0001d8e0: 2020 2020 2020 6173 7365 7274 2069 6e73        assert ins
+0001d8f0: 6574 2069 7320 6e6f 7420 4e6f 6e65 0a20  et is not None. 
+0001d900: 2020 2020 2020 2023 2063 616c 6375 6c61         # calcula
+0001d910: 7465 2065 6666 6563 7420 6f66 2063 6861  te effect of cha
+0001d920: 7261 6374 6572 206f 6e20 616c 7068 6162  racter on alphab
+0001d930: 6574 2073 697a 650a 2020 2020 2020 2020  et size.        
+0001d940: 6966 2069 6e73 6574 206e 6f74 2069 6e20  if inset not in 
+0001d950: 7365 656e 3a0a 2020 2020 2020 2020 2020  seen:.          
+0001d960: 2020 7365 656e 2e61 6464 2869 6e73 6574    seen.add(inset
+0001d970: 290a 2020 2020 2020 2020 2020 2020 616c  ).            al
+0001d980: 7068 6162 6574 202b 3d20 6c65 6e28 696e  phabet += len(in
+0001d990: 7365 7429 2020 2320 6372 6564 6974 2066  set)  # credit f
+0001d9a0: 6f72 2061 206e 6577 2063 6861 7261 6374  or a new charact
+0001d9b0: 6572 2073 6574 0a20 2020 2020 2020 2065  er set.        e
+0001d9c0: 6c69 6620 6320 6e6f 7420 696e 206f 7468  lif c not in oth
+0001d9d0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+0001d9e0: 616c 7068 6162 6574 202b 3d20 3120 2023  alphabet += 1  #
+0001d9f0: 2063 7265 6469 7420 666f 7220 756e 6971   credit for uniq
+0001da00: 7565 2063 6861 7261 6374 6572 730a 2020  ue characters.  
+0001da10: 2020 2020 2020 2020 2020 6f74 6865 722e            other.
+0001da20: 6164 6428 6329 0a20 2020 2020 2020 2069  add(c).        i
+0001da30: 6620 696e 7365 7420 6973 206e 6f74 206c  f inset is not l
+0001da40: 6173 7473 6574 3a0a 2020 2020 2020 2020  astset:.        
+0001da50: 2020 2020 616c 7068 6162 6574 202b 3d20      alphabet += 
+0001da60: 3120 2023 2063 7265 6469 7420 666f 7220  1  # credit for 
+0001da70: 7365 7420 7472 616e 7369 7469 6f6e 730a  set transitions.
+0001da80: 2020 2020 2020 2020 2020 2020 6c61 7374              last
+0001da90: 7365 7420 3d20 6373 6574 0a20 2020 2065  set = cset.    e
+0001daa0: 6e74 726f 7079 203d 206c 656e 2873 7472  ntropy = len(str
+0001dab0: 696e 6729 202a 206d 6174 682e 6c6f 6728  ing) * math.log(
+0001dac0: 616c 7068 6162 6574 206f 7220 3129 202f  alphabet or 1) /
+0001dad0: 2030 2e36 3933 3134 3731 3830 3535 3939   0.6931471805599
+0001dae0: 3435 3320 2023 206d 6174 682e 6c6f 6728  453  # math.log(
+0001daf0: 3229 0a20 2020 2072 6574 7572 6e20 726f  2).    return ro
+0001db00: 756e 6428 656e 7472 6f70 792c 2032 290a  und(entropy, 2).
+0001db10: 0a0a 636c 6173 7320 4953 5f53 5452 4f4e  ..class IS_STRON
+0001db20: 4728 5661 6c69 6461 746f 7229 3a0a 2020  G(Validator):.  
+0001db30: 2020 2222 220a 2020 2020 4578 616d 706c    """.    Exampl
+0001db40: 6573 3a0a 2020 2020 2020 2020 5573 6520  es:.        Use 
+0001db50: 6173 3a3a 0a0a 2020 2020 2020 2020 2020  as::..          
+0001db60: 2020 494e 5055 5428 5f74 7970 653d 2770    INPUT(_type='p
+0001db70: 6173 7377 6f72 6427 2c20 5f6e 616d 653d  assword', _name=
+0001db80: 2770 6173 7377 6427 2c0a 2020 2020 2020  'passwd',.      
+0001db90: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
+0001dba0: 535f 5354 524f 4e47 286d 696e 3d31 302c  S_STRONG(min=10,
+0001dbb0: 2073 7065 6369 616c 3d32 2c20 7570 7065   special=2, uppe
+0001dbc0: 723d 3229 290a 0a20 2020 2065 6e66 6f72  r=2))..    enfor
+0001dbd0: 6365 7320 636f 6d70 6c65 7869 7479 2072  ces complexity r
+0001dbe0: 6571 7569 7265 6d65 6e74 7320 6f6e 2061  equirements on a
+0001dbf0: 2066 6965 6c64 0a0a 2020 2020 2020 2020   field..        
+0001dc00: 3e3e 3e20 4953 5f53 5452 4f4e 4728 6573  >>> IS_STRONG(es
+0001dc10: 3d54 7275 6529 2827 4162 6364 3132 3334  =True)('Abcd1234
+0001dc20: 2729 0a20 2020 2020 2020 2028 2741 6263  ').        ('Abc
+0001dc30: 6431 3233 3427 2c0a 2020 2020 2020 2020  d1234',.        
+0001dc40: 2027 4d75 7374 2069 6e63 6c75 6465 2061   'Must include a
+0001dc50: 7420 6c65 6173 7420 3120 6f66 2074 6865  t least 1 of the
+0001dc60: 2066 6f6c 6c6f 7769 6e67 3a20 7e21 4023   following: ~!@#
+0001dc70: 2425 5e26 2a28 295f 2b2d 3d3f 3c3e 2c2e  $%^&*()_+-=?<>,.
+0001dc80: 3a3b 7b7d 5b5d 7c27 290a 2020 2020 2020  :;{}[]|').      
+0001dc90: 2020 3e3e 3e20 4953 5f53 5452 4f4e 4728    >>> IS_STRONG(
+0001dca0: 6573 3d54 7275 6529 2827 4162 6364 3132  es=True)('Abcd12
+0001dcb0: 3334 2127 290a 2020 2020 2020 2020 2827  34!').        ('
+0001dcc0: 4162 6364 3132 3334 2127 2c20 4e6f 6e65  Abcd1234!', None
+0001dcd0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+0001dce0: 5f53 5452 4f4e 4728 6573 3d54 7275 652c  _STRONG(es=True,
+0001dcf0: 2065 6e74 726f 7079 3d31 2928 2761 2729   entropy=1)('a')
+0001dd00: 0a20 2020 2020 2020 2028 2761 272c 204e  .        ('a', N
+0001dd10: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+0001dd20: 2049 535f 5354 524f 4e47 2865 733d 5472   IS_STRONG(es=Tr
+0001dd30: 7565 2c20 656e 7472 6f70 793d 312c 206d  ue, entropy=1, m
+0001dd40: 696e 3d32 2928 2761 2729 0a20 2020 2020  in=2)('a').     
+0001dd50: 2020 2028 2761 272c 2027 4d69 6e69 6d75     ('a', 'Minimu
+0001dd60: 6d20 6c65 6e67 7468 2069 7320 3227 290a  m length is 2').
+0001dd70: 2020 2020 2020 2020 3e3e 3e20 4953 5f53          >>> IS_S
+0001dd80: 5452 4f4e 4728 6573 3d54 7275 652c 2065  TRONG(es=True, e
+0001dd90: 6e74 726f 7079 3d31 3030 2928 2761 6263  ntropy=100)('abc
+0001dda0: 3132 3327 290a 2020 2020 2020 2020 2827  123').        ('
+0001ddb0: 6162 6331 3233 272c 2027 5061 7373 776f  abc123', 'Passwo
+0001ddc0: 7264 2074 6f6f 2073 696d 706c 6520 2833  rd too simple (3
+0001ddd0: 322e 3335 2f31 3030 2927 290a 2020 2020  2.35/100)').    
+0001dde0: 2020 2020 3e3e 3e20 4953 5f53 5452 4f4e      >>> IS_STRON
+0001ddf0: 4728 6573 3d54 7275 652c 2065 6e74 726f  G(es=True, entro
+0001de00: 7079 3d31 3030 2928 2761 6e64 2729 0a20  py=100)('and'). 
+0001de10: 2020 2020 2020 2028 2761 6e64 272c 2027         ('and', '
+0001de20: 5061 7373 776f 7264 2074 6f6f 2073 696d  Password too sim
+0001de30: 706c 6520 2831 342e 3537 2f31 3030 2927  ple (14.57/100)'
+0001de40: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+0001de50: 5f53 5452 4f4e 4728 6573 3d54 7275 652c  _STRONG(es=True,
+0001de60: 2065 6e74 726f 7079 3d31 3030 2928 2761   entropy=100)('a
+0001de70: 6161 2729 0a20 2020 2020 2020 2028 2761  aa').        ('a
+0001de80: 6161 272c 2027 5061 7373 776f 7264 2074  aa', 'Password t
+0001de90: 6f6f 2073 696d 706c 6520 2831 342e 3432  oo simple (14.42
+0001dea0: 2f31 3030 2927 290a 2020 2020 2020 2020  /100)').        
+0001deb0: 3e3e 3e20 4953 5f53 5452 4f4e 4728 6573  >>> IS_STRONG(es
+0001dec0: 3d54 7275 652c 2065 6e74 726f 7079 3d31  =True, entropy=1
+0001ded0: 3030 2928 2761 3164 2729 0a20 2020 2020  00)('a1d').     
+0001dee0: 2020 2028 2761 3164 272c 2027 5061 7373     ('a1d', 'Pass
+0001def0: 776f 7264 2074 6f6f 2073 696d 706c 6520  word too simple 
+0001df00: 2831 352e 3937 2f31 3030 2927 290a 2020  (15.97/100)').  
+0001df10: 2020 2020 2020 3e3e 3e20 4953 5f53 5452        >>> IS_STR
+0001df20: 4f4e 4728 6573 3d54 7275 652c 2065 6e74  ONG(es=True, ent
+0001df30: 726f 7079 3d31 3030 2928 2761 c3b1 6427  ropy=100)('a..d'
+0001df40: 290a 2020 2020 2020 2020 2827 615c 5c78  ).        ('a\\x
+0001df50: 6333 5c5c 7862 3164 272c 2027 5061 7373  c3\\xb1d', 'Pass
+0001df60: 776f 7264 2074 6f6f 2073 696d 706c 6520  word too simple 
+0001df70: 2833 312e 3236 2f31 3029 2729 0a0a 2020  (31.26/10)')..  
+0001df80: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
+0001df90: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
+0001dfa0: 2073 656c 662c 0a20 2020 2020 2020 206d   self,.        m
+0001dfb0: 696e 3d4e 6f6e 652c 0a20 2020 2020 2020  in=None,.       
+0001dfc0: 206d 6178 3d4e 6f6e 652c 0a20 2020 2020   max=None,.     
+0001dfd0: 2020 2075 7070 6572 3d4e 6f6e 652c 0a20     upper=None,. 
+0001dfe0: 2020 2020 2020 206c 6f77 6572 3d4e 6f6e         lower=Non
+0001dff0: 652c 0a20 2020 2020 2020 206e 756d 6265  e,.        numbe
+0001e000: 723d 4e6f 6e65 2c0a 2020 2020 2020 2020  r=None,.        
+0001e010: 656e 7472 6f70 793d 4e6f 6e65 2c0a 2020  entropy=None,.  
+0001e020: 2020 2020 2020 7370 6563 6961 6c3d 4e6f        special=No
+0001e030: 6e65 2c0a 2020 2020 2020 2020 7370 6563  ne,.        spec
+0001e040: 6961 6c73 3d72 227e 2140 2324 255e 262a  ials=r"~!@#$%^&*
+0001e050: 2829 5f2b 2d3d 3f3c 3e2c 2e3a 3b7b 7d5b  ()_+-=?<>,.:;{}[
+0001e060: 5d7c 222c 0a20 2020 2020 2020 2069 6e76  ]|",.        inv
+0001e070: 616c 6964 3d27 2022 272c 0a20 2020 2020  alid=' "',.     
+0001e080: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
+0001e090: 3d4e 6f6e 652c 0a20 2020 2020 2020 2065  =None,.        e
+0001e0a0: 733d 4661 6c73 652c 0a20 2020 2029 3a0a  s=False,.    ):.
+0001e0b0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0001e0c0: 726f 7079 203d 2065 6e74 726f 7079 0a20  ropy = entropy. 
+0001e0d0: 2020 2020 2020 2069 6620 656e 7472 6f70         if entrop
+0001e0e0: 7920 6973 204e 6f6e 653a 0a20 2020 2020  y is None:.     
+0001e0f0: 2020 2020 2020 2023 2065 6e66 6f72 6365         # enforce
+0001e100: 2064 6566 6175 6c74 2072 6571 7569 7265   default require
+0001e110: 6d65 6e74 730a 2020 2020 2020 2020 2020  ments.          
+0001e120: 2020 7365 6c66 2e6d 696e 203d 2038 2069    self.min = 8 i
+0001e130: 6620 6d69 6e20 6973 204e 6f6e 6520 656c  f min is None el
+0001e140: 7365 206d 696e 0a20 2020 2020 2020 2020  se min.         
+0001e150: 2020 2073 656c 662e 6d61 7820 3d20 6d61     self.max = ma
+0001e160: 7820 2023 2077 6173 2032 302c 2062 7574  x  # was 20, but
+0001e170: 2074 6861 7420 646f 6573 6e27 7420 6d61   that doesn't ma
+0001e180: 6b65 2073 656e 7365 0a20 2020 2020 2020  ke sense.       
+0001e190: 2020 2020 2073 656c 662e 7570 7065 7220       self.upper 
+0001e1a0: 3d20 3120 6966 2075 7070 6572 2069 7320  = 1 if upper is 
+0001e1b0: 4e6f 6e65 2065 6c73 6520 7570 7065 720a  None else upper.
+0001e1c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001e1d0: 2e6c 6f77 6572 203d 2031 2069 6620 6c6f  .lower = 1 if lo
+0001e1e0: 7765 7220 6973 204e 6f6e 6520 656c 7365  wer is None else
+0001e1f0: 206c 6f77 6572 0a20 2020 2020 2020 2020   lower.         
+0001e200: 2020 2073 656c 662e 6e75 6d62 6572 203d     self.number =
+0001e210: 2031 2069 6620 6e75 6d62 6572 2069 7320   1 if number is 
+0001e220: 4e6f 6e65 2065 6c73 6520 6e75 6d62 6572  None else number
+0001e230: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0001e240: 662e 7370 6563 6961 6c20 3d20 3120 6966  f.special = 1 if
+0001e250: 2073 7065 6369 616c 2069 7320 4e6f 6e65   special is None
+0001e260: 2065 6c73 6520 7370 6563 6961 6c0a 2020   else special.  
+0001e270: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001e280: 2020 2020 2020 2020 2320 6279 2064 6566          # by def
+0001e290: 6175 6c74 2c20 616e 2065 6e74 726f 7079  ault, an entropy
+0001e2a0: 2073 7065 6320 6973 2065 7863 6c75 7369   spec is exclusi
+0001e2b0: 7665 0a20 2020 2020 2020 2020 2020 2073  ve.            s
+0001e2c0: 656c 662e 6d69 6e20 3d20 6d69 6e0a 2020  elf.min = min.  
+0001e2d0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+0001e2e0: 6178 203d 206d 6178 0a20 2020 2020 2020  ax = max.       
+0001e2f0: 2020 2020 2073 656c 662e 7570 7065 7220       self.upper 
+0001e300: 3d20 7570 7065 720a 2020 2020 2020 2020  = upper.        
+0001e310: 2020 2020 7365 6c66 2e6c 6f77 6572 203d      self.lower =
+0001e320: 206c 6f77 6572 0a20 2020 2020 2020 2020   lower.         
+0001e330: 2020 2073 656c 662e 6e75 6d62 6572 203d     self.number =
+0001e340: 206e 756d 6265 720a 2020 2020 2020 2020   number.        
+0001e350: 2020 2020 7365 6c66 2e73 7065 6369 616c      self.special
+0001e360: 203d 2073 7065 6369 616c 0a20 2020 2020   = special.     
+0001e370: 2020 2073 656c 662e 7370 6563 6961 6c73     self.specials
+0001e380: 203d 2073 7065 6369 616c 730a 2020 2020   = specials.    
+0001e390: 2020 2020 7365 6c66 2e69 6e76 616c 6964      self.invalid
+0001e3a0: 203d 2069 6e76 616c 6964 0a20 2020 2020   = invalid.     
+0001e3b0: 2020 2073 656c 662e 6572 726f 725f 6d65     self.error_me
+0001e3c0: 7373 6167 6520 3d20 6572 726f 725f 6d65  ssage = error_me
+0001e3d0: 7373 6167 650a 2020 2020 2020 2020 7365  ssage.        se
+0001e3e0: 6c66 2e65 7374 7269 6e67 203d 2065 7320  lf.estring = es 
+0001e3f0: 2023 2072 6574 7572 6e20 6572 726f 7220   # return error 
+0001e400: 6d65 7373 6167 6520 6173 2073 7472 696e  message as strin
+0001e410: 6720 2866 6f72 2064 6f63 7465 7374 290a  g (for doctest).
+0001e420: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+0001e430: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+0001e440: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+0001e450: 2020 2020 2020 2020 6661 696c 7572 6573          failures
+0001e460: 203d 205b 5d0a 2020 2020 2020 2020 6966   = [].        if
+0001e470: 2076 616c 7565 2069 7320 4e6f 6e65 3a0a   value is None:.
+0001e480: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+0001e490: 6520 3d20 2222 0a20 2020 2020 2020 2069  e = "".        i
+0001e4a0: 6620 7661 6c75 6520 616e 6420 6c65 6e28  f value and len(
+0001e4b0: 7661 6c75 6529 203d 3d20 7661 6c75 652e  value) == value.
+0001e4c0: 636f 756e 7428 222a 2229 203e 2034 3a0a  count("*") > 4:.
+0001e4d0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001e4e0: 726e 2076 616c 7565 0a20 2020 2020 2020  rn value.       
+0001e4f0: 2069 6620 7365 6c66 2e65 6e74 726f 7079   if self.entropy
+0001e500: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0001e510: 2020 2020 2020 2020 2020 656e 7472 6f70            entrop
+0001e520: 7920 3d20 6361 6c63 5f65 6e74 726f 7079  y = calc_entropy
+0001e530: 2876 616c 7565 290a 2020 2020 2020 2020  (value).        
+0001e540: 2020 2020 6966 2065 6e74 726f 7079 203c      if entropy <
+0001e550: 2073 656c 662e 656e 7472 6f70 793a 0a20   self.entropy:. 
+0001e560: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001e570: 6169 6c75 7265 732e 6170 7065 6e64 280a  ailures.append(.
+0001e580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e590: 2020 2020 7365 6c66 2e74 7261 6e73 6c61      self.transla
+0001e5a0: 746f 7228 2250 6173 7377 6f72 6420 746f  tor("Password to
+0001e5b0: 6f20 7369 6d70 6c65 2028 2528 6861 7665  o simple (%(have
+0001e5c0: 2973 2f25 286e 6565 6429 7329 2229 0a20  )s/%(need)s)"). 
+0001e5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e5e0: 2020 2025 2064 6963 7428 6861 7665 3d65     % dict(have=e
+0001e5f0: 6e74 726f 7079 2c20 6e65 6564 3d73 656c  ntropy, need=sel
+0001e600: 662e 656e 7472 6f70 7929 0a20 2020 2020  f.entropy).     
+0001e610: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0001e620: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0001e630: 6365 2873 656c 662e 6d69 6e2c 2069 6e74  ce(self.min, int
+0001e640: 2920 616e 6420 7365 6c66 2e6d 696e 203e  ) and self.min >
+0001e650: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0001e660: 6966 206e 6f74 206c 656e 2876 616c 7565  if not len(value
+0001e670: 2920 3e3d 2073 656c 662e 6d69 6e3a 0a20  ) >= self.min:. 
+0001e680: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001e690: 6169 6c75 7265 732e 6170 7065 6e64 2873  ailures.append(s
+0001e6a0: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
+0001e6b0: 4d69 6e69 6d75 6d20 6c65 6e67 7468 2069  Minimum length i
+0001e6c0: 7320 2573 2229 2025 2073 656c 662e 6d69  s %s") % self.mi
+0001e6d0: 6e29 0a20 2020 2020 2020 2069 6620 6973  n).        if is
+0001e6e0: 696e 7374 616e 6365 2873 656c 662e 6d61  instance(self.ma
+0001e6f0: 782c 2069 6e74 2920 616e 6420 7365 6c66  x, int) and self
+0001e700: 2e6d 6178 203e 2030 3a0a 2020 2020 2020  .max > 0:.      
+0001e710: 2020 2020 2020 6966 206e 6f74 206c 656e        if not len
+0001e720: 2876 616c 7565 2920 3c3d 2073 656c 662e  (value) <= self.
+0001e730: 6d61 783a 0a20 2020 2020 2020 2020 2020  max:.           
+0001e740: 2020 2020 2066 6169 6c75 7265 732e 6170       failures.ap
+0001e750: 7065 6e64 2873 656c 662e 7472 616e 736c  pend(self.transl
+0001e760: 6174 6f72 2822 4d61 7869 6d75 6d20 6c65  ator("Maximum le
+0001e770: 6e67 7468 2069 7320 2573 2229 2025 2073  ngth is %s") % s
+0001e780: 656c 662e 6d61 7829 0a20 2020 2020 2020  elf.max).       
+0001e790: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+0001e7a0: 656c 662e 7370 6563 6961 6c2c 2069 6e74  elf.special, int
+0001e7b0: 293a 0a20 2020 2020 2020 2020 2020 2061  ):.            a
+0001e7c0: 6c6c 5f73 7065 6369 616c 203d 205b 6368  ll_special = [ch
+0001e7d0: 2069 6e20 7661 6c75 6520 666f 7220 6368   in value for ch
+0001e7e0: 2069 6e20 7365 6c66 2e73 7065 6369 616c   in self.special
+0001e7f0: 735d 0a20 2020 2020 2020 2020 2020 2069  s].            i
+0001e800: 6620 7365 6c66 2e73 7065 6369 616c 203e  f self.special >
+0001e810: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0001e820: 2020 2020 6966 206e 6f74 2061 6c6c 5f73      if not all_s
+0001e830: 7065 6369 616c 2e63 6f75 6e74 2854 7275  pecial.count(Tru
+0001e840: 6529 203e 3d20 7365 6c66 2e73 7065 6369  e) >= self.speci
+0001e850: 616c 3a0a 2020 2020 2020 2020 2020 2020  al:.            
+0001e860: 2020 2020 2020 2020 6661 696c 7572 6573          failures
+0001e870: 2e61 7070 656e 6428 0a20 2020 2020 2020  .append(.       
+0001e880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e890: 2073 656c 662e 7472 616e 736c 6174 6f72   self.translator
+0001e8a0: 2822 4d75 7374 2069 6e63 6c75 6465 2061  ("Must include a
+0001e8b0: 7420 6c65 6173 7420 2573 206f 6620 7468  t least %s of th
+0001e8c0: 6520 666f 6c6c 6f77 696e 673a 2025 7322  e following: %s"
+0001e8d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001e8e0: 2020 2020 2020 2020 2020 2520 2873 656c            % (sel
+0001e8f0: 662e 7370 6563 6961 6c2c 2073 656c 662e  f.special, self.
+0001e900: 7370 6563 6961 6c73 290a 2020 2020 2020  specials).      
+0001e910: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+0001e920: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001e930: 2073 656c 662e 7370 6563 6961 6c20 3d3d   self.special ==
+0001e940: 2030 2061 6e64 2073 656c 662e 7370 6563   0 and self.spec
+0001e950: 6961 6c20 6973 206e 6f74 2046 616c 7365  ial is not False
+0001e960: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001e970: 2020 6966 206c 656e 285b 6974 656d 2066    if len([item f
+0001e980: 6f72 2069 7465 6d20 696e 2061 6c6c 5f73  or item in all_s
+0001e990: 7065 6369 616c 2069 6620 6974 656d 5d29  pecial if item])
+0001e9a0: 203e 2030 3a0a 2020 2020 2020 2020 2020   > 0:.          
+0001e9b0: 2020 2020 2020 2020 2020 6661 696c 7572            failur
+0001e9c0: 6573 2e61 7070 656e 6428 0a20 2020 2020  es.append(.     
+0001e9d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e9e0: 2020 2073 656c 662e 7472 616e 736c 6174     self.translat
+0001e9f0: 6f72 2822 4d61 7920 6e6f 7420 636f 6e74  or("May not cont
+0001ea00: 6169 6e20 616e 7920 6f66 2074 6865 2066  ain any of the f
+0001ea10: 6f6c 6c6f 7769 6e67 3a20 2573 2229 0a20  ollowing: %s"). 
+0001ea20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ea30: 2020 2020 2020 2025 2073 656c 662e 7370         % self.sp
+0001ea40: 6563 6961 6c73 0a20 2020 2020 2020 2020  ecials.         
+0001ea50: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0001ea60: 2020 2020 2069 6620 7365 6c66 2e69 6e76       if self.inv
+0001ea70: 616c 6964 3a0a 2020 2020 2020 2020 2020  alid:.          
+0001ea80: 2020 616c 6c5f 696e 7661 6c69 6420 3d20    all_invalid = 
+0001ea90: 5b63 6820 696e 2076 616c 7565 2066 6f72  [ch in value for
+0001eaa0: 2063 6820 696e 2073 656c 662e 696e 7661   ch in self.inva
+0001eab0: 6c69 645d 0a20 2020 2020 2020 2020 2020  lid].           
+0001eac0: 2069 6620 616c 6c5f 696e 7661 6c69 642e   if all_invalid.
+0001ead0: 636f 756e 7428 5472 7565 2920 3e20 303a  count(True) > 0:
+0001eae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001eaf0: 2066 6169 6c75 7265 732e 6170 7065 6e64   failures.append
+0001eb00: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001eb10: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0001eb20: 6c61 746f 7228 224d 6179 206e 6f74 2063  lator("May not c
+0001eb30: 6f6e 7461 696e 2061 6e79 206f 6620 7468  ontain any of th
+0001eb40: 6520 666f 6c6c 6f77 696e 673a 2025 7322  e following: %s"
+0001eb50: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0001eb60: 2020 2020 2020 2520 7365 6c66 2e69 6e76        % self.inv
+0001eb70: 616c 6964 0a20 2020 2020 2020 2020 2020  alid.           
+0001eb80: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
+0001eb90: 6620 6973 696e 7374 616e 6365 2873 656c  f isinstance(sel
+0001eba0: 662e 7570 7065 722c 2069 6e74 293a 0a20  f.upper, int):. 
+0001ebb0: 2020 2020 2020 2020 2020 2061 6c6c 5f75             all_u
+0001ebc0: 7070 6572 203d 2072 652e 6669 6e64 616c  pper = re.findal
+0001ebd0: 6c28 225b 412d 5a5d 222c 2076 616c 7565  l("[A-Z]", value
+0001ebe0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+0001ebf0: 2073 656c 662e 7570 7065 7220 3e20 303a   self.upper > 0:
+0001ec00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ec10: 2069 6620 6e6f 7420 6c65 6e28 616c 6c5f   if not len(all_
+0001ec20: 7570 7065 7229 203e 3d20 7365 6c66 2e75  upper) >= self.u
+0001ec30: 7070 6572 3a0a 2020 2020 2020 2020 2020  pper:.          
+0001ec40: 2020 2020 2020 2020 2020 6661 696c 7572            failur
+0001ec50: 6573 2e61 7070 656e 6428 0a20 2020 2020  es.append(.     
 0001ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ec70: 2020 2025 2028 7374 7228 7365 6c66 2e6e     % (str(self.n
-0001ec80: 756d 6265 7229 2c20 6e75 6d62 6572 7329  umber), numbers)
-0001ec90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001eca0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-0001ecb0: 2020 2065 6c69 6620 7365 6c66 2e6e 756d     elif self.num
-0001ecc0: 6265 7220 3d3d 2030 2061 6e64 2073 656c  ber == 0 and sel
-0001ecd0: 662e 6e75 6d62 6572 2069 7320 6e6f 7420  f.number is not 
-0001ece0: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
-0001ecf0: 2020 2020 2020 2069 6620 6c65 6e28 616c         if len(al
-0001ed00: 6c5f 6e75 6d62 6572 2920 3e20 303a 0a20  l_number) > 0:. 
-0001ed10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ed20: 2020 2066 6169 6c75 7265 732e 6170 7065     failures.appe
-0001ed30: 6e64 2873 656c 662e 7472 616e 736c 6174  nd(self.translat
-0001ed40: 6f72 2822 4d61 7920 6e6f 7420 696e 636c  or("May not incl
-0001ed50: 7564 6520 616e 7920 6e75 6d62 6572 7322  ude any numbers"
-0001ed60: 2929 0a20 2020 2020 2020 2069 6620 6c65  )).        if le
-0001ed70: 6e28 6661 696c 7572 6573 2920 3d3d 2030  n(failures) == 0
-0001ed80: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0001ed90: 7475 726e 2076 616c 7565 0a20 2020 2020  turn value.     
-0001eda0: 2020 2069 6620 6e6f 7420 7365 6c66 2e65     if not self.e
-0001edb0: 7272 6f72 5f6d 6573 7361 6765 3a0a 2020  rror_message:.  
-0001edc0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-0001edd0: 662e 6573 7472 696e 673a 0a20 2020 2020  f.estring:.     
-0001ede0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001edf0: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-0001ee00: 2822 7c22 2e6a 6f69 6e28 6d61 7028 7374  ("|".join(map(st
-0001ee10: 722c 2066 6169 6c75 7265 7329 2929 0a20  r, failures))). 
-0001ee20: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001ee30: 2056 616c 6964 6174 696f 6e45 7272 6f72   ValidationError
-0001ee40: 2822 2c20 222e 6a6f 696e 2866 6169 6c75  (", ".join(failu
-0001ee50: 7265 7329 290a 2020 2020 2020 2020 656c  res)).        el
-0001ee60: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0001ee70: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-0001ee80: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-0001ee90: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-0001eea0: 5f6d 6573 7361 6765 2929 0a0a 0a63 6c61  _message))...cla
-0001eeb0: 7373 2049 535f 494d 4147 4528 5661 6c69  ss IS_IMAGE(Vali
-0001eec0: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
-0001eed0: 2020 2020 4368 6563 6b73 2069 6620 6669      Checks if fi
-0001eee0: 6c65 2075 706c 6f61 6465 6420 7468 726f  le uploaded thro
-0001eef0: 7567 6820 6669 6c65 2069 6e70 7574 2077  ugh file input w
-0001ef00: 6173 2073 6176 6564 2069 6e20 6f6e 6520  as saved in one 
-0001ef10: 6f66 2073 656c 6563 7465 640a 2020 2020  of selected.    
-0001ef20: 696d 6167 6520 666f 726d 6174 7320 616e  image formats an
-0001ef30: 6420 6861 7320 6469 6d65 6e73 696f 6e73  d has dimensions
-0001ef40: 2028 7769 6474 6820 616e 6420 6865 6967   (width and heig
-0001ef50: 6874 2920 7769 7468 696e 2067 6976 656e  ht) within given
-0001ef60: 2062 6f75 6e64 6172 6965 732e 0a0a 2020   boundaries...  
-0001ef70: 2020 446f 6573 202a 6e6f 742a 2063 6865    Does *not* che
-0001ef80: 636b 2066 6f72 206d 6178 696d 756d 2066  ck for maximum f
-0001ef90: 696c 6520 7369 7a65 2028 7573 6520 4953  ile size (use IS
-0001efa0: 5f4c 454e 4754 4820 666f 7220 7468 6174  _LENGTH for that
-0001efb0: 292e 2052 6574 7572 6e73 0a20 2020 2076  ). Returns.    v
-0001efc0: 616c 6964 6174 696f 6e20 6661 696c 7572  alidation failur
-0001efd0: 6520 6966 206e 6f20 6461 7461 2077 6173  e if no data was
-0001efe0: 2075 706c 6f61 6465 642e 0a0a 2020 2020   uploaded...    
-0001eff0: 5375 7070 6f72 7465 6420 6669 6c65 2066  Supported file f
-0001f000: 6f72 6d61 7473 3a20 424d 502c 2047 4946  ormats: BMP, GIF
-0001f010: 2c20 4a50 4547 2c20 504e 472e 0a0a 2020  , JPEG, PNG...  
-0001f020: 2020 436f 6465 2070 6172 7473 2074 616b    Code parts tak
-0001f030: 656e 2066 726f 6d0a 2020 2020 6874 7470  en from.    http
-0001f040: 3a2f 2f6d 6169 6c2e 7079 7468 6f6e 2e6f  ://mail.python.o
-0001f050: 7267 2f70 6970 6572 6d61 696c 2f70 7974  rg/pipermail/pyt
-0001f060: 686f 6e2d 6c69 7374 2f32 3030 372d 4a75  hon-list/2007-Ju
-0001f070: 6e65 2f36 3137 3132 362e 6874 6d6c 0a0a  ne/617126.html..
-0001f080: 2020 2020 4172 6773 3a0a 2020 2020 2020      Args:.      
-0001f090: 2020 6578 7465 6e73 696f 6e73 3a20 6974    extensions: it
-0001f0a0: 6572 6162 6c65 2063 6f6e 7461 696e 696e  erable containin
-0001f0b0: 6720 616c 6c6f 7765 6420 2a6c 6f77 6572  g allowed *lower
-0001f0c0: 6361 7365 2a20 696d 6167 6520 6669 6c65  case* image file
-0001f0d0: 2065 7874 656e 7369 6f6e 730a 2020 2020   extensions.    
-0001f0e0: 2020 2020 2827 6a70 6727 2065 7874 656e      ('jpg' exten
-0001f0f0: 7369 6f6e 206f 6620 7570 6c6f 6164 6564  sion of uploaded
-0001f100: 2066 696c 6520 636f 756e 7473 2061 7320   file counts as 
-0001f110: 276a 7065 6727 290a 2020 2020 2020 2020  'jpeg').        
-0001f120: 6d61 7873 697a 653a 2069 7465 7261 626c  maxsize: iterabl
-0001f130: 6520 636f 6e74 6169 6e69 6e67 206d 6178  e containing max
-0001f140: 696d 756d 2077 6964 7468 2061 6e64 2068  imum width and h
-0001f150: 6569 6768 7420 6f66 2074 6865 2069 6d61  eight of the ima
-0001f160: 6765 0a20 2020 2020 2020 206d 696e 7369  ge.        minsi
-0001f170: 7a65 3a20 6974 6572 6162 6c65 2063 6f6e  ze: iterable con
-0001f180: 7461 696e 696e 6720 6d69 6e69 6d75 6d20  taining minimum 
-0001f190: 7769 6474 6820 616e 6420 6865 6967 6874  width and height
-0001f1a0: 206f 6620 7468 6520 696d 6167 650a 2020   of the image.  
-0001f1b0: 2020 2020 2020 6173 7065 6374 7261 7469        aspectrati
-0001f1c0: 6f3a 2069 7465 7261 626c 6520 636f 6e74  o: iterable cont
-0001f1d0: 6169 6e69 6e67 2074 6172 6765 7420 6173  aining target as
-0001f1e0: 7065 6374 2072 6174 696f 0a0a 2020 2020  pect ratio..    
-0001f1f0: 5573 6520 282d 312c 202d 3129 2061 7320  Use (-1, -1) as 
-0001f200: 6d69 6e73 697a 6520 746f 2070 6173 7320  minsize to pass 
-0001f210: 696d 6167 6520 7369 7a65 2063 6865 636b  image size check
-0001f220: 2e0a 2020 2020 5573 6520 282d 312c 202d  ..    Use (-1, -
-0001f230: 3129 2061 7320 6173 7065 6374 7261 7469  1) as aspectrati
-0001f240: 6f20 746f 2070 6173 7320 6173 7065 6374  o to pass aspect
-0001f250: 2072 6174 696f 2063 6865 636b 2e0a 0a20   ratio check... 
-0001f260: 2020 2045 7861 6d70 6c65 733a 0a20 2020     Examples:.   
-0001f270: 2020 2020 2043 6865 636b 2069 6620 7570       Check if up
-0001f280: 6c6f 6164 6564 2066 696c 6520 6973 2069  loaded file is i
-0001f290: 6e20 616e 7920 6f66 2073 7570 706f 7274  n any of support
-0001f2a0: 6564 2069 6d61 6765 2066 6f72 6d61 7473  ed image formats
-0001f2b0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-0001f2c0: 4e50 5554 285f 7479 7065 3d27 6669 6c65  NPUT(_type='file
-0001f2d0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-0001f2e0: 2072 6571 7569 7265 733d 4953 5f49 4d41   requires=IS_IMA
-0001f2f0: 4745 2829 290a 0a20 2020 2020 2020 2043  GE())..        C
-0001f300: 6865 636b 2069 6620 7570 6c6f 6164 6564  heck if uploaded
-0001f310: 2066 696c 6520 6973 2065 6974 6865 7220   file is either 
-0001f320: 4a50 4547 206f 7220 504e 473a 0a0a 2020  JPEG or PNG:..  
-0001f330: 2020 2020 2020 2020 2020 494e 5055 5428            INPUT(
-0001f340: 5f74 7970 653d 2766 696c 6527 2c20 5f6e  _type='file', _n
-0001f350: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
-0001f360: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0001f370: 6972 6573 3d49 535f 494d 4147 4528 6578  ires=IS_IMAGE(ex
-0001f380: 7465 6e73 696f 6e73 3d28 276a 7065 6727  tensions=('jpeg'
-0001f390: 2c20 2770 6e67 2729 2929 0a0a 2020 2020  , 'png')))..    
-0001f3a0: 2020 2020 4368 6563 6b20 6966 2075 706c      Check if upl
-0001f3b0: 6f61 6465 6420 6669 6c65 2069 7320 504e  oaded file is PN
-0001f3c0: 4720 7769 7468 206d 6178 696d 756d 2073  G with maximum s
-0001f3d0: 697a 6520 6f66 2032 3030 7832 3030 2070  ize of 200x200 p
-0001f3e0: 6978 656c 733a 0a0a 2020 2020 2020 2020  ixels:..        
-0001f3f0: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-0001f400: 2766 696c 6527 2c20 5f6e 616d 653d 276e  'file', _name='n
-0001f410: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
-0001f420: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
-0001f430: 535f 494d 4147 4528 6578 7465 6e73 696f  S_IMAGE(extensio
-0001f440: 6e73 3d28 2770 6e67 2729 2c20 6d61 7873  ns=('png'), maxs
-0001f450: 697a 653d 2832 3030 2c20 3230 3029 2929  ize=(200, 200)))
-0001f460: 0a0a 2020 2020 2020 2020 4368 6563 6b20  ..        Check 
-0001f470: 6966 2075 706c 6f61 6465 6420 6669 6c65  if uploaded file
-0001f480: 2068 6173 2061 2031 363a 3920 6173 7065   has a 16:9 aspe
-0001f490: 6374 2072 6174 696f 3a0a 0a20 2020 2020  ct ratio:..     
-0001f4a0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-0001f4b0: 7065 3d27 6669 6c65 272c 205f 6e61 6d65  pe='file', _name
-0001f4c0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
-0001f4d0: 2020 2020 2020 2020 2072 6571 7569 7265           require
-0001f4e0: 733d 4953 5f49 4d41 4745 2861 7370 6563  s=IS_IMAGE(aspec
-0001f4f0: 7472 6174 696f 3d28 3136 2c20 3929 2929  tratio=(16, 9)))
-0001f500: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
-0001f510: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-0001f520: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-0001f530: 2020 6578 7465 6e73 696f 6e73 3d28 2262    extensions=("b
-0001f540: 6d70 222c 2022 6769 6622 2c20 226a 7065  mp", "gif", "jpe
-0001f550: 6722 2c20 2270 6e67 2229 2c0a 2020 2020  g", "png"),.    
-0001f560: 2020 2020 6d61 7873 697a 653d 2831 3030      maxsize=(100
-0001f570: 3030 2c20 3130 3030 3029 2c0a 2020 2020  00, 10000),.    
-0001f580: 2020 2020 6d69 6e73 697a 653d 2830 2c20      minsize=(0, 
-0001f590: 3029 2c0a 2020 2020 2020 2020 6173 7065  0),.        aspe
-0001f5a0: 6374 7261 7469 6f3d 282d 312c 202d 3129  ctratio=(-1, -1)
-0001f5b0: 2c0a 2020 2020 2020 2020 6572 726f 725f  ,.        error_
-0001f5c0: 6d65 7373 6167 653d 2249 6e76 616c 6964  message="Invalid
-0001f5d0: 2069 6d61 6765 222c 0a20 2020 2029 3a0a   image",.    ):.
-0001f5e0: 2020 2020 2020 2020 7365 6c66 2e65 7874          self.ext
-0001f5f0: 656e 7369 6f6e 7320 3d20 6578 7465 6e73  ensions = extens
-0001f600: 696f 6e73 0a20 2020 2020 2020 2073 656c  ions.        sel
-0001f610: 662e 6d61 7873 697a 6520 3d20 6d61 7873  f.maxsize = maxs
-0001f620: 697a 650a 2020 2020 2020 2020 7365 6c66  ize.        self
-0001f630: 2e6d 696e 7369 7a65 203d 206d 696e 7369  .minsize = minsi
-0001f640: 7a65 0a20 2020 2020 2020 2073 656c 662e  ze.        self.
-0001f650: 6173 7065 6374 7261 7469 6f20 3d20 6173  aspectratio = as
-0001f660: 7065 6374 7261 7469 6f0a 2020 2020 2020  pectratio.      
-0001f670: 2020 7365 6c66 2e65 7272 6f72 5f6d 6573    self.error_mes
-0001f680: 7361 6765 203d 2065 7272 6f72 5f6d 6573  sage = error_mes
-0001f690: 7361 6765 0a0a 2020 2020 6465 6620 7661  sage..    def va
-0001f6a0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-0001f6b0: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-0001f6c0: 6e65 293a 0a20 2020 2020 2020 2074 7279  ne):.        try
-0001f6d0: 3a0a 2020 2020 2020 2020 2020 2020 6578  :.            ex
-0001f6e0: 7465 6e73 696f 6e20 3d20 7661 6c75 652e  tension = value.
-0001f6f0: 6669 6c65 6e61 6d65 2e72 6669 6e64 2822  filename.rfind("
-0001f700: 2e22 290a 2020 2020 2020 2020 2020 2020  .").            
-0001f710: 6173 7365 7274 2065 7874 656e 7369 6f6e  assert extension
-0001f720: 203e 3d20 300a 2020 2020 2020 2020 2020   >= 0.          
-0001f730: 2020 6578 7465 6e73 696f 6e20 3d20 7661    extension = va
-0001f740: 6c75 652e 6669 6c65 6e61 6d65 5b65 7874  lue.filename[ext
-0001f750: 656e 7369 6f6e 202b 2031 203a 5d2e 6c6f  ension + 1 :].lo
-0001f760: 7765 7228 290a 2020 2020 2020 2020 2020  wer().          
-0001f770: 2020 6966 2065 7874 656e 7369 6f6e 203d    if extension =
-0001f780: 3d20 226a 7067 223a 0a20 2020 2020 2020  = "jpg":.       
-0001f790: 2020 2020 2020 2020 2065 7874 656e 7369           extensi
-0001f7a0: 6f6e 203d 2022 6a70 6567 220a 2020 2020  on = "jpeg".    
-0001f7b0: 2020 2020 2020 2020 6173 7365 7274 2065          assert e
-0001f7c0: 7874 656e 7369 6f6e 2069 6e20 7365 6c66  xtension in self
-0001f7d0: 2e65 7874 656e 7369 6f6e 730a 2020 2020  .extensions.    
-0001f7e0: 2020 2020 2020 2020 6966 2065 7874 656e          if exten
-0001f7f0: 7369 6f6e 203d 3d20 2262 6d70 223a 0a20  sion == "bmp":. 
-0001f800: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0001f810: 6964 7468 2c20 6865 6967 6874 203d 2073  idth, height = s
-0001f820: 656c 662e 5f5f 626d 7028 7661 6c75 652e  elf.__bmp(value.
-0001f830: 6669 6c65 290a 2020 2020 2020 2020 2020  file).          
-0001f840: 2020 656c 6966 2065 7874 656e 7369 6f6e    elif extension
-0001f850: 203d 3d20 2267 6966 223a 0a20 2020 2020   == "gif":.     
-0001f860: 2020 2020 2020 2020 2020 2077 6964 7468             width
-0001f870: 2c20 6865 6967 6874 203d 2073 656c 662e  , height = self.
-0001f880: 5f5f 6769 6628 7661 6c75 652e 6669 6c65  __gif(value.file
-0001f890: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-0001f8a0: 6966 2065 7874 656e 7369 6f6e 203d 3d20  if extension == 
-0001f8b0: 226a 7065 6722 3a0a 2020 2020 2020 2020  "jpeg":.        
-0001f8c0: 2020 2020 2020 2020 7769 6474 682c 2068          width, h
-0001f8d0: 6569 6768 7420 3d20 7365 6c66 2e5f 5f6a  eight = self.__j
-0001f8e0: 7065 6728 7661 6c75 652e 6669 6c65 290a  peg(value.file).
-0001f8f0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-0001f900: 2065 7874 656e 7369 6f6e 203d 3d20 2270   extension == "p
-0001f910: 6e67 223a 0a20 2020 2020 2020 2020 2020  ng":.           
-0001f920: 2020 2020 2077 6964 7468 2c20 6865 6967       width, heig
-0001f930: 6874 203d 2073 656c 662e 5f5f 706e 6728  ht = self.__png(
-0001f940: 7661 6c75 652e 6669 6c65 290a 2020 2020  value.file).    
-0001f950: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0001f960: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-0001f970: 6474 6820 3d20 2d31 0a20 2020 2020 2020  dth = -1.       
-0001f980: 2020 2020 2020 2020 2068 6569 6768 7420           height 
-0001f990: 3d20 2d31 0a0a 2020 2020 2020 2020 2020  = -1..          
-0001f9a0: 2020 6173 7365 7274 2028 0a20 2020 2020    assert (.     
-0001f9b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001f9c0: 6d69 6e73 697a 655b 305d 203c 3d20 7769  minsize[0] <= wi
-0001f9d0: 6474 6820 3c3d 2073 656c 662e 6d61 7873  dth <= self.maxs
-0001f9e0: 697a 655b 305d 0a20 2020 2020 2020 2020  ize[0].         
-0001f9f0: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
-0001fa00: 6d69 6e73 697a 655b 315d 203c 3d20 6865  minsize[1] <= he
-0001fa10: 6967 6874 203c 3d20 7365 6c66 2e6d 6178  ight <= self.max
-0001fa20: 7369 7a65 5b31 5d0a 2020 2020 2020 2020  size[1].        
-0001fa30: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-0001fa40: 2020 2069 6620 7365 6c66 2e61 7370 6563     if self.aspec
-0001fa50: 7472 6174 696f 203e 2028 2d31 2c20 2d31  tratio > (-1, -1
-0001fa60: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0001fa70: 2020 2074 6172 6765 745f 7261 7469 6f20     target_ratio 
-0001fa80: 3d20 2831 2e30 202a 2073 656c 662e 6173  = (1.0 * self.as
-0001fa90: 7065 6374 7261 7469 6f5b 315d 2920 2f20  pectratio[1]) / 
-0001faa0: 7365 6c66 2e61 7370 6563 7472 6174 696f  self.aspectratio
-0001fab0: 5b30 5d0a 2020 2020 2020 2020 2020 2020  [0].            
-0001fac0: 2020 2020 6163 7475 616c 5f72 6174 696f      actual_ratio
-0001fad0: 203d 2028 312e 3020 2a20 6865 6967 6874   = (1.0 * height
-0001fae0: 2920 2f20 7769 6474 680a 0a20 2020 2020  ) / width..     
-0001faf0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-0001fb00: 7420 6163 7475 616c 5f72 6174 696f 203d  t actual_ratio =
-0001fb10: 3d20 7461 7267 6574 5f72 6174 696f 0a0a  = target_ratio..
-0001fb20: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-0001fb30: 652e 6669 6c65 2e73 6565 6b28 3029 0a20  e.file.seek(0). 
-0001fb40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001fb50: 6e20 7661 6c75 650a 2020 2020 2020 2020  n value.        
-0001fb60: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0001fb70: 2061 7320 653a 0a20 2020 2020 2020 2020   as e:.         
-0001fb80: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
-0001fb90: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
-0001fba0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
-0001fbb0: 726f 725f 6d65 7373 6167 6529 290a 0a20  ror_message)).. 
-0001fbc0: 2020 2064 6566 205f 5f62 6d70 2873 656c     def __bmp(sel
-0001fbd0: 662c 2073 7472 6561 6d29 3a0a 2020 2020  f, stream):.    
-0001fbe0: 2020 2020 6966 2073 7472 6561 6d2e 7265      if stream.re
-0001fbf0: 6164 2832 2920 3d3d 2062 2242 4d22 3a0a  ad(2) == b"BM":.
-0001fc00: 2020 2020 2020 2020 2020 2020 7374 7265              stre
-0001fc10: 616d 2e72 6561 6428 3136 290a 2020 2020  am.read(16).    
-0001fc20: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001fc30: 7472 7563 742e 756e 7061 636b 2822 3c4c  truct.unpack("<L
-0001fc40: 4c22 2c20 7374 7265 616d 2e72 6561 6428  L", stream.read(
-0001fc50: 3829 290a 2020 2020 2020 2020 7265 7475  8)).        retu
-0001fc60: 726e 2028 2d31 2c20 2d31 290a 0a20 2020  rn (-1, -1)..   
-0001fc70: 2064 6566 205f 5f67 6966 2873 656c 662c   def __gif(self,
-0001fc80: 2073 7472 6561 6d29 3a0a 2020 2020 2020   stream):.      
-0001fc90: 2020 6966 2073 7472 6561 6d2e 7265 6164    if stream.read
-0001fca0: 2836 2920 696e 2028 6222 4749 4638 3761  (6) in (b"GIF87a
-0001fcb0: 222c 2062 2247 4946 3839 6122 293a 0a20  ", b"GIF89a"):. 
-0001fcc0: 2020 2020 2020 2020 2020 2073 7472 6561             strea
-0001fcd0: 6d20 3d20 7374 7265 616d 2e72 6561 6428  m = stream.read(
-0001fce0: 3529 0a20 2020 2020 2020 2020 2020 2069  5).            i
-0001fcf0: 6620 6c65 6e28 7374 7265 616d 2920 3d3d  f len(stream) ==
-0001fd00: 2035 3a0a 2020 2020 2020 2020 2020 2020   5:.            
-0001fd10: 2020 2020 7265 7475 726e 2074 7570 6c65      return tuple
-0001fd20: 2873 7472 7563 742e 756e 7061 636b 2822  (struct.unpack("
-0001fd30: 3c48 4842 222c 2073 7472 6561 6d29 5b3a  <HHB", stream)[:
-0001fd40: 2d31 5d29 0a20 2020 2020 2020 2072 6574  -1]).        ret
-0001fd50: 7572 6e20 282d 312c 202d 3129 0a0a 2020  urn (-1, -1)..  
-0001fd60: 2020 6465 6620 5f5f 6a70 6567 2873 656c    def __jpeg(sel
-0001fd70: 662c 2073 7472 6561 6d29 3a0a 2020 2020  f, stream):.    
-0001fd80: 2020 2020 6966 2073 7472 6561 6d2e 7265      if stream.re
-0001fd90: 6164 2832 2920 3d3d 2062 225c 7846 465c  ad(2) == b"\xFF\
-0001fda0: 7844 3822 3a0a 2020 2020 2020 2020 2020  xD8":.          
-0001fdb0: 2020 7768 696c 6520 5472 7565 3a0a 2020    while True:.  
-0001fdc0: 2020 2020 2020 2020 2020 2020 2020 286d                (m
-0001fdd0: 6172 6b65 722c 2063 6f64 652c 206c 656e  arker, code, len
-0001fde0: 6774 6829 203d 2073 7472 7563 742e 756e  gth) = struct.un
-0001fdf0: 7061 636b 2822 2142 4248 222c 2073 7472  pack("!BBH", str
-0001fe00: 6561 6d2e 7265 6164 2834 2929 0a20 2020  eam.read(4)).   
-0001fe10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001fe20: 6d61 726b 6572 2021 3d20 3078 4646 3a0a  marker != 0xFF:.
-0001fe30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe40: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
-0001fe50: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
-0001fe60: 6f64 6520 3e3d 2030 7843 3020 616e 6420  ode >= 0xC0 and 
-0001fe70: 636f 6465 203c 3d20 3078 4333 3a0a 2020  code <= 0xC3:.  
-0001fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe90: 2020 7265 7475 726e 2074 7570 6c65 2872    return tuple(r
-0001fea0: 6576 6572 7365 6428 7374 7275 6374 2e75  eversed(struct.u
-0001feb0: 6e70 6163 6b28 2221 7848 4822 2c20 7374  npack("!xHH", st
-0001fec0: 7265 616d 2e72 6561 6428 3529 2929 290a  ream.read(5)))).
-0001fed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fee0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0001fef0: 2020 2020 2020 2020 2020 7374 7265 616d            stream
-0001ff00: 2e72 6561 6428 6c65 6e67 7468 202d 2032  .read(length - 2
-0001ff10: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0001ff20: 2028 2d31 2c20 2d31 290a 0a20 2020 2064   (-1, -1)..    d
-0001ff30: 6566 205f 5f70 6e67 2873 656c 662c 2073  ef __png(self, s
-0001ff40: 7472 6561 6d29 3a0a 2020 2020 2020 2020  tream):.        
-0001ff50: 6966 2073 7472 6561 6d2e 7265 6164 2838  if stream.read(8
-0001ff60: 2920 3d3d 2062 225c 3231 3150 4e47 5c72  ) == b"\211PNG\r
-0001ff70: 5c6e 5c30 3332 5c6e 223a 0a20 2020 2020  \n\032\n":.     
-0001ff80: 2020 2020 2020 2073 7472 6561 6d2e 7265         stream.re
-0001ff90: 6164 2834 290a 2020 2020 2020 2020 2020  ad(4).          
-0001ffa0: 2020 6966 2073 7472 6561 6d2e 7265 6164    if stream.read
-0001ffb0: 2834 2920 3d3d 2062 2249 4844 5222 3a0a  (4) == b"IHDR":.
-0001ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ffd0: 7265 7475 726e 2073 7472 7563 742e 756e  return struct.un
-0001ffe0: 7061 636b 2822 214c 4c22 2c20 7374 7265  pack("!LL", stre
-0001fff0: 616d 2e72 6561 6428 3829 290a 2020 2020  am.read(8)).    
-00020000: 2020 2020 7265 7475 726e 2028 2d31 2c20      return (-1, 
-00020010: 2d31 290a 0a0a 636c 6173 7320 4953 5f46  -1)...class IS_F
-00020020: 494c 4528 5661 6c69 6461 746f 7229 3a0a  ILE(Validator):.
-00020030: 2020 2020 2222 220a 2020 2020 4368 6563      """.    Chec
-00020040: 6b73 2069 6620 6e61 6d65 2061 6e64 2065  ks if name and e
-00020050: 7874 656e 7369 6f6e 206f 6620 6669 6c65  xtension of file
-00020060: 2075 706c 6f61 6465 6420 7468 726f 7567   uploaded throug
-00020070: 6820 6669 6c65 2069 6e70 7574 206d 6174  h file input mat
-00020080: 6368 6573 0a20 2020 2067 6976 656e 2063  ches.    given c
-00020090: 7269 7465 7269 612e 0a0a 2020 2020 446f  riteria...    Do
-000200a0: 6573 202a 6e6f 742a 2065 6e73 7572 6520  es *not* ensure 
-000200b0: 7468 6520 6669 6c65 2074 7970 6520 696e  the file type in
-000200c0: 2061 6e79 2077 6179 2e20 5265 7475 726e   any way. Return
-000200d0: 7320 7661 6c69 6461 7469 6f6e 2066 6169  s validation fai
-000200e0: 6c75 7265 0a20 2020 2069 6620 6e6f 2064  lure.    if no d
-000200f0: 6174 6120 7761 7320 7570 6c6f 6164 6564  ata was uploaded
-00020100: 2e0a 0a20 2020 2041 7267 733a 0a20 2020  ...    Args:.   
-00020110: 2020 2020 2066 696c 656e 616d 653a 2073       filename: s
-00020120: 7472 696e 672f 636f 6d70 696c 6564 2072  tring/compiled r
-00020130: 6567 6578 206f 7220 6120 6c69 7374 206f  egex or a list o
-00020140: 6620 7374 7269 6e67 732f 7265 6765 7820  f strings/regex 
-00020150: 6f66 2076 616c 6964 2066 696c 656e 616d  of valid filenam
-00020160: 6573 0a20 2020 2020 2020 2065 7874 656e  es.        exten
-00020170: 7369 6f6e 3a20 7374 7269 6e67 2f63 6f6d  sion: string/com
-00020180: 7069 6c65 6420 7265 6765 7820 6f72 2061  piled regex or a
-00020190: 206c 6973 7420 6f66 2073 7472 696e 6773   list of strings
-000201a0: 2f72 6567 6578 206f 6620 7661 6c69 6420  /regex of valid 
-000201b0: 6578 7465 6e73 696f 6e73 0a20 2020 2020  extensions.     
-000201c0: 2020 206c 6173 7464 6f74 3a20 7768 6963     lastdot: whic
-000201d0: 6820 646f 7420 7368 6f75 6c64 2062 6520  h dot should be 
-000201e0: 7573 6564 2061 7320 6120 6669 6c65 6e61  used as a filena
-000201f0: 6d65 202f 2065 7874 656e 7369 6f6e 2073  me / extension s
-00020200: 6570 6172 6174 6f72 3a0a 2020 2020 2020  eparator:.      
-00020210: 2020 2020 2020 5472 7565 206d 6561 6e73        True means
-00020220: 206c 6173 7420 646f 742c 2065 672e 2066   last dot, eg. f
-00020230: 696c 652e 6a70 672e 706e 6720 2d3e 2066  ile.jpg.png -> f
-00020240: 696c 652e 6a70 6720 2f20 706e 670a 2020  ile.jpg / png.  
-00020250: 2020 2020 2020 2020 2020 4661 6c73 6520            False 
-00020260: 6d65 616e 7320 6669 7273 7420 646f 742c  means first dot,
-00020270: 2065 672e 2066 696c 652e 7461 722e 677a   eg. file.tar.gz
-00020280: 202d 3e20 6669 6c65 202f 2074 6172 2e67   -> file / tar.g
-00020290: 7a0a 2020 2020 2020 2020 6361 7365 3a20  z.        case: 
-000202a0: 3020 2d20 6b65 6570 2074 6865 2063 6173  0 - keep the cas
-000202b0: 652c 2031 202d 2074 7261 6e73 666f 726d  e, 1 - transform
-000202c0: 2074 6865 2073 7472 696e 6720 696e 746f   the string into
-000202d0: 206c 6f77 6572 6361 7365 2028 6465 6661   lowercase (defa
-000202e0: 756c 7429 2c0a 2020 2020 2020 2020 2020  ult),.          
-000202f0: 2020 3220 2d20 7472 616e 7366 6f72 6d20    2 - transform 
-00020300: 7468 6520 7374 7269 6e67 2069 6e74 6f20  the string into 
-00020310: 7570 7065 7263 6173 650a 0a20 2020 2049  uppercase..    I
-00020320: 6620 7468 6572 6520 6973 206e 6f20 646f  f there is no do
-00020330: 7420 7072 6573 656e 742c 2065 7874 656e  t present, exten
-00020340: 7369 6f6e 2063 6865 636b 7320 7769 6c6c  sion checks will
-00020350: 2062 6520 646f 6e65 2061 6761 696e 7374   be done against
-00020360: 2065 6d70 7479 0a20 2020 2073 7472 696e   empty.    strin
-00020370: 6720 616e 6420 6669 6c65 6e61 6d65 2063  g and filename c
-00020380: 6865 636b 7320 6167 6169 6e73 7420 7768  hecks against wh
-00020390: 6f6c 6520 7661 6c75 652e 0a0a 2020 2020  ole value...    
-000203a0: 4578 616d 706c 6573 3a0a 2020 2020 2020  Examples:.      
-000203b0: 2020 4368 6563 6b20 6966 2066 696c 6520    Check if file 
-000203c0: 6861 7320 6120 7064 6620 6578 7465 6e73  has a pdf extens
-000203d0: 696f 6e20 2863 6173 6520 696e 7365 6e73  ion (case insens
-000203e0: 6974 6976 6529 3a0a 0a20 2020 2020 2020  itive):..       
-000203f0: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
-00020400: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
-00020410: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-00020420: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
-00020430: 494c 4528 6578 7465 6e73 696f 6e3d 2770  ILE(extension='p
-00020440: 6466 2729 290a 0a20 2020 2020 2020 2043  df'))..        C
-00020450: 6865 636b 2069 6620 6669 6c65 2069 7320  heck if file is 
-00020460: 6361 6c6c 6564 2027 7468 756d 626e 6169  called 'thumbnai
-00020470: 6c27 2061 6e64 2068 6173 2061 206a 7067  l' and has a jpg
-00020480: 206f 7220 706e 6720 6578 7465 6e73 696f   or png extensio
-00020490: 6e0a 2020 2020 2020 2020 2863 6173 6520  n.        (case 
-000204a0: 696e 7365 6e73 6974 6976 6529 3a0a 0a20  insensitive):.. 
-000204b0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
-000204c0: 7065 3d27 6669 6c65 272c 205f 6e61 6d65  pe='file', _name
-000204d0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
-000204e0: 2020 2020 2020 2020 2072 6571 7569 7265           require
-000204f0: 733d 4953 5f46 494c 4528 6669 6c65 6e61  s=IS_FILE(filena
-00020500: 6d65 3d27 7468 756d 626e 6169 6c27 2c0a  me='thumbnail',.
-00020510: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020520: 6578 7465 6e73 696f 6e3d 5b27 6a70 6727  extension=['jpg'
-00020530: 2c20 2770 6e67 275d 2929 0a0a 2020 2020  , 'png']))..    
-00020540: 2020 2020 4368 6563 6b20 6966 2066 696c      Check if fil
-00020550: 6520 6861 7320 6120 7461 722e 677a 2065  e has a tar.gz e
-00020560: 7874 656e 7369 6f6e 2061 6e64 206e 616d  xtension and nam
-00020570: 6520 7374 6172 7469 6e67 2077 6974 6820  e starting with 
-00020580: 6261 636b 7570 3a0a 0a20 2020 2020 2020  backup:..       
-00020590: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
-000205a0: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
-000205b0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-000205c0: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
-000205d0: 494c 4528 6669 6c65 6e61 6d65 3d72 652e  ILE(filename=re.
-000205e0: 636f 6d70 696c 6528 2762 6163 6b75 702e  compile('backup.
-000205f0: 2a27 292c 0a20 2020 2020 2020 2020 2020  *'),.           
-00020600: 2020 2020 2065 7874 656e 7369 6f6e 3d27       extension='
-00020610: 7461 722e 677a 272c 206c 6173 7464 6f74  tar.gz', lastdot
-00020620: 3d46 616c 7365 2929 0a0a 2020 2020 2020  =False))..      
-00020630: 2020 4368 6563 6b20 6966 2066 696c 6520    Check if file 
-00020640: 6861 7320 6e6f 2065 7874 656e 7369 6f6e  has no extension
-00020650: 2061 6e64 206e 616d 6520 6d61 7463 6869   and name matchi
-00020660: 6e67 2052 4541 444d 450a 2020 2020 2020  ng README.      
-00020670: 2020 2863 6173 6520 7365 6e73 6974 6976    (case sensitiv
-00020680: 6529 3a0a 0a20 2020 2020 2020 2020 2020  e):..           
-00020690: 2049 4e50 5554 285f 7479 7065 3d27 6669   INPUT(_type='fi
-000206a0: 6c65 272c 205f 6e61 6d65 3d27 6e61 6d65  le', _name='name
-000206b0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-000206c0: 2020 2072 6571 7569 7265 733d 4953 5f46     requires=IS_F
-000206d0: 494c 4528 6669 6c65 6e61 6d65 3d27 5245  ILE(filename='RE
-000206e0: 4144 4d45 272c 0a20 2020 2020 2020 2020  ADME',.         
-000206f0: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
-00020700: 3d27 272c 2063 6173 653d 3029 0a0a 2020  ='', case=0)..  
-00020710: 2020 2222 220a 0a20 2020 2064 6566 205f    """..    def _
-00020720: 5f69 6e69 745f 5f28 0a20 2020 2020 2020  _init__(.       
-00020730: 2073 656c 662c 0a20 2020 2020 2020 2066   self,.        f
-00020740: 696c 656e 616d 653d 4e6f 6e65 2c0a 2020  ilename=None,.  
-00020750: 2020 2020 2020 6578 7465 6e73 696f 6e3d        extension=
-00020760: 4e6f 6e65 2c0a 2020 2020 2020 2020 6c61  None,.        la
-00020770: 7374 646f 743d 5472 7565 2c0a 2020 2020  stdot=True,.    
-00020780: 2020 2020 6361 7365 3d31 2c0a 2020 2020      case=1,.    
-00020790: 2020 2020 6572 726f 725f 6d65 7373 6167      error_messag
-000207a0: 653d 2245 6e74 6572 2076 616c 6964 2066  e="Enter valid f
-000207b0: 696c 656e 616d 6522 2c0a 2020 2020 293a  ilename",.    ):
-000207c0: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-000207d0: 6c65 6e61 6d65 203d 2066 696c 656e 616d  lename = filenam
-000207e0: 650a 2020 2020 2020 2020 7365 6c66 2e65  e.        self.e
-000207f0: 7874 656e 7369 6f6e 203d 2065 7874 656e  xtension = exten
-00020800: 7369 6f6e 0a20 2020 2020 2020 2073 656c  sion.        sel
-00020810: 662e 6c61 7374 646f 7420 3d20 6c61 7374  f.lastdot = last
-00020820: 646f 740a 2020 2020 2020 2020 7365 6c66  dot.        self
-00020830: 2e63 6173 6520 3d20 6361 7365 0a20 2020  .case = case.   
-00020840: 2020 2020 2073 656c 662e 6572 726f 725f       self.error_
-00020850: 6d65 7373 6167 6520 3d20 6572 726f 725f  message = error_
-00020860: 6d65 7373 6167 650a 0a20 2020 2064 6566  message..    def
-00020870: 206d 6174 6368 2873 656c 662c 2076 616c   match(self, val
-00020880: 7565 312c 2076 616c 7565 3229 3a0a 2020  ue1, value2):.  
-00020890: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000208a0: 6e63 6528 7661 6c75 6531 2c20 286c 6973  nce(value1, (lis
-000208b0: 742c 2074 7570 6c65 2929 3a0a 2020 2020  t, tuple)):.    
-000208c0: 2020 2020 2020 2020 666f 7220 7620 696e          for v in
-000208d0: 2076 616c 7565 313a 0a20 2020 2020 2020   value1:.       
-000208e0: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-000208f0: 2e6d 6174 6368 2876 2c20 7661 6c75 6532  .match(v, value2
-00020900: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00020910: 2020 2020 2020 2072 6574 7572 6e20 5472         return Tr
-00020920: 7565 0a20 2020 2020 2020 2020 2020 2072  ue.            r
-00020930: 6574 7572 6e20 4661 6c73 650a 2020 2020  eturn False.    
-00020940: 2020 2020 656c 6966 2063 616c 6c61 626c      elif callabl
-00020950: 6528 6765 7461 7474 7228 7661 6c75 6531  e(getattr(value1
-00020960: 2c20 226d 6174 6368 222c 204e 6f6e 6529  , "match", None)
-00020970: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00020980: 6574 7572 6e20 7661 6c75 6531 2e6d 6174  eturn value1.mat
-00020990: 6368 2876 616c 7565 3229 0a20 2020 2020  ch(value2).     
-000209a0: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
-000209b0: 6365 2876 616c 7565 312c 2073 7472 293a  ce(value1, str):
-000209c0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-000209d0: 7572 6e20 7661 6c75 6531 203d 3d20 7661  urn value1 == va
-000209e0: 6c75 6532 0a0a 2020 2020 6465 6620 7661  lue2..    def va
-000209f0: 6c69 6461 7465 2873 656c 662c 2076 616c  lidate(self, val
-00020a00: 7565 2c20 7265 636f 7264 5f69 643d 4e6f  ue, record_id=No
-00020a10: 6e65 293a 0a20 2020 2020 2020 2074 7279  ne):.        try
-00020a20: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
-00020a30: 7269 6e67 203d 2076 616c 7565 2e66 696c  ring = value.fil
-00020a40: 656e 616d 650a 2020 2020 2020 2020 6578  ename.        ex
-00020a50: 6365 7074 3a0a 2020 2020 2020 2020 2020  cept:.          
-00020a60: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-00020a70: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
-00020a80: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-00020a90: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
-00020aa0: 2020 2020 2069 6620 7365 6c66 2e63 6173       if self.cas
-00020ab0: 6520 3d3d 2031 3a0a 2020 2020 2020 2020  e == 1:.        
-00020ac0: 2020 2020 7374 7269 6e67 203d 2073 7472      string = str
-00020ad0: 696e 672e 6c6f 7765 7228 290a 2020 2020  ing.lower().    
-00020ae0: 2020 2020 656c 6966 2073 656c 662e 6361      elif self.ca
-00020af0: 7365 203d 3d20 323a 0a20 2020 2020 2020  se == 2:.       
-00020b00: 2020 2020 2073 7472 696e 6720 3d20 7374       string = st
-00020b10: 7269 6e67 2e75 7070 6572 2829 0a20 2020  ring.upper().   
-00020b20: 2020 2020 2069 6620 7365 6c66 2e6c 6173       if self.las
-00020b30: 7464 6f74 3a0a 2020 2020 2020 2020 2020  tdot:.          
-00020b40: 2020 646f 7420 3d20 7374 7269 6e67 2e72    dot = string.r
-00020b50: 6669 6e64 2822 2e22 290a 2020 2020 2020  find(".").      
-00020b60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00020b70: 2020 2020 646f 7420 3d20 7374 7269 6e67      dot = string
-00020b80: 2e66 696e 6428 222e 2229 0a20 2020 2020  .find(".").     
-00020b90: 2020 2069 6620 646f 7420 3d3d 202d 313a     if dot == -1:
-00020ba0: 0a20 2020 2020 2020 2020 2020 2064 6f74  .            dot
-00020bb0: 203d 206c 656e 2873 7472 696e 6729 0a20   = len(string). 
-00020bc0: 2020 2020 2020 2069 6620 7365 6c66 2e66         if self.f
-00020bd0: 696c 656e 616d 6520 616e 6420 6e6f 7420  ilename and not 
-00020be0: 7365 6c66 2e6d 6174 6368 2873 656c 662e  self.match(self.
-00020bf0: 6669 6c65 6e61 6d65 2c20 7374 7269 6e67  filename, string
-00020c00: 5b3a 646f 745d 293a 0a20 2020 2020 2020  [:dot]):.       
-00020c10: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00020c20: 6174 696f 6e45 7272 6f72 2873 656c 662e  ationError(self.
-00020c30: 7472 616e 736c 6174 6f72 2873 656c 662e  translator(self.
-00020c40: 6572 726f 725f 6d65 7373 6167 6529 290a  error_message)).
-00020c50: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
-00020c60: 662e 6578 7465 6e73 696f 6e20 616e 6420  f.extension and 
-00020c70: 6e6f 7420 7365 6c66 2e6d 6174 6368 2873  not self.match(s
-00020c80: 656c 662e 6578 7465 6e73 696f 6e2c 2073  elf.extension, s
-00020c90: 7472 696e 675b 646f 7420 2b20 3120 3a5d  tring[dot + 1 :]
-00020ca0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00020cb0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00020cc0: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-00020cd0: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00020ce0: 6d65 7373 6167 6529 290a 2020 2020 2020  message)).      
-00020cf0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00020d00: 2020 2020 7265 7475 726e 2076 616c 7565      return value
-00020d10: 0a0a 0a63 6c61 7373 2049 535f 5550 4c4f  ...class IS_UPLO
-00020d20: 4144 5f46 494c 454e 414d 4528 5661 6c69  AD_FILENAME(Vali
-00020d30: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
-00020d40: 2020 2020 466f 7220 6e65 7720 6170 706c      For new appl
-00020d50: 6963 6174 696f 6e73 2c20 7573 6520 4953  ications, use IS
-00020d60: 5f46 494c 4528 292e 0a0a 2020 2020 4368  _FILE()...    Ch
-00020d70: 6563 6b73 2069 6620 6e61 6d65 2061 6e64  ecks if name and
-00020d80: 2065 7874 656e 7369 6f6e 206f 6620 6669   extension of fi
-00020d90: 6c65 2075 706c 6f61 6465 6420 7468 726f  le uploaded thro
-00020da0: 7567 6820 6669 6c65 2069 6e70 7574 206d  ugh file input m
-00020db0: 6174 6368 6573 0a20 2020 2067 6976 656e  atches.    given
-00020dc0: 2063 7269 7465 7269 612e 0a0a 2020 2020   criteria...    
-00020dd0: 446f 6573 202a 6e6f 742a 2065 6e73 7572  Does *not* ensur
-00020de0: 6520 7468 6520 6669 6c65 2074 7970 6520  e the file type 
-00020df0: 696e 2061 6e79 2077 6179 2e20 5265 7475  in any way. Retu
-00020e00: 726e 7320 7661 6c69 6461 7469 6f6e 2066  rns validation f
-00020e10: 6169 6c75 7265 0a20 2020 2069 6620 6e6f  ailure.    if no
-00020e20: 2064 6174 6120 7761 7320 7570 6c6f 6164   data was upload
-00020e30: 6564 2e0a 0a20 2020 2041 7267 733a 0a20  ed...    Args:. 
-00020e40: 2020 2020 2020 2066 696c 656e 616d 653a         filename:
-00020e50: 2066 696c 656e 616d 6520 2862 6566 6f72   filename (befor
-00020e60: 6520 646f 7429 2072 6567 6578 0a20 2020  e dot) regex.   
-00020e70: 2020 2020 2065 7874 656e 7369 6f6e 3a20       extension: 
-00020e80: 6578 7465 6e73 696f 6e20 2861 6674 6572  extension (after
-00020e90: 2064 6f74 2920 7265 6765 780a 2020 2020   dot) regex.    
-00020ea0: 2020 2020 6c61 7374 646f 743a 2077 6869      lastdot: whi
-00020eb0: 6368 2064 6f74 2073 686f 756c 6420 6265  ch dot should be
-00020ec0: 2075 7365 6420 6173 2061 2066 696c 656e   used as a filen
-00020ed0: 616d 6520 2f20 6578 7465 6e73 696f 6e20  ame / extension 
-00020ee0: 7365 7061 7261 746f 723a 0a20 2020 2020  separator:.     
-00020ef0: 2020 2020 2020 2054 7275 6520 6d65 616e         True mean
-00020f00: 7320 6c61 7374 2064 6f74 2c20 6567 2e20  s last dot, eg. 
-00020f10: 6669 6c65 2e70 6e67 202d 3e20 6669 6c65  file.png -> file
-00020f20: 202f 2070 6e67 0a20 2020 2020 2020 2020   / png.         
-00020f30: 2020 2046 616c 7365 206d 6561 6e73 2066     False means f
-00020f40: 6972 7374 2064 6f74 2c20 6567 2e20 6669  irst dot, eg. fi
-00020f50: 6c65 2e74 6172 2e67 7a20 2d3e 2066 696c  le.tar.gz -> fil
-00020f60: 6520 2f20 7461 722e 677a 0a20 2020 2020  e / tar.gz.     
-00020f70: 2020 2063 6173 653a 2030 202d 206b 6565     case: 0 - kee
-00020f80: 7020 7468 6520 6361 7365 2c20 3120 2d20  p the case, 1 - 
-00020f90: 7472 616e 7366 6f72 6d20 7468 6520 7374  transform the st
-00020fa0: 7269 6e67 2069 6e74 6f20 6c6f 7765 7263  ring into lowerc
-00020fb0: 6173 6520 2864 6566 6175 6c74 292c 0a20  ase (default),. 
-00020fc0: 2020 2020 2020 2020 2020 2032 202d 2074             2 - t
-00020fd0: 7261 6e73 666f 726d 2074 6865 2073 7472  ransform the str
-00020fe0: 696e 6720 696e 746f 2075 7070 6572 6361  ing into upperca
-00020ff0: 7365 0a0a 2020 2020 4966 2074 6865 7265  se..    If there
-00021000: 2069 7320 6e6f 2064 6f74 2070 7265 7365   is no dot prese
-00021010: 6e74 2c20 6578 7465 6e73 696f 6e20 6368  nt, extension ch
-00021020: 6563 6b73 2077 696c 6c20 6265 2064 6f6e  ecks will be don
-00021030: 6520 6167 6169 6e73 7420 656d 7074 790a  e against empty.
-00021040: 2020 2020 7374 7269 6e67 2061 6e64 2066      string and f
-00021050: 696c 656e 616d 6520 6368 6563 6b73 2061  ilename checks a
-00021060: 6761 696e 7374 2077 686f 6c65 2076 616c  gainst whole val
-00021070: 7565 2e0a 0a20 2020 2045 7861 6d70 6c65  ue...    Example
-00021080: 733a 0a20 2020 2020 2020 2043 6865 636b  s:.        Check
-00021090: 2069 6620 6669 6c65 2068 6173 2061 2070   if file has a p
-000210a0: 6466 2065 7874 656e 7369 6f6e 2028 6361  df extension (ca
-000210b0: 7365 2069 6e73 656e 7369 7469 7665 293a  se insensitive):
-000210c0: 0a0a 2020 2020 2020 2020 494e 5055 5428  ..        INPUT(
-000210d0: 5f74 7970 653d 2766 696c 6527 2c20 5f6e  _type='file', _n
-000210e0: 616d 653d 276e 616d 6527 2c0a 2020 2020  ame='name',.    
-000210f0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00021100: 6972 6573 3d49 535f 5550 4c4f 4144 5f46  ires=IS_UPLOAD_F
-00021110: 494c 454e 414d 4528 6578 7465 6e73 696f  ILENAME(extensio
-00021120: 6e3d 2770 6466 2729 290a 0a20 2020 2020  n='pdf'))..     
-00021130: 2020 2043 6865 636b 2069 6620 6669 6c65     Check if file
-00021140: 2068 6173 2061 2074 6172 2e67 7a20 6578   has a tar.gz ex
-00021150: 7465 6e73 696f 6e20 616e 6420 6e61 6d65  tension and name
-00021160: 2073 7461 7274 696e 6720 7769 7468 2062   starting with b
-00021170: 6163 6b75 703a 0a0a 2020 2020 2020 2020  ackup:..        
-00021180: 494e 5055 5428 5f74 7970 653d 2766 696c  INPUT(_type='fil
-00021190: 6527 2c20 5f6e 616d 653d 276e 616d 6527  e', _name='name'
-000211a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000211b0: 2020 7265 7175 6972 6573 3d49 535f 5550    requires=IS_UP
-000211c0: 4c4f 4144 5f46 494c 454e 414d 4528 6669  LOAD_FILENAME(fi
-000211d0: 6c65 6e61 6d65 3d27 6261 636b 7570 2e2a  lename='backup.*
-000211e0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
-000211f0: 2020 2065 7874 656e 7369 6f6e 3d27 7461     extension='ta
-00021200: 722e 677a 272c 206c 6173 7464 6f74 3d46  r.gz', lastdot=F
-00021210: 616c 7365 2929 0a0a 2020 2020 2020 2020  alse))..        
-00021220: 4368 6563 6b20 6966 2066 696c 6520 6861  Check if file ha
-00021230: 7320 6e6f 2065 7874 656e 7369 6f6e 2061  s no extension a
-00021240: 6e64 206e 616d 6520 6d61 7463 6869 6e67  nd name matching
-00021250: 2052 4541 444d 450a 2020 2020 2020 2020   README.        
-00021260: 2863 6173 6520 7365 6e73 6974 6976 6529  (case sensitive)
-00021270: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
-00021280: 4e50 5554 285f 7479 7065 3d27 6669 6c65  NPUT(_type='file
-00021290: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
-000212a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000212b0: 2072 6571 7569 7265 733d 4953 5f55 504c   requires=IS_UPL
-000212c0: 4f41 445f 4649 4c45 4e41 4d45 2866 696c  OAD_FILENAME(fil
-000212d0: 656e 616d 653d 275e 5245 4144 4d45 2427  ename='^README$'
-000212e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000212f0: 2020 6578 7465 6e73 696f 6e3d 275e 2427    extension='^$'
-00021300: 2c20 6361 7365 3d30 290a 0a20 2020 2022  , case=0)..    "
-00021310: 2222 0a0a 2020 2020 6465 6620 5f5f 696e  ""..    def __in
-00021320: 6974 5f5f 280a 2020 2020 2020 2020 7365  it__(.        se
-00021330: 6c66 2c0a 2020 2020 2020 2020 6669 6c65  lf,.        file
-00021340: 6e61 6d65 3d4e 6f6e 652c 0a20 2020 2020  name=None,.     
-00021350: 2020 2065 7874 656e 7369 6f6e 3d4e 6f6e     extension=Non
-00021360: 652c 0a20 2020 2020 2020 206c 6173 7464  e,.        lastd
-00021370: 6f74 3d54 7275 652c 0a20 2020 2020 2020  ot=True,.       
-00021380: 2063 6173 653d 312c 0a20 2020 2020 2020   case=1,.       
-00021390: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
-000213a0: 456e 7465 7220 7661 6c69 6420 6669 6c65  Enter valid file
-000213b0: 6e61 6d65 222c 0a20 2020 2029 3a0a 2020  name",.    ):.  
-000213c0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-000213d0: 6e63 6528 6669 6c65 6e61 6d65 2c20 7374  nce(filename, st
-000213e0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-000213f0: 6669 6c65 6e61 6d65 203d 2072 652e 636f  filename = re.co
-00021400: 6d70 696c 6528 6669 6c65 6e61 6d65 290a  mpile(filename).
-00021410: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00021420: 7461 6e63 6528 6578 7465 6e73 696f 6e2c  tance(extension,
-00021430: 2073 7472 293a 0a20 2020 2020 2020 2020   str):.         
-00021440: 2020 2065 7874 656e 7369 6f6e 203d 2072     extension = r
-00021450: 652e 636f 6d70 696c 6528 6578 7465 6e73  e.compile(extens
-00021460: 696f 6e29 0a20 2020 2020 2020 2073 656c  ion).        sel
-00021470: 662e 6669 6c65 6e61 6d65 203d 2066 696c  f.filename = fil
-00021480: 656e 616d 650a 2020 2020 2020 2020 7365  ename.        se
-00021490: 6c66 2e65 7874 656e 7369 6f6e 203d 2065  lf.extension = e
-000214a0: 7874 656e 7369 6f6e 0a20 2020 2020 2020  xtension.       
-000214b0: 2073 656c 662e 6c61 7374 646f 7420 3d20   self.lastdot = 
-000214c0: 6c61 7374 646f 740a 2020 2020 2020 2020  lastdot.        
-000214d0: 7365 6c66 2e63 6173 6520 3d20 6361 7365  self.case = case
-000214e0: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
-000214f0: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
-00021500: 726f 725f 6d65 7373 6167 650a 0a20 2020  ror_message..   
-00021510: 2064 6566 2076 616c 6964 6174 6528 7365   def validate(se
-00021520: 6c66 2c20 7661 6c75 652c 2072 6563 6f72  lf, value, recor
-00021530: 645f 6964 3d4e 6f6e 6529 3a0a 2020 2020  d_id=None):.    
-00021540: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00021550: 2020 2020 2073 7472 696e 6720 3d20 7661       string = va
-00021560: 6c75 652e 6669 6c65 6e61 6d65 0a20 2020  lue.filename.   
-00021570: 2020 2020 2065 7863 6570 743a 0a20 2020       except:.   
-00021580: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00021590: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-000215a0: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
-000215b0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
-000215c0: 6529 290a 2020 2020 2020 2020 6966 2073  e)).        if s
-000215d0: 656c 662e 6361 7365 203d 3d20 313a 0a20  elf.case == 1:. 
-000215e0: 2020 2020 2020 2020 2020 2073 7472 696e             strin
-000215f0: 6720 3d20 7374 7269 6e67 2e6c 6f77 6572  g = string.lower
-00021600: 2829 0a20 2020 2020 2020 2065 6c69 6620  ().        elif 
-00021610: 7365 6c66 2e63 6173 6520 3d3d 2032 3a0a  self.case == 2:.
-00021620: 2020 2020 2020 2020 2020 2020 7374 7269              stri
-00021630: 6e67 203d 2073 7472 696e 672e 7570 7065  ng = string.uppe
-00021640: 7228 290a 2020 2020 2020 2020 6966 2073  r().        if s
-00021650: 656c 662e 6c61 7374 646f 743a 0a20 2020  elf.lastdot:.   
-00021660: 2020 2020 2020 2020 2064 6f74 203d 2073           dot = s
-00021670: 7472 696e 672e 7266 696e 6428 222e 2229  tring.rfind(".")
-00021680: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00021690: 2020 2020 2020 2020 2020 2064 6f74 203d             dot =
-000216a0: 2073 7472 696e 672e 6669 6e64 2822 2e22   string.find("."
-000216b0: 290a 2020 2020 2020 2020 6966 2064 6f74  ).        if dot
-000216c0: 203d 3d20 2d31 3a0a 2020 2020 2020 2020   == -1:.        
-000216d0: 2020 2020 646f 7420 3d20 6c65 6e28 7374      dot = len(st
-000216e0: 7269 6e67 290a 2020 2020 2020 2020 6966  ring).        if
-000216f0: 2073 656c 662e 6669 6c65 6e61 6d65 2061   self.filename a
-00021700: 6e64 206e 6f74 2073 656c 662e 6669 6c65  nd not self.file
-00021710: 6e61 6d65 2e6d 6174 6368 2873 7472 696e  name.match(strin
-00021720: 675b 3a64 6f74 5d29 3a0a 2020 2020 2020  g[:dot]):.      
-00021730: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-00021740: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
-00021750: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
-00021760: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
-00021770: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
-00021780: 6c66 2e65 7874 656e 7369 6f6e 2061 6e64  lf.extension and
-00021790: 206e 6f74 2073 656c 662e 6578 7465 6e73   not self.extens
-000217a0: 696f 6e2e 6d61 7463 6828 7374 7269 6e67  ion.match(string
-000217b0: 5b64 6f74 202b 2031 203a 5d29 3a0a 2020  [dot + 1 :]):.  
-000217c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000217d0: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
-000217e0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
-000217f0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
-00021800: 6765 2929 0a20 2020 2020 2020 2065 6c73  ge)).        els
-00021810: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00021820: 6574 7572 6e20 7661 6c75 650a 0a0a 636c  eturn value...cl
-00021830: 6173 7320 4953 5f49 5056 3428 5661 6c69  ass IS_IPV4(Vali
-00021840: 6461 746f 7229 3a0a 2020 2020 2222 220a  dator):.    """.
-00021850: 2020 2020 4368 6563 6b73 2069 6620 6669      Checks if fi
-00021860: 656c 6427 7320 7661 6c75 6520 6973 2061  eld's value is a
-00021870: 6e20 4950 2076 6572 7369 6f6e 2034 2061  n IP version 4 a
-00021880: 6464 7265 7373 2069 6e20 6465 6369 6d61  ddress in decima
-00021890: 6c20 666f 726d 2e20 4361 6e0a 2020 2020  l form. Can.    
-000218a0: 6265 2073 6574 2074 6f20 666f 7263 6520  be set to force 
-000218b0: 6164 6472 6573 7365 7320 6672 6f6d 2063  addresses from c
-000218c0: 6572 7461 696e 2072 616e 6765 2e0a 0a20  ertain range... 
-000218d0: 2020 2049 5076 3420 7265 6765 7820 7461     IPv4 regex ta
-000218e0: 6b65 6e20 6672 6f6d 3a20 6874 7470 3a2f  ken from: http:/
-000218f0: 2f72 6567 6578 6c69 622e 636f 6d2f 5245  /regexlib.com/RE
-00021900: 4465 7461 696c 732e 6173 7078 3f72 6567  Details.aspx?reg
-00021910: 6578 705f 6964 3d31 3431 310a 0a20 2020  exp_id=1411..   
-00021920: 2041 7267 733a 0a0a 2020 2020 2020 2020   Args:..        
-00021930: 6d69 6e69 703a 206c 6f77 6573 7420 616c  minip: lowest al
-00021940: 6c6f 7765 6420 6164 6472 6573 733b 2061  lowed address; a
-00021950: 6363 6570 7473 3a0a 0a20 2020 2020 2020  ccepts:..       
-00021960: 2020 2020 202d 2073 7472 2c20 6567 2e20       - str, eg. 
-00021970: 3139 322e 3136 382e 302e 310a 2020 2020  192.168.0.1.    
-00021980: 2020 2020 2020 2020 2d20 6c69 7374 206f          - list o
-00021990: 7220 7475 706c 6520 6f66 206f 6374 6574  r tuple of octet
-000219a0: 732c 2065 672e 205b 3139 322c 2031 3638  s, eg. [192, 168
-000219b0: 2c20 302c 2031 5d0a 2020 2020 2020 2020  , 0, 1].        
-000219c0: 6d61 7869 703a 2068 6967 6865 7374 2061  maxip: highest a
-000219d0: 6c6c 6f77 6564 2061 6464 7265 7373 3b20  llowed address; 
-000219e0: 7361 6d65 2061 7320 6162 6f76 650a 2020  same as above.  
-000219f0: 2020 2020 2020 696e 7665 7274 3a20 5472        invert: Tr
-00021a00: 7565 2074 6f20 616c 6c6f 7720 6164 6472  ue to allow addr
-00021a10: 6573 7365 7320 6f6e 6c79 2066 726f 6d20  esses only from 
-00021a20: 6f75 7473 6964 6520 6f66 2067 6976 656e  outside of given
-00021a30: 2072 616e 6765 3b20 6e6f 7465 0a20 2020   range; note.   
-00021a40: 2020 2020 2020 2020 2074 6861 7420 7261           that ra
-00021a50: 6e67 6520 626f 756e 6461 7269 6573 2061  nge boundaries a
-00021a60: 7265 206e 6f74 206d 6174 6368 6564 2074  re not matched t
-00021a70: 6869 7320 7761 790a 2020 2020 2020 2020  his way.        
-00021a80: 6973 5f6c 6f63 616c 686f 7374 3a20 6c6f  is_localhost: lo
-00021a90: 6361 6c68 6f73 7420 6164 6472 6573 7320  calhost address 
-00021aa0: 7472 6561 746d 656e 743a 0a0a 2020 2020  treatment:..    
-00021ab0: 2020 2020 2020 2020 2d20 4e6f 6e65 2028          - None (
-00021ac0: 6465 6661 756c 7429 3a20 696e 6469 6666  default): indiff
-00021ad0: 6572 656e 740a 2020 2020 2020 2020 2020  erent.          
-00021ae0: 2020 2d20 5472 7565 2028 656e 666f 7263    - True (enforc
-00021af0: 6529 3a20 7175 6572 7920 6164 6472 6573  e): query addres
-00021b00: 7320 6d75 7374 206d 6174 6368 206c 6f63  s must match loc
-00021b10: 616c 686f 7374 2061 6464 7265 7373 2028  alhost address (
-00021b20: 3132 372e 302e 302e 3129 0a20 2020 2020  127.0.0.1).     
-00021b30: 2020 2020 2020 202d 2046 616c 7365 2028         - False (
-00021b40: 666f 7262 6964 293a 2071 7565 7279 2061  forbid): query a
-00021b50: 6464 7265 7373 206d 7573 7420 6e6f 7420  ddress must not 
-00021b60: 6d61 7463 6820 6c6f 6361 6c68 6f73 7420  match localhost 
-00021b70: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
-00021b80: 6973 5f70 7269 7661 7465 3a20 7361 6d65  is_private: same
-00021b90: 2061 7320 6162 6f76 652c 2065 7863 6570   as above, excep
-00021ba0: 7420 7468 6174 2071 7565 7279 2061 6464  t that query add
-00021bb0: 7265 7373 2069 7320 6368 6563 6b65 6420  ress is checked 
-00021bc0: 6167 6169 6e73 740a 2020 2020 2020 2020  against.        
-00021bd0: 2020 2020 7477 6f20 6164 6472 6573 7320      two address 
-00021be0: 7261 6e67 6573 3a20 3137 322e 3136 2e30  ranges: 172.16.0
-00021bf0: 2e30 202d 2031 3732 2e33 312e 3235 352e  .0 - 172.31.255.
-00021c00: 3235 3520 616e 640a 2020 2020 2020 2020  255 and.        
-00021c10: 2020 2020 3139 322e 3136 382e 302e 3020      192.168.0.0 
-00021c20: 2d20 3139 322e 3136 382e 3235 352e 3235  - 192.168.255.25
-00021c30: 350a 2020 2020 2020 2020 6973 5f61 7574  5.        is_aut
-00021c40: 6f6d 6174 6963 3a20 7361 6d65 2061 7320  omatic: same as 
-00021c50: 6162 6f76 652c 2065 7863 6570 7420 7468  above, except th
-00021c60: 6174 2071 7565 7279 2061 6464 7265 7373  at query address
-00021c70: 2069 7320 6368 6563 6b65 6420 6167 6169   is checked agai
-00021c80: 6e73 740a 2020 2020 2020 2020 2020 2020  nst.            
-00021c90: 6f6e 6520 6164 6472 6573 7320 7261 6e67  one address rang
-00021ca0: 653a 2031 3639 2e32 3534 2e30 2e30 202d  e: 169.254.0.0 -
-00021cb0: 2031 3639 2e32 3534 2e32 3535 2e32 3535   169.254.255.255
-00021cc0: 0a0a 2020 2020 4d69 6e69 7020 616e 6420  ..    Minip and 
-00021cd0: 6d61 7869 7020 6d61 7920 616c 736f 2062  maxip may also b
-00021ce0: 6520 6c69 7374 7320 6f72 2074 7570 6c65  e lists or tuple
-00021cf0: 7320 6f66 2061 6464 7265 7373 6573 2069  s of addresses i
-00021d00: 6e20 616c 6c20 6162 6f76 650a 2020 2020  n all above.    
-00021d10: 666f 726d 7320 2873 7472 2c20 696e 742c  forms (str, int,
-00021d20: 206c 6973 7420 2f20 7475 706c 6529 2c20   list / tuple), 
-00021d30: 616c 6c6f 7769 6e67 2073 6574 7570 206f  allowing setup o
-00021d40: 6620 6d75 6c74 6970 6c65 2061 6464 7265  f multiple addre
-00021d50: 7373 2072 616e 6765 733a 3a0a 0a20 2020  ss ranges::..   
-00021d60: 2020 2020 206d 696e 6970 203d 2028 6d69       minip = (mi
-00021d70: 6e69 7031 2c20 6d69 6e69 7032 2c20 2e2e  nip1, minip2, ..
-00021d80: 2e20 6d69 6e69 704e 290a 2020 2020 2020  . minipN).      
-00021d90: 2020 2020 2020 2020 2020 2020 207c 2020               |  
-00021da0: 2020 2020 207c 2020 2020 2020 2020 2020       |          
-00021db0: 207c 0a20 2020 2020 2020 2020 2020 2020   |.             
-00021dc0: 2020 2020 2020 7c20 2020 2020 2020 7c20        |       | 
-00021dd0: 2020 2020 2020 2020 2020 7c0a 2020 2020            |.    
-00021de0: 2020 2020 6d61 7869 7020 3d20 286d 6178      maxip = (max
-00021df0: 6970 312c 206d 6178 6970 322c 202e 2e2e  ip1, maxip2, ...
-00021e00: 206d 6178 6970 4e29 0a0a 2020 2020 4c6f   maxipN)..    Lo
-00021e10: 6e67 6572 2069 7465 7261 626c 6520 7769  nger iterable wi
-00021e20: 6c6c 2062 6520 7472 756e 6361 7465 6420  ll be truncated 
-00021e30: 746f 206d 6174 6368 206c 656e 6774 6820  to match length 
-00021e40: 6f66 2073 686f 7274 6572 206f 6e65 2e0a  of shorter one..
-00021e50: 0a20 2020 2045 7861 6d70 6c65 733a 0a20  .    Examples:. 
-00021e60: 2020 2020 2020 2043 6865 636b 2066 6f72         Check for
-00021e70: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
-00021e80: 6573 733a 0a0a 2020 2020 2020 2020 2020  ess:..          
-00021e90: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
-00021ea0: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
-00021eb0: 6527 2c20 7265 7175 6972 6573 3d49 535f  e', requires=IS_
-00021ec0: 4950 5634 2829 290a 0a20 2020 2020 2020  IPV4())..       
-00021ed0: 2043 6865 636b 2066 6f72 2076 616c 6964   Check for valid
-00021ee0: 2049 5076 3420 6164 6472 6573 7320 6265   IPv4 address be
-00021ef0: 6c6f 6e67 696e 6720 746f 2073 7065 6369  longing to speci
-00021f00: 6669 6320 7261 6e67 653a 0a0a 2020 2020  fic range:..    
-00021f10: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
-00021f20: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
-00021f30: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
-00021f40: 2020 2020 2020 2020 2020 7265 7175 6972            requir
-00021f50: 6573 3d49 535f 4950 5634 286d 696e 6970  es=IS_IPV4(minip
-00021f60: 3d27 3130 302e 3230 302e 302e 3027 2c20  ='100.200.0.0', 
-00021f70: 6d61 7869 703d 2731 3030 2e32 3030 2e32  maxip='100.200.2
-00021f80: 3535 2e32 3535 2729 290a 0a20 2020 2020  55.255'))..     
-00021f90: 2020 2043 6865 636b 2066 6f72 2076 616c     Check for val
-00021fa0: 6964 2049 5076 3420 6164 6472 6573 7320  id IPv4 address 
-00021fb0: 6265 6c6f 6e67 696e 6720 746f 2065 6974  belonging to eit
-00021fc0: 6865 7220 3130 302e 3131 302e 302e 3020  her 100.110.0.0 
-00021fd0: 2d0a 2020 2020 2020 2020 3130 302e 3131  -.        100.11
-00021fe0: 302e 3235 352e 3235 3520 6f72 2032 3030  0.255.255 or 200
-00021ff0: 2e35 302e 302e 3020 2d20 3230 302e 3530  .50.0.0 - 200.50
-00022000: 2e30 2e32 3535 2061 6464 7265 7373 2072  .0.255 address r
-00022010: 616e 6765 3a0a 0a20 2020 2020 2020 2020  ange:..         
-00022020: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
-00022030: 7465 7874 272c 205f 6e61 6d65 3d27 6e61  text', _name='na
-00022040: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
-00022050: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
-00022060: 5f49 5056 3428 6d69 6e69 703d 2827 3130  _IPV4(minip=('10
-00022070: 302e 3131 302e 302e 3027 2c20 2732 3030  0.110.0.0', '200
-00022080: 2e35 302e 302e 3027 292c 0a20 2020 2020  .50.0.0'),.     
-00022090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000220a0: 2020 2020 2020 2020 6d61 7869 703d 2827          maxip=('
-000220b0: 3130 302e 3131 302e 3235 352e 3235 3527  100.110.255.255'
-000220c0: 2c20 2732 3030 2e35 302e 302e 3235 3527  , '200.50.0.255'
-000220d0: 2929 290a 0a20 2020 2020 2020 2043 6865  )))..        Che
-000220e0: 636b 2066 6f72 2076 616c 6964 2049 5076  ck for valid IPv
-000220f0: 3420 6164 6472 6573 7320 6265 6c6f 6e67  4 address belong
-00022100: 696e 6720 746f 2070 7269 7661 7465 2061  ing to private a
-00022110: 6464 7265 7373 2073 7061 6365 3a0a 0a20  ddress space:.. 
-00022120: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-00022130: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-00022140: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-00022150: 7569 7265 733d 4953 5f49 5056 3428 6973  uires=IS_IPV4(is
-00022160: 5f70 7269 7661 7465 3d54 7275 6529 290a  _private=True)).
-00022170: 0a20 2020 2020 2020 2043 6865 636b 2066  .        Check f
-00022180: 6f72 2076 616c 6964 2049 5076 3420 6164  or valid IPv4 ad
-00022190: 6472 6573 7320 7468 6174 2069 7320 6e6f  dress that is no
-000221a0: 7420 6120 6c6f 6361 6c68 6f73 7420 6164  t a localhost ad
-000221b0: 6472 6573 733a 0a0a 2020 2020 2020 2020  dress:..        
-000221c0: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
-000221d0: 2774 6578 7427 2c20 5f6e 616d 653d 276e  'text', _name='n
-000221e0: 616d 6527 2c20 7265 7175 6972 6573 3d49  ame', requires=I
-000221f0: 535f 4950 5634 2869 735f 6c6f 6361 6c68  S_IPV4(is_localh
-00022200: 6f73 743d 4661 6c73 6529 290a 0a20 2020  ost=False))..   
-00022210: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00022220: 4950 5634 2829 2827 312e 322e 332e 3427  IPV4()('1.2.3.4'
-00022230: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00022240: 312e 322e 332e 3427 2c20 4e6f 6e65 290a  1.2.3.4', None).
-00022250: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
-00022260: 4953 5f49 5056 3428 2928 2732 3535 2e32  IS_IPV4()('255.2
-00022270: 3535 2e32 3535 2e32 3535 2729 0a20 2020  55.255.255').   
-00022280: 2020 2020 2020 2020 2028 2732 3535 2e32           ('255.2
-00022290: 3535 2e32 3535 2e32 3535 272c 204e 6f6e  55.255.255', Non
-000222a0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-000222b0: 3e3e 2049 535f 4950 5634 2829 2827 312e  >> IS_IPV4()('1.
-000222c0: 322e 332e 3420 2729 0a20 2020 2020 2020  2.3.4 ').       
-000222d0: 2020 2020 2028 2731 2e32 2e33 2e34 2027       ('1.2.3.4 '
-000222e0: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
-000222f0: 5076 3420 6164 6472 6573 7327 290a 2020  Pv4 address').  
-00022300: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00022310: 5f49 5056 3428 2928 2731 2e32 2e33 2e34  _IPV4()('1.2.3.4
-00022320: 2e35 2729 0a20 2020 2020 2020 2020 2020  .5').           
-00022330: 2028 2731 2e32 2e33 2e34 2e35 272c 2027   ('1.2.3.4.5', '
-00022340: 656e 7465 7220 7661 6c69 6420 4950 7634  enter valid IPv4
-00022350: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00022360: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00022370: 5634 2829 2827 3132 332e 3132 3327 290a  V4()('123.123').
-00022380: 2020 2020 2020 2020 2020 2020 2827 3132              ('12
-00022390: 332e 3132 3327 2c20 2765 6e74 6572 2076  3.123', 'enter v
-000223a0: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
-000223b0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-000223c0: 3e3e 3e20 4953 5f49 5056 3428 2928 2731  >>> IS_IPV4()('1
-000223d0: 3131 312e 322e 332e 3427 290a 2020 2020  111.2.3.4').    
-000223e0: 2020 2020 2020 2020 2827 3131 3131 2e32          ('1111.2
-000223f0: 2e33 2e34 272c 2027 656e 7465 7220 7661  .3.4', 'enter va
-00022400: 6c69 6420 4950 7634 2061 6464 7265 7373  lid IPv4 address
-00022410: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
-00022420: 3e3e 2049 535f 4950 5634 2829 2827 3031  >> IS_IPV4()('01
-00022430: 3131 2e32 2e33 2e34 2729 0a20 2020 2020  11.2.3.4').     
-00022440: 2020 2020 2020 2028 2730 3131 312e 322e         ('0111.2.
-00022450: 332e 3427 2c20 2765 6e74 6572 2076 616c  3.4', 'enter val
-00022460: 6964 2049 5076 3420 6164 6472 6573 7327  id IPv4 address'
-00022470: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00022480: 3e20 4953 5f49 5056 3428 2928 2732 3536  > IS_IPV4()('256
-00022490: 2e32 2e33 2e34 2729 0a20 2020 2020 2020  .2.3.4').       
-000224a0: 2020 2020 2028 2732 3536 2e32 2e33 2e34       ('256.2.3.4
-000224b0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-000224c0: 4950 7634 2061 6464 7265 7373 2729 0a20  IPv4 address'). 
-000224d0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-000224e0: 535f 4950 5634 2829 2827 3330 302e 322e  S_IPV4()('300.2.
-000224f0: 332e 3427 290a 2020 2020 2020 2020 2020  3.4').          
-00022500: 2020 2827 3330 302e 322e 332e 3427 2c20    ('300.2.3.4', 
-00022510: 2765 6e74 6572 2076 616c 6964 2049 5076  'enter valid IPv
-00022520: 3420 6164 6472 6573 7327 290a 2020 2020  4 address').    
-00022530: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00022540: 5056 3428 6d69 6e69 703d 2731 2e32 2e33  PV4(minip='1.2.3
-00022550: 2e34 272c 206d 6178 6970 3d27 312e 322e  .4', maxip='1.2.
-00022560: 332e 3427 2928 2731 2e32 2e33 2e34 2729  3.4')('1.2.3.4')
-00022570: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
-00022580: 2e32 2e33 2e34 272c 204e 6f6e 6529 0a20  .2.3.4', None). 
-00022590: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-000225a0: 535f 4950 5634 286d 696e 6970 3d27 312e  S_IPV4(minip='1.
-000225b0: 322e 332e 3527 2c20 6d61 7869 703d 2731  2.3.5', maxip='1
-000225c0: 2e32 2e33 2e39 272c 2065 7272 6f72 5f6d  .2.3.9', error_m
-000225d0: 6573 7361 6765 3d27 4261 6420 6970 2729  essage='Bad ip')
-000225e0: 2827 312e 322e 332e 3427 290a 2020 2020  ('1.2.3.4').    
-000225f0: 2020 2020 2020 2020 2827 312e 322e 332e          ('1.2.3.
-00022600: 3427 2c20 2762 6164 2069 7027 290a 2020  4', 'bad ip').  
-00022610: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00022620: 5f49 5056 3428 6d61 7869 703d 2731 2e32  _IPV4(maxip='1.2
-00022630: 2e33 2e34 272c 2069 6e76 6572 743d 5472  .3.4', invert=Tr
-00022640: 7565 2928 2731 3237 2e30 2e30 2e31 2729  ue)('127.0.0.1')
-00022650: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
-00022660: 3237 2e30 2e30 2e31 272c 204e 6f6e 6529  27.0.0.1', None)
-00022670: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00022680: 2049 535f 4950 5634 286d 6178 6970 3d27   IS_IPV4(maxip='
-00022690: 312e 322e 332e 3427 2c20 696e 7665 7274  1.2.3.4', invert
-000226a0: 3d54 7275 6529 2827 312e 322e 332e 3427  =True)('1.2.3.4'
-000226b0: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-000226c0: 312e 322e 332e 3427 2c20 2765 6e74 6572  1.2.3.4', 'enter
-000226d0: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
-000226e0: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
-000226f0: 2020 3e3e 3e20 4953 5f49 5056 3428 6973    >>> IS_IPV4(is
-00022700: 5f6c 6f63 616c 686f 7374 3d54 7275 6529  _localhost=True)
-00022710: 2827 3132 372e 302e 302e 3127 290a 2020  ('127.0.0.1').  
-00022720: 2020 2020 2020 2020 2020 2827 3132 372e            ('127.
-00022730: 302e 302e 3127 2c20 4e6f 6e65 290a 2020  0.0.1', None).  
-00022740: 2020 2020 2020 2020 2020 3e3e 3e20 4953            >>> IS
-00022750: 5f49 5056 3428 6973 5f6c 6f63 616c 686f  _IPV4(is_localho
-00022760: 7374 3d54 7275 6529 2827 312e 322e 332e  st=True)('1.2.3.
-00022770: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
-00022780: 2827 312e 322e 332e 3427 2c20 2765 6e74  ('1.2.3.4', 'ent
-00022790: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
-000227a0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-000227b0: 2020 2020 3e3e 3e20 4953 5f49 5056 3428      >>> IS_IPV4(
-000227c0: 6973 5f6c 6f63 616c 686f 7374 3d46 616c  is_localhost=Fal
-000227d0: 7365 2928 2731 3237 2e30 2e30 2e31 2729  se)('127.0.0.1')
-000227e0: 0a20 2020 2020 2020 2020 2020 2028 2731  .            ('1
-000227f0: 3237 2e30 2e30 2e31 272c 2027 656e 7465  27.0.0.1', 'ente
-00022800: 7220 7661 6c69 6420 4950 7634 2061 6464  r valid IPv4 add
-00022810: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
-00022820: 2020 203e 3e3e 2049 535f 4950 5634 286d     >>> IS_IPV4(m
-00022830: 6178 6970 3d27 3130 302e 302e 302e 3027  axip='100.0.0.0'
-00022840: 2c20 6973 5f6c 6f63 616c 686f 7374 3d54  , is_localhost=T
-00022850: 7275 6529 2827 3132 372e 302e 302e 3127  rue)('127.0.0.1'
-00022860: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00022870: 3132 372e 302e 302e 3127 2c20 2765 6e74  127.0.0.1', 'ent
-00022880: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
-00022890: 6472 6573 7327 290a 0a20 2020 2022 2222  dress')..    """
-000228a0: 0a0a 2020 2020 5245 4745 585f 4950 5634  ..    REGEX_IPV4
-000228b0: 203d 2072 652e 636f 6d70 696c 6528 0a20   = re.compile(. 
-000228c0: 2020 2020 2020 2072 225e 2828 5b31 2d39         r"^(([1-9
-000228d0: 5d3f 5c64 7c31 5c64 5c64 7c32 5b30 2d34  ]?\d|1\d\d|2[0-4
-000228e0: 5d5c 647c 3235 5b30 2d35 5d29 5c2e 297b  ]\d|25[0-5])\.){
-000228f0: 337d 285b 312d 395d 3f5c 647c 315c 645c  3}([1-9]?\d|1\d\
-00022900: 647c 325b 302d 345d 5c64 7c32 355b 302d  d|2[0-4]\d|25[0-
-00022910: 355d 2924 220a 2020 2020 290a 2020 2020  5])$".    ).    
-00022920: 6e75 6d62 6572 7320 3d20 2831 3637 3737  numbers = (16777
-00022930: 3231 362c 2036 3535 3336 2c20 3235 362c  216, 65536, 256,
-00022940: 2031 290a 2020 2020 6c6f 6361 6c68 6f73   1).    localhos
-00022950: 7420 3d20 3231 3330 3730 3634 3333 0a20  t = 2130706433. 
-00022960: 2020 2070 7269 7661 7465 203d 2028 2832     private = ((2
-00022970: 3838 3637 3239 3732 382c 2032 3838 3637  886729728, 28867
-00022980: 3935 3236 3329 2c20 2833 3233 3232 3335  95263), (3232235
-00022990: 3532 302c 2033 3233 3233 3031 3035 3529  520, 3232301055)
-000229a0: 290a 2020 2020 6175 746f 6d61 7469 6320  ).    automatic 
-000229b0: 3d20 2832 3835 3139 3935 3634 382c 2032  = (2851995648, 2
-000229c0: 3835 3230 3631 3138 3329 0a0a 2020 2020  852061183)..    
-000229d0: 6465 6620 5f5f 696e 6974 5f5f 280a 2020  def __init__(.  
-000229e0: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-000229f0: 2020 2020 6d69 6e69 703d 2230 2e30 2e30      minip="0.0.0
-00022a00: 2e30 222c 0a20 2020 2020 2020 206d 6178  .0",.        max
-00022a10: 6970 3d22 3235 352e 3235 352e 3235 352e  ip="255.255.255.
-00022a20: 3235 3522 2c0a 2020 2020 2020 2020 696e  255",.        in
-00022a30: 7665 7274 3d46 616c 7365 2c0a 2020 2020  vert=False,.    
-00022a40: 2020 2020 6973 5f6c 6f63 616c 686f 7374      is_localhost
-00022a50: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
-00022a60: 735f 7072 6976 6174 653d 4e6f 6e65 2c0a  s_private=None,.
-00022a70: 2020 2020 2020 2020 6973 5f61 7574 6f6d          is_autom
-00022a80: 6174 6963 3d4e 6f6e 652c 0a20 2020 2020  atic=None,.     
-00022a90: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
-00022aa0: 3d22 456e 7465 7220 7661 6c69 6420 4950  ="Enter valid IP
-00022ab0: 7634 2061 6464 7265 7373 222c 0a20 2020  v4 address",.   
-00022ac0: 2029 3a0a 2020 2020 2020 2020 666f 7220   ):.        for 
-00022ad0: 6e2c 2076 616c 7565 2069 6e20 656e 756d  n, value in enum
-00022ae0: 6572 6174 6528 286d 696e 6970 2c20 6d61  erate((minip, ma
-00022af0: 7869 7029 293a 0a20 2020 2020 2020 2020  xip)):.         
-00022b00: 2020 2074 656d 7020 3d20 5b5d 0a20 2020     temp = [].   
-00022b10: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
-00022b20: 7374 616e 6365 2876 616c 7565 2c20 7374  stance(value, st
-00022b30: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00022b40: 2020 2020 7465 6d70 2e61 7070 656e 6428      temp.append(
-00022b50: 7661 6c75 652e 7370 6c69 7428 222e 2229  value.split(".")
-00022b60: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
-00022b70: 6966 2069 7369 6e73 7461 6e63 6528 7661  if isinstance(va
-00022b80: 6c75 652c 2028 6c69 7374 2c20 7475 706c  lue, (list, tupl
-00022b90: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
-00022ba0: 2020 2020 2069 6620 280a 2020 2020 2020       if (.      
-00022bb0: 2020 2020 2020 2020 2020 2020 2020 6c65                le
-00022bc0: 6e28 7661 6c75 6529 0a20 2020 2020 2020  n(value).       
-00022bd0: 2020 2020 2020 2020 2020 2020 203d 3d20               == 
-00022be0: 6c65 6e28 5b69 7465 6d20 666f 7220 6974  len([item for it
-00022bf0: 656d 2069 6e20 7661 6c75 6520 6966 2069  em in value if i
-00022c00: 7369 6e73 7461 6e63 6528 6974 656d 2c20  sinstance(item, 
-00022c10: 696e 7429 5d29 0a20 2020 2020 2020 2020  int)]).         
-00022c20: 2020 2020 2020 2020 2020 203d 3d20 340a             == 4.
-00022c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022c40: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00022c50: 2020 2020 2020 2074 656d 702e 6170 7065         temp.appe
-00022c60: 6e64 2876 616c 7565 290a 2020 2020 2020  nd(value).      
-00022c70: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00022c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022c90: 2020 2020 666f 7220 6974 656d 2069 6e20      for item in 
-00022ca0: 7661 6c75 653a 0a20 2020 2020 2020 2020  value:.         
-00022cb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00022cc0: 6620 6973 696e 7374 616e 6365 2869 7465  f isinstance(ite
-00022cd0: 6d2c 2073 7472 293a 0a20 2020 2020 2020  m, str):.       
-00022ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022cf0: 2020 2020 2074 656d 702e 6170 7065 6e64       temp.append
-00022d00: 2869 7465 6d2e 7370 6c69 7428 222e 2229  (item.split(".")
-00022d10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00022d20: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-00022d30: 7369 6e73 7461 6e63 6528 6974 656d 2c20  sinstance(item, 
-00022d40: 286c 6973 742c 2074 7570 6c65 2929 3a0a  (list, tuple)):.
-00022d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022d60: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-00022d70: 2e61 7070 656e 6428 6974 656d 290a 2020  .append(item).  
-00022d80: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
-00022d90: 7320 3d20 5b5d 0a20 2020 2020 2020 2020  s = [].         
-00022da0: 2020 2066 6f72 2069 7465 6d20 696e 2074     for item in t
-00022db0: 656d 703a 0a20 2020 2020 2020 2020 2020  emp:.           
-00022dc0: 2020 2020 206e 756d 6265 7220 3d20 300a       number = 0.
-00022dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022de0: 666f 7220 692c 206a 2069 6e20 7a69 7028  for i, j in zip(
-00022df0: 7365 6c66 2e6e 756d 6265 7273 2c20 6974  self.numbers, it
-00022e00: 656d 293a 0a20 2020 2020 2020 2020 2020  em):.           
-00022e10: 2020 2020 2020 2020 206e 756d 6265 7220           number 
-00022e20: 2b3d 2069 202a 2069 6e74 286a 290a 2020  += i * int(j).  
-00022e30: 2020 2020 2020 2020 2020 2020 2020 6e75                nu
-00022e40: 6d62 6572 732e 6170 7065 6e64 286e 756d  mbers.append(num
-00022e50: 6265 7229 0a20 2020 2020 2020 2020 2020  ber).           
-00022e60: 2069 6620 6e20 3d3d 2030 3a0a 2020 2020   if n == 0:.    
-00022e70: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00022e80: 2e6d 696e 6970 203d 206e 756d 6265 7273  .minip = numbers
-00022e90: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-00022ea0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00022eb0: 2020 2073 656c 662e 6d61 7869 7020 3d20     self.maxip = 
-00022ec0: 6e75 6d62 6572 730a 2020 2020 2020 2020  numbers.        
-00022ed0: 7365 6c66 2e69 6e76 6572 7420 3d20 696e  self.invert = in
-00022ee0: 7665 7274 0a20 2020 2020 2020 2073 656c  vert.        sel
-00022ef0: 662e 6973 5f6c 6f63 616c 686f 7374 203d  f.is_localhost =
-00022f00: 2069 735f 6c6f 6361 6c68 6f73 740a 2020   is_localhost.  
-00022f10: 2020 2020 2020 7365 6c66 2e69 735f 7072        self.is_pr
-00022f20: 6976 6174 6520 3d20 6973 5f70 7269 7661  ivate = is_priva
-00022f30: 7465 0a20 2020 2020 2020 2073 656c 662e  te.        self.
-00022f40: 6973 5f61 7574 6f6d 6174 6963 203d 2069  is_automatic = i
-00022f50: 735f 6175 746f 6d61 7469 630a 2020 2020  s_automatic.    
-00022f60: 2020 2020 7365 6c66 2e65 7272 6f72 5f6d      self.error_m
-00022f70: 6573 7361 6765 203d 2065 7272 6f72 5f6d  essage = error_m
-00022f80: 6573 7361 6765 0a0a 2020 2020 6465 6620  essage..    def 
-00022f90: 7661 6c69 6461 7465 2873 656c 662c 2076  validate(self, v
-00022fa0: 616c 7565 2c20 7265 636f 7264 5f69 643d  alue, record_id=
-00022fb0: 4e6f 6e65 293a 0a20 2020 2020 2020 2069  None):.        i
-00022fc0: 6620 7265 2e6d 6174 6368 2873 656c 662e  f re.match(self.
-00022fd0: 5245 4745 585f 4950 5634 2c20 7661 6c75  REGEX_IPV4, valu
-00022fe0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-00022ff0: 6e75 6d62 6572 203d 2030 0a20 2020 2020  number = 0.     
-00023000: 2020 2020 2020 2066 6f72 2069 2c20 6a20         for i, j 
-00023010: 696e 207a 6970 2873 656c 662e 6e75 6d62  in zip(self.numb
-00023020: 6572 732c 2076 616c 7565 2e73 706c 6974  ers, value.split
-00023030: 2822 2e22 2929 3a0a 2020 2020 2020 2020  (".")):.        
-00023040: 2020 2020 2020 2020 6e75 6d62 6572 202b          number +
-00023050: 3d20 6920 2a20 696e 7428 6a29 0a20 2020  = i * int(j).   
-00023060: 2020 2020 2020 2020 206f 6b20 3d20 4661           ok = Fa
-00023070: 6c73 650a 0a20 2020 2020 2020 2020 2020  lse..           
-00023080: 2066 6f72 2062 6f74 746f 6d2c 2074 6f70   for bottom, top
-00023090: 2069 6e20 7a69 7028 7365 6c66 2e6d 696e   in zip(self.min
-000230a0: 6970 2c20 7365 6c66 2e6d 6178 6970 293a  ip, self.maxip):
-000230b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000230c0: 2069 6620 7365 6c66 2e69 6e76 6572 7420   if self.invert 
-000230d0: 213d 2028 626f 7474 6f6d 203c 3d20 6e75  != (bottom <= nu
-000230e0: 6d62 6572 203c 3d20 746f 7029 3a0a 2020  mber <= top):.  
-000230f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023100: 2020 6f6b 203d 2054 7275 650a 0a20 2020    ok = True..   
-00023110: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
-00023120: 2020 2020 2020 2020 2020 2020 2020 6f6b                ok
-00023130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023140: 2061 6e64 2073 656c 662e 6973 5f6c 6f63   and self.is_loc
-00023150: 616c 686f 7374 2069 7320 6e6f 7420 4e6f  alhost is not No
-00023160: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
-00023170: 2020 2061 6e64 2073 656c 662e 6973 5f6c     and self.is_l
-00023180: 6f63 616c 686f 7374 2021 3d20 286e 756d  ocalhost != (num
-00023190: 6265 7220 3d3d 2073 656c 662e 6c6f 6361  ber == self.loca
-000231a0: 6c68 6f73 7429 0a20 2020 2020 2020 2020  lhost).         
-000231b0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-000231c0: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
-000231d0: 0a0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-000231e0: 6976 6174 6520 3d20 616e 7928 0a20 2020  ivate = any(.   
-000231f0: 2020 2020 2020 2020 2020 2020 205b 0a20               [. 
-00023200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023210: 2020 2070 7269 7661 7465 5f6e 756d 6265     private_numbe
-00023220: 725b 305d 203c 3d20 6e75 6d62 6572 203c  r[0] <= number <
-00023230: 3d20 7072 6976 6174 655f 6e75 6d62 6572  = private_number
-00023240: 5b31 5d0a 2020 2020 2020 2020 2020 2020  [1].            
-00023250: 2020 2020 2020 2020 666f 7220 7072 6976          for priv
-00023260: 6174 655f 6e75 6d62 6572 2069 6e20 7365  ate_number in se
-00023270: 6c66 2e70 7269 7661 7465 0a20 2020 2020  lf.private.     
-00023280: 2020 2020 2020 2020 2020 205d 0a20 2020             ].   
-00023290: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000232a0: 2020 2020 2020 2069 6620 6f6b 2061 6e64         if ok and
-000232b0: 2073 656c 662e 6973 5f70 7269 7661 7465   self.is_private
-000232c0: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-000232d0: 2073 656c 662e 6973 5f70 7269 7661 7465   self.is_private
-000232e0: 2021 3d20 7072 6976 6174 653a 0a20 2020   != private:.   
-000232f0: 2020 2020 2020 2020 2020 2020 206f 6b20               ok 
-00023300: 3d20 4661 6c73 650a 0a20 2020 2020 2020  = False..       
-00023310: 2020 2020 2061 7574 6f6d 6174 6963 203d       automatic =
-00023320: 2073 656c 662e 6175 746f 6d61 7469 635b   self.automatic[
-00023330: 305d 203c 3d20 6e75 6d62 6572 203c 3d20  0] <= number <= 
-00023340: 7365 6c66 2e61 7574 6f6d 6174 6963 5b31  self.automatic[1
-00023350: 5d0a 2020 2020 2020 2020 2020 2020 6966  ].            if
-00023360: 206f 6b20 616e 6420 7365 6c66 2e69 735f   ok and self.is_
-00023370: 6175 746f 6d61 7469 6320 6973 206e 6f74  automatic is not
-00023380: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
-00023390: 735f 6175 746f 6d61 7469 6320 213d 2061  s_automatic != a
-000233a0: 7574 6f6d 6174 6963 3a0a 2020 2020 2020  utomatic:.      
-000233b0: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
-000233c0: 616c 7365 0a0a 2020 2020 2020 2020 2020  alse..          
-000233d0: 2020 6966 206f 6b3a 0a20 2020 2020 2020    if ok:.       
-000233e0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-000233f0: 7661 6c75 650a 0a20 2020 2020 2020 2072  value..        r
-00023400: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00023410: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-00023420: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00023430: 6d65 7373 6167 6529 290a 0a0a 636c 6173  message))...clas
-00023440: 7320 4953 5f49 5056 3628 5661 6c69 6461  s IS_IPV6(Valida
-00023450: 746f 7229 3a0a 2020 2020 2222 220a 2020  tor):.    """.  
-00023460: 2020 4368 6563 6b73 2069 6620 6669 656c    Checks if fiel
-00023470: 6427 7320 7661 6c75 6520 6973 2061 6e20  d's value is an 
-00023480: 4950 2076 6572 7369 6f6e 2036 2061 6464  IP version 6 add
-00023490: 7265 7373 2e0a 0a20 2020 2055 7365 7320  ress...    Uses 
-000234a0: 7468 6520 6970 6164 6472 6573 7320 6672  the ipaddress fr
-000234b0: 6f6d 2074 6865 2050 7974 686f 6e20 3320  om the Python 3 
-000234c0: 7374 616e 6461 7264 206c 6962 7261 7279  standard library
-000234d0: 0a20 2020 2061 6e64 2069 7473 2050 7974  .    and its Pyt
-000234e0: 686f 6e20 3220 6261 636b 706f 7274 2028  hon 2 backport (
-000234f0: 696e 2063 6f6e 7472 6962 2f69 7061 6464  in contrib/ipadd
-00023500: 7265 7373 2e70 7929 2e0a 0a20 2020 2041  ress.py)...    A
-00023510: 7267 733a 0a20 2020 2020 2020 2069 735f  rgs:.        is_
-00023520: 7072 6976 6174 653a 204e 6f6e 6520 2864  private: None (d
-00023530: 6566 6175 6c74 293a 2069 6e64 6966 6665  efault): indiffe
-00023540: 7265 6e74 0a20 2020 2020 2020 2020 2020  rent.           
-00023550: 2020 2020 2020 2020 2054 7275 6520 2865           True (e
-00023560: 6e66 6f72 6365 293a 2061 6464 7265 7373  nforce): address
-00023570: 206d 7573 7420 6265 2069 6e20 6663 3030   must be in fc00
-00023580: 3a3a 2f37 2072 616e 6765 0a20 2020 2020  ::/7 range.     
-00023590: 2020 2020 2020 2020 2020 2020 2020 2046                 F
-000235a0: 616c 7365 2028 666f 7262 6964 293a 2061  alse (forbid): a
-000235b0: 6464 7265 7373 206d 7573 7420 4e4f 5420  ddress must NOT 
-000235c0: 6265 2069 6e20 6663 3030 3a3a 2f37 2072  be in fc00::/7 r
-000235d0: 616e 6765 0a20 2020 2020 2020 2069 735f  ange.        is_
-000235e0: 6c69 6e6b 5f6c 6f63 616c 3a20 5361 6d65  link_local: Same
-000235f0: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
-00023600: 6573 2066 6538 303a 3a2f 3130 2072 616e  es fe80::/10 ran
-00023610: 6765 0a20 2020 2020 2020 2069 735f 7265  ge.        is_re
-00023620: 7365 7276 6564 3a20 5361 6d65 2061 7320  served: Same as 
-00023630: 6162 6f76 6520 6275 7420 7573 6573 2049  above but uses I
-00023640: 4554 4620 7265 7365 7276 6564 2072 616e  ETF reserved ran
-00023650: 6765 0a20 2020 2020 2020 2069 735f 6d75  ge.        is_mu
-00023660: 6c74 6963 6173 743a 2053 616d 6520 6173  lticast: Same as
-00023670: 2061 626f 7665 2062 7574 2075 7365 7320   above but uses 
-00023680: 6666 3030 3a3a 2f38 2072 616e 6765 0a20  ff00::/8 range. 
-00023690: 2020 2020 2020 2069 735f 726f 7574 6561         is_routea
-000236a0: 626c 653a 2053 696d 696c 6172 2074 6f20  ble: Similar to 
-000236b0: 6162 6f76 6520 6275 7420 656e 666f 7263  above but enforc
-000236c0: 6573 206e 6f74 2070 7269 7661 7465 2c20  es not private, 
-000236d0: 6c69 6e6b 5f6c 6f63 616c 2c0a 2020 2020  link_local,.    
-000236e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000236f0: 2020 7265 7365 7276 6564 206f 7220 6d75    reserved or mu
-00023700: 6c74 6963 6173 740a 2020 2020 2020 2020  lticast.        
-00023710: 6973 5f36 746f 343a 2053 616d 6520 6173  is_6to4: Same as
-00023720: 2061 626f 7665 2062 7574 2075 7365 7320   above but uses 
-00023730: 3230 3032 3a3a 2f31 3620 7261 6e67 650a  2002::/16 range.
-00023740: 2020 2020 2020 2020 6973 5f74 6572 6564          is_tered
-00023750: 6f3a 2053 616d 6520 6173 2061 626f 7665  o: Same as above
-00023760: 2062 7574 2075 7365 7320 3230 3031 3a3a   but uses 2001::
-00023770: 2f33 3220 7261 6e67 650a 2020 2020 2020  /32 range.      
-00023780: 2020 7375 626e 6574 733a 2076 616c 7565    subnets: value
-00023790: 206d 7573 7420 6265 2061 206d 656d 6265   must be a membe
-000237a0: 7220 6f66 2061 7420 6c65 6173 7420 6f6e  r of at least on
-000237b0: 6520 6672 6f6d 206c 6973 7420 6f66 2073  e from list of s
-000237c0: 7562 6e65 7473 0a0a 2020 2020 4578 616d  ubnets..    Exam
-000237d0: 706c 6573 3a0a 2020 2020 2020 2020 4368  ples:.        Ch
-000237e0: 6563 6b20 666f 7220 7661 6c69 6420 4950  eck for valid IP
-000237f0: 7636 2061 6464 7265 7373 3a0a 0a20 2020  v6 address:..   
-00023800: 2020 2020 2020 2020 2049 4e50 5554 285f           INPUT(_
-00023810: 7479 7065 3d27 7465 7874 272c 205f 6e61  type='text', _na
-00023820: 6d65 3d27 6e61 6d65 272c 2072 6571 7569  me='name', requi
-00023830: 7265 733d 4953 5f49 5056 3628 2929 0a0a  res=IS_IPV6())..
-00023840: 2020 2020 2020 2020 4368 6563 6b20 666f          Check fo
-00023850: 7220 7661 6c69 6420 4950 7636 2061 6464  r valid IPv6 add
-00023860: 7265 7373 2069 7320 6120 6c69 6e6b 5f6c  ress is a link_l
-00023870: 6f63 616c 2061 6464 7265 7373 3a0a 0a20  ocal address:.. 
-00023880: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
-00023890: 285f 7479 7065 3d27 7465 7874 272c 205f  (_type='text', _
-000238a0: 6e61 6d65 3d27 6e61 6d65 272c 2072 6571  name='name', req
-000238b0: 7569 7265 733d 4953 5f49 5056 3628 6973  uires=IS_IPV6(is
-000238c0: 5f6c 696e 6b5f 6c6f 6361 6c3d 5472 7565  _link_local=True
-000238d0: 2929 0a0a 2020 2020 2020 2020 4368 6563  ))..        Chec
-000238e0: 6b20 666f 7220 7661 6c69 6420 4950 7636  k for valid IPv6
-000238f0: 2061 6464 7265 7373 2074 6861 7420 6973   address that is
-00023900: 2049 6e74 6572 6e65 7420 726f 7574 6561   Internet routea
-00023910: 626c 653a 0a0a 2020 2020 2020 2020 2020  ble:..          
-00023920: 2020 494e 5055 5428 5f74 7970 653d 2774    INPUT(_type='t
-00023930: 6578 7427 2c20 5f6e 616d 653d 276e 616d  ext', _name='nam
-00023940: 6527 2c20 7265 7175 6972 6573 3d49 535f  e', requires=IS_
-00023950: 4950 5636 2869 735f 726f 7574 6561 626c  IPV6(is_routeabl
-00023960: 653d 5472 7565 2929 0a0a 2020 2020 2020  e=True))..      
-00023970: 2020 4368 6563 6b20 666f 7220 7661 6c69    Check for vali
-00023980: 6420 4950 7636 2061 6464 7265 7373 2069  d IPv6 address i
-00023990: 6e20 7370 6563 6966 6965 6420 7375 626e  n specified subn
-000239a0: 6574 3a0a 0a20 2020 2020 2020 2020 2020  et:..           
-000239b0: 2049 4e50 5554 285f 7479 7065 3d27 7465   INPUT(_type='te
-000239c0: 7874 272c 205f 6e61 6d65 3d27 6e61 6d65  xt', _name='name
-000239d0: 272c 2072 6571 7569 7265 733d 4953 5f49  ', requires=IS_I
-000239e0: 5056 3628 7375 626e 6574 733d 5b27 3230  PV6(subnets=['20
-000239f0: 3031 3a3a 2f33 3227 5d29 0a0a 2020 2020  01::/32'])..    
-00023a00: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00023a10: 5056 3628 2928 2766 6538 303a 3a31 3236  PV6()('fe80::126
-00023a20: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00023a30: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00023a40: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
-00023a50: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
-00023a60: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
-00023a70: 3e3e 2049 535f 4950 5636 2829 2827 3139  >> IS_IPV6()('19
-00023a80: 322e 3136 382e 312e 3127 290a 2020 2020  2.168.1.1').    
-00023a90: 2020 2020 2020 2020 2827 3139 322e 3136          ('192.16
-00023aa0: 382e 312e 3127 2c20 2765 6e74 6572 2076  8.1.1', 'enter v
-00023ab0: 616c 6964 2049 5076 3620 6164 6472 6573  alid IPv6 addres
-00023ac0: 7327 290a 2020 2020 2020 2020 2020 2020  s').            
-00023ad0: 3e3e 3e20 4953 5f49 5056 3628 6572 726f  >>> IS_IPV6(erro
-00023ae0: 725f 6d65 7373 6167 653d 2742 6164 2069  r_message='Bad i
-00023af0: 7027 2928 2731 3932 2e31 3638 2e31 2e31  p')('192.168.1.1
-00023b00: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
-00023b10: 2731 3932 2e31 3638 2e31 2e31 272c 2027  '192.168.1.1', '
-00023b20: 6261 6420 6970 2729 0a20 2020 2020 2020  bad ip').       
-00023b30: 2020 2020 203e 3e3e 2049 535f 4950 5636       >>> IS_IPV6
-00023b40: 2869 735f 6c69 6e6b 5f6c 6f63 616c 3d54  (is_link_local=T
-00023b50: 7275 6529 2827 6665 3830 3a3a 3132 3663  rue)('fe80::126c
-00023b60: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00023b70: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00023b80: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
-00023b90: 6665 3232 3a62 3361 6627 2c20 4e6f 6e65  fe22:b3af', None
-00023ba0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00023bb0: 3e20 4953 5f49 5056 3628 6973 5f6c 696e  > IS_IPV6(is_lin
-00023bc0: 6b5f 6c6f 6361 6c3d 4661 6c73 6529 2827  k_local=False)('
-00023bd0: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
-00023be0: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
-00023bf0: 2020 2020 2020 2020 2827 6665 3830 3a3a          ('fe80::
-00023c00: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
-00023c10: 3361 6627 2c20 2765 6e74 6572 2076 616c  3af', 'enter val
-00023c20: 6964 2049 5076 3620 6164 6472 6573 7327  id IPv6 address'
-00023c30: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00023c40: 3e20 4953 5f49 5056 3628 6973 5f6c 696e  > IS_IPV6(is_lin
-00023c50: 6b5f 6c6f 6361 6c3d 5472 7565 2928 2732  k_local=True)('2
-00023c60: 3030 313a 3a31 3236 633a 3866 6661 3a66  001::126c:8ffa:f
-00023c70: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
-00023c80: 2020 2020 2020 2028 2732 3030 313a 3a31         ('2001::1
-00023c90: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00023ca0: 6166 272c 2027 656e 7465 7220 7661 6c69  af', 'enter vali
-00023cb0: 6420 4950 7636 2061 6464 7265 7373 2729  d IPv6 address')
-00023cc0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
-00023cd0: 2049 535f 4950 5636 2869 735f 6d75 6c74   IS_IPV6(is_mult
-00023ce0: 6963 6173 743d 5472 7565 2928 2732 3030  icast=True)('200
-00023cf0: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
-00023d00: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
-00023d10: 2020 2020 2028 2732 3030 313a 3a31 3236       ('2001::126
-00023d20: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00023d30: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-00023d40: 4950 7636 2061 6464 7265 7373 2729 0a20  IPv6 address'). 
-00023d50: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00023d60: 535f 4950 5636 2869 735f 6d75 6c74 6963  S_IPV6(is_multic
-00023d70: 6173 743d 5472 7565 2928 2766 6630 303a  ast=True)('ff00:
-00023d80: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
-00023d90: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
-00023da0: 2020 2028 2766 6630 303a 3a31 3236 633a     ('ff00::126c:
-00023db0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
-00023dc0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
-00023dd0: 2020 203e 3e3e 2049 535f 4950 5636 2869     >>> IS_IPV6(i
-00023de0: 735f 726f 7574 6561 626c 653d 5472 7565  s_routeable=True
-00023df0: 2928 2732 3030 313a 3a31 3236 633a 3866  )('2001::126c:8f
-00023e00: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
-00023e10: 2020 2020 2020 2020 2020 2028 2732 3030             ('200
-00023e20: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
-00023e30: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
-00023e40: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00023e50: 535f 4950 5636 2869 735f 726f 7574 6561  S_IPV6(is_routea
-00023e60: 626c 653d 5472 7565 2928 2766 6630 303a  ble=True)('ff00:
-00023e70: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
-00023e80: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
-00023e90: 2020 2028 2766 6630 303a 3a31 3236 633a     ('ff00::126c:
-00023ea0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
-00023eb0: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
-00023ec0: 7636 2061 6464 7265 7373 2729 0a20 2020  v6 address').   
-00023ed0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00023ee0: 4950 5636 2873 7562 6e65 7473 3d27 3230  IPV6(subnets='20
-00023ef0: 3031 3a3a 2f33 3227 2928 2732 3030 313a  01::/32')('2001:
-00023f00: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00023f10: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
-00023f20: 3230 3031 3a3a 3866 6661 3a66 6532 323a  2001::8ffa:fe22:
-00023f30: 6233 6166 272c 204e 6f6e 6529 0a20 2020  b3af', None).   
-00023f40: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
-00023f50: 4950 5636 2873 7562 6e65 7473 3d27 6662  IPV6(subnets='fb
-00023f60: 3030 3a3a 2f38 2729 2827 3230 3031 3a3a  00::/8')('2001::
-00023f70: 3866 6661 3a66 6532 323a 6233 6166 2729  8ffa:fe22:b3af')
-00023f80: 0a20 2020 2020 2020 2020 2020 2028 2732  .            ('2
-00023f90: 3030 313a 3a38 6666 613a 6665 3232 3a62  001::8ffa:fe22:b
-00023fa0: 3361 6627 2c20 2765 6e74 6572 2076 616c  3af', 'enter val
-00023fb0: 6964 2049 5076 3620 6164 6472 6573 7327  id IPv6 address'
-00023fc0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
-00023fd0: 3e20 4953 5f49 5056 3628 7375 626e 6574  > IS_IPV6(subnet
-00023fe0: 733d 5b27 6663 3030 3a3a 2f38 272c 2732  s=['fc00::/8','2
-00023ff0: 3030 313a 3a2f 3332 275d 2928 2732 3030  001::/32'])('200
-00024000: 313a 3a38 6666 613a 6665 3232 3a62 3361  1::8ffa:fe22:b3a
-00024010: 6627 290a 2020 2020 2020 2020 2020 2020  f').            
-00024020: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
-00024030: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
-00024040: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
-00024050: 535f 4950 5636 2873 7562 6e65 7473 3d27  S_IPV6(subnets='
-00024060: 696e 7661 6c69 6473 7562 6e65 7427 2928  invalidsubnet')(
-00024070: 2732 3030 313a 3a38 6666 613a 6665 3232  '2001::8ffa:fe22
-00024080: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-00024090: 2020 2020 2827 3230 3031 3a3a 3866 6661      ('2001::8ffa
-000240a0: 3a66 6532 323a 6233 6166 272c 2027 696e  :fe22:b3af', 'in
-000240b0: 7661 6c69 6420 7375 626e 6574 2070 726f  valid subnet pro
-000240c0: 7669 6465 6427 290a 0a20 2020 2022 2222  vided')..    """
-000240d0: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-000240e0: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
-000240f0: 2c0a 2020 2020 2020 2020 6973 5f70 7269  ,.        is_pri
-00024100: 7661 7465 3d4e 6f6e 652c 0a20 2020 2020  vate=None,.     
-00024110: 2020 2069 735f 6c69 6e6b 5f6c 6f63 616c     is_link_local
-00024120: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
-00024130: 735f 7265 7365 7276 6564 3d4e 6f6e 652c  s_reserved=None,
-00024140: 0a20 2020 2020 2020 2069 735f 6d75 6c74  .        is_mult
-00024150: 6963 6173 743d 4e6f 6e65 2c0a 2020 2020  icast=None,.    
-00024160: 2020 2020 6973 5f72 6f75 7465 6162 6c65      is_routeable
-00024170: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
-00024180: 735f 3674 6f34 3d4e 6f6e 652c 0a20 2020  s_6to4=None,.   
-00024190: 2020 2020 2069 735f 7465 7265 646f 3d4e       is_teredo=N
-000241a0: 6f6e 652c 0a20 2020 2020 2020 2073 7562  one,.        sub
-000241b0: 6e65 7473 3d4e 6f6e 652c 0a20 2020 2020  nets=None,.     
-000241c0: 2020 2065 7272 6f72 5f6d 6573 7361 6765     error_message
-000241d0: 3d22 456e 7465 7220 7661 6c69 6420 4950  ="Enter valid IP
-000241e0: 7636 2061 6464 7265 7373 222c 0a20 2020  v6 address",.   
-000241f0: 2029 3a0a 2020 2020 2020 2020 7365 6c66   ):.        self
-00024200: 2e69 735f 7072 6976 6174 6520 3d20 6973  .is_private = is
-00024210: 5f70 7269 7661 7465 0a20 2020 2020 2020  _private.       
-00024220: 2073 656c 662e 6973 5f6c 696e 6b5f 6c6f   self.is_link_lo
-00024230: 6361 6c20 3d20 6973 5f6c 696e 6b5f 6c6f  cal = is_link_lo
-00024240: 6361 6c0a 2020 2020 2020 2020 7365 6c66  cal.        self
-00024250: 2e69 735f 7265 7365 7276 6564 203d 2069  .is_reserved = i
-00024260: 735f 7265 7365 7276 6564 0a20 2020 2020  s_reserved.     
-00024270: 2020 2073 656c 662e 6973 5f6d 756c 7469     self.is_multi
-00024280: 6361 7374 203d 2069 735f 6d75 6c74 6963  cast = is_multic
-00024290: 6173 740a 2020 2020 2020 2020 7365 6c66  ast.        self
-000242a0: 2e69 735f 726f 7574 6561 626c 6520 3d20  .is_routeable = 
-000242b0: 6973 5f72 6f75 7465 6162 6c65 0a20 2020  is_routeable.   
-000242c0: 2020 2020 2073 656c 662e 6973 5f36 746f       self.is_6to
-000242d0: 3420 3d20 6973 5f36 746f 340a 2020 2020  4 = is_6to4.    
-000242e0: 2020 2020 7365 6c66 2e69 735f 7465 7265      self.is_tere
-000242f0: 646f 203d 2069 735f 7465 7265 646f 0a20  do = is_teredo. 
-00024300: 2020 2020 2020 2073 656c 662e 7375 626e         self.subn
-00024310: 6574 7320 3d20 7375 626e 6574 730a 2020  ets = subnets.  
-00024320: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
-00024330: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
-00024340: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
-00024350: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
-00024360: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
-00024370: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
-00024380: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00024390: 2020 6970 203d 2069 7061 6464 7265 7373    ip = ipaddress
-000243a0: 2e49 5076 3641 6464 7265 7373 2874 6f5f  .IPv6Address(to_
-000243b0: 756e 6963 6f64 6528 7661 6c75 6529 290a  unicode(value)).
-000243c0: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
-000243d0: 2054 7275 650a 2020 2020 2020 2020 6578   True.        ex
-000243e0: 6365 7074 2069 7061 6464 7265 7373 2e41  cept ipaddress.A
-000243f0: 6464 7265 7373 5661 6c75 6545 7272 6f72  ddressValueError
-00024400: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00024410: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
-00024420: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
-00024430: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
-00024440: 6573 7361 6765 2929 0a0a 2020 2020 2020  essage))..      
-00024450: 2020 6966 2073 656c 662e 7375 626e 6574    if self.subnet
-00024460: 733a 0a20 2020 2020 2020 2020 2020 2023  s:.            #
-00024470: 2069 7465 7261 7465 2074 6872 6f75 6768   iterate through
-00024480: 2073 656c 662e 7375 626e 6574 7320 746f   self.subnets to
-00024490: 2073 6565 2069 6620 7661 6c75 6520 6973   see if value is
-000244a0: 2061 206d 656d 6265 720a 2020 2020 2020   a member.      
-000244b0: 2020 2020 2020 6f6b 203d 2046 616c 7365        ok = False
-000244c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000244d0: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
-000244e0: 7375 626e 6574 732c 2073 7472 293a 0a20  subnets, str):. 
-000244f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00024500: 656c 662e 7375 626e 6574 7320 3d20 5b73  elf.subnets = [s
-00024510: 656c 662e 7375 626e 6574 735d 0a20 2020  elf.subnets].   
-00024520: 2020 2020 2020 2020 2066 6f72 206e 6574           for net
-00024530: 776f 726b 2069 6e20 7365 6c66 2e73 7562  work in self.sub
-00024540: 6e65 7473 3a0a 2020 2020 2020 2020 2020  nets:.          
-00024550: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00024560: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00024570: 706e 6574 203d 2069 7061 6464 7265 7373  pnet = ipaddress
-00024580: 2e49 5076 364e 6574 776f 726b 2874 6f5f  .IPv6Network(to_
-00024590: 756e 6963 6f64 6528 6e65 7477 6f72 6b29  unicode(network)
-000245a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000245b0: 2020 6578 6365 7074 2028 6970 6164 6472    except (ipaddr
-000245c0: 6573 732e 4e65 746d 6173 6b56 616c 7565  ess.NetmaskValue
-000245d0: 4572 726f 722c 2069 7061 6464 7265 7373  Error, ipaddress
-000245e0: 2e41 6464 7265 7373 5661 6c75 6545 7272  .AddressValueErr
-000245f0: 6f72 293a 0a20 2020 2020 2020 2020 2020  or):.           
-00024600: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-00024610: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
-00024620: 656c 662e 7472 616e 736c 6174 6f72 2822  elf.translator("
-00024630: 696e 7661 6c69 6420 7375 626e 6574 2070  invalid subnet p
-00024640: 726f 7669 6465 6422 2929 0a20 2020 2020  rovided")).     
-00024650: 2020 2020 2020 2020 2020 2069 6620 6970             if ip
-00024660: 2069 6e20 6970 6e65 743a 0a20 2020 2020   in ipnet:.     
-00024670: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00024680: 6b20 3d20 5472 7565 0a0a 2020 2020 2020  k = True..      
-00024690: 2020 6966 2073 656c 662e 6973 5f72 6f75    if self.is_rou
-000246a0: 7465 6162 6c65 3a0a 2020 2020 2020 2020  teable:.        
-000246b0: 2020 2020 7365 6c66 2e69 735f 7072 6976      self.is_priv
-000246c0: 6174 6520 3d20 4661 6c73 650a 2020 2020  ate = False.    
-000246d0: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
-000246e0: 7265 7365 7276 6564 203d 2046 616c 7365  reserved = False
-000246f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00024700: 662e 6973 5f6d 756c 7469 6361 7374 203d  f.is_multicast =
-00024710: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-00024720: 6966 206f 6b20 616e 6420 7365 6c66 2e69  if ok and self.i
-00024730: 735f 7072 6976 6174 6520 6973 206e 6f74  s_private is not
-00024740: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
-00024750: 735f 7072 6976 6174 6520 213d 2069 702e  s_private != ip.
-00024760: 6973 5f70 7269 7661 7465 3a0a 2020 2020  is_private:.    
-00024770: 2020 2020 2020 2020 6f6b 203d 2046 616c          ok = Fal
-00024780: 7365 0a20 2020 2020 2020 2069 6620 280a  se.        if (.
-00024790: 2020 2020 2020 2020 2020 2020 6f6b 0a20              ok. 
-000247a0: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
-000247b0: 656c 662e 6973 5f6c 696e 6b5f 6c6f 6361  elf.is_link_loca
-000247c0: 6c20 6973 206e 6f74 204e 6f6e 650a 2020  l is not None.  
-000247d0: 2020 2020 2020 2020 2020 616e 6420 7365            and se
-000247e0: 6c66 2e69 735f 6c69 6e6b 5f6c 6f63 616c  lf.is_link_local
-000247f0: 2021 3d20 6970 2e69 735f 6c69 6e6b 5f6c   != ip.is_link_l
-00024800: 6f63 616c 0a20 2020 2020 2020 2029 3a0a  ocal.        ):.
-00024810: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
-00024820: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
-00024830: 6620 6f6b 2061 6e64 2073 656c 662e 6973  f ok and self.is
-00024840: 5f72 6573 6572 7665 6420 6973 206e 6f74  _reserved is not
-00024850: 204e 6f6e 6520 616e 6420 7365 6c66 2e69   None and self.i
-00024860: 735f 7265 7365 7276 6564 2021 3d20 6970  s_reserved != ip
-00024870: 2e69 735f 7265 7365 7276 6564 3a0a 2020  .is_reserved:.  
-00024880: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
-00024890: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
-000248a0: 280a 2020 2020 2020 2020 2020 2020 6f6b  (.            ok
-000248b0: 0a20 2020 2020 2020 2020 2020 2061 6e64  .            and
-000248c0: 2073 656c 662e 6973 5f6d 756c 7469 6361   self.is_multica
-000248d0: 7374 2069 7320 6e6f 7420 4e6f 6e65 0a20  st is not None. 
-000248e0: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
-000248f0: 656c 662e 6973 5f6d 756c 7469 6361 7374  elf.is_multicast
-00024900: 2021 3d20 6970 2e69 735f 6d75 6c74 6963   != ip.is_multic
-00024910: 6173 740a 2020 2020 2020 2020 293a 0a20  ast.        ):. 
-00024920: 2020 2020 2020 2020 2020 206f 6b20 3d20             ok = 
-00024930: 4661 6c73 650a 2020 2020 2020 2020 6966  False.        if
-00024940: 206f 6b20 616e 6420 7365 6c66 2e69 735f   ok and self.is_
-00024950: 3674 6f34 2069 7320 6e6f 7420 4e6f 6e65  6to4 is not None
-00024960: 2061 6e64 2073 656c 662e 6973 5f36 746f   and self.is_6to
-00024970: 3420 213d 2062 6f6f 6c28 6970 2e73 6978  4 != bool(ip.six
-00024980: 746f 666f 7572 293a 0a20 2020 2020 2020  tofour):.       
-00024990: 2020 2020 206f 6b20 3d20 4661 6c73 650a       ok = False.
-000249a0: 2020 2020 2020 2020 6966 206f 6b20 616e          if ok an
-000249b0: 6420 7365 6c66 2e69 735f 7465 7265 646f  d self.is_teredo
-000249c0: 2069 7320 6e6f 7420 4e6f 6e65 2061 6e64   is not None and
-000249d0: 2073 656c 662e 6973 5f74 6572 6564 6f20   self.is_teredo 
-000249e0: 213d 2062 6f6f 6c28 6970 2e74 6572 6564  != bool(ip.tered
-000249f0: 6f29 3a0a 2020 2020 2020 2020 2020 2020  o):.            
-00024a00: 6f6b 203d 2046 616c 7365 0a0a 2020 2020  ok = False..    
-00024a10: 2020 2020 6966 206f 6b3a 0a20 2020 2020      if ok:.     
-00024a20: 2020 2020 2020 2072 6574 7572 6e20 7661         return va
-00024a30: 6c75 650a 0a20 2020 2020 2020 2072 6169  lue..        rai
-00024a40: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
-00024a50: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
-00024a60: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
-00024a70: 7373 6167 6529 290a 0a0a 636c 6173 7320  ssage))...class 
-00024a80: 4953 5f49 5041 4444 5245 5353 2856 616c  IS_IPADDRESS(Val
-00024a90: 6964 6174 6f72 293a 0a20 2020 2022 2222  idator):.    """
-00024aa0: 0a20 2020 2043 6865 636b 7320 6966 2066  .    Checks if f
-00024ab0: 6965 6c64 2773 2076 616c 7565 2069 7320  ield's value is 
-00024ac0: 616e 2049 5020 4164 6472 6573 7320 2876  an IP Address (v
-00024ad0: 3420 6f72 2076 3629 2e20 4361 6e20 6265  4 or v6). Can be
-00024ae0: 2073 6574 2074 6f20 666f 7263 650a 2020   set to force.  
-00024af0: 2020 6164 6472 6573 7365 7320 6672 6f6d    addresses from
-00024b00: 2077 6974 6869 6e20 6120 7370 6563 6966   within a specif
-00024b10: 6963 2072 616e 6765 2e20 4368 6563 6b73  ic range. Checks
-00024b20: 2061 7265 2064 6f6e 6520 7769 7468 2074   are done with t
-00024b30: 6865 2063 6f72 7265 6374 0a20 2020 2049  he correct.    I
-00024b40: 535f 4950 5634 2061 6e64 2049 535f 4950  S_IPV4 and IS_IP
-00024b50: 5636 2076 616c 6964 6174 6f72 732e 0a0a  V6 validators...
-00024b60: 2020 2020 5573 6573 2074 6865 2069 7061      Uses the ipa
-00024b70: 6464 7265 7373 2066 726f 6d20 7468 6520  ddress from the 
-00024b80: 5079 7468 6f6e 2033 2073 7461 6e64 6172  Python 3 standar
-00024b90: 6420 6c69 6272 6172 790a 2020 2020 616e  d library.    an
-00024ba0: 6420 6974 7320 5079 7468 6f6e 2032 2062  d its Python 2 b
-00024bb0: 6163 6b70 6f72 7420 2869 6e20 636f 6e74  ackport (in cont
-00024bc0: 7269 622f 6970 6164 6472 6573 732e 7079  rib/ipaddress.py
-00024bd0: 292e 0a0a 2020 2020 4172 6773 3a0a 2020  )...    Args:.  
-00024be0: 2020 2020 2020 6d69 6e69 703a 206c 6f77        minip: low
-00024bf0: 6573 7420 616c 6c6f 7765 6420 6164 6472  est allowed addr
-00024c00: 6573 733b 2061 6363 6570 7473 3a0a 2020  ess; accepts:.  
-00024c10: 2020 2020 2020 2020 2020 2020 2073 7472               str
-00024c20: 2c20 6567 2e20 3139 322e 3136 382e 302e  , eg. 192.168.0.
-00024c30: 310a 2020 2020 2020 2020 2020 2020 2020  1.              
-00024c40: 206c 6973 7420 6f72 2074 7570 6c65 206f   list or tuple o
-00024c50: 6620 6f63 7465 7473 2c20 6567 2e20 5b31  f octets, eg. [1
-00024c60: 3932 2c20 3136 382c 2030 2c20 315d 0a20  92, 168, 0, 1]. 
-00024c70: 2020 2020 2020 206d 6178 6970 3a20 6869         maxip: hi
-00024c80: 6768 6573 7420 616c 6c6f 7765 6420 6164  ghest allowed ad
-00024c90: 6472 6573 733b 2073 616d 6520 6173 2061  dress; same as a
-00024ca0: 626f 7665 0a20 2020 2020 2020 2069 6e76  bove.        inv
-00024cb0: 6572 743a 2054 7275 6520 746f 2061 6c6c  ert: True to all
-00024cc0: 6f77 2061 6464 7265 7373 6573 206f 6e6c  ow addresses onl
-00024cd0: 7920 6672 6f6d 206f 7574 7369 6465 206f  y from outside o
-00024ce0: 6620 6769 7665 6e20 7261 6e67 653b 206e  f given range; n
-00024cf0: 6f74 650a 2020 2020 2020 2020 2020 2020  ote.            
-00024d00: 2020 2020 7468 6174 2072 616e 6765 2062      that range b
-00024d10: 6f75 6e64 6172 6965 7320 6172 6520 6e6f  oundaries are no
-00024d20: 7420 6d61 7463 6865 6420 7468 6973 2077  t matched this w
-00024d30: 6179 0a0a 2020 2020 4950 7634 2073 7065  ay..    IPv4 spe
-00024d40: 6369 6669 6320 6172 6775 6d65 6e74 733a  cific arguments:
-00024d50: 0a0a 2020 2020 2020 2020 2d20 6973 5f6c  ..        - is_l
-00024d60: 6f63 616c 686f 7374 3a20 6c6f 6361 6c68  ocalhost: localh
-00024d70: 6f73 7420 6164 6472 6573 7320 7472 6561  ost address trea
-00024d80: 746d 656e 743a 0a0a 2020 2020 2020 2020  tment:..        
-00024d90: 2020 2020 2d20 4e6f 6e65 2028 6465 6661      - None (defa
-00024da0: 756c 7429 3a20 696e 6469 6666 6572 656e  ult): indifferen
-00024db0: 740a 2020 2020 2020 2020 2020 2020 2d20  t.            - 
-00024dc0: 5472 7565 2028 656e 666f 7263 6529 3a20  True (enforce): 
-00024dd0: 7175 6572 7920 6164 6472 6573 7320 6d75  query address mu
-00024de0: 7374 206d 6174 6368 206c 6f63 616c 686f  st match localho
-00024df0: 7374 2061 6464 7265 7373 0a20 2020 2020  st address.     
-00024e00: 2020 2020 2020 2020 2028 3132 372e 302e           (127.0.
-00024e10: 302e 3129 0a20 2020 2020 2020 2020 2020  0.1).           
-00024e20: 202d 2046 616c 7365 2028 666f 7262 6964   - False (forbid
-00024e30: 293a 2071 7565 7279 2061 6464 7265 7373  ): query address
-00024e40: 206d 7573 7420 6e6f 7420 6d61 7463 6820   must not match 
-00024e50: 6c6f 6361 6c68 6f73 7420 6164 6472 6573  localhost addres
-00024e60: 730a 2020 2020 2020 2020 2d20 6973 5f70  s.        - is_p
-00024e70: 7269 7661 7465 3a20 7361 6d65 2061 7320  rivate: same as 
-00024e80: 6162 6f76 652c 2065 7863 6570 7420 7468  above, except th
-00024e90: 6174 2071 7565 7279 2061 6464 7265 7373  at query address
-00024ea0: 2069 7320 6368 6563 6b65 6420 6167 6169   is checked agai
-00024eb0: 6e73 740a 2020 2020 2020 2020 2020 7477  nst.          tw
-00024ec0: 6f20 6164 6472 6573 7320 7261 6e67 6573  o address ranges
-00024ed0: 3a20 3137 322e 3136 2e30 2e30 202d 2031  : 172.16.0.0 - 1
-00024ee0: 3732 2e33 312e 3235 352e 3235 3520 616e  72.31.255.255 an
-00024ef0: 640a 2020 2020 2020 2020 2020 3139 322e  d.          192.
-00024f00: 3136 382e 302e 3020 2d20 3139 322e 3136  168.0.0 - 192.16
-00024f10: 382e 3235 352e 3235 350a 2020 2020 2020  8.255.255.      
-00024f20: 2020 2d20 6973 5f61 7574 6f6d 6174 6963    - is_automatic
-00024f30: 3a20 7361 6d65 2061 7320 6162 6f76 652c  : same as above,
-00024f40: 2065 7863 6570 7420 7468 6174 2071 7565   except that que
-00024f50: 7279 2061 6464 7265 7373 2069 7320 6368  ry address is ch
-00024f60: 6563 6b65 6420 6167 6169 6e73 740a 2020  ecked against.  
-00024f70: 2020 2020 2020 2020 6f6e 6520 6164 6472          one addr
-00024f80: 6573 7320 7261 6e67 653a 2031 3639 2e32  ess range: 169.2
-00024f90: 3534 2e30 2e30 202d 2031 3639 2e32 3534  54.0.0 - 169.254
-00024fa0: 2e32 3535 2e32 3535 0a20 2020 2020 2020  .255.255.       
-00024fb0: 202d 2069 735f 6970 7634 3a20 6569 7468   - is_ipv4: eith
-00024fc0: 6572 3a0a 0a20 2020 2020 2020 2020 2020  er:..           
-00024fd0: 202d 204e 6f6e 6520 2864 6566 6175 6c74   - None (default
-00024fe0: 293a 2069 6e64 6966 6665 7265 6e74 0a20  ): indifferent. 
-00024ff0: 2020 2020 2020 2020 2020 202d 2054 7275             - Tru
-00025000: 6520 2865 6e66 6f72 6365 293a 206d 7573  e (enforce): mus
-00025010: 7420 6265 2061 6e20 4950 7634 2061 6464  t be an IPv4 add
-00025020: 7265 7373 0a20 2020 2020 2020 2020 2020  ress.           
-00025030: 202d 2046 616c 7365 2028 666f 7262 6964   - False (forbid
-00025040: 293a 206d 7573 7420 4e4f 5420 6265 2061  ): must NOT be a
-00025050: 6e20 4950 7634 2061 6464 7265 7373 0a0a  n IPv4 address..
-00025060: 2020 2020 4950 7636 2073 7065 6369 6669      IPv6 specifi
-00025070: 6320 6172 6775 6d65 6e74 733a 0a0a 2020  c arguments:..  
-00025080: 2020 2020 2020 2d20 6973 5f6c 696e 6b5f        - is_link_
-00025090: 6c6f 6361 6c3a 2053 616d 6520 6173 2061  local: Same as a
-000250a0: 626f 7665 2062 7574 2075 7365 7320 6665  bove but uses fe
-000250b0: 3830 3a3a 2f31 3020 7261 6e67 650a 2020  80::/10 range.  
-000250c0: 2020 2020 2020 2d20 6973 5f72 6573 6572        - is_reser
-000250d0: 7665 643a 2053 616d 6520 6173 2061 626f  ved: Same as abo
-000250e0: 7665 2062 7574 2075 7365 7320 4945 5446  ve but uses IETF
-000250f0: 2072 6573 6572 7665 6420 7261 6e67 650a   reserved range.
-00025100: 2020 2020 2020 2020 2d20 6973 5f6d 756c          - is_mul
-00025110: 7469 6361 7374 3a20 5361 6d65 2061 7320  ticast: Same as 
-00025120: 6162 6f76 6520 6275 7420 7573 6573 2066  above but uses f
-00025130: 6630 303a 3a2f 3820 7261 6e67 650a 2020  f00::/8 range.  
-00025140: 2020 2020 2020 2d20 6973 5f72 6f75 7465        - is_route
-00025150: 6162 6c65 3a20 5369 6d69 6c61 7220 746f  able: Similar to
-00025160: 2061 626f 7665 2062 7574 2065 6e66 6f72   above but enfor
-00025170: 6365 7320 6e6f 7420 7072 6976 6174 652c  ces not private,
-00025180: 206c 696e 6b5f 6c6f 6361 6c2c 0a20 2020   link_local,.   
-00025190: 2020 2020 2020 2072 6573 6572 7665 6420         reserved 
-000251a0: 6f72 206d 756c 7469 6361 7374 0a20 2020  or multicast.   
-000251b0: 2020 2020 202d 2069 735f 3674 6f34 3a20       - is_6to4: 
-000251c0: 5361 6d65 2061 7320 6162 6f76 6520 6275  Same as above bu
-000251d0: 7420 7573 6573 2032 3030 323a 3a2f 3136  t uses 2002::/16
-000251e0: 2072 616e 6765 0a20 2020 2020 2020 202d   range.        -
-000251f0: 2069 735f 7465 7265 646f 3a20 5361 6d65   is_teredo: Same
-00025200: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
-00025210: 6573 2032 3030 313a 3a2f 3332 2072 616e  es 2001::/32 ran
-00025220: 6765 0a20 2020 2020 2020 202d 2073 7562  ge.        - sub
-00025230: 6e65 7473 3a20 7661 6c75 6520 6d75 7374  nets: value must
-00025240: 2062 6520 6120 6d65 6d62 6572 206f 6620   be a member of 
-00025250: 6174 206c 6561 7374 206f 6e65 2066 726f  at least one fro
-00025260: 6d20 6c69 7374 206f 6620 7375 626e 6574  m list of subnet
-00025270: 730a 2020 2020 2020 2020 2d20 6973 5f69  s.        - is_i
-00025280: 7076 363a 2065 6974 6865 723a 0a0a 2020  pv6: either:..  
-00025290: 2020 2020 2020 2020 2020 2d20 4e6f 6e65            - None
-000252a0: 2028 6465 6661 756c 7429 3a20 696e 6469   (default): indi
-000252b0: 6666 6572 656e 740a 2020 2020 2020 2020  fferent.        
-000252c0: 2020 2020 2d20 5472 7565 2028 656e 666f      - True (enfo
-000252d0: 7263 6529 3a20 6d75 7374 2062 6520 616e  rce): must be an
-000252e0: 2049 5076 3620 6164 6472 6573 730a 2020   IPv6 address.  
-000252f0: 2020 2020 2020 2020 2020 2d20 4661 6c73            - Fals
-00025300: 6520 2866 6f72 6269 6429 3a20 6d75 7374  e (forbid): must
-00025310: 204e 4f54 2062 6520 616e 2049 5076 3620   NOT be an IPv6 
-00025320: 6164 6472 6573 730a 0a20 2020 204d 696e  address..    Min
-00025330: 6970 2061 6e64 206d 6178 6970 206d 6179  ip and maxip may
-00025340: 2061 6c73 6f20 6265 206c 6973 7473 206f   also be lists o
-00025350: 7220 7475 706c 6573 206f 6620 6164 6472  r tuples of addr
-00025360: 6573 7365 7320 696e 2061 6c6c 2061 626f  esses in all abo
-00025370: 7665 0a20 2020 2066 6f72 6d73 2028 7374  ve.    forms (st
-00025380: 722c 2069 6e74 2c20 6c69 7374 202f 2074  r, int, list / t
-00025390: 7570 6c65 292c 2061 6c6c 6f77 696e 6720  uple), allowing 
-000253a0: 7365 7475 7020 6f66 206d 756c 7469 706c  setup of multipl
-000253b0: 6520 6164 6472 6573 7320 7261 6e67 6573  e address ranges
-000253c0: 3a3a 0a0a 2020 2020 2020 2020 6d69 6e69  ::..        mini
-000253d0: 7020 3d20 286d 696e 6970 312c 206d 696e  p = (minip1, min
-000253e0: 6970 322c 202e 2e2e 206d 696e 6970 4e29  ip2, ... minipN)
-000253f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00025400: 2020 2020 7c20 2020 2020 2020 7c20 2020      |       |   
-00025410: 2020 2020 2020 2020 7c0a 2020 2020 2020          |.      
-00025420: 2020 2020 2020 2020 2020 2020 207c 2020               |  
-00025430: 2020 2020 207c 2020 2020 2020 2020 2020       |          
-00025440: 207c 0a20 2020 2020 2020 206d 6178 6970   |.        maxip
-00025450: 203d 2028 6d61 7869 7031 2c20 6d61 7869   = (maxip1, maxi
-00025460: 7032 2c20 2e2e 2e20 6d61 7869 704e 290a  p2, ... maxipN).
-00025470: 0a20 2020 204c 6f6e 6765 7220 6974 6572  .    Longer iter
-00025480: 6162 6c65 2077 696c 6c20 6265 2074 7275  able will be tru
-00025490: 6e63 6174 6564 2074 6f20 6d61 7463 6820  ncated to match 
-000254a0: 6c65 6e67 7468 206f 6620 7368 6f72 7465  length of shorte
-000254b0: 7220 6f6e 652e 0a0a 2020 2020 2020 2020  r one...        
-000254c0: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
-000254d0: 2829 2827 3139 322e 3136 382e 312e 3527  ()('192.168.1.5'
-000254e0: 290a 2020 2020 2020 2020 2827 3139 322e  ).        ('192.
-000254f0: 3136 382e 312e 3527 2c20 4e6f 6e65 290a  168.1.5', None).
-00025500: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
-00025510: 5041 4444 5245 5353 2869 735f 6970 7636  PADDRESS(is_ipv6
-00025520: 3d46 616c 7365 2928 2731 3932 2e31 3638  =False)('192.168
-00025530: 2e31 2e35 2729 0a20 2020 2020 2020 2028  .1.5').        (
-00025540: 2731 3932 2e31 3638 2e31 2e35 272c 204e  '192.168.1.5', N
-00025550: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00025560: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
-00025570: 2732 3535 2e32 3535 2e32 3535 2e32 3535  '255.255.255.255
-00025580: 2729 0a20 2020 2020 2020 2028 2732 3535  ').        ('255
-00025590: 2e32 3535 2e32 3535 2e32 3535 272c 204e  .255.255.255', N
-000255a0: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-000255b0: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
-000255c0: 2731 3932 2e31 3638 2e31 2e35 2027 290a  '192.168.1.5 ').
-000255d0: 2020 2020 2020 2020 2827 3139 322e 3136          ('192.16
-000255e0: 382e 312e 3520 272c 2027 656e 7465 7220  8.1.5 ', 'enter 
-000255f0: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-00025600: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
-00025610: 535f 4950 4144 4452 4553 5328 2928 2731  S_IPADDRESS()('1
-00025620: 3932 2e31 3638 2e31 2e31 2e35 2729 0a20  92.168.1.1.5'). 
-00025630: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
-00025640: 2e31 2e31 2e35 272c 2027 656e 7465 7220  .1.1.5', 'enter 
-00025650: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-00025660: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
-00025670: 535f 4950 4144 4452 4553 5328 2928 2731  S_IPADDRESS()('1
-00025680: 3233 2e31 3233 2729 0a20 2020 2020 2020  23.123').       
-00025690: 2028 2731 3233 2e31 3233 272c 2027 656e   ('123.123', 'en
-000256a0: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
-000256b0: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
-000256c0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
-000256d0: 2928 2731 3131 312e 322e 332e 3427 290a  )('1111.2.3.4').
-000256e0: 2020 2020 2020 2020 2827 3131 3131 2e32          ('1111.2
-000256f0: 2e33 2e34 272c 2027 656e 7465 7220 7661  .3.4', 'enter va
-00025700: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
-00025710: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025720: 4950 4144 4452 4553 5328 2928 2730 3131  IPADDRESS()('011
-00025730: 312e 322e 332e 3427 290a 2020 2020 2020  1.2.3.4').      
-00025740: 2020 2827 3031 3131 2e32 2e33 2e34 272c    ('0111.2.3.4',
-00025750: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
-00025760: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00025770: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
-00025780: 4553 5328 2928 2732 3536 2e32 2e33 2e34  ESS()('256.2.3.4
-00025790: 2729 0a20 2020 2020 2020 2028 2732 3536  ').        ('256
-000257a0: 2e32 2e33 2e34 272c 2027 656e 7465 7220  .2.3.4', 'enter 
-000257b0: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-000257c0: 2729 0a20 2020 2020 2020 203e 3e3e 2049  ').        >>> I
-000257d0: 535f 4950 4144 4452 4553 5328 2928 2733  S_IPADDRESS()('3
-000257e0: 3030 2e32 2e33 2e34 2729 0a20 2020 2020  00.2.3.4').     
-000257f0: 2020 2028 2733 3030 2e32 2e33 2e34 272c     ('300.2.3.4',
-00025800: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
-00025810: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
-00025820: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
-00025830: 4553 5328 6d69 6e69 703d 2731 3932 2e31  ESS(minip='192.1
-00025840: 3638 2e31 2e30 272c 206d 6178 6970 3d27  68.1.0', maxip='
-00025850: 3139 322e 3136 382e 312e 3235 3527 2928  192.168.1.255')(
-00025860: 2731 3932 2e31 3638 2e31 2e31 3030 2729  '192.168.1.100')
-00025870: 0a20 2020 2020 2020 2028 2731 3932 2e31  .        ('192.1
-00025880: 3638 2e31 2e31 3030 272c 204e 6f6e 6529  68.1.100', None)
-00025890: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-000258a0: 4950 4144 4452 4553 5328 6d69 6e69 703d  IPADDRESS(minip=
-000258b0: 2731 2e32 2e33 2e35 272c 206d 6178 6970  '1.2.3.5', maxip
-000258c0: 3d27 312e 322e 332e 3927 2c20 6572 726f  ='1.2.3.9', erro
-000258d0: 725f 6d65 7373 6167 653d 2742 6164 2069  r_message='Bad i
-000258e0: 7027 2928 2731 2e32 2e33 2e34 2729 0a20  p')('1.2.3.4'). 
-000258f0: 2020 2020 2020 2028 2731 2e32 2e33 2e34         ('1.2.3.4
-00025900: 272c 2027 6261 6420 6970 2729 0a20 2020  ', 'bad ip').   
-00025910: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025920: 4452 4553 5328 6d61 7869 703d 2731 2e32  DRESS(maxip='1.2
-00025930: 2e33 2e34 272c 2069 6e76 6572 743d 5472  .3.4', invert=Tr
-00025940: 7565 2928 2731 3237 2e30 2e30 2e31 2729  ue)('127.0.0.1')
-00025950: 0a20 2020 2020 2020 2028 2731 3237 2e30  .        ('127.0
-00025960: 2e30 2e31 272c 204e 6f6e 6529 0a20 2020  .0.1', None).   
-00025970: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025980: 4452 4553 5328 6d61 7869 703d 2731 3932  DRESS(maxip='192
-00025990: 2e31 3638 2e31 2e34 272c 2069 6e76 6572  .168.1.4', inver
-000259a0: 743d 5472 7565 2928 2731 3932 2e31 3638  t=True)('192.168
-000259b0: 2e31 2e34 2729 0a20 2020 2020 2020 2028  .1.4').        (
-000259c0: 2731 3932 2e31 3638 2e31 2e34 272c 2027  '192.168.1.4', '
-000259d0: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
-000259e0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-000259f0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-00025a00: 5328 6973 5f6c 6f63 616c 686f 7374 3d54  S(is_localhost=T
-00025a10: 7275 6529 2827 3132 372e 302e 302e 3127  rue)('127.0.0.1'
-00025a20: 290a 2020 2020 2020 2020 2827 3132 372e  ).        ('127.
-00025a30: 302e 302e 3127 2c20 4e6f 6e65 290a 2020  0.0.1', None).  
-00025a40: 2020 2020 2020 3e3e 3e20 4953 5f49 5041        >>> IS_IPA
-00025a50: 4444 5245 5353 2869 735f 6c6f 6361 6c68  DDRESS(is_localh
-00025a60: 6f73 743d 5472 7565 2928 2731 3932 2e31  ost=True)('192.1
-00025a70: 3638 2e31 2e31 3027 290a 2020 2020 2020  68.1.10').      
-00025a80: 2020 2827 3139 322e 3136 382e 312e 3130    ('192.168.1.10
-00025a90: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
-00025aa0: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
-00025ab0: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
-00025ac0: 4452 4553 5328 6973 5f6c 6f63 616c 686f  DRESS(is_localho
-00025ad0: 7374 3d46 616c 7365 2928 2731 3237 2e30  st=False)('127.0
-00025ae0: 2e30 2e31 2729 0a20 2020 2020 2020 2028  .0.1').        (
-00025af0: 2731 3237 2e30 2e30 2e31 272c 2027 656e  '127.0.0.1', 'en
-00025b00: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
-00025b10: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
-00025b20: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
-00025b30: 6d61 7869 703d 2731 3030 2e30 2e30 2e30  maxip='100.0.0.0
-00025b40: 272c 2069 735f 6c6f 6361 6c68 6f73 743d  ', is_localhost=
-00025b50: 5472 7565 2928 2731 3237 2e30 2e30 2e31  True)('127.0.0.1
-00025b60: 2729 0a20 2020 2020 2020 2028 2731 3237  ').        ('127
-00025b70: 2e30 2e30 2e31 272c 2027 656e 7465 7220  .0.0.1', 'enter 
-00025b80: 7661 6c69 6420 4950 2061 6464 7265 7373  valid IP address
-00025b90: 2729 0a0a 2020 2020 2020 2020 3e3e 3e20  ')..        >>> 
-00025ba0: 4953 5f49 5041 4444 5245 5353 2829 2827  IS_IPADDRESS()('
-00025bb0: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
-00025bc0: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
-00025bd0: 2020 2020 2827 6665 3830 3a3a 3132 3663      ('fe80::126c
-00025be0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00025bf0: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-00025c00: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
-00025c10: 2869 735f 6970 7634 3d46 616c 7365 2928  (is_ipv4=False)(
-00025c20: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
-00025c30: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
-00025c40: 2020 2020 2028 2766 6538 303a 3a31 3236       ('fe80::126
-00025c50: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00025c60: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
-00025c70: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-00025c80: 5328 2928 2766 6538 303a 3a31 3236 633a  S()('fe80::126c:
-00025c90: 3866 6661 3a66 6532 323a 6233 6166 2020  8ffa:fe22:b3af  
-00025ca0: 2729 0a20 2020 2020 2020 2028 2766 6538  ').        ('fe8
-00025cb0: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
-00025cc0: 323a 6233 6166 2020 272c 2027 656e 7465  2:b3af  ', 'ente
-00025cd0: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-00025ce0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
-00025cf0: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
-00025d00: 5f69 7076 343d 5472 7565 2928 2766 6538  _ipv4=True)('fe8
-00025d10: 303a 3a31 3236 633a 3866 6661 3a66 6532  0::126c:8ffa:fe2
-00025d20: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
-00025d30: 2028 2766 6538 303a 3a31 3236 633a 3866   ('fe80::126c:8f
-00025d40: 6661 3a66 6532 323a 6233 6166 272c 2027  fa:fe22:b3af', '
-00025d50: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
-00025d60: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
-00025d70: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
-00025d80: 5328 6973 5f69 7076 363d 5472 7565 2928  S(is_ipv6=True)(
-00025d90: 2731 3932 2e31 3638 2e31 2e31 2729 0a20  '192.168.1.1'). 
-00025da0: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
-00025db0: 2e31 2e31 272c 2027 656e 7465 7220 7661  .1.1', 'enter va
-00025dc0: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
-00025dd0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025de0: 4950 4144 4452 4553 5328 6973 5f69 7076  IPADDRESS(is_ipv
-00025df0: 363d 5472 7565 2c20 6572 726f 725f 6d65  6=True, error_me
-00025e00: 7373 6167 653d 2742 6164 2069 7027 2928  ssage='Bad ip')(
-00025e10: 2731 3932 2e31 3638 2e31 2e31 2729 0a20  '192.168.1.1'). 
-00025e20: 2020 2020 2020 2028 2731 3932 2e31 3638         ('192.168
-00025e30: 2e31 2e31 272c 2027 6261 6420 6970 2729  .1.1', 'bad ip')
-00025e40: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
-00025e50: 4950 4144 4452 4553 5328 6973 5f6c 696e  IPADDRESS(is_lin
-00025e60: 6b5f 6c6f 6361 6c3d 5472 7565 2928 2766  k_local=True)('f
-00025e70: 6538 303a 3a31 3236 633a 3866 6661 3a66  e80::126c:8ffa:f
-00025e80: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
-00025e90: 2020 2028 2766 6538 303a 3a31 3236 633a     ('fe80::126c:
-00025ea0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
-00025eb0: 204e 6f6e 6529 0a20 2020 2020 2020 203e   None).        >
-00025ec0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
-00025ed0: 6973 5f6c 696e 6b5f 6c6f 6361 6c3d 4661  is_link_local=Fa
-00025ee0: 6c73 6529 2827 6665 3830 3a3a 3132 3663  lse)('fe80::126c
-00025ef0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00025f00: 290a 2020 2020 2020 2020 2827 6665 3830  ).        ('fe80
-00025f10: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-00025f20: 3a62 3361 6627 2c20 2765 6e74 6572 2076  :b3af', 'enter v
-00025f30: 616c 6964 2049 5020 6164 6472 6573 7327  alid IP address'
-00025f40: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
-00025f50: 5f49 5041 4444 5245 5353 2869 735f 6c69  _IPADDRESS(is_li
-00025f60: 6e6b 5f6c 6f63 616c 3d54 7275 6529 2827  nk_local=True)('
-00025f70: 3230 3031 3a3a 3132 3663 3a38 6666 613a  2001::126c:8ffa:
-00025f80: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
-00025f90: 2020 2020 2827 3230 3031 3a3a 3132 3663      ('2001::126c
-00025fa0: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
-00025fb0: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
-00025fc0: 5020 6164 6472 6573 7327 290a 2020 2020  P address').    
-00025fd0: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
-00025fe0: 5245 5353 2869 735f 6d75 6c74 6963 6173  RESS(is_multicas
-00025ff0: 743d 5472 7565 2928 2732 3030 313a 3a31  t=True)('2001::1
-00026000: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
-00026010: 6166 2729 0a20 2020 2020 2020 2028 2732  af').        ('2
-00026020: 3030 313a 3a31 3236 633a 3866 6661 3a66  001::126c:8ffa:f
-00026030: 6532 323a 6233 6166 272c 2027 656e 7465  e22:b3af', 'ente
-00026040: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-00026050: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
-00026060: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
-00026070: 5f6d 756c 7469 6361 7374 3d54 7275 6529  _multicast=True)
-00026080: 2827 6666 3030 3a3a 3132 3663 3a38 6666  ('ff00::126c:8ff
-00026090: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
-000260a0: 2020 2020 2020 2827 6666 3030 3a3a 3132        ('ff00::12
-000260b0: 3663 3a38 6666 613a 6665 3232 3a62 3361  6c:8ffa:fe22:b3a
-000260c0: 6627 2c20 4e6f 6e65 290a 2020 2020 2020  f', None).      
-000260d0: 2020 3e3e 3e20 4953 5f49 5041 4444 5245    >>> IS_IPADDRE
-000260e0: 5353 2869 735f 726f 7574 6561 626c 653d  SS(is_routeable=
-000260f0: 5472 7565 2928 2732 3030 313a 3a31 3236  True)('2001::126
-00026100: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
-00026110: 2729 0a20 2020 2020 2020 2028 2732 3030  ').        ('200
-00026120: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
-00026130: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
-00026140: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00026150: 4144 4452 4553 5328 6973 5f72 6f75 7465  ADDRESS(is_route
-00026160: 6162 6c65 3d54 7275 6529 2827 6666 3030  able=True)('ff00
-00026170: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
-00026180: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-00026190: 2827 6666 3030 3a3a 3132 3663 3a38 6666  ('ff00::126c:8ff
-000261a0: 613a 6665 3232 3a62 3361 6627 2c20 2765  a:fe22:b3af', 'e
-000261b0: 6e74 6572 2076 616c 6964 2049 5020 6164  nter valid IP ad
-000261c0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-000261d0: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
-000261e0: 2873 7562 6e65 7473 3d27 3230 3031 3a3a  (subnets='2001::
-000261f0: 2f33 3227 2928 2732 3030 313a 3a38 6666  /32')('2001::8ff
-00026200: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
-00026210: 2020 2020 2020 2827 3230 3031 3a3a 3866        ('2001::8f
-00026220: 6661 3a66 6532 323a 6233 6166 272c 204e  fa:fe22:b3af', N
-00026230: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
-00026240: 2049 535f 4950 4144 4452 4553 5328 7375   IS_IPADDRESS(su
-00026250: 626e 6574 733d 2766 6230 303a 3a2f 3827  bnets='fb00::/8'
-00026260: 2928 2732 3030 313a 3a38 6666 613a 6665  )('2001::8ffa:fe
-00026270: 3232 3a62 3361 6627 290a 2020 2020 2020  22:b3af').      
-00026280: 2020 2827 3230 3031 3a3a 3866 6661 3a66    ('2001::8ffa:f
-00026290: 6532 323a 6233 6166 272c 2027 656e 7465  e22:b3af', 'ente
-000262a0: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
-000262b0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
-000262c0: 2049 535f 4950 4144 4452 4553 5328 7375   IS_IPADDRESS(su
-000262d0: 626e 6574 733d 5b27 6663 3030 3a3a 2f38  bnets=['fc00::/8
-000262e0: 272c 2732 3030 313a 3a2f 3332 275d 2928  ','2001::/32'])(
-000262f0: 2732 3030 313a 3a38 6666 613a 6665 3232  '2001::8ffa:fe22
-00026300: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
-00026310: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
-00026320: 323a 6233 6166 272c 204e 6f6e 6529 0a20  2:b3af', None). 
-00026330: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
-00026340: 4144 4452 4553 5328 7375 626e 6574 733d  ADDRESS(subnets=
-00026350: 2769 6e76 616c 6964 7375 626e 6574 2729  'invalidsubnet')
-00026360: 2827 3230 3031 3a3a 3866 6661 3a66 6532  ('2001::8ffa:fe2
-00026370: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
-00026380: 2028 2732 3030 313a 3a38 6666 613a 6665   ('2001::8ffa:fe
-00026390: 3232 3a62 3361 6627 2c20 2769 6e76 616c  22:b3af', 'inval
-000263a0: 6964 2073 7562 6e65 7420 7072 6f76 6964  id subnet provid
-000263b0: 6564 2729 0a20 2020 2022 2222 0a0a 2020  ed').    """..  
-000263c0: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
-000263d0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-000263e0: 2020 2020 2020 6d69 6e69 703d 2230 2e30        minip="0.0
-000263f0: 2e30 2e30 222c 0a20 2020 2020 2020 206d  .0.0",.        m
-00026400: 6178 6970 3d22 3235 352e 3235 352e 3235  axip="255.255.25
-00026410: 352e 3235 3522 2c0a 2020 2020 2020 2020  5.255",.        
-00026420: 696e 7665 7274 3d46 616c 7365 2c0a 2020  invert=False,.  
-00026430: 2020 2020 2020 6973 5f6c 6f63 616c 686f        is_localho
-00026440: 7374 3d4e 6f6e 652c 0a20 2020 2020 2020  st=None,.       
-00026450: 2069 735f 7072 6976 6174 653d 4e6f 6e65   is_private=None
-00026460: 2c0a 2020 2020 2020 2020 6973 5f61 7574  ,.        is_aut
-00026470: 6f6d 6174 6963 3d4e 6f6e 652c 0a20 2020  omatic=None,.   
-00026480: 2020 2020 2069 735f 6970 7634 3d4e 6f6e       is_ipv4=Non
-00026490: 652c 0a20 2020 2020 2020 2069 735f 6c69  e,.        is_li
-000264a0: 6e6b 5f6c 6f63 616c 3d4e 6f6e 652c 0a20  nk_local=None,. 
-000264b0: 2020 2020 2020 2069 735f 7265 7365 7276         is_reserv
-000264c0: 6564 3d4e 6f6e 652c 0a20 2020 2020 2020  ed=None,.       
-000264d0: 2069 735f 6d75 6c74 6963 6173 743d 4e6f   is_multicast=No
-000264e0: 6e65 2c0a 2020 2020 2020 2020 6973 5f72  ne,.        is_r
-000264f0: 6f75 7465 6162 6c65 3d4e 6f6e 652c 0a20  outeable=None,. 
-00026500: 2020 2020 2020 2069 735f 3674 6f34 3d4e         is_6to4=N
-00026510: 6f6e 652c 0a20 2020 2020 2020 2069 735f  one,.        is_
-00026520: 7465 7265 646f 3d4e 6f6e 652c 0a20 2020  teredo=None,.   
-00026530: 2020 2020 2073 7562 6e65 7473 3d4e 6f6e       subnets=Non
-00026540: 652c 0a20 2020 2020 2020 2069 735f 6970  e,.        is_ip
-00026550: 7636 3d4e 6f6e 652c 0a20 2020 2020 2020  v6=None,.       
-00026560: 2065 7272 6f72 5f6d 6573 7361 6765 3d22   error_message="
-00026570: 456e 7465 7220 7661 6c69 6420 4950 2061  Enter valid IP a
-00026580: 6464 7265 7373 222c 0a20 2020 2029 3a0a  ddress",.    ):.
-00026590: 2020 2020 2020 2020 7365 6c66 2e6d 696e          self.min
-000265a0: 6970 203d 2028 6d69 6e69 702c 290a 2020  ip = (minip,).  
-000265b0: 2020 2020 2020 7365 6c66 2e6d 6178 6970        self.maxip
-000265c0: 203d 2028 6d61 7869 702c 290a 2020 2020   = (maxip,).    
-000265d0: 2020 2020 7365 6c66 2e69 6e76 6572 7420      self.invert 
-000265e0: 3d20 696e 7665 7274 0a20 2020 2020 2020  = invert.       
-000265f0: 2073 656c 662e 6973 5f6c 6f63 616c 686f   self.is_localho
-00026600: 7374 203d 2069 735f 6c6f 6361 6c68 6f73  st = is_localhos
-00026610: 740a 2020 2020 2020 2020 7365 6c66 2e69  t.        self.i
-00026620: 735f 7072 6976 6174 6520 3d20 6973 5f70  s_private = is_p
-00026630: 7269 7661 7465 0a20 2020 2020 2020 2073  rivate.        s
-00026640: 656c 662e 6973 5f61 7574 6f6d 6174 6963  elf.is_automatic
-00026650: 203d 2069 735f 6175 746f 6d61 7469 630a   = is_automatic.
-00026660: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
-00026670: 6970 7634 203d 2069 735f 6970 7634 206f  ipv4 = is_ipv4 o
-00026680: 7220 6973 5f69 7076 3620 6973 2046 616c  r is_ipv6 is Fal
-00026690: 7365 0a20 2020 2020 2020 2073 656c 662e  se.        self.
-000266a0: 6973 5f70 7269 7661 7465 203d 2069 735f  is_private = is_
-000266b0: 7072 6976 6174 650a 2020 2020 2020 2020  private.        
-000266c0: 7365 6c66 2e69 735f 6c69 6e6b 5f6c 6f63  self.is_link_loc
-000266d0: 616c 203d 2069 735f 6c69 6e6b 5f6c 6f63  al = is_link_loc
-000266e0: 616c 0a20 2020 2020 2020 2073 656c 662e  al.        self.
-000266f0: 6973 5f72 6573 6572 7665 6420 3d20 6973  is_reserved = is
-00026700: 5f72 6573 6572 7665 640a 2020 2020 2020  _reserved.      
-00026710: 2020 7365 6c66 2e69 735f 6d75 6c74 6963    self.is_multic
-00026720: 6173 7420 3d20 6973 5f6d 756c 7469 6361  ast = is_multica
-00026730: 7374 0a20 2020 2020 2020 2073 656c 662e  st.        self.
-00026740: 6973 5f72 6f75 7465 6162 6c65 203d 2069  is_routeable = i
-00026750: 735f 726f 7574 6561 626c 650a 2020 2020  s_routeable.    
-00026760: 2020 2020 7365 6c66 2e69 735f 3674 6f34      self.is_6to4
-00026770: 203d 2069 735f 3674 6f34 0a20 2020 2020   = is_6to4.     
-00026780: 2020 2073 656c 662e 6973 5f74 6572 6564     self.is_tered
-00026790: 6f20 3d20 6973 5f74 6572 6564 6f0a 2020  o = is_teredo.  
-000267a0: 2020 2020 2020 7365 6c66 2e73 7562 6e65        self.subne
-000267b0: 7473 203d 2073 7562 6e65 7473 0a20 2020  ts = subnets.   
-000267c0: 2020 2020 2073 656c 662e 6973 5f69 7076       self.is_ipv
-000267d0: 3620 3d20 6973 5f69 7076 3620 6f72 2069  6 = is_ipv6 or i
-000267e0: 735f 6970 7634 2069 7320 4661 6c73 650a  s_ipv4 is False.
-000267f0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
-00026800: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
-00026810: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
-00026820: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
-00026830: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
-00026840: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
-00026850: 2020 2049 5041 6464 7265 7373 203d 2069     IPAddress = i
-00026860: 7061 6464 7265 7373 2e69 705f 6164 6472  paddress.ip_addr
-00026870: 6573 730a 2020 2020 2020 2020 4950 7636  ess.        IPv6
-00026880: 4164 6472 6573 7320 3d20 6970 6164 6472  Address = ipaddr
-00026890: 6573 732e 4950 7636 4164 6472 6573 730a  ess.IPv6Address.
-000268a0: 2020 2020 2020 2020 4950 7634 4164 6472          IPv4Addr
-000268b0: 6573 7320 3d20 6970 6164 6472 6573 732e  ess = ipaddress.
-000268c0: 4950 7634 4164 6472 6573 730a 0a20 2020  IPv4Address..   
-000268d0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-000268e0: 2020 2020 2020 6970 203d 2049 5041 6464        ip = IPAdd
-000268f0: 7265 7373 2874 6f5f 756e 6963 6f64 6528  ress(to_unicode(
-00026900: 7661 6c75 6529 290a 2020 2020 2020 2020  value)).        
-00026910: 6578 6365 7074 2056 616c 7565 4572 726f  except ValueErro
-00026920: 723a 0a20 2020 2020 2020 2020 2020 2072  r:.            r
-00026930: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00026940: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-00026950: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00026960: 6d65 7373 6167 6529 290a 0a20 2020 2020  message))..     
-00026970: 2020 2069 6620 7365 6c66 2e69 735f 6970     if self.is_ip
-00026980: 7634 2061 6e64 2069 7369 6e73 7461 6e63  v4 and isinstanc
-00026990: 6528 6970 2c20 4950 7636 4164 6472 6573  e(ip, IPv6Addres
-000269a0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
-000269b0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-000269c0: 4572 726f 7228 7365 6c66 2e74 7261 6e73  Error(self.trans
-000269d0: 6c61 746f 7228 7365 6c66 2e65 7272 6f72  lator(self.error
-000269e0: 5f6d 6573 7361 6765 2929 0a20 2020 2020  _message)).     
-000269f0: 2020 2065 6c69 6620 7365 6c66 2e69 735f     elif self.is_
-00026a00: 6970 7636 2061 6e64 2069 7369 6e73 7461  ipv6 and isinsta
-00026a10: 6e63 6528 6970 2c20 4950 7634 4164 6472  nce(ip, IPv4Addr
-00026a20: 6573 7329 3a0a 2020 2020 2020 2020 2020  ess):.          
-00026a30: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-00026a40: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
-00026a50: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
-00026a60: 6f72 5f6d 6573 7361 6765 2929 0a20 2020  or_message)).   
-00026a70: 2020 2020 2065 6c69 6620 7365 6c66 2e69       elif self.i
-00026a80: 735f 6970 7634 206f 7220 6973 696e 7374  s_ipv4 or isinst
-00026a90: 616e 6365 2869 702c 2049 5076 3441 6464  ance(ip, IPv4Add
-00026aa0: 7265 7373 293a 0a20 2020 2020 2020 2020  ress):.         
-00026ab0: 2020 2072 6574 7572 6e20 4953 5f49 5056     return IS_IPV
-00026ac0: 3428 0a20 2020 2020 2020 2020 2020 2020  4(.             
-00026ad0: 2020 206d 696e 6970 3d73 656c 662e 6d69     minip=self.mi
-00026ae0: 6e69 702c 0a20 2020 2020 2020 2020 2020  nip,.           
-00026af0: 2020 2020 206d 6178 6970 3d73 656c 662e       maxip=self.
-00026b00: 6d61 7869 702c 0a20 2020 2020 2020 2020  maxip,.         
-00026b10: 2020 2020 2020 2069 6e76 6572 743d 7365         invert=se
-00026b20: 6c66 2e69 6e76 6572 742c 0a20 2020 2020  lf.invert,.     
-00026b30: 2020 2020 2020 2020 2020 2069 735f 6c6f             is_lo
-00026b40: 6361 6c68 6f73 743d 7365 6c66 2e69 735f  calhost=self.is_
-00026b50: 6c6f 6361 6c68 6f73 742c 0a20 2020 2020  localhost,.     
-00026b60: 2020 2020 2020 2020 2020 2069 735f 7072             is_pr
-00026b70: 6976 6174 653d 7365 6c66 2e69 735f 7072  ivate=self.is_pr
-00026b80: 6976 6174 652c 0a20 2020 2020 2020 2020  ivate,.         
-00026b90: 2020 2020 2020 2069 735f 6175 746f 6d61         is_automa
-00026ba0: 7469 633d 7365 6c66 2e69 735f 6175 746f  tic=self.is_auto
-00026bb0: 6d61 7469 632c 0a20 2020 2020 2020 2020  matic,.         
-00026bc0: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
-00026bd0: 7361 6765 3d73 656c 662e 6572 726f 725f  sage=self.error_
-00026be0: 6d65 7373 6167 652c 0a20 2020 2020 2020  message,.       
-00026bf0: 2020 2020 2029 2e76 616c 6964 6174 6528       ).validate(
-00026c00: 7661 6c75 652c 2072 6563 6f72 645f 6964  value, record_id
-00026c10: 290a 2020 2020 2020 2020 656c 6966 2073  ).        elif s
-00026c20: 656c 662e 6973 5f69 7076 3620 6f72 2069  elf.is_ipv6 or i
-00026c30: 7369 6e73 7461 6e63 6528 6970 2c20 4950  sinstance(ip, IP
-00026c40: 7636 4164 6472 6573 7329 3a0a 2020 2020  v6Address):.    
-00026c50: 2020 2020 2020 2020 7265 7475 726e 2049          return I
-00026c60: 535f 4950 5636 280a 2020 2020 2020 2020  S_IPV6(.        
-00026c70: 2020 2020 2020 2020 6973 5f70 7269 7661          is_priva
-00026c80: 7465 3d73 656c 662e 6973 5f70 7269 7661  te=self.is_priva
-00026c90: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
-00026ca0: 2020 2020 6973 5f6c 696e 6b5f 6c6f 6361      is_link_loca
-00026cb0: 6c3d 7365 6c66 2e69 735f 6c69 6e6b 5f6c  l=self.is_link_l
-00026cc0: 6f63 616c 2c0a 2020 2020 2020 2020 2020  ocal,.          
-00026cd0: 2020 2020 2020 6973 5f72 6573 6572 7665        is_reserve
-00026ce0: 643d 7365 6c66 2e69 735f 7265 7365 7276  d=self.is_reserv
-00026cf0: 6564 2c0a 2020 2020 2020 2020 2020 2020  ed,.            
-00026d00: 2020 2020 6973 5f6d 756c 7469 6361 7374      is_multicast
-00026d10: 3d73 656c 662e 6973 5f6d 756c 7469 6361  =self.is_multica
-00026d20: 7374 2c0a 2020 2020 2020 2020 2020 2020  st,.            
-00026d30: 2020 2020 6973 5f72 6f75 7465 6162 6c65      is_routeable
-00026d40: 3d73 656c 662e 6973 5f72 6f75 7465 6162  =self.is_routeab
-00026d50: 6c65 2c0a 2020 2020 2020 2020 2020 2020  le,.            
-00026d60: 2020 2020 6973 5f36 746f 343d 7365 6c66      is_6to4=self
-00026d70: 2e69 735f 3674 6f34 2c0a 2020 2020 2020  .is_6to4,.      
-00026d80: 2020 2020 2020 2020 2020 6973 5f74 6572            is_ter
-00026d90: 6564 6f3d 7365 6c66 2e69 735f 7465 7265  edo=self.is_tere
-00026da0: 646f 2c0a 2020 2020 2020 2020 2020 2020  do,.            
-00026db0: 2020 2020 7375 626e 6574 733d 7365 6c66      subnets=self
-00026dc0: 2e73 7562 6e65 7473 2c0a 2020 2020 2020  .subnets,.      
-00026dd0: 2020 2020 2020 2020 2020 6572 726f 725f            error_
-00026de0: 6d65 7373 6167 653d 7365 6c66 2e65 7272  message=self.err
-00026df0: 6f72 5f6d 6573 7361 6765 2c0a 2020 2020  or_message,.    
-00026e00: 2020 2020 2020 2020 292e 7661 6c69 6461          ).valida
-00026e10: 7465 2876 616c 7565 2c20 7265 636f 7264  te(value, record
-00026e20: 5f69 6429 0a20 2020 2020 2020 2065 6c73  _id).        els
-00026e30: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00026e40: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00026e50: 7272 6f72 2873 656c 662e 7472 616e 736c  rror(self.transl
-00026e60: 6174 6f72 2873 656c 662e 6572 726f 725f  ator(self.error_
-00026e70: 6d65 7373 6167 6529 290a                 message)).
+0001ec70: 2020 2073 656c 662e 7472 616e 736c 6174     self.translat
+0001ec80: 6f72 2822 4d75 7374 2069 6e63 6c75 6465  or("Must include
+0001ec90: 2061 7420 6c65 6173 7420 2573 2075 7070   at least %s upp
+0001eca0: 6572 6361 7365 2229 0a20 2020 2020 2020  ercase").       
+0001ecb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ecc0: 2025 2073 7472 2873 656c 662e 7570 7065   % str(self.uppe
+0001ecd0: 7229 0a20 2020 2020 2020 2020 2020 2020  r).             
+0001ece0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001ecf0: 2020 2020 2065 6c69 6620 7365 6c66 2e75       elif self.u
+0001ed00: 7070 6572 203d 3d20 3020 616e 6420 7365  pper == 0 and se
+0001ed10: 6c66 2e75 7070 6572 2069 7320 6e6f 7420  lf.upper is not 
+0001ed20: 4661 6c73 653a 0a20 2020 2020 2020 2020  False:.         
+0001ed30: 2020 2020 2020 2069 6620 6c65 6e28 616c         if len(al
+0001ed40: 6c5f 7570 7065 7229 203e 2030 3a0a 2020  l_upper) > 0:.  
+0001ed50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ed60: 2020 6661 696c 7572 6573 2e61 7070 656e    failures.appen
+0001ed70: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
+0001ed80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001ed90: 7472 616e 736c 6174 6f72 2822 4d61 7920  translator("May 
+0001eda0: 6e6f 7420 696e 636c 7564 6520 616e 7920  not include any 
+0001edb0: 7570 7065 7263 6173 6520 6c65 7474 6572  uppercase letter
+0001edc0: 7322 290a 2020 2020 2020 2020 2020 2020  s").            
+0001edd0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001ede0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+0001edf0: 7365 6c66 2e6c 6f77 6572 2c20 696e 7429  self.lower, int)
+0001ee00: 3a0a 2020 2020 2020 2020 2020 2020 616c  :.            al
+0001ee10: 6c5f 6c6f 7765 7220 3d20 7265 2e66 696e  l_lower = re.fin
+0001ee20: 6461 6c6c 2822 5b61 2d7a 5d22 2c20 7661  dall("[a-z]", va
+0001ee30: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+0001ee40: 2069 6620 7365 6c66 2e6c 6f77 6572 203e   if self.lower >
+0001ee50: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
+0001ee60: 2020 2020 6966 206e 6f74 206c 656e 2861      if not len(a
+0001ee70: 6c6c 5f6c 6f77 6572 2920 3e3d 2073 656c  ll_lower) >= sel
+0001ee80: 662e 6c6f 7765 723a 0a20 2020 2020 2020  f.lower:.       
+0001ee90: 2020 2020 2020 2020 2020 2020 2066 6169               fai
+0001eea0: 6c75 7265 732e 6170 7065 6e64 280a 2020  lures.append(.  
+0001eeb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eec0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0001eed0: 6c61 746f 7228 224d 7573 7420 696e 636c  lator("Must incl
+0001eee0: 7564 6520 6174 206c 6561 7374 2025 7320  ude at least %s 
+0001eef0: 6c6f 7765 7263 6173 6522 290a 2020 2020  lowercase").    
+0001ef00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ef10: 2020 2020 2520 7374 7228 7365 6c66 2e6c      % str(self.l
+0001ef20: 6f77 6572 290a 2020 2020 2020 2020 2020  ower).          
+0001ef30: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001ef40: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+0001ef50: 662e 6c6f 7765 7220 3d3d 2030 2061 6e64  f.lower == 0 and
+0001ef60: 2073 656c 662e 6c6f 7765 7220 6973 206e   self.lower is n
+0001ef70: 6f74 2046 616c 7365 3a0a 2020 2020 2020  ot False:.      
+0001ef80: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0001ef90: 2861 6c6c 5f6c 6f77 6572 2920 3e20 303a  (all_lower) > 0:
+0001efa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001efb0: 2020 2020 2066 6169 6c75 7265 732e 6170       failures.ap
+0001efc0: 7065 6e64 280a 2020 2020 2020 2020 2020  pend(.          
+0001efd0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0001efe0: 6c66 2e74 7261 6e73 6c61 746f 7228 224d  lf.translator("M
+0001eff0: 6179 206e 6f74 2069 6e63 6c75 6465 2061  ay not include a
+0001f000: 6e79 206c 6f77 6572 6361 7365 206c 6574  ny lowercase let
+0001f010: 7465 7273 2229 0a20 2020 2020 2020 2020  ters").         
+0001f020: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0001f030: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0001f040: 6365 2873 656c 662e 6e75 6d62 6572 2c20  ce(self.number, 
+0001f050: 696e 7429 3a0a 2020 2020 2020 2020 2020  int):.          
+0001f060: 2020 616c 6c5f 6e75 6d62 6572 203d 2072    all_number = r
+0001f070: 652e 6669 6e64 616c 6c28 225b 302d 395d  e.findall("[0-9]
+0001f080: 222c 2076 616c 7565 290a 2020 2020 2020  ", value).      
+0001f090: 2020 2020 2020 6966 2073 656c 662e 6e75        if self.nu
+0001f0a0: 6d62 6572 203e 2030 3a0a 2020 2020 2020  mber > 0:.      
+0001f0b0: 2020 2020 2020 2020 2020 6e75 6d62 6572            number
+0001f0c0: 7320 3d20 226e 756d 6265 7222 0a20 2020  s = "number".   
+0001f0d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001f0e0: 7365 6c66 2e6e 756d 6265 7220 3e20 313a  self.number > 1:
+0001f0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f100: 2020 2020 206e 756d 6265 7273 203d 2022       numbers = "
+0001f110: 6e75 6d62 6572 7322 0a20 2020 2020 2020  numbers".       
+0001f120: 2020 2020 2020 2020 206e 756d 6265 7273           numbers
+0001f130: 203d 2073 656c 662e 7472 616e 736c 6174   = self.translat
+0001f140: 6f72 286e 756d 6265 7273 290a 2020 2020  or(numbers).    
+0001f150: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001f160: 6f74 206c 656e 2861 6c6c 5f6e 756d 6265  ot len(all_numbe
+0001f170: 7229 203e 3d20 7365 6c66 2e6e 756d 6265  r) >= self.numbe
+0001f180: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+0001f190: 2020 2020 2020 2066 6169 6c75 7265 732e         failures.
+0001f1a0: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
+0001f1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f1c0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+0001f1d0: 224d 7573 7420 696e 636c 7564 6520 6174  "Must include at
+0001f1e0: 206c 6561 7374 2025 7320 2573 2229 0a20   least %s %s"). 
+0001f1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f200: 2020 2020 2020 2025 2028 7374 7228 7365         % (str(se
+0001f210: 6c66 2e6e 756d 6265 7229 2c20 6e75 6d62  lf.number), numb
+0001f220: 6572 7329 0a20 2020 2020 2020 2020 2020  ers).           
+0001f230: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001f240: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+0001f250: 2e6e 756d 6265 7220 3d3d 2030 2061 6e64  .number == 0 and
+0001f260: 2073 656c 662e 6e75 6d62 6572 2069 7320   self.number is 
+0001f270: 6e6f 7420 4661 6c73 653a 0a20 2020 2020  not False:.     
+0001f280: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+0001f290: 6e28 616c 6c5f 6e75 6d62 6572 2920 3e20  n(all_number) > 
+0001f2a0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+0001f2b0: 2020 2020 2020 2066 6169 6c75 7265 732e         failures.
+0001f2c0: 6170 7065 6e64 2873 656c 662e 7472 616e  append(self.tran
+0001f2d0: 736c 6174 6f72 2822 4d61 7920 6e6f 7420  slator("May not 
+0001f2e0: 696e 636c 7564 6520 616e 7920 6e75 6d62  include any numb
+0001f2f0: 6572 7322 2929 0a20 2020 2020 2020 2069  ers")).        i
+0001f300: 6620 6c65 6e28 6661 696c 7572 6573 2920  f len(failures) 
+0001f310: 3d3d 2030 3a0a 2020 2020 2020 2020 2020  == 0:.          
+0001f320: 2020 7265 7475 726e 2076 616c 7565 0a20    return value. 
+0001f330: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
+0001f340: 6c66 2e65 7272 6f72 5f6d 6573 7361 6765  lf.error_message
+0001f350: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0001f360: 2073 656c 662e 6573 7472 696e 673a 0a20   self.estring:. 
+0001f370: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001f380: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+0001f390: 7272 6f72 2822 7c22 2e6a 6f69 6e28 6d61  rror("|".join(ma
+0001f3a0: 7028 7374 722c 2066 6169 6c75 7265 7329  p(str, failures)
+0001f3b0: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
+0001f3c0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
+0001f3d0: 7272 6f72 2822 2c20 222e 6a6f 696e 2866  rror(", ".join(f
+0001f3e0: 6169 6c75 7265 7329 290a 2020 2020 2020  ailures)).      
+0001f3f0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0001f400: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+0001f410: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+0001f420: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+0001f430: 7272 6f72 5f6d 6573 7361 6765 2929 0a0a  rror_message))..
+0001f440: 0a63 6c61 7373 2049 535f 494d 4147 4528  .class IS_IMAGE(
+0001f450: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
+0001f460: 2222 220a 2020 2020 4368 6563 6b73 2069  """.    Checks i
+0001f470: 6620 6669 6c65 2075 706c 6f61 6465 6420  f file uploaded 
+0001f480: 7468 726f 7567 6820 6669 6c65 2069 6e70  through file inp
+0001f490: 7574 2077 6173 2073 6176 6564 2069 6e20  ut was saved in 
+0001f4a0: 6f6e 6520 6f66 2073 656c 6563 7465 640a  one of selected.
+0001f4b0: 2020 2020 696d 6167 6520 666f 726d 6174      image format
+0001f4c0: 7320 616e 6420 6861 7320 6469 6d65 6e73  s and has dimens
+0001f4d0: 696f 6e73 2028 7769 6474 6820 616e 6420  ions (width and 
+0001f4e0: 6865 6967 6874 2920 7769 7468 696e 2067  height) within g
+0001f4f0: 6976 656e 2062 6f75 6e64 6172 6965 732e  iven boundaries.
+0001f500: 0a0a 2020 2020 446f 6573 202a 6e6f 742a  ..    Does *not*
+0001f510: 2063 6865 636b 2066 6f72 206d 6178 696d   check for maxim
+0001f520: 756d 2066 696c 6520 7369 7a65 2028 7573  um file size (us
+0001f530: 6520 4953 5f4c 454e 4754 4820 666f 7220  e IS_LENGTH for 
+0001f540: 7468 6174 292e 2052 6574 7572 6e73 0a20  that). Returns. 
+0001f550: 2020 2076 616c 6964 6174 696f 6e20 6661     validation fa
+0001f560: 696c 7572 6520 6966 206e 6f20 6461 7461  ilure if no data
+0001f570: 2077 6173 2075 706c 6f61 6465 642e 0a0a   was uploaded...
+0001f580: 2020 2020 5375 7070 6f72 7465 6420 6669      Supported fi
+0001f590: 6c65 2066 6f72 6d61 7473 3a20 424d 502c  le formats: BMP,
+0001f5a0: 2047 4946 2c20 4a50 4547 2c20 504e 472e   GIF, JPEG, PNG.
+0001f5b0: 0a0a 2020 2020 436f 6465 2070 6172 7473  ..    Code parts
+0001f5c0: 2074 616b 656e 2066 726f 6d0a 2020 2020   taken from.    
+0001f5d0: 6874 7470 3a2f 2f6d 6169 6c2e 7079 7468  http://mail.pyth
+0001f5e0: 6f6e 2e6f 7267 2f70 6970 6572 6d61 696c  on.org/pipermail
+0001f5f0: 2f70 7974 686f 6e2d 6c69 7374 2f32 3030  /python-list/200
+0001f600: 372d 4a75 6e65 2f36 3137 3132 362e 6874  7-June/617126.ht
+0001f610: 6d6c 0a0a 2020 2020 4172 6773 3a0a 2020  ml..    Args:.  
+0001f620: 2020 2020 2020 6578 7465 6e73 696f 6e73        extensions
+0001f630: 3a20 6974 6572 6162 6c65 2063 6f6e 7461  : iterable conta
+0001f640: 696e 696e 6720 616c 6c6f 7765 6420 2a6c  ining allowed *l
+0001f650: 6f77 6572 6361 7365 2a20 696d 6167 6520  owercase* image 
+0001f660: 6669 6c65 2065 7874 656e 7369 6f6e 730a  file extensions.
+0001f670: 2020 2020 2020 2020 2827 6a70 6727 2065          ('jpg' e
+0001f680: 7874 656e 7369 6f6e 206f 6620 7570 6c6f  xtension of uplo
+0001f690: 6164 6564 2066 696c 6520 636f 756e 7473  aded file counts
+0001f6a0: 2061 7320 276a 7065 6727 290a 2020 2020   as 'jpeg').    
+0001f6b0: 2020 2020 6d61 7873 697a 653a 2069 7465      maxsize: ite
+0001f6c0: 7261 626c 6520 636f 6e74 6169 6e69 6e67  rable containing
+0001f6d0: 206d 6178 696d 756d 2077 6964 7468 2061   maximum width a
+0001f6e0: 6e64 2068 6569 6768 7420 6f66 2074 6865  nd height of the
+0001f6f0: 2069 6d61 6765 0a20 2020 2020 2020 206d   image.        m
+0001f700: 696e 7369 7a65 3a20 6974 6572 6162 6c65  insize: iterable
+0001f710: 2063 6f6e 7461 696e 696e 6720 6d69 6e69   containing mini
+0001f720: 6d75 6d20 7769 6474 6820 616e 6420 6865  mum width and he
+0001f730: 6967 6874 206f 6620 7468 6520 696d 6167  ight of the imag
+0001f740: 650a 2020 2020 2020 2020 6173 7065 6374  e.        aspect
+0001f750: 7261 7469 6f3a 2069 7465 7261 626c 6520  ratio: iterable 
+0001f760: 636f 6e74 6169 6e69 6e67 2074 6172 6765  containing targe
+0001f770: 7420 6173 7065 6374 2072 6174 696f 0a0a  t aspect ratio..
+0001f780: 2020 2020 5573 6520 282d 312c 202d 3129      Use (-1, -1)
+0001f790: 2061 7320 6d69 6e73 697a 6520 746f 2070   as minsize to p
+0001f7a0: 6173 7320 696d 6167 6520 7369 7a65 2063  ass image size c
+0001f7b0: 6865 636b 2e0a 2020 2020 5573 6520 282d  heck..    Use (-
+0001f7c0: 312c 202d 3129 2061 7320 6173 7065 6374  1, -1) as aspect
+0001f7d0: 7261 7469 6f20 746f 2070 6173 7320 6173  ratio to pass as
+0001f7e0: 7065 6374 2072 6174 696f 2063 6865 636b  pect ratio check
+0001f7f0: 2e0a 0a20 2020 2045 7861 6d70 6c65 733a  ...    Examples:
+0001f800: 0a20 2020 2020 2020 2043 6865 636b 2069  .        Check i
+0001f810: 6620 7570 6c6f 6164 6564 2066 696c 6520  f uploaded file 
+0001f820: 6973 2069 6e20 616e 7920 6f66 2073 7570  is in any of sup
+0001f830: 706f 7274 6564 2069 6d61 6765 2066 6f72  ported image for
+0001f840: 6d61 7473 3a0a 0a20 2020 2020 2020 2020  mats:..         
+0001f850: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+0001f860: 6669 6c65 272c 205f 6e61 6d65 3d27 6e61  file', _name='na
+0001f870: 6d65 272c 2072 6571 7569 7265 733d 4953  me', requires=IS
+0001f880: 5f49 4d41 4745 2829 290a 0a20 2020 2020  _IMAGE())..     
+0001f890: 2020 2043 6865 636b 2069 6620 7570 6c6f     Check if uplo
+0001f8a0: 6164 6564 2066 696c 6520 6973 2065 6974  aded file is eit
+0001f8b0: 6865 7220 4a50 4547 206f 7220 504e 473a  her JPEG or PNG:
+0001f8c0: 0a0a 2020 2020 2020 2020 2020 2020 494e  ..            IN
+0001f8d0: 5055 5428 5f74 7970 653d 2766 696c 6527  PUT(_type='file'
+0001f8e0: 2c20 5f6e 616d 653d 276e 616d 6527 2c0a  , _name='name',.
+0001f8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f900: 7265 7175 6972 6573 3d49 535f 494d 4147  requires=IS_IMAG
+0001f910: 4528 6578 7465 6e73 696f 6e73 3d28 276a  E(extensions=('j
+0001f920: 7065 6727 2c20 2770 6e67 2729 2929 0a0a  peg', 'png')))..
+0001f930: 2020 2020 2020 2020 4368 6563 6b20 6966          Check if
+0001f940: 2075 706c 6f61 6465 6420 6669 6c65 2069   uploaded file i
+0001f950: 7320 504e 4720 7769 7468 206d 6178 696d  s PNG with maxim
+0001f960: 756d 2073 697a 6520 6f66 2032 3030 7832  um size of 200x2
+0001f970: 3030 2070 6978 656c 733a 0a0a 2020 2020  00 pixels:..    
+0001f980: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+0001f990: 7970 653d 2766 696c 6527 2c20 5f6e 616d  ype='file', _nam
+0001f9a0: 653d 276e 616d 6527 2c0a 2020 2020 2020  e='name',.      
+0001f9b0: 2020 2020 2020 2020 2020 7265 7175 6972            requir
+0001f9c0: 6573 3d49 535f 494d 4147 4528 6578 7465  es=IS_IMAGE(exte
+0001f9d0: 6e73 696f 6e73 3d28 2770 6e67 2729 2c20  nsions=('png'), 
+0001f9e0: 6d61 7873 697a 653d 2832 3030 2c20 3230  maxsize=(200, 20
+0001f9f0: 3029 2929 0a0a 2020 2020 2020 2020 4368  0)))..        Ch
+0001fa00: 6563 6b20 6966 2075 706c 6f61 6465 6420  eck if uploaded 
+0001fa10: 6669 6c65 2068 6173 2061 2031 363a 3920  file has a 16:9 
+0001fa20: 6173 7065 6374 2072 6174 696f 3a0a 0a20  aspect ratio:.. 
+0001fa30: 2020 2020 2020 2020 2020 2049 4e50 5554             INPUT
+0001fa40: 285f 7479 7065 3d27 6669 6c65 272c 205f  (_type='file', _
+0001fa50: 6e61 6d65 3d27 6e61 6d65 272c 0a20 2020  name='name',.   
+0001fa60: 2020 2020 2020 2020 2020 2020 2072 6571               req
+0001fa70: 7569 7265 733d 4953 5f49 4d41 4745 2861  uires=IS_IMAGE(a
+0001fa80: 7370 6563 7472 6174 696f 3d28 3136 2c20  spectratio=(16, 
+0001fa90: 3929 2929 0a20 2020 2022 2222 0a0a 2020  9))).    """..  
+0001faa0: 2020 6465 6620 5f5f 696e 6974 5f5f 280a    def __init__(.
+0001fab0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+0001fac0: 2020 2020 2020 6578 7465 6e73 696f 6e73        extensions
+0001fad0: 3d28 2262 6d70 222c 2022 6769 6622 2c20  =("bmp", "gif", 
+0001fae0: 226a 7065 6722 2c20 2270 6e67 2229 2c0a  "jpeg", "png"),.
+0001faf0: 2020 2020 2020 2020 6d61 7873 697a 653d          maxsize=
+0001fb00: 2831 3030 3030 2c20 3130 3030 3029 2c0a  (10000, 10000),.
+0001fb10: 2020 2020 2020 2020 6d69 6e73 697a 653d          minsize=
+0001fb20: 2830 2c20 3029 2c0a 2020 2020 2020 2020  (0, 0),.        
+0001fb30: 6173 7065 6374 7261 7469 6f3d 282d 312c  aspectratio=(-1,
+0001fb40: 202d 3129 2c0a 2020 2020 2020 2020 6572   -1),.        er
+0001fb50: 726f 725f 6d65 7373 6167 653d 2249 6e76  ror_message="Inv
+0001fb60: 616c 6964 2069 6d61 6765 222c 0a20 2020  alid image",.   
+0001fb70: 2029 3a0a 2020 2020 2020 2020 7365 6c66   ):.        self
+0001fb80: 2e65 7874 656e 7369 6f6e 7320 3d20 6578  .extensions = ex
+0001fb90: 7465 6e73 696f 6e73 0a20 2020 2020 2020  tensions.       
+0001fba0: 2073 656c 662e 6d61 7873 697a 6520 3d20   self.maxsize = 
+0001fbb0: 6d61 7873 697a 650a 2020 2020 2020 2020  maxsize.        
+0001fbc0: 7365 6c66 2e6d 696e 7369 7a65 203d 206d  self.minsize = m
+0001fbd0: 696e 7369 7a65 0a20 2020 2020 2020 2073  insize.        s
+0001fbe0: 656c 662e 6173 7065 6374 7261 7469 6f20  elf.aspectratio 
+0001fbf0: 3d20 6173 7065 6374 7261 7469 6f0a 2020  = aspectratio.  
+0001fc00: 2020 2020 2020 7365 6c66 2e65 7272 6f72        self.error
+0001fc10: 5f6d 6573 7361 6765 203d 2065 7272 6f72  _message = error
+0001fc20: 5f6d 6573 7361 6765 0a0a 2020 2020 6465  _message..    de
+0001fc30: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+0001fc40: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+0001fc50: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+0001fc60: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+0001fc70: 2020 6578 7465 6e73 696f 6e20 3d20 7661    extension = va
+0001fc80: 6c75 652e 6669 6c65 6e61 6d65 2e72 6669  lue.filename.rfi
+0001fc90: 6e64 2822 2e22 290a 2020 2020 2020 2020  nd(".").        
+0001fca0: 2020 2020 6173 7365 7274 2065 7874 656e      assert exten
+0001fcb0: 7369 6f6e 203e 3d20 300a 2020 2020 2020  sion >= 0.      
+0001fcc0: 2020 2020 2020 6578 7465 6e73 696f 6e20        extension 
+0001fcd0: 3d20 7661 6c75 652e 6669 6c65 6e61 6d65  = value.filename
+0001fce0: 5b65 7874 656e 7369 6f6e 202b 2031 203a  [extension + 1 :
+0001fcf0: 5d2e 6c6f 7765 7228 290a 2020 2020 2020  ].lower().      
+0001fd00: 2020 2020 2020 6966 2065 7874 656e 7369        if extensi
+0001fd10: 6f6e 203d 3d20 226a 7067 223a 0a20 2020  on == "jpg":.   
+0001fd20: 2020 2020 2020 2020 2020 2020 2065 7874               ext
+0001fd30: 656e 7369 6f6e 203d 2022 6a70 6567 220a  ension = "jpeg".
+0001fd40: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+0001fd50: 7274 2065 7874 656e 7369 6f6e 2069 6e20  rt extension in 
+0001fd60: 7365 6c66 2e65 7874 656e 7369 6f6e 730a  self.extensions.
+0001fd70: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+0001fd80: 7874 656e 7369 6f6e 203d 3d20 2262 6d70  xtension == "bmp
+0001fd90: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+0001fda0: 2020 2077 6964 7468 2c20 6865 6967 6874     width, height
+0001fdb0: 203d 2073 656c 662e 5f5f 626d 7028 7661   = self.__bmp(va
+0001fdc0: 6c75 652e 6669 6c65 290a 2020 2020 2020  lue.file).      
+0001fdd0: 2020 2020 2020 656c 6966 2065 7874 656e        elif exten
+0001fde0: 7369 6f6e 203d 3d20 2267 6966 223a 0a20  sion == "gif":. 
+0001fdf0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
+0001fe00: 6964 7468 2c20 6865 6967 6874 203d 2073  idth, height = s
+0001fe10: 656c 662e 5f5f 6769 6628 7661 6c75 652e  elf.__gif(value.
+0001fe20: 6669 6c65 290a 2020 2020 2020 2020 2020  file).          
+0001fe30: 2020 656c 6966 2065 7874 656e 7369 6f6e    elif extension
+0001fe40: 203d 3d20 226a 7065 6722 3a0a 2020 2020   == "jpeg":.    
+0001fe50: 2020 2020 2020 2020 2020 2020 7769 6474              widt
+0001fe60: 682c 2068 6569 6768 7420 3d20 7365 6c66  h, height = self
+0001fe70: 2e5f 5f6a 7065 6728 7661 6c75 652e 6669  .__jpeg(value.fi
+0001fe80: 6c65 290a 2020 2020 2020 2020 2020 2020  le).            
+0001fe90: 656c 6966 2065 7874 656e 7369 6f6e 203d  elif extension =
+0001fea0: 3d20 2270 6e67 223a 0a20 2020 2020 2020  = "png":.       
+0001feb0: 2020 2020 2020 2020 2077 6964 7468 2c20           width, 
+0001fec0: 6865 6967 6874 203d 2073 656c 662e 5f5f  height = self.__
+0001fed0: 706e 6728 7661 6c75 652e 6669 6c65 290a  png(value.file).
+0001fee0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001fef0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001ff00: 2020 7769 6474 6820 3d20 2d31 0a20 2020    width = -1.   
+0001ff10: 2020 2020 2020 2020 2020 2020 2068 6569               hei
+0001ff20: 6768 7420 3d20 2d31 0a0a 2020 2020 2020  ght = -1..      
+0001ff30: 2020 2020 2020 6173 7365 7274 2028 0a20        assert (. 
+0001ff40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001ff50: 656c 662e 6d69 6e73 697a 655b 305d 203c  elf.minsize[0] <
+0001ff60: 3d20 7769 6474 6820 3c3d 2073 656c 662e  = width <= self.
+0001ff70: 6d61 7873 697a 655b 305d 0a20 2020 2020  maxsize[0].     
+0001ff80: 2020 2020 2020 2020 2020 2061 6e64 2073             and s
+0001ff90: 656c 662e 6d69 6e73 697a 655b 315d 203c  elf.minsize[1] <
+0001ffa0: 3d20 6865 6967 6874 203c 3d20 7365 6c66  = height <= self
+0001ffb0: 2e6d 6178 7369 7a65 5b31 5d0a 2020 2020  .maxsize[1].    
+0001ffc0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0001ffd0: 2020 2020 2020 2069 6620 7365 6c66 2e61         if self.a
+0001ffe0: 7370 6563 7472 6174 696f 203e 2028 2d31  spectratio > (-1
+0001fff0: 2c20 2d31 293a 0a20 2020 2020 2020 2020  , -1):.         
+00020000: 2020 2020 2020 2074 6172 6765 745f 7261         target_ra
+00020010: 7469 6f20 3d20 2831 2e30 202a 2073 656c  tio = (1.0 * sel
+00020020: 662e 6173 7065 6374 7261 7469 6f5b 315d  f.aspectratio[1]
+00020030: 2920 2f20 7365 6c66 2e61 7370 6563 7472  ) / self.aspectr
+00020040: 6174 696f 5b30 5d0a 2020 2020 2020 2020  atio[0].        
+00020050: 2020 2020 2020 2020 6163 7475 616c 5f72          actual_r
+00020060: 6174 696f 203d 2028 312e 3020 2a20 6865  atio = (1.0 * he
+00020070: 6967 6874 2920 2f20 7769 6474 680a 0a20  ight) / width.. 
+00020080: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00020090: 7373 6572 7420 6163 7475 616c 5f72 6174  ssert actual_rat
+000200a0: 696f 203d 3d20 7461 7267 6574 5f72 6174  io == target_rat
+000200b0: 696f 0a0a 2020 2020 2020 2020 2020 2020  io..            
+000200c0: 7661 6c75 652e 6669 6c65 2e73 6565 6b28  value.file.seek(
+000200d0: 3029 0a20 2020 2020 2020 2020 2020 2072  0).            r
+000200e0: 6574 7572 6e20 7661 6c75 650a 2020 2020  eturn value.    
+000200f0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00020100: 7469 6f6e 2061 7320 653a 0a20 2020 2020  tion as e:.     
+00020110: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
+00020120: 6964 6174 696f 6e45 7272 6f72 2873 656c  idationError(sel
+00020130: 662e 7472 616e 736c 6174 6f72 2873 656c  f.translator(sel
+00020140: 662e 6572 726f 725f 6d65 7373 6167 6529  f.error_message)
+00020150: 290a 0a20 2020 2064 6566 205f 5f62 6d70  )..    def __bmp
+00020160: 2873 656c 662c 2073 7472 6561 6d29 3a0a  (self, stream):.
+00020170: 2020 2020 2020 2020 6966 2073 7472 6561          if strea
+00020180: 6d2e 7265 6164 2832 2920 3d3d 2062 2242  m.read(2) == b"B
+00020190: 4d22 3a0a 2020 2020 2020 2020 2020 2020  M":.            
+000201a0: 7374 7265 616d 2e72 6561 6428 3136 290a  stream.read(16).
+000201b0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000201c0: 726e 2073 7472 7563 742e 756e 7061 636b  rn struct.unpack
+000201d0: 2822 3c4c 4c22 2c20 7374 7265 616d 2e72  ("<LL", stream.r
+000201e0: 6561 6428 3829 290a 2020 2020 2020 2020  ead(8)).        
+000201f0: 7265 7475 726e 2028 2d31 2c20 2d31 290a  return (-1, -1).
+00020200: 0a20 2020 2064 6566 205f 5f67 6966 2873  .    def __gif(s
+00020210: 656c 662c 2073 7472 6561 6d29 3a0a 2020  elf, stream):.  
+00020220: 2020 2020 2020 6966 2073 7472 6561 6d2e        if stream.
+00020230: 7265 6164 2836 2920 696e 2028 6222 4749  read(6) in (b"GI
+00020240: 4638 3761 222c 2062 2247 4946 3839 6122  F87a", b"GIF89a"
+00020250: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+00020260: 7472 6561 6d20 3d20 7374 7265 616d 2e72  tream = stream.r
+00020270: 6561 6428 3529 0a20 2020 2020 2020 2020  ead(5).         
+00020280: 2020 2069 6620 6c65 6e28 7374 7265 616d     if len(stream
+00020290: 2920 3d3d 2035 3a0a 2020 2020 2020 2020  ) == 5:.        
+000202a0: 2020 2020 2020 2020 7265 7475 726e 2074          return t
+000202b0: 7570 6c65 2873 7472 7563 742e 756e 7061  uple(struct.unpa
+000202c0: 636b 2822 3c48 4842 222c 2073 7472 6561  ck("<HHB", strea
+000202d0: 6d29 5b3a 2d31 5d29 0a20 2020 2020 2020  m)[:-1]).       
+000202e0: 2072 6574 7572 6e20 282d 312c 202d 3129   return (-1, -1)
+000202f0: 0a0a 2020 2020 6465 6620 5f5f 6a70 6567  ..    def __jpeg
+00020300: 2873 656c 662c 2073 7472 6561 6d29 3a0a  (self, stream):.
+00020310: 2020 2020 2020 2020 6966 2073 7472 6561          if strea
+00020320: 6d2e 7265 6164 2832 2920 3d3d 2062 225c  m.read(2) == b"\
+00020330: 7846 465c 7844 3822 3a0a 2020 2020 2020  xFF\xD8":.      
+00020340: 2020 2020 2020 7768 696c 6520 5472 7565        while True
+00020350: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020360: 2020 286d 6172 6b65 722c 2063 6f64 652c    (marker, code,
+00020370: 206c 656e 6774 6829 203d 2073 7472 7563   length) = struc
+00020380: 742e 756e 7061 636b 2822 2142 4248 222c  t.unpack("!BBH",
+00020390: 2073 7472 6561 6d2e 7265 6164 2834 2929   stream.read(4))
+000203a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000203b0: 2069 6620 6d61 726b 6572 2021 3d20 3078   if marker != 0x
+000203c0: 4646 3a0a 2020 2020 2020 2020 2020 2020  FF:.            
+000203d0: 2020 2020 2020 2020 6272 6561 6b0a 2020          break.  
+000203e0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000203f0: 6966 2063 6f64 6520 3e3d 2030 7843 3020  if code >= 0xC0 
+00020400: 616e 6420 636f 6465 203c 3d20 3078 4333  and code <= 0xC3
+00020410: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00020420: 2020 2020 2020 7265 7475 726e 2074 7570        return tup
+00020430: 6c65 2872 6576 6572 7365 6428 7374 7275  le(reversed(stru
+00020440: 6374 2e75 6e70 6163 6b28 2221 7848 4822  ct.unpack("!xHH"
+00020450: 2c20 7374 7265 616d 2e72 6561 6428 3529  , stream.read(5)
+00020460: 2929 290a 2020 2020 2020 2020 2020 2020  ))).            
+00020470: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00020480: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00020490: 7265 616d 2e72 6561 6428 6c65 6e67 7468  ream.read(length
+000204a0: 202d 2032 290a 2020 2020 2020 2020 7265   - 2).        re
+000204b0: 7475 726e 2028 2d31 2c20 2d31 290a 0a20  turn (-1, -1).. 
+000204c0: 2020 2064 6566 205f 5f70 6e67 2873 656c     def __png(sel
+000204d0: 662c 2073 7472 6561 6d29 3a0a 2020 2020  f, stream):.    
+000204e0: 2020 2020 6966 2073 7472 6561 6d2e 7265      if stream.re
+000204f0: 6164 2838 2920 3d3d 2062 225c 3231 3150  ad(8) == b"\211P
+00020500: 4e47 5c72 5c6e 5c30 3332 5c6e 223a 0a20  NG\r\n\032\n":. 
+00020510: 2020 2020 2020 2020 2020 2073 7472 6561             strea
+00020520: 6d2e 7265 6164 2834 290a 2020 2020 2020  m.read(4).      
+00020530: 2020 2020 2020 6966 2073 7472 6561 6d2e        if stream.
+00020540: 7265 6164 2834 2920 3d3d 2062 2249 4844  read(4) == b"IHD
+00020550: 5222 3a0a 2020 2020 2020 2020 2020 2020  R":.            
+00020560: 2020 2020 7265 7475 726e 2073 7472 7563      return struc
+00020570: 742e 756e 7061 636b 2822 214c 4c22 2c20  t.unpack("!LL", 
+00020580: 7374 7265 616d 2e72 6561 6428 3829 290a  stream.read(8)).
+00020590: 2020 2020 2020 2020 7265 7475 726e 2028          return (
+000205a0: 2d31 2c20 2d31 290a 0a0a 636c 6173 7320  -1, -1)...class 
+000205b0: 4953 5f46 494c 4528 5661 6c69 6461 746f  IS_FILE(Validato
+000205c0: 7229 3a0a 2020 2020 2222 220a 2020 2020  r):.    """.    
+000205d0: 4368 6563 6b73 2069 6620 6e61 6d65 2061  Checks if name a
+000205e0: 6e64 2065 7874 656e 7369 6f6e 206f 6620  nd extension of 
+000205f0: 6669 6c65 2075 706c 6f61 6465 6420 7468  file uploaded th
+00020600: 726f 7567 6820 6669 6c65 2069 6e70 7574  rough file input
+00020610: 206d 6174 6368 6573 0a20 2020 2067 6976   matches.    giv
+00020620: 656e 2063 7269 7465 7269 612e 0a0a 2020  en criteria...  
+00020630: 2020 446f 6573 202a 6e6f 742a 2065 6e73    Does *not* ens
+00020640: 7572 6520 7468 6520 6669 6c65 2074 7970  ure the file typ
+00020650: 6520 696e 2061 6e79 2077 6179 2e20 5265  e in any way. Re
+00020660: 7475 726e 7320 7661 6c69 6461 7469 6f6e  turns validation
+00020670: 2066 6169 6c75 7265 0a20 2020 2069 6620   failure.    if 
+00020680: 6e6f 2064 6174 6120 7761 7320 7570 6c6f  no data was uplo
+00020690: 6164 6564 2e0a 0a20 2020 2041 7267 733a  aded...    Args:
+000206a0: 0a20 2020 2020 2020 2066 696c 656e 616d  .        filenam
+000206b0: 653a 2073 7472 696e 672f 636f 6d70 696c  e: string/compil
+000206c0: 6564 2072 6567 6578 206f 7220 6120 6c69  ed regex or a li
+000206d0: 7374 206f 6620 7374 7269 6e67 732f 7265  st of strings/re
+000206e0: 6765 7820 6f66 2076 616c 6964 2066 696c  gex of valid fil
+000206f0: 656e 616d 6573 0a20 2020 2020 2020 2065  enames.        e
+00020700: 7874 656e 7369 6f6e 3a20 7374 7269 6e67  xtension: string
+00020710: 2f63 6f6d 7069 6c65 6420 7265 6765 7820  /compiled regex 
+00020720: 6f72 2061 206c 6973 7420 6f66 2073 7472  or a list of str
+00020730: 696e 6773 2f72 6567 6578 206f 6620 7661  ings/regex of va
+00020740: 6c69 6420 6578 7465 6e73 696f 6e73 0a20  lid extensions. 
+00020750: 2020 2020 2020 206c 6173 7464 6f74 3a20         lastdot: 
+00020760: 7768 6963 6820 646f 7420 7368 6f75 6c64  which dot should
+00020770: 2062 6520 7573 6564 2061 7320 6120 6669   be used as a fi
+00020780: 6c65 6e61 6d65 202f 2065 7874 656e 7369  lename / extensi
+00020790: 6f6e 2073 6570 6172 6174 6f72 3a0a 2020  on separator:.  
+000207a0: 2020 2020 2020 2020 2020 5472 7565 206d            True m
+000207b0: 6561 6e73 206c 6173 7420 646f 742c 2065  eans last dot, e
+000207c0: 672e 2066 696c 652e 6a70 672e 706e 6720  g. file.jpg.png 
+000207d0: 2d3e 2066 696c 652e 6a70 6720 2f20 706e  -> file.jpg / pn
+000207e0: 670a 2020 2020 2020 2020 2020 2020 4661  g.            Fa
+000207f0: 6c73 6520 6d65 616e 7320 6669 7273 7420  lse means first 
+00020800: 646f 742c 2065 672e 2066 696c 652e 7461  dot, eg. file.ta
+00020810: 722e 677a 202d 3e20 6669 6c65 202f 2074  r.gz -> file / t
+00020820: 6172 2e67 7a0a 2020 2020 2020 2020 6361  ar.gz.        ca
+00020830: 7365 3a20 3020 2d20 6b65 6570 2074 6865  se: 0 - keep the
+00020840: 2063 6173 652c 2031 202d 2074 7261 6e73   case, 1 - trans
+00020850: 666f 726d 2074 6865 2073 7472 696e 6720  form the string 
+00020860: 696e 746f 206c 6f77 6572 6361 7365 2028  into lowercase (
+00020870: 6465 6661 756c 7429 2c0a 2020 2020 2020  default),.      
+00020880: 2020 2020 2020 3220 2d20 7472 616e 7366        2 - transf
+00020890: 6f72 6d20 7468 6520 7374 7269 6e67 2069  orm the string i
+000208a0: 6e74 6f20 7570 7065 7263 6173 650a 0a20  nto uppercase.. 
+000208b0: 2020 2049 6620 7468 6572 6520 6973 206e     If there is n
+000208c0: 6f20 646f 7420 7072 6573 656e 742c 2065  o dot present, e
+000208d0: 7874 656e 7369 6f6e 2063 6865 636b 7320  xtension checks 
+000208e0: 7769 6c6c 2062 6520 646f 6e65 2061 6761  will be done aga
+000208f0: 696e 7374 2065 6d70 7479 0a20 2020 2073  inst empty.    s
+00020900: 7472 696e 6720 616e 6420 6669 6c65 6e61  tring and filena
+00020910: 6d65 2063 6865 636b 7320 6167 6169 6e73  me checks agains
+00020920: 7420 7768 6f6c 6520 7661 6c75 652e 0a0a  t whole value...
+00020930: 2020 2020 4578 616d 706c 6573 3a0a 2020      Examples:.  
+00020940: 2020 2020 2020 4368 6563 6b20 6966 2066        Check if f
+00020950: 696c 6520 6861 7320 6120 7064 6620 6578  ile has a pdf ex
+00020960: 7465 6e73 696f 6e20 2863 6173 6520 696e  tension (case in
+00020970: 7365 6e73 6974 6976 6529 3a0a 0a20 2020  sensitive):..   
+00020980: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+00020990: 3d27 6669 6c65 272c 205f 6e61 6d65 3d27  ='file', _name='
+000209a0: 6e61 6d65 272c 0a20 2020 2020 2020 2020  name',.         
+000209b0: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
+000209c0: 4953 5f46 494c 4528 6578 7465 6e73 696f  IS_FILE(extensio
+000209d0: 6e3d 2770 6466 2729 290a 0a20 2020 2020  n='pdf'))..     
+000209e0: 2020 2043 6865 636b 2069 6620 6669 6c65     Check if file
+000209f0: 2069 7320 6361 6c6c 6564 2027 7468 756d   is called 'thum
+00020a00: 626e 6169 6c27 2061 6e64 2068 6173 2061  bnail' and has a
+00020a10: 206a 7067 206f 7220 706e 6720 6578 7465   jpg or png exte
+00020a20: 6e73 696f 6e0a 2020 2020 2020 2020 2863  nsion.        (c
+00020a30: 6173 6520 696e 7365 6e73 6974 6976 6529  ase insensitive)
+00020a40: 3a0a 0a20 2020 2020 2020 2049 4e50 5554  :..        INPUT
+00020a50: 285f 7479 7065 3d27 6669 6c65 272c 205f  (_type='file', _
+00020a60: 6e61 6d65 3d27 6e61 6d65 272c 0a20 2020  name='name',.   
+00020a70: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00020a80: 7569 7265 733d 4953 5f46 494c 4528 6669  uires=IS_FILE(fi
+00020a90: 6c65 6e61 6d65 3d27 7468 756d 626e 6169  lename='thumbnai
+00020aa0: 6c27 2c0a 2020 2020 2020 2020 2020 2020  l',.            
+00020ab0: 2020 2020 6578 7465 6e73 696f 6e3d 5b27      extension=['
+00020ac0: 6a70 6727 2c20 2770 6e67 275d 2929 0a0a  jpg', 'png']))..
+00020ad0: 2020 2020 2020 2020 4368 6563 6b20 6966          Check if
+00020ae0: 2066 696c 6520 6861 7320 6120 7461 722e   file has a tar.
+00020af0: 677a 2065 7874 656e 7369 6f6e 2061 6e64  gz extension and
+00020b00: 206e 616d 6520 7374 6172 7469 6e67 2077   name starting w
+00020b10: 6974 6820 6261 636b 7570 3a0a 0a20 2020  ith backup:..   
+00020b20: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+00020b30: 3d27 6669 6c65 272c 205f 6e61 6d65 3d27  ='file', _name='
+00020b40: 6e61 6d65 272c 0a20 2020 2020 2020 2020  name',.         
+00020b50: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
+00020b60: 4953 5f46 494c 4528 6669 6c65 6e61 6d65  IS_FILE(filename
+00020b70: 3d72 652e 636f 6d70 696c 6528 2762 6163  =re.compile('bac
+00020b80: 6b75 702e 2a27 292c 0a20 2020 2020 2020  kup.*'),.       
+00020b90: 2020 2020 2020 2020 2065 7874 656e 7369           extensi
+00020ba0: 6f6e 3d27 7461 722e 677a 272c 206c 6173  on='tar.gz', las
+00020bb0: 7464 6f74 3d46 616c 7365 2929 0a0a 2020  tdot=False))..  
+00020bc0: 2020 2020 2020 4368 6563 6b20 6966 2066        Check if f
+00020bd0: 696c 6520 6861 7320 6e6f 2065 7874 656e  ile has no exten
+00020be0: 7369 6f6e 2061 6e64 206e 616d 6520 6d61  sion and name ma
+00020bf0: 7463 6869 6e67 2052 4541 444d 450a 2020  tching README.  
+00020c00: 2020 2020 2020 2863 6173 6520 7365 6e73        (case sens
+00020c10: 6974 6976 6529 3a0a 0a20 2020 2020 2020  itive):..       
+00020c20: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+00020c30: 3d27 6669 6c65 272c 205f 6e61 6d65 3d27  ='file', _name='
+00020c40: 6e61 6d65 272c 0a20 2020 2020 2020 2020  name',.         
+00020c50: 2020 2020 2020 2072 6571 7569 7265 733d         requires=
+00020c60: 4953 5f46 494c 4528 6669 6c65 6e61 6d65  IS_FILE(filename
+00020c70: 3d27 5245 4144 4d45 272c 0a20 2020 2020  ='README',.     
+00020c80: 2020 2020 2020 2020 2020 2065 7874 656e             exten
+00020c90: 7369 6f6e 3d27 272c 2063 6173 653d 3029  sion='', case=0)
+00020ca0: 0a0a 2020 2020 2222 220a 0a20 2020 2064  ..    """..    d
+00020cb0: 6566 205f 5f69 6e69 745f 5f28 0a20 2020  ef __init__(.   
+00020cc0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00020cd0: 2020 2066 696c 656e 616d 653d 4e6f 6e65     filename=None
+00020ce0: 2c0a 2020 2020 2020 2020 6578 7465 6e73  ,.        extens
+00020cf0: 696f 6e3d 4e6f 6e65 2c0a 2020 2020 2020  ion=None,.      
+00020d00: 2020 6c61 7374 646f 743d 5472 7565 2c0a    lastdot=True,.
+00020d10: 2020 2020 2020 2020 6361 7365 3d31 2c0a          case=1,.
+00020d20: 2020 2020 2020 2020 6572 726f 725f 6d65          error_me
+00020d30: 7373 6167 653d 2245 6e74 6572 2076 616c  ssage="Enter val
+00020d40: 6964 2066 696c 656e 616d 6522 2c0a 2020  id filename",.  
+00020d50: 2020 293a 0a20 2020 2020 2020 2073 656c    ):.        sel
+00020d60: 662e 6669 6c65 6e61 6d65 203d 2066 696c  f.filename = fil
+00020d70: 656e 616d 650a 2020 2020 2020 2020 7365  ename.        se
+00020d80: 6c66 2e65 7874 656e 7369 6f6e 203d 2065  lf.extension = e
+00020d90: 7874 656e 7369 6f6e 0a20 2020 2020 2020  xtension.       
+00020da0: 2073 656c 662e 6c61 7374 646f 7420 3d20   self.lastdot = 
+00020db0: 6c61 7374 646f 740a 2020 2020 2020 2020  lastdot.        
+00020dc0: 7365 6c66 2e63 6173 6520 3d20 6361 7365  self.case = case
+00020dd0: 0a20 2020 2020 2020 2073 656c 662e 6572  .        self.er
+00020de0: 726f 725f 6d65 7373 6167 6520 3d20 6572  ror_message = er
+00020df0: 726f 725f 6d65 7373 6167 650a 0a20 2020  ror_message..   
+00020e00: 2064 6566 206d 6174 6368 2873 656c 662c   def match(self,
+00020e10: 2076 616c 7565 312c 2076 616c 7565 3229   value1, value2)
+00020e20: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+00020e30: 6e73 7461 6e63 6528 7661 6c75 6531 2c20  nstance(value1, 
+00020e40: 286c 6973 742c 2074 7570 6c65 2929 3a0a  (list, tuple)):.
+00020e50: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00020e60: 7620 696e 2076 616c 7565 313a 0a20 2020  v in value1:.   
+00020e70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00020e80: 7365 6c66 2e6d 6174 6368 2876 2c20 7661  self.match(v, va
+00020e90: 6c75 6532 293a 0a20 2020 2020 2020 2020  lue2):.         
+00020ea0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00020eb0: 6e20 5472 7565 0a20 2020 2020 2020 2020  n True.         
+00020ec0: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00020ed0: 2020 2020 2020 2020 656c 6966 2063 616c          elif cal
+00020ee0: 6c61 626c 6528 6765 7461 7474 7228 7661  lable(getattr(va
+00020ef0: 6c75 6531 2c20 226d 6174 6368 222c 204e  lue1, "match", N
+00020f00: 6f6e 6529 293a 0a20 2020 2020 2020 2020  one)):.         
+00020f10: 2020 2072 6574 7572 6e20 7661 6c75 6531     return value1
+00020f20: 2e6d 6174 6368 2876 616c 7565 3229 0a20  .match(value2). 
+00020f30: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
+00020f40: 7374 616e 6365 2876 616c 7565 312c 2073  stance(value1, s
+00020f50: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00020f60: 2072 6574 7572 6e20 7661 6c75 6531 203d   return value1 =
+00020f70: 3d20 7661 6c75 6532 0a0a 2020 2020 6465  = value2..    de
+00020f80: 6620 7661 6c69 6461 7465 2873 656c 662c  f validate(self,
+00020f90: 2076 616c 7565 2c20 7265 636f 7264 5f69   value, record_i
+00020fa0: 643d 4e6f 6e65 293a 0a20 2020 2020 2020  d=None):.       
+00020fb0: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
+00020fc0: 2020 7374 7269 6e67 203d 2076 616c 7565    string = value
+00020fd0: 2e66 696c 656e 616d 650a 2020 2020 2020  .filename.      
+00020fe0: 2020 6578 6365 7074 3a0a 2020 2020 2020    except:.      
+00020ff0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+00021000: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
+00021010: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+00021020: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
+00021030: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00021040: 2e63 6173 6520 3d3d 2031 3a0a 2020 2020  .case == 1:.    
+00021050: 2020 2020 2020 2020 7374 7269 6e67 203d          string =
+00021060: 2073 7472 696e 672e 6c6f 7765 7228 290a   string.lower().
+00021070: 2020 2020 2020 2020 656c 6966 2073 656c          elif sel
+00021080: 662e 6361 7365 203d 3d20 323a 0a20 2020  f.case == 2:.   
+00021090: 2020 2020 2020 2020 2073 7472 696e 6720           string 
+000210a0: 3d20 7374 7269 6e67 2e75 7070 6572 2829  = string.upper()
+000210b0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+000210c0: 2e6c 6173 7464 6f74 3a0a 2020 2020 2020  .lastdot:.      
+000210d0: 2020 2020 2020 646f 7420 3d20 7374 7269        dot = stri
+000210e0: 6e67 2e72 6669 6e64 2822 2e22 290a 2020  ng.rfind(".").  
+000210f0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00021100: 2020 2020 2020 2020 646f 7420 3d20 7374          dot = st
+00021110: 7269 6e67 2e66 696e 6428 222e 2229 0a20  ring.find("."). 
+00021120: 2020 2020 2020 2069 6620 646f 7420 3d3d         if dot ==
+00021130: 202d 313a 0a20 2020 2020 2020 2020 2020   -1:.           
+00021140: 2064 6f74 203d 206c 656e 2873 7472 696e   dot = len(strin
+00021150: 6729 0a20 2020 2020 2020 2069 6620 7365  g).        if se
+00021160: 6c66 2e66 696c 656e 616d 6520 616e 6420  lf.filename and 
+00021170: 6e6f 7420 7365 6c66 2e6d 6174 6368 2873  not self.match(s
+00021180: 656c 662e 6669 6c65 6e61 6d65 2c20 7374  elf.filename, st
+00021190: 7269 6e67 5b3a 646f 745d 293a 0a20 2020  ring[:dot]):.   
+000211a0: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+000211b0: 616c 6964 6174 696f 6e45 7272 6f72 2873  alidationError(s
+000211c0: 656c 662e 7472 616e 736c 6174 6f72 2873  elf.translator(s
+000211d0: 656c 662e 6572 726f 725f 6d65 7373 6167  elf.error_messag
+000211e0: 6529 290a 2020 2020 2020 2020 656c 6966  e)).        elif
+000211f0: 2073 656c 662e 6578 7465 6e73 696f 6e20   self.extension 
+00021200: 616e 6420 6e6f 7420 7365 6c66 2e6d 6174  and not self.mat
+00021210: 6368 2873 656c 662e 6578 7465 6e73 696f  ch(self.extensio
+00021220: 6e2c 2073 7472 696e 675b 646f 7420 2b20  n, string[dot + 
+00021230: 3120 3a5d 293a 0a20 2020 2020 2020 2020  1 :]):.         
+00021240: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+00021250: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+00021260: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+00021270: 726f 725f 6d65 7373 6167 6529 290a 2020  ror_message)).  
+00021280: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00021290: 2020 2020 2020 2020 7265 7475 726e 2076          return v
+000212a0: 616c 7565 0a0a 0a63 6c61 7373 2049 535f  alue...class IS_
+000212b0: 5550 4c4f 4144 5f46 494c 454e 414d 4528  UPLOAD_FILENAME(
+000212c0: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
+000212d0: 2222 220a 2020 2020 466f 7220 6e65 7720  """.    For new 
+000212e0: 6170 706c 6963 6174 696f 6e73 2c20 7573  applications, us
+000212f0: 6520 4953 5f46 494c 4528 292e 0a0a 2020  e IS_FILE()...  
+00021300: 2020 4368 6563 6b73 2069 6620 6e61 6d65    Checks if name
+00021310: 2061 6e64 2065 7874 656e 7369 6f6e 206f   and extension o
+00021320: 6620 6669 6c65 2075 706c 6f61 6465 6420  f file uploaded 
+00021330: 7468 726f 7567 6820 6669 6c65 2069 6e70  through file inp
+00021340: 7574 206d 6174 6368 6573 0a20 2020 2067  ut matches.    g
+00021350: 6976 656e 2063 7269 7465 7269 612e 0a0a  iven criteria...
+00021360: 2020 2020 446f 6573 202a 6e6f 742a 2065      Does *not* e
+00021370: 6e73 7572 6520 7468 6520 6669 6c65 2074  nsure the file t
+00021380: 7970 6520 696e 2061 6e79 2077 6179 2e20  ype in any way. 
+00021390: 5265 7475 726e 7320 7661 6c69 6461 7469  Returns validati
+000213a0: 6f6e 2066 6169 6c75 7265 0a20 2020 2069  on failure.    i
+000213b0: 6620 6e6f 2064 6174 6120 7761 7320 7570  f no data was up
+000213c0: 6c6f 6164 6564 2e0a 0a20 2020 2041 7267  loaded...    Arg
+000213d0: 733a 0a20 2020 2020 2020 2066 696c 656e  s:.        filen
+000213e0: 616d 653a 2066 696c 656e 616d 6520 2862  ame: filename (b
+000213f0: 6566 6f72 6520 646f 7429 2072 6567 6578  efore dot) regex
+00021400: 0a20 2020 2020 2020 2065 7874 656e 7369  .        extensi
+00021410: 6f6e 3a20 6578 7465 6e73 696f 6e20 2861  on: extension (a
+00021420: 6674 6572 2064 6f74 2920 7265 6765 780a  fter dot) regex.
+00021430: 2020 2020 2020 2020 6c61 7374 646f 743a          lastdot:
+00021440: 2077 6869 6368 2064 6f74 2073 686f 756c   which dot shoul
+00021450: 6420 6265 2075 7365 6420 6173 2061 2066  d be used as a f
+00021460: 696c 656e 616d 6520 2f20 6578 7465 6e73  ilename / extens
+00021470: 696f 6e20 7365 7061 7261 746f 723a 0a20  ion separator:. 
+00021480: 2020 2020 2020 2020 2020 2054 7275 6520             True 
+00021490: 6d65 616e 7320 6c61 7374 2064 6f74 2c20  means last dot, 
+000214a0: 6567 2e20 6669 6c65 2e70 6e67 202d 3e20  eg. file.png -> 
+000214b0: 6669 6c65 202f 2070 6e67 0a20 2020 2020  file / png.     
+000214c0: 2020 2020 2020 2046 616c 7365 206d 6561         False mea
+000214d0: 6e73 2066 6972 7374 2064 6f74 2c20 6567  ns first dot, eg
+000214e0: 2e20 6669 6c65 2e74 6172 2e67 7a20 2d3e  . file.tar.gz ->
+000214f0: 2066 696c 6520 2f20 7461 722e 677a 0a20   file / tar.gz. 
+00021500: 2020 2020 2020 2063 6173 653a 2030 202d         case: 0 -
+00021510: 206b 6565 7020 7468 6520 6361 7365 2c20   keep the case, 
+00021520: 3120 2d20 7472 616e 7366 6f72 6d20 7468  1 - transform th
+00021530: 6520 7374 7269 6e67 2069 6e74 6f20 6c6f  e string into lo
+00021540: 7765 7263 6173 6520 2864 6566 6175 6c74  wercase (default
+00021550: 292c 0a20 2020 2020 2020 2020 2020 2032  ),.            2
+00021560: 202d 2074 7261 6e73 666f 726d 2074 6865   - transform the
+00021570: 2073 7472 696e 6720 696e 746f 2075 7070   string into upp
+00021580: 6572 6361 7365 0a0a 2020 2020 4966 2074  ercase..    If t
+00021590: 6865 7265 2069 7320 6e6f 2064 6f74 2070  here is no dot p
+000215a0: 7265 7365 6e74 2c20 6578 7465 6e73 696f  resent, extensio
+000215b0: 6e20 6368 6563 6b73 2077 696c 6c20 6265  n checks will be
+000215c0: 2064 6f6e 6520 6167 6169 6e73 7420 656d   done against em
+000215d0: 7074 790a 2020 2020 7374 7269 6e67 2061  pty.    string a
+000215e0: 6e64 2066 696c 656e 616d 6520 6368 6563  nd filename chec
+000215f0: 6b73 2061 6761 696e 7374 2077 686f 6c65  ks against whole
+00021600: 2076 616c 7565 2e0a 0a20 2020 2045 7861   value...    Exa
+00021610: 6d70 6c65 733a 0a20 2020 2020 2020 2043  mples:.        C
+00021620: 6865 636b 2069 6620 6669 6c65 2068 6173  heck if file has
+00021630: 2061 2070 6466 2065 7874 656e 7369 6f6e   a pdf extension
+00021640: 2028 6361 7365 2069 6e73 656e 7369 7469   (case insensiti
+00021650: 7665 293a 0a0a 2020 2020 2020 2020 494e  ve):..        IN
+00021660: 5055 5428 5f74 7970 653d 2766 696c 6527  PUT(_type='file'
+00021670: 2c20 5f6e 616d 653d 276e 616d 6527 2c0a  , _name='name',.
+00021680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00021690: 7265 7175 6972 6573 3d49 535f 5550 4c4f  requires=IS_UPLO
+000216a0: 4144 5f46 494c 454e 414d 4528 6578 7465  AD_FILENAME(exte
+000216b0: 6e73 696f 6e3d 2770 6466 2729 290a 0a20  nsion='pdf')).. 
+000216c0: 2020 2020 2020 2043 6865 636b 2069 6620         Check if 
+000216d0: 6669 6c65 2068 6173 2061 2074 6172 2e67  file has a tar.g
+000216e0: 7a20 6578 7465 6e73 696f 6e20 616e 6420  z extension and 
+000216f0: 6e61 6d65 2073 7461 7274 696e 6720 7769  name starting wi
+00021700: 7468 2062 6163 6b75 703a 0a0a 2020 2020  th backup:..    
+00021710: 2020 2020 494e 5055 5428 5f74 7970 653d      INPUT(_type=
+00021720: 2766 696c 6527 2c20 5f6e 616d 653d 276e  'file', _name='n
+00021730: 616d 6527 2c0a 2020 2020 2020 2020 2020  ame',.          
+00021740: 2020 2020 2020 7265 7175 6972 6573 3d49        requires=I
+00021750: 535f 5550 4c4f 4144 5f46 494c 454e 414d  S_UPLOAD_FILENAM
+00021760: 4528 6669 6c65 6e61 6d65 3d27 6261 636b  E(filename='back
+00021770: 7570 2e2a 272c 0a20 2020 2020 2020 2020  up.*',.         
+00021780: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
+00021790: 3d27 7461 722e 677a 272c 206c 6173 7464  ='tar.gz', lastd
+000217a0: 6f74 3d46 616c 7365 2929 0a0a 2020 2020  ot=False))..    
+000217b0: 2020 2020 4368 6563 6b20 6966 2066 696c      Check if fil
+000217c0: 6520 6861 7320 6e6f 2065 7874 656e 7369  e has no extensi
+000217d0: 6f6e 2061 6e64 206e 616d 6520 6d61 7463  on and name matc
+000217e0: 6869 6e67 2052 4541 444d 450a 2020 2020  hing README.    
+000217f0: 2020 2020 2863 6173 6520 7365 6e73 6974      (case sensit
+00021800: 6976 6529 3a0a 0a20 2020 2020 2020 2020  ive):..         
+00021810: 2020 2049 4e50 5554 285f 7479 7065 3d27     INPUT(_type='
+00021820: 6669 6c65 272c 205f 6e61 6d65 3d27 6e61  file', _name='na
+00021830: 6d65 272c 0a20 2020 2020 2020 2020 2020  me',.           
+00021840: 2020 2020 2072 6571 7569 7265 733d 4953       requires=IS
+00021850: 5f55 504c 4f41 445f 4649 4c45 4e41 4d45  _UPLOAD_FILENAME
+00021860: 2866 696c 656e 616d 653d 275e 5245 4144  (filename='^READ
+00021870: 4d45 2427 2c0a 2020 2020 2020 2020 2020  ME$',.          
+00021880: 2020 2020 2020 6578 7465 6e73 696f 6e3d        extension=
+00021890: 275e 2427 2c20 6361 7365 3d30 290a 0a20  '^$', case=0).. 
+000218a0: 2020 2022 2222 0a0a 2020 2020 6465 6620     """..    def 
+000218b0: 5f5f 696e 6974 5f5f 280a 2020 2020 2020  __init__(.      
+000218c0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+000218d0: 6669 6c65 6e61 6d65 3d4e 6f6e 652c 0a20  filename=None,. 
+000218e0: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
+000218f0: 3d4e 6f6e 652c 0a20 2020 2020 2020 206c  =None,.        l
+00021900: 6173 7464 6f74 3d54 7275 652c 0a20 2020  astdot=True,.   
+00021910: 2020 2020 2063 6173 653d 312c 0a20 2020       case=1,.   
+00021920: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+00021930: 6765 3d22 456e 7465 7220 7661 6c69 6420  ge="Enter valid 
+00021940: 6669 6c65 6e61 6d65 222c 0a20 2020 2029  filename",.    )
+00021950: 3a0a 2020 2020 2020 2020 6966 2069 7369  :.        if isi
+00021960: 6e73 7461 6e63 6528 6669 6c65 6e61 6d65  nstance(filename
+00021970: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+00021980: 2020 2020 6669 6c65 6e61 6d65 203d 2072      filename = r
+00021990: 652e 636f 6d70 696c 6528 6669 6c65 6e61  e.compile(filena
+000219a0: 6d65 290a 2020 2020 2020 2020 6966 2069  me).        if i
+000219b0: 7369 6e73 7461 6e63 6528 6578 7465 6e73  sinstance(extens
+000219c0: 696f 6e2c 2073 7472 293a 0a20 2020 2020  ion, str):.     
+000219d0: 2020 2020 2020 2065 7874 656e 7369 6f6e         extension
+000219e0: 203d 2072 652e 636f 6d70 696c 6528 6578   = re.compile(ex
+000219f0: 7465 6e73 696f 6e29 0a20 2020 2020 2020  tension).       
+00021a00: 2073 656c 662e 6669 6c65 6e61 6d65 203d   self.filename =
+00021a10: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
+00021a20: 2020 7365 6c66 2e65 7874 656e 7369 6f6e    self.extension
+00021a30: 203d 2065 7874 656e 7369 6f6e 0a20 2020   = extension.   
+00021a40: 2020 2020 2073 656c 662e 6c61 7374 646f       self.lastdo
+00021a50: 7420 3d20 6c61 7374 646f 740a 2020 2020  t = lastdot.    
+00021a60: 2020 2020 7365 6c66 2e63 6173 6520 3d20      self.case = 
+00021a70: 6361 7365 0a20 2020 2020 2020 2073 656c  case.        sel
+00021a80: 662e 6572 726f 725f 6d65 7373 6167 6520  f.error_message 
+00021a90: 3d20 6572 726f 725f 6d65 7373 6167 650a  = error_message.
+00021aa0: 0a20 2020 2064 6566 2076 616c 6964 6174  .    def validat
+00021ab0: 6528 7365 6c66 2c20 7661 6c75 652c 2072  e(self, value, r
+00021ac0: 6563 6f72 645f 6964 3d4e 6f6e 6529 3a0a  ecord_id=None):.
+00021ad0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
+00021ae0: 2020 2020 2020 2020 2073 7472 696e 6720           string 
+00021af0: 3d20 7661 6c75 652e 6669 6c65 6e61 6d65  = value.filename
+00021b00: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00021b10: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00021b20: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00021b30: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+00021b40: 6f72 2873 656c 662e 6572 726f 725f 6d65  or(self.error_me
+00021b50: 7373 6167 6529 290a 2020 2020 2020 2020  ssage)).        
+00021b60: 6966 2073 656c 662e 6361 7365 203d 3d20  if self.case == 
+00021b70: 313a 0a20 2020 2020 2020 2020 2020 2073  1:.            s
+00021b80: 7472 696e 6720 3d20 7374 7269 6e67 2e6c  tring = string.l
+00021b90: 6f77 6572 2829 0a20 2020 2020 2020 2065  ower().        e
+00021ba0: 6c69 6620 7365 6c66 2e63 6173 6520 3d3d  lif self.case ==
+00021bb0: 2032 3a0a 2020 2020 2020 2020 2020 2020   2:.            
+00021bc0: 7374 7269 6e67 203d 2073 7472 696e 672e  string = string.
+00021bd0: 7570 7065 7228 290a 2020 2020 2020 2020  upper().        
+00021be0: 6966 2073 656c 662e 6c61 7374 646f 743a  if self.lastdot:
+00021bf0: 0a20 2020 2020 2020 2020 2020 2064 6f74  .            dot
+00021c00: 203d 2073 7472 696e 672e 7266 696e 6428   = string.rfind(
+00021c10: 222e 2229 0a20 2020 2020 2020 2065 6c73  ".").        els
+00021c20: 653a 0a20 2020 2020 2020 2020 2020 2064  e:.            d
+00021c30: 6f74 203d 2073 7472 696e 672e 6669 6e64  ot = string.find
+00021c40: 2822 2e22 290a 2020 2020 2020 2020 6966  (".").        if
+00021c50: 2064 6f74 203d 3d20 2d31 3a0a 2020 2020   dot == -1:.    
+00021c60: 2020 2020 2020 2020 646f 7420 3d20 6c65          dot = le
+00021c70: 6e28 7374 7269 6e67 290a 2020 2020 2020  n(string).      
+00021c80: 2020 6966 2073 656c 662e 6669 6c65 6e61    if self.filena
+00021c90: 6d65 2061 6e64 206e 6f74 2073 656c 662e  me and not self.
+00021ca0: 6669 6c65 6e61 6d65 2e6d 6174 6368 2873  filename.match(s
+00021cb0: 7472 696e 675b 3a64 6f74 5d29 3a0a 2020  tring[:dot]):.  
+00021cc0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00021cd0: 5661 6c69 6461 7469 6f6e 4572 726f 7228  ValidationError(
+00021ce0: 7365 6c66 2e74 7261 6e73 6c61 746f 7228  self.translator(
+00021cf0: 7365 6c66 2e65 7272 6f72 5f6d 6573 7361  self.error_messa
+00021d00: 6765 2929 0a20 2020 2020 2020 2065 6c69  ge)).        eli
+00021d10: 6620 7365 6c66 2e65 7874 656e 7369 6f6e  f self.extension
+00021d20: 2061 6e64 206e 6f74 2073 656c 662e 6578   and not self.ex
+00021d30: 7465 6e73 696f 6e2e 6d61 7463 6828 7374  tension.match(st
+00021d40: 7269 6e67 5b64 6f74 202b 2031 203a 5d29  ring[dot + 1 :])
+00021d50: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00021d60: 6973 6520 5661 6c69 6461 7469 6f6e 4572  ise ValidationEr
+00021d70: 726f 7228 7365 6c66 2e74 7261 6e73 6c61  ror(self.transla
+00021d80: 746f 7228 7365 6c66 2e65 7272 6f72 5f6d  tor(self.error_m
+00021d90: 6573 7361 6765 2929 0a20 2020 2020 2020  essage)).       
+00021da0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00021db0: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
+00021dc0: 0a0a 636c 6173 7320 4953 5f49 5056 3428  ..class IS_IPV4(
+00021dd0: 5661 6c69 6461 746f 7229 3a0a 2020 2020  Validator):.    
+00021de0: 2222 220a 2020 2020 4368 6563 6b73 2069  """.    Checks i
+00021df0: 6620 6669 656c 6427 7320 7661 6c75 6520  f field's value 
+00021e00: 6973 2061 6e20 4950 2076 6572 7369 6f6e  is an IP version
+00021e10: 2034 2061 6464 7265 7373 2069 6e20 6465   4 address in de
+00021e20: 6369 6d61 6c20 666f 726d 2e20 4361 6e0a  cimal form. Can.
+00021e30: 2020 2020 6265 2073 6574 2074 6f20 666f      be set to fo
+00021e40: 7263 6520 6164 6472 6573 7365 7320 6672  rce addresses fr
+00021e50: 6f6d 2063 6572 7461 696e 2072 616e 6765  om certain range
+00021e60: 2e0a 0a20 2020 2049 5076 3420 7265 6765  ...    IPv4 rege
+00021e70: 7820 7461 6b65 6e20 6672 6f6d 3a20 6874  x taken from: ht
+00021e80: 7470 3a2f 2f72 6567 6578 6c69 622e 636f  tp://regexlib.co
+00021e90: 6d2f 5245 4465 7461 696c 732e 6173 7078  m/REDetails.aspx
+00021ea0: 3f72 6567 6578 705f 6964 3d31 3431 310a  ?regexp_id=1411.
+00021eb0: 0a20 2020 2041 7267 733a 0a0a 2020 2020  .    Args:..    
+00021ec0: 2020 2020 6d69 6e69 703a 206c 6f77 6573      minip: lowes
+00021ed0: 7420 616c 6c6f 7765 6420 6164 6472 6573  t allowed addres
+00021ee0: 733b 2061 6363 6570 7473 3a0a 0a20 2020  s; accepts:..   
+00021ef0: 2020 2020 2020 2020 202d 2073 7472 2c20           - str, 
+00021f00: 6567 2e20 3139 322e 3136 382e 302e 310a  eg. 192.168.0.1.
+00021f10: 2020 2020 2020 2020 2020 2020 2d20 6c69              - li
+00021f20: 7374 206f 7220 7475 706c 6520 6f66 206f  st or tuple of o
+00021f30: 6374 6574 732c 2065 672e 205b 3139 322c  ctets, eg. [192,
+00021f40: 2031 3638 2c20 302c 2031 5d0a 2020 2020   168, 0, 1].    
+00021f50: 2020 2020 6d61 7869 703a 2068 6967 6865      maxip: highe
+00021f60: 7374 2061 6c6c 6f77 6564 2061 6464 7265  st allowed addre
+00021f70: 7373 3b20 7361 6d65 2061 7320 6162 6f76  ss; same as abov
+00021f80: 650a 2020 2020 2020 2020 696e 7665 7274  e.        invert
+00021f90: 3a20 5472 7565 2074 6f20 616c 6c6f 7720  : True to allow 
+00021fa0: 6164 6472 6573 7365 7320 6f6e 6c79 2066  addresses only f
+00021fb0: 726f 6d20 6f75 7473 6964 6520 6f66 2067  rom outside of g
+00021fc0: 6976 656e 2072 616e 6765 3b20 6e6f 7465  iven range; note
+00021fd0: 0a20 2020 2020 2020 2020 2020 2074 6861  .            tha
+00021fe0: 7420 7261 6e67 6520 626f 756e 6461 7269  t range boundari
+00021ff0: 6573 2061 7265 206e 6f74 206d 6174 6368  es are not match
+00022000: 6564 2074 6869 7320 7761 790a 2020 2020  ed this way.    
+00022010: 2020 2020 6973 5f6c 6f63 616c 686f 7374      is_localhost
+00022020: 3a20 6c6f 6361 6c68 6f73 7420 6164 6472  : localhost addr
+00022030: 6573 7320 7472 6561 746d 656e 743a 0a0a  ess treatment:..
+00022040: 2020 2020 2020 2020 2020 2020 2d20 4e6f              - No
+00022050: 6e65 2028 6465 6661 756c 7429 3a20 696e  ne (default): in
+00022060: 6469 6666 6572 656e 740a 2020 2020 2020  different.      
+00022070: 2020 2020 2020 2d20 5472 7565 2028 656e        - True (en
+00022080: 666f 7263 6529 3a20 7175 6572 7920 6164  force): query ad
+00022090: 6472 6573 7320 6d75 7374 206d 6174 6368  dress must match
+000220a0: 206c 6f63 616c 686f 7374 2061 6464 7265   localhost addre
+000220b0: 7373 2028 3132 372e 302e 302e 3129 0a20  ss (127.0.0.1). 
+000220c0: 2020 2020 2020 2020 2020 202d 2046 616c             - Fal
+000220d0: 7365 2028 666f 7262 6964 293a 2071 7565  se (forbid): que
+000220e0: 7279 2061 6464 7265 7373 206d 7573 7420  ry address must 
+000220f0: 6e6f 7420 6d61 7463 6820 6c6f 6361 6c68  not match localh
+00022100: 6f73 7420 6164 6472 6573 730a 2020 2020  ost address.    
+00022110: 2020 2020 6973 5f70 7269 7661 7465 3a20      is_private: 
+00022120: 7361 6d65 2061 7320 6162 6f76 652c 2065  same as above, e
+00022130: 7863 6570 7420 7468 6174 2071 7565 7279  xcept that query
+00022140: 2061 6464 7265 7373 2069 7320 6368 6563   address is chec
+00022150: 6b65 6420 6167 6169 6e73 740a 2020 2020  ked against.    
+00022160: 2020 2020 2020 2020 7477 6f20 6164 6472          two addr
+00022170: 6573 7320 7261 6e67 6573 3a20 3137 322e  ess ranges: 172.
+00022180: 3136 2e30 2e30 202d 2031 3732 2e33 312e  16.0.0 - 172.31.
+00022190: 3235 352e 3235 3520 616e 640a 2020 2020  255.255 and.    
+000221a0: 2020 2020 2020 2020 3139 322e 3136 382e          192.168.
+000221b0: 302e 3020 2d20 3139 322e 3136 382e 3235  0.0 - 192.168.25
+000221c0: 352e 3235 350a 2020 2020 2020 2020 6973  5.255.        is
+000221d0: 5f61 7574 6f6d 6174 6963 3a20 7361 6d65  _automatic: same
+000221e0: 2061 7320 6162 6f76 652c 2065 7863 6570   as above, excep
+000221f0: 7420 7468 6174 2071 7565 7279 2061 6464  t that query add
+00022200: 7265 7373 2069 7320 6368 6563 6b65 6420  ress is checked 
+00022210: 6167 6169 6e73 740a 2020 2020 2020 2020  against.        
+00022220: 2020 2020 6f6e 6520 6164 6472 6573 7320      one address 
+00022230: 7261 6e67 653a 2031 3639 2e32 3534 2e30  range: 169.254.0
+00022240: 2e30 202d 2031 3639 2e32 3534 2e32 3535  .0 - 169.254.255
+00022250: 2e32 3535 0a0a 2020 2020 4d69 6e69 7020  .255..    Minip 
+00022260: 616e 6420 6d61 7869 7020 6d61 7920 616c  and maxip may al
+00022270: 736f 2062 6520 6c69 7374 7320 6f72 2074  so be lists or t
+00022280: 7570 6c65 7320 6f66 2061 6464 7265 7373  uples of address
+00022290: 6573 2069 6e20 616c 6c20 6162 6f76 650a  es in all above.
+000222a0: 2020 2020 666f 726d 7320 2873 7472 2c20      forms (str, 
+000222b0: 696e 742c 206c 6973 7420 2f20 7475 706c  int, list / tupl
+000222c0: 6529 2c20 616c 6c6f 7769 6e67 2073 6574  e), allowing set
+000222d0: 7570 206f 6620 6d75 6c74 6970 6c65 2061  up of multiple a
+000222e0: 6464 7265 7373 2072 616e 6765 733a 3a0a  ddress ranges::.
+000222f0: 0a20 2020 2020 2020 206d 696e 6970 203d  .        minip =
+00022300: 2028 6d69 6e69 7031 2c20 6d69 6e69 7032   (minip1, minip2
+00022310: 2c20 2e2e 2e20 6d69 6e69 704e 290a 2020  , ... minipN).  
+00022320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022330: 207c 2020 2020 2020 207c 2020 2020 2020   |       |      
+00022340: 2020 2020 207c 0a20 2020 2020 2020 2020       |.         
+00022350: 2020 2020 2020 2020 2020 7c20 2020 2020            |     
+00022360: 2020 7c20 2020 2020 2020 2020 2020 7c0a    |           |.
+00022370: 2020 2020 2020 2020 6d61 7869 7020 3d20          maxip = 
+00022380: 286d 6178 6970 312c 206d 6178 6970 322c  (maxip1, maxip2,
+00022390: 202e 2e2e 206d 6178 6970 4e29 0a0a 2020   ... maxipN)..  
+000223a0: 2020 4c6f 6e67 6572 2069 7465 7261 626c    Longer iterabl
+000223b0: 6520 7769 6c6c 2062 6520 7472 756e 6361  e will be trunca
+000223c0: 7465 6420 746f 206d 6174 6368 206c 656e  ted to match len
+000223d0: 6774 6820 6f66 2073 686f 7274 6572 206f  gth of shorter o
+000223e0: 6e65 2e0a 0a20 2020 2045 7861 6d70 6c65  ne...    Example
+000223f0: 733a 0a20 2020 2020 2020 2043 6865 636b  s:.        Check
+00022400: 2066 6f72 2076 616c 6964 2049 5076 3420   for valid IPv4 
+00022410: 6164 6472 6573 733a 0a0a 2020 2020 2020  address:..      
+00022420: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
+00022430: 653d 2774 6578 7427 2c20 5f6e 616d 653d  e='text', _name=
+00022440: 276e 616d 6527 2c20 7265 7175 6972 6573  'name', requires
+00022450: 3d49 535f 4950 5634 2829 290a 0a20 2020  =IS_IPV4())..   
+00022460: 2020 2020 2043 6865 636b 2066 6f72 2076       Check for v
+00022470: 616c 6964 2049 5076 3420 6164 6472 6573  alid IPv4 addres
+00022480: 7320 6265 6c6f 6e67 696e 6720 746f 2073  s belonging to s
+00022490: 7065 6369 6669 6320 7261 6e67 653a 0a0a  pecific range:..
+000224a0: 2020 2020 2020 2020 2020 2020 494e 5055              INPU
+000224b0: 5428 5f74 7970 653d 2774 6578 7427 2c20  T(_type='text', 
+000224c0: 5f6e 616d 653d 276e 616d 6527 2c0a 2020  _name='name',.  
+000224d0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000224e0: 7175 6972 6573 3d49 535f 4950 5634 286d  quires=IS_IPV4(m
+000224f0: 696e 6970 3d27 3130 302e 3230 302e 302e  inip='100.200.0.
+00022500: 3027 2c20 6d61 7869 703d 2731 3030 2e32  0', maxip='100.2
+00022510: 3030 2e32 3535 2e32 3535 2729 290a 0a20  00.255.255')).. 
+00022520: 2020 2020 2020 2043 6865 636b 2066 6f72         Check for
+00022530: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
+00022540: 6573 7320 6265 6c6f 6e67 696e 6720 746f  ess belonging to
+00022550: 2065 6974 6865 7220 3130 302e 3131 302e   either 100.110.
+00022560: 302e 3020 2d0a 2020 2020 2020 2020 3130  0.0 -.        10
+00022570: 302e 3131 302e 3235 352e 3235 3520 6f72  0.110.255.255 or
+00022580: 2032 3030 2e35 302e 302e 3020 2d20 3230   200.50.0.0 - 20
+00022590: 302e 3530 2e30 2e32 3535 2061 6464 7265  0.50.0.255 addre
+000225a0: 7373 2072 616e 6765 3a0a 0a20 2020 2020  ss range:..     
+000225b0: 2020 2020 2020 2049 4e50 5554 285f 7479         INPUT(_ty
+000225c0: 7065 3d27 7465 7874 272c 205f 6e61 6d65  pe='text', _name
+000225d0: 3d27 6e61 6d65 272c 0a20 2020 2020 2020  ='name',.       
+000225e0: 2020 2020 2020 2020 2072 6571 7569 7265           require
+000225f0: 733d 4953 5f49 5056 3428 6d69 6e69 703d  s=IS_IPV4(minip=
+00022600: 2827 3130 302e 3131 302e 302e 3027 2c20  ('100.110.0.0', 
+00022610: 2732 3030 2e35 302e 302e 3027 292c 0a20  '200.50.0.0'),. 
+00022620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022630: 2020 2020 2020 2020 2020 2020 6d61 7869              maxi
+00022640: 703d 2827 3130 302e 3131 302e 3235 352e  p=('100.110.255.
+00022650: 3235 3527 2c20 2732 3030 2e35 302e 302e  255', '200.50.0.
+00022660: 3235 3527 2929 290a 0a20 2020 2020 2020  255')))..       
+00022670: 2043 6865 636b 2066 6f72 2076 616c 6964   Check for valid
+00022680: 2049 5076 3420 6164 6472 6573 7320 6265   IPv4 address be
+00022690: 6c6f 6e67 696e 6720 746f 2070 7269 7661  longing to priva
+000226a0: 7465 2061 6464 7265 7373 2073 7061 6365  te address space
+000226b0: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+000226c0: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+000226d0: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+000226e0: 2072 6571 7569 7265 733d 4953 5f49 5056   requires=IS_IPV
+000226f0: 3428 6973 5f70 7269 7661 7465 3d54 7275  4(is_private=Tru
+00022700: 6529 290a 0a20 2020 2020 2020 2043 6865  e))..        Che
+00022710: 636b 2066 6f72 2076 616c 6964 2049 5076  ck for valid IPv
+00022720: 3420 6164 6472 6573 7320 7468 6174 2069  4 address that i
+00022730: 7320 6e6f 7420 6120 6c6f 6361 6c68 6f73  s not a localhos
+00022740: 7420 6164 6472 6573 733a 0a0a 2020 2020  t address:..    
+00022750: 2020 2020 2020 2020 494e 5055 5428 5f74          INPUT(_t
+00022760: 7970 653d 2774 6578 7427 2c20 5f6e 616d  ype='text', _nam
+00022770: 653d 276e 616d 6527 2c20 7265 7175 6972  e='name', requir
+00022780: 6573 3d49 535f 4950 5634 2869 735f 6c6f  es=IS_IPV4(is_lo
+00022790: 6361 6c68 6f73 743d 4661 6c73 6529 290a  calhost=False)).
+000227a0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000227b0: 2049 535f 4950 5634 2829 2827 312e 322e   IS_IPV4()('1.2.
+000227c0: 332e 3427 290a 2020 2020 2020 2020 2020  3.4').          
+000227d0: 2020 2827 312e 322e 332e 3427 2c20 4e6f    ('1.2.3.4', No
+000227e0: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+000227f0: 3e3e 3e20 4953 5f49 5056 3428 2928 2732  >>> IS_IPV4()('2
+00022800: 3535 2e32 3535 2e32 3535 2e32 3535 2729  55.255.255.255')
+00022810: 0a20 2020 2020 2020 2020 2020 2028 2732  .            ('2
+00022820: 3535 2e32 3535 2e32 3535 2e32 3535 272c  55.255.255.255',
+00022830: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00022840: 2020 203e 3e3e 2049 535f 4950 5634 2829     >>> IS_IPV4()
+00022850: 2827 312e 322e 332e 3420 2729 0a20 2020  ('1.2.3.4 ').   
+00022860: 2020 2020 2020 2020 2028 2731 2e32 2e33           ('1.2.3
+00022870: 2e34 2027 2c20 2765 6e74 6572 2076 616c  .4 ', 'enter val
+00022880: 6964 2049 5076 3420 6164 6472 6573 7327  id IPv4 address'
+00022890: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+000228a0: 3e20 4953 5f49 5056 3428 2928 2731 2e32  > IS_IPV4()('1.2
+000228b0: 2e33 2e34 2e35 2729 0a20 2020 2020 2020  .3.4.5').       
+000228c0: 2020 2020 2028 2731 2e32 2e33 2e34 2e35       ('1.2.3.4.5
+000228d0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+000228e0: 4950 7634 2061 6464 7265 7373 2729 0a20  IPv4 address'). 
+000228f0: 2020 2020 2020 2020 2020 203e 3e3e 2049             >>> I
+00022900: 535f 4950 5634 2829 2827 3132 332e 3132  S_IPV4()('123.12
+00022910: 3327 290a 2020 2020 2020 2020 2020 2020  3').            
+00022920: 2827 3132 332e 3132 3327 2c20 2765 6e74  ('123.123', 'ent
+00022930: 6572 2076 616c 6964 2049 5076 3420 6164  er valid IPv4 ad
+00022940: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+00022950: 2020 2020 3e3e 3e20 4953 5f49 5056 3428      >>> IS_IPV4(
+00022960: 2928 2731 3131 312e 322e 332e 3427 290a  )('1111.2.3.4').
+00022970: 2020 2020 2020 2020 2020 2020 2827 3131              ('11
+00022980: 3131 2e32 2e33 2e34 272c 2027 656e 7465  11.2.3.4', 'ente
+00022990: 7220 7661 6c69 6420 4950 7634 2061 6464  r valid IPv4 add
+000229a0: 7265 7373 2729 0a20 2020 2020 2020 2020  ress').         
+000229b0: 2020 203e 3e3e 2049 535f 4950 5634 2829     >>> IS_IPV4()
+000229c0: 2827 3031 3131 2e32 2e33 2e34 2729 0a20  ('0111.2.3.4'). 
+000229d0: 2020 2020 2020 2020 2020 2028 2730 3131             ('011
+000229e0: 312e 322e 332e 3427 2c20 2765 6e74 6572  1.2.3.4', 'enter
+000229f0: 2076 616c 6964 2049 5076 3420 6164 6472   valid IPv4 addr
+00022a00: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00022a10: 2020 3e3e 3e20 4953 5f49 5056 3428 2928    >>> IS_IPV4()(
+00022a20: 2732 3536 2e32 2e33 2e34 2729 0a20 2020  '256.2.3.4').   
+00022a30: 2020 2020 2020 2020 2028 2732 3536 2e32           ('256.2
+00022a40: 2e33 2e34 272c 2027 656e 7465 7220 7661  .3.4', 'enter va
+00022a50: 6c69 6420 4950 7634 2061 6464 7265 7373  lid IPv4 address
+00022a60: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+00022a70: 3e3e 2049 535f 4950 5634 2829 2827 3330  >> IS_IPV4()('30
+00022a80: 302e 322e 332e 3427 290a 2020 2020 2020  0.2.3.4').      
+00022a90: 2020 2020 2020 2827 3330 302e 322e 332e        ('300.2.3.
+00022aa0: 3427 2c20 2765 6e74 6572 2076 616c 6964  4', 'enter valid
+00022ab0: 2049 5076 3420 6164 6472 6573 7327 290a   IPv4 address').
+00022ac0: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00022ad0: 4953 5f49 5056 3428 6d69 6e69 703d 2731  IS_IPV4(minip='1
+00022ae0: 2e32 2e33 2e34 272c 206d 6178 6970 3d27  .2.3.4', maxip='
+00022af0: 312e 322e 332e 3427 2928 2731 2e32 2e33  1.2.3.4')('1.2.3
+00022b00: 2e34 2729 0a20 2020 2020 2020 2020 2020  .4').           
+00022b10: 2028 2731 2e32 2e33 2e34 272c 204e 6f6e   ('1.2.3.4', Non
+00022b20: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+00022b30: 3e3e 2049 535f 4950 5634 286d 696e 6970  >> IS_IPV4(minip
+00022b40: 3d27 312e 322e 332e 3527 2c20 6d61 7869  ='1.2.3.5', maxi
+00022b50: 703d 2731 2e32 2e33 2e39 272c 2065 7272  p='1.2.3.9', err
+00022b60: 6f72 5f6d 6573 7361 6765 3d27 4261 6420  or_message='Bad 
+00022b70: 6970 2729 2827 312e 322e 332e 3427 290a  ip')('1.2.3.4').
+00022b80: 2020 2020 2020 2020 2020 2020 2827 312e              ('1.
+00022b90: 322e 332e 3427 2c20 2762 6164 2069 7027  2.3.4', 'bad ip'
+00022ba0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00022bb0: 3e20 4953 5f49 5056 3428 6d61 7869 703d  > IS_IPV4(maxip=
+00022bc0: 2731 2e32 2e33 2e34 272c 2069 6e76 6572  '1.2.3.4', inver
+00022bd0: 743d 5472 7565 2928 2731 3237 2e30 2e30  t=True)('127.0.0
+00022be0: 2e31 2729 0a20 2020 2020 2020 2020 2020  .1').           
+00022bf0: 2028 2731 3237 2e30 2e30 2e31 272c 204e   ('127.0.0.1', N
+00022c00: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00022c10: 203e 3e3e 2049 535f 4950 5634 286d 6178   >>> IS_IPV4(max
+00022c20: 6970 3d27 312e 322e 332e 3427 2c20 696e  ip='1.2.3.4', in
+00022c30: 7665 7274 3d54 7275 6529 2827 312e 322e  vert=True)('1.2.
+00022c40: 332e 3427 290a 2020 2020 2020 2020 2020  3.4').          
+00022c50: 2020 2827 312e 322e 332e 3427 2c20 2765    ('1.2.3.4', 'e
+00022c60: 6e74 6572 2076 616c 6964 2049 5076 3420  nter valid IPv4 
+00022c70: 6164 6472 6573 7327 290a 2020 2020 2020  address').      
+00022c80: 2020 2020 2020 3e3e 3e20 4953 5f49 5056        >>> IS_IPV
+00022c90: 3428 6973 5f6c 6f63 616c 686f 7374 3d54  4(is_localhost=T
+00022ca0: 7275 6529 2827 3132 372e 302e 302e 3127  rue)('127.0.0.1'
+00022cb0: 290a 2020 2020 2020 2020 2020 2020 2827  ).            ('
+00022cc0: 3132 372e 302e 302e 3127 2c20 4e6f 6e65  127.0.0.1', None
+00022cd0: 290a 2020 2020 2020 2020 2020 2020 3e3e  ).            >>
+00022ce0: 3e20 4953 5f49 5056 3428 6973 5f6c 6f63  > IS_IPV4(is_loc
+00022cf0: 616c 686f 7374 3d54 7275 6529 2827 312e  alhost=True)('1.
+00022d00: 322e 332e 3427 290a 2020 2020 2020 2020  2.3.4').        
+00022d10: 2020 2020 2827 312e 322e 332e 3427 2c20      ('1.2.3.4', 
+00022d20: 2765 6e74 6572 2076 616c 6964 2049 5076  'enter valid IPv
+00022d30: 3420 6164 6472 6573 7327 290a 2020 2020  4 address').    
+00022d40: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00022d50: 5056 3428 6973 5f6c 6f63 616c 686f 7374  PV4(is_localhost
+00022d60: 3d46 616c 7365 2928 2731 3237 2e30 2e30  =False)('127.0.0
+00022d70: 2e31 2729 0a20 2020 2020 2020 2020 2020  .1').           
+00022d80: 2028 2731 3237 2e30 2e30 2e31 272c 2027   ('127.0.0.1', '
+00022d90: 656e 7465 7220 7661 6c69 6420 4950 7634  enter valid IPv4
+00022da0: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+00022db0: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00022dc0: 5634 286d 6178 6970 3d27 3130 302e 302e  V4(maxip='100.0.
+00022dd0: 302e 3027 2c20 6973 5f6c 6f63 616c 686f  0.0', is_localho
+00022de0: 7374 3d54 7275 6529 2827 3132 372e 302e  st=True)('127.0.
+00022df0: 302e 3127 290a 2020 2020 2020 2020 2020  0.1').          
+00022e00: 2020 2827 3132 372e 302e 302e 3127 2c20    ('127.0.0.1', 
+00022e10: 2765 6e74 6572 2076 616c 6964 2049 5076  'enter valid IPv
+00022e20: 3420 6164 6472 6573 7327 290a 0a20 2020  4 address')..   
+00022e30: 2022 2222 0a0a 2020 2020 5245 4745 585f   """..    REGEX_
+00022e40: 4950 5634 203d 2072 652e 636f 6d70 696c  IPV4 = re.compil
+00022e50: 6528 0a20 2020 2020 2020 2072 225e 2828  e(.        r"^((
+00022e60: 5b31 2d39 5d3f 5c64 7c31 5c64 5c64 7c32  [1-9]?\d|1\d\d|2
+00022e70: 5b30 2d34 5d5c 647c 3235 5b30 2d35 5d29  [0-4]\d|25[0-5])
+00022e80: 5c2e 297b 337d 285b 312d 395d 3f5c 647c  \.){3}([1-9]?\d|
+00022e90: 315c 645c 647c 325b 302d 345d 5c64 7c32  1\d\d|2[0-4]\d|2
+00022ea0: 355b 302d 355d 2924 220a 2020 2020 290a  5[0-5])$".    ).
+00022eb0: 2020 2020 6e75 6d62 6572 7320 3d20 2831      numbers = (1
+00022ec0: 3637 3737 3231 362c 2036 3535 3336 2c20  6777216, 65536, 
+00022ed0: 3235 362c 2031 290a 2020 2020 6c6f 6361  256, 1).    loca
+00022ee0: 6c68 6f73 7420 3d20 3231 3330 3730 3634  lhost = 21307064
+00022ef0: 3333 0a20 2020 2070 7269 7661 7465 203d  33.    private =
+00022f00: 2028 2832 3838 3637 3239 3732 382c 2032   ((2886729728, 2
+00022f10: 3838 3637 3935 3236 3329 2c20 2833 3233  886795263), (323
+00022f20: 3232 3335 3532 302c 2033 3233 3233 3031  2235520, 3232301
+00022f30: 3035 3529 290a 2020 2020 6175 746f 6d61  055)).    automa
+00022f40: 7469 6320 3d20 2832 3835 3139 3935 3634  tic = (285199564
+00022f50: 382c 2032 3835 3230 3631 3138 3329 0a0a  8, 2852061183)..
+00022f60: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00022f70: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00022f80: 2020 2020 2020 2020 6d69 6e69 703d 2230          minip="0
+00022f90: 2e30 2e30 2e30 222c 0a20 2020 2020 2020  .0.0.0",.       
+00022fa0: 206d 6178 6970 3d22 3235 352e 3235 352e   maxip="255.255.
+00022fb0: 3235 352e 3235 3522 2c0a 2020 2020 2020  255.255",.      
+00022fc0: 2020 696e 7665 7274 3d46 616c 7365 2c0a    invert=False,.
+00022fd0: 2020 2020 2020 2020 6973 5f6c 6f63 616c          is_local
+00022fe0: 686f 7374 3d4e 6f6e 652c 0a20 2020 2020  host=None,.     
+00022ff0: 2020 2069 735f 7072 6976 6174 653d 4e6f     is_private=No
+00023000: 6e65 2c0a 2020 2020 2020 2020 6973 5f61  ne,.        is_a
+00023010: 7574 6f6d 6174 6963 3d4e 6f6e 652c 0a20  utomatic=None,. 
+00023020: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+00023030: 7361 6765 3d22 456e 7465 7220 7661 6c69  sage="Enter vali
+00023040: 6420 4950 7634 2061 6464 7265 7373 222c  d IPv4 address",
+00023050: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00023060: 666f 7220 6e2c 2076 616c 7565 2069 6e20  for n, value in 
+00023070: 656e 756d 6572 6174 6528 286d 696e 6970  enumerate((minip
+00023080: 2c20 6d61 7869 7029 293a 0a20 2020 2020  , maxip)):.     
+00023090: 2020 2020 2020 2074 656d 7020 3d20 5b5d         temp = []
+000230a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000230b0: 6973 696e 7374 616e 6365 2876 616c 7565  isinstance(value
+000230c0: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+000230d0: 2020 2020 2020 2020 7465 6d70 2e61 7070          temp.app
+000230e0: 656e 6428 7661 6c75 652e 7370 6c69 7428  end(value.split(
+000230f0: 222e 2229 290a 2020 2020 2020 2020 2020  ".")).          
+00023100: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+00023110: 6528 7661 6c75 652c 2028 6c69 7374 2c20  e(value, (list, 
+00023120: 7475 706c 6529 293a 0a20 2020 2020 2020  tuple)):.       
+00023130: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
+00023140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023150: 2020 6c65 6e28 7661 6c75 6529 0a20 2020    len(value).   
+00023160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023170: 203d 3d20 6c65 6e28 5b69 7465 6d20 666f   == len([item fo
+00023180: 7220 6974 656d 2069 6e20 7661 6c75 6520  r item in value 
+00023190: 6966 2069 7369 6e73 7461 6e63 6528 6974  if isinstance(it
+000231a0: 656d 2c20 696e 7429 5d29 0a20 2020 2020  em, int)]).     
+000231b0: 2020 2020 2020 2020 2020 2020 2020 203d                 =
+000231c0: 3d20 340a 2020 2020 2020 2020 2020 2020  = 4.            
+000231d0: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
+000231e0: 2020 2020 2020 2020 2020 2074 656d 702e             temp.
+000231f0: 6170 7065 6e64 2876 616c 7565 290a 2020  append(value).  
+00023200: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00023210: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00023220: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+00023230: 2069 6e20 7661 6c75 653a 0a20 2020 2020   in value:.     
+00023240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023250: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00023260: 2869 7465 6d2c 2073 7472 293a 0a20 2020  (item, str):.   
+00023270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023280: 2020 2020 2020 2020 2074 656d 702e 6170           temp.ap
+00023290: 7065 6e64 2869 7465 6d2e 7370 6c69 7428  pend(item.split(
+000232a0: 222e 2229 290a 2020 2020 2020 2020 2020  ".")).          
+000232b0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+000232c0: 6966 2069 7369 6e73 7461 6e63 6528 6974  if isinstance(it
+000232d0: 656d 2c20 286c 6973 742c 2074 7570 6c65  em, (list, tuple
+000232e0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+000232f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023300: 7465 6d70 2e61 7070 656e 6428 6974 656d  temp.append(item
+00023310: 290a 2020 2020 2020 2020 2020 2020 6e75  ).            nu
+00023320: 6d62 6572 7320 3d20 5b5d 0a20 2020 2020  mbers = [].     
+00023330: 2020 2020 2020 2066 6f72 2069 7465 6d20         for item 
+00023340: 696e 2074 656d 703a 0a20 2020 2020 2020  in temp:.       
+00023350: 2020 2020 2020 2020 206e 756d 6265 7220           number 
+00023360: 3d20 300a 2020 2020 2020 2020 2020 2020  = 0.            
+00023370: 2020 2020 666f 7220 692c 206a 2069 6e20      for i, j in 
+00023380: 7a69 7028 7365 6c66 2e6e 756d 6265 7273  zip(self.numbers
+00023390: 2c20 6974 656d 293a 0a20 2020 2020 2020  , item):.       
+000233a0: 2020 2020 2020 2020 2020 2020 206e 756d               num
+000233b0: 6265 7220 2b3d 2069 202a 2069 6e74 286a  ber += i * int(j
+000233c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000233d0: 2020 6e75 6d62 6572 732e 6170 7065 6e64    numbers.append
+000233e0: 286e 756d 6265 7229 0a20 2020 2020 2020  (number).       
+000233f0: 2020 2020 2069 6620 6e20 3d3d 2030 3a0a       if n == 0:.
+00023400: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023410: 7365 6c66 2e6d 696e 6970 203d 206e 756d  self.minip = num
+00023420: 6265 7273 0a20 2020 2020 2020 2020 2020  bers.           
+00023430: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00023440: 2020 2020 2020 2073 656c 662e 6d61 7869         self.maxi
+00023450: 7020 3d20 6e75 6d62 6572 730a 2020 2020  p = numbers.    
+00023460: 2020 2020 7365 6c66 2e69 6e76 6572 7420      self.invert 
+00023470: 3d20 696e 7665 7274 0a20 2020 2020 2020  = invert.       
+00023480: 2073 656c 662e 6973 5f6c 6f63 616c 686f   self.is_localho
+00023490: 7374 203d 2069 735f 6c6f 6361 6c68 6f73  st = is_localhos
+000234a0: 740a 2020 2020 2020 2020 7365 6c66 2e69  t.        self.i
+000234b0: 735f 7072 6976 6174 6520 3d20 6973 5f70  s_private = is_p
+000234c0: 7269 7661 7465 0a20 2020 2020 2020 2073  rivate.        s
+000234d0: 656c 662e 6973 5f61 7574 6f6d 6174 6963  elf.is_automatic
+000234e0: 203d 2069 735f 6175 746f 6d61 7469 630a   = is_automatic.
+000234f0: 2020 2020 2020 2020 7365 6c66 2e65 7272          self.err
+00023500: 6f72 5f6d 6573 7361 6765 203d 2065 7272  or_message = err
+00023510: 6f72 5f6d 6573 7361 6765 0a0a 2020 2020  or_message..    
+00023520: 6465 6620 7661 6c69 6461 7465 2873 656c  def validate(sel
+00023530: 662c 2076 616c 7565 2c20 7265 636f 7264  f, value, record
+00023540: 5f69 643d 4e6f 6e65 293a 0a20 2020 2020  _id=None):.     
+00023550: 2020 2069 6620 7265 2e6d 6174 6368 2873     if re.match(s
+00023560: 656c 662e 5245 4745 585f 4950 5634 2c20  elf.REGEX_IPV4, 
+00023570: 7661 6c75 6529 3a0a 2020 2020 2020 2020  value):.        
+00023580: 2020 2020 6e75 6d62 6572 203d 2030 0a20      number = 0. 
+00023590: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+000235a0: 2c20 6a20 696e 207a 6970 2873 656c 662e  , j in zip(self.
+000235b0: 6e75 6d62 6572 732c 2076 616c 7565 2e73  numbers, value.s
+000235c0: 706c 6974 2822 2e22 2929 3a0a 2020 2020  plit(".")):.    
+000235d0: 2020 2020 2020 2020 2020 2020 6e75 6d62              numb
+000235e0: 6572 202b 3d20 6920 2a20 696e 7428 6a29  er += i * int(j)
+000235f0: 0a20 2020 2020 2020 2020 2020 206f 6b20  .            ok 
+00023600: 3d20 4661 6c73 650a 0a20 2020 2020 2020  = False..       
+00023610: 2020 2020 2066 6f72 2062 6f74 746f 6d2c       for bottom,
+00023620: 2074 6f70 2069 6e20 7a69 7028 7365 6c66   top in zip(self
+00023630: 2e6d 696e 6970 2c20 7365 6c66 2e6d 6178  .minip, self.max
+00023640: 6970 293a 0a20 2020 2020 2020 2020 2020  ip):.           
+00023650: 2020 2020 2069 6620 7365 6c66 2e69 6e76       if self.inv
+00023660: 6572 7420 213d 2028 626f 7474 6f6d 203c  ert != (bottom <
+00023670: 3d20 6e75 6d62 6572 203c 3d20 746f 7029  = number <= top)
+00023680: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00023690: 2020 2020 2020 6f6b 203d 2054 7275 650a        ok = True.
+000236a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000236b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000236c0: 2020 6f6b 0a20 2020 2020 2020 2020 2020    ok.           
+000236d0: 2020 2020 2061 6e64 2073 656c 662e 6973       and self.is
+000236e0: 5f6c 6f63 616c 686f 7374 2069 7320 6e6f  _localhost is no
+000236f0: 7420 4e6f 6e65 0a20 2020 2020 2020 2020  t None.         
+00023700: 2020 2020 2020 2061 6e64 2073 656c 662e         and self.
+00023710: 6973 5f6c 6f63 616c 686f 7374 2021 3d20  is_localhost != 
+00023720: 286e 756d 6265 7220 3d3d 2073 656c 662e  (number == self.
+00023730: 6c6f 6361 6c68 6f73 7429 0a20 2020 2020  localhost).     
+00023740: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+00023750: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
+00023760: 616c 7365 0a0a 2020 2020 2020 2020 2020  alse..          
+00023770: 2020 7072 6976 6174 6520 3d20 616e 7928    private = any(
+00023780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023790: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
+000237a0: 2020 2020 2020 2070 7269 7661 7465 5f6e         private_n
+000237b0: 756d 6265 725b 305d 203c 3d20 6e75 6d62  umber[0] <= numb
+000237c0: 6572 203c 3d20 7072 6976 6174 655f 6e75  er <= private_nu
+000237d0: 6d62 6572 5b31 5d0a 2020 2020 2020 2020  mber[1].        
+000237e0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000237f0: 7072 6976 6174 655f 6e75 6d62 6572 2069  private_number i
+00023800: 6e20 7365 6c66 2e70 7269 7661 7465 0a20  n self.private. 
+00023810: 2020 2020 2020 2020 2020 2020 2020 205d                 ]
+00023820: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00023830: 2020 2020 2020 2020 2020 2069 6620 6f6b             if ok
+00023840: 2061 6e64 2073 656c 662e 6973 5f70 7269   and self.is_pri
+00023850: 7661 7465 2069 7320 6e6f 7420 4e6f 6e65  vate is not None
+00023860: 2061 6e64 2073 656c 662e 6973 5f70 7269   and self.is_pri
+00023870: 7661 7465 2021 3d20 7072 6976 6174 653a  vate != private:
+00023880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023890: 206f 6b20 3d20 4661 6c73 650a 0a20 2020   ok = False..   
+000238a0: 2020 2020 2020 2020 2061 7574 6f6d 6174           automat
+000238b0: 6963 203d 2073 656c 662e 6175 746f 6d61  ic = self.automa
+000238c0: 7469 635b 305d 203c 3d20 6e75 6d62 6572  tic[0] <= number
+000238d0: 203c 3d20 7365 6c66 2e61 7574 6f6d 6174   <= self.automat
+000238e0: 6963 5b31 5d0a 2020 2020 2020 2020 2020  ic[1].          
+000238f0: 2020 6966 206f 6b20 616e 6420 7365 6c66    if ok and self
+00023900: 2e69 735f 6175 746f 6d61 7469 6320 6973  .is_automatic is
+00023910: 206e 6f74 204e 6f6e 6520 616e 6420 7365   not None and se
+00023920: 6c66 2e69 735f 6175 746f 6d61 7469 6320  lf.is_automatic 
+00023930: 213d 2061 7574 6f6d 6174 6963 3a0a 2020  != automatic:.  
+00023940: 2020 2020 2020 2020 2020 2020 2020 6f6b                ok
+00023950: 203d 2046 616c 7365 0a0a 2020 2020 2020   = False..      
+00023960: 2020 2020 2020 6966 206f 6b3a 0a20 2020        if ok:.   
+00023970: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00023980: 7572 6e20 7661 6c75 650a 0a20 2020 2020  urn value..     
+00023990: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+000239a0: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+000239b0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+000239c0: 726f 725f 6d65 7373 6167 6529 290a 0a0a  ror_message))...
+000239d0: 636c 6173 7320 4953 5f49 5056 3628 5661  class IS_IPV6(Va
+000239e0: 6c69 6461 746f 7229 3a0a 2020 2020 2222  lidator):.    ""
+000239f0: 220a 2020 2020 4368 6563 6b73 2069 6620  ".    Checks if 
+00023a00: 6669 656c 6427 7320 7661 6c75 6520 6973  field's value is
+00023a10: 2061 6e20 4950 2076 6572 7369 6f6e 2036   an IP version 6
+00023a20: 2061 6464 7265 7373 2e0a 0a20 2020 2055   address...    U
+00023a30: 7365 7320 7468 6520 6970 6164 6472 6573  ses the ipaddres
+00023a40: 7320 6672 6f6d 2074 6865 2050 7974 686f  s from the Pytho
+00023a50: 6e20 3320 7374 616e 6461 7264 206c 6962  n 3 standard lib
+00023a60: 7261 7279 0a20 2020 2061 6e64 2069 7473  rary.    and its
+00023a70: 2050 7974 686f 6e20 3220 6261 636b 706f   Python 2 backpo
+00023a80: 7274 2028 696e 2063 6f6e 7472 6962 2f69  rt (in contrib/i
+00023a90: 7061 6464 7265 7373 2e70 7929 2e0a 0a20  paddress.py)... 
+00023aa0: 2020 2041 7267 733a 0a20 2020 2020 2020     Args:.       
+00023ab0: 2069 735f 7072 6976 6174 653a 204e 6f6e   is_private: Non
+00023ac0: 6520 2864 6566 6175 6c74 293a 2069 6e64  e (default): ind
+00023ad0: 6966 6665 7265 6e74 0a20 2020 2020 2020  ifferent.       
+00023ae0: 2020 2020 2020 2020 2020 2020 2054 7275               Tru
+00023af0: 6520 2865 6e66 6f72 6365 293a 2061 6464  e (enforce): add
+00023b00: 7265 7373 206d 7573 7420 6265 2069 6e20  ress must be in 
+00023b10: 6663 3030 3a3a 2f37 2072 616e 6765 0a20  fc00::/7 range. 
+00023b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023b30: 2020 2046 616c 7365 2028 666f 7262 6964     False (forbid
+00023b40: 293a 2061 6464 7265 7373 206d 7573 7420  ): address must 
+00023b50: 4e4f 5420 6265 2069 6e20 6663 3030 3a3a  NOT be in fc00::
+00023b60: 2f37 2072 616e 6765 0a20 2020 2020 2020  /7 range.       
+00023b70: 2069 735f 6c69 6e6b 5f6c 6f63 616c 3a20   is_link_local: 
+00023b80: 5361 6d65 2061 7320 6162 6f76 6520 6275  Same as above bu
+00023b90: 7420 7573 6573 2066 6538 303a 3a2f 3130  t uses fe80::/10
+00023ba0: 2072 616e 6765 0a20 2020 2020 2020 2069   range.        i
+00023bb0: 735f 7265 7365 7276 6564 3a20 5361 6d65  s_reserved: Same
+00023bc0: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
+00023bd0: 6573 2049 4554 4620 7265 7365 7276 6564  es IETF reserved
+00023be0: 2072 616e 6765 0a20 2020 2020 2020 2069   range.        i
+00023bf0: 735f 6d75 6c74 6963 6173 743a 2053 616d  s_multicast: Sam
+00023c00: 6520 6173 2061 626f 7665 2062 7574 2075  e as above but u
+00023c10: 7365 7320 6666 3030 3a3a 2f38 2072 616e  ses ff00::/8 ran
+00023c20: 6765 0a20 2020 2020 2020 2069 735f 726f  ge.        is_ro
+00023c30: 7574 6561 626c 653a 2053 696d 696c 6172  uteable: Similar
+00023c40: 2074 6f20 6162 6f76 6520 6275 7420 656e   to above but en
+00023c50: 666f 7263 6573 206e 6f74 2070 7269 7661  forces not priva
+00023c60: 7465 2c20 6c69 6e6b 5f6c 6f63 616c 2c0a  te, link_local,.
+00023c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023c80: 2020 2020 2020 7265 7365 7276 6564 206f        reserved o
+00023c90: 7220 6d75 6c74 6963 6173 740a 2020 2020  r multicast.    
+00023ca0: 2020 2020 6973 5f36 746f 343a 2053 616d      is_6to4: Sam
+00023cb0: 6520 6173 2061 626f 7665 2062 7574 2075  e as above but u
+00023cc0: 7365 7320 3230 3032 3a3a 2f31 3620 7261  ses 2002::/16 ra
+00023cd0: 6e67 650a 2020 2020 2020 2020 6973 5f74  nge.        is_t
+00023ce0: 6572 6564 6f3a 2053 616d 6520 6173 2061  eredo: Same as a
+00023cf0: 626f 7665 2062 7574 2075 7365 7320 3230  bove but uses 20
+00023d00: 3031 3a3a 2f33 3220 7261 6e67 650a 2020  01::/32 range.  
+00023d10: 2020 2020 2020 7375 626e 6574 733a 2076        subnets: v
+00023d20: 616c 7565 206d 7573 7420 6265 2061 206d  alue must be a m
+00023d30: 656d 6265 7220 6f66 2061 7420 6c65 6173  ember of at leas
+00023d40: 7420 6f6e 6520 6672 6f6d 206c 6973 7420  t one from list 
+00023d50: 6f66 2073 7562 6e65 7473 0a0a 2020 2020  of subnets..    
+00023d60: 4578 616d 706c 6573 3a0a 2020 2020 2020  Examples:.      
+00023d70: 2020 4368 6563 6b20 666f 7220 7661 6c69    Check for vali
+00023d80: 6420 4950 7636 2061 6464 7265 7373 3a0a  d IPv6 address:.
+00023d90: 0a20 2020 2020 2020 2020 2020 2049 4e50  .            INP
+00023da0: 5554 285f 7479 7065 3d27 7465 7874 272c  UT(_type='text',
+00023db0: 205f 6e61 6d65 3d27 6e61 6d65 272c 2072   _name='name', r
+00023dc0: 6571 7569 7265 733d 4953 5f49 5056 3628  equires=IS_IPV6(
+00023dd0: 2929 0a0a 2020 2020 2020 2020 4368 6563  ))..        Chec
+00023de0: 6b20 666f 7220 7661 6c69 6420 4950 7636  k for valid IPv6
+00023df0: 2061 6464 7265 7373 2069 7320 6120 6c69   address is a li
+00023e00: 6e6b 5f6c 6f63 616c 2061 6464 7265 7373  nk_local address
+00023e10: 3a0a 0a20 2020 2020 2020 2020 2020 2049  :..            I
+00023e20: 4e50 5554 285f 7479 7065 3d27 7465 7874  NPUT(_type='text
+00023e30: 272c 205f 6e61 6d65 3d27 6e61 6d65 272c  ', _name='name',
+00023e40: 2072 6571 7569 7265 733d 4953 5f49 5056   requires=IS_IPV
+00023e50: 3628 6973 5f6c 696e 6b5f 6c6f 6361 6c3d  6(is_link_local=
+00023e60: 5472 7565 2929 0a0a 2020 2020 2020 2020  True))..        
+00023e70: 4368 6563 6b20 666f 7220 7661 6c69 6420  Check for valid 
+00023e80: 4950 7636 2061 6464 7265 7373 2074 6861  IPv6 address tha
+00023e90: 7420 6973 2049 6e74 6572 6e65 7420 726f  t is Internet ro
+00023ea0: 7574 6561 626c 653a 0a0a 2020 2020 2020  uteable:..      
+00023eb0: 2020 2020 2020 494e 5055 5428 5f74 7970        INPUT(_typ
+00023ec0: 653d 2774 6578 7427 2c20 5f6e 616d 653d  e='text', _name=
+00023ed0: 276e 616d 6527 2c20 7265 7175 6972 6573  'name', requires
+00023ee0: 3d49 535f 4950 5636 2869 735f 726f 7574  =IS_IPV6(is_rout
+00023ef0: 6561 626c 653d 5472 7565 2929 0a0a 2020  eable=True))..  
+00023f00: 2020 2020 2020 4368 6563 6b20 666f 7220        Check for 
+00023f10: 7661 6c69 6420 4950 7636 2061 6464 7265  valid IPv6 addre
+00023f20: 7373 2069 6e20 7370 6563 6966 6965 6420  ss in specified 
+00023f30: 7375 626e 6574 3a0a 0a20 2020 2020 2020  subnet:..       
+00023f40: 2020 2020 2049 4e50 5554 285f 7479 7065       INPUT(_type
+00023f50: 3d27 7465 7874 272c 205f 6e61 6d65 3d27  ='text', _name='
+00023f60: 6e61 6d65 272c 2072 6571 7569 7265 733d  name', requires=
+00023f70: 4953 5f49 5056 3628 7375 626e 6574 733d  IS_IPV6(subnets=
+00023f80: 5b27 3230 3031 3a3a 2f33 3227 5d29 0a0a  ['2001::/32'])..
+00023f90: 2020 2020 2020 2020 2020 2020 3e3e 3e20              >>> 
+00023fa0: 4953 5f49 5056 3628 2928 2766 6538 303a  IS_IPV6()('fe80:
+00023fb0: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+00023fc0: 6233 6166 2729 0a20 2020 2020 2020 2020  b3af').         
+00023fd0: 2020 2028 2766 6538 303a 3a31 3236 633a     ('fe80::126c:
+00023fe0: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
+00023ff0: 204e 6f6e 6529 0a20 2020 2020 2020 2020   None).         
+00024000: 2020 203e 3e3e 2049 535f 4950 5636 2829     >>> IS_IPV6()
+00024010: 2827 3139 322e 3136 382e 312e 3127 290a  ('192.168.1.1').
+00024020: 2020 2020 2020 2020 2020 2020 2827 3139              ('19
+00024030: 322e 3136 382e 312e 3127 2c20 2765 6e74  2.168.1.1', 'ent
+00024040: 6572 2076 616c 6964 2049 5076 3620 6164  er valid IPv6 ad
+00024050: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
+00024060: 2020 2020 3e3e 3e20 4953 5f49 5056 3628      >>> IS_IPV6(
+00024070: 6572 726f 725f 6d65 7373 6167 653d 2742  error_message='B
+00024080: 6164 2069 7027 2928 2731 3932 2e31 3638  ad ip')('192.168
+00024090: 2e31 2e31 2729 0a20 2020 2020 2020 2020  .1.1').         
+000240a0: 2020 2028 2731 3932 2e31 3638 2e31 2e31     ('192.168.1.1
+000240b0: 272c 2027 6261 6420 6970 2729 0a20 2020  ', 'bad ip').   
+000240c0: 2020 2020 2020 2020 203e 3e3e 2049 535f           >>> IS_
+000240d0: 4950 5636 2869 735f 6c69 6e6b 5f6c 6f63  IPV6(is_link_loc
+000240e0: 616c 3d54 7275 6529 2827 6665 3830 3a3a  al=True)('fe80::
+000240f0: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
+00024100: 3361 6627 290a 2020 2020 2020 2020 2020  3af').          
+00024110: 2020 2827 6665 3830 3a3a 3132 3663 3a38    ('fe80::126c:8
+00024120: 6666 613a 6665 3232 3a62 3361 6627 2c20  ffa:fe22:b3af', 
+00024130: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
+00024140: 2020 3e3e 3e20 4953 5f49 5056 3628 6973    >>> IS_IPV6(is
+00024150: 5f6c 696e 6b5f 6c6f 6361 6c3d 4661 6c73  _link_local=Fals
+00024160: 6529 2827 6665 3830 3a3a 3132 3663 3a38  e)('fe80::126c:8
+00024170: 6666 613a 6665 3232 3a62 3361 6627 290a  ffa:fe22:b3af').
+00024180: 2020 2020 2020 2020 2020 2020 2827 6665              ('fe
+00024190: 3830 3a3a 3132 3663 3a38 6666 613a 6665  80::126c:8ffa:fe
+000241a0: 3232 3a62 3361 6627 2c20 2765 6e74 6572  22:b3af', 'enter
+000241b0: 2076 616c 6964 2049 5076 3620 6164 6472   valid IPv6 addr
+000241c0: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+000241d0: 2020 3e3e 3e20 4953 5f49 5056 3628 6973    >>> IS_IPV6(is
+000241e0: 5f6c 696e 6b5f 6c6f 6361 6c3d 5472 7565  _link_local=True
+000241f0: 2928 2732 3030 313a 3a31 3236 633a 3866  )('2001::126c:8f
+00024200: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
+00024210: 2020 2020 2020 2020 2020 2028 2732 3030             ('200
+00024220: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
+00024230: 323a 6233 6166 272c 2027 656e 7465 7220  2:b3af', 'enter 
+00024240: 7661 6c69 6420 4950 7636 2061 6464 7265  valid IPv6 addre
+00024250: 7373 2729 0a20 2020 2020 2020 2020 2020  ss').           
+00024260: 203e 3e3e 2049 535f 4950 5636 2869 735f   >>> IS_IPV6(is_
+00024270: 6d75 6c74 6963 6173 743d 5472 7565 2928  multicast=True)(
+00024280: 2732 3030 313a 3a31 3236 633a 3866 6661  '2001::126c:8ffa
+00024290: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
+000242a0: 2020 2020 2020 2020 2028 2732 3030 313a           ('2001:
+000242b0: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+000242c0: 6233 6166 272c 2027 656e 7465 7220 7661  b3af', 'enter va
+000242d0: 6c69 6420 4950 7636 2061 6464 7265 7373  lid IPv6 address
+000242e0: 2729 0a20 2020 2020 2020 2020 2020 203e  ').            >
+000242f0: 3e3e 2049 535f 4950 5636 2869 735f 6d75  >> IS_IPV6(is_mu
+00024300: 6c74 6963 6173 743d 5472 7565 2928 2766  lticast=True)('f
+00024310: 6630 303a 3a31 3236 633a 3866 6661 3a66  f00::126c:8ffa:f
+00024320: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
+00024330: 2020 2020 2020 2028 2766 6630 303a 3a31         ('ff00::1
+00024340: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00024350: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
+00024360: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00024370: 5636 2869 735f 726f 7574 6561 626c 653d  V6(is_routeable=
+00024380: 5472 7565 2928 2732 3030 313a 3a31 3236  True)('2001::126
+00024390: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+000243a0: 2729 0a20 2020 2020 2020 2020 2020 2028  ').            (
+000243b0: 2732 3030 313a 3a31 3236 633a 3866 6661  '2001::126c:8ffa
+000243c0: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
+000243d0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+000243e0: 3e3e 2049 535f 4950 5636 2869 735f 726f  >> IS_IPV6(is_ro
+000243f0: 7574 6561 626c 653d 5472 7565 2928 2766  uteable=True)('f
+00024400: 6630 303a 3a31 3236 633a 3866 6661 3a66  f00::126c:8ffa:f
+00024410: 6532 323a 6233 6166 2729 0a20 2020 2020  e22:b3af').     
+00024420: 2020 2020 2020 2028 2766 6630 303a 3a31         ('ff00::1
+00024430: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00024440: 6166 272c 2027 656e 7465 7220 7661 6c69  af', 'enter vali
+00024450: 6420 4950 7636 2061 6464 7265 7373 2729  d IPv6 address')
+00024460: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+00024470: 2049 535f 4950 5636 2873 7562 6e65 7473   IS_IPV6(subnets
+00024480: 3d27 3230 3031 3a3a 2f33 3227 2928 2732  ='2001::/32')('2
+00024490: 3030 313a 3a38 6666 613a 6665 3232 3a62  001::8ffa:fe22:b
+000244a0: 3361 6627 290a 2020 2020 2020 2020 2020  3af').          
+000244b0: 2020 2827 3230 3031 3a3a 3866 6661 3a66    ('2001::8ffa:f
+000244c0: 6532 323a 6233 6166 272c 204e 6f6e 6529  e22:b3af', None)
+000244d0: 0a20 2020 2020 2020 2020 2020 203e 3e3e  .            >>>
+000244e0: 2049 535f 4950 5636 2873 7562 6e65 7473   IS_IPV6(subnets
+000244f0: 3d27 6662 3030 3a3a 2f38 2729 2827 3230  ='fb00::/8')('20
+00024500: 3031 3a3a 3866 6661 3a66 6532 323a 6233  01::8ffa:fe22:b3
+00024510: 6166 2729 0a20 2020 2020 2020 2020 2020  af').           
+00024520: 2028 2732 3030 313a 3a38 6666 613a 6665   ('2001::8ffa:fe
+00024530: 3232 3a62 3361 6627 2c20 2765 6e74 6572  22:b3af', 'enter
+00024540: 2076 616c 6964 2049 5076 3620 6164 6472   valid IPv6 addr
+00024550: 6573 7327 290a 2020 2020 2020 2020 2020  ess').          
+00024560: 2020 3e3e 3e20 4953 5f49 5056 3628 7375    >>> IS_IPV6(su
+00024570: 626e 6574 733d 5b27 6663 3030 3a3a 2f38  bnets=['fc00::/8
+00024580: 272c 2732 3030 313a 3a2f 3332 275d 2928  ','2001::/32'])(
+00024590: 2732 3030 313a 3a38 6666 613a 6665 3232  '2001::8ffa:fe22
+000245a0: 3a62 3361 6627 290a 2020 2020 2020 2020  :b3af').        
+000245b0: 2020 2020 2827 3230 3031 3a3a 3866 6661      ('2001::8ffa
+000245c0: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
+000245d0: 6529 0a20 2020 2020 2020 2020 2020 203e  e).            >
+000245e0: 3e3e 2049 535f 4950 5636 2873 7562 6e65  >> IS_IPV6(subne
+000245f0: 7473 3d27 696e 7661 6c69 6473 7562 6e65  ts='invalidsubne
+00024600: 7427 2928 2732 3030 313a 3a38 6666 613a  t')('2001::8ffa:
+00024610: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+00024620: 2020 2020 2020 2020 2827 3230 3031 3a3a          ('2001::
+00024630: 3866 6661 3a66 6532 323a 6233 6166 272c  8ffa:fe22:b3af',
+00024640: 2027 696e 7661 6c69 6420 7375 626e 6574   'invalid subnet
+00024650: 2070 726f 7669 6465 6427 290a 0a20 2020   provided')..   
+00024660: 2022 2222 0a0a 2020 2020 6465 6620 5f5f   """..    def __
+00024670: 696e 6974 5f5f 280a 2020 2020 2020 2020  init__(.        
+00024680: 7365 6c66 2c0a 2020 2020 2020 2020 6973  self,.        is
+00024690: 5f70 7269 7661 7465 3d4e 6f6e 652c 0a20  _private=None,. 
+000246a0: 2020 2020 2020 2069 735f 6c69 6e6b 5f6c         is_link_l
+000246b0: 6f63 616c 3d4e 6f6e 652c 0a20 2020 2020  ocal=None,.     
+000246c0: 2020 2069 735f 7265 7365 7276 6564 3d4e     is_reserved=N
+000246d0: 6f6e 652c 0a20 2020 2020 2020 2069 735f  one,.        is_
+000246e0: 6d75 6c74 6963 6173 743d 4e6f 6e65 2c0a  multicast=None,.
+000246f0: 2020 2020 2020 2020 6973 5f72 6f75 7465          is_route
+00024700: 6162 6c65 3d4e 6f6e 652c 0a20 2020 2020  able=None,.     
+00024710: 2020 2069 735f 3674 6f34 3d4e 6f6e 652c     is_6to4=None,
+00024720: 0a20 2020 2020 2020 2069 735f 7465 7265  .        is_tere
+00024730: 646f 3d4e 6f6e 652c 0a20 2020 2020 2020  do=None,.       
+00024740: 2073 7562 6e65 7473 3d4e 6f6e 652c 0a20   subnets=None,. 
+00024750: 2020 2020 2020 2065 7272 6f72 5f6d 6573         error_mes
+00024760: 7361 6765 3d22 456e 7465 7220 7661 6c69  sage="Enter vali
+00024770: 6420 4950 7636 2061 6464 7265 7373 222c  d IPv6 address",
+00024780: 0a20 2020 2029 3a0a 2020 2020 2020 2020  .    ):.        
+00024790: 7365 6c66 2e69 735f 7072 6976 6174 6520  self.is_private 
+000247a0: 3d20 6973 5f70 7269 7661 7465 0a20 2020  = is_private.   
+000247b0: 2020 2020 2073 656c 662e 6973 5f6c 696e       self.is_lin
+000247c0: 6b5f 6c6f 6361 6c20 3d20 6973 5f6c 696e  k_local = is_lin
+000247d0: 6b5f 6c6f 6361 6c0a 2020 2020 2020 2020  k_local.        
+000247e0: 7365 6c66 2e69 735f 7265 7365 7276 6564  self.is_reserved
+000247f0: 203d 2069 735f 7265 7365 7276 6564 0a20   = is_reserved. 
+00024800: 2020 2020 2020 2073 656c 662e 6973 5f6d         self.is_m
+00024810: 756c 7469 6361 7374 203d 2069 735f 6d75  ulticast = is_mu
+00024820: 6c74 6963 6173 740a 2020 2020 2020 2020  lticast.        
+00024830: 7365 6c66 2e69 735f 726f 7574 6561 626c  self.is_routeabl
+00024840: 6520 3d20 6973 5f72 6f75 7465 6162 6c65  e = is_routeable
+00024850: 0a20 2020 2020 2020 2073 656c 662e 6973  .        self.is
+00024860: 5f36 746f 3420 3d20 6973 5f36 746f 340a  _6to4 = is_6to4.
+00024870: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
+00024880: 7465 7265 646f 203d 2069 735f 7465 7265  teredo = is_tere
+00024890: 646f 0a20 2020 2020 2020 2073 656c 662e  do.        self.
+000248a0: 7375 626e 6574 7320 3d20 7375 626e 6574  subnets = subnet
+000248b0: 730a 2020 2020 2020 2020 7365 6c66 2e65  s.        self.e
+000248c0: 7272 6f72 5f6d 6573 7361 6765 203d 2065  rror_message = e
+000248d0: 7272 6f72 5f6d 6573 7361 6765 0a0a 2020  rror_message..  
+000248e0: 2020 6465 6620 7661 6c69 6461 7465 2873    def validate(s
+000248f0: 656c 662c 2076 616c 7565 2c20 7265 636f  elf, value, reco
+00024900: 7264 5f69 643d 4e6f 6e65 293a 0a20 2020  rd_id=None):.   
+00024910: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00024920: 2020 2020 2020 6970 203d 2069 7061 6464        ip = ipadd
+00024930: 7265 7373 2e49 5076 3641 6464 7265 7373  ress.IPv6Address
+00024940: 2874 6f5f 756e 6963 6f64 6528 7661 6c75  (to_unicode(valu
+00024950: 6529 290a 2020 2020 2020 2020 2020 2020  e)).            
+00024960: 6f6b 203d 2054 7275 650a 2020 2020 2020  ok = True.      
+00024970: 2020 6578 6365 7074 2069 7061 6464 7265    except ipaddre
+00024980: 7373 2e41 6464 7265 7373 5661 6c75 6545  ss.AddressValueE
+00024990: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+000249a0: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+000249b0: 6f6e 4572 726f 7228 7365 6c66 2e74 7261  onError(self.tra
+000249c0: 6e73 6c61 746f 7228 7365 6c66 2e65 7272  nslator(self.err
+000249d0: 6f72 5f6d 6573 7361 6765 2929 0a0a 2020  or_message))..  
+000249e0: 2020 2020 2020 6966 2073 656c 662e 7375        if self.su
+000249f0: 626e 6574 733a 0a20 2020 2020 2020 2020  bnets:.         
+00024a00: 2020 2023 2069 7465 7261 7465 2074 6872     # iterate thr
+00024a10: 6f75 6768 2073 656c 662e 7375 626e 6574  ough self.subnet
+00024a20: 7320 746f 2073 6565 2069 6620 7661 6c75  s to see if valu
+00024a30: 6520 6973 2061 206d 656d 6265 720a 2020  e is a member.  
+00024a40: 2020 2020 2020 2020 2020 6f6b 203d 2046            ok = F
+00024a50: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+00024a60: 2069 6620 6973 696e 7374 616e 6365 2873   if isinstance(s
+00024a70: 656c 662e 7375 626e 6574 732c 2073 7472  elf.subnets, str
+00024a80: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00024a90: 2020 2073 656c 662e 7375 626e 6574 7320     self.subnets 
+00024aa0: 3d20 5b73 656c 662e 7375 626e 6574 735d  = [self.subnets]
+00024ab0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00024ac0: 206e 6574 776f 726b 2069 6e20 7365 6c66   network in self
+00024ad0: 2e73 7562 6e65 7473 3a0a 2020 2020 2020  .subnets:.      
+00024ae0: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00024af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024b00: 2020 2069 706e 6574 203d 2069 7061 6464     ipnet = ipadd
+00024b10: 7265 7373 2e49 5076 364e 6574 776f 726b  ress.IPv6Network
+00024b20: 2874 6f5f 756e 6963 6f64 6528 6e65 7477  (to_unicode(netw
+00024b30: 6f72 6b29 290a 2020 2020 2020 2020 2020  ork)).          
+00024b40: 2020 2020 2020 6578 6365 7074 2028 6970        except (ip
+00024b50: 6164 6472 6573 732e 4e65 746d 6173 6b56  address.NetmaskV
+00024b60: 616c 7565 4572 726f 722c 2069 7061 6464  alueError, ipadd
+00024b70: 7265 7373 2e41 6464 7265 7373 5661 6c75  ress.AddressValu
+00024b80: 6545 7272 6f72 293a 0a20 2020 2020 2020  eError):.       
+00024b90: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00024ba0: 7365 2056 616c 6964 6174 696f 6e45 7272  se ValidationErr
+00024bb0: 6f72 2873 656c 662e 7472 616e 736c 6174  or(self.translat
+00024bc0: 6f72 2822 696e 7661 6c69 6420 7375 626e  or("invalid subn
+00024bd0: 6574 2070 726f 7669 6465 6422 2929 0a20  et provided")). 
+00024be0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00024bf0: 6620 6970 2069 6e20 6970 6e65 743a 0a20  f ip in ipnet:. 
+00024c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024c10: 2020 206f 6b20 3d20 5472 7565 0a0a 2020     ok = True..  
+00024c20: 2020 2020 2020 6966 2073 656c 662e 6973        if self.is
+00024c30: 5f72 6f75 7465 6162 6c65 3a0a 2020 2020  _routeable:.    
+00024c40: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
+00024c50: 7072 6976 6174 6520 3d20 4661 6c73 650a  private = False.
+00024c60: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00024c70: 2e69 735f 7265 7365 7276 6564 203d 2046  .is_reserved = F
+00024c80: 616c 7365 0a20 2020 2020 2020 2020 2020  alse.           
+00024c90: 2073 656c 662e 6973 5f6d 756c 7469 6361   self.is_multica
+00024ca0: 7374 203d 2046 616c 7365 0a0a 2020 2020  st = False..    
+00024cb0: 2020 2020 6966 206f 6b20 616e 6420 7365      if ok and se
+00024cc0: 6c66 2e69 735f 7072 6976 6174 6520 6973  lf.is_private is
+00024cd0: 206e 6f74 204e 6f6e 6520 616e 6420 7365   not None and se
+00024ce0: 6c66 2e69 735f 7072 6976 6174 6520 213d  lf.is_private !=
+00024cf0: 2069 702e 6973 5f70 7269 7661 7465 3a0a   ip.is_private:.
+00024d00: 2020 2020 2020 2020 2020 2020 6f6b 203d              ok =
+00024d10: 2046 616c 7365 0a20 2020 2020 2020 2069   False.        i
+00024d20: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
+00024d30: 6f6b 0a20 2020 2020 2020 2020 2020 2061  ok.            a
+00024d40: 6e64 2073 656c 662e 6973 5f6c 696e 6b5f  nd self.is_link_
+00024d50: 6c6f 6361 6c20 6973 206e 6f74 204e 6f6e  local is not Non
+00024d60: 650a 2020 2020 2020 2020 2020 2020 616e  e.            an
+00024d70: 6420 7365 6c66 2e69 735f 6c69 6e6b 5f6c  d self.is_link_l
+00024d80: 6f63 616c 2021 3d20 6970 2e69 735f 6c69  ocal != ip.is_li
+00024d90: 6e6b 5f6c 6f63 616c 0a20 2020 2020 2020  nk_local.       
+00024da0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+00024db0: 6f6b 203d 2046 616c 7365 0a20 2020 2020  ok = False.     
+00024dc0: 2020 2069 6620 6f6b 2061 6e64 2073 656c     if ok and sel
+00024dd0: 662e 6973 5f72 6573 6572 7665 6420 6973  f.is_reserved is
+00024de0: 206e 6f74 204e 6f6e 6520 616e 6420 7365   not None and se
+00024df0: 6c66 2e69 735f 7265 7365 7276 6564 2021  lf.is_reserved !
+00024e00: 3d20 6970 2e69 735f 7265 7365 7276 6564  = ip.is_reserved
+00024e10: 3a0a 2020 2020 2020 2020 2020 2020 6f6b  :.            ok
+00024e20: 203d 2046 616c 7365 0a20 2020 2020 2020   = False.       
+00024e30: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+00024e40: 2020 6f6b 0a20 2020 2020 2020 2020 2020    ok.           
+00024e50: 2061 6e64 2073 656c 662e 6973 5f6d 756c   and self.is_mul
+00024e60: 7469 6361 7374 2069 7320 6e6f 7420 4e6f  ticast is not No
+00024e70: 6e65 0a20 2020 2020 2020 2020 2020 2061  ne.            a
+00024e80: 6e64 2073 656c 662e 6973 5f6d 756c 7469  nd self.is_multi
+00024e90: 6361 7374 2021 3d20 6970 2e69 735f 6d75  cast != ip.is_mu
+00024ea0: 6c74 6963 6173 740a 2020 2020 2020 2020  lticast.        
+00024eb0: 293a 0a20 2020 2020 2020 2020 2020 206f  ):.            o
+00024ec0: 6b20 3d20 4661 6c73 650a 2020 2020 2020  k = False.      
+00024ed0: 2020 6966 206f 6b20 616e 6420 7365 6c66    if ok and self
+00024ee0: 2e69 735f 3674 6f34 2069 7320 6e6f 7420  .is_6to4 is not 
+00024ef0: 4e6f 6e65 2061 6e64 2073 656c 662e 6973  None and self.is
+00024f00: 5f36 746f 3420 213d 2062 6f6f 6c28 6970  _6to4 != bool(ip
+00024f10: 2e73 6978 746f 666f 7572 293a 0a20 2020  .sixtofour):.   
+00024f20: 2020 2020 2020 2020 206f 6b20 3d20 4661           ok = Fa
+00024f30: 6c73 650a 2020 2020 2020 2020 6966 206f  lse.        if o
+00024f40: 6b20 616e 6420 7365 6c66 2e69 735f 7465  k and self.is_te
+00024f50: 7265 646f 2069 7320 6e6f 7420 4e6f 6e65  redo is not None
+00024f60: 2061 6e64 2073 656c 662e 6973 5f74 6572   and self.is_ter
+00024f70: 6564 6f20 213d 2062 6f6f 6c28 6970 2e74  edo != bool(ip.t
+00024f80: 6572 6564 6f29 3a0a 2020 2020 2020 2020  eredo):.        
+00024f90: 2020 2020 6f6b 203d 2046 616c 7365 0a0a      ok = False..
+00024fa0: 2020 2020 2020 2020 6966 206f 6b3a 0a20          if ok:. 
+00024fb0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00024fc0: 6e20 7661 6c75 650a 0a20 2020 2020 2020  n value..       
+00024fd0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+00024fe0: 6e45 7272 6f72 2873 656c 662e 7472 616e  nError(self.tran
+00024ff0: 736c 6174 6f72 2873 656c 662e 6572 726f  slator(self.erro
+00025000: 725f 6d65 7373 6167 6529 290a 0a0a 636c  r_message))...cl
+00025010: 6173 7320 4953 5f49 5041 4444 5245 5353  ass IS_IPADDRESS
+00025020: 2856 616c 6964 6174 6f72 293a 0a20 2020  (Validator):.   
+00025030: 2022 2222 0a20 2020 2043 6865 636b 7320   """.    Checks 
+00025040: 6966 2066 6965 6c64 2773 2076 616c 7565  if field's value
+00025050: 2069 7320 616e 2049 5020 4164 6472 6573   is an IP Addres
+00025060: 7320 2876 3420 6f72 2076 3629 2e20 4361  s (v4 or v6). Ca
+00025070: 6e20 6265 2073 6574 2074 6f20 666f 7263  n be set to forc
+00025080: 650a 2020 2020 6164 6472 6573 7365 7320  e.    addresses 
+00025090: 6672 6f6d 2077 6974 6869 6e20 6120 7370  from within a sp
+000250a0: 6563 6966 6963 2072 616e 6765 2e20 4368  ecific range. Ch
+000250b0: 6563 6b73 2061 7265 2064 6f6e 6520 7769  ecks are done wi
+000250c0: 7468 2074 6865 2063 6f72 7265 6374 0a20  th the correct. 
+000250d0: 2020 2049 535f 4950 5634 2061 6e64 2049     IS_IPV4 and I
+000250e0: 535f 4950 5636 2076 616c 6964 6174 6f72  S_IPV6 validator
+000250f0: 732e 0a0a 2020 2020 5573 6573 2074 6865  s...    Uses the
+00025100: 2069 7061 6464 7265 7373 2066 726f 6d20   ipaddress from 
+00025110: 7468 6520 5079 7468 6f6e 2033 2073 7461  the Python 3 sta
+00025120: 6e64 6172 6420 6c69 6272 6172 790a 2020  ndard library.  
+00025130: 2020 616e 6420 6974 7320 5079 7468 6f6e    and its Python
+00025140: 2032 2062 6163 6b70 6f72 7420 2869 6e20   2 backport (in 
+00025150: 636f 6e74 7269 622f 6970 6164 6472 6573  contrib/ipaddres
+00025160: 732e 7079 292e 0a0a 2020 2020 4172 6773  s.py)...    Args
+00025170: 3a0a 2020 2020 2020 2020 6d69 6e69 703a  :.        minip:
+00025180: 206c 6f77 6573 7420 616c 6c6f 7765 6420   lowest allowed 
+00025190: 6164 6472 6573 733b 2061 6363 6570 7473  address; accepts
+000251a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000251b0: 2073 7472 2c20 6567 2e20 3139 322e 3136   str, eg. 192.16
+000251c0: 382e 302e 310a 2020 2020 2020 2020 2020  8.0.1.          
+000251d0: 2020 2020 206c 6973 7420 6f72 2074 7570       list or tup
+000251e0: 6c65 206f 6620 6f63 7465 7473 2c20 6567  le of octets, eg
+000251f0: 2e20 5b31 3932 2c20 3136 382c 2030 2c20  . [192, 168, 0, 
+00025200: 315d 0a20 2020 2020 2020 206d 6178 6970  1].        maxip
+00025210: 3a20 6869 6768 6573 7420 616c 6c6f 7765  : highest allowe
+00025220: 6420 6164 6472 6573 733b 2073 616d 6520  d address; same 
+00025230: 6173 2061 626f 7665 0a20 2020 2020 2020  as above.       
+00025240: 2069 6e76 6572 743a 2054 7275 6520 746f   invert: True to
+00025250: 2061 6c6c 6f77 2061 6464 7265 7373 6573   allow addresses
+00025260: 206f 6e6c 7920 6672 6f6d 206f 7574 7369   only from outsi
+00025270: 6465 206f 6620 6769 7665 6e20 7261 6e67  de of given rang
+00025280: 653b 206e 6f74 650a 2020 2020 2020 2020  e; note.        
+00025290: 2020 2020 2020 2020 7468 6174 2072 616e          that ran
+000252a0: 6765 2062 6f75 6e64 6172 6965 7320 6172  ge boundaries ar
+000252b0: 6520 6e6f 7420 6d61 7463 6865 6420 7468  e not matched th
+000252c0: 6973 2077 6179 0a0a 2020 2020 4950 7634  is way..    IPv4
+000252d0: 2073 7065 6369 6669 6320 6172 6775 6d65   specific argume
+000252e0: 6e74 733a 0a0a 2020 2020 2020 2020 2d20  nts:..        - 
+000252f0: 6973 5f6c 6f63 616c 686f 7374 3a20 6c6f  is_localhost: lo
+00025300: 6361 6c68 6f73 7420 6164 6472 6573 7320  calhost address 
+00025310: 7472 6561 746d 656e 743a 0a0a 2020 2020  treatment:..    
+00025320: 2020 2020 2020 2020 2d20 4e6f 6e65 2028          - None (
+00025330: 6465 6661 756c 7429 3a20 696e 6469 6666  default): indiff
+00025340: 6572 656e 740a 2020 2020 2020 2020 2020  erent.          
+00025350: 2020 2d20 5472 7565 2028 656e 666f 7263    - True (enforc
+00025360: 6529 3a20 7175 6572 7920 6164 6472 6573  e): query addres
+00025370: 7320 6d75 7374 206d 6174 6368 206c 6f63  s must match loc
+00025380: 616c 686f 7374 2061 6464 7265 7373 0a20  alhost address. 
+00025390: 2020 2020 2020 2020 2020 2020 2028 3132               (12
+000253a0: 372e 302e 302e 3129 0a20 2020 2020 2020  7.0.0.1).       
+000253b0: 2020 2020 202d 2046 616c 7365 2028 666f       - False (fo
+000253c0: 7262 6964 293a 2071 7565 7279 2061 6464  rbid): query add
+000253d0: 7265 7373 206d 7573 7420 6e6f 7420 6d61  ress must not ma
+000253e0: 7463 6820 6c6f 6361 6c68 6f73 7420 6164  tch localhost ad
+000253f0: 6472 6573 730a 2020 2020 2020 2020 2d20  dress.        - 
+00025400: 6973 5f70 7269 7661 7465 3a20 7361 6d65  is_private: same
+00025410: 2061 7320 6162 6f76 652c 2065 7863 6570   as above, excep
+00025420: 7420 7468 6174 2071 7565 7279 2061 6464  t that query add
+00025430: 7265 7373 2069 7320 6368 6563 6b65 6420  ress is checked 
+00025440: 6167 6169 6e73 740a 2020 2020 2020 2020  against.        
+00025450: 2020 7477 6f20 6164 6472 6573 7320 7261    two address ra
+00025460: 6e67 6573 3a20 3137 322e 3136 2e30 2e30  nges: 172.16.0.0
+00025470: 202d 2031 3732 2e33 312e 3235 352e 3235   - 172.31.255.25
+00025480: 3520 616e 640a 2020 2020 2020 2020 2020  5 and.          
+00025490: 3139 322e 3136 382e 302e 3020 2d20 3139  192.168.0.0 - 19
+000254a0: 322e 3136 382e 3235 352e 3235 350a 2020  2.168.255.255.  
+000254b0: 2020 2020 2020 2d20 6973 5f61 7574 6f6d        - is_autom
+000254c0: 6174 6963 3a20 7361 6d65 2061 7320 6162  atic: same as ab
+000254d0: 6f76 652c 2065 7863 6570 7420 7468 6174  ove, except that
+000254e0: 2071 7565 7279 2061 6464 7265 7373 2069   query address i
+000254f0: 7320 6368 6563 6b65 6420 6167 6169 6e73  s checked agains
+00025500: 740a 2020 2020 2020 2020 2020 6f6e 6520  t.          one 
+00025510: 6164 6472 6573 7320 7261 6e67 653a 2031  address range: 1
+00025520: 3639 2e32 3534 2e30 2e30 202d 2031 3639  69.254.0.0 - 169
+00025530: 2e32 3534 2e32 3535 2e32 3535 0a20 2020  .254.255.255.   
+00025540: 2020 2020 202d 2069 735f 6970 7634 3a20       - is_ipv4: 
+00025550: 6569 7468 6572 3a0a 0a20 2020 2020 2020  either:..       
+00025560: 2020 2020 202d 204e 6f6e 6520 2864 6566       - None (def
+00025570: 6175 6c74 293a 2069 6e64 6966 6665 7265  ault): indiffere
+00025580: 6e74 0a20 2020 2020 2020 2020 2020 202d  nt.            -
+00025590: 2054 7275 6520 2865 6e66 6f72 6365 293a   True (enforce):
+000255a0: 206d 7573 7420 6265 2061 6e20 4950 7634   must be an IPv4
+000255b0: 2061 6464 7265 7373 0a20 2020 2020 2020   address.       
+000255c0: 2020 2020 202d 2046 616c 7365 2028 666f       - False (fo
+000255d0: 7262 6964 293a 206d 7573 7420 4e4f 5420  rbid): must NOT 
+000255e0: 6265 2061 6e20 4950 7634 2061 6464 7265  be an IPv4 addre
+000255f0: 7373 0a0a 2020 2020 4950 7636 2073 7065  ss..    IPv6 spe
+00025600: 6369 6669 6320 6172 6775 6d65 6e74 733a  cific arguments:
+00025610: 0a0a 2020 2020 2020 2020 2d20 6973 5f6c  ..        - is_l
+00025620: 696e 6b5f 6c6f 6361 6c3a 2053 616d 6520  ink_local: Same 
+00025630: 6173 2061 626f 7665 2062 7574 2075 7365  as above but use
+00025640: 7320 6665 3830 3a3a 2f31 3020 7261 6e67  s fe80::/10 rang
+00025650: 650a 2020 2020 2020 2020 2d20 6973 5f72  e.        - is_r
+00025660: 6573 6572 7665 643a 2053 616d 6520 6173  eserved: Same as
+00025670: 2061 626f 7665 2062 7574 2075 7365 7320   above but uses 
+00025680: 4945 5446 2072 6573 6572 7665 6420 7261  IETF reserved ra
+00025690: 6e67 650a 2020 2020 2020 2020 2d20 6973  nge.        - is
+000256a0: 5f6d 756c 7469 6361 7374 3a20 5361 6d65  _multicast: Same
+000256b0: 2061 7320 6162 6f76 6520 6275 7420 7573   as above but us
+000256c0: 6573 2066 6630 303a 3a2f 3820 7261 6e67  es ff00::/8 rang
+000256d0: 650a 2020 2020 2020 2020 2d20 6973 5f72  e.        - is_r
+000256e0: 6f75 7465 6162 6c65 3a20 5369 6d69 6c61  outeable: Simila
+000256f0: 7220 746f 2061 626f 7665 2062 7574 2065  r to above but e
+00025700: 6e66 6f72 6365 7320 6e6f 7420 7072 6976  nforces not priv
+00025710: 6174 652c 206c 696e 6b5f 6c6f 6361 6c2c  ate, link_local,
+00025720: 0a20 2020 2020 2020 2020 2072 6573 6572  .          reser
+00025730: 7665 6420 6f72 206d 756c 7469 6361 7374  ved or multicast
+00025740: 0a20 2020 2020 2020 202d 2069 735f 3674  .        - is_6t
+00025750: 6f34 3a20 5361 6d65 2061 7320 6162 6f76  o4: Same as abov
+00025760: 6520 6275 7420 7573 6573 2032 3030 323a  e but uses 2002:
+00025770: 3a2f 3136 2072 616e 6765 0a20 2020 2020  :/16 range.     
+00025780: 2020 202d 2069 735f 7465 7265 646f 3a20     - is_teredo: 
+00025790: 5361 6d65 2061 7320 6162 6f76 6520 6275  Same as above bu
+000257a0: 7420 7573 6573 2032 3030 313a 3a2f 3332  t uses 2001::/32
+000257b0: 2072 616e 6765 0a20 2020 2020 2020 202d   range.        -
+000257c0: 2073 7562 6e65 7473 3a20 7661 6c75 6520   subnets: value 
+000257d0: 6d75 7374 2062 6520 6120 6d65 6d62 6572  must be a member
+000257e0: 206f 6620 6174 206c 6561 7374 206f 6e65   of at least one
+000257f0: 2066 726f 6d20 6c69 7374 206f 6620 7375   from list of su
+00025800: 626e 6574 730a 2020 2020 2020 2020 2d20  bnets.        - 
+00025810: 6973 5f69 7076 363a 2065 6974 6865 723a  is_ipv6: either:
+00025820: 0a0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
+00025830: 4e6f 6e65 2028 6465 6661 756c 7429 3a20  None (default): 
+00025840: 696e 6469 6666 6572 656e 740a 2020 2020  indifferent.    
+00025850: 2020 2020 2020 2020 2d20 5472 7565 2028          - True (
+00025860: 656e 666f 7263 6529 3a20 6d75 7374 2062  enforce): must b
+00025870: 6520 616e 2049 5076 3620 6164 6472 6573  e an IPv6 addres
+00025880: 730a 2020 2020 2020 2020 2020 2020 2d20  s.            - 
+00025890: 4661 6c73 6520 2866 6f72 6269 6429 3a20  False (forbid): 
+000258a0: 6d75 7374 204e 4f54 2062 6520 616e 2049  must NOT be an I
+000258b0: 5076 3620 6164 6472 6573 730a 0a20 2020  Pv6 address..   
+000258c0: 204d 696e 6970 2061 6e64 206d 6178 6970   Minip and maxip
+000258d0: 206d 6179 2061 6c73 6f20 6265 206c 6973   may also be lis
+000258e0: 7473 206f 7220 7475 706c 6573 206f 6620  ts or tuples of 
+000258f0: 6164 6472 6573 7365 7320 696e 2061 6c6c  addresses in all
+00025900: 2061 626f 7665 0a20 2020 2066 6f72 6d73   above.    forms
+00025910: 2028 7374 722c 2069 6e74 2c20 6c69 7374   (str, int, list
+00025920: 202f 2074 7570 6c65 292c 2061 6c6c 6f77   / tuple), allow
+00025930: 696e 6720 7365 7475 7020 6f66 206d 756c  ing setup of mul
+00025940: 7469 706c 6520 6164 6472 6573 7320 7261  tiple address ra
+00025950: 6e67 6573 3a3a 0a0a 2020 2020 2020 2020  nges::..        
+00025960: 6d69 6e69 7020 3d20 286d 696e 6970 312c  minip = (minip1,
+00025970: 206d 696e 6970 322c 202e 2e2e 206d 696e   minip2, ... min
+00025980: 6970 4e29 0a20 2020 2020 2020 2020 2020  ipN).           
+00025990: 2020 2020 2020 2020 7c20 2020 2020 2020          |       
+000259a0: 7c20 2020 2020 2020 2020 2020 7c0a 2020  |           |.  
+000259b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000259c0: 207c 2020 2020 2020 207c 2020 2020 2020   |       |      
+000259d0: 2020 2020 207c 0a20 2020 2020 2020 206d       |.        m
+000259e0: 6178 6970 203d 2028 6d61 7869 7031 2c20  axip = (maxip1, 
+000259f0: 6d61 7869 7032 2c20 2e2e 2e20 6d61 7869  maxip2, ... maxi
+00025a00: 704e 290a 0a20 2020 204c 6f6e 6765 7220  pN)..    Longer 
+00025a10: 6974 6572 6162 6c65 2077 696c 6c20 6265  iterable will be
+00025a20: 2074 7275 6e63 6174 6564 2074 6f20 6d61   truncated to ma
+00025a30: 7463 6820 6c65 6e67 7468 206f 6620 7368  tch length of sh
+00025a40: 6f72 7465 7220 6f6e 652e 0a0a 2020 2020  orter one...    
+00025a50: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
+00025a60: 5245 5353 2829 2827 3139 322e 3136 382e  RESS()('192.168.
+00025a70: 312e 3527 290a 2020 2020 2020 2020 2827  1.5').        ('
+00025a80: 3139 322e 3136 382e 312e 3527 2c20 4e6f  192.168.1.5', No
+00025a90: 6e65 290a 2020 2020 2020 2020 3e3e 3e20  ne).        >>> 
+00025aa0: 4953 5f49 5041 4444 5245 5353 2869 735f  IS_IPADDRESS(is_
+00025ab0: 6970 7636 3d46 616c 7365 2928 2731 3932  ipv6=False)('192
+00025ac0: 2e31 3638 2e31 2e35 2729 0a20 2020 2020  .168.1.5').     
+00025ad0: 2020 2028 2731 3932 2e31 3638 2e31 2e35     ('192.168.1.5
+00025ae0: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00025af0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00025b00: 5328 2928 2732 3535 2e32 3535 2e32 3535  S()('255.255.255
+00025b10: 2e32 3535 2729 0a20 2020 2020 2020 2028  .255').        (
+00025b20: 2732 3535 2e32 3535 2e32 3535 2e32 3535  '255.255.255.255
+00025b30: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00025b40: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00025b50: 5328 2928 2731 3932 2e31 3638 2e31 2e35  S()('192.168.1.5
+00025b60: 2027 290a 2020 2020 2020 2020 2827 3139   ').        ('19
+00025b70: 322e 3136 382e 312e 3520 272c 2027 656e  2.168.1.5 ', 'en
+00025b80: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+00025b90: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
+00025ba0: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+00025bb0: 2928 2731 3932 2e31 3638 2e31 2e31 2e35  )('192.168.1.1.5
+00025bc0: 2729 0a20 2020 2020 2020 2028 2731 3932  ').        ('192
+00025bd0: 2e31 3638 2e31 2e31 2e35 272c 2027 656e  .168.1.1.5', 'en
+00025be0: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+00025bf0: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
+00025c00: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+00025c10: 2928 2731 3233 2e31 3233 2729 0a20 2020  )('123.123').   
+00025c20: 2020 2020 2028 2731 3233 2e31 3233 272c       ('123.123',
+00025c30: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
+00025c40: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+00025c50: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
+00025c60: 4553 5328 2928 2731 3131 312e 322e 332e  ESS()('1111.2.3.
+00025c70: 3427 290a 2020 2020 2020 2020 2827 3131  4').        ('11
+00025c80: 3131 2e32 2e33 2e34 272c 2027 656e 7465  11.2.3.4', 'ente
+00025c90: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
+00025ca0: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
+00025cb0: 2049 535f 4950 4144 4452 4553 5328 2928   IS_IPADDRESS()(
+00025cc0: 2730 3131 312e 322e 332e 3427 290a 2020  '0111.2.3.4').  
+00025cd0: 2020 2020 2020 2827 3031 3131 2e32 2e33        ('0111.2.3
+00025ce0: 2e34 272c 2027 656e 7465 7220 7661 6c69  .4', 'enter vali
+00025cf0: 6420 4950 2061 6464 7265 7373 2729 0a20  d IP address'). 
+00025d00: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00025d10: 4144 4452 4553 5328 2928 2732 3536 2e32  ADDRESS()('256.2
+00025d20: 2e33 2e34 2729 0a20 2020 2020 2020 2028  .3.4').        (
+00025d30: 2732 3536 2e32 2e33 2e34 272c 2027 656e  '256.2.3.4', 'en
+00025d40: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+00025d50: 7265 7373 2729 0a20 2020 2020 2020 203e  ress').        >
+00025d60: 3e3e 2049 535f 4950 4144 4452 4553 5328  >> IS_IPADDRESS(
+00025d70: 2928 2733 3030 2e32 2e33 2e34 2729 0a20  )('300.2.3.4'). 
+00025d80: 2020 2020 2020 2028 2733 3030 2e32 2e33         ('300.2.3
+00025d90: 2e34 272c 2027 656e 7465 7220 7661 6c69  .4', 'enter vali
+00025da0: 6420 4950 2061 6464 7265 7373 2729 0a20  d IP address'). 
+00025db0: 2020 2020 2020 203e 3e3e 2049 535f 4950         >>> IS_IP
+00025dc0: 4144 4452 4553 5328 6d69 6e69 703d 2731  ADDRESS(minip='1
+00025dd0: 3932 2e31 3638 2e31 2e30 272c 206d 6178  92.168.1.0', max
+00025de0: 6970 3d27 3139 322e 3136 382e 312e 3235  ip='192.168.1.25
+00025df0: 3527 2928 2731 3932 2e31 3638 2e31 2e31  5')('192.168.1.1
+00025e00: 3030 2729 0a20 2020 2020 2020 2028 2731  00').        ('1
+00025e10: 3932 2e31 3638 2e31 2e31 3030 272c 204e  92.168.1.100', N
+00025e20: 6f6e 6529 0a20 2020 2020 2020 203e 3e3e  one).        >>>
+00025e30: 2049 535f 4950 4144 4452 4553 5328 6d69   IS_IPADDRESS(mi
+00025e40: 6e69 703d 2731 2e32 2e33 2e35 272c 206d  nip='1.2.3.5', m
+00025e50: 6178 6970 3d27 312e 322e 332e 3927 2c20  axip='1.2.3.9', 
+00025e60: 6572 726f 725f 6d65 7373 6167 653d 2742  error_message='B
+00025e70: 6164 2069 7027 2928 2731 2e32 2e33 2e34  ad ip')('1.2.3.4
+00025e80: 2729 0a20 2020 2020 2020 2028 2731 2e32  ').        ('1.2
+00025e90: 2e33 2e34 272c 2027 6261 6420 6970 2729  .3.4', 'bad ip')
+00025ea0: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00025eb0: 4950 4144 4452 4553 5328 6d61 7869 703d  IPADDRESS(maxip=
+00025ec0: 2731 2e32 2e33 2e34 272c 2069 6e76 6572  '1.2.3.4', inver
+00025ed0: 743d 5472 7565 2928 2731 3237 2e30 2e30  t=True)('127.0.0
+00025ee0: 2e31 2729 0a20 2020 2020 2020 2028 2731  .1').        ('1
+00025ef0: 3237 2e30 2e30 2e31 272c 204e 6f6e 6529  27.0.0.1', None)
+00025f00: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00025f10: 4950 4144 4452 4553 5328 6d61 7869 703d  IPADDRESS(maxip=
+00025f20: 2731 3932 2e31 3638 2e31 2e34 272c 2069  '192.168.1.4', i
+00025f30: 6e76 6572 743d 5472 7565 2928 2731 3932  nvert=True)('192
+00025f40: 2e31 3638 2e31 2e34 2729 0a20 2020 2020  .168.1.4').     
+00025f50: 2020 2028 2731 3932 2e31 3638 2e31 2e34     ('192.168.1.4
+00025f60: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+00025f70: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
+00025f80: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00025f90: 4452 4553 5328 6973 5f6c 6f63 616c 686f  DRESS(is_localho
+00025fa0: 7374 3d54 7275 6529 2827 3132 372e 302e  st=True)('127.0.
+00025fb0: 302e 3127 290a 2020 2020 2020 2020 2827  0.1').        ('
+00025fc0: 3132 372e 302e 302e 3127 2c20 4e6f 6e65  127.0.0.1', None
+00025fd0: 290a 2020 2020 2020 2020 3e3e 3e20 4953  ).        >>> IS
+00025fe0: 5f49 5041 4444 5245 5353 2869 735f 6c6f  _IPADDRESS(is_lo
+00025ff0: 6361 6c68 6f73 743d 5472 7565 2928 2731  calhost=True)('1
+00026000: 3932 2e31 3638 2e31 2e31 3027 290a 2020  92.168.1.10').  
+00026010: 2020 2020 2020 2827 3139 322e 3136 382e        ('192.168.
+00026020: 312e 3130 272c 2027 656e 7465 7220 7661  1.10', 'enter va
+00026030: 6c69 6420 4950 2061 6464 7265 7373 2729  lid IP address')
+00026040: 0a20 2020 2020 2020 203e 3e3e 2049 535f  .        >>> IS_
+00026050: 4950 4144 4452 4553 5328 6973 5f6c 6f63  IPADDRESS(is_loc
+00026060: 616c 686f 7374 3d46 616c 7365 2928 2731  alhost=False)('1
+00026070: 3237 2e30 2e30 2e31 2729 0a20 2020 2020  27.0.0.1').     
+00026080: 2020 2028 2731 3237 2e30 2e30 2e31 272c     ('127.0.0.1',
+00026090: 2027 656e 7465 7220 7661 6c69 6420 4950   'enter valid IP
+000260a0: 2061 6464 7265 7373 2729 0a20 2020 2020   address').     
+000260b0: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
+000260c0: 4553 5328 6d61 7869 703d 2731 3030 2e30  ESS(maxip='100.0
+000260d0: 2e30 2e30 272c 2069 735f 6c6f 6361 6c68  .0.0', is_localh
+000260e0: 6f73 743d 5472 7565 2928 2731 3237 2e30  ost=True)('127.0
+000260f0: 2e30 2e31 2729 0a20 2020 2020 2020 2028  .0.1').        (
+00026100: 2731 3237 2e30 2e30 2e31 272c 2027 656e  '127.0.0.1', 'en
+00026110: 7465 7220 7661 6c69 6420 4950 2061 6464  ter valid IP add
+00026120: 7265 7373 2729 0a0a 2020 2020 2020 2020  ress')..        
+00026130: 3e3e 3e20 4953 5f49 5041 4444 5245 5353  >>> IS_IPADDRESS
+00026140: 2829 2827 6665 3830 3a3a 3132 3663 3a38  ()('fe80::126c:8
+00026150: 6666 613a 6665 3232 3a62 3361 6627 290a  ffa:fe22:b3af').
+00026160: 2020 2020 2020 2020 2827 6665 3830 3a3a          ('fe80::
+00026170: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
+00026180: 3361 6627 2c20 4e6f 6e65 290a 2020 2020  3af', None).    
+00026190: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
+000261a0: 5245 5353 2869 735f 6970 7634 3d46 616c  RESS(is_ipv4=Fal
+000261b0: 7365 2928 2766 6538 303a 3a31 3236 633a  se)('fe80::126c:
+000261c0: 3866 6661 3a66 6532 323a 6233 6166 2729  8ffa:fe22:b3af')
+000261d0: 0a20 2020 2020 2020 2028 2766 6538 303a  .        ('fe80:
+000261e0: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+000261f0: 6233 6166 272c 204e 6f6e 6529 0a20 2020  b3af', None).   
+00026200: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00026210: 4452 4553 5328 2928 2766 6538 303a 3a31  DRESS()('fe80::1
+00026220: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00026230: 6166 2020 2729 0a20 2020 2020 2020 2028  af  ').        (
+00026240: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
+00026250: 3a66 6532 323a 6233 6166 2020 272c 2027  :fe22:b3af  ', '
+00026260: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
+00026270: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+00026280: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00026290: 5328 6973 5f69 7076 343d 5472 7565 2928  S(is_ipv4=True)(
+000262a0: 2766 6538 303a 3a31 3236 633a 3866 6661  'fe80::126c:8ffa
+000262b0: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
+000262c0: 2020 2020 2028 2766 6538 303a 3a31 3236       ('fe80::126
+000262d0: 633a 3866 6661 3a66 6532 323a 6233 6166  c:8ffa:fe22:b3af
+000262e0: 272c 2027 656e 7465 7220 7661 6c69 6420  ', 'enter valid 
+000262f0: 4950 2061 6464 7265 7373 2729 0a20 2020  IP address').   
+00026300: 2020 2020 203e 3e3e 2049 535f 4950 4144       >>> IS_IPAD
+00026310: 4452 4553 5328 6973 5f69 7076 363d 5472  DRESS(is_ipv6=Tr
+00026320: 7565 2928 2731 3932 2e31 3638 2e31 2e31  ue)('192.168.1.1
+00026330: 2729 0a20 2020 2020 2020 2028 2731 3932  ').        ('192
+00026340: 2e31 3638 2e31 2e31 272c 2027 656e 7465  .168.1.1', 'ente
+00026350: 7220 7661 6c69 6420 4950 2061 6464 7265  r valid IP addre
+00026360: 7373 2729 0a20 2020 2020 2020 203e 3e3e  ss').        >>>
+00026370: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
+00026380: 5f69 7076 363d 5472 7565 2c20 6572 726f  _ipv6=True, erro
+00026390: 725f 6d65 7373 6167 653d 2742 6164 2069  r_message='Bad i
+000263a0: 7027 2928 2731 3932 2e31 3638 2e31 2e31  p')('192.168.1.1
+000263b0: 2729 0a20 2020 2020 2020 2028 2731 3932  ').        ('192
+000263c0: 2e31 3638 2e31 2e31 272c 2027 6261 6420  .168.1.1', 'bad 
+000263d0: 6970 2729 0a20 2020 2020 2020 203e 3e3e  ip').        >>>
+000263e0: 2049 535f 4950 4144 4452 4553 5328 6973   IS_IPADDRESS(is
+000263f0: 5f6c 696e 6b5f 6c6f 6361 6c3d 5472 7565  _link_local=True
+00026400: 2928 2766 6538 303a 3a31 3236 633a 3866  )('fe80::126c:8f
+00026410: 6661 3a66 6532 323a 6233 6166 2729 0a20  fa:fe22:b3af'). 
+00026420: 2020 2020 2020 2028 2766 6538 303a 3a31         ('fe80::1
+00026430: 3236 633a 3866 6661 3a66 6532 323a 6233  26c:8ffa:fe22:b3
+00026440: 6166 272c 204e 6f6e 6529 0a20 2020 2020  af', None).     
+00026450: 2020 203e 3e3e 2049 535f 4950 4144 4452     >>> IS_IPADDR
+00026460: 4553 5328 6973 5f6c 696e 6b5f 6c6f 6361  ESS(is_link_loca
+00026470: 6c3d 4661 6c73 6529 2827 6665 3830 3a3a  l=False)('fe80::
+00026480: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
+00026490: 3361 6627 290a 2020 2020 2020 2020 2827  3af').        ('
+000264a0: 6665 3830 3a3a 3132 3663 3a38 6666 613a  fe80::126c:8ffa:
+000264b0: 6665 3232 3a62 3361 6627 2c20 2765 6e74  fe22:b3af', 'ent
+000264c0: 6572 2076 616c 6964 2049 5020 6164 6472  er valid IP addr
+000264d0: 6573 7327 290a 2020 2020 2020 2020 3e3e  ess').        >>
+000264e0: 3e20 4953 5f49 5041 4444 5245 5353 2869  > IS_IPADDRESS(i
+000264f0: 735f 6c69 6e6b 5f6c 6f63 616c 3d54 7275  s_link_local=Tru
+00026500: 6529 2827 3230 3031 3a3a 3132 3663 3a38  e)('2001::126c:8
+00026510: 6666 613a 6665 3232 3a62 3361 6627 290a  ffa:fe22:b3af').
+00026520: 2020 2020 2020 2020 2827 3230 3031 3a3a          ('2001::
+00026530: 3132 3663 3a38 6666 613a 6665 3232 3a62  126c:8ffa:fe22:b
+00026540: 3361 6627 2c20 2765 6e74 6572 2076 616c  3af', 'enter val
+00026550: 6964 2049 5020 6164 6472 6573 7327 290a  id IP address').
+00026560: 2020 2020 2020 2020 3e3e 3e20 4953 5f49          >>> IS_I
+00026570: 5041 4444 5245 5353 2869 735f 6d75 6c74  PADDRESS(is_mult
+00026580: 6963 6173 743d 5472 7565 2928 2732 3030  icast=True)('200
+00026590: 313a 3a31 3236 633a 3866 6661 3a66 6532  1::126c:8ffa:fe2
+000265a0: 323a 6233 6166 2729 0a20 2020 2020 2020  2:b3af').       
+000265b0: 2028 2732 3030 313a 3a31 3236 633a 3866   ('2001::126c:8f
+000265c0: 6661 3a66 6532 323a 6233 6166 272c 2027  fa:fe22:b3af', '
+000265d0: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
+000265e0: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+000265f0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00026600: 5328 6973 5f6d 756c 7469 6361 7374 3d54  S(is_multicast=T
+00026610: 7275 6529 2827 6666 3030 3a3a 3132 3663  rue)('ff00::126c
+00026620: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00026630: 290a 2020 2020 2020 2020 2827 6666 3030  ).        ('ff00
+00026640: 3a3a 3132 3663 3a38 6666 613a 6665 3232  ::126c:8ffa:fe22
+00026650: 3a62 3361 6627 2c20 4e6f 6e65 290a 2020  :b3af', None).  
+00026660: 2020 2020 2020 3e3e 3e20 4953 5f49 5041        >>> IS_IPA
+00026670: 4444 5245 5353 2869 735f 726f 7574 6561  DDRESS(is_routea
+00026680: 626c 653d 5472 7565 2928 2732 3030 313a  ble=True)('2001:
+00026690: 3a31 3236 633a 3866 6661 3a66 6532 323a  :126c:8ffa:fe22:
+000266a0: 6233 6166 2729 0a20 2020 2020 2020 2028  b3af').        (
+000266b0: 2732 3030 313a 3a31 3236 633a 3866 6661  '2001::126c:8ffa
+000266c0: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
+000266d0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+000266e0: 535f 4950 4144 4452 4553 5328 6973 5f72  S_IPADDRESS(is_r
+000266f0: 6f75 7465 6162 6c65 3d54 7275 6529 2827  outeable=True)('
+00026700: 6666 3030 3a3a 3132 3663 3a38 6666 613a  ff00::126c:8ffa:
+00026710: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+00026720: 2020 2020 2827 6666 3030 3a3a 3132 3663      ('ff00::126c
+00026730: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+00026740: 2c20 2765 6e74 6572 2076 616c 6964 2049  , 'enter valid I
+00026750: 5020 6164 6472 6573 7327 290a 2020 2020  P address').    
+00026760: 2020 2020 3e3e 3e20 4953 5f49 5041 4444      >>> IS_IPADD
+00026770: 5245 5353 2873 7562 6e65 7473 3d27 3230  RESS(subnets='20
+00026780: 3031 3a3a 2f33 3227 2928 2732 3030 313a  01::/32')('2001:
+00026790: 3a38 6666 613a 6665 3232 3a62 3361 6627  :8ffa:fe22:b3af'
+000267a0: 290a 2020 2020 2020 2020 2827 3230 3031  ).        ('2001
+000267b0: 3a3a 3866 6661 3a66 6532 323a 6233 6166  ::8ffa:fe22:b3af
+000267c0: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+000267d0: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+000267e0: 5328 7375 626e 6574 733d 2766 6230 303a  S(subnets='fb00:
+000267f0: 3a2f 3827 2928 2732 3030 313a 3a38 6666  :/8')('2001::8ff
+00026800: 613a 6665 3232 3a62 3361 6627 290a 2020  a:fe22:b3af').  
+00026810: 2020 2020 2020 2827 3230 3031 3a3a 3866        ('2001::8f
+00026820: 6661 3a66 6532 323a 6233 6166 272c 2027  fa:fe22:b3af', '
+00026830: 656e 7465 7220 7661 6c69 6420 4950 2061  enter valid IP a
+00026840: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+00026850: 203e 3e3e 2049 535f 4950 4144 4452 4553   >>> IS_IPADDRES
+00026860: 5328 7375 626e 6574 733d 5b27 6663 3030  S(subnets=['fc00
+00026870: 3a3a 2f38 272c 2732 3030 313a 3a2f 3332  ::/8','2001::/32
+00026880: 275d 2928 2732 3030 313a 3a38 6666 613a  '])('2001::8ffa:
+00026890: 6665 3232 3a62 3361 6627 290a 2020 2020  fe22:b3af').    
+000268a0: 2020 2020 2827 3230 3031 3a3a 3866 6661      ('2001::8ffa
+000268b0: 3a66 6532 323a 6233 6166 272c 204e 6f6e  :fe22:b3af', Non
+000268c0: 6529 0a20 2020 2020 2020 203e 3e3e 2049  e).        >>> I
+000268d0: 535f 4950 4144 4452 4553 5328 7375 626e  S_IPADDRESS(subn
+000268e0: 6574 733d 2769 6e76 616c 6964 7375 626e  ets='invalidsubn
+000268f0: 6574 2729 2827 3230 3031 3a3a 3866 6661  et')('2001::8ffa
+00026900: 3a66 6532 323a 6233 6166 2729 0a20 2020  :fe22:b3af').   
+00026910: 2020 2020 2028 2732 3030 313a 3a38 6666       ('2001::8ff
+00026920: 613a 6665 3232 3a62 3361 6627 2c20 2769  a:fe22:b3af', 'i
+00026930: 6e76 616c 6964 2073 7562 6e65 7420 7072  nvalid subnet pr
+00026940: 6f76 6964 6564 2729 0a20 2020 2022 2222  ovided').    """
+00026950: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00026960: 5f5f 280a 2020 2020 2020 2020 7365 6c66  __(.        self
+00026970: 2c0a 2020 2020 2020 2020 6d69 6e69 703d  ,.        minip=
+00026980: 2230 2e30 2e30 2e30 222c 0a20 2020 2020  "0.0.0.0",.     
+00026990: 2020 206d 6178 6970 3d22 3235 352e 3235     maxip="255.25
+000269a0: 352e 3235 352e 3235 3522 2c0a 2020 2020  5.255.255",.    
+000269b0: 2020 2020 696e 7665 7274 3d46 616c 7365      invert=False
+000269c0: 2c0a 2020 2020 2020 2020 6973 5f6c 6f63  ,.        is_loc
+000269d0: 616c 686f 7374 3d4e 6f6e 652c 0a20 2020  alhost=None,.   
+000269e0: 2020 2020 2069 735f 7072 6976 6174 653d       is_private=
+000269f0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6973  None,.        is
+00026a00: 5f61 7574 6f6d 6174 6963 3d4e 6f6e 652c  _automatic=None,
+00026a10: 0a20 2020 2020 2020 2069 735f 6970 7634  .        is_ipv4
+00026a20: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+00026a30: 735f 6c69 6e6b 5f6c 6f63 616c 3d4e 6f6e  s_link_local=Non
+00026a40: 652c 0a20 2020 2020 2020 2069 735f 7265  e,.        is_re
+00026a50: 7365 7276 6564 3d4e 6f6e 652c 0a20 2020  served=None,.   
+00026a60: 2020 2020 2069 735f 6d75 6c74 6963 6173       is_multicas
+00026a70: 743d 4e6f 6e65 2c0a 2020 2020 2020 2020  t=None,.        
+00026a80: 6973 5f72 6f75 7465 6162 6c65 3d4e 6f6e  is_routeable=Non
+00026a90: 652c 0a20 2020 2020 2020 2069 735f 3674  e,.        is_6t
+00026aa0: 6f34 3d4e 6f6e 652c 0a20 2020 2020 2020  o4=None,.       
+00026ab0: 2069 735f 7465 7265 646f 3d4e 6f6e 652c   is_teredo=None,
+00026ac0: 0a20 2020 2020 2020 2073 7562 6e65 7473  .        subnets
+00026ad0: 3d4e 6f6e 652c 0a20 2020 2020 2020 2069  =None,.        i
+00026ae0: 735f 6970 7636 3d4e 6f6e 652c 0a20 2020  s_ipv6=None,.   
+00026af0: 2020 2020 2065 7272 6f72 5f6d 6573 7361       error_messa
+00026b00: 6765 3d22 456e 7465 7220 7661 6c69 6420  ge="Enter valid 
+00026b10: 4950 2061 6464 7265 7373 222c 0a20 2020  IP address",.   
+00026b20: 2029 3a0a 2020 2020 2020 2020 7365 6c66   ):.        self
+00026b30: 2e6d 696e 6970 203d 2028 6d69 6e69 702c  .minip = (minip,
+00026b40: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+00026b50: 6178 6970 203d 2028 6d61 7869 702c 290a  axip = (maxip,).
+00026b60: 2020 2020 2020 2020 7365 6c66 2e69 6e76          self.inv
+00026b70: 6572 7420 3d20 696e 7665 7274 0a20 2020  ert = invert.   
+00026b80: 2020 2020 2073 656c 662e 6973 5f6c 6f63       self.is_loc
+00026b90: 616c 686f 7374 203d 2069 735f 6c6f 6361  alhost = is_loca
+00026ba0: 6c68 6f73 740a 2020 2020 2020 2020 7365  lhost.        se
+00026bb0: 6c66 2e69 735f 7072 6976 6174 6520 3d20  lf.is_private = 
+00026bc0: 6973 5f70 7269 7661 7465 0a20 2020 2020  is_private.     
+00026bd0: 2020 2073 656c 662e 6973 5f61 7574 6f6d     self.is_autom
+00026be0: 6174 6963 203d 2069 735f 6175 746f 6d61  atic = is_automa
+00026bf0: 7469 630a 2020 2020 2020 2020 7365 6c66  tic.        self
+00026c00: 2e69 735f 6970 7634 203d 2069 735f 6970  .is_ipv4 = is_ip
+00026c10: 7634 206f 7220 6973 5f69 7076 3620 6973  v4 or is_ipv6 is
+00026c20: 2046 616c 7365 0a20 2020 2020 2020 2073   False.        s
+00026c30: 656c 662e 6973 5f70 7269 7661 7465 203d  elf.is_private =
+00026c40: 2069 735f 7072 6976 6174 650a 2020 2020   is_private.    
+00026c50: 2020 2020 7365 6c66 2e69 735f 6c69 6e6b      self.is_link
+00026c60: 5f6c 6f63 616c 203d 2069 735f 6c69 6e6b  _local = is_link
+00026c70: 5f6c 6f63 616c 0a20 2020 2020 2020 2073  _local.        s
+00026c80: 656c 662e 6973 5f72 6573 6572 7665 6420  elf.is_reserved 
+00026c90: 3d20 6973 5f72 6573 6572 7665 640a 2020  = is_reserved.  
+00026ca0: 2020 2020 2020 7365 6c66 2e69 735f 6d75        self.is_mu
+00026cb0: 6c74 6963 6173 7420 3d20 6973 5f6d 756c  lticast = is_mul
+00026cc0: 7469 6361 7374 0a20 2020 2020 2020 2073  ticast.        s
+00026cd0: 656c 662e 6973 5f72 6f75 7465 6162 6c65  elf.is_routeable
+00026ce0: 203d 2069 735f 726f 7574 6561 626c 650a   = is_routeable.
+00026cf0: 2020 2020 2020 2020 7365 6c66 2e69 735f          self.is_
+00026d00: 3674 6f34 203d 2069 735f 3674 6f34 0a20  6to4 = is_6to4. 
+00026d10: 2020 2020 2020 2073 656c 662e 6973 5f74         self.is_t
+00026d20: 6572 6564 6f20 3d20 6973 5f74 6572 6564  eredo = is_tered
+00026d30: 6f0a 2020 2020 2020 2020 7365 6c66 2e73  o.        self.s
+00026d40: 7562 6e65 7473 203d 2073 7562 6e65 7473  ubnets = subnets
+00026d50: 0a20 2020 2020 2020 2073 656c 662e 6973  .        self.is
+00026d60: 5f69 7076 3620 3d20 6973 5f69 7076 3620  _ipv6 = is_ipv6 
+00026d70: 6f72 2069 735f 6970 7634 2069 7320 4661  or is_ipv4 is Fa
+00026d80: 6c73 650a 2020 2020 2020 2020 7365 6c66  lse.        self
+00026d90: 2e65 7272 6f72 5f6d 6573 7361 6765 203d  .error_message =
+00026da0: 2065 7272 6f72 5f6d 6573 7361 6765 0a0a   error_message..
+00026db0: 2020 2020 6465 6620 7661 6c69 6461 7465      def validate
+00026dc0: 2873 656c 662c 2076 616c 7565 2c20 7265  (self, value, re
+00026dd0: 636f 7264 5f69 643d 4e6f 6e65 293a 0a20  cord_id=None):. 
+00026de0: 2020 2020 2020 2049 5041 6464 7265 7373         IPAddress
+00026df0: 203d 2069 7061 6464 7265 7373 2e69 705f   = ipaddress.ip_
+00026e00: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
+00026e10: 4950 7636 4164 6472 6573 7320 3d20 6970  IPv6Address = ip
+00026e20: 6164 6472 6573 732e 4950 7636 4164 6472  address.IPv6Addr
+00026e30: 6573 730a 2020 2020 2020 2020 4950 7634  ess.        IPv4
+00026e40: 4164 6472 6573 7320 3d20 6970 6164 6472  Address = ipaddr
+00026e50: 6573 732e 4950 7634 4164 6472 6573 730a  ess.IPv4Address.
+00026e60: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+00026e70: 2020 2020 2020 2020 2020 6970 203d 2049            ip = I
+00026e80: 5041 6464 7265 7373 2874 6f5f 756e 6963  PAddress(to_unic
+00026e90: 6f64 6528 7661 6c75 6529 290a 2020 2020  ode(value)).    
+00026ea0: 2020 2020 6578 6365 7074 2056 616c 7565      except Value
+00026eb0: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
+00026ec0: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+00026ed0: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+00026ee0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+00026ef0: 726f 725f 6d65 7373 6167 6529 290a 0a20  ror_message)).. 
+00026f00: 2020 2020 2020 2069 6620 7365 6c66 2e69         if self.i
+00026f10: 735f 6970 7634 2061 6e64 2069 7369 6e73  s_ipv4 and isins
+00026f20: 7461 6e63 6528 6970 2c20 4950 7636 4164  tance(ip, IPv6Ad
+00026f30: 6472 6573 7329 3a0a 2020 2020 2020 2020  dress):.        
+00026f40: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+00026f50: 7469 6f6e 4572 726f 7228 7365 6c66 2e74  tionError(self.t
+00026f60: 7261 6e73 6c61 746f 7228 7365 6c66 2e65  ranslator(self.e
+00026f70: 7272 6f72 5f6d 6573 7361 6765 2929 0a20  rror_message)). 
+00026f80: 2020 2020 2020 2065 6c69 6620 7365 6c66         elif self
+00026f90: 2e69 735f 6970 7636 2061 6e64 2069 7369  .is_ipv6 and isi
+00026fa0: 6e73 7461 6e63 6528 6970 2c20 4950 7634  nstance(ip, IPv4
+00026fb0: 4164 6472 6573 7329 3a0a 2020 2020 2020  Address):.      
+00026fc0: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
+00026fd0: 6461 7469 6f6e 4572 726f 7228 7365 6c66  dationError(self
+00026fe0: 2e74 7261 6e73 6c61 746f 7228 7365 6c66  .translator(self
+00026ff0: 2e65 7272 6f72 5f6d 6573 7361 6765 2929  .error_message))
+00027000: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
+00027010: 6c66 2e69 735f 6970 7634 206f 7220 6973  lf.is_ipv4 or is
+00027020: 696e 7374 616e 6365 2869 702c 2049 5076  instance(ip, IPv
+00027030: 3441 6464 7265 7373 293a 0a20 2020 2020  4Address):.     
+00027040: 2020 2020 2020 2072 6574 7572 6e20 4953         return IS
+00027050: 5f49 5056 3428 0a20 2020 2020 2020 2020  _IPV4(.         
+00027060: 2020 2020 2020 206d 696e 6970 3d73 656c         minip=sel
+00027070: 662e 6d69 6e69 702c 0a20 2020 2020 2020  f.minip,.       
+00027080: 2020 2020 2020 2020 206d 6178 6970 3d73           maxip=s
+00027090: 656c 662e 6d61 7869 702c 0a20 2020 2020  elf.maxip,.     
+000270a0: 2020 2020 2020 2020 2020 2069 6e76 6572             inver
+000270b0: 743d 7365 6c66 2e69 6e76 6572 742c 0a20  t=self.invert,. 
+000270c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000270d0: 735f 6c6f 6361 6c68 6f73 743d 7365 6c66  s_localhost=self
+000270e0: 2e69 735f 6c6f 6361 6c68 6f73 742c 0a20  .is_localhost,. 
+000270f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00027100: 735f 7072 6976 6174 653d 7365 6c66 2e69  s_private=self.i
+00027110: 735f 7072 6976 6174 652c 0a20 2020 2020  s_private,.     
+00027120: 2020 2020 2020 2020 2020 2069 735f 6175             is_au
+00027130: 746f 6d61 7469 633d 7365 6c66 2e69 735f  tomatic=self.is_
+00027140: 6175 746f 6d61 7469 632c 0a20 2020 2020  automatic,.     
+00027150: 2020 2020 2020 2020 2020 2065 7272 6f72             error
+00027160: 5f6d 6573 7361 6765 3d73 656c 662e 6572  _message=self.er
+00027170: 726f 725f 6d65 7373 6167 652c 0a20 2020  ror_message,.   
+00027180: 2020 2020 2020 2020 2029 2e76 616c 6964           ).valid
+00027190: 6174 6528 7661 6c75 652c 2072 6563 6f72  ate(value, recor
+000271a0: 645f 6964 290a 2020 2020 2020 2020 656c  d_id).        el
+000271b0: 6966 2073 656c 662e 6973 5f69 7076 3620  if self.is_ipv6 
+000271c0: 6f72 2069 7369 6e73 7461 6e63 6528 6970  or isinstance(ip
+000271d0: 2c20 4950 7636 4164 6472 6573 7329 3a0a  , IPv6Address):.
+000271e0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+000271f0: 726e 2049 535f 4950 5636 280a 2020 2020  rn IS_IPV6(.    
+00027200: 2020 2020 2020 2020 2020 2020 6973 5f70              is_p
+00027210: 7269 7661 7465 3d73 656c 662e 6973 5f70  rivate=self.is_p
+00027220: 7269 7661 7465 2c0a 2020 2020 2020 2020  rivate,.        
+00027230: 2020 2020 2020 2020 6973 5f6c 696e 6b5f          is_link_
+00027240: 6c6f 6361 6c3d 7365 6c66 2e69 735f 6c69  local=self.is_li
+00027250: 6e6b 5f6c 6f63 616c 2c0a 2020 2020 2020  nk_local,.      
+00027260: 2020 2020 2020 2020 2020 6973 5f72 6573            is_res
+00027270: 6572 7665 643d 7365 6c66 2e69 735f 7265  erved=self.is_re
+00027280: 7365 7276 6564 2c0a 2020 2020 2020 2020  served,.        
+00027290: 2020 2020 2020 2020 6973 5f6d 756c 7469          is_multi
+000272a0: 6361 7374 3d73 656c 662e 6973 5f6d 756c  cast=self.is_mul
+000272b0: 7469 6361 7374 2c0a 2020 2020 2020 2020  ticast,.        
+000272c0: 2020 2020 2020 2020 6973 5f72 6f75 7465          is_route
+000272d0: 6162 6c65 3d73 656c 662e 6973 5f72 6f75  able=self.is_rou
+000272e0: 7465 6162 6c65 2c0a 2020 2020 2020 2020  teable,.        
+000272f0: 2020 2020 2020 2020 6973 5f36 746f 343d          is_6to4=
+00027300: 7365 6c66 2e69 735f 3674 6f34 2c0a 2020  self.is_6to4,.  
+00027310: 2020 2020 2020 2020 2020 2020 2020 6973                is
+00027320: 5f74 6572 6564 6f3d 7365 6c66 2e69 735f  _teredo=self.is_
+00027330: 7465 7265 646f 2c0a 2020 2020 2020 2020  teredo,.        
+00027340: 2020 2020 2020 2020 7375 626e 6574 733d          subnets=
+00027350: 7365 6c66 2e73 7562 6e65 7473 2c0a 2020  self.subnets,.  
+00027360: 2020 2020 2020 2020 2020 2020 2020 6572                er
+00027370: 726f 725f 6d65 7373 6167 653d 7365 6c66  ror_message=self
+00027380: 2e65 7272 6f72 5f6d 6573 7361 6765 2c0a  .error_message,.
+00027390: 2020 2020 2020 2020 2020 2020 292e 7661              ).va
+000273a0: 6c69 6461 7465 2876 616c 7565 2c20 7265  lidate(value, re
+000273b0: 636f 7264 5f69 6429 0a20 2020 2020 2020  cord_id).       
+000273c0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000273d0: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+000273e0: 696f 6e45 7272 6f72 2873 656c 662e 7472  ionError(self.tr
+000273f0: 616e 736c 6174 6f72 2873 656c 662e 6572  anslator(self.er
+00027400: 726f 725f 6d65 7373 6167 6529 290a       ror_message)).
```

### Comparing `pydal-20240529.1/pydal.egg-info/PKG-INFO` & `pydal-20240601.1/pydal.egg-info/PKG-INFO`

 * *Files 5% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pydal
-Version: 20240529.1
+Version: 20240601.1
 Summary: pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")
 Author-email: Massimo Di Pierro <massimo.dipierro@gmail.com>
 Project-URL: Homepage, https://github.com/web2py/pydal
 Project-URL: Bug Tracker, https://github.com/web2py/pydal/issues
 Project-URL: Documentation, https://py4web.com/_documentation/static/en/chapter-07.html
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: BSD License
```

### Comparing `pydal-20240529.1/pydal.egg-info/SOURCES.txt` & `pydal-20240601.1/pydal.egg-info/SOURCES.txt`

 * *Files 2% similar despite different names*

```diff
@@ -95,26 +95,29 @@
 pydal/representers/mongo.py
 pydal/representers/mssql.py
 pydal/representers/mysql.py
 pydal/representers/oracle.py
 pydal/representers/postgre.py
 pydal/representers/sqlite.py
 pydal/tools/__init__.py
+pydal/tools/scheduler.py
 pydal/tools/tags.py
 tests/__init__.py
 tests/_adapt.py
 tests/_compat.py
 tests/_helpers.py
 tests/base.py
 tests/caching.py
 tests/contribs.py
 tests/indexes.py
 tests/is_url_validators.py
 tests/nosql.py
 tests/restapi.py
+tests/scheduler.py
+tests/scheduler.py~
 tests/smart_query.py
 tests/sql.py
 tests/tags.py
 tests/validation.py
 tests/validators.py
 tests/__pycache__/__init__.cpython-311.pyc
 tests/__pycache__/_adapt.cpython-311.pyc
@@ -122,14 +125,16 @@
 tests/__pycache__/_helpers.cpython-311.pyc
 tests/__pycache__/base.cpython-311.pyc
 tests/__pycache__/caching.cpython-311.pyc
 tests/__pycache__/contribs.cpython-311.pyc
 tests/__pycache__/indexes.cpython-311.pyc
 tests/__pycache__/is_url_validators.cpython-311.pyc
 tests/__pycache__/restapi.cpython-311.pyc
+tests/__pycache__/scheduler.cpython-311-pytest-8.2.1.pyc
+tests/__pycache__/scheduler.cpython-311.pyc
 tests/__pycache__/smart_query.cpython-311.pyc
 tests/__pycache__/sql.cpython-311.pyc
 tests/__pycache__/tags.cpython-311.pyc
 tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc
 tests/__pycache__/validation.cpython-311.pyc
 tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc
 tests/__pycache__/validators.cpython-311.pyc
```

### Comparing `pydal-20240529.1/pyproject.toml` & `pydal-20240601.1/pyproject.toml`

 * *Files 12% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [project]
 name = "pydal"
-version = "20240529.1"
+version = "20240601.1"
 authors = [{ name="Massimo Di Pierro", email="massimo.dipierro@gmail.com" },]
 description = 'pyDAL is a Database Abstraction Layer. It generates queries for SQlite, PotsgreSQL, MySQL, and other backends. It was originally part of the web2py frameworks but it is now an independent project. Example: db.define_table("thing",Field("name")) and db.thing.insert(name="Pizza")'
 readme = "README.md"
 requires-python = ">=3.7"
 classifiers = [
       "Programming Language :: Python :: 3",
       "License :: OSI Approved :: BSD License",
```

### Comparing `pydal-20240529.1/tests/__pycache__/__init__.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/__init__.cpython-311.pyc`

 * *Files 23% similar despite different names*

#### Python bytecode

```diff
@@ -1,21 +1,21 @@
 magic:    0xa70d0d0a
-moddate:  0x742d5864 (Sun May  7 23:00:04 2023 UTC)
-files sz: 355
+moddate:  0xd9f45b66 (Sun Jun  2 04:28:09 2024 UTC)
+files sz: 380
 code
    argcount  : 0
    nlocals   : 0
    stacksize : 2
    flags     : 0
    code
       0x9700640064016c006d015a01010065017205640064026c0254006e0864
       0064026c035400640064026c045400640064026c055400640064036c066d
       075a070100640064026c085400640064026c095400640064026c0a540064
       0064026c0b5400640064026c0c5400640064026c0d5400640064026c0e54
-      0064045300
+      00640064026c0f540064045300
      0           0 RESUME                   0
    
      1           2 LOAD_CONST               0 (1)
                  4 LOAD_CONST               1 (('IS_NOSQL',))
                  6 IMPORT_NAME              0 (_adapt)
                  8 IMPORT_FROM              1 (IS_NOSQL)
                 10 STORE_NAME               1 (IS_NOSQL)
@@ -82,25 +82,30 @@
                108 IMPORT_NAME             13 (validation)
                110 IMPORT_STAR
    
     17         112 LOAD_CONST               0 (1)
                114 LOAD_CONST               2 (('*',))
                116 IMPORT_NAME             14 (validators)
                118 IMPORT_STAR
-               120 LOAD_CONST               4 (None)
-               122 RETURN_VALUE
+   
+    18         120 LOAD_CONST               0 (1)
+               122 LOAD_CONST               2 (('*',))
+               124 IMPORT_NAME             15 (scheduler)
+               126 IMPORT_STAR
+               128 LOAD_CONST               4 (None)
+               130 RETURN_VALUE
    consts
       1
       ('IS_NOSQL',)
       ('*',)
       ('TestCache',)
       None
-   names      ('_adapt', 'IS_NOSQL', 'nosql', 'sql', 'indexes', 'base', 'caching', 'TestCache', 'contribs', 'is_url_validators', 'restapi', 'smart_query', 'tags', 'validation', 'validators')
+   names      ('_adapt', 'IS_NOSQL', 'nosql', 'sql', 'indexes', 'base', 'caching', 'TestCache', 'contribs', 'is_url_validators', 'restapi', 'smart_query', 'tags', 'validation', 'validators', 'scheduler')
    varnames   ()
    freevars   ()
    cellvars   ()
    filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/__init__.py'
    name       '<module>'
    firstlineno 1
    lnotab
       0x00ff02010c0204010a020801080208010c010801080108010801080108
-      01
+      010801
```

### Comparing `pydal-20240529.1/tests/__pycache__/_adapt.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/_adapt.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/_helpers.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/_helpers.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/base.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/base.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/caching.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/caching.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/contribs.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/contribs.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/indexes.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/indexes.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/is_url_validators.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/is_url_validators.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/restapi.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/restapi.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/smart_query.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/smart_query.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/sql.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/sql.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/tags.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/tags.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc` & `pydal-20240601.1/tests/__pycache__/validation.cpython-311-pytest-8.2.1.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/validation.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/validation.cpython-311.pyc`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc` & `pydal-20240601.1/tests/__pycache__/validators.cpython-311-pytest-8.2.1.pyc`

 * *Files 5% similar despite different names*

#### Python bytecode

```diff
@@ -1,25 +1,25 @@
 magic:    0xa70d0d0a
-moddate:  0x75245866 (Thu May 30 07:02:13 2024 UTC)
-files sz: 67571
+moddate:  0x55f45b66 (Sun Jun  2 04:25:57 2024 UTC)
+files sz: 68333
 code
    argcount  : 0
    nlocals   : 0
    stacksize : 5
    flags     : 0
    code
       0x970064005a00640164026c015a02640164026c036d04630201006d055a
       060100640164026c075a07640164026c085a08640164026c095a09640164
       026c0a5a0a640164036c0b6d0c5a0c6d0d5a0d0100640164046c0e6d0f5a
       0f6d105a100100640164056c115400640164066c116d125a126d135a136d
       145a14010002004700640784006408650a6a150000000000000000a60300
       00ab0300000000000000005a1664025300
      0           0 RESUME                   0
    
-     4           2 LOAD_CONST               0 ('Unit tests for http.py ')
+     4           2 LOAD_CONST               0 ('Unit tests for validators.py ')
                  4 STORE_NAME               0 (__doc__)
    
      6           6 LOAD_CONST               1 (0)
                  8 LOAD_CONST               2 (None)
                 10 IMPORT_NAME              1 (builtins)
                 12 STORE_NAME               2 (@py_builtins)
                 14 LOAD_CONST               1 (0)
@@ -94,15 +94,15 @@
                136 LOAD_ATTR               21 (TestCase)
                146 PRECALL                  3
                150 CALL                     3
                160 STORE_NAME              22 (TestValidators)
                162 LOAD_CONST               2 (None)
                164 RETURN_VALUE
    consts
-      'Unit tests for http.py '
+      'Unit tests for validators.py '
       0
       None
       ('DAL', 'Field')
       ('PY2', 'to_bytes')
       ('*',)
       ('UTC', 'Validator', 'options_sorter')
       code
@@ -116,15 +116,16 @@
             0984005a0b640a84005a0c640b84005a0d640c84005a0e640d84005a0f64
             0e84005a10640f84005a11641084005a12641184005a13641284005a1464
             1384005a15641484005a16641584005a17641684005a18641784005a1964
             1884005a1a641984005a1b641a84005a1c641b84005a1d641c84005a1e64
             1d84005a1f02004700641e8400641f6520a6030000ab0300000000000000
             005a21652264208400a6000000ab0000000000000000005a23642184005a
             24642284005a25642384005a26642484005a27642584005a28642684005a
-            29642784005a2a642884005a2b642984005a2c642a84005a2d642b5300
+            29642784005a2a642884005a2b642984005a2c642a84005a2d642b84005a
+            2e642c5300
            17           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestValidators')
                         8 STORE_NAME               2 (__qualname__)
          
            18          10 LOAD_CONST               1 (<code object myassertRegex, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 18>)
@@ -155,159 +156,163 @@
                        48 MAKE_FUNCTION            0
                        50 STORE_NAME               9 (test_IS_JSON)
          
           173          52 LOAD_CONST               8 (<code object test_IS_IN_SET, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 173>)
                        54 MAKE_FUNCTION            0
                        56 STORE_NAME              10 (test_IS_IN_SET)
          
-          213          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 213>)
+          222          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 222>)
                        60 MAKE_FUNCTION            0
                        62 STORE_NAME              11 (test_IS_IN_DB)
          
-          389          64 LOAD_CONST              10 (<code object test_IS_IN_DB_options, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 389>)
+          398          64 LOAD_CONST              10 (<code object test_IS_IN_DB_options, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 398>)
                        66 MAKE_FUNCTION            0
                        68 STORE_NAME              12 (test_IS_IN_DB_options)
          
-          402          70 LOAD_CONST              11 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 402>)
+          421          70 LOAD_CONST              11 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 421>)
                        72 MAKE_FUNCTION            0
                        74 STORE_NAME              13 (test_IS_NOT_IN_DB)
          
-          432          76 LOAD_CONST              12 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 432>)
+          451          76 LOAD_CONST              12 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 451>)
                        78 MAKE_FUNCTION            0
                        80 STORE_NAME              14 (test_IS_INT_IN_RANGE)
          
-          458          82 LOAD_CONST              13 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 458>)
+          477          82 LOAD_CONST              13 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 477>)
                        84 MAKE_FUNCTION            0
                        86 STORE_NAME              15 (test_IS_FLOAT_IN_RANGE)
          
-          499          88 LOAD_CONST              14 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 499>)
+          518          88 LOAD_CONST              14 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 518>)
                        90 MAKE_FUNCTION            0
                        92 STORE_NAME              16 (test_IS_DECIMAL_IN_RANGE)
          
-          553          94 LOAD_CONST              15 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 553>)
+          572          94 LOAD_CONST              15 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 572>)
                        96 MAKE_FUNCTION            0
                        98 STORE_NAME              17 (test_IS_NOT_EMPTY)
          
-          581         100 LOAD_CONST              16 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 581>)
+          600         100 LOAD_CONST              16 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 600>)
                       102 MAKE_FUNCTION            0
                       104 STORE_NAME              18 (test_IS_ALPHANUMERIC)
          
-          591         106 LOAD_CONST              17 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 591>)
+          610         106 LOAD_CONST              17 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 610>)
                       108 MAKE_FUNCTION            0
                       110 STORE_NAME              19 (test_IS_EMAIL)
          
-          668         112 LOAD_CONST              18 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 668>)
+          687         112 LOAD_CONST              18 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 687>)
                       114 MAKE_FUNCTION            0
                       116 STORE_NAME              20 (test_IS_LIST_OF_EMAILS)
          
-          684         118 LOAD_CONST              19 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 684>)
+          703         118 LOAD_CONST              19 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 703>)
                       120 MAKE_FUNCTION            0
                       122 STORE_NAME              21 (test_IS_URL)
          
-          700         124 LOAD_CONST              20 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 700>)
+          719         124 LOAD_CONST              20 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 719>)
                       126 MAKE_FUNCTION            0
                       128 STORE_NAME              22 (test_IS_TIME)
          
-          738         130 LOAD_CONST              21 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 738>)
+          757         130 LOAD_CONST              21 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 757>)
                       132 MAKE_FUNCTION            0
                       134 STORE_NAME              23 (test_IS_DATE)
          
-          749         136 LOAD_CONST              22 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 749>)
+          768         136 LOAD_CONST              22 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 768>)
                       138 MAKE_FUNCTION            0
                       140 STORE_NAME              24 (test_IS_DATETIME)
          
-          780         142 LOAD_CONST              23 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 780>)
+          799         142 LOAD_CONST              23 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 799>)
                       144 MAKE_FUNCTION            0
                       146 STORE_NAME              25 (test_IS_DATE_IN_RANGE)
          
-          812         148 LOAD_CONST              24 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 812>)
+          831         148 LOAD_CONST              24 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 831>)
                       150 MAKE_FUNCTION            0
                       152 STORE_NAME              26 (test_IS_DATETIME_IN_RANGE)
          
-          870         154 LOAD_CONST              25 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 870>)
+          889         154 LOAD_CONST              25 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 889>)
                       156 MAKE_FUNCTION            0
                       158 STORE_NAME              27 (test_IS_LIST_OF)
          
-          887         160 LOAD_CONST              26 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 887>)
+          906         160 LOAD_CONST              26 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 906>)
                       162 MAKE_FUNCTION            0
                       164 STORE_NAME              28 (test_IS_LOWER)
          
-          895         166 LOAD_CONST              27 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 895>)
+          914         166 LOAD_CONST              27 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 914>)
                       168 MAKE_FUNCTION            0
                       170 STORE_NAME              29 (test_IS_UPPER)
          
-          903         172 LOAD_CONST              28 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 903>)
+          922         172 LOAD_CONST              28 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 922>)
                       174 MAKE_FUNCTION            0
                       176 STORE_NAME              30 (test_IS_SLUG)
          
-          943         178 LOAD_CONST              29 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 943>)
+          962         178 LOAD_CONST              29 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 962>)
                       180 MAKE_FUNCTION            0
                       182 STORE_NAME              31 (test_ANY_OF)
          
-          961         184 PUSH_NULL
+          980         184 PUSH_NULL
                       186 LOAD_BUILD_CLASS
-                      188 LOAD_CONST              30 (<code object CustomValidator, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 961>)
+                      188 LOAD_CONST              30 (<code object CustomValidator, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 980>)
                       190 MAKE_FUNCTION            0
                       192 LOAD_CONST              31 ('CustomValidator')
                       194 LOAD_NAME               32 (Validator)
                       196 PRECALL                  3
                       200 CALL                     3
                       210 STORE_NAME              33 (CustomValidator)
          
-          967         212 LOAD_NAME               34 (staticmethod)
+          986         212 LOAD_NAME               34 (staticmethod)
          
-          968         214 LOAD_CONST              32 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 967>)
+          987         214 LOAD_CONST              32 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 986>)
                       216 MAKE_FUNCTION            0
          
-          967         218 PRECALL                  0
+          986         218 PRECALL                  0
                       222 CALL                     0
          
-          968         232 STORE_NAME              35 (custom_validator_func)
+          987         232 STORE_NAME              35 (custom_validator_func)
          
-          972         234 LOAD_CONST              33 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 972>)
+          991         234 LOAD_CONST              33 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 991>)
                       236 MAKE_FUNCTION            0
                       238 STORE_NAME              36 (test_IS_EMPTY_OR)
          
-         1010         240 LOAD_CONST              34 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1010>)
+         1029         240 LOAD_CONST              34 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1029>)
                       242 MAKE_FUNCTION            0
                       244 STORE_NAME              37 (test_CLEANUP)
          
-         1014         246 LOAD_CONST              35 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1014>)
+         1033         246 LOAD_CONST              35 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1033>)
                       248 MAKE_FUNCTION            0
                       250 STORE_NAME              38 (test_CRYPT)
          
-         1036         252 LOAD_CONST              36 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1036>)
+         1055         252 LOAD_CONST              36 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1055>)
                       254 MAKE_FUNCTION            0
                       256 STORE_NAME              39 (test_IS_STRONG)
          
-         1129         258 LOAD_CONST              37 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1129>)
+         1148         258 LOAD_CONST              37 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1148>)
                       260 MAKE_FUNCTION            0
                       262 STORE_NAME              40 (test_IS_IMAGE)
          
-         1199         264 LOAD_CONST              38 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1199>)
+         1218         264 LOAD_CONST              38 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1218>)
                       266 MAKE_FUNCTION            0
                       268 STORE_NAME              41 (test_IS_FILE)
          
-         1265         270 LOAD_CONST              39 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1265>)
+         1284         270 LOAD_CONST              39 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1284>)
                       272 MAKE_FUNCTION            0
                       274 STORE_NAME              42 (test_IS_UPLOAD_FILENAME)
          
-         1322         276 LOAD_CONST              40 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1322>)
+         1341         276 LOAD_CONST              40 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1341>)
                       278 MAKE_FUNCTION            0
                       280 STORE_NAME              43 (test_IS_IPV4)
          
-         1360         282 LOAD_CONST              41 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1360>)
+         1379         282 LOAD_CONST              41 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1379>)
                       284 MAKE_FUNCTION            0
                       286 STORE_NAME              44 (test_IS_IPV6)
          
-         1393         288 LOAD_CONST              42 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1393>)
+         1412         288 LOAD_CONST              42 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1412>)
                       290 MAKE_FUNCTION            0
                       292 STORE_NAME              45 (test_IS_IPADDRESS)
-                      294 LOAD_CONST              43 (None)
-                      296 RETURN_VALUE
+         
+         1487         294 LOAD_CONST              43 (<code object test_IS_SAFE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1487>)
+                      296 MAKE_FUNCTION            0
+                      298 STORE_NAME              46 (test_IS_SAFE)
+                      300 LOAD_CONST              44 (None)
+                      302 RETURN_VALUE
          consts
             'TestValidators'
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 5
                flags     : 15
@@ -1985,430 +1990,488 @@
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_JSON'
                firstlineno 159
                lnotab 0x02012e0134012e012c0132012c0142012c0146012c014a01
             code
                argcount  : 1
-               nlocals   : 3
+               nlocals   : 4
                stacksize : 8
                flags     : 3
                code
-                  0x97000200740100000000000000000000640164026702a6010000ab0100
-                  000000000000006401a6010000ab0100000000000000007d017c00a00100
-                  000000000000000000000000000000000000007c016403a6020000ab0200
-                  0000000000000001000200740100000000000000000000640164026702a6
-                  010000ab0100000000000000006404a6010000ab0100000000000000007d
-                  017c00a00100000000000000000000000000000000000000007c016405a6
+                  0x870497000200740100000000000000000000640164026702a6010000ab
+                  0100000000000000006401a6010000ab0100000000000000007d017c00a0
+                  0100000000000000000000000000000000000000007c016403a6020000ab
+                  020000000000000000010002007401000000000000000000006401640267
+                  02a6010000ab0100000000000000006404a6010000ab0100000000000000
+                  007d017c00a00100000000000000000000000000000000000000007c0164
+                  05a6020000ab020000000000000000010002007401000000000000000000
+                  006401640267026406ac07a6020000ab0200000000000000006408a60100
+                  00ab0100000000000000007d017c00a00100000000000000000000000000
+                  000000000000007c016409a6020000ab0200000000000000000100020074
+                  01000000000000000000006401640267026406ac07a6020000ab02000000
+                  0000000000640aa6010000ab0100000000000000007d017c00a001000000
+                  00000000000000000000000000000000007c01640ba6020000ab02000000
+                  000000000001000200740100000000000000000000640c640d640e6702a6
+                  020000ab020000000000000000640fa6010000ab0100000000000000007d
+                  017c00a00100000000000000000000000000000000000000007c016410a6
                   020000ab0200000000000000000100020074010000000000000000000064
-                  01640267026406ac07a6020000ab0200000000000000006408a6010000ab
-                  0100000000000000007d017c00a001000000000000000000000000000000
-                  00000000007c016409a6020000ab02000000000000000001000200740100
-                  0000000000000000006401640267026406ac07a6020000ab020000000000
-                  000000640aa6010000ab0100000000000000007d017c00a0010000000000
-                  0000000000000000000000000000007c01640ba6020000ab020000000000
-                  00000001000200740100000000000000000000640c640d640e6702a60200
-                  00ab020000000000000000640fa6010000ab0100000000000000007d017c
-                  00a00100000000000000000000000000000000000000007c016410a60200
-                  00ab02000000000000000001000200740100000000000000000000640d64
-                  0e640c9c02a6010000ab010000000000000000640fa6010000ab01000000
-                  00000000007d017c00a00100000000000000000000000000000000000000
-                  007c016410a6020000ab0200000000000000000100020074010000000000
-                  0000000000640f6411670264126406ac13a6030000ab0300000000000000
-                  006400a6010000ab0100000000000000007d017c00a00100000000000000
-                  000000000000000000000000007c01670064006602a6020000ab02000000
-                  000000000001000200740100000000000000000000640f64116702641264
-                  06ac13a6030000ab0300000000000000006414a6010000ab010000000000
-                  0000007d017c00a00100000000000000000000000000000000000000007c
-                  01670064006602a6020000ab020000000000000000010002007401000000
-                  00000000000000640f6411670264126406ac13a6030000ab030000000000
-                  000000640fa6010000ab0100000000000000007d017c00a0010000000000
-                  0000000000000000000000000000007c01640f670164006602a6020000ab
-                  02000000000000000001000200740100000000000000000000640f641167
-                  0264126415ac13a6030000ab0300000000000000006400a6010000ab0100
+                  0d640e640c9c02a6010000ab010000000000000000640fa6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
-                  0000007c016416a6020000ab0200000000000000000100641764006c027d
-                  0202007401000000000000000000007c02a0030000000000000000000000
-                  00000000000000000067006418a20167006419a201a6020000ab02000000
-                  0000000000a6010000ab010000000000000000641aa6010000ab01000000
+                  0000007c016410a6020000ab020000000000000000010002007401000000
+                  00000000000000640f6411670264126406ac13a6030000ab030000000000
+                  0000006400a6010000ab0100000000000000007d017c00a0010000000000
+                  0000000000000000000000000000007c01670064006602a6020000ab0200
+                  0000000000000001000200740100000000000000000000640f6411670264
+                  126406ac13a6030000ab0300000000000000006414a6010000ab01000000
                   00000000007d017c00a00100000000000000000000000000000000000000
-                  007c01641ba6020000ab0200000000000000000100020074010000000000
-                  0000000000641c641d6702a6010000ab010000000000000000640fa60100
-                  00ab0100000000000000007d017c00a00100000000000000000000000000
-                  000000000000007c016410a6020000ab0200000000000000000100740100
-                  000000000000000000641c641d6702a6010000ab010000000000000000a0
-                  040000000000000000000000000000000000000000641eac1fa6010000ab
+                  007c01670064006602a6020000ab02000000000000000001000200740100
+                  000000000000000000640f6411670264126406ac13a6030000ab03000000
+                  0000000000640fa6010000ab0100000000000000007d017c00a001000000
+                  00000000000000000000000000000000007c01640f670164006602a60200
+                  00ab02000000000000000001000200740100000000000000000000640f64
+                  11670264126415ac13a6030000ab0300000000000000006400a6010000ab
                   0100000000000000007d017c00a001000000000000000000000000000000
-                  00000000007c01641c641d6702a6020000ab020000000000000000010074
-                  0100000000000000000000640f64116702a6010000ab0100000000000000
+                  00000000007c016416a6020000ab0200000000000000000100641764006c
+                  027d0202007401000000000000000000007c02a003000000000000000000
+                  000000000000000000000067006418a20167006419a201a6020000ab0200
+                  00000000000000a6010000ab010000000000000000641aa6010000ab0100
+                  000000000000007d017c00a0010000000000000000000000000000000000
+                  0000007c01641ba6020000ab020000000000000000010002007401000000
+                  00000000000000641c641d6702a6010000ab010000000000000000640fa6
+                  010000ab0100000000000000007d017c00a0010000000000000000000000
+                  0000000000000000007c016410a6020000ab020000000000000000010074
+                  0100000000000000000000641c641d6702a6010000ab0100000000000000
                   00a0040000000000000000000000000000000000000000641eac1fa60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
-                  000000000000007c01642064216702a6020000ab02000000000000000001
-                  007401000000000000000000006411640f67026406ac22a6020000ab0200
-                  00000000000000a004000000000000000000000000000000000000000064
-                  1eac1fa6010000ab0100000000000000007d017c00a00100000000000000
-                  000000000000000000000000007c01642064216702a6020000ab02000000
-                  0000000000010064005300
-               173           0 RESUME                   0
+                  000000000000007c01641c641d6702a6020000ab02000000000000000001
+                  00740100000000000000000000640f64116702a6010000ab010000000000
+                  000000a0040000000000000000000000000000000000000000641eac1fa6
+                  010000ab0100000000000000007d017c00a0010000000000000000000000
+                  0000000000000000007c01642064216702a6020000ab0200000000000000
+                  0001007401000000000000000000006411640f67026406ac22a6020000ab
+                  020000000000000000a00400000000000000000000000000000000000000
+                  00641eac1fa6010000ab0100000000000000007d017c00a0010000000000
+                  0000000000000000000000000000007c01642064216702a6020000ab0200
+                  00000000000000010067008a047401000000000000000000008804660164
+                  238408a6010000ab0100000000000000007d0302007c036401a6010000ab
+                  0100000000000000007d017c00a001000000000000000000000000000000
+                  00000000007c016424a6020000ab02000000000000000001008904a00500
+                  000000000000000000000000000000000000006401a6010000ab01000000
+                  0000000000010002007c036401a6010000ab0100000000000000007d017c
+                  00a00100000000000000000000000000000000000000007c016403a60200
+                  00ab020000000000000000010064005300
+                             0 MAKE_CELL                4 (theset)
                
-               174           2 PUSH_NULL
-                             4 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                            16 LOAD_CONST               1 ('max')
-                            18 LOAD_CONST               2 ('john')
-                            20 BUILD_LIST               2
-                            22 PRECALL                  1
-                            26 CALL                     1
-                            36 LOAD_CONST               1 ('max')
-                            38 PRECALL                  1
-                            42 CALL                     1
-                            52 STORE_FAST               1 (rtn)
-               
-               175          54 LOAD_FAST                0 (self)
-                            56 LOAD_METHOD              1 (assertEqual)
-                            78 LOAD_FAST                1 (rtn)
-                            80 LOAD_CONST               3 (('max', None))
-                            82 PRECALL                  2
-                            86 CALL                     2
-                            96 POP_TOP
-               
-               176          98 PUSH_NULL
-                           100 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           112 LOAD_CONST               1 ('max')
-                           114 LOAD_CONST               2 ('john')
-                           116 BUILD_LIST               2
-                           118 PRECALL                  1
-                           122 CALL                     1
-                           132 LOAD_CONST               4 ('massimo')
-                           134 PRECALL                  1
-                           138 CALL                     1
-                           148 STORE_FAST               1 (rtn)
+               173           2 RESUME                   0
                
-               177         150 LOAD_FAST                0 (self)
-                           152 LOAD_METHOD              1 (assertEqual)
-                           174 LOAD_FAST                1 (rtn)
-                           176 LOAD_CONST               5 (('massimo', 'Value not allowed'))
-                           178 PRECALL                  2
-                           182 CALL                     2
-                           192 POP_TOP
-               
-               178         194 PUSH_NULL
-                           196 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           208 LOAD_CONST               1 ('max')
-                           210 LOAD_CONST               2 ('john')
-                           212 BUILD_LIST               2
-                           214 LOAD_CONST               6 (True)
-                           216 KW_NAMES                 7
-                           218 PRECALL                  2
-                           222 CALL                     2
-                           232 LOAD_CONST               8 (('max', 'john'))
-                           234 PRECALL                  1
-                           238 CALL                     1
-                           248 STORE_FAST               1 (rtn)
+               174           4 PUSH_NULL
+                             6 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                            18 LOAD_CONST               1 ('max')
+                            20 LOAD_CONST               2 ('john')
+                            22 BUILD_LIST               2
+                            24 PRECALL                  1
+                            28 CALL                     1
+                            38 LOAD_CONST               1 ('max')
+                            40 PRECALL                  1
+                            44 CALL                     1
+                            54 STORE_FAST               1 (rtn)
+               
+               175          56 LOAD_FAST                0 (self)
+                            58 LOAD_METHOD              1 (assertEqual)
+                            80 LOAD_FAST                1 (rtn)
+                            82 LOAD_CONST               3 (('max', None))
+                            84 PRECALL                  2
+                            88 CALL                     2
+                            98 POP_TOP
                
-               179         250 LOAD_FAST                0 (self)
-                           252 LOAD_METHOD              1 (assertEqual)
-                           274 LOAD_FAST                1 (rtn)
-                           276 LOAD_CONST               9 ((('max', 'john'), None))
-                           278 PRECALL                  2
-                           282 CALL                     2
-                           292 POP_TOP
-               
-               180         294 PUSH_NULL
-                           296 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           308 LOAD_CONST               1 ('max')
-                           310 LOAD_CONST               2 ('john')
-                           312 BUILD_LIST               2
-                           314 LOAD_CONST               6 (True)
-                           316 KW_NAMES                 7
-                           318 PRECALL                  2
-                           322 CALL                     2
-                           332 LOAD_CONST              10 (('bill', 'john'))
-                           334 PRECALL                  1
-                           338 CALL                     1
-                           348 STORE_FAST               1 (rtn)
+               176         100 PUSH_NULL
+                           102 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           114 LOAD_CONST               1 ('max')
+                           116 LOAD_CONST               2 ('john')
+                           118 BUILD_LIST               2
+                           120 PRECALL                  1
+                           124 CALL                     1
+                           134 LOAD_CONST               4 ('massimo')
+                           136 PRECALL                  1
+                           140 CALL                     1
+                           150 STORE_FAST               1 (rtn)
+               
+               177         152 LOAD_FAST                0 (self)
+                           154 LOAD_METHOD              1 (assertEqual)
+                           176 LOAD_FAST                1 (rtn)
+                           178 LOAD_CONST               5 (('massimo', 'Value not allowed'))
+                           180 PRECALL                  2
+                           184 CALL                     2
+                           194 POP_TOP
+               
+               178         196 PUSH_NULL
+                           198 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           210 LOAD_CONST               1 ('max')
+                           212 LOAD_CONST               2 ('john')
+                           214 BUILD_LIST               2
+                           216 LOAD_CONST               6 (True)
+                           218 KW_NAMES                 7
+                           220 PRECALL                  2
+                           224 CALL                     2
+                           234 LOAD_CONST               8 (('max', 'john'))
+                           236 PRECALL                  1
+                           240 CALL                     1
+                           250 STORE_FAST               1 (rtn)
                
-               181         350 LOAD_FAST                0 (self)
-                           352 LOAD_METHOD              1 (assertEqual)
-                           374 LOAD_FAST                1 (rtn)
-                           376 LOAD_CONST              11 ((('bill', 'john'), 'Value not allowed'))
-                           378 PRECALL                  2
-                           382 CALL                     2
-                           392 POP_TOP
+               179         252 LOAD_FAST                0 (self)
+                           254 LOAD_METHOD              1 (assertEqual)
+                           276 LOAD_FAST                1 (rtn)
+                           278 LOAD_CONST               9 ((('max', 'john'), None))
+                           280 PRECALL                  2
+                           284 CALL                     2
+                           294 POP_TOP
                
-               182         394 PUSH_NULL
-                           396 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           408 LOAD_CONST              12 (('id1', 'id2'))
-                           410 LOAD_CONST              13 ('first label')
-                           412 LOAD_CONST              14 ('second label')
-                           414 BUILD_LIST               2
-                           416 PRECALL                  2
-                           420 CALL                     2
+               180         296 PUSH_NULL
+                           298 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           310 LOAD_CONST               1 ('max')
+                           312 LOAD_CONST               2 ('john')
+                           314 BUILD_LIST               2
+                           316 LOAD_CONST               6 (True)
+                           318 KW_NAMES                 7
+                           320 PRECALL                  2
+                           324 CALL                     2
+                           334 LOAD_CONST              10 (('bill', 'john'))
+                           336 PRECALL                  1
+                           340 CALL                     1
+                           350 STORE_FAST               1 (rtn)
+               
+               181         352 LOAD_FAST                0 (self)
+                           354 LOAD_METHOD              1 (assertEqual)
+                           376 LOAD_FAST                1 (rtn)
+                           378 LOAD_CONST              11 ((('bill', 'john'), 'Value not allowed'))
+                           380 PRECALL                  2
+                           384 CALL                     2
+                           394 POP_TOP
+               
+               182         396 PUSH_NULL
+                           398 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           410 LOAD_CONST              12 (('id1', 'id2'))
+                           412 LOAD_CONST              13 ('first label')
+                           414 LOAD_CONST              14 ('second label')
+                           416 BUILD_LIST               2
+                           418 PRECALL                  2
+                           422 CALL                     2
                
-               183         430 LOAD_CONST              15 ('id1')
+               183         432 LOAD_CONST              15 ('id1')
                
-               182         432 PRECALL                  1
-                           436 CALL                     1
-                           446 STORE_FAST               1 (rtn)
+               182         434 PRECALL                  1
+                           438 CALL                     1
+                           448 STORE_FAST               1 (rtn)
+               
+               185         450 LOAD_FAST                0 (self)
+                           452 LOAD_METHOD              1 (assertEqual)
+                           474 LOAD_FAST                1 (rtn)
+                           476 LOAD_CONST              16 (('id1', None))
+                           478 PRECALL                  2
+                           482 CALL                     2
+                           492 POP_TOP
+               
+               186         494 PUSH_NULL
+                           496 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           508 LOAD_CONST              13 ('first label')
+                           510 LOAD_CONST              14 ('second label')
+                           512 LOAD_CONST              12 (('id1', 'id2'))
+                           514 BUILD_CONST_KEY_MAP      2
+                           516 PRECALL                  1
+                           520 CALL                     1
+                           530 LOAD_CONST              15 ('id1')
+                           532 PRECALL                  1
+                           536 CALL                     1
+                           546 STORE_FAST               1 (rtn)
                
-               185         448 LOAD_FAST                0 (self)
-                           450 LOAD_METHOD              1 (assertEqual)
-                           472 LOAD_FAST                1 (rtn)
-                           474 LOAD_CONST              16 (('id1', None))
-                           476 PRECALL                  2
-                           480 CALL                     2
-                           490 POP_TOP
-               
-               186         492 PUSH_NULL
-                           494 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           506 LOAD_CONST              13 ('first label')
-                           508 LOAD_CONST              14 ('second label')
-                           510 LOAD_CONST              12 (('id1', 'id2'))
-                           512 BUILD_CONST_KEY_MAP      2
-                           514 PRECALL                  1
-                           518 CALL                     1
-                           528 LOAD_CONST              15 ('id1')
-                           530 PRECALL                  1
-                           534 CALL                     1
-                           544 STORE_FAST               1 (rtn)
-               
-               187         546 LOAD_FAST                0 (self)
-                           548 LOAD_METHOD              1 (assertEqual)
-                           570 LOAD_FAST                1 (rtn)
-                           572 LOAD_CONST              16 (('id1', None))
-                           574 PRECALL                  2
-                           578 CALL                     2
-                           588 POP_TOP
+               187         548 LOAD_FAST                0 (self)
+                           550 LOAD_METHOD              1 (assertEqual)
+                           572 LOAD_FAST                1 (rtn)
+                           574 LOAD_CONST              16 (('id1', None))
+                           576 PRECALL                  2
+                           580 CALL                     2
+                           590 POP_TOP
                
-               188         590 PUSH_NULL
-                           592 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           604 LOAD_CONST              15 ('id1')
-                           606 LOAD_CONST              17 ('id2')
-                           608 BUILD_LIST               2
-                           610 LOAD_CONST              18 ('oops')
-                           612 LOAD_CONST               6 (True)
-                           614 KW_NAMES                19
-                           616 PRECALL                  3
-                           620 CALL                     3
-                           630 LOAD_CONST               0 (None)
-                           632 PRECALL                  1
-                           636 CALL                     1
-                           646 STORE_FAST               1 (rtn)
-               
-               189         648 LOAD_FAST                0 (self)
-                           650 LOAD_METHOD              1 (assertEqual)
-                           672 LOAD_FAST                1 (rtn)
-                           674 BUILD_LIST               0
-                           676 LOAD_CONST               0 (None)
-                           678 BUILD_TUPLE              2
-                           680 PRECALL                  2
-                           684 CALL                     2
-                           694 POP_TOP
-               
-               190         696 PUSH_NULL
-                           698 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           710 LOAD_CONST              15 ('id1')
-                           712 LOAD_CONST              17 ('id2')
-                           714 BUILD_LIST               2
-                           716 LOAD_CONST              18 ('oops')
-                           718 LOAD_CONST               6 (True)
-                           720 KW_NAMES                19
-                           722 PRECALL                  3
-                           726 CALL                     3
-                           736 LOAD_CONST              20 ('')
-                           738 PRECALL                  1
-                           742 CALL                     1
-                           752 STORE_FAST               1 (rtn)
-               
-               191         754 LOAD_FAST                0 (self)
-                           756 LOAD_METHOD              1 (assertEqual)
-                           778 LOAD_FAST                1 (rtn)
-                           780 BUILD_LIST               0
-                           782 LOAD_CONST               0 (None)
-                           784 BUILD_TUPLE              2
-                           786 PRECALL                  2
-                           790 CALL                     2
-                           800 POP_TOP
-               
-               192         802 PUSH_NULL
-                           804 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           816 LOAD_CONST              15 ('id1')
-                           818 LOAD_CONST              17 ('id2')
-                           820 BUILD_LIST               2
-                           822 LOAD_CONST              18 ('oops')
-                           824 LOAD_CONST               6 (True)
-                           826 KW_NAMES                19
-                           828 PRECALL                  3
-                           832 CALL                     3
-                           842 LOAD_CONST              15 ('id1')
-                           844 PRECALL                  1
-                           848 CALL                     1
-                           858 STORE_FAST               1 (rtn)
+               188         592 PUSH_NULL
+                           594 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           606 LOAD_CONST              15 ('id1')
+                           608 LOAD_CONST              17 ('id2')
+                           610 BUILD_LIST               2
+                           612 LOAD_CONST              18 ('oops')
+                           614 LOAD_CONST               6 (True)
+                           616 KW_NAMES                19
+                           618 PRECALL                  3
+                           622 CALL                     3
+                           632 LOAD_CONST               0 (None)
+                           634 PRECALL                  1
+                           638 CALL                     1
+                           648 STORE_FAST               1 (rtn)
+               
+               189         650 LOAD_FAST                0 (self)
+                           652 LOAD_METHOD              1 (assertEqual)
+                           674 LOAD_FAST                1 (rtn)
+                           676 BUILD_LIST               0
+                           678 LOAD_CONST               0 (None)
+                           680 BUILD_TUPLE              2
+                           682 PRECALL                  2
+                           686 CALL                     2
+                           696 POP_TOP
                
-               193         860 LOAD_FAST                0 (self)
-                           862 LOAD_METHOD              1 (assertEqual)
-                           884 LOAD_FAST                1 (rtn)
-                           886 LOAD_CONST              15 ('id1')
-                           888 BUILD_LIST               1
-                           890 LOAD_CONST               0 (None)
-                           892 BUILD_TUPLE              2
-                           894 PRECALL                  2
-                           898 CALL                     2
-                           908 POP_TOP
+               190         698 PUSH_NULL
+                           700 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           712 LOAD_CONST              15 ('id1')
+                           714 LOAD_CONST              17 ('id2')
+                           716 BUILD_LIST               2
+                           718 LOAD_CONST              18 ('oops')
+                           720 LOAD_CONST               6 (True)
+                           722 KW_NAMES                19
+                           724 PRECALL                  3
+                           728 CALL                     3
+                           738 LOAD_CONST              20 ('')
+                           740 PRECALL                  1
+                           744 CALL                     1
+                           754 STORE_FAST               1 (rtn)
+               
+               191         756 LOAD_FAST                0 (self)
+                           758 LOAD_METHOD              1 (assertEqual)
+                           780 LOAD_FAST                1 (rtn)
+                           782 BUILD_LIST               0
+                           784 LOAD_CONST               0 (None)
+                           786 BUILD_TUPLE              2
+                           788 PRECALL                  2
+                           792 CALL                     2
+                           802 POP_TOP
                
-               194         910 PUSH_NULL
-                           912 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           924 LOAD_CONST              15 ('id1')
-                           926 LOAD_CONST              17 ('id2')
-                           928 BUILD_LIST               2
-                           930 LOAD_CONST              18 ('oops')
-                           932 LOAD_CONST              21 ((1, 2))
-                           934 KW_NAMES                19
-                           936 PRECALL                  3
-                           940 CALL                     3
-                           950 LOAD_CONST               0 (None)
-                           952 PRECALL                  1
-                           956 CALL                     1
-                           966 STORE_FAST               1 (rtn)
-               
-               195         968 LOAD_FAST                0 (self)
-                           970 LOAD_METHOD              1 (assertEqual)
-                           992 LOAD_FAST                1 (rtn)
-                           994 LOAD_CONST              22 ((None, 'oops'))
-                           996 PRECALL                  2
-                          1000 CALL                     2
-                          1010 POP_TOP
-               
-               196        1012 LOAD_CONST              23 (0)
-                          1014 LOAD_CONST               0 (None)
-                          1016 IMPORT_NAME              2 (itertools)
-                          1018 STORE_FAST               2 (itertools)
-               
-               198        1020 PUSH_NULL
-                          1022 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1034 LOAD_FAST                2 (itertools)
-                          1036 LOAD_METHOD              3 (chain)
-                          1058 BUILD_LIST               0
-                          1060 LOAD_CONST              24 (('1', '3', '5'))
-                          1062 LIST_EXTEND              1
-                          1064 BUILD_LIST               0
-                          1066 LOAD_CONST              25 (('2', '4', '6'))
-                          1068 LIST_EXTEND              1
-                          1070 PRECALL                  2
-                          1074 CALL                     2
-                          1084 PRECALL                  1
-                          1088 CALL                     1
-                          1098 LOAD_CONST              26 ('1')
-                          1100 PRECALL                  1
-                          1104 CALL                     1
-                          1114 STORE_FAST               1 (rtn)
-               
-               199        1116 LOAD_FAST                0 (self)
-                          1118 LOAD_METHOD              1 (assertEqual)
-                          1140 LOAD_FAST                1 (rtn)
-                          1142 LOAD_CONST              27 (('1', None))
-                          1144 PRECALL                  2
-                          1148 CALL                     2
-                          1158 POP_TOP
-               
-               200        1160 PUSH_NULL
-                          1162 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1174 LOAD_CONST              28 (('id1', 'first label'))
-                          1176 LOAD_CONST              29 (('id2', 'second label'))
-                          1178 BUILD_LIST               2
-                          1180 PRECALL                  1
-                          1184 CALL                     1
-               
-               201        1194 LOAD_CONST              15 ('id1')
-               
-               200        1196 PRECALL                  1
-                          1200 CALL                     1
-                          1210 STORE_FAST               1 (rtn)
-               
-               203        1212 LOAD_FAST                0 (self)
-                          1214 LOAD_METHOD              1 (assertEqual)
-                          1236 LOAD_FAST                1 (rtn)
-                          1238 LOAD_CONST              16 (('id1', None))
-                          1240 PRECALL                  2
-                          1244 CALL                     2
-                          1254 POP_TOP
+               192         804 PUSH_NULL
+                           806 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           818 LOAD_CONST              15 ('id1')
+                           820 LOAD_CONST              17 ('id2')
+                           822 BUILD_LIST               2
+                           824 LOAD_CONST              18 ('oops')
+                           826 LOAD_CONST               6 (True)
+                           828 KW_NAMES                19
+                           830 PRECALL                  3
+                           834 CALL                     3
+                           844 LOAD_CONST              15 ('id1')
+                           846 PRECALL                  1
+                           850 CALL                     1
+                           860 STORE_FAST               1 (rtn)
+               
+               193         862 LOAD_FAST                0 (self)
+                           864 LOAD_METHOD              1 (assertEqual)
+                           886 LOAD_FAST                1 (rtn)
+                           888 LOAD_CONST              15 ('id1')
+                           890 BUILD_LIST               1
+                           892 LOAD_CONST               0 (None)
+                           894 BUILD_TUPLE              2
+                           896 PRECALL                  2
+                           900 CALL                     2
+                           910 POP_TOP
                
-               204        1256 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1268 LOAD_CONST              28 (('id1', 'first label'))
-                          1270 LOAD_CONST              29 (('id2', 'second label'))
-                          1272 BUILD_LIST               2
-                          1274 PRECALL                  1
-                          1278 CALL                     1
-                          1288 LOAD_METHOD              4 (options)
-               
-               205        1310 LOAD_CONST              30 (False)
-               
-               204        1312 KW_NAMES                31
-                          1314 PRECALL                  1
-                          1318 CALL                     1
-                          1328 STORE_FAST               1 (rtn)
-               
-               207        1330 LOAD_FAST                0 (self)
-                          1332 LOAD_METHOD              1 (assertEqual)
-                          1354 LOAD_FAST                1 (rtn)
-                          1356 LOAD_CONST              28 (('id1', 'first label'))
-                          1358 LOAD_CONST              29 (('id2', 'second label'))
-                          1360 BUILD_LIST               2
-                          1362 PRECALL                  2
-                          1366 CALL                     2
-                          1376 POP_TOP
+               194         912 PUSH_NULL
+                           914 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           926 LOAD_CONST              15 ('id1')
+                           928 LOAD_CONST              17 ('id2')
+                           930 BUILD_LIST               2
+                           932 LOAD_CONST              18 ('oops')
+                           934 LOAD_CONST              21 ((1, 2))
+                           936 KW_NAMES                19
+                           938 PRECALL                  3
+                           942 CALL                     3
+                           952 LOAD_CONST               0 (None)
+                           954 PRECALL                  1
+                           958 CALL                     1
+                           968 STORE_FAST               1 (rtn)
+               
+               195         970 LOAD_FAST                0 (self)
+                           972 LOAD_METHOD              1 (assertEqual)
+                           994 LOAD_FAST                1 (rtn)
+                           996 LOAD_CONST              22 ((None, 'oops'))
+                           998 PRECALL                  2
+                          1002 CALL                     2
+                          1012 POP_TOP
+               
+               196        1014 LOAD_CONST              23 (0)
+                          1016 LOAD_CONST               0 (None)
+                          1018 IMPORT_NAME              2 (itertools)
+                          1020 STORE_FAST               2 (itertools)
+               
+               198        1022 PUSH_NULL
+                          1024 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1036 LOAD_FAST                2 (itertools)
+                          1038 LOAD_METHOD              3 (chain)
+                          1060 BUILD_LIST               0
+                          1062 LOAD_CONST              24 (('1', '3', '5'))
+                          1064 LIST_EXTEND              1
+                          1066 BUILD_LIST               0
+                          1068 LOAD_CONST              25 (('2', '4', '6'))
+                          1070 LIST_EXTEND              1
+                          1072 PRECALL                  2
+                          1076 CALL                     2
+                          1086 PRECALL                  1
+                          1090 CALL                     1
+                          1100 LOAD_CONST              26 ('1')
+                          1102 PRECALL                  1
+                          1106 CALL                     1
+                          1116 STORE_FAST               1 (rtn)
+               
+               199        1118 LOAD_FAST                0 (self)
+                          1120 LOAD_METHOD              1 (assertEqual)
+                          1142 LOAD_FAST                1 (rtn)
+                          1144 LOAD_CONST              27 (('1', None))
+                          1146 PRECALL                  2
+                          1150 CALL                     2
+                          1160 POP_TOP
+               
+               200        1162 PUSH_NULL
+                          1164 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1176 LOAD_CONST              28 (('id1', 'first label'))
+                          1178 LOAD_CONST              29 (('id2', 'second label'))
+                          1180 BUILD_LIST               2
+                          1182 PRECALL                  1
+                          1186 CALL                     1
                
-               208        1378 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1390 LOAD_CONST              15 ('id1')
-                          1392 LOAD_CONST              17 ('id2')
-                          1394 BUILD_LIST               2
-                          1396 PRECALL                  1
-                          1400 CALL                     1
-                          1410 LOAD_METHOD              4 (options)
-                          1432 LOAD_CONST              30 (False)
-                          1434 KW_NAMES                31
-                          1436 PRECALL                  1
-                          1440 CALL                     1
-                          1450 STORE_FAST               1 (rtn)
-               
-               209        1452 LOAD_FAST                0 (self)
-                          1454 LOAD_METHOD              1 (assertEqual)
-                          1476 LOAD_FAST                1 (rtn)
-                          1478 LOAD_CONST              32 (('id1', 'id1'))
-                          1480 LOAD_CONST              33 (('id2', 'id2'))
-                          1482 BUILD_LIST               2
-                          1484 PRECALL                  2
-                          1488 CALL                     2
-                          1498 POP_TOP
-               
-               210        1500 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1512 LOAD_CONST              17 ('id2')
-                          1514 LOAD_CONST              15 ('id1')
-                          1516 BUILD_LIST               2
-                          1518 LOAD_CONST               6 (True)
-                          1520 KW_NAMES                34
-                          1522 PRECALL                  2
-                          1526 CALL                     2
-                          1536 LOAD_METHOD              4 (options)
-                          1558 LOAD_CONST              30 (False)
-                          1560 KW_NAMES                31
-                          1562 PRECALL                  1
-                          1566 CALL                     1
-                          1576 STORE_FAST               1 (rtn)
+               201        1196 LOAD_CONST              15 ('id1')
                
-               211        1578 LOAD_FAST                0 (self)
-                          1580 LOAD_METHOD              1 (assertEqual)
-                          1602 LOAD_FAST                1 (rtn)
-                          1604 LOAD_CONST              32 (('id1', 'id1'))
-                          1606 LOAD_CONST              33 (('id2', 'id2'))
-                          1608 BUILD_LIST               2
-                          1610 PRECALL                  2
-                          1614 CALL                     2
-                          1624 POP_TOP
-                          1626 LOAD_CONST               0 (None)
-                          1628 RETURN_VALUE
+               200        1198 PRECALL                  1
+                          1202 CALL                     1
+                          1212 STORE_FAST               1 (rtn)
+               
+               203        1214 LOAD_FAST                0 (self)
+                          1216 LOAD_METHOD              1 (assertEqual)
+                          1238 LOAD_FAST                1 (rtn)
+                          1240 LOAD_CONST              16 (('id1', None))
+                          1242 PRECALL                  2
+                          1246 CALL                     2
+                          1256 POP_TOP
+               
+               204        1258 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1270 LOAD_CONST              28 (('id1', 'first label'))
+                          1272 LOAD_CONST              29 (('id2', 'second label'))
+                          1274 BUILD_LIST               2
+                          1276 PRECALL                  1
+                          1280 CALL                     1
+                          1290 LOAD_METHOD              4 (options)
+               
+               205        1312 LOAD_CONST              30 (False)
+               
+               204        1314 KW_NAMES                31
+                          1316 PRECALL                  1
+                          1320 CALL                     1
+                          1330 STORE_FAST               1 (rtn)
+               
+               207        1332 LOAD_FAST                0 (self)
+                          1334 LOAD_METHOD              1 (assertEqual)
+                          1356 LOAD_FAST                1 (rtn)
+                          1358 LOAD_CONST              28 (('id1', 'first label'))
+                          1360 LOAD_CONST              29 (('id2', 'second label'))
+                          1362 BUILD_LIST               2
+                          1364 PRECALL                  2
+                          1368 CALL                     2
+                          1378 POP_TOP
+               
+               208        1380 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1392 LOAD_CONST              15 ('id1')
+                          1394 LOAD_CONST              17 ('id2')
+                          1396 BUILD_LIST               2
+                          1398 PRECALL                  1
+                          1402 CALL                     1
+                          1412 LOAD_METHOD              4 (options)
+                          1434 LOAD_CONST              30 (False)
+                          1436 KW_NAMES                31
+                          1438 PRECALL                  1
+                          1442 CALL                     1
+                          1452 STORE_FAST               1 (rtn)
+               
+               209        1454 LOAD_FAST                0 (self)
+                          1456 LOAD_METHOD              1 (assertEqual)
+                          1478 LOAD_FAST                1 (rtn)
+                          1480 LOAD_CONST              32 (('id1', 'id1'))
+                          1482 LOAD_CONST              33 (('id2', 'id2'))
+                          1484 BUILD_LIST               2
+                          1486 PRECALL                  2
+                          1490 CALL                     2
+                          1500 POP_TOP
+               
+               210        1502 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1514 LOAD_CONST              17 ('id2')
+                          1516 LOAD_CONST              15 ('id1')
+                          1518 BUILD_LIST               2
+                          1520 LOAD_CONST               6 (True)
+                          1522 KW_NAMES                34
+                          1524 PRECALL                  2
+                          1528 CALL                     2
+                          1538 LOAD_METHOD              4 (options)
+                          1560 LOAD_CONST              30 (False)
+                          1562 KW_NAMES                31
+                          1564 PRECALL                  1
+                          1568 CALL                     1
+                          1578 STORE_FAST               1 (rtn)
+               
+               211        1580 LOAD_FAST                0 (self)
+                          1582 LOAD_METHOD              1 (assertEqual)
+                          1604 LOAD_FAST                1 (rtn)
+                          1606 LOAD_CONST              32 (('id1', 'id1'))
+                          1608 LOAD_CONST              33 (('id2', 'id2'))
+                          1610 BUILD_LIST               2
+                          1612 PRECALL                  2
+                          1616 CALL                     2
+                          1626 POP_TOP
+               
+               214        1628 BUILD_LIST               0
+                          1630 STORE_DEREF              4 (theset)
+               
+               215        1632 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1644 LOAD_CLOSURE             4 (theset)
+                          1646 BUILD_TUPLE              1
+                          1648 LOAD_CONST              35 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 215>)
+                          1650 MAKE_FUNCTION            8 (closure)
+                          1652 PRECALL                  1
+                          1656 CALL                     1
+                          1666 STORE_FAST               3 (validator)
+               
+               216        1668 PUSH_NULL
+                          1670 LOAD_FAST                3 (validator)
+                          1672 LOAD_CONST               1 ('max')
+                          1674 PRECALL                  1
+                          1678 CALL                     1
+                          1688 STORE_FAST               1 (rtn)
+               
+               217        1690 LOAD_FAST                0 (self)
+                          1692 LOAD_METHOD              1 (assertEqual)
+                          1714 LOAD_FAST                1 (rtn)
+                          1716 LOAD_CONST              36 (('max', 'Value not allowed'))
+                          1718 PRECALL                  2
+                          1722 CALL                     2
+                          1732 POP_TOP
+               
+               218        1734 LOAD_DEREF               4 (theset)
+                          1736 LOAD_METHOD              5 (append)
+                          1758 LOAD_CONST               1 ('max')
+                          1760 PRECALL                  1
+                          1764 CALL                     1
+                          1774 POP_TOP
+               
+               219        1776 PUSH_NULL
+                          1778 LOAD_FAST                3 (validator)
+                          1780 LOAD_CONST               1 ('max')
+                          1782 PRECALL                  1
+                          1786 CALL                     1
+                          1796 STORE_FAST               1 (rtn)
+               
+               220        1798 LOAD_FAST                0 (self)
+                          1800 LOAD_METHOD              1 (assertEqual)
+                          1822 LOAD_FAST                1 (rtn)
+                          1824 LOAD_CONST               3 (('max', None))
+                          1826 PRECALL                  2
+                          1830 CALL                     2
+                          1840 POP_TOP
+                          1842 LOAD_CONST               0 (None)
+                          1844 RETURN_VALUE
                consts
                   None
                   'max'
                   'john'
                   ('max', None)
                   'massimo'
                   ('massimo', 'Value not allowed')
@@ -2437,25 +2500,47 @@
                   ('id1', 'first label')
                   ('id2', 'second label')
                   False
                   ('zero',)
                   ('id1', 'id1')
                   ('id2', 'id2')
                   ('sort',)
-               names      ('IS_IN_SET', 'assertEqual', 'itertools', 'chain', 'options')
-               varnames   ('self', 'rtn', 'itertools')
+                  code
+                     argcount  : 0
+                     nlocals   : 0
+                     stacksize : 1
+                     flags     : 19
+                     code 0x9501970089005300
+                                   0 COPY_FREE_VARS           1
+                     
+                     215           2 RESUME                   0
+                                   4 LOAD_DEREF               0 (theset)
+                                   6 RETURN_VALUE
+                     consts
+                        None
+                     names      ()
+                     varnames   ()
+                     freevars   ('theset',)
+                     cellvars   ()
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+                     name       '<lambda>'
+                     firstlineno 215
+                     lnotab 0x
+                  ('max', 'Value not allowed')
+               names      ('IS_IN_SET', 'assertEqual', 'itertools', 'chain', 'options', 'append')
+               varnames   ('self', 'rtn', 'itertools', 'validator')
                freevars   ()
-               cellvars   ()
+               cellvars   ('theset',)
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_SET'
                firstlineno 173
                lnotab
-                  0x020134012c0134012c0138012c0138012c01240102ff10032c0136012c
+                  0x040134012c0134012c0138012c0138012c01240102ff10032c0136012c
                   013a0130013a0130013a0132013a012c01080260012c01220102ff10032c
-                  01360102ff120330014a0130014e01
+                  01360102ff120330014a0130014e0130030401240116012c012a011601
             code
                argcount  : 1
                nlocals   : 7
                stacksize : 14
                flags     : 3
                code
                   0x97007401000000000000000000006401a6010000ab0100000000000000
@@ -2654,117 +2739,117 @@
                   170000000000000000000000000000000000000000a6000000ab00000000
                   000000000001007c016a120000000000000000a017000000000000000000
                   0000000000000000000000a6000000ab00000000000000000001007c016a
                   150000000000000000a01700000000000000000000000000000000000000
                   00a6000000ab00000000000000000001007c016a160000000000000000a0
                   170000000000000000000000000000000000000000a6000000ab00000000
                   0000000000010064005300
-               213           0 RESUME                   0
+               222           0 RESUME                   0
                
-               214           2 LOAD_GLOBAL              1 (NULL + DAL)
+               223           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               215          32 LOAD_FAST                1 (db)
+               224          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('person')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 PRECALL                  2
                             90 CALL                     2
                            100 POP_TOP
                
-               216         102 LOAD_FAST                1 (db)
+               225         102 LOAD_FAST                1 (db)
                            104 LOAD_ATTR                3 (person)
                            114 LOAD_METHOD              4 (insert)
                            136 LOAD_CONST               4 ('george')
                            138 KW_NAMES                 5
                            140 PRECALL                  1
                            144 CALL                     1
                            154 STORE_FAST               2 (george_id)
                
-               217         156 LOAD_FAST                1 (db)
+               226         156 LOAD_FAST                1 (db)
                            158 LOAD_ATTR                3 (person)
                            168 LOAD_METHOD              4 (insert)
                            190 LOAD_CONST               6 ('costanza')
                            192 KW_NAMES                 5
                            194 PRECALL                  1
                            198 CALL                     1
                            208 STORE_FAST               3 (costanza_id)
                
-               218         210 PUSH_NULL
+               227         210 PUSH_NULL
                            212 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            224 LOAD_FAST                1 (db)
                            226 LOAD_CONST               7 ('person.id')
                            228 LOAD_CONST               8 ('%(name)s')
                            230 PRECALL                  3
                            234 CALL                     3
                            244 LOAD_FAST                2 (george_id)
                            246 PRECALL                  1
                            250 CALL                     1
                            260 STORE_FAST               4 (rtn)
                
-               219         262 LOAD_FAST                0 (self)
+               228         262 LOAD_FAST                0 (self)
                            264 LOAD_METHOD              6 (assertEqual)
                            286 LOAD_FAST                4 (rtn)
                            288 LOAD_FAST                2 (george_id)
                            290 LOAD_CONST               0 (None)
                            292 BUILD_TUPLE              2
                            294 PRECALL                  2
                            298 CALL                     2
                            308 POP_TOP
                
-               220         310 PUSH_NULL
+               229         310 PUSH_NULL
                            312 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            324 LOAD_FAST                1 (db)
                            326 LOAD_CONST               9 ('person.name')
                            328 LOAD_CONST               8 ('%(name)s')
                            330 PRECALL                  3
                            334 CALL                     3
                            344 LOAD_CONST               4 ('george')
                            346 PRECALL                  1
                            350 CALL                     1
                            360 STORE_FAST               4 (rtn)
                
-               221         362 LOAD_FAST                0 (self)
+               230         362 LOAD_FAST                0 (self)
                            364 LOAD_METHOD              6 (assertEqual)
                            386 LOAD_FAST                4 (rtn)
                            388 LOAD_CONST              10 (('george', None))
                            390 PRECALL                  2
                            394 CALL                     2
                            404 POP_TOP
                
-               222         406 PUSH_NULL
+               231         406 PUSH_NULL
                            408 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            420 LOAD_FAST                1 (db)
                            422 LOAD_FAST                1 (db)
                            424 LOAD_ATTR                3 (person)
                            434 LOAD_CONST               8 ('%(name)s')
                            436 PRECALL                  3
                            440 CALL                     3
                            450 LOAD_FAST                2 (george_id)
                            452 PRECALL                  1
                            456 CALL                     1
                            466 STORE_FAST               4 (rtn)
                
-               223         468 LOAD_FAST                0 (self)
+               232         468 LOAD_FAST                0 (self)
                            470 LOAD_METHOD              6 (assertEqual)
                            492 LOAD_FAST                4 (rtn)
                            494 LOAD_FAST                2 (george_id)
                            496 LOAD_CONST               0 (None)
                            498 BUILD_TUPLE              2
                            500 PRECALL                  2
                            504 CALL                     2
                            514 POP_TOP
                
-               224         516 PUSH_NULL
+               233         516 PUSH_NULL
                            518 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            530 PUSH_NULL
                            532 LOAD_FAST                1 (db)
                            534 LOAD_FAST                1 (db)
                            536 LOAD_ATTR                3 (person)
                            546 LOAD_ATTR                7 (id)
                            556 LOAD_CONST              11 (0)
@@ -2777,189 +2862,189 @@
                            592 PRECALL                  3
                            596 CALL                     3
                            606 LOAD_FAST                2 (george_id)
                            608 PRECALL                  1
                            612 CALL                     1
                            622 STORE_FAST               4 (rtn)
                
-               225         624 LOAD_FAST                0 (self)
+               234         624 LOAD_FAST                0 (self)
                            626 LOAD_METHOD              6 (assertEqual)
                            648 LOAD_FAST                4 (rtn)
                            650 LOAD_FAST                2 (george_id)
                            652 LOAD_CONST               0 (None)
                            654 BUILD_TUPLE              2
                            656 PRECALL                  2
                            660 CALL                     2
                            670 POP_TOP
                
-               226         672 PUSH_NULL
+               235         672 PUSH_NULL
                            674 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            686 LOAD_FAST                1 (db)
                            688 LOAD_CONST               7 ('person.id')
                            690 LOAD_CONST               8 ('%(name)s')
                            692 LOAD_CONST              12 ('oops')
                            694 KW_NAMES                13
                            696 PRECALL                  4
                            700 CALL                     4
                
-               227         710 LOAD_FAST                2 (george_id)
+               236         710 LOAD_FAST                2 (george_id)
                            712 LOAD_FAST                3 (costanza_id)
                            714 BINARY_OP                0 (+)
                
-               226         718 PRECALL                  1
+               235         718 PRECALL                  1
                            722 CALL                     1
                            732 STORE_FAST               4 (rtn)
                
-               229         734 LOAD_FAST                0 (self)
+               238         734 LOAD_FAST                0 (self)
                            736 LOAD_METHOD              6 (assertEqual)
                            758 LOAD_FAST                4 (rtn)
                            760 LOAD_FAST                2 (george_id)
                            762 LOAD_FAST                3 (costanza_id)
                            764 BINARY_OP                0 (+)
                            768 LOAD_CONST              12 ('oops')
                            770 BUILD_TUPLE              2
                            772 PRECALL                  2
                            776 CALL                     2
                            786 POP_TOP
                
-               230         788 PUSH_NULL
+               239         788 PUSH_NULL
                            790 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            802 LOAD_FAST                1 (db)
                            804 LOAD_FAST                1 (db)
                            806 LOAD_ATTR                3 (person)
                            816 LOAD_ATTR                7 (id)
                            826 LOAD_CONST               8 ('%(name)s')
                            828 PRECALL                  3
                            832 CALL                     3
                            842 LOAD_FAST                2 (george_id)
                            844 PRECALL                  1
                            848 CALL                     1
                            858 STORE_FAST               4 (rtn)
                
-               231         860 LOAD_FAST                0 (self)
+               240         860 LOAD_FAST                0 (self)
                            862 LOAD_METHOD              6 (assertEqual)
                            884 LOAD_FAST                4 (rtn)
                            886 LOAD_FAST                2 (george_id)
                            888 LOAD_CONST               0 (None)
                            890 BUILD_TUPLE              2
                            892 PRECALL                  2
                            896 CALL                     2
                            906 POP_TOP
                
-               232         908 PUSH_NULL
+               241         908 PUSH_NULL
                            910 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            922 LOAD_FAST                1 (db)
                            924 LOAD_FAST                1 (db)
                            926 LOAD_ATTR                3 (person)
                            936 LOAD_ATTR                7 (id)
                            946 LOAD_CONST               8 ('%(name)s')
                            948 LOAD_CONST              12 ('oops')
                            950 KW_NAMES                13
                            952 PRECALL                  4
                            956 CALL                     4
                
-               233         966 LOAD_FAST                2 (george_id)
+               242         966 LOAD_FAST                2 (george_id)
                            968 LOAD_FAST                3 (costanza_id)
                            970 BINARY_OP                0 (+)
                
-               232         974 PRECALL                  1
+               241         974 PRECALL                  1
                            978 CALL                     1
                            988 STORE_FAST               4 (rtn)
                
-               235         990 LOAD_FAST                0 (self)
+               244         990 LOAD_FAST                0 (self)
                            992 LOAD_METHOD              6 (assertEqual)
                           1014 LOAD_FAST                4 (rtn)
                           1016 LOAD_FAST                2 (george_id)
                           1018 LOAD_FAST                3 (costanza_id)
                           1020 BINARY_OP                0 (+)
                           1024 LOAD_CONST              12 ('oops')
                           1026 BUILD_TUPLE              2
                           1028 PRECALL                  2
                           1032 CALL                     2
                           1042 POP_TOP
                
-               236        1044 PUSH_NULL
+               245        1044 PUSH_NULL
                           1046 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1058 LOAD_FAST                1 (db)
                           1060 LOAD_CONST               7 ('person.id')
                           1062 LOAD_CONST               8 ('%(name)s')
                           1064 LOAD_CONST              14 (True)
                           1066 KW_NAMES                15
                           1068 PRECALL                  4
                           1072 CALL                     4
                
-               237        1082 LOAD_FAST                2 (george_id)
+               246        1082 LOAD_FAST                2 (george_id)
                           1084 LOAD_FAST                3 (costanza_id)
                           1086 BUILD_LIST               2
                
-               236        1088 PRECALL                  1
+               245        1088 PRECALL                  1
                           1092 CALL                     1
                           1102 STORE_FAST               4 (rtn)
                
-               239        1104 LOAD_FAST                0 (self)
+               248        1104 LOAD_FAST                0 (self)
                           1106 LOAD_METHOD              6 (assertEqual)
                           1128 LOAD_FAST                4 (rtn)
                           1130 LOAD_FAST                2 (george_id)
                           1132 LOAD_FAST                3 (costanza_id)
                           1134 BUILD_LIST               2
                           1136 LOAD_CONST               0 (None)
                           1138 BUILD_TUPLE              2
                           1140 PRECALL                  2
                           1144 CALL                     2
                           1154 POP_TOP
                
-               240        1156 PUSH_NULL
+               249        1156 PUSH_NULL
                           1158 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               241        1170 LOAD_FAST                1 (db)
+               250        1170 LOAD_FAST                1 (db)
                           1172 LOAD_CONST               7 ('person.id')
                           1174 LOAD_CONST               8 ('%(name)s')
                           1176 LOAD_CONST              14 (True)
                           1178 LOAD_CONST              12 ('oops')
                
-               240        1180 KW_NAMES                16
+               249        1180 KW_NAMES                16
                           1182 PRECALL                  5
                           1186 CALL                     5
                
-               242        1196 LOAD_CONST              17 ("I'm not even an id")
+               251        1196 LOAD_CONST              17 ("I'm not even an id")
                
-               240        1198 PRECALL                  1
+               249        1198 PRECALL                  1
                           1202 CALL                     1
                           1212 STORE_FAST               4 (rtn)
                
-               243        1214 LOAD_FAST                0 (self)
+               252        1214 LOAD_FAST                0 (self)
                           1216 LOAD_METHOD              6 (assertEqual)
                           1238 LOAD_FAST                4 (rtn)
                           1240 LOAD_CONST              18 (("I'm not even an id", 'oops'))
                           1242 PRECALL                  2
                           1246 CALL                     2
                           1256 POP_TOP
                
-               244        1258 PUSH_NULL
+               253        1258 PUSH_NULL
                           1260 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1272 LOAD_FAST                1 (db)
                           1274 LOAD_CONST               7 ('person.id')
                           1276 LOAD_CONST               8 ('%(name)s')
                           1278 LOAD_CONST              14 (True)
                           1280 LOAD_CONST              19 (',')
                           1282 KW_NAMES                20
                           1284 PRECALL                  5
                           1288 CALL                     5
                
-               245        1298 LOAD_CONST              21 ('%d,%d')
+               254        1298 LOAD_CONST              21 ('%d,%d')
                           1300 LOAD_FAST                2 (george_id)
                           1302 LOAD_FAST                3 (costanza_id)
                           1304 BUILD_TUPLE              2
                           1306 BINARY_OP                6 (%)
                
-               244        1310 PRECALL                  1
+               253        1310 PRECALL                  1
                           1314 CALL                     1
                           1324 STORE_FAST               4 (rtn)
                
-               247        1326 LOAD_FAST                0 (self)
+               256        1326 LOAD_FAST                0 (self)
                           1328 LOAD_METHOD              6 (assertEqual)
                           1350 LOAD_FAST                4 (rtn)
                           1352 LOAD_CONST              21 ('%d,%d')
                           1354 LOAD_FAST                2 (george_id)
                           1356 LOAD_FAST                3 (costanza_id)
                           1358 BUILD_TUPLE              2
                           1360 BINARY_OP                6 (%)
@@ -2969,36 +3054,36 @@
                           1392 CALL                     1
                           1402 LOAD_CONST               0 (None)
                           1404 BUILD_TUPLE              2
                           1406 PRECALL                  2
                           1410 CALL                     2
                           1420 POP_TOP
                
-               248        1422 PUSH_NULL
+               257        1422 PUSH_NULL
                           1424 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1436 LOAD_FAST                1 (db)
                           1438 LOAD_CONST               7 ('person.id')
                           1440 LOAD_CONST               8 ('%(name)s')
                           1442 LOAD_CONST              22 ((1, 3))
                           1444 LOAD_CONST              19 (',')
                           1446 KW_NAMES                20
                           1448 PRECALL                  5
                           1452 CALL                     5
                
-               249        1462 LOAD_CONST              21 ('%d,%d')
+               258        1462 LOAD_CONST              21 ('%d,%d')
                           1464 LOAD_FAST                2 (george_id)
                           1466 LOAD_FAST                3 (costanza_id)
                           1468 BUILD_TUPLE              2
                           1470 BINARY_OP                6 (%)
                
-               248        1474 PRECALL                  1
+               257        1474 PRECALL                  1
                           1478 CALL                     1
                           1488 STORE_FAST               4 (rtn)
                
-               251        1490 LOAD_FAST                0 (self)
+               260        1490 LOAD_FAST                0 (self)
                           1492 LOAD_METHOD              6 (assertEqual)
                           1514 LOAD_FAST                4 (rtn)
                           1516 LOAD_CONST              21 ('%d,%d')
                           1518 LOAD_FAST                2 (george_id)
                           1520 LOAD_FAST                3 (costanza_id)
                           1522 BUILD_TUPLE              2
                           1524 BINARY_OP                6 (%)
@@ -3008,358 +3093,358 @@
                           1556 CALL                     1
                           1566 LOAD_CONST               0 (None)
                           1568 BUILD_TUPLE              2
                           1570 PRECALL                  2
                           1574 CALL                     2
                           1584 POP_TOP
                
-               252        1586 PUSH_NULL
+               261        1586 PUSH_NULL
                           1588 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               253        1600 LOAD_FAST                1 (db)
+               262        1600 LOAD_FAST                1 (db)
                
-               254        1602 LOAD_CONST               7 ('person.id')
+               263        1602 LOAD_CONST               7 ('person.id')
                
-               255        1604 LOAD_CONST               8 ('%(name)s')
+               264        1604 LOAD_CONST               8 ('%(name)s')
                
-               256        1606 LOAD_CONST              23 ((1, 2))
+               265        1606 LOAD_CONST              23 ((1, 2))
                
-               257        1608 LOAD_CONST              19 (',')
+               266        1608 LOAD_CONST              19 (',')
                
-               258        1610 LOAD_CONST              12 ('oops')
+               267        1610 LOAD_CONST              12 ('oops')
                
-               252        1612 KW_NAMES                24
+               261        1612 KW_NAMES                24
                           1614 PRECALL                  6
                           1618 CALL                     6
                
-               259        1628 LOAD_CONST              21 ('%d,%d')
+               268        1628 LOAD_CONST              21 ('%d,%d')
                           1630 LOAD_FAST                2 (george_id)
                           1632 LOAD_FAST                3 (costanza_id)
                           1634 BUILD_TUPLE              2
                           1636 BINARY_OP                6 (%)
                
-               252        1640 PRECALL                  1
+               261        1640 PRECALL                  1
                           1644 CALL                     1
                           1654 STORE_FAST               4 (rtn)
                
-               260        1656 LOAD_FAST                0 (self)
+               269        1656 LOAD_FAST                0 (self)
                           1658 LOAD_METHOD              6 (assertEqual)
                           1680 LOAD_FAST                4 (rtn)
                           1682 LOAD_CONST              21 ('%d,%d')
                           1684 LOAD_FAST                2 (george_id)
                           1686 LOAD_FAST                3 (costanza_id)
                           1688 BUILD_TUPLE              2
                           1690 BINARY_OP                6 (%)
                           1694 LOAD_CONST              12 ('oops')
                           1696 BUILD_TUPLE              2
                           1698 PRECALL                  2
                           1702 CALL                     2
                           1712 POP_TOP
                
-               261        1714 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               270        1714 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1726 LOAD_FAST                1 (db)
                           1728 LOAD_FAST                1 (db)
                           1730 LOAD_ATTR                3 (person)
                           1740 LOAD_ATTR                7 (id)
                           1750 LOAD_CONST               8 ('%(name)s')
                           1752 LOAD_CONST              12 ('oops')
                           1754 KW_NAMES                13
                           1756 PRECALL                  4
                           1760 CALL                     4
                           1770 LOAD_METHOD              9 (options)
                
-               262        1792 LOAD_CONST              25 (False)
+               271        1792 LOAD_CONST              25 (False)
                
-               261        1794 KW_NAMES                26
+               270        1794 KW_NAMES                26
                           1796 PRECALL                  1
                           1800 CALL                     1
                           1810 STORE_FAST               4 (rtn)
                
-               264        1812 LOAD_FAST                0 (self)
+               273        1812 LOAD_FAST                0 (self)
                           1814 LOAD_METHOD              6 (assertEqual)
                
-               265        1836 LOAD_GLOBAL             21 (NULL + sorted)
+               274        1836 LOAD_GLOBAL             21 (NULL + sorted)
                           1848 LOAD_FAST                4 (rtn)
                           1850 PRECALL                  1
                           1854 CALL                     1
                
-               266        1864 LOAD_CONST              27 ('%d')
+               275        1864 LOAD_CONST              27 ('%d')
                           1866 LOAD_FAST                2 (george_id)
                           1868 BINARY_OP                6 (%)
                           1872 LOAD_CONST               4 ('george')
                           1874 BUILD_TUPLE              2
                           1876 LOAD_CONST              27 ('%d')
                           1878 LOAD_FAST                3 (costanza_id)
                           1880 BINARY_OP                6 (%)
                           1884 LOAD_CONST               6 ('costanza')
                           1886 BUILD_TUPLE              2
                           1888 BUILD_LIST               2
                
-               264        1890 PRECALL                  2
+               273        1890 PRECALL                  2
                           1894 CALL                     2
                           1904 POP_TOP
                
-               268        1906 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               277        1906 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               269        1918 LOAD_FAST                1 (db)
+               278        1918 LOAD_FAST                1 (db)
                           1920 LOAD_FAST                1 (db)
                           1922 LOAD_ATTR                3 (person)
                           1932 LOAD_ATTR                7 (id)
                           1942 LOAD_FAST                1 (db)
                           1944 LOAD_ATTR                3 (person)
                           1954 LOAD_ATTR               11 (name)
                           1964 LOAD_CONST              12 ('oops')
                           1966 LOAD_CONST              14 (True)
                
-               268        1968 KW_NAMES                28
+               277        1968 KW_NAMES                28
                           1970 PRECALL                  5
                           1974 CALL                     5
                
-               270        1984 LOAD_METHOD              9 (options)
+               279        1984 LOAD_METHOD              9 (options)
                           2006 LOAD_CONST              14 (True)
                           2008 KW_NAMES                26
                           2010 PRECALL                  1
                           2014 CALL                     1
                
-               268        2024 STORE_FAST               4 (rtn)
+               277        2024 STORE_FAST               4 (rtn)
                
-               271        2026 LOAD_FAST                0 (self)
+               280        2026 LOAD_FAST                0 (self)
                           2028 LOAD_METHOD              6 (assertEqual)
                
-               272        2050 LOAD_FAST                4 (rtn)
+               281        2050 LOAD_FAST                4 (rtn)
                
-               273        2052 LOAD_CONST              29 (('', ''))
+               282        2052 LOAD_CONST              29 (('', ''))
                           2054 LOAD_CONST              27 ('%d')
                           2056 LOAD_FAST                3 (costanza_id)
                           2058 BINARY_OP                6 (%)
                           2062 LOAD_CONST               6 ('costanza')
                           2064 BUILD_TUPLE              2
                           2066 LOAD_CONST              27 ('%d')
                           2068 LOAD_FAST                2 (george_id)
                           2070 BINARY_OP                6 (%)
                           2074 LOAD_CONST               4 ('george')
                           2076 BUILD_TUPLE              2
                           2078 BUILD_LIST               3
                
-               271        2080 PRECALL                  2
+               280        2080 PRECALL                  2
                           2084 CALL                     2
                           2094 POP_TOP
                
-               276        2096 PUSH_NULL
+               285        2096 PUSH_NULL
                           2098 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2110 LOAD_FAST                1 (db)
                           2112 LOAD_CONST               7 ('person.id')
                           2114 LOAD_CONST               8 ('%(name)s')
                           2116 LOAD_CONST              12 ('oops')
                           2118 KW_NAMES                13
                           2120 PRECALL                  4
                           2124 CALL                     4
                           2134 LOAD_CONST               0 (None)
                           2136 PRECALL                  1
                           2140 CALL                     1
                           2150 STORE_FAST               4 (rtn)
                
-               277        2152 LOAD_FAST                0 (self)
+               286        2152 LOAD_FAST                0 (self)
                           2154 LOAD_METHOD              6 (assertEqual)
                           2176 LOAD_FAST                4 (rtn)
                           2178 LOAD_CONST              30 ((None, 'oops'))
                           2180 PRECALL                  2
                           2184 CALL                     2
                           2194 POP_TOP
                
-               278        2196 PUSH_NULL
+               287        2196 PUSH_NULL
                           2198 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2210 LOAD_FAST                1 (db)
                           2212 LOAD_CONST               9 ('person.name')
                           2214 LOAD_CONST               8 ('%(name)s')
                           2216 LOAD_CONST              12 ('oops')
                           2218 KW_NAMES                13
                           2220 PRECALL                  4
                           2224 CALL                     4
                           2234 LOAD_CONST               0 (None)
                           2236 PRECALL                  1
                           2240 CALL                     1
                           2250 STORE_FAST               4 (rtn)
                
-               279        2252 LOAD_FAST                0 (self)
+               288        2252 LOAD_FAST                0 (self)
                           2254 LOAD_METHOD              6 (assertEqual)
                           2276 LOAD_FAST                4 (rtn)
                           2278 LOAD_CONST              30 ((None, 'oops'))
                           2280 PRECALL                  2
                           2284 CALL                     2
                           2294 POP_TOP
                
-               281        2296 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               290        2296 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2308 LOAD_FAST                1 (db)
                           2310 LOAD_CONST               9 ('person.name')
                           2312 LOAD_CONST               8 ('%(name)s')
                           2314 LOAD_CONST              12 ('oops')
                           2316 KW_NAMES                13
                           2318 PRECALL                  4
                           2322 CALL                     4
                           2332 STORE_FAST               5 (vldtr)
                
-               282        2334 LOAD_FAST                5 (vldtr)
+               291        2334 LOAD_FAST                5 (vldtr)
                           2336 LOAD_METHOD              9 (options)
                           2358 PRECALL                  0
                           2362 CALL                     0
                           2372 POP_TOP
                
-               283        2374 PUSH_NULL
+               292        2374 PUSH_NULL
                           2376 LOAD_FAST                5 (vldtr)
                           2378 LOAD_CONST               4 ('george')
                           2380 PRECALL                  1
                           2384 CALL                     1
                           2394 STORE_FAST               4 (rtn)
                
-               284        2396 LOAD_FAST                0 (self)
+               293        2396 LOAD_FAST                0 (self)
                           2398 LOAD_METHOD              6 (assertEqual)
                           2420 LOAD_FAST                4 (rtn)
                           2422 LOAD_CONST              10 (('george', None))
                           2424 PRECALL                  2
                           2428 CALL                     2
                           2438 POP_TOP
                
-               285        2440 PUSH_NULL
+               294        2440 PUSH_NULL
                           2442 LOAD_FAST                5 (vldtr)
                           2444 LOAD_CONST              31 ('jerry')
                           2446 PRECALL                  1
                           2450 CALL                     1
                           2460 STORE_FAST               4 (rtn)
                
-               286        2462 LOAD_FAST                0 (self)
+               295        2462 LOAD_FAST                0 (self)
                           2464 LOAD_METHOD              6 (assertEqual)
                           2486 LOAD_FAST                4 (rtn)
                           2488 LOAD_CONST              32 (('jerry', 'oops'))
                           2490 PRECALL                  2
                           2494 CALL                     2
                           2504 POP_TOP
                
-               287        2506 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               296        2506 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               288        2518 LOAD_FAST                1 (db)
+               297        2518 LOAD_FAST                1 (db)
                           2520 LOAD_CONST               9 ('person.name')
                           2522 LOAD_CONST               8 ('%(name)s')
                           2524 LOAD_CONST              12 ('oops')
                           2526 LOAD_CONST              14 (True)
                
-               287        2528 KW_NAMES                33
+               296        2528 KW_NAMES                33
                           2530 PRECALL                  5
                           2534 CALL                     5
                           2544 STORE_FAST               5 (vldtr)
                
-               290        2546 LOAD_FAST                5 (vldtr)
+               299        2546 LOAD_FAST                5 (vldtr)
                           2548 LOAD_METHOD              9 (options)
                           2570 PRECALL                  0
                           2574 CALL                     0
                           2584 POP_TOP
                
-               291        2586 PUSH_NULL
+               300        2586 PUSH_NULL
                           2588 LOAD_FAST                5 (vldtr)
                           2590 LOAD_CONST               4 ('george')
                           2592 LOAD_CONST               6 ('costanza')
                           2594 BUILD_LIST               2
                           2596 PRECALL                  1
                           2600 CALL                     1
                           2610 STORE_FAST               4 (rtn)
                
-               292        2612 LOAD_FAST                0 (self)
+               301        2612 LOAD_FAST                0 (self)
                           2614 LOAD_METHOD              6 (assertEqual)
                           2636 LOAD_FAST                4 (rtn)
                           2638 LOAD_CONST               4 ('george')
                           2640 LOAD_CONST               6 ('costanza')
                           2642 BUILD_LIST               2
                           2644 LOAD_CONST               0 (None)
                           2646 BUILD_TUPLE              2
                           2648 PRECALL                  2
                           2652 CALL                     2
                           2662 POP_TOP
                
-               294        2664 LOAD_FAST                1 (db)
+               303        2664 LOAD_FAST                1 (db)
                           2666 LOAD_METHOD              1 (define_table)
                
-               295        2688 LOAD_CONST              34 ('category')
+               304        2688 LOAD_CONST              34 ('category')
                
-               296        2690 LOAD_GLOBAL              5 (NULL + Field)
+               305        2690 LOAD_GLOBAL              5 (NULL + Field)
                
-               297        2702 LOAD_CONST              35 ('parent_id')
+               306        2702 LOAD_CONST              35 ('parent_id')
                
-               298        2704 LOAD_CONST              36 ('reference category')
+               307        2704 LOAD_CONST              36 ('reference category')
                
-               299        2706 LOAD_GLOBAL             25 (NULL + IS_EMPTY_OR)
+               308        2706 LOAD_GLOBAL             25 (NULL + IS_EMPTY_OR)
                           2718 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2730 LOAD_FAST                1 (db)
                           2732 LOAD_CONST              37 ('category.id')
                           2734 LOAD_CONST               8 ('%(name)s')
                           2736 PRECALL                  3
                           2740 CALL                     3
                           2750 PRECALL                  1
                           2754 CALL                     1
                
-               296        2764 KW_NAMES                38
+               305        2764 KW_NAMES                38
                           2766 PRECALL                  3
                           2770 CALL                     3
                
-               301        2780 LOAD_GLOBAL              5 (NULL + Field)
+               310        2780 LOAD_GLOBAL              5 (NULL + Field)
                           2792 LOAD_CONST               3 ('name')
                           2794 PRECALL                  1
                           2798 CALL                     1
                
-               294        2808 PRECALL                  3
+               303        2808 PRECALL                  3
                           2812 CALL                     3
                           2822 POP_TOP
                
-               303        2824 LOAD_FAST                1 (db)
+               312        2824 LOAD_FAST                1 (db)
                           2826 LOAD_ATTR               13 (category)
                           2836 LOAD_METHOD             14 (validate_and_insert)
                           2858 LOAD_CONST              39 ('seinfeld')
                           2860 KW_NAMES                 5
                           2862 PRECALL                  1
                           2866 CALL                     1
                           2876 STORE_FAST               6 (ret)
                
-               304        2878 LOAD_FAST                0 (self)
+               313        2878 LOAD_FAST                0 (self)
                           2880 LOAD_METHOD             15 (assertFalse)
                           2902 LOAD_FAST                6 (ret)
                           2904 LOAD_METHOD             16 (get)
                           2926 LOAD_CONST              40 ('errors')
                           2928 PRECALL                  1
                           2932 CALL                     1
                           2942 PRECALL                  1
                           2946 CALL                     1
                           2956 POP_TOP
                
-               305        2958 LOAD_FAST                1 (db)
+               314        2958 LOAD_FAST                1 (db)
                           2960 LOAD_ATTR               13 (category)
                           2970 LOAD_METHOD             14 (validate_and_insert)
                
-               306        2992 LOAD_CONST              41 ('characters')
+               315        2992 LOAD_CONST              41 ('characters')
                           2994 LOAD_FAST                6 (ret)
                           2996 LOAD_METHOD             16 (get)
                           3018 LOAD_CONST              42 ('id')
                           3020 PRECALL                  1
                           3024 CALL                     1
                
-               305        3034 KW_NAMES                43
+               314        3034 KW_NAMES                43
                           3036 PRECALL                  2
                           3040 CALL                     2
                           3050 STORE_FAST               6 (ret)
                
-               308        3052 LOAD_FAST                0 (self)
+               317        3052 LOAD_FAST                0 (self)
                           3054 LOAD_METHOD             15 (assertFalse)
                           3076 LOAD_FAST                6 (ret)
                           3078 LOAD_METHOD             16 (get)
                           3100 LOAD_CONST              40 ('errors')
                           3102 PRECALL                  1
                           3106 CALL                     1
                           3116 PRECALL                  1
                           3120 CALL                     1
                           3130 POP_TOP
                
-               309        3132 PUSH_NULL
+               318        3132 PUSH_NULL
                           3134 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3146 LOAD_FAST                1 (db)
                           3148 LOAD_CONST              37 ('category.id')
                           3150 LOAD_CONST               8 ('%(name)s')
                           3152 PRECALL                  3
                           3156 CALL                     3
                           3166 LOAD_FAST                6 (ret)
@@ -3367,527 +3452,527 @@
                           3190 LOAD_CONST              42 ('id')
                           3192 PRECALL                  1
                           3196 CALL                     1
                           3206 PRECALL                  1
                           3210 CALL                     1
                           3220 STORE_FAST               4 (rtn)
                
-               310        3222 LOAD_FAST                0 (self)
+               319        3222 LOAD_FAST                0 (self)
                           3224 LOAD_METHOD              6 (assertEqual)
                           3246 LOAD_FAST                4 (rtn)
                           3248 LOAD_FAST                6 (ret)
                           3250 LOAD_METHOD             16 (get)
                           3272 LOAD_CONST              42 ('id')
                           3274 PRECALL                  1
                           3278 CALL                     1
                           3288 LOAD_CONST               0 (None)
                           3290 BUILD_TUPLE              2
                           3292 PRECALL                  2
                           3296 CALL                     2
                           3306 POP_TOP
                
-               312        3308 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               321        3308 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               313        3320 LOAD_FAST                1 (db)
+               322        3320 LOAD_FAST                1 (db)
                
-               314        3322 LOAD_CONST               9 ('person.name')
+               323        3322 LOAD_CONST               9 ('person.name')
                
-               315        3324 LOAD_CONST               8 ('%(name)s')
+               324        3324 LOAD_CONST               8 ('%(name)s')
                
-               316        3326 LOAD_CONST              12 ('oops')
+               325        3326 LOAD_CONST              12 ('oops')
                
-               317        3328 LOAD_GLOBAL             35 (NULL + IS_LENGTH)
+               326        3328 LOAD_GLOBAL             35 (NULL + IS_LENGTH)
                           3340 LOAD_CONST              44 (7)
                           3342 LOAD_CONST              45 ('bad')
                           3344 KW_NAMES                46
                           3346 PRECALL                  2
                           3350 CALL                     2
                
-               312        3360 KW_NAMES                47
+               321        3360 KW_NAMES                47
                           3362 PRECALL                  5
                           3366 CALL                     5
                           3376 STORE_FAST               5 (vldtr)
                
-               319        3378 PUSH_NULL
+               328        3378 PUSH_NULL
                           3380 LOAD_FAST                5 (vldtr)
                           3382 LOAD_CONST               4 ('george')
                           3384 PRECALL                  1
                           3388 CALL                     1
                           3398 STORE_FAST               4 (rtn)
                
-               320        3400 LOAD_FAST                0 (self)
+               329        3400 LOAD_FAST                0 (self)
                           3402 LOAD_METHOD              6 (assertEqual)
                           3424 LOAD_FAST                4 (rtn)
                           3426 LOAD_CONST              10 (('george', None))
                           3428 PRECALL                  2
                           3432 CALL                     2
                           3442 POP_TOP
                
-               321        3444 PUSH_NULL
+               330        3444 PUSH_NULL
                           3446 LOAD_FAST                5 (vldtr)
                           3448 LOAD_CONST               6 ('costanza')
                           3450 PRECALL                  1
                           3454 CALL                     1
                           3464 STORE_FAST               4 (rtn)
                
-               322        3466 LOAD_FAST                0 (self)
+               331        3466 LOAD_FAST                0 (self)
                           3468 LOAD_METHOD              6 (assertEqual)
                           3490 LOAD_FAST                4 (rtn)
                           3492 LOAD_CONST              48 (('costanza', 'bad'))
                           3494 PRECALL                  2
                           3498 CALL                     2
                           3508 POP_TOP
                
-               323        3510 PUSH_NULL
+               332        3510 PUSH_NULL
                           3512 LOAD_FAST                5 (vldtr)
                           3514 LOAD_CONST              31 ('jerry')
                           3516 PRECALL                  1
                           3520 CALL                     1
                           3530 STORE_FAST               4 (rtn)
                
-               324        3532 LOAD_FAST                0 (self)
+               333        3532 LOAD_FAST                0 (self)
                           3534 LOAD_METHOD              6 (assertEqual)
                           3556 LOAD_FAST                4 (rtn)
                           3558 LOAD_CONST              32 (('jerry', 'oops'))
                           3560 PRECALL                  2
                           3564 CALL                     2
                           3574 POP_TOP
                
-               325        3576 LOAD_FAST                5 (vldtr)
+               334        3576 LOAD_FAST                5 (vldtr)
                           3578 LOAD_METHOD              9 (options)
                           3600 PRECALL                  0
                           3604 CALL                     0
                           3614 POP_TOP
                
-               326        3616 PUSH_NULL
+               335        3616 PUSH_NULL
                           3618 LOAD_FAST                5 (vldtr)
                           3620 LOAD_CONST              31 ('jerry')
                           3622 PRECALL                  1
                           3626 CALL                     1
                           3636 STORE_FAST               4 (rtn)
                
-               327        3638 LOAD_FAST                0 (self)
+               336        3638 LOAD_FAST                0 (self)
                           3640 LOAD_METHOD              6 (assertEqual)
                           3662 LOAD_FAST                4 (rtn)
                           3664 LOAD_CONST              32 (('jerry', 'oops'))
                           3666 PRECALL                  2
                           3670 CALL                     2
                           3680 POP_TOP
                
-               329        3682 PUSH_NULL
+               338        3682 PUSH_NULL
                           3684 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3696 LOAD_FAST                1 (db)
                           3698 LOAD_CONST               7 ('person.id')
                           3700 LOAD_CONST               8 ('%(name)s')
                           3702 LOAD_CONST              12 ('oops')
                           3704 KW_NAMES                13
                           3706 PRECALL                  4
                           3710 CALL                     4
                           3720 LOAD_CONST              31 ('jerry')
                           3722 PRECALL                  1
                           3726 CALL                     1
                           3736 STORE_FAST               4 (rtn)
                
-               330        3738 LOAD_FAST                0 (self)
+               339        3738 LOAD_FAST                0 (self)
                           3740 LOAD_METHOD              6 (assertEqual)
                           3762 LOAD_FAST                4 (rtn)
                           3764 LOAD_CONST              32 (('jerry', 'oops'))
                           3766 PRECALL                  2
                           3770 CALL                     2
                           3780 POP_TOP
                
-               331        3782 PUSH_NULL
+               340        3782 PUSH_NULL
                           3784 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3796 LOAD_FAST                1 (db)
                           3798 LOAD_CONST               7 ('person.id')
                           3800 LOAD_CONST               8 ('%(name)s')
                           3802 LOAD_CONST              14 (True)
                           3804 KW_NAMES                49
                           3806 PRECALL                  4
                           3810 CALL                     4
                           3820 LOAD_CONST              31 ('jerry')
                           3822 PRECALL                  1
                           3826 CALL                     1
                           3836 STORE_FAST               4 (rtn)
                
-               332        3838 LOAD_FAST                0 (self)
+               341        3838 LOAD_FAST                0 (self)
                           3840 LOAD_METHOD              6 (assertEqual)
                           3862 LOAD_FAST                4 (rtn)
                           3864 LOAD_CONST              50 ((3, None))
                           3866 PRECALL                  2
                           3870 CALL                     2
                           3880 POP_TOP
                
-               334        3882 LOAD_FAST                1 (db)
+               343        3882 LOAD_FAST                1 (db)
                           3884 LOAD_METHOD              1 (define_table)
                
-               335        3906 LOAD_CONST              51 ('ref_table')
+               344        3906 LOAD_CONST              51 ('ref_table')
                           3908 LOAD_GLOBAL              5 (NULL + Field)
                           3920 LOAD_CONST               3 ('name')
                           3922 PRECALL                  1
                           3926 CALL                     1
                           3936 LOAD_GLOBAL              5 (NULL + Field)
                           3948 LOAD_CONST              52 ('person_id')
                           3950 LOAD_CONST              53 ('reference person')
                           3952 PRECALL                  2
                           3956 CALL                     2
                
-               334        3966 PRECALL                  3
+               343        3966 PRECALL                  3
                           3970 CALL                     3
                           3980 POP_TOP
                
-               337        3982 LOAD_FAST                1 (db)
+               346        3982 LOAD_FAST                1 (db)
                           3984 LOAD_ATTR               18 (ref_table)
                           3994 LOAD_METHOD             14 (validate_and_insert)
                           4016 LOAD_CONST              54 ('test reference table')
                           4018 KW_NAMES                 5
                           4020 PRECALL                  1
                           4024 CALL                     1
                           4034 STORE_FAST               6 (ret)
                
-               338        4036 LOAD_FAST                0 (self)
+               347        4036 LOAD_FAST                0 (self)
                           4038 LOAD_METHOD             19 (assertTrue)
                           4060 LOAD_FAST                6 (ret)
                           4062 LOAD_METHOD             16 (get)
                           4084 LOAD_CONST              40 ('errors')
                           4086 PRECALL                  1
                           4090 CALL                     1
                           4100 UNARY_NOT
                           4102 PRECALL                  1
                           4106 CALL                     1
                           4116 POP_TOP
                
-               339        4118 LOAD_FAST                1 (db)
+               348        4118 LOAD_FAST                1 (db)
                           4120 LOAD_ATTR               18 (ref_table)
                           4130 LOAD_METHOD             14 (validate_and_insert)
                
-               340        4152 LOAD_CONST              54 ('test reference table')
+               349        4152 LOAD_CONST              54 ('test reference table')
                           4154 LOAD_FAST                2 (george_id)
                
-               339        4156 KW_NAMES                55
+               348        4156 KW_NAMES                55
                           4158 PRECALL                  2
                           4162 CALL                     2
                           4172 STORE_FAST               6 (ret)
                
-               342        4174 LOAD_FAST                0 (self)
+               351        4174 LOAD_FAST                0 (self)
                           4176 LOAD_METHOD             19 (assertTrue)
                           4198 LOAD_FAST                6 (ret)
                           4200 LOAD_METHOD             16 (get)
                           4222 LOAD_CONST              40 ('errors')
                           4224 PRECALL                  1
                           4228 CALL                     1
                           4238 UNARY_NOT
                           4240 PRECALL                  1
                           4244 CALL                     1
                           4254 POP_TOP
                
-               343        4256 PUSH_NULL
+               352        4256 PUSH_NULL
                           4258 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           4270 LOAD_FAST                1 (db)
                           4272 LOAD_CONST              56 ('ref_table.person_id')
                           4274 LOAD_CONST               8 ('%(name)s')
                           4276 PRECALL                  3
                           4280 CALL                     3
                           4290 LOAD_FAST                2 (george_id)
                           4292 PRECALL                  1
                           4296 CALL                     1
                           4306 STORE_FAST               4 (rtn)
                
-               344        4308 LOAD_FAST                0 (self)
+               353        4308 LOAD_FAST                0 (self)
                           4310 LOAD_METHOD              6 (assertEqual)
                           4332 LOAD_FAST                4 (rtn)
                           4334 LOAD_FAST                2 (george_id)
                           4336 LOAD_CONST               0 (None)
                           4338 BUILD_TUPLE              2
                           4340 PRECALL                  2
                           4344 CALL                     2
                           4354 POP_TOP
                
-               346        4356 LOAD_FAST                1 (db)
+               355        4356 LOAD_FAST                1 (db)
                           4358 LOAD_METHOD              1 (define_table)
                           4380 LOAD_CONST              57 ('person_keyed')
                           4382 LOAD_GLOBAL              5 (NULL + Field)
                           4394 LOAD_CONST               3 ('name')
                           4396 PRECALL                  1
                           4400 CALL                     1
                           4410 LOAD_CONST               3 ('name')
                           4412 BUILD_LIST               1
                           4414 KW_NAMES                58
                           4416 PRECALL                  3
                           4420 CALL                     3
                           4430 POP_TOP
                
-               347        4432 LOAD_FAST                1 (db)
+               356        4432 LOAD_FAST                1 (db)
                           4434 LOAD_ATTR               20 (person_keyed)
                           4444 LOAD_METHOD              4 (insert)
                           4466 LOAD_CONST               4 ('george')
                           4468 KW_NAMES                 5
                           4470 PRECALL                  1
                           4474 CALL                     1
                           4484 POP_TOP
                
-               348        4486 LOAD_FAST                1 (db)
+               357        4486 LOAD_FAST                1 (db)
                           4488 LOAD_ATTR               20 (person_keyed)
                           4498 LOAD_METHOD              4 (insert)
                           4520 LOAD_CONST               6 ('costanza')
                           4522 KW_NAMES                 5
                           4524 PRECALL                  1
                           4528 CALL                     1
                           4538 POP_TOP
                
-               349        4540 PUSH_NULL
+               358        4540 PUSH_NULL
                           4542 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           4554 LOAD_FAST                1 (db)
                           4556 LOAD_CONST              59 ('person_keyed.name')
                           4558 PRECALL                  2
                           4562 CALL                     2
                           4572 LOAD_CONST               4 ('george')
                           4574 PRECALL                  1
                           4578 CALL                     1
                           4588 STORE_FAST               4 (rtn)
                
-               350        4590 LOAD_FAST                0 (self)
+               359        4590 LOAD_FAST                0 (self)
                           4592 LOAD_METHOD              6 (assertEqual)
                           4614 LOAD_FAST                4 (rtn)
                           4616 LOAD_CONST              10 (('george', None))
                           4618 PRECALL                  2
                           4622 CALL                     2
                           4632 POP_TOP
                
-               351        4634 LOAD_FAST                1 (db)
+               360        4634 LOAD_FAST                1 (db)
                           4636 LOAD_METHOD              1 (define_table)
                
-               352        4658 LOAD_CONST              60 ('ref_table_field')
+               361        4658 LOAD_CONST              60 ('ref_table_field')
                
-               353        4660 LOAD_GLOBAL              5 (NULL + Field)
+               362        4660 LOAD_GLOBAL              5 (NULL + Field)
                           4672 LOAD_CONST               3 ('name')
                           4674 PRECALL                  1
                           4678 CALL                     1
                
-               354        4688 LOAD_GLOBAL              5 (NULL + Field)
+               363        4688 LOAD_GLOBAL              5 (NULL + Field)
                           4700 LOAD_CONST              61 ('person_name')
                           4702 LOAD_CONST              62 ('reference person_keyed.name')
                           4704 PRECALL                  2
                           4708 CALL                     2
                
-               351        4718 PRECALL                  3
+               360        4718 PRECALL                  3
                           4722 CALL                     3
                           4732 POP_TOP
                
-               356        4734 LOAD_FAST                1 (db)
+               365        4734 LOAD_FAST                1 (db)
                           4736 LOAD_ATTR               21 (ref_table_field)
                           4746 LOAD_METHOD             14 (validate_and_insert)
                           4768 LOAD_CONST              63 ('test reference table.field')
                           4770 KW_NAMES                 5
                           4772 PRECALL                  1
                           4776 CALL                     1
                           4786 STORE_FAST               6 (ret)
                
-               357        4788 LOAD_FAST                0 (self)
+               366        4788 LOAD_FAST                0 (self)
                           4790 LOAD_METHOD             19 (assertTrue)
                           4812 LOAD_FAST                6 (ret)
                           4814 LOAD_METHOD             16 (get)
                           4836 LOAD_CONST              40 ('errors')
                           4838 PRECALL                  1
                           4842 CALL                     1
                           4852 UNARY_NOT
                           4854 PRECALL                  1
                           4858 CALL                     1
                           4868 POP_TOP
                
-               358        4870 LOAD_FAST                1 (db)
+               367        4870 LOAD_FAST                1 (db)
                           4872 LOAD_ATTR               21 (ref_table_field)
                           4882 LOAD_METHOD             14 (validate_and_insert)
                
-               359        4904 LOAD_CONST              63 ('test reference table.field')
+               368        4904 LOAD_CONST              63 ('test reference table.field')
                           4906 LOAD_CONST               4 ('george')
                
-               358        4908 KW_NAMES                64
+               367        4908 KW_NAMES                64
                           4910 PRECALL                  2
                           4914 CALL                     2
                           4924 STORE_FAST               6 (ret)
                
-               361        4926 LOAD_FAST                0 (self)
+               370        4926 LOAD_FAST                0 (self)
                           4928 LOAD_METHOD             19 (assertTrue)
                           4950 LOAD_FAST                6 (ret)
                           4952 LOAD_METHOD             16 (get)
                           4974 LOAD_CONST              40 ('errors')
                           4976 PRECALL                  1
                           4980 CALL                     1
                           4990 UNARY_NOT
                           4992 PRECALL                  1
                           4996 CALL                     1
                           5006 POP_TOP
                
-               362        5008 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               371        5008 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           5020 LOAD_FAST                1 (db)
                           5022 LOAD_CONST              65 ('ref_table_field.person_name')
                           5024 LOAD_CONST               8 ('%(name)s')
                           5026 PRECALL                  3
                           5030 CALL                     3
                           5040 STORE_FAST               5 (vldtr)
                
-               363        5042 LOAD_FAST                5 (vldtr)
+               372        5042 LOAD_FAST                5 (vldtr)
                           5044 LOAD_METHOD              9 (options)
                           5066 PRECALL                  0
                           5070 CALL                     0
                           5080 POP_TOP
                
-               364        5082 PUSH_NULL
+               373        5082 PUSH_NULL
                           5084 LOAD_FAST                5 (vldtr)
                           5086 LOAD_CONST               4 ('george')
                           5088 PRECALL                  1
                           5092 CALL                     1
                           5102 STORE_FAST               4 (rtn)
                
-               365        5104 LOAD_FAST                0 (self)
+               374        5104 LOAD_FAST                0 (self)
                           5106 LOAD_METHOD              6 (assertEqual)
                           5128 LOAD_FAST                4 (rtn)
                           5130 LOAD_CONST              10 (('george', None))
                           5132 PRECALL                  2
                           5136 CALL                     2
                           5146 POP_TOP
                
-               367        5148 LOAD_FAST                1 (db)
+               376        5148 LOAD_FAST                1 (db)
                           5150 LOAD_METHOD              1 (define_table)
                
-               368        5172 LOAD_CONST              66 ('list_ref_table')
+               377        5172 LOAD_CONST              66 ('list_ref_table')
                
-               369        5174 LOAD_GLOBAL              5 (NULL + Field)
+               378        5174 LOAD_GLOBAL              5 (NULL + Field)
                           5186 LOAD_CONST               3 ('name')
                           5188 PRECALL                  1
                           5192 CALL                     1
                
-               370        5202 LOAD_GLOBAL              5 (NULL + Field)
+               379        5202 LOAD_GLOBAL              5 (NULL + Field)
                           5214 LOAD_CONST              67 ('person_list')
                           5216 LOAD_CONST              68 ('list:reference person')
                           5218 PRECALL                  2
                           5222 CALL                     2
                
-               367        5232 PRECALL                  3
+               376        5232 PRECALL                  3
                           5236 CALL                     3
                           5246 POP_TOP
                
-               372        5248 LOAD_FAST                1 (db)
+               381        5248 LOAD_FAST                1 (db)
                           5250 LOAD_ATTR               22 (list_ref_table)
                           5260 LOAD_METHOD             14 (validate_and_insert)
                           5282 LOAD_CONST              69 ('test list:reference table')
                           5284 KW_NAMES                 5
                           5286 PRECALL                  1
                           5290 CALL                     1
                           5300 STORE_FAST               6 (ret)
                
-               373        5302 LOAD_FAST                0 (self)
+               382        5302 LOAD_FAST                0 (self)
                           5304 LOAD_METHOD             19 (assertTrue)
                           5326 LOAD_FAST                6 (ret)
                           5328 LOAD_METHOD             16 (get)
                           5350 LOAD_CONST              40 ('errors')
                           5352 PRECALL                  1
                           5356 CALL                     1
                           5366 UNARY_NOT
                           5368 PRECALL                  1
                           5372 CALL                     1
                           5382 POP_TOP
                
-               374        5384 LOAD_FAST                1 (db)
+               383        5384 LOAD_FAST                1 (db)
                           5386 LOAD_ATTR               22 (list_ref_table)
                           5396 LOAD_METHOD             14 (validate_and_insert)
                
-               375        5418 LOAD_CONST              69 ('test list:reference table')
+               384        5418 LOAD_CONST              69 ('test list:reference table')
                           5420 LOAD_FAST                2 (george_id)
                           5422 LOAD_FAST                3 (costanza_id)
                           5424 BUILD_LIST               2
                
-               374        5426 KW_NAMES                70
+               383        5426 KW_NAMES                70
                           5428 PRECALL                  2
                           5432 CALL                     2
                           5442 STORE_FAST               6 (ret)
                
-               377        5444 LOAD_FAST                0 (self)
+               386        5444 LOAD_FAST                0 (self)
                           5446 LOAD_METHOD             19 (assertTrue)
                           5468 LOAD_FAST                6 (ret)
                           5470 LOAD_METHOD             16 (get)
                           5492 LOAD_CONST              40 ('errors')
                           5494 PRECALL                  1
                           5498 CALL                     1
                           5508 UNARY_NOT
                           5510 PRECALL                  1
                           5514 CALL                     1
                           5524 POP_TOP
                
-               378        5526 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               387        5526 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           5538 LOAD_FAST                1 (db)
                           5540 LOAD_CONST              71 ('list_ref_table.person_list')
                           5542 PRECALL                  2
                           5546 CALL                     2
                           5556 STORE_FAST               5 (vldtr)
                
-               379        5558 LOAD_FAST                5 (vldtr)
+               388        5558 LOAD_FAST                5 (vldtr)
                           5560 LOAD_METHOD              9 (options)
                           5582 PRECALL                  0
                           5586 CALL                     0
                           5596 POP_TOP
                
-               380        5598 PUSH_NULL
+               389        5598 PUSH_NULL
                           5600 LOAD_FAST                5 (vldtr)
                           5602 LOAD_FAST                2 (george_id)
                           5604 LOAD_FAST                3 (costanza_id)
                           5606 BUILD_LIST               2
                           5608 PRECALL                  1
                           5612 CALL                     1
                           5622 STORE_FAST               4 (rtn)
                
-               381        5624 LOAD_FAST                0 (self)
+               390        5624 LOAD_FAST                0 (self)
                           5626 LOAD_METHOD              6 (assertEqual)
                           5648 LOAD_FAST                4 (rtn)
                           5650 LOAD_FAST                2 (george_id)
                           5652 LOAD_FAST                3 (costanza_id)
                           5654 BUILD_LIST               2
                           5656 LOAD_CONST               0 (None)
                           5658 BUILD_TUPLE              2
                           5660 PRECALL                  2
                           5664 CALL                     2
                           5674 POP_TOP
                
-               382        5676 LOAD_FAST                1 (db)
+               391        5676 LOAD_FAST                1 (db)
                           5678 LOAD_ATTR                3 (person)
                           5688 LOAD_METHOD             23 (drop)
                           5710 PRECALL                  0
                           5714 CALL                     0
                           5724 POP_TOP
                
-               383        5726 LOAD_FAST                1 (db)
+               392        5726 LOAD_FAST                1 (db)
                           5728 LOAD_ATTR               13 (category)
                           5738 LOAD_METHOD             23 (drop)
                           5760 PRECALL                  0
                           5764 CALL                     0
                           5774 POP_TOP
                
-               384        5776 LOAD_FAST                1 (db)
+               393        5776 LOAD_FAST                1 (db)
                           5778 LOAD_ATTR               20 (person_keyed)
                           5788 LOAD_METHOD             23 (drop)
                           5810 PRECALL                  0
                           5814 CALL                     0
                           5824 POP_TOP
                
-               385        5826 LOAD_FAST                1 (db)
+               394        5826 LOAD_FAST                1 (db)
                           5828 LOAD_ATTR               18 (ref_table)
                           5838 LOAD_METHOD             23 (drop)
                           5860 PRECALL                  0
                           5864 CALL                     0
                           5874 POP_TOP
                
-               386        5876 LOAD_FAST                1 (db)
+               395        5876 LOAD_FAST                1 (db)
                           5878 LOAD_ATTR               21 (ref_table_field)
                           5888 LOAD_METHOD             23 (drop)
                           5910 PRECALL                  0
                           5914 CALL                     0
                           5924 POP_TOP
                
-               387        5926 LOAD_FAST                1 (db)
+               396        5926 LOAD_FAST                1 (db)
                           5928 LOAD_ATTR               22 (list_ref_table)
                           5938 LOAD_METHOD             23 (drop)
                           5960 PRECALL                  0
                           5964 CALL                     0
                           5974 POP_TOP
                           5976 LOAD_CONST               0 (None)
                           5978 RETURN_VALUE
@@ -3966,15 +4051,15 @@
                   'list_ref_table.person_list'
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_IN_DB', 'assertEqual', 'id', 'split', 'options', 'sorted', 'name', 'IS_EMPTY_OR', 'category', 'validate_and_insert', 'assertFalse', 'get', 'IS_LENGTH', 'ref_table', 'assertTrue', 'person_keyed', 'ref_table_field', 'list_ref_table', 'drop')
                varnames   ('self', 'db', 'george_id', 'costanza_id', 'rtn', 'vldtr', 'ret')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_DB'
-               firstlineno 213
+               firstlineno 222
                lnotab
                   0x02011e014601360136013401300134012c013e0130016c013001260108
                   ff10033601480130013a0108ff10033601260106ff100334010e010aff10
                   0202fe10032c0128010cff1003600128010cff100360010e010201020102
                   010201020102fa10070cf910083a014e0102ff120318011c011afe10040c
                   0132ff100228fe0203180102011cfe100538012c0138012c022601280116
                   012c0116012c010c010aff120328011a013402180102010c01020102013a
@@ -4094,52 +4179,52 @@
                   000000000000007c07a6010000ab010000000000000000740f0000000000
                   00000000006a0c00000000000000007c0aa6010000ab0100000000000000
                   0064159c087a0600007d09641664177c0969017a0600007d0c741b000000
                   00000000000000740f000000000000000000006a0e00000000000000007c
                   0ca6010000ab010000000000000000a6010000ab01000000000000000082
                   01640078017d0278017d0378017d0478017d0578017d0778017d0b7d0a64
                   005300
-               389           0 RESUME                   0
+               398           0 RESUME                   0
                
-               390           2 LOAD_GLOBAL              1 (NULL + DAL)
+               399           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               391          32 LOAD_FAST                1 (db)
+               400          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('thing')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 PRECALL                  2
                             90 CALL                     2
                            100 POP_TOP
                
-               392         102 LOAD_FAST                1 (db)
+               401         102 LOAD_FAST                1 (db)
                            104 LOAD_ATTR                3 (thing)
                            114 LOAD_METHOD              4 (insert)
                            136 LOAD_CONST               4 ('red')
                            138 KW_NAMES                 5
                            140 PRECALL                  1
                            144 CALL                     1
                            154 POP_TOP
                
-               393         156 LOAD_FAST                1 (db)
+               402         156 LOAD_FAST                1 (db)
                            158 LOAD_ATTR                3 (thing)
                            168 LOAD_METHOD              4 (insert)
                            190 LOAD_CONST               6 ('green')
                            192 KW_NAMES                 5
                            194 PRECALL                  1
                            198 CALL                     1
                            208 POP_TOP
                
-               394         210 LOAD_CONST               2 ('thing')
+               403         210 LOAD_CONST               2 ('thing')
                            212 STORE_FAST               2 (@py_assert2)
                            214 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            226 LOAD_FAST                1 (db)
                            228 LOAD_FAST                2 (@py_assert2)
                            230 PRECALL                  2
                            234 CALL                     2
                            244 STORE_FAST               3 (@py_assert4)
@@ -4266,31 +4351,33 @@
                            916 STORE_FAST               4 (@py_assert6)
                            918 COPY                     1
                            920 STORE_FAST               5 (@py_assert8)
                            922 COPY                     1
                            924 STORE_FAST               7 (@py_assert10)
                            926 STORE_FAST               6 (@py_assert11)
                
-               396         928 LOAD_CONST              15 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 396>)
+               405         928 LOAD_CONST              15 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 405>)
                            930 MAKE_FUNCTION            0
                            932 LOAD_FAST                1 (db)
                            934 LOAD_ATTR                3 (thing)
                            944 STORE_ATTR              15 (_format)
                
-               397         954 LOAD_CONST               2 ('thing')
+               406         954 LOAD_CONST               2 ('thing')
                            956 STORE_FAST               2 (@py_assert2)
                            958 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            970 LOAD_FAST                1 (db)
                            972 LOAD_FAST                2 (@py_assert2)
                            974 PRECALL                  2
                            978 CALL                     2
                            988 STORE_FAST               3 (@py_assert4)
                            990 LOAD_FAST                3 (@py_assert4)
-                           992 LOAD_ATTR                6 (options)
-                          1002 STORE_FAST               4 (@py_assert6)
+               
+               410         992 LOAD_ATTR                6 (options)
+               
+               406        1002 STORE_FAST               4 (@py_assert6)
                           1004 PUSH_NULL
                           1006 LOAD_FAST                4 (@py_assert6)
                           1008 PRECALL                  0
                           1012 CALL                     0
                           1022 STORE_FAST               5 (@py_assert8)
                           1024 BUILD_LIST               0
                           1026 LOAD_CONST              16 ((('', ''), ('1', 'red'), ('2', 'green')))
@@ -4300,103 +4387,129 @@
                           1034 LOAD_FAST                6 (@py_assert11)
                           1036 COMPARE_OP               2 (==)
                           1042 STORE_FAST               7 (@py_assert10)
                           1044 LOAD_FAST                7 (@py_assert10)
                           1046 EXTENDED_ARG             1
                           1048 POP_JUMP_FORWARD_IF_TRUE   299 (to 1648)
                           1050 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1062 LOAD_ATTR                8 (_call_reprcompare)
-                          1072 LOAD_CONST               8 (('==',))
+               
+               410        1062 LOAD_ATTR                8 (_call_reprcompare)
+               
+               406        1072 LOAD_CONST               8 (('==',))
                           1074 LOAD_FAST                7 (@py_assert10)
                           1076 BUILD_TUPLE              1
                           1078 LOAD_CONST               9 (('%(py9)s\n{%(py9)s = %(py7)s\n{%(py7)s = %(py5)s\n{%(py5)s = %(py0)s(%(py1)s, %(py3)s)\n}.options\n}()\n} == %(py12)s',))
                           1080 LOAD_FAST                5 (@py_assert8)
                           1082 LOAD_FAST                6 (@py_assert11)
                           1084 BUILD_TUPLE              2
                           1086 PRECALL                  4
                           1090 CALL                     4
                           1100 LOAD_CONST              10 ('IS_IN_DB')
                           1102 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          1114 LOAD_ATTR               10 (locals)
-                          1124 PRECALL                  0
+               
+               410        1114 LOAD_ATTR               10 (locals)
+               
+               406        1124 PRECALL                  0
                           1128 CALL                     0
                           1138 CONTAINS_OP              0
                           1140 POP_JUMP_FORWARD_IF_TRUE    25 (to 1192)
                           1142 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1154 LOAD_ATTR               11 (_should_repr_global_name)
-                          1164 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               410        1154 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               406        1164 LOAD_GLOBAL             10 (IS_IN_DB)
                           1176 PRECALL                  1
                           1180 CALL                     1
                           1190 POP_JUMP_FORWARD_IF_FALSE    25 (to 1242)
                        >> 1192 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1204 LOAD_ATTR               12 (_saferepr)
-                          1214 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               410        1204 LOAD_ATTR               12 (_saferepr)
+               
+               406        1214 LOAD_GLOBAL             10 (IS_IN_DB)
                           1226 PRECALL                  1
                           1230 CALL                     1
                           1240 JUMP_FORWARD             1 (to 1244)
                        >> 1242 LOAD_CONST              10 ('IS_IN_DB')
                        >> 1244 LOAD_CONST              11 ('db')
                           1246 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          1258 LOAD_ATTR               10 (locals)
-                          1268 PRECALL                  0
+               
+               410        1258 LOAD_ATTR               10 (locals)
+               
+               406        1268 PRECALL                  0
                           1272 CALL                     0
                           1282 CONTAINS_OP              0
                           1284 POP_JUMP_FORWARD_IF_TRUE    20 (to 1326)
                           1286 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1298 LOAD_ATTR               11 (_should_repr_global_name)
-                          1308 LOAD_FAST                1 (db)
+               
+               410        1298 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               406        1308 LOAD_FAST                1 (db)
                           1310 PRECALL                  1
                           1314 CALL                     1
                           1324 POP_JUMP_FORWARD_IF_FALSE    20 (to 1366)
                        >> 1326 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1338 LOAD_ATTR               12 (_saferepr)
-                          1348 LOAD_FAST                1 (db)
+               
+               410        1338 LOAD_ATTR               12 (_saferepr)
+               
+               406        1348 LOAD_FAST                1 (db)
                           1350 PRECALL                  1
                           1354 CALL                     1
                           1364 JUMP_FORWARD             1 (to 1368)
                        >> 1366 LOAD_CONST              11 ('db')
                        >> 1368 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1380 LOAD_ATTR               12 (_saferepr)
-                          1390 LOAD_FAST                2 (@py_assert2)
+               
+               410        1380 LOAD_ATTR               12 (_saferepr)
+               
+               406        1390 LOAD_FAST                2 (@py_assert2)
                           1392 PRECALL                  1
                           1396 CALL                     1
                           1406 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1418 LOAD_ATTR               12 (_saferepr)
-                          1428 LOAD_FAST                3 (@py_assert4)
+               
+               410        1418 LOAD_ATTR               12 (_saferepr)
+               
+               406        1428 LOAD_FAST                3 (@py_assert4)
                           1430 PRECALL                  1
                           1434 CALL                     1
                           1444 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1456 LOAD_ATTR               12 (_saferepr)
-                          1466 LOAD_FAST                4 (@py_assert6)
+               
+               410        1456 LOAD_ATTR               12 (_saferepr)
+               
+               406        1466 LOAD_FAST                4 (@py_assert6)
                           1468 PRECALL                  1
                           1472 CALL                     1
                           1482 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1494 LOAD_ATTR               12 (_saferepr)
-                          1504 LOAD_FAST                5 (@py_assert8)
+               
+               410        1494 LOAD_ATTR               12 (_saferepr)
+               
+               406        1504 LOAD_FAST                5 (@py_assert8)
                           1506 PRECALL                  1
                           1510 CALL                     1
                           1520 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1532 LOAD_ATTR               12 (_saferepr)
-                          1542 LOAD_FAST                6 (@py_assert11)
+               
+               410        1532 LOAD_ATTR               12 (_saferepr)
+               
+               406        1542 LOAD_FAST                6 (@py_assert11)
                           1544 PRECALL                  1
                           1548 CALL                     1
                           1558 LOAD_CONST              12 (('py0', 'py1', 'py3', 'py5', 'py7', 'py9', 'py12'))
                           1560 BUILD_CONST_KEY_MAP      7
                           1562 BINARY_OP                6 (%)
                           1566 STORE_FAST               8 (@py_format13)
                           1568 LOAD_CONST              13 ('assert %(py14)s')
                           1570 LOAD_CONST              14 ('py14')
                           1572 LOAD_FAST                8 (@py_format13)
                           1574 BUILD_MAP                1
                           1576 BINARY_OP                6 (%)
                           1580 STORE_FAST               9 (@py_format15)
                           1582 LOAD_GLOBAL             27 (NULL + AssertionError)
                           1594 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1606 LOAD_ATTR               14 (_format_explanation)
-                          1616 LOAD_FAST                9 (@py_format15)
+               
+               410        1606 LOAD_ATTR               14 (_format_explanation)
+               
+               406        1616 LOAD_FAST                9 (@py_format15)
                           1618 PRECALL                  1
                           1622 CALL                     1
                           1632 PRECALL                  1
                           1636 CALL                     1
                           1646 RAISE_VARARGS            1
                        >> 1648 LOAD_CONST               0 (None)
                           1650 COPY                     1
@@ -4407,29 +4520,31 @@
                           1660 STORE_FAST               4 (@py_assert6)
                           1662 COPY                     1
                           1664 STORE_FAST               5 (@py_assert8)
                           1666 COPY                     1
                           1668 STORE_FAST               7 (@py_assert10)
                           1670 STORE_FAST               6 (@py_assert11)
                
-               398        1672 LOAD_CONST               2 ('thing')
+               411        1672 LOAD_CONST               2 ('thing')
                           1674 STORE_FAST               2 (@py_assert2)
                           1676 LOAD_CONST               0 (None)
                           1678 STORE_FAST               3 (@py_assert4)
                           1680 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1692 LOAD_FAST                1 (db)
                           1694 LOAD_FAST                2 (@py_assert2)
                           1696 LOAD_FAST                3 (@py_assert4)
                           1698 KW_NAMES                17
                           1700 PRECALL                  3
                           1704 CALL                     3
                           1714 STORE_FAST               4 (@py_assert6)
                           1716 LOAD_FAST                4 (@py_assert6)
-                          1718 LOAD_ATTR                6 (options)
-                          1728 STORE_FAST               5 (@py_assert8)
+               
+               414        1718 LOAD_ATTR                6 (options)
+               
+               411        1728 STORE_FAST               5 (@py_assert8)
                           1730 PUSH_NULL
                           1732 LOAD_FAST                5 (@py_assert8)
                           1734 PRECALL                  0
                           1738 CALL                     0
                           1748 STORE_FAST               7 (@py_assert10)
                           1750 LOAD_CONST              18 (('1', 'red'))
                           1752 LOAD_CONST              19 (('2', 'green'))
@@ -4439,108 +4554,136 @@
                           1760 LOAD_FAST               10 (@py_assert13)
                           1762 COMPARE_OP               2 (==)
                           1768 STORE_FAST              11 (@py_assert12)
                           1770 LOAD_FAST               11 (@py_assert12)
                           1772 EXTENDED_ARG             1
                           1774 POP_JUMP_FORWARD_IF_TRUE   318 (to 2412)
                           1776 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1788 LOAD_ATTR                8 (_call_reprcompare)
-                          1798 LOAD_CONST               8 (('==',))
+               
+               414        1788 LOAD_ATTR                8 (_call_reprcompare)
+               
+               411        1798 LOAD_CONST               8 (('==',))
                           1800 LOAD_FAST               11 (@py_assert12)
                           1802 BUILD_TUPLE              1
                           1804 LOAD_CONST              20 (('%(py11)s\n{%(py11)s = %(py9)s\n{%(py9)s = %(py7)s\n{%(py7)s = %(py0)s(%(py1)s, %(py3)s, zero=%(py5)s)\n}.options\n}()\n} == %(py14)s',))
                           1806 LOAD_FAST                7 (@py_assert10)
                           1808 LOAD_FAST               10 (@py_assert13)
                           1810 BUILD_TUPLE              2
                           1812 PRECALL                  4
                           1816 CALL                     4
                           1826 LOAD_CONST              10 ('IS_IN_DB')
                           1828 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          1840 LOAD_ATTR               10 (locals)
-                          1850 PRECALL                  0
+               
+               414        1840 LOAD_ATTR               10 (locals)
+               
+               411        1850 PRECALL                  0
                           1854 CALL                     0
                           1864 CONTAINS_OP              0
                           1866 POP_JUMP_FORWARD_IF_TRUE    25 (to 1918)
                           1868 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1880 LOAD_ATTR               11 (_should_repr_global_name)
-                          1890 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               414        1880 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               411        1890 LOAD_GLOBAL             10 (IS_IN_DB)
                           1902 PRECALL                  1
                           1906 CALL                     1
                           1916 POP_JUMP_FORWARD_IF_FALSE    25 (to 1968)
                        >> 1918 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          1930 LOAD_ATTR               12 (_saferepr)
-                          1940 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               414        1930 LOAD_ATTR               12 (_saferepr)
+               
+               411        1940 LOAD_GLOBAL             10 (IS_IN_DB)
                           1952 PRECALL                  1
                           1956 CALL                     1
                           1966 JUMP_FORWARD             1 (to 1970)
                        >> 1968 LOAD_CONST              10 ('IS_IN_DB')
                        >> 1970 LOAD_CONST              11 ('db')
                           1972 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          1984 LOAD_ATTR               10 (locals)
-                          1994 PRECALL                  0
+               
+               414        1984 LOAD_ATTR               10 (locals)
+               
+               411        1994 PRECALL                  0
                           1998 CALL                     0
                           2008 CONTAINS_OP              0
                           2010 POP_JUMP_FORWARD_IF_TRUE    20 (to 2052)
                           2012 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2024 LOAD_ATTR               11 (_should_repr_global_name)
-                          2034 LOAD_FAST                1 (db)
+               
+               414        2024 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               411        2034 LOAD_FAST                1 (db)
                           2036 PRECALL                  1
                           2040 CALL                     1
                           2050 POP_JUMP_FORWARD_IF_FALSE    20 (to 2092)
                        >> 2052 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2064 LOAD_ATTR               12 (_saferepr)
-                          2074 LOAD_FAST                1 (db)
+               
+               414        2064 LOAD_ATTR               12 (_saferepr)
+               
+               411        2074 LOAD_FAST                1 (db)
                           2076 PRECALL                  1
                           2080 CALL                     1
                           2090 JUMP_FORWARD             1 (to 2094)
                        >> 2092 LOAD_CONST              11 ('db')
                        >> 2094 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2106 LOAD_ATTR               12 (_saferepr)
-                          2116 LOAD_FAST                2 (@py_assert2)
+               
+               414        2106 LOAD_ATTR               12 (_saferepr)
+               
+               411        2116 LOAD_FAST                2 (@py_assert2)
                           2118 PRECALL                  1
                           2122 CALL                     1
                           2132 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2144 LOAD_ATTR               12 (_saferepr)
-                          2154 LOAD_FAST                3 (@py_assert4)
+               
+               414        2144 LOAD_ATTR               12 (_saferepr)
+               
+               411        2154 LOAD_FAST                3 (@py_assert4)
                           2156 PRECALL                  1
                           2160 CALL                     1
                           2170 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2182 LOAD_ATTR               12 (_saferepr)
-                          2192 LOAD_FAST                4 (@py_assert6)
+               
+               414        2182 LOAD_ATTR               12 (_saferepr)
+               
+               411        2192 LOAD_FAST                4 (@py_assert6)
                           2194 PRECALL                  1
                           2198 CALL                     1
                           2208 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2220 LOAD_ATTR               12 (_saferepr)
-                          2230 LOAD_FAST                5 (@py_assert8)
+               
+               414        2220 LOAD_ATTR               12 (_saferepr)
+               
+               411        2230 LOAD_FAST                5 (@py_assert8)
                           2232 PRECALL                  1
                           2236 CALL                     1
                           2246 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2258 LOAD_ATTR               12 (_saferepr)
-                          2268 LOAD_FAST                7 (@py_assert10)
+               
+               414        2258 LOAD_ATTR               12 (_saferepr)
+               
+               411        2268 LOAD_FAST                7 (@py_assert10)
                           2270 PRECALL                  1
                           2274 CALL                     1
                           2284 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2296 LOAD_ATTR               12 (_saferepr)
-                          2306 LOAD_FAST               10 (@py_assert13)
+               
+               414        2296 LOAD_ATTR               12 (_saferepr)
+               
+               411        2306 LOAD_FAST               10 (@py_assert13)
                           2308 PRECALL                  1
                           2312 CALL                     1
                           2322 LOAD_CONST              21 (('py0', 'py1', 'py3', 'py5', 'py7', 'py9', 'py11', 'py14'))
                           2324 BUILD_CONST_KEY_MAP      8
                           2326 BINARY_OP                6 (%)
                           2330 STORE_FAST               9 (@py_format15)
                           2332 LOAD_CONST              22 ('assert %(py16)s')
                           2334 LOAD_CONST              23 ('py16')
                           2336 LOAD_FAST                9 (@py_format15)
                           2338 BUILD_MAP                1
                           2340 BINARY_OP                6 (%)
                           2344 STORE_FAST              12 (@py_format17)
                           2346 LOAD_GLOBAL             27 (NULL + AssertionError)
                           2358 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2370 LOAD_ATTR               14 (_format_explanation)
-                          2380 LOAD_FAST               12 (@py_format17)
+               
+               414        2370 LOAD_ATTR               14 (_format_explanation)
+               
+               411        2380 LOAD_FAST               12 (@py_format17)
                           2382 PRECALL                  1
                           2386 CALL                     1
                           2396 PRECALL                  1
                           2400 CALL                     1
                           2410 RAISE_VARARGS            1
                        >> 2412 LOAD_CONST               0 (None)
                           2414 COPY                     1
@@ -4553,29 +4696,31 @@
                           2428 STORE_FAST               5 (@py_assert8)
                           2430 COPY                     1
                           2432 STORE_FAST               7 (@py_assert10)
                           2434 COPY                     1
                           2436 STORE_FAST              11 (@py_assert12)
                           2438 STORE_FAST              10 (@py_assert13)
                
-               399        2440 LOAD_CONST               2 ('thing')
+               415        2440 LOAD_CONST               2 ('thing')
                           2442 STORE_FAST               2 (@py_assert2)
                           2444 LOAD_CONST              24 ('x')
                           2446 STORE_FAST               3 (@py_assert4)
                           2448 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2460 LOAD_FAST                1 (db)
                           2462 LOAD_FAST                2 (@py_assert2)
                           2464 LOAD_FAST                3 (@py_assert4)
                           2466 KW_NAMES                17
                           2468 PRECALL                  3
                           2472 CALL                     3
                           2482 STORE_FAST               4 (@py_assert6)
                           2484 LOAD_FAST                4 (@py_assert6)
-                          2486 LOAD_ATTR                6 (options)
-                          2496 STORE_FAST               5 (@py_assert8)
+               
+               419        2486 LOAD_ATTR                6 (options)
+               
+               415        2496 STORE_FAST               5 (@py_assert8)
                           2498 PUSH_NULL
                           2500 LOAD_FAST                5 (@py_assert8)
                           2502 PRECALL                  0
                           2506 CALL                     0
                           2516 STORE_FAST               7 (@py_assert10)
                           2518 BUILD_LIST               0
                           2520 LOAD_CONST              25 ((('', 'x'), ('1', 'red'), ('2', 'green')))
@@ -4585,108 +4730,136 @@
                           2528 LOAD_FAST               10 (@py_assert13)
                           2530 COMPARE_OP               2 (==)
                           2536 STORE_FAST              11 (@py_assert12)
                           2538 LOAD_FAST               11 (@py_assert12)
                           2540 EXTENDED_ARG             1
                           2542 POP_JUMP_FORWARD_IF_TRUE   318 (to 3180)
                           2544 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2556 LOAD_ATTR                8 (_call_reprcompare)
-                          2566 LOAD_CONST               8 (('==',))
+               
+               419        2556 LOAD_ATTR                8 (_call_reprcompare)
+               
+               415        2566 LOAD_CONST               8 (('==',))
                           2568 LOAD_FAST               11 (@py_assert12)
                           2570 BUILD_TUPLE              1
                           2572 LOAD_CONST              20 (('%(py11)s\n{%(py11)s = %(py9)s\n{%(py9)s = %(py7)s\n{%(py7)s = %(py0)s(%(py1)s, %(py3)s, zero=%(py5)s)\n}.options\n}()\n} == %(py14)s',))
                           2574 LOAD_FAST                7 (@py_assert10)
                           2576 LOAD_FAST               10 (@py_assert13)
                           2578 BUILD_TUPLE              2
                           2580 PRECALL                  4
                           2584 CALL                     4
                           2594 LOAD_CONST              10 ('IS_IN_DB')
                           2596 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          2608 LOAD_ATTR               10 (locals)
-                          2618 PRECALL                  0
+               
+               419        2608 LOAD_ATTR               10 (locals)
+               
+               415        2618 PRECALL                  0
                           2622 CALL                     0
                           2632 CONTAINS_OP              0
                           2634 POP_JUMP_FORWARD_IF_TRUE    25 (to 2686)
                           2636 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2648 LOAD_ATTR               11 (_should_repr_global_name)
-                          2658 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               419        2648 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               415        2658 LOAD_GLOBAL             10 (IS_IN_DB)
                           2670 PRECALL                  1
                           2674 CALL                     1
                           2684 POP_JUMP_FORWARD_IF_FALSE    25 (to 2736)
                        >> 2686 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2698 LOAD_ATTR               12 (_saferepr)
-                          2708 LOAD_GLOBAL             10 (IS_IN_DB)
+               
+               419        2698 LOAD_ATTR               12 (_saferepr)
+               
+               415        2708 LOAD_GLOBAL             10 (IS_IN_DB)
                           2720 PRECALL                  1
                           2724 CALL                     1
                           2734 JUMP_FORWARD             1 (to 2738)
                        >> 2736 LOAD_CONST              10 ('IS_IN_DB')
                        >> 2738 LOAD_CONST              11 ('db')
                           2740 LOAD_GLOBAL             19 (NULL + @py_builtins)
-                          2752 LOAD_ATTR               10 (locals)
-                          2762 PRECALL                  0
+               
+               419        2752 LOAD_ATTR               10 (locals)
+               
+               415        2762 PRECALL                  0
                           2766 CALL                     0
                           2776 CONTAINS_OP              0
                           2778 POP_JUMP_FORWARD_IF_TRUE    20 (to 2820)
                           2780 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2792 LOAD_ATTR               11 (_should_repr_global_name)
-                          2802 LOAD_FAST                1 (db)
+               
+               419        2792 LOAD_ATTR               11 (_should_repr_global_name)
+               
+               415        2802 LOAD_FAST                1 (db)
                           2804 PRECALL                  1
                           2808 CALL                     1
                           2818 POP_JUMP_FORWARD_IF_FALSE    20 (to 2860)
                        >> 2820 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2832 LOAD_ATTR               12 (_saferepr)
-                          2842 LOAD_FAST                1 (db)
+               
+               419        2832 LOAD_ATTR               12 (_saferepr)
+               
+               415        2842 LOAD_FAST                1 (db)
                           2844 PRECALL                  1
                           2848 CALL                     1
                           2858 JUMP_FORWARD             1 (to 2862)
                        >> 2860 LOAD_CONST              11 ('db')
                        >> 2862 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2874 LOAD_ATTR               12 (_saferepr)
-                          2884 LOAD_FAST                2 (@py_assert2)
+               
+               419        2874 LOAD_ATTR               12 (_saferepr)
+               
+               415        2884 LOAD_FAST                2 (@py_assert2)
                           2886 PRECALL                  1
                           2890 CALL                     1
                           2900 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2912 LOAD_ATTR               12 (_saferepr)
-                          2922 LOAD_FAST                3 (@py_assert4)
+               
+               419        2912 LOAD_ATTR               12 (_saferepr)
+               
+               415        2922 LOAD_FAST                3 (@py_assert4)
                           2924 PRECALL                  1
                           2928 CALL                     1
                           2938 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2950 LOAD_ATTR               12 (_saferepr)
-                          2960 LOAD_FAST                4 (@py_assert6)
+               
+               419        2950 LOAD_ATTR               12 (_saferepr)
+               
+               415        2960 LOAD_FAST                4 (@py_assert6)
                           2962 PRECALL                  1
                           2966 CALL                     1
                           2976 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          2988 LOAD_ATTR               12 (_saferepr)
-                          2998 LOAD_FAST                5 (@py_assert8)
+               
+               419        2988 LOAD_ATTR               12 (_saferepr)
+               
+               415        2998 LOAD_FAST                5 (@py_assert8)
                           3000 PRECALL                  1
                           3004 CALL                     1
                           3014 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          3026 LOAD_ATTR               12 (_saferepr)
-                          3036 LOAD_FAST                7 (@py_assert10)
+               
+               419        3026 LOAD_ATTR               12 (_saferepr)
+               
+               415        3036 LOAD_FAST                7 (@py_assert10)
                           3038 PRECALL                  1
                           3042 CALL                     1
                           3052 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          3064 LOAD_ATTR               12 (_saferepr)
-                          3074 LOAD_FAST               10 (@py_assert13)
+               
+               419        3064 LOAD_ATTR               12 (_saferepr)
+               
+               415        3074 LOAD_FAST               10 (@py_assert13)
                           3076 PRECALL                  1
                           3080 CALL                     1
                           3090 LOAD_CONST              21 (('py0', 'py1', 'py3', 'py5', 'py7', 'py9', 'py11', 'py14'))
                           3092 BUILD_CONST_KEY_MAP      8
                           3094 BINARY_OP                6 (%)
                           3098 STORE_FAST               9 (@py_format15)
                           3100 LOAD_CONST              22 ('assert %(py16)s')
                           3102 LOAD_CONST              23 ('py16')
                           3104 LOAD_FAST                9 (@py_format15)
                           3106 BUILD_MAP                1
                           3108 BINARY_OP                6 (%)
                           3112 STORE_FAST              12 (@py_format17)
                           3114 LOAD_GLOBAL             27 (NULL + AssertionError)
                           3126 LOAD_GLOBAL             15 (NULL + @pytest_ar)
-                          3138 LOAD_ATTR               14 (_format_explanation)
-                          3148 LOAD_FAST               12 (@py_format17)
+               
+               419        3138 LOAD_ATTR               14 (_format_explanation)
+               
+               415        3148 LOAD_FAST               12 (@py_format17)
                           3150 PRECALL                  1
                           3154 CALL                     1
                           3164 PRECALL                  1
                           3168 CALL                     1
                           3178 RAISE_VARARGS            1
                        >> 3180 LOAD_CONST               0 (None)
                           3182 COPY                     1
@@ -4722,27 +4895,27 @@
                   'py14'
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 1
                      flags     : 19
                      code 0x97007c006a0000000000000000005300
-                     396           0 RESUME                   0
+                     405           0 RESUME                   0
                                    2 LOAD_FAST                0 (i)
                                    4 LOAD_ATTR                0 (name)
                                   14 RETURN_VALUE
                      consts
                         None
                      names      ('name',)
                      varnames   ('i',)
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '<lambda>'
-                     firstlineno 396
+                     firstlineno 405
                      lnotab 0x
                   (('', ''), ('1', 'red'), ('2', 'green'))
                   ('zero',)
                   ('1', 'red')
                   ('2', 'green')
                   ('%(py11)s\n{%(py11)s = %(py9)s\n{%(py9)s = %(py7)s\n{%(py7)s = %(py0)s(%(py1)s, %(py3)s, zero=%(py5)s)\n}.options\n}()\n} == %(py14)s',)
                   ('py0', 'py1', 'py3', 'py5', 'py7', 'py9', 'py11', 'py14')
@@ -4752,18 +4925,23 @@
                   (('', 'x'), ('1', 'red'), ('2', 'green'))
                names      ('DAL', 'define_table', 'Field', 'thing', 'insert', 'IS_IN_DB', 'options', '@pytest_ar', '_call_reprcompare', '@py_builtins', 'locals', '_should_repr_global_name', '_saferepr', 'AssertionError', '_format_explanation', '_format')
                varnames   ('self', 'db', '@py_assert2', '@py_assert4', '@py_assert6', '@py_assert8', '@py_assert11', '@py_assert10', '@py_format13', '@py_format15', '@py_assert13', '@py_assert12', '@py_format17')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_DB_options'
-               firstlineno 389
+               firstlineno 398
                lnotab
-                  0x02011e01460136013601ff00ff00d0021a01ff00ff00d001ff00ff00ff
-                  000301
+                  0x02011e01460136013601ff00ff00d0021a0126040afc3c040afc2a040a
+                  fc1e040afc28040afc2c040afc1e040afc1e040afc20040afc1c040afc1c
+                  040afc1c040afc1c040afc40040afc38052e030afd3c030afd2a030afd1e
+                  030afd28030afd2c030afd1e030afd1e030afd20030afd1c030afd1c030a
+                  fd1c030afd1c030afd1c030afd40030afd3c042e040afc3c040afc2a040a
+                  fc1e040afc28040afc2c040afc1e040afc1e040afc20040afc1c040afc1c
+                  040afc1c040afc1c040afc1c040afc40040afc
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 7
                flags     : 3
                code
                   0x97007401000000000000000000006401a6010000ab0100000000000000
@@ -4804,164 +4982,164 @@
                   00000000000000010002007c036405a6010000ab0100000000000000007d
                   027c00a00600000000000000000000000000000000000000007c02640da6
                   020000ab020000000000000000010002007c036407a6010000ab01000000
                   00000000007d027c00a00600000000000000000000000000000000000000
                   007c026417a6020000ab02000000000000000001007c016a030000000000
                   000000a0090000000000000000000000000000000000000000a6000000ab
                   000000000000000000010064005300
-               402           0 RESUME                   0
+               421           0 RESUME                   0
                
-               403           2 LOAD_GLOBAL              1 (NULL + DAL)
+               422           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               404          32 LOAD_FAST                1 (db)
+               423          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('person')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 LOAD_GLOBAL              5 (NULL + Field)
                             98 LOAD_CONST               4 ('nickname')
                            100 PRECALL                  1
                            104 CALL                     1
                            114 PRECALL                  3
                            118 CALL                     3
                            128 POP_TOP
                
-               405         130 LOAD_FAST                1 (db)
+               424         130 LOAD_FAST                1 (db)
                            132 LOAD_ATTR                3 (person)
                            142 LOAD_METHOD              4 (insert)
                            164 LOAD_CONST               5 ('george')
                            166 KW_NAMES                 6
                            168 PRECALL                  1
                            172 CALL                     1
                            182 POP_TOP
                
-               406         184 LOAD_FAST                1 (db)
+               425         184 LOAD_FAST                1 (db)
                            186 LOAD_ATTR                3 (person)
                            196 LOAD_METHOD              4 (insert)
                            218 LOAD_CONST               7 ('costanza')
                            220 LOAD_CONST               8 ('T Bone')
                            222 KW_NAMES                 9
                            224 PRECALL                  2
                            228 CALL                     2
                            238 POP_TOP
                
-               407         240 PUSH_NULL
+               426         240 PUSH_NULL
                            242 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            254 LOAD_FAST                1 (db)
                            256 LOAD_CONST              10 ('person.name')
                            258 LOAD_CONST              11 ('oops')
                            260 KW_NAMES                12
                            262 PRECALL                  3
                            266 CALL                     3
                            276 LOAD_CONST               5 ('george')
                            278 PRECALL                  1
                            282 CALL                     1
                            292 STORE_FAST               2 (rtn)
                
-               408         294 LOAD_FAST                0 (self)
+               427         294 LOAD_FAST                0 (self)
                            296 LOAD_METHOD              6 (assertEqual)
                            318 LOAD_FAST                2 (rtn)
                            320 LOAD_CONST              13 (('george', 'oops'))
                            322 PRECALL                  2
                            326 CALL                     2
                            336 POP_TOP
                
-               409         338 PUSH_NULL
+               428         338 PUSH_NULL
                            340 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                
-               410         352 LOAD_FAST                1 (db)
+               429         352 LOAD_FAST                1 (db)
                            354 LOAD_CONST              10 ('person.name')
                            356 LOAD_CONST              11 ('oops')
                            358 LOAD_CONST               5 ('george')
                            360 BUILD_LIST               1
                
-               409         362 KW_NAMES                14
+               428         362 KW_NAMES                14
                            364 PRECALL                  4
                            368 CALL                     4
                
-               411         378 LOAD_CONST               5 ('george')
+               430         378 LOAD_CONST               5 ('george')
                
-               409         380 PRECALL                  1
+               428         380 PRECALL                  1
                            384 CALL                     1
                            394 STORE_FAST               2 (rtn)
                
-               412         396 LOAD_FAST                0 (self)
+               431         396 LOAD_FAST                0 (self)
                            398 LOAD_METHOD              6 (assertEqual)
                            420 LOAD_FAST                2 (rtn)
                            422 LOAD_CONST              15 (('george', None))
                            424 PRECALL                  2
                            428 CALL                     2
                            438 POP_TOP
                
-               413         440 PUSH_NULL
+               432         440 PUSH_NULL
                            442 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            454 LOAD_FAST                1 (db)
                            456 LOAD_CONST              10 ('person.name')
                            458 LOAD_CONST              11 ('oops')
                            460 KW_NAMES                12
                            462 PRECALL                  3
                            466 CALL                     3
                            476 LOAD_CONST              16 ('  ')
                            478 PRECALL                  1
                            482 CALL                     1
                            492 STORE_FAST               2 (rtn)
                
-               414         494 LOAD_FAST                0 (self)
+               433         494 LOAD_FAST                0 (self)
                            496 LOAD_METHOD              6 (assertEqual)
                            518 LOAD_FAST                2 (rtn)
                            520 LOAD_CONST              17 (('  ', 'oops'))
                            522 PRECALL                  2
                            526 CALL                     2
                            536 POP_TOP
                
-               415         538 PUSH_NULL
+               434         538 PUSH_NULL
                            540 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            552 LOAD_FAST                1 (db)
                            554 LOAD_CONST              10 ('person.name')
                            556 PRECALL                  2
                            560 CALL                     2
                            570 LOAD_CONST              18 ('jerry')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               2 (rtn)
                
-               416         588 LOAD_FAST                0 (self)
+               435         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              6 (assertEqual)
                            612 LOAD_FAST                2 (rtn)
                            614 LOAD_CONST              19 (('jerry', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               417         632 PUSH_NULL
+               436         632 PUSH_NULL
                            634 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            646 LOAD_FAST                1 (db)
                            648 LOAD_CONST              10 ('person.name')
                            650 PRECALL                  2
                            654 CALL                     2
                            664 LOAD_CONST              18 ('jerry')
                            666 PRECALL                  1
                            670 CALL                     1
                            680 STORE_FAST               2 (rtn)
                
-               418         682 LOAD_FAST                0 (self)
+               437         682 LOAD_FAST                0 (self)
                            684 LOAD_METHOD              6 (assertEqual)
                            706 LOAD_FAST                2 (rtn)
                            708 LOAD_CONST              19 (('jerry', None))
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               419         726 PUSH_NULL
+               438         726 PUSH_NULL
                            728 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            740 PUSH_NULL
                            742 LOAD_FAST                1 (db)
                            744 LOAD_FAST                1 (db)
                            746 LOAD_ATTR                3 (person)
                            756 LOAD_ATTR                7 (id)
                            766 LOAD_CONST              20 (0)
@@ -4972,94 +5150,94 @@
                            790 PRECALL                  2
                            794 CALL                     2
                            804 LOAD_CONST              18 ('jerry')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               2 (rtn)
                
-               420         822 LOAD_FAST                0 (self)
+               439         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              6 (assertEqual)
                            846 LOAD_FAST                2 (rtn)
                            848 LOAD_CONST              19 (('jerry', None))
                            850 PRECALL                  2
                            854 CALL                     2
                            864 POP_TOP
                
-               421         866 PUSH_NULL
+               440         866 PUSH_NULL
                            868 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            880 LOAD_FAST                1 (db)
                            882 LOAD_FAST                1 (db)
                            884 LOAD_ATTR                3 (person)
                            894 LOAD_CONST              11 ('oops')
                            896 KW_NAMES                12
                            898 PRECALL                  3
                            902 CALL                     3
                            912 LOAD_CONST              21 (1)
                            914 PRECALL                  1
                            918 CALL                     1
                            928 STORE_FAST               2 (rtn)
                
-               422         930 LOAD_FAST                0 (self)
+               441         930 LOAD_FAST                0 (self)
                            932 LOAD_METHOD              6 (assertEqual)
                            954 LOAD_FAST                2 (rtn)
                            956 LOAD_CONST              22 ((1, 'oops'))
                            958 PRECALL                  2
                            962 CALL                     2
                            972 POP_TOP
                
-               423         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
+               442         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            986 LOAD_FAST                1 (db)
                            988 LOAD_CONST              10 ('person.name')
                            990 LOAD_CONST              11 ('oops')
                            992 KW_NAMES                12
                            994 PRECALL                  3
                            998 CALL                     3
                           1008 STORE_FAST               3 (vldtr)
                
-               424        1010 LOAD_FAST                3 (vldtr)
+               443        1010 LOAD_FAST                3 (vldtr)
                           1012 LOAD_METHOD              8 (set_self_id)
                           1034 LOAD_CONST               7 ('costanza')
                           1036 LOAD_CONST               8 ('T Bone')
                           1038 LOAD_CONST               9 (('name', 'nickname'))
                           1040 BUILD_CONST_KEY_MAP      2
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 POP_TOP
                
-               425        1058 PUSH_NULL
+               444        1058 PUSH_NULL
                           1060 LOAD_FAST                3 (vldtr)
                           1062 LOAD_CONST               5 ('george')
                           1064 PRECALL                  1
                           1068 CALL                     1
                           1078 STORE_FAST               2 (rtn)
                
-               426        1080 LOAD_FAST                0 (self)
+               445        1080 LOAD_FAST                0 (self)
                           1082 LOAD_METHOD              6 (assertEqual)
                           1104 LOAD_FAST                2 (rtn)
                           1106 LOAD_CONST              13 (('george', 'oops'))
                           1108 PRECALL                  2
                           1112 CALL                     2
                           1122 POP_TOP
                
-               427        1124 PUSH_NULL
+               446        1124 PUSH_NULL
                           1126 LOAD_FAST                3 (vldtr)
                           1128 LOAD_CONST               7 ('costanza')
                           1130 PRECALL                  1
                           1134 CALL                     1
                           1144 STORE_FAST               2 (rtn)
                
-               428        1146 LOAD_FAST                0 (self)
+               447        1146 LOAD_FAST                0 (self)
                           1148 LOAD_METHOD              6 (assertEqual)
                           1170 LOAD_FAST                2 (rtn)
                           1172 LOAD_CONST              23 (('costanza', None))
                           1174 PRECALL                  2
                           1178 CALL                     2
                           1188 POP_TOP
                
-               430        1190 LOAD_FAST                1 (db)
+               449        1190 LOAD_FAST                1 (db)
                           1192 LOAD_ATTR                3 (person)
                           1202 LOAD_METHOD              9 (drop)
                           1224 PRECALL                  0
                           1228 CALL                     0
                           1238 POP_TOP
                           1240 LOAD_CONST               0 (None)
                           1242 RETURN_VALUE
@@ -5090,15 +5268,15 @@
                   ('costanza', None)
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_NOT_IN_DB', 'assertEqual', 'id', 'set_self_id', 'drop')
                varnames   ('self', 'db', 'rtn', 'vldtr')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_IN_DB'
-               firstlineno 402
+               firstlineno 421
                lnotab
                   0x02011e0162013601380136012c010e010aff100202fe10032c0136012c
                   0132012c0132012c0160012c0140012c012401300116012c0116012c02
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -5138,233 +5316,233 @@
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab000000000000000000640ea6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c01640fa60200
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab0000000000000000006410a6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c016411a60200
                   00ab020000000000000000010064005300
-               432           0 RESUME                   0
+               451           0 RESUME                   0
                
-               433           2 PUSH_NULL
+               452           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               3 ('4')
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               434          52 LOAD_FAST                0 (self)
+               453          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               4 ((4, None))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               435          96 PUSH_NULL
+               454          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               5 (4)
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               436         146 LOAD_FAST                0 (self)
+               455         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               4 ((4, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               437         190 PUSH_NULL
+               456         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               1 (1)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               438         240 LOAD_FAST                0 (self)
+               457         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               6 ((1, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               439         284 PUSH_NULL
+               458         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               2 (5)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               440         334 LOAD_FAST                0 (self)
+               459         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               441         378 PUSH_NULL
+               460         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               2 (5)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               442         428 LOAD_FAST                0 (self)
+               461         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               443         472 PUSH_NULL
+               462         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST               8 (3.5)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               444         522 LOAD_FAST                0 (self)
+               463         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST               9 ((3.5, 'Enter an integer between 1 and 4'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               445         566 PUSH_NULL
+               464         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            580 LOAD_CONST               0 (None)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST               3 ('4')
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               446         616 LOAD_FAST                0 (self)
+               465         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST               4 ((4, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               447         660 PUSH_NULL
+               466         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            674 LOAD_CONST               0 (None)
                            676 LOAD_CONST               2 (5)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              10 ('6')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               448         710 LOAD_FAST                0 (self)
+               467         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              11 (('6', 'Enter an integer less than or equal to 4'))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               449         754 PUSH_NULL
+               468         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            768 LOAD_CONST               1 (1)
                            770 LOAD_CONST               0 (None)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST               3 ('4')
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               450         804 LOAD_FAST                0 (self)
+               469         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST               4 ((4, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               451         848 PUSH_NULL
+               470         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              12 ('0')
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               452         898 LOAD_FAST                0 (self)
+               471         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              13 (('0', 'Enter an integer greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               453         942 PUSH_NULL
+               472         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            956 PRECALL                  0
                            960 CALL                     0
                            970 LOAD_CONST              14 (6)
                            972 PRECALL                  1
                            976 CALL                     1
                            986 STORE_FAST               1 (rtn)
                
-               454         988 LOAD_FAST                0 (self)
+               473         988 LOAD_FAST                0 (self)
                            990 LOAD_METHOD              1 (assertEqual)
                           1012 LOAD_FAST                1 (rtn)
                           1014 LOAD_CONST              15 ((6, None))
                           1016 PRECALL                  2
                           1020 CALL                     2
                           1030 POP_TOP
                
-               455        1032 PUSH_NULL
+               474        1032 PUSH_NULL
                           1034 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                           1046 PRECALL                  0
                           1050 CALL                     0
                           1060 LOAD_CONST              16 ('abc')
                           1062 PRECALL                  1
                           1066 CALL                     1
                           1076 STORE_FAST               1 (rtn)
                
-               456        1078 LOAD_FAST                0 (self)
+               475        1078 LOAD_FAST                0 (self)
                           1080 LOAD_METHOD              1 (assertEqual)
                           1102 LOAD_FAST                1 (rtn)
                           1104 LOAD_CONST              17 (('abc', 'Enter an integer'))
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 POP_TOP
                           1122 LOAD_CONST               0 (None)
@@ -5390,15 +5568,15 @@
                   ('abc', 'Enter an integer')
                names      ('IS_INT_IN_RANGE', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_INT_IN_RANGE'
-               firstlineno 432
+               firstlineno 451
                lnotab
                   0x020132012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -5459,345 +5637,345 @@
                   00000000000000641aa6010000ab0100000000000000007d017c00a00100
                   000000000000000000000000000000000000007c01641ba6020000ab0200
                   0000000000000001007401000000000000000000006417ac18a6010000ab
                   010000000000000000a00200000000000000000000000000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c01641ca6020000ab0200000000000000
                   00010064005300
-               458           0 RESUME                   0
+               477           0 RESUME                   0
                
-               460           2 PUSH_NULL
+               479           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               461          52 LOAD_FAST                0 (self)
+               480          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               462          96 PUSH_NULL
+               481          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               463         146 LOAD_FAST                0 (self)
+               482         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               5 ((4.0, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               464         190 PUSH_NULL
+               483         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               6 (4)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               465         240 LOAD_FAST                0 (self)
+               484         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               5 ((4.0, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               466         284 PUSH_NULL
+               485         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               1 (1)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               467         334 LOAD_FAST                0 (self)
+               486         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((1.0, None))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               468         378 PUSH_NULL
+               487         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               8 (5.25)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               469         428 LOAD_FAST                0 (self)
+               488         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               9 ((5.25, 'Enter a number between 1 and 5'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               470         472 PUSH_NULL
+               489         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST              10 (6.0)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               471         522 LOAD_FAST                0 (self)
+               490         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST              11 ((6.0, 'Enter a number between 1 and 5'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               472         566 PUSH_NULL
+               491         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            580 LOAD_CONST               1 (1)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST              12 (3.5)
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               473         616 LOAD_FAST                0 (self)
+               492         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST              13 ((3.5, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               474         660 PUSH_NULL
+               493         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            674 LOAD_CONST               1 (1)
                            676 LOAD_CONST               0 (None)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              12 (3.5)
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               475         710 LOAD_FAST                0 (self)
+               494         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              13 ((3.5, None))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               476         754 PUSH_NULL
+               495         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            768 LOAD_CONST               0 (None)
                            770 LOAD_CONST               2 (5)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST              12 (3.5)
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               477         804 LOAD_FAST                0 (self)
+               496         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST              13 ((3.5, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               478         848 PUSH_NULL
+               497         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              14 (0.5)
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               479         898 LOAD_FAST                0 (self)
+               498         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              15 ((0.5, 'Enter a number greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               480         942 PUSH_NULL
+               499         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            956 LOAD_CONST               0 (None)
                            958 LOAD_CONST               2 (5)
                            960 PRECALL                  2
                            964 CALL                     2
                            974 LOAD_CONST              16 (6.5)
                            976 PRECALL                  1
                            980 CALL                     1
                            990 STORE_FAST               1 (rtn)
                
-               481         992 LOAD_FAST                0 (self)
+               500         992 LOAD_FAST                0 (self)
                            994 LOAD_METHOD              1 (assertEqual)
                           1016 LOAD_FAST                1 (rtn)
                           1018 LOAD_CONST              17 ((6.5, 'Enter a number less than or equal to 5'))
                           1020 PRECALL                  2
                           1024 CALL                     2
                           1034 POP_TOP
                
-               482        1036 PUSH_NULL
+               501        1036 PUSH_NULL
                           1038 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1050 PRECALL                  0
                           1054 CALL                     0
                           1064 LOAD_CONST              16 (6.5)
                           1066 PRECALL                  1
                           1070 CALL                     1
                           1080 STORE_FAST               1 (rtn)
                
-               483        1082 LOAD_FAST                0 (self)
+               502        1082 LOAD_FAST                0 (self)
                           1084 LOAD_METHOD              1 (assertEqual)
                           1106 LOAD_FAST                1 (rtn)
                           1108 LOAD_CONST              18 ((6.5, None))
                           1110 PRECALL                  2
                           1114 CALL                     2
                           1124 POP_TOP
                
-               484        1126 PUSH_NULL
+               503        1126 PUSH_NULL
                           1128 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1140 PRECALL                  0
                           1144 CALL                     0
                           1154 LOAD_CONST              19 ('abc')
                           1156 PRECALL                  1
                           1160 CALL                     1
                           1170 STORE_FAST               1 (rtn)
                
-               485        1172 LOAD_FAST                0 (self)
+               504        1172 LOAD_FAST                0 (self)
                           1174 LOAD_METHOD              1 (assertEqual)
                           1196 LOAD_FAST                1 (rtn)
                           1198 LOAD_CONST              20 (('abc', 'Enter a number'))
                           1200 PRECALL                  2
                           1204 CALL                     2
                           1214 POP_TOP
                
-               486        1216 PUSH_NULL
+               505        1216 PUSH_NULL
                           1218 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1230 PRECALL                  0
                           1234 CALL                     0
                           1244 LOAD_CONST              21 ('6,5')
                           1246 PRECALL                  1
                           1250 CALL                     1
                           1260 STORE_FAST               1 (rtn)
                
-               487        1262 LOAD_FAST                0 (self)
+               506        1262 LOAD_FAST                0 (self)
                           1264 LOAD_METHOD              1 (assertEqual)
                           1286 LOAD_FAST                1 (rtn)
                           1288 LOAD_CONST              22 (('6,5', 'Enter a number'))
                           1290 PRECALL                  2
                           1294 CALL                     2
                           1304 POP_TOP
                
-               488        1306 PUSH_NULL
+               507        1306 PUSH_NULL
                           1308 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1320 LOAD_CONST              23 (',')
                           1322 KW_NAMES                24
                           1324 PRECALL                  1
                           1328 CALL                     1
                           1338 LOAD_CONST              25 ('6.5')
                           1340 PRECALL                  1
                           1344 CALL                     1
                           1354 STORE_FAST               1 (rtn)
                
-               489        1356 LOAD_FAST                0 (self)
+               508        1356 LOAD_FAST                0 (self)
                           1358 LOAD_METHOD              1 (assertEqual)
                           1380 LOAD_FAST                1 (rtn)
                           1382 LOAD_CONST              18 ((6.5, None))
                           1384 PRECALL                  2
                           1388 CALL                     2
                           1398 POP_TOP
                
-               491        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               510        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1412 LOAD_CONST              23 (',')
                           1414 KW_NAMES                24
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_METHOD              2 (formatter)
                           1452 LOAD_CONST               0 (None)
                           1454 PRECALL                  1
                           1458 CALL                     1
                           1468 STORE_FAST               1 (rtn)
                
-               492        1470 LOAD_FAST                0 (self)
+               511        1470 LOAD_FAST                0 (self)
                           1472 LOAD_METHOD              1 (assertEqual)
                           1494 LOAD_FAST                1 (rtn)
                           1496 LOAD_CONST               0 (None)
                           1498 PRECALL                  2
                           1502 CALL                     2
                           1512 POP_TOP
                
-               493        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               512        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1526 LOAD_CONST              23 (',')
                           1528 KW_NAMES                24
                           1530 PRECALL                  1
                           1534 CALL                     1
                           1544 LOAD_METHOD              2 (formatter)
                           1566 LOAD_CONST              26 (0.25)
                           1568 PRECALL                  1
                           1572 CALL                     1
                           1582 STORE_FAST               1 (rtn)
                
-               494        1584 LOAD_FAST                0 (self)
+               513        1584 LOAD_FAST                0 (self)
                           1586 LOAD_METHOD              1 (assertEqual)
                           1608 LOAD_FAST                1 (rtn)
                           1610 LOAD_CONST              27 ('0,25')
                           1612 PRECALL                  2
                           1616 CALL                     2
                           1626 POP_TOP
                
-               496        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               515        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1640 LOAD_CONST              23 (',')
                           1642 KW_NAMES                24
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_METHOD              2 (formatter)
                           1680 LOAD_CONST               1 (1)
                           1682 PRECALL                  1
                           1686 CALL                     1
                           1696 STORE_FAST               1 (rtn)
                
-               497        1698 LOAD_FAST                0 (self)
+               516        1698 LOAD_FAST                0 (self)
                           1700 LOAD_METHOD              1 (assertEqual)
                           1722 LOAD_FAST                1 (rtn)
                           1724 LOAD_CONST              28 ('1,00')
                           1726 PRECALL                  2
                           1730 CALL                     2
                           1740 POP_TOP
                           1742 LOAD_CONST               0 (None)
@@ -5834,15 +6012,15 @@
                   '1,00'
                names      ('IS_FLOAT_IN_RANGE', 'assertEqual', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FLOAT_IN_RANGE'
-               firstlineno 458
+               firstlineno 477
                lnotab
                   0x020232012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c0132012c012e012c012e012c012e012c0132
                   012c0246012c0146012c024601
             code
                argcount  : 1
                nlocals   : 2
@@ -5944,560 +6122,560 @@
                   006400a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016400a6020000ab0200000000000000
                   0001007401000000000000000000006424ac25a6010000ab010000000000
                   000000a00400000000000000000000000000000000000000006426a60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c016427a6020000ab0200000000000000000100640053
                   00
-               499           0 RESUME                   0
+               518           0 RESUME                   0
                
-               501           2 PUSH_NULL
+               520           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               502          52 LOAD_FAST                0 (self)
+               521          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               503          96 PUSH_NULL
+               522          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               504         146 LOAD_FAST                0 (self)
+               523         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_GLOBAL              5 (NULL + decimal)
                            184 LOAD_ATTR                3 (Decimal)
                            194 LOAD_CONST               4 ('4')
                            196 PRECALL                  1
                            200 CALL                     1
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               505         230 PUSH_NULL
+               524         230 PUSH_NULL
                            232 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            244 LOAD_CONST               1 (1)
                            246 LOAD_CONST               2 (5)
                            248 PRECALL                  2
                            252 CALL                     2
                            262 LOAD_CONST               5 (4)
                            264 PRECALL                  1
                            268 CALL                     1
                            278 STORE_FAST               1 (rtn)
                
-               506         280 LOAD_FAST                0 (self)
+               525         280 LOAD_FAST                0 (self)
                            282 LOAD_METHOD              1 (assertEqual)
                            304 LOAD_FAST                1 (rtn)
                            306 LOAD_GLOBAL              5 (NULL + decimal)
                            318 LOAD_ATTR                3 (Decimal)
                            328 LOAD_CONST               4 ('4')
                            330 PRECALL                  1
                            334 CALL                     1
                            344 LOAD_CONST               0 (None)
                            346 BUILD_TUPLE              2
                            348 PRECALL                  2
                            352 CALL                     2
                            362 POP_TOP
                
-               507         364 PUSH_NULL
+               526         364 PUSH_NULL
                            366 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            378 LOAD_CONST               1 (1)
                            380 LOAD_CONST               2 (5)
                            382 PRECALL                  2
                            386 CALL                     2
                            396 LOAD_CONST               1 (1)
                            398 PRECALL                  1
                            402 CALL                     1
                            412 STORE_FAST               1 (rtn)
                
-               508         414 LOAD_FAST                0 (self)
+               527         414 LOAD_FAST                0 (self)
                            416 LOAD_METHOD              1 (assertEqual)
                            438 LOAD_FAST                1 (rtn)
                            440 LOAD_GLOBAL              5 (NULL + decimal)
                            452 LOAD_ATTR                3 (Decimal)
                            462 LOAD_CONST               6 ('1')
                            464 PRECALL                  1
                            468 CALL                     1
                            478 LOAD_CONST               0 (None)
                            480 BUILD_TUPLE              2
                            482 PRECALL                  2
                            486 CALL                     2
                            496 POP_TOP
                
-               509         498 PUSH_NULL
+               528         498 PUSH_NULL
                            500 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            512 LOAD_CONST               1 (1)
                            514 LOAD_CONST               2 (5)
                            516 PRECALL                  2
                            520 CALL                     2
                            530 LOAD_CONST               7 (5.25)
                            532 PRECALL                  1
                            536 CALL                     1
                            546 STORE_FAST               1 (rtn)
                
-               510         548 LOAD_FAST                0 (self)
+               529         548 LOAD_FAST                0 (self)
                            550 LOAD_METHOD              1 (assertEqual)
                            572 LOAD_FAST                1 (rtn)
                            574 LOAD_CONST               8 ((5.25, 'Enter a number between 1 and 5'))
                            576 PRECALL                  2
                            580 CALL                     2
                            590 POP_TOP
                
-               511         592 PUSH_NULL
+               530         592 PUSH_NULL
                            594 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            606 LOAD_CONST               7 (5.25)
                            608 LOAD_CONST               9 (6)
                            610 PRECALL                  2
                            614 CALL                     2
                            624 LOAD_CONST               7 (5.25)
                            626 PRECALL                  1
                            630 CALL                     1
                            640 STORE_FAST               1 (rtn)
                
-               512         642 LOAD_FAST                0 (self)
+               531         642 LOAD_FAST                0 (self)
                            644 LOAD_METHOD              1 (assertEqual)
                            666 LOAD_FAST                1 (rtn)
                            668 LOAD_GLOBAL              5 (NULL + decimal)
                            680 LOAD_ATTR                3 (Decimal)
                            690 LOAD_CONST              10 ('5.25')
                            692 PRECALL                  1
                            696 CALL                     1
                            706 LOAD_CONST               0 (None)
                            708 BUILD_TUPLE              2
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               513         726 PUSH_NULL
+               532         726 PUSH_NULL
                            728 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            740 LOAD_CONST               7 (5.25)
                            742 LOAD_CONST               9 (6)
                            744 PRECALL                  2
                            748 CALL                     2
                            758 LOAD_CONST              10 ('5.25')
                            760 PRECALL                  1
                            764 CALL                     1
                            774 STORE_FAST               1 (rtn)
                
-               514         776 LOAD_FAST                0 (self)
+               533         776 LOAD_FAST                0 (self)
                            778 LOAD_METHOD              1 (assertEqual)
                            800 LOAD_FAST                1 (rtn)
                            802 LOAD_GLOBAL              5 (NULL + decimal)
                            814 LOAD_ATTR                3 (Decimal)
                            824 LOAD_CONST              10 ('5.25')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 LOAD_CONST               0 (None)
                            842 BUILD_TUPLE              2
                            844 PRECALL                  2
                            848 CALL                     2
                            858 POP_TOP
                
-               515         860 PUSH_NULL
+               534         860 PUSH_NULL
                            862 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            874 LOAD_CONST               1 (1)
                            876 LOAD_CONST               2 (5)
                            878 PRECALL                  2
                            882 CALL                     2
                            892 LOAD_CONST              11 (6.0)
                            894 PRECALL                  1
                            898 CALL                     1
                            908 STORE_FAST               1 (rtn)
                
-               516         910 LOAD_FAST                0 (self)
+               535         910 LOAD_FAST                0 (self)
                            912 LOAD_METHOD              1 (assertEqual)
                            934 LOAD_FAST                1 (rtn)
                            936 LOAD_CONST              12 ((6.0, 'Enter a number between 1 and 5'))
                            938 PRECALL                  2
                            942 CALL                     2
                            952 POP_TOP
                
-               517         954 PUSH_NULL
+               536         954 PUSH_NULL
                            956 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            968 LOAD_CONST               1 (1)
                            970 LOAD_CONST               2 (5)
                            972 PRECALL                  2
                            976 CALL                     2
                            986 LOAD_CONST              13 (3.5)
                            988 PRECALL                  1
                            992 CALL                     1
                           1002 STORE_FAST               1 (rtn)
                
-               518        1004 LOAD_FAST                0 (self)
+               537        1004 LOAD_FAST                0 (self)
                           1006 LOAD_METHOD              1 (assertEqual)
                           1028 LOAD_FAST                1 (rtn)
                           1030 LOAD_GLOBAL              5 (NULL + decimal)
                           1042 LOAD_ATTR                3 (Decimal)
                           1052 LOAD_CONST              14 ('3.5')
                           1054 PRECALL                  1
                           1058 CALL                     1
                           1068 LOAD_CONST               0 (None)
                           1070 BUILD_TUPLE              2
                           1072 PRECALL                  2
                           1076 CALL                     2
                           1086 POP_TOP
                
-               519        1088 PUSH_NULL
+               538        1088 PUSH_NULL
                           1090 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1102 LOAD_CONST              15 (1.5)
                           1104 LOAD_CONST              16 (5.5)
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 LOAD_CONST              13 (3.5)
                           1122 PRECALL                  1
                           1126 CALL                     1
                           1136 STORE_FAST               1 (rtn)
                
-               520        1138 LOAD_FAST                0 (self)
+               539        1138 LOAD_FAST                0 (self)
                           1140 LOAD_METHOD              1 (assertEqual)
                           1162 LOAD_FAST                1 (rtn)
                           1164 LOAD_GLOBAL              5 (NULL + decimal)
                           1176 LOAD_ATTR                3 (Decimal)
                           1186 LOAD_CONST              14 ('3.5')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 LOAD_CONST               0 (None)
                           1204 BUILD_TUPLE              2
                           1206 PRECALL                  2
                           1210 CALL                     2
                           1220 POP_TOP
                
-               521        1222 PUSH_NULL
+               540        1222 PUSH_NULL
                           1224 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1236 LOAD_CONST              15 (1.5)
                           1238 LOAD_CONST              16 (5.5)
                           1240 PRECALL                  2
                           1244 CALL                     2
                           1254 LOAD_CONST              17 (6.5)
                           1256 PRECALL                  1
                           1260 CALL                     1
                           1270 STORE_FAST               1 (rtn)
                
-               522        1272 LOAD_FAST                0 (self)
+               541        1272 LOAD_FAST                0 (self)
                           1274 LOAD_METHOD              1 (assertEqual)
                           1296 LOAD_FAST                1 (rtn)
                           1298 LOAD_CONST              18 ((6.5, 'Enter a number between 1.5 and 5.5'))
                           1300 PRECALL                  2
                           1304 CALL                     2
                           1314 POP_TOP
                
-               523        1316 PUSH_NULL
+               542        1316 PUSH_NULL
                           1318 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1330 LOAD_CONST              15 (1.5)
                           1332 LOAD_CONST               0 (None)
                           1334 PRECALL                  2
                           1338 CALL                     2
                           1348 LOAD_CONST              17 (6.5)
                           1350 PRECALL                  1
                           1354 CALL                     1
                           1364 STORE_FAST               1 (rtn)
                
-               524        1366 LOAD_FAST                0 (self)
+               543        1366 LOAD_FAST                0 (self)
                           1368 LOAD_METHOD              1 (assertEqual)
                           1390 LOAD_FAST                1 (rtn)
                           1392 LOAD_GLOBAL              5 (NULL + decimal)
                           1404 LOAD_ATTR                3 (Decimal)
                           1414 LOAD_CONST              19 ('6.5')
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_CONST               0 (None)
                           1432 BUILD_TUPLE              2
                           1434 PRECALL                  2
                           1438 CALL                     2
                           1448 POP_TOP
                
-               525        1450 PUSH_NULL
+               544        1450 PUSH_NULL
                           1452 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1464 LOAD_CONST              15 (1.5)
                           1466 LOAD_CONST               0 (None)
                           1468 PRECALL                  2
                           1472 CALL                     2
                           1482 LOAD_CONST              20 (0.5)
                           1484 PRECALL                  1
                           1488 CALL                     1
                           1498 STORE_FAST               1 (rtn)
                
-               526        1500 LOAD_FAST                0 (self)
+               545        1500 LOAD_FAST                0 (self)
                           1502 LOAD_METHOD              1 (assertEqual)
                           1524 LOAD_FAST                1 (rtn)
                           1526 LOAD_CONST              21 ((0.5, 'Enter a number greater than or equal to 1.5'))
                           1528 PRECALL                  2
                           1532 CALL                     2
                           1542 POP_TOP
                
-               527        1544 PUSH_NULL
+               546        1544 PUSH_NULL
                           1546 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1558 LOAD_CONST               0 (None)
                           1560 LOAD_CONST              16 (5.5)
                           1562 PRECALL                  2
                           1566 CALL                     2
                           1576 LOAD_CONST              22 (4.5)
                           1578 PRECALL                  1
                           1582 CALL                     1
                           1592 STORE_FAST               1 (rtn)
                
-               528        1594 LOAD_FAST                0 (self)
+               547        1594 LOAD_FAST                0 (self)
                           1596 LOAD_METHOD              1 (assertEqual)
                           1618 LOAD_FAST                1 (rtn)
                           1620 LOAD_GLOBAL              5 (NULL + decimal)
                           1632 LOAD_ATTR                3 (Decimal)
                           1642 LOAD_CONST              23 ('4.5')
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_CONST               0 (None)
                           1660 BUILD_TUPLE              2
                           1662 PRECALL                  2
                           1666 CALL                     2
                           1676 POP_TOP
                
-               529        1678 PUSH_NULL
+               548        1678 PUSH_NULL
                           1680 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1692 LOAD_CONST               0 (None)
                           1694 LOAD_CONST              16 (5.5)
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 LOAD_CONST              17 (6.5)
                           1712 PRECALL                  1
                           1716 CALL                     1
                           1726 STORE_FAST               1 (rtn)
                
-               530        1728 LOAD_FAST                0 (self)
+               549        1728 LOAD_FAST                0 (self)
                           1730 LOAD_METHOD              1 (assertEqual)
                           1752 LOAD_FAST                1 (rtn)
                           1754 LOAD_CONST              24 ((6.5, 'Enter a number less than or equal to 5.5'))
                           1756 PRECALL                  2
                           1760 CALL                     2
                           1770 POP_TOP
                
-               531        1772 PUSH_NULL
+               550        1772 PUSH_NULL
                           1774 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1786 PRECALL                  0
                           1790 CALL                     0
                           1800 LOAD_CONST              17 (6.5)
                           1802 PRECALL                  1
                           1806 CALL                     1
                           1816 STORE_FAST               1 (rtn)
                
-               532        1818 LOAD_FAST                0 (self)
+               551        1818 LOAD_FAST                0 (self)
                           1820 LOAD_METHOD              1 (assertEqual)
                           1842 LOAD_FAST                1 (rtn)
                           1844 LOAD_GLOBAL              5 (NULL + decimal)
                           1856 LOAD_ATTR                3 (Decimal)
                           1866 LOAD_CONST              19 ('6.5')
                           1868 PRECALL                  1
                           1872 CALL                     1
                           1882 LOAD_CONST               0 (None)
                           1884 BUILD_TUPLE              2
                           1886 PRECALL                  2
                           1890 CALL                     2
                           1900 POP_TOP
                
-               533        1902 PUSH_NULL
+               552        1902 PUSH_NULL
                           1904 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1916 LOAD_CONST              25 (0)
                           1918 LOAD_CONST              26 (99)
                           1920 PRECALL                  2
                           1924 CALL                     2
                           1934 LOAD_CONST              27 (123.123)
                           1936 PRECALL                  1
                           1940 CALL                     1
                           1950 STORE_FAST               1 (rtn)
                
-               534        1952 LOAD_FAST                0 (self)
+               553        1952 LOAD_FAST                0 (self)
                           1954 LOAD_METHOD              1 (assertEqual)
                           1976 LOAD_FAST                1 (rtn)
                           1978 LOAD_CONST              28 ((123.123, 'Enter a number between 0 and 99'))
                           1980 PRECALL                  2
                           1984 CALL                     2
                           1994 POP_TOP
                
-               535        1996 PUSH_NULL
+               554        1996 PUSH_NULL
                           1998 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2010 LOAD_CONST              25 (0)
                           2012 LOAD_CONST              26 (99)
                           2014 PRECALL                  2
                           2018 CALL                     2
                           2028 LOAD_CONST              29 ('123.123')
                           2030 PRECALL                  1
                           2034 CALL                     1
                           2044 STORE_FAST               1 (rtn)
                
-               536        2046 LOAD_FAST                0 (self)
+               555        2046 LOAD_FAST                0 (self)
                           2048 LOAD_METHOD              1 (assertEqual)
                           2070 LOAD_FAST                1 (rtn)
                           2072 LOAD_CONST              30 (('123.123', 'Enter a number between 0 and 99'))
                           2074 PRECALL                  2
                           2078 CALL                     2
                           2088 POP_TOP
                
-               537        2090 PUSH_NULL
+               556        2090 PUSH_NULL
                           2092 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2104 LOAD_CONST              25 (0)
                           2106 LOAD_CONST              26 (99)
                           2108 PRECALL                  2
                           2112 CALL                     2
                           2122 LOAD_CONST              31 ('12.34')
                           2124 PRECALL                  1
                           2128 CALL                     1
                           2138 STORE_FAST               1 (rtn)
                
-               538        2140 LOAD_FAST                0 (self)
+               557        2140 LOAD_FAST                0 (self)
                           2142 LOAD_METHOD              1 (assertEqual)
                           2164 LOAD_FAST                1 (rtn)
                           2166 LOAD_GLOBAL              5 (NULL + decimal)
                           2178 LOAD_ATTR                3 (Decimal)
                           2188 LOAD_CONST              31 ('12.34')
                           2190 PRECALL                  1
                           2194 CALL                     1
                           2204 LOAD_CONST               0 (None)
                           2206 BUILD_TUPLE              2
                           2208 PRECALL                  2
                           2212 CALL                     2
                           2222 POP_TOP
                
-               539        2224 PUSH_NULL
+               558        2224 PUSH_NULL
                           2226 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2238 PRECALL                  0
                           2242 CALL                     0
                           2252 LOAD_CONST              32 ('abc')
                           2254 PRECALL                  1
                           2258 CALL                     1
                           2268 STORE_FAST               1 (rtn)
                
-               540        2270 LOAD_FAST                0 (self)
+               559        2270 LOAD_FAST                0 (self)
                           2272 LOAD_METHOD              1 (assertEqual)
                           2294 LOAD_FAST                1 (rtn)
                           2296 LOAD_CONST              33 (('abc', 'Enter a number'))
                           2298 PRECALL                  2
                           2302 CALL                     2
                           2312 POP_TOP
                
-               541        2314 PUSH_NULL
+               560        2314 PUSH_NULL
                           2316 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2328 PRECALL                  0
                           2332 CALL                     0
                           2342 LOAD_CONST              34 ('6,5')
                           2344 PRECALL                  1
                           2348 CALL                     1
                           2358 STORE_FAST               1 (rtn)
                
-               542        2360 LOAD_FAST                0 (self)
+               561        2360 LOAD_FAST                0 (self)
                           2362 LOAD_METHOD              1 (assertEqual)
                           2384 LOAD_FAST                1 (rtn)
                           2386 LOAD_CONST              35 (('6,5', 'Enter a number'))
                           2388 PRECALL                  2
                           2392 CALL                     2
                           2402 POP_TOP
                
-               543        2404 PUSH_NULL
+               562        2404 PUSH_NULL
                           2406 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2418 LOAD_CONST              36 (',')
                           2420 KW_NAMES                37
                           2422 PRECALL                  1
                           2426 CALL                     1
                           2436 LOAD_CONST              19 ('6.5')
                           2438 PRECALL                  1
                           2442 CALL                     1
                           2452 STORE_FAST               1 (rtn)
                
-               544        2454 LOAD_FAST                0 (self)
+               563        2454 LOAD_FAST                0 (self)
                           2456 LOAD_METHOD              1 (assertEqual)
                           2478 LOAD_FAST                1 (rtn)
                           2480 LOAD_GLOBAL              5 (NULL + decimal)
                           2492 LOAD_ATTR                3 (Decimal)
                           2502 LOAD_CONST              19 ('6.5')
                           2504 PRECALL                  1
                           2508 CALL                     1
                           2518 LOAD_CONST               0 (None)
                           2520 BUILD_TUPLE              2
                           2522 PRECALL                  2
                           2526 CALL                     2
                           2536 POP_TOP
                
-               545        2538 PUSH_NULL
+               564        2538 PUSH_NULL
                           2540 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2552 LOAD_CONST               1 (1)
                           2554 LOAD_CONST               2 (5)
                           2556 PRECALL                  2
                           2560 CALL                     2
                           2570 LOAD_GLOBAL              5 (NULL + decimal)
                           2582 LOAD_ATTR                3 (Decimal)
                           2592 LOAD_CONST               4 ('4')
                           2594 PRECALL                  1
                           2598 CALL                     1
                           2608 PRECALL                  1
                           2612 CALL                     1
                           2622 STORE_FAST               1 (rtn)
                
-               546        2624 LOAD_FAST                0 (self)
+               565        2624 LOAD_FAST                0 (self)
                           2626 LOAD_METHOD              1 (assertEqual)
                           2648 LOAD_FAST                1 (rtn)
                           2650 LOAD_GLOBAL              5 (NULL + decimal)
                           2662 LOAD_ATTR                3 (Decimal)
                           2672 LOAD_CONST               4 ('4')
                           2674 PRECALL                  1
                           2678 CALL                     1
                           2688 LOAD_CONST               0 (None)
                           2690 BUILD_TUPLE              2
                           2692 PRECALL                  2
                           2696 CALL                     2
                           2706 POP_TOP
                
-               548        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               567        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2720 LOAD_CONST              36 (',')
                           2722 KW_NAMES                37
                           2724 PRECALL                  1
                           2728 CALL                     1
                           2738 LOAD_METHOD              4 (formatter)
                           2760 LOAD_CONST               0 (None)
                           2762 PRECALL                  1
                           2766 CALL                     1
                           2776 STORE_FAST               1 (rtn)
                
-               549        2778 LOAD_FAST                0 (self)
+               568        2778 LOAD_FAST                0 (self)
                           2780 LOAD_METHOD              1 (assertEqual)
                           2802 LOAD_FAST                1 (rtn)
                           2804 LOAD_CONST               0 (None)
                           2806 PRECALL                  2
                           2810 CALL                     2
                           2820 POP_TOP
                
-               550        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               569        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2834 LOAD_CONST              36 (',')
                           2836 KW_NAMES                37
                           2838 PRECALL                  1
                           2842 CALL                     1
                           2852 LOAD_METHOD              4 (formatter)
                           2874 LOAD_CONST              38 (0.25)
                           2876 PRECALL                  1
                           2880 CALL                     1
                           2890 STORE_FAST               1 (rtn)
                
-               551        2892 LOAD_FAST                0 (self)
+               570        2892 LOAD_FAST                0 (self)
                           2894 LOAD_METHOD              1 (assertEqual)
                           2916 LOAD_FAST                1 (rtn)
                           2918 LOAD_CONST              39 ('0,25')
                           2920 PRECALL                  2
                           2924 CALL                     2
                           2934 POP_TOP
                           2936 LOAD_CONST               0 (None)
@@ -6545,15 +6723,15 @@
                   '0,25'
                names      ('IS_DECIMAL_IN_RANGE', 'assertEqual', 'decimal', 'Decimal', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DECIMAL_IN_RANGE'
-               firstlineno 499
+               firstlineno 518
                lnotab
                   0x020232012c0132015401320154013201540132012c0132015401320154
                   0132012c01320154013201540132012c013201540132012c013201540132
                   012c012e01540132012c0132012c01320154012e012c012e012c01320154
                   015601540246012c014601
             code
                argcount  : 1
@@ -6597,238 +6775,238 @@
                   020000000000000000010002007401000000000000000000006416ac14a6
                   010000ab0100000000000000006417a6010000ab0100000000000000007d
                   017c00a00100000000000000000000000000000000000000007c016418a6
                   020000ab0200000000000000000100020074010000000000000000000064
                   13ac14a6010000ab0100000000000000006419a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   01641aa6020000ab020000000000000000010064005300
-               553           0 RESUME                   0
+               572           0 RESUME                   0
                
-               554           2 PUSH_NULL
+               573           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 (1)
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               555          48 LOAD_FAST                0 (self)
+               574          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 ((1, None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               556          92 PUSH_NULL
+               575          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (0)
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               557         138 LOAD_FAST                0 (self)
+               576         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((0, None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               558         182 PUSH_NULL
+               577         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('x')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               559         228 LOAD_FAST                0 (self)
+               578         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('x', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               560         272 PUSH_NULL
+               579         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 (' x ')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               561         318 LOAD_FAST                0 (self)
+               580         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 ((' x ', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               562         362 PUSH_NULL
+               581         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               0 (None)
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               563         408 LOAD_FAST                0 (self)
+               582         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               9 ((None, 'Enter a value'))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               564         452 PUSH_NULL
+               583         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              10 ('')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               565         498 LOAD_FAST                0 (self)
+               584         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              11 (('', 'Enter a value'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               566         542 PUSH_NULL
+               585         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              12 (b'')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               567         588 LOAD_FAST                0 (self)
+               586         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              13 ((b'', 'Enter a value'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               568         632 PUSH_NULL
+               587         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              14 ('  ')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               569         678 LOAD_FAST                0 (self)
+               588         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              15 (('  ', 'Enter a value'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               570         722 PUSH_NULL
+               589         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              16 (' \n\t')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               571         768 LOAD_FAST                0 (self)
+               590         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              17 ((' \n\t', 'Enter a value'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               572         812 PUSH_NULL
+               591         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 BUILD_LIST               0
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               573         858 LOAD_FAST                0 (self)
+               592         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 BUILD_LIST               0
                            886 LOAD_CONST              18 ('Enter a value')
                            888 BUILD_TUPLE              2
                            890 PRECALL                  2
                            894 CALL                     2
                            904 POP_TOP
                
-               574         906 PUSH_NULL
+               593         906 PUSH_NULL
                            908 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            920 LOAD_CONST              19 ('def')
                            922 KW_NAMES                20
                            924 PRECALL                  1
                            928 CALL                     1
                            938 LOAD_CONST              19 ('def')
                            940 PRECALL                  1
                            944 CALL                     1
                            954 STORE_FAST               1 (rtn)
                
-               575         956 LOAD_FAST                0 (self)
+               594         956 LOAD_FAST                0 (self)
                            958 LOAD_METHOD              1 (assertEqual)
                            980 LOAD_FAST                1 (rtn)
                            982 LOAD_CONST              21 (('def', 'Enter a value'))
                            984 PRECALL                  2
                            988 CALL                     2
                            998 POP_TOP
                
-               576        1000 PUSH_NULL
+               595        1000 PUSH_NULL
                           1002 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1014 LOAD_CONST              22 ('de[fg]')
                           1016 KW_NAMES                20
                           1018 PRECALL                  1
                           1022 CALL                     1
                           1032 LOAD_CONST              23 ('deg')
                           1034 PRECALL                  1
                           1038 CALL                     1
                           1048 STORE_FAST               1 (rtn)
                
-               577        1050 LOAD_FAST                0 (self)
+               596        1050 LOAD_FAST                0 (self)
                           1052 LOAD_METHOD              1 (assertEqual)
                           1074 LOAD_FAST                1 (rtn)
                           1076 LOAD_CONST              24 (('deg', 'Enter a value'))
                           1078 PRECALL                  2
                           1082 CALL                     2
                           1092 POP_TOP
                
-               578        1094 PUSH_NULL
+               597        1094 PUSH_NULL
                           1096 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1108 LOAD_CONST              19 ('def')
                           1110 KW_NAMES                20
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 LOAD_CONST              25 ('abc')
                           1128 PRECALL                  1
                           1132 CALL                     1
                           1142 STORE_FAST               1 (rtn)
                
-               579        1144 LOAD_FAST                0 (self)
+               598        1144 LOAD_FAST                0 (self)
                           1146 LOAD_METHOD              1 (assertEqual)
                           1168 LOAD_FAST                1 (rtn)
                           1170 LOAD_CONST              26 (('abc', None))
                           1172 PRECALL                  2
                           1176 CALL                     2
                           1186 POP_TOP
                           1188 LOAD_CONST               0 (None)
@@ -6863,15 +7041,15 @@
                   ('abc', None)
                names      ('IS_NOT_EMPTY', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_EMPTY'
-               firstlineno 553
+               firstlineno 572
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e01300132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
@@ -6886,77 +7064,77 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006407a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016408a6020000ab0200000000000000
                   00010064005300
-               581           0 RESUME                   0
+               600           0 RESUME                   0
                
-               582           2 PUSH_NULL
+               601           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('1')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               583          48 LOAD_FAST                0 (self)
+               602          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('1', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               584          92 PUSH_NULL
+               603          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               585         138 LOAD_FAST                0 (self)
+               604         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               586         182 PUSH_NULL
+               605         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('A_a')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               587         228 LOAD_FAST                0 (self)
+               606         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('A_a', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               588         272 PUSH_NULL
+               607         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('!')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               589         318 LOAD_FAST                0 (self)
+               608         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('!', 'Enter only letters, numbers, and underscore'))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                            362 LOAD_CONST               0 (None)
@@ -6973,15 +7151,15 @@
                   ('!', 'Enter only letters, numbers, and underscore')
                names      ('IS_ALPHANUMERIC', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_ALPHANUMERIC'
-               firstlineno 581
+               firstlineno 600
                lnotab 0x02012e012c012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -7081,584 +7259,584 @@
                   01643fa6020000ab02000000000000000001000200740100000000000000
                   0000006440ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016443a6020000ab020000000000000000010002007401000000
                   00000000000000a6000000ab0000000000000000006444a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016445a6020000ab020000000000000000010064005300
-               591           0 RESUME                   0
+               610           0 RESUME                   0
                
-               592           2 PUSH_NULL
+               611           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('a@b.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               593          48 LOAD_FAST                0 (self)
+               612          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('a@b.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               594          92 PUSH_NULL
+               613          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('abc@def.com')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               595         138 LOAD_FAST                0 (self)
+               614         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('abc@def.com', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               596         182 PUSH_NULL
+               615         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('abc@3def.com')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               597         228 LOAD_FAST                0 (self)
+               616         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('abc@3def.com', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               598         272 PUSH_NULL
+               617         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('abc@def.us')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               599         318 LOAD_FAST                0 (self)
+               618         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('abc@def.us', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               600         362 PUSH_NULL
+               619         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               9 ('abc@d_-f.us')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               601         408 LOAD_FAST                0 (self)
+               620         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST              10 (('abc@d_-f.us', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               602         452 PUSH_NULL
+               621         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              11 ('@def.com')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               603         498 LOAD_FAST                0 (self)
+               622         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              12 (('@def.com', 'Enter a valid email address'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               604         542 PUSH_NULL
+               623         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              13 ('"abc@def".com')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               605         588 LOAD_FAST                0 (self)
+               624         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              14 (('"abc@def".com', 'Enter a valid email address'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               606         632 PUSH_NULL
+               625         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              15 ('abc+def.com')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               607         678 LOAD_FAST                0 (self)
+               626         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              16 (('abc+def.com', 'Enter a valid email address'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               608         722 PUSH_NULL
+               627         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              17 ('abc@def.x')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               609         768 LOAD_FAST                0 (self)
+               628         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              18 (('abc@def.x', 'Enter a valid email address'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               610         812 PUSH_NULL
+               629         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              19 ('abc@def.12')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               611         858 LOAD_FAST                0 (self)
+               630         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              20 (('abc@def.12', 'Enter a valid email address'))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               612         902 PUSH_NULL
+               631         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              21 ('abc@def..com')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               613         948 LOAD_FAST                0 (self)
+               632         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              22 (('abc@def..com', 'Enter a valid email address'))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               614         992 PUSH_NULL
+               633         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1006 PRECALL                  0
                           1010 CALL                     0
                           1020 LOAD_CONST              23 ('abc@.def.com')
                           1022 PRECALL                  1
                           1026 CALL                     1
                           1036 STORE_FAST               1 (rtn)
                
-               615        1038 LOAD_FAST                0 (self)
+               634        1038 LOAD_FAST                0 (self)
                           1040 LOAD_METHOD              1 (assertEqual)
                           1062 LOAD_FAST                1 (rtn)
                           1064 LOAD_CONST              24 (('abc@.def.com', 'Enter a valid email address'))
                           1066 PRECALL                  2
                           1070 CALL                     2
                           1080 POP_TOP
                
-               616        1082 PUSH_NULL
+               635        1082 PUSH_NULL
                           1084 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1096 PRECALL                  0
                           1100 CALL                     0
                           1110 LOAD_CONST              25 ('abc@def.c_m')
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 STORE_FAST               1 (rtn)
                
-               617        1128 LOAD_FAST                0 (self)
+               636        1128 LOAD_FAST                0 (self)
                           1130 LOAD_METHOD              1 (assertEqual)
                           1152 LOAD_FAST                1 (rtn)
                           1154 LOAD_CONST              26 (('abc@def.c_m', 'Enter a valid email address'))
                           1156 PRECALL                  2
                           1160 CALL                     2
                           1170 POP_TOP
                
-               618        1172 PUSH_NULL
+               637        1172 PUSH_NULL
                           1174 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1186 PRECALL                  0
                           1190 CALL                     0
                           1200 LOAD_CONST              27 ('NotAnEmail')
                           1202 PRECALL                  1
                           1206 CALL                     1
                           1216 STORE_FAST               1 (rtn)
                
-               619        1218 LOAD_FAST                0 (self)
+               638        1218 LOAD_FAST                0 (self)
                           1220 LOAD_METHOD              1 (assertEqual)
                           1242 LOAD_FAST                1 (rtn)
                           1244 LOAD_CONST              28 (('NotAnEmail', 'Enter a valid email address'))
                           1246 PRECALL                  2
                           1250 CALL                     2
                           1260 POP_TOP
                
-               620        1262 PUSH_NULL
+               639        1262 PUSH_NULL
                           1264 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1276 PRECALL                  0
                           1280 CALL                     0
                           1290 LOAD_CONST              29 ('abc@NotAnEmail')
                           1292 PRECALL                  1
                           1296 CALL                     1
                           1306 STORE_FAST               1 (rtn)
                
-               621        1308 LOAD_FAST                0 (self)
+               640        1308 LOAD_FAST                0 (self)
                           1310 LOAD_METHOD              1 (assertEqual)
                           1332 LOAD_FAST                1 (rtn)
                           1334 LOAD_CONST              30 (('abc@NotAnEmail', 'Enter a valid email address'))
                           1336 PRECALL                  2
                           1340 CALL                     2
                           1350 POP_TOP
                
-               622        1352 PUSH_NULL
+               641        1352 PUSH_NULL
                           1354 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1366 PRECALL                  0
                           1370 CALL                     0
                           1380 LOAD_CONST              31 ('customer/department@example.com')
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 STORE_FAST               1 (rtn)
                
-               623        1398 LOAD_FAST                0 (self)
+               642        1398 LOAD_FAST                0 (self)
                           1400 LOAD_METHOD              1 (assertEqual)
                           1422 LOAD_FAST                1 (rtn)
                           1424 LOAD_CONST              32 (('customer/department@example.com', None))
                           1426 PRECALL                  2
                           1430 CALL                     2
                           1440 POP_TOP
                
-               624        1442 PUSH_NULL
+               643        1442 PUSH_NULL
                           1444 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1456 PRECALL                  0
                           1460 CALL                     0
                           1470 LOAD_CONST              33 ('$A12345@example.com')
                           1472 PRECALL                  1
                           1476 CALL                     1
                           1486 STORE_FAST               1 (rtn)
                
-               625        1488 LOAD_FAST                0 (self)
+               644        1488 LOAD_FAST                0 (self)
                           1490 LOAD_METHOD              1 (assertEqual)
                           1512 LOAD_FAST                1 (rtn)
                           1514 LOAD_CONST              34 (('$A12345@example.com', None))
                           1516 PRECALL                  2
                           1520 CALL                     2
                           1530 POP_TOP
                
-               626        1532 PUSH_NULL
+               645        1532 PUSH_NULL
                           1534 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1546 PRECALL                  0
                           1550 CALL                     0
                           1560 LOAD_CONST              35 ('!def!xyz%abc@example.com')
                           1562 PRECALL                  1
                           1566 CALL                     1
                           1576 STORE_FAST               1 (rtn)
                
-               627        1578 LOAD_FAST                0 (self)
+               646        1578 LOAD_FAST                0 (self)
                           1580 LOAD_METHOD              1 (assertEqual)
                           1602 LOAD_FAST                1 (rtn)
                           1604 LOAD_CONST              36 (('!def!xyz%abc@example.com', None))
                           1606 PRECALL                  2
                           1610 CALL                     2
                           1620 POP_TOP
                
-               628        1622 PUSH_NULL
+               647        1622 PUSH_NULL
                           1624 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1636 PRECALL                  0
                           1640 CALL                     0
                           1650 LOAD_CONST              37 ('_Yosemite.Sam@example.com')
                           1652 PRECALL                  1
                           1656 CALL                     1
                           1666 STORE_FAST               1 (rtn)
                
-               629        1668 LOAD_FAST                0 (self)
+               648        1668 LOAD_FAST                0 (self)
                           1670 LOAD_METHOD              1 (assertEqual)
                           1692 LOAD_FAST                1 (rtn)
                           1694 LOAD_CONST              38 (('_Yosemite.Sam@example.com', None))
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 POP_TOP
                
-               630        1712 PUSH_NULL
+               649        1712 PUSH_NULL
                           1714 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1726 PRECALL                  0
                           1730 CALL                     0
                           1740 LOAD_CONST              39 ('~@example.com')
                           1742 PRECALL                  1
                           1746 CALL                     1
                           1756 STORE_FAST               1 (rtn)
                
-               631        1758 LOAD_FAST                0 (self)
+               650        1758 LOAD_FAST                0 (self)
                           1760 LOAD_METHOD              1 (assertEqual)
                           1782 LOAD_FAST                1 (rtn)
                           1784 LOAD_CONST              40 (('~@example.com', None))
                           1786 PRECALL                  2
                           1790 CALL                     2
                           1800 POP_TOP
                
-               632        1802 PUSH_NULL
+               651        1802 PUSH_NULL
                           1804 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1816 PRECALL                  0
                           1820 CALL                     0
                           1830 LOAD_CONST              41 ('.wooly@example.com')
                           1832 PRECALL                  1
                           1836 CALL                     1
                           1846 STORE_FAST               1 (rtn)
                
-               633        1848 LOAD_FAST                0 (self)
+               652        1848 LOAD_FAST                0 (self)
                           1850 LOAD_METHOD              1 (assertEqual)
                           1872 LOAD_FAST                1 (rtn)
                           1874 LOAD_CONST              42 (('.wooly@example.com', 'Enter a valid email address'))
                           1876 PRECALL                  2
                           1880 CALL                     2
                           1890 POP_TOP
                
-               634        1892 PUSH_NULL
+               653        1892 PUSH_NULL
                           1894 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1906 PRECALL                  0
                           1910 CALL                     0
                           1920 LOAD_CONST              43 ('wo..oly@example.com')
                           1922 PRECALL                  1
                           1926 CALL                     1
                           1936 STORE_FAST               1 (rtn)
                
-               635        1938 LOAD_FAST                0 (self)
+               654        1938 LOAD_FAST                0 (self)
                           1940 LOAD_METHOD              1 (assertEqual)
                           1962 LOAD_FAST                1 (rtn)
                           1964 LOAD_CONST              44 (('wo..oly@example.com', 'Enter a valid email address'))
                           1966 PRECALL                  2
                           1970 CALL                     2
                           1980 POP_TOP
                
-               636        1982 PUSH_NULL
+               655        1982 PUSH_NULL
                           1984 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1996 PRECALL                  0
                           2000 CALL                     0
                           2010 LOAD_CONST              45 ('pootietang.@example.com')
                           2012 PRECALL                  1
                           2016 CALL                     1
                           2026 STORE_FAST               1 (rtn)
                
-               637        2028 LOAD_FAST                0 (self)
+               656        2028 LOAD_FAST                0 (self)
                           2030 LOAD_METHOD              1 (assertEqual)
                
-               638        2052 LOAD_FAST                1 (rtn)
+               657        2052 LOAD_FAST                1 (rtn)
                           2054 LOAD_CONST              46 (('pootietang.@example.com', 'Enter a valid email address'))
                
-               637        2056 PRECALL                  2
+               656        2056 PRECALL                  2
                           2060 CALL                     2
                           2070 POP_TOP
                
-               640        2072 PUSH_NULL
+               659        2072 PUSH_NULL
                           2074 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2086 PRECALL                  0
                           2090 CALL                     0
                           2100 LOAD_CONST              47 ('.@example.com')
                           2102 PRECALL                  1
                           2106 CALL                     1
                           2116 STORE_FAST               1 (rtn)
                
-               641        2118 LOAD_FAST                0 (self)
+               660        2118 LOAD_FAST                0 (self)
                           2120 LOAD_METHOD              1 (assertEqual)
                           2142 LOAD_FAST                1 (rtn)
                           2144 LOAD_CONST              48 (('.@example.com', 'Enter a valid email address'))
                           2146 PRECALL                  2
                           2150 CALL                     2
                           2160 POP_TOP
                
-               642        2162 PUSH_NULL
+               661        2162 PUSH_NULL
                           2164 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2176 PRECALL                  0
                           2180 CALL                     0
                           2190 LOAD_CONST              49 ('Ima.Fool@example.com')
                           2192 PRECALL                  1
                           2196 CALL                     1
                           2206 STORE_FAST               1 (rtn)
                
-               643        2208 LOAD_FAST                0 (self)
+               662        2208 LOAD_FAST                0 (self)
                           2210 LOAD_METHOD              1 (assertEqual)
                           2232 LOAD_FAST                1 (rtn)
                           2234 LOAD_CONST              50 (('Ima.Fool@example.com', None))
                           2236 PRECALL                  2
                           2240 CALL                     2
                           2250 POP_TOP
                
-               644        2252 PUSH_NULL
+               663        2252 PUSH_NULL
                           2254 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2266 PRECALL                  0
                           2270 CALL                     0
                           2280 LOAD_CONST              51 ('Ima Fool@example.com')
                           2282 PRECALL                  1
                           2286 CALL                     1
                           2296 STORE_FAST               1 (rtn)
                
-               645        2298 LOAD_FAST                0 (self)
+               664        2298 LOAD_FAST                0 (self)
                           2300 LOAD_METHOD              1 (assertEqual)
                           2322 LOAD_FAST                1 (rtn)
                           2324 LOAD_CONST              52 (('Ima Fool@example.com', 'Enter a valid email address'))
                           2326 PRECALL                  2
                           2330 CALL                     2
                           2340 POP_TOP
                
-               646        2342 PUSH_NULL
+               665        2342 PUSH_NULL
                           2344 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2356 PRECALL                  0
                           2360 CALL                     0
                           2370 LOAD_CONST              53 ('localguy@localhost')
                           2372 PRECALL                  1
                           2376 CALL                     1
                           2386 STORE_FAST               1 (rtn)
                
-               647        2388 LOAD_FAST                0 (self)
+               666        2388 LOAD_FAST                0 (self)
                           2390 LOAD_METHOD              1 (assertEqual)
                           2412 LOAD_FAST                1 (rtn)
                           2414 LOAD_CONST              54 (('localguy@localhost', None))
                           2416 PRECALL                  2
                           2420 CALL                     2
                           2430 POP_TOP
                
-               649        2432 PUSH_NULL
+               668        2432 PUSH_NULL
                           2434 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2446 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2448 KW_NAMES                56
                           2450 PRECALL                  1
                           2454 CALL                     1
                
-               650        2464 LOAD_CONST              53 ('localguy@localhost')
+               669        2464 LOAD_CONST              53 ('localguy@localhost')
                
-               649        2466 PRECALL                  1
+               668        2466 PRECALL                  1
                           2470 CALL                     1
                           2480 STORE_FAST               1 (rtn)
                
-               652        2482 LOAD_FAST                0 (self)
+               671        2482 LOAD_FAST                0 (self)
                           2484 LOAD_METHOD              1 (assertEqual)
                           2506 LOAD_FAST                1 (rtn)
                           2508 LOAD_CONST              54 (('localguy@localhost', None))
                           2510 PRECALL                  2
                           2514 CALL                     2
                           2524 POP_TOP
                
-               653        2526 PUSH_NULL
+               672        2526 PUSH_NULL
                           2528 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2540 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2542 KW_NAMES                56
                           2544 PRECALL                  1
                           2548 CALL                     1
                           2558 LOAD_CONST              57 ('abc@example.com')
                           2560 PRECALL                  1
                           2564 CALL                     1
                           2574 STORE_FAST               1 (rtn)
                
-               654        2576 LOAD_FAST                0 (self)
+               673        2576 LOAD_FAST                0 (self)
                           2578 LOAD_METHOD              1 (assertEqual)
                           2600 LOAD_FAST                1 (rtn)
                           2602 LOAD_CONST              58 (('abc@example.com', 'Enter a valid email address'))
                           2604 PRECALL                  2
                           2608 CALL                     2
                           2618 POP_TOP
                
-               656        2620 PUSH_NULL
+               675        2620 PUSH_NULL
                           2622 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2634 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2636 KW_NAMES                60
                           2638 PRECALL                  1
                           2642 CALL                     1
                           2652 LOAD_CONST              53 ('localguy@localhost')
                           2654 PRECALL                  1
                           2658 CALL                     1
                           2668 STORE_FAST               1 (rtn)
                
-               657        2670 LOAD_FAST                0 (self)
+               676        2670 LOAD_FAST                0 (self)
                           2672 LOAD_METHOD              1 (assertEqual)
                           2694 LOAD_FAST                1 (rtn)
                           2696 LOAD_CONST              61 (('localguy@localhost', 'Enter a valid email address'))
                           2698 PRECALL                  2
                           2702 CALL                     2
                           2712 POP_TOP
                
-               658        2714 PUSH_NULL
+               677        2714 PUSH_NULL
                           2716 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2728 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2730 KW_NAMES                60
                           2732 PRECALL                  1
                           2736 CALL                     1
                           2746 LOAD_CONST              62 ('localguy@example.edu')
                           2748 PRECALL                  1
                           2752 CALL                     1
                           2762 STORE_FAST               1 (rtn)
                
-               659        2764 LOAD_FAST                0 (self)
+               678        2764 LOAD_FAST                0 (self)
                           2766 LOAD_METHOD              1 (assertEqual)
                           2788 LOAD_FAST                1 (rtn)
                           2790 LOAD_CONST              63 (('localguy@example.edu', None))
                           2792 PRECALL                  2
                           2796 CALL                     2
                           2806 POP_TOP
                
-               661        2808 PUSH_NULL
+               680        2808 PUSH_NULL
                           2810 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2822 LOAD_CONST              64 ('oops')
                           2824 KW_NAMES                65
                           2826 PRECALL                  1
                           2830 CALL                     1
                           2840 LOAD_CONST              66 (42)
                           2842 PRECALL                  1
                           2846 CALL                     1
                           2856 STORE_FAST               1 (rtn)
                
-               662        2858 LOAD_FAST                0 (self)
+               681        2858 LOAD_FAST                0 (self)
                           2860 LOAD_METHOD              1 (assertEqual)
                           2882 LOAD_FAST                1 (rtn)
                           2884 LOAD_CONST              67 ((42, 'oops'))
                           2886 PRECALL                  2
                           2890 CALL                     2
                           2900 POP_TOP
                
-               665        2902 PUSH_NULL
+               684        2902 PUSH_NULL
                           2904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2916 PRECALL                  0
                           2920 CALL                     0
                           2930 LOAD_CONST              68 ('web2py@Alliancefranaise.nu')
                           2932 PRECALL                  1
                           2936 CALL                     1
                           2946 STORE_FAST               1 (rtn)
                
-               666        2948 LOAD_FAST                0 (self)
+               685        2948 LOAD_FAST                0 (self)
                           2950 LOAD_METHOD              1 (assertEqual)
                           2972 LOAD_FAST                1 (rtn)
                           2974 LOAD_CONST              69 (('web2py@Alliancefranaise.nu', None))
                           2976 PRECALL                  2
                           2980 CALL                     2
                           2990 POP_TOP
                           2992 LOAD_CONST               0 (None)
@@ -7736,15 +7914,15 @@
                   ('web2py@Alliancefranaise.nu', None)
                names      ('IS_EMAIL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMAIL'
-               firstlineno 591
+               firstlineno 610
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c012e012c012e012c012e012c012e
                   012c012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e01180104ff10032e012c012e012c012e012c012e012c02200102ff10
                   032c0132012c0232012c0132012c0232012c032e01
             code
@@ -7776,144 +7954,144 @@
                   0000000000000000000000000000007c01a6010000ab0100000000000000
                   00a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026407a6020000ab02000000000000000001
                   00740100000000000000000000a6000000ab000000000000000000a00400
                   00000000000000000000000000000000000000640864096702a6010000ab
                   0100000000000000007d027c00a002000000000000000000000000000000
                   00000000007c02640aa6020000ab020000000000000000010064005300
-               668           0 RESUME                   0
+               687           0 RESUME                   0
                
-               669           2 LOAD_CONST               1 ('localguy@localhost')
+               688           2 LOAD_CONST               1 ('localguy@localhost')
                              4 LOAD_CONST               2 ('_Yosemite.Sam@example.com')
                              6 BUILD_LIST               2
                              8 STORE_FAST               1 (emails)
                
-               670          10 PUSH_NULL
+               689          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                             24 PRECALL                  0
                             28 CALL                     0
                             38 LOAD_CONST               3 (',')
                             40 LOAD_METHOD              1 (join)
                             62 LOAD_FAST                1 (emails)
                             64 PRECALL                  1
                             68 CALL                     1
                             78 PRECALL                  1
                             82 CALL                     1
                             92 STORE_FAST               2 (rtn)
                
-               671          94 LOAD_FAST                0 (self)
+               690          94 LOAD_FAST                0 (self)
                             96 LOAD_METHOD              2 (assertEqual)
                            118 LOAD_FAST                2 (rtn)
                            120 LOAD_CONST               3 (',')
                            122 LOAD_METHOD              1 (join)
                            144 LOAD_FAST                1 (emails)
                            146 PRECALL                  1
                            150 CALL                     1
                            160 LOAD_CONST               0 (None)
                            162 BUILD_TUPLE              2
                            164 PRECALL                  2
                            168 CALL                     2
                            178 POP_TOP
                
-               672         180 PUSH_NULL
+               691         180 PUSH_NULL
                            182 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            194 PRECALL                  0
                            198 CALL                     0
                            208 LOAD_CONST               4 (';')
                            210 LOAD_METHOD              1 (join)
                            232 LOAD_FAST                1 (emails)
                            234 PRECALL                  1
                            238 CALL                     1
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               673         264 LOAD_FAST                0 (self)
+               692         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST               4 (';')
                            292 LOAD_METHOD              1 (join)
                            314 LOAD_FAST                1 (emails)
                            316 PRECALL                  1
                            320 CALL                     1
                            330 LOAD_CONST               0 (None)
                            332 BUILD_TUPLE              2
                            334 PRECALL                  2
                            338 CALL                     2
                            348 POP_TOP
                
-               674         350 PUSH_NULL
+               693         350 PUSH_NULL
                            352 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            364 PRECALL                  0
                            368 CALL                     0
                            378 LOAD_CONST               5 (' ')
                            380 LOAD_METHOD              1 (join)
                            402 LOAD_FAST                1 (emails)
                            404 PRECALL                  1
                            408 CALL                     1
                            418 PRECALL                  1
                            422 CALL                     1
                            432 STORE_FAST               2 (rtn)
                
-               675         434 LOAD_FAST                0 (self)
+               694         434 LOAD_FAST                0 (self)
                            436 LOAD_METHOD              2 (assertEqual)
                            458 LOAD_FAST                2 (rtn)
                            460 LOAD_CONST               5 (' ')
                            462 LOAD_METHOD              1 (join)
                            484 LOAD_FAST                1 (emails)
                            486 PRECALL                  1
                            490 CALL                     1
                            500 LOAD_CONST               0 (None)
                            502 BUILD_TUPLE              2
                            504 PRECALL                  2
                            508 CALL                     2
                            518 POP_TOP
                
-               676         520 LOAD_FAST                1 (emails)
+               695         520 LOAD_FAST                1 (emails)
                            522 LOAD_METHOD              3 (append)
                            544 LOAD_CONST               6 ('a')
                            546 PRECALL                  1
                            550 CALL                     1
                            560 POP_TOP
                
-               677         562 PUSH_NULL
+               696         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            576 PRECALL                  0
                            580 CALL                     0
                            590 LOAD_CONST               4 (';')
                            592 LOAD_METHOD              1 (join)
                            614 LOAD_FAST                1 (emails)
                            616 PRECALL                  1
                            620 CALL                     1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               678         646 LOAD_FAST                0 (self)
+               697         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                
-               679         670 LOAD_FAST                2 (rtn)
+               698         670 LOAD_FAST                2 (rtn)
                            672 LOAD_CONST               7 (('localguy@localhost;_Yosemite.Sam@example.com;a', 'Invalid emails: a'))
                
-               678         674 PRECALL                  2
+               697         674 PRECALL                  2
                            678 CALL                     2
                            688 POP_TOP
                
-               681         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
+               700         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            702 PRECALL                  0
                            706 CALL                     0
                            716 LOAD_METHOD              4 (formatter)
                            738 LOAD_CONST               8 ('test@example.com')
                            740 LOAD_CONST               9 ('dude@example.com')
                            742 BUILD_LIST               2
                            744 PRECALL                  1
                            748 CALL                     1
                            758 STORE_FAST               2 (rtn)
                
-               682         760 LOAD_FAST                0 (self)
+               701         760 LOAD_FAST                0 (self)
                            762 LOAD_METHOD              2 (assertEqual)
                            784 LOAD_FAST                2 (rtn)
                            786 LOAD_CONST              10 ('test@example.com, dude@example.com')
                            788 PRECALL                  2
                            792 CALL                     2
                            802 POP_TOP
                            804 LOAD_CONST               0 (None)
@@ -7932,15 +8110,15 @@
                   'test@example.com, dude@example.com'
                names      ('IS_LIST_OF_EMAILS', 'join', 'assertEqual', 'append', 'formatter')
                varnames   ('self', 'emails', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF_EMAILS'
-               firstlineno 668
+               firstlineno 687
                lnotab 0x020108015401560154015601540156012a015401180104ff10034601
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
                flags     : 3
                code
@@ -7959,123 +8137,123 @@
                   02a6020000ab020000000000000000010002007401000000000000000000
                   00a6000000ab000000000000000000640ca6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   0da6020000ab020000000000000000010002007401000000000000000000
                   00640e6400ac0fa6020000ab020000000000000000640ba6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016410a6020000ab020000000000000000010064005300
-               684           0 RESUME                   0
+               703           0 RESUME                   0
                
-               685           2 PUSH_NULL
+               704           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_URL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('http://example.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               686          48 LOAD_FAST                0 (self)
+               705          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('http://example.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               687          92 PUSH_NULL
+               706          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_URL)
                            106 LOAD_CONST               3 ('oops')
                            108 KW_NAMES                 4
                            110 PRECALL                  1
                            114 CALL                     1
                            124 LOAD_CONST               5 ('http://example,com')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               1 (rtn)
                
-               688         142 LOAD_FAST                0 (self)
+               707         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              1 (assertEqual)
                            166 LOAD_FAST                1 (rtn)
                            168 LOAD_CONST               6 (('http://example,com', 'oops'))
                            170 PRECALL                  2
                            174 CALL                     2
                            184 POP_TOP
                
-               689         186 PUSH_NULL
+               708         186 PUSH_NULL
                            188 LOAD_GLOBAL              1 (NULL + IS_URL)
                            200 LOAD_CONST               3 ('oops')
                            202 KW_NAMES                 4
                            204 PRECALL                  1
                            208 CALL                     1
                
-               690         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
+               709         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
                
-               689         220 PRECALL                  1
+               708         220 PRECALL                  1
                            224 CALL                     1
                            234 STORE_FAST               1 (rtn)
                
-               692         236 LOAD_FAST                0 (self)
+               711         236 LOAD_FAST                0 (self)
                            238 LOAD_METHOD              1 (assertEqual)
                            260 LOAD_FAST                1 (rtn)
                            262 LOAD_CONST               8 (('http://www.example.com:8800/a/b/c/d/e/f/g/h', None))
                            264 PRECALL                  2
                            268 CALL                     2
                            278 POP_TOP
                
-               693         280 PUSH_NULL
+               712         280 PUSH_NULL
                            282 LOAD_GLOBAL              1 (NULL + IS_URL)
                            294 LOAD_CONST               3 ('oops')
                            296 LOAD_CONST               9 ('http')
                            298 KW_NAMES                10
                            300 PRECALL                  2
                            304 CALL                     2
                            314 LOAD_CONST              11 ('example.com')
                            316 PRECALL                  1
                            320 CALL                     1
                            330 STORE_FAST               1 (rtn)
                
-               694         332 LOAD_FAST                0 (self)
+               713         332 LOAD_FAST                0 (self)
                            334 LOAD_METHOD              1 (assertEqual)
                            356 LOAD_FAST                1 (rtn)
                            358 LOAD_CONST               2 (('http://example.com', None))
                            360 PRECALL                  2
                            364 CALL                     2
                            374 POP_TOP
                
-               695         376 PUSH_NULL
+               714         376 PUSH_NULL
                            378 LOAD_GLOBAL              1 (NULL + IS_URL)
                            390 PRECALL                  0
                            394 CALL                     0
                            404 LOAD_CONST              12 ('http://example.com?q=george&p=22')
                            406 PRECALL                  1
                            410 CALL                     1
                            420 STORE_FAST               1 (rtn)
                
-               696         422 LOAD_FAST                0 (self)
+               715         422 LOAD_FAST                0 (self)
                            424 LOAD_METHOD              1 (assertEqual)
                            446 LOAD_FAST                1 (rtn)
                            448 LOAD_CONST              13 (('http://example.com?q=george&p=22', None))
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               697         466 PUSH_NULL
+               716         466 PUSH_NULL
                            468 LOAD_GLOBAL              1 (NULL + IS_URL)
                            480 LOAD_CONST              14 ('generic')
                            482 LOAD_CONST               0 (None)
                            484 KW_NAMES                15
                            486 PRECALL                  2
                            490 CALL                     2
                            500 LOAD_CONST              11 ('example.com')
                            502 PRECALL                  1
                            506 CALL                     1
                            516 STORE_FAST               1 (rtn)
                
-               698         518 LOAD_FAST                0 (self)
+               717         518 LOAD_FAST                0 (self)
                            520 LOAD_METHOD              1 (assertEqual)
                            542 LOAD_FAST                1 (rtn)
                            544 LOAD_CONST              16 (('example.com', None))
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                            562 LOAD_CONST               0 (None)
@@ -8100,15 +8278,15 @@
                   ('example.com', None)
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_URL'
-               firstlineno 684
+               firstlineno 703
                lnotab 0x02012e012c0132012c01200102ff10032c0134012c012e012c013401
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
                flags     : 3
                code
@@ -8158,98 +8336,98 @@
                   00740100000000000000000000a6000000ab0000000000000000006415a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016416a6020000ab020000000000000000010002
                   00740100000000000000000000a6000000ab0000000000000000006417a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016418a6020000ab020000000000000000010064
                   005300
-               700           0 RESUME                   0
+               719           0 RESUME                   0
                
-               701           2 PUSH_NULL
+               720           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_TIME)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('21:30')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               702          48 LOAD_FAST                0 (self)
+               721          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_GLOBAL              5 (NULL + datetime)
                             86 LOAD_ATTR                3 (time)
                             96 LOAD_CONST               2 (21)
                             98 LOAD_CONST               3 (30)
                            100 PRECALL                  2
                            104 CALL                     2
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               703         134 PUSH_NULL
+               722         134 PUSH_NULL
                            136 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            148 PRECALL                  0
                            152 CALL                     0
                            162 LOAD_CONST               4 ('21-30')
                            164 PRECALL                  1
                            168 CALL                     1
                            178 STORE_FAST               1 (rtn)
                
-               704         180 LOAD_FAST                0 (self)
+               723         180 LOAD_FAST                0 (self)
                            182 LOAD_METHOD              1 (assertEqual)
                            204 LOAD_FAST                1 (rtn)
                            206 LOAD_GLOBAL              5 (NULL + datetime)
                            218 LOAD_ATTR                3 (time)
                            228 LOAD_CONST               2 (21)
                            230 LOAD_CONST               3 (30)
                            232 PRECALL                  2
                            236 CALL                     2
                            246 LOAD_CONST               0 (None)
                            248 BUILD_TUPLE              2
                            250 PRECALL                  2
                            254 CALL                     2
                            264 POP_TOP
                
-               705         266 PUSH_NULL
+               724         266 PUSH_NULL
                            268 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            280 PRECALL                  0
                            284 CALL                     0
                            294 LOAD_CONST               5 ('21.30')
                            296 PRECALL                  1
                            300 CALL                     1
                            310 STORE_FAST               1 (rtn)
                
-               706         312 LOAD_FAST                0 (self)
+               725         312 LOAD_FAST                0 (self)
                            314 LOAD_METHOD              1 (assertEqual)
                            336 LOAD_FAST                1 (rtn)
                            338 LOAD_GLOBAL              5 (NULL + datetime)
                            350 LOAD_ATTR                3 (time)
                            360 LOAD_CONST               2 (21)
                            362 LOAD_CONST               3 (30)
                            364 PRECALL                  2
                            368 CALL                     2
                            378 LOAD_CONST               0 (None)
                            380 BUILD_TUPLE              2
                            382 PRECALL                  2
                            386 CALL                     2
                            396 POP_TOP
                
-               707         398 PUSH_NULL
+               726         398 PUSH_NULL
                            400 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            412 PRECALL                  0
                            416 CALL                     0
                            426 LOAD_CONST               6 ('21:30:59')
                            428 PRECALL                  1
                            432 CALL                     1
                            442 STORE_FAST               1 (rtn)
                
-               708         444 LOAD_FAST                0 (self)
+               727         444 LOAD_FAST                0 (self)
                            446 LOAD_METHOD              1 (assertEqual)
                            468 LOAD_FAST                1 (rtn)
                            470 LOAD_GLOBAL              5 (NULL + datetime)
                            482 LOAD_ATTR                3 (time)
                            492 LOAD_CONST               2 (21)
                            494 LOAD_CONST               3 (30)
                            496 LOAD_CONST               7 (59)
@@ -8257,191 +8435,191 @@
                            502 CALL                     3
                            512 LOAD_CONST               0 (None)
                            514 BUILD_TUPLE              2
                            516 PRECALL                  2
                            520 CALL                     2
                            530 POP_TOP
                
-               709         532 PUSH_NULL
+               728         532 PUSH_NULL
                            534 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            546 PRECALL                  0
                            550 CALL                     0
                            560 LOAD_CONST               8 ('5:30')
                            562 PRECALL                  1
                            566 CALL                     1
                            576 STORE_FAST               1 (rtn)
                
-               710         578 LOAD_FAST                0 (self)
+               729         578 LOAD_FAST                0 (self)
                            580 LOAD_METHOD              1 (assertEqual)
                            602 LOAD_FAST                1 (rtn)
                            604 LOAD_GLOBAL              5 (NULL + datetime)
                            616 LOAD_ATTR                3 (time)
                            626 LOAD_CONST               9 (5)
                            628 LOAD_CONST               3 (30)
                            630 PRECALL                  2
                            634 CALL                     2
                            644 LOAD_CONST               0 (None)
                            646 BUILD_TUPLE              2
                            648 PRECALL                  2
                            652 CALL                     2
                            662 POP_TOP
                
-               711         664 PUSH_NULL
+               730         664 PUSH_NULL
                            666 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            678 PRECALL                  0
                            682 CALL                     0
                            692 LOAD_CONST              10 ('5:30 am')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               712         710 LOAD_FAST                0 (self)
+               731         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_GLOBAL              5 (NULL + datetime)
                            748 LOAD_ATTR                3 (time)
                            758 LOAD_CONST               9 (5)
                            760 LOAD_CONST               3 (30)
                            762 PRECALL                  2
                            766 CALL                     2
                            776 LOAD_CONST               0 (None)
                            778 BUILD_TUPLE              2
                            780 PRECALL                  2
                            784 CALL                     2
                            794 POP_TOP
                
-               713         796 PUSH_NULL
+               732         796 PUSH_NULL
                            798 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            810 PRECALL                  0
                            814 CALL                     0
                            824 LOAD_CONST              11 ('5:30 pm')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 STORE_FAST               1 (rtn)
                
-               714         842 LOAD_FAST                0 (self)
+               733         842 LOAD_FAST                0 (self)
                            844 LOAD_METHOD              1 (assertEqual)
                            866 LOAD_FAST                1 (rtn)
                            868 LOAD_GLOBAL              5 (NULL + datetime)
                            880 LOAD_ATTR                3 (time)
                            890 LOAD_CONST              12 (17)
                            892 LOAD_CONST               3 (30)
                            894 PRECALL                  2
                            898 CALL                     2
                            908 LOAD_CONST               0 (None)
                            910 BUILD_TUPLE              2
                            912 PRECALL                  2
                            916 CALL                     2
                            926 POP_TOP
                
-               715         928 PUSH_NULL
+               734         928 PUSH_NULL
                            930 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            942 PRECALL                  0
                            946 CALL                     0
                            956 LOAD_CONST              13 ('5:30 whatever')
                            958 PRECALL                  1
                            962 CALL                     1
                            972 STORE_FAST               1 (rtn)
                
-               716         974 LOAD_FAST                0 (self)
+               735         974 LOAD_FAST                0 (self)
                            976 LOAD_METHOD              1 (assertEqual)
                
-               717         998 LOAD_FAST                1 (rtn)
+               736         998 LOAD_FAST                1 (rtn)
                           1000 LOAD_CONST              14 (('5:30 whatever', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               716        1002 PRECALL                  2
+               735        1002 PRECALL                  2
                           1006 CALL                     2
                           1016 POP_TOP
                
-               719        1018 PUSH_NULL
+               738        1018 PUSH_NULL
                           1020 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1032 PRECALL                  0
                           1036 CALL                     0
                           1046 LOAD_CONST              15 ('5:30 20')
                           1048 PRECALL                  1
                           1052 CALL                     1
                           1062 STORE_FAST               1 (rtn)
                
-               720        1064 LOAD_FAST                0 (self)
+               739        1064 LOAD_FAST                0 (self)
                           1066 LOAD_METHOD              1 (assertEqual)
                
-               721        1088 LOAD_FAST                1 (rtn)
+               740        1088 LOAD_FAST                1 (rtn)
                           1090 LOAD_CONST              16 (('5:30 20', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               720        1092 PRECALL                  2
+               739        1092 PRECALL                  2
                           1096 CALL                     2
                           1106 POP_TOP
                
-               723        1108 PUSH_NULL
+               742        1108 PUSH_NULL
                           1110 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1122 PRECALL                  0
                           1126 CALL                     0
                           1136 LOAD_CONST              17 ('24:30')
                           1138 PRECALL                  1
                           1142 CALL                     1
                           1152 STORE_FAST               1 (rtn)
                
-               724        1154 LOAD_FAST                0 (self)
+               743        1154 LOAD_FAST                0 (self)
                           1156 LOAD_METHOD              1 (assertEqual)
                
-               725        1178 LOAD_FAST                1 (rtn)
+               744        1178 LOAD_FAST                1 (rtn)
                           1180 LOAD_CONST              18 (('24:30', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               724        1182 PRECALL                  2
+               743        1182 PRECALL                  2
                           1186 CALL                     2
                           1196 POP_TOP
                
-               727        1198 PUSH_NULL
+               746        1198 PUSH_NULL
                           1200 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1212 PRECALL                  0
                           1216 CALL                     0
                           1226 LOAD_CONST              19 ('21:60')
                           1228 PRECALL                  1
                           1232 CALL                     1
                           1242 STORE_FAST               1 (rtn)
                
-               728        1244 LOAD_FAST                0 (self)
+               747        1244 LOAD_FAST                0 (self)
                           1246 LOAD_METHOD              1 (assertEqual)
                
-               729        1268 LOAD_FAST                1 (rtn)
+               748        1268 LOAD_FAST                1 (rtn)
                           1270 LOAD_CONST              20 (('21:60', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               728        1272 PRECALL                  2
+               747        1272 PRECALL                  2
                           1276 CALL                     2
                           1286 POP_TOP
                
-               731        1288 PUSH_NULL
+               750        1288 PUSH_NULL
                           1290 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1302 PRECALL                  0
                           1306 CALL                     0
                           1316 LOAD_CONST              21 ('21:30::')
                           1318 PRECALL                  1
                           1322 CALL                     1
                           1332 STORE_FAST               1 (rtn)
                
-               732        1334 LOAD_FAST                0 (self)
+               751        1334 LOAD_FAST                0 (self)
                           1336 LOAD_METHOD              1 (assertEqual)
                
-               733        1358 LOAD_FAST                1 (rtn)
+               752        1358 LOAD_FAST                1 (rtn)
                           1360 LOAD_CONST              22 (('21:30::', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               732        1362 PRECALL                  2
+               751        1362 PRECALL                  2
                           1366 CALL                     2
                           1376 POP_TOP
                
-               735        1378 PUSH_NULL
+               754        1378 PUSH_NULL
                           1380 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1392 PRECALL                  0
                           1396 CALL                     0
                           1406 LOAD_CONST              23 ('')
                           1408 PRECALL                  1
                           1412 CALL                     1
                           1422 STORE_FAST               1 (rtn)
                
-               736        1424 LOAD_FAST                0 (self)
+               755        1424 LOAD_FAST                0 (self)
                           1426 LOAD_METHOD              1 (assertEqual)
                           1448 LOAD_FAST                1 (rtn)
                           1450 LOAD_CONST              24 (('', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                           1452 PRECALL                  2
                           1456 CALL                     2
                           1466 POP_TOP
                           1468 LOAD_CONST               0 (None)
@@ -8474,15 +8652,15 @@
                   ('', 'Enter time as hh:mm:ss (seconds, am, pm optional)')
                names      ('IS_TIME', 'assertEqual', 'datetime', 'time')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_TIME'
-               firstlineno 700
+               firstlineno 719
                lnotab
                   0x02012e0156012e0156012e0156012e0158012e0156012e0156012e0156
                   012e01180104ff10032e01180104ff10032e01180104ff10032e01180104
                   ff10032e01180104ff10032e01
             code
                argcount  : 1
                nlocals   : 3
@@ -8498,32 +8676,32 @@
                   000000000000000000000000007c026408a6020000ab0200000000000000
                   00010074010000000000000000000064016402ac03a6020000ab02000000
                   0000000000a0040000000000000000000000000000000000000000740500
                   0000000000000000006a0300000000000000006409640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d027c00a00100
                   000000000000000000000000000000000000007c02640ca6020000ab0200
                   00000000000000010064005300
-               738           0 RESUME                   0
+               757           0 RESUME                   0
                
-               739           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               758           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
                             14 LOAD_CONST               1 ('%m/%d/%Y')
                             16 LOAD_CONST               2 ('oops')
                             18 KW_NAMES                 3
                             20 PRECALL                  2
                             24 CALL                     2
                             34 STORE_FAST               1 (v)
                
-               740          36 PUSH_NULL
+               759          36 PUSH_NULL
                             38 LOAD_FAST                1 (v)
                             40 LOAD_CONST               4 ('03/03/2008')
                             42 PRECALL                  1
                             46 CALL                     1
                             56 STORE_FAST               2 (rtn)
                
-               741          58 LOAD_FAST                0 (self)
+               760          58 LOAD_FAST                0 (self)
                             60 LOAD_METHOD              1 (assertEqual)
                             82 LOAD_FAST                2 (rtn)
                             84 LOAD_GLOBAL              5 (NULL + datetime)
                             96 LOAD_ATTR                3 (date)
                            106 LOAD_CONST               5 (2008)
                            108 LOAD_CONST               6 (3)
                            110 LOAD_CONST               6 (3)
@@ -8531,50 +8709,50 @@
                            116 CALL                     3
                            126 LOAD_CONST               0 (None)
                            128 BUILD_TUPLE              2
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               742         146 PUSH_NULL
+               761         146 PUSH_NULL
                            148 LOAD_FAST                1 (v)
                            150 LOAD_CONST               7 ('31/03/2008')
                            152 PRECALL                  1
                            156 CALL                     1
                            166 STORE_FAST               2 (rtn)
                
-               743         168 LOAD_FAST                0 (self)
+               762         168 LOAD_FAST                0 (self)
                            170 LOAD_METHOD              1 (assertEqual)
                            192 LOAD_FAST                2 (rtn)
                            194 LOAD_CONST               8 (('31/03/2008', 'oops'))
                            196 PRECALL                  2
                            200 CALL                     2
                            210 POP_TOP
                
-               744         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               763         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
                            224 LOAD_CONST               1 ('%m/%d/%Y')
                            226 LOAD_CONST               2 ('oops')
                            228 KW_NAMES                 3
                            230 PRECALL                  2
                            234 CALL                     2
                            244 LOAD_METHOD              4 (formatter)
                
-               745         266 LOAD_GLOBAL              5 (NULL + datetime)
+               764         266 LOAD_GLOBAL              5 (NULL + datetime)
                            278 LOAD_ATTR                3 (date)
                            288 LOAD_CONST               9 (1834)
                            290 LOAD_CONST              10 (12)
                            292 LOAD_CONST              11 (14)
                            294 PRECALL                  3
                            298 CALL                     3
                
-               744         308 PRECALL                  1
+               763         308 PRECALL                  1
                            312 CALL                     1
                            322 STORE_FAST               2 (rtn)
                
-               747         324 LOAD_FAST                0 (self)
+               766         324 LOAD_FAST                0 (self)
                            326 LOAD_METHOD              1 (assertEqual)
                            348 LOAD_FAST                2 (rtn)
                            350 LOAD_CONST              12 ('12/14/1834')
                            352 PRECALL                  2
                            356 CALL                     2
                            366 POP_TOP
                            368 LOAD_CONST               0 (None)
@@ -8595,15 +8773,15 @@
                   '12/14/1834'
                names      ('IS_DATE', 'assertEqual', 'datetime', 'date', 'formatter')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE'
-               firstlineno 738
+               firstlineno 757
                lnotab 0x020122011601580116012c0136012aff1003
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
                flags     : 3
                code
@@ -8620,32 +8798,32 @@
                   0000000000ac0ea6030000ab0300000000000000007d0102007c01640fa6
                   010000ab0100000000000000007d027c00a0010000000000000000000000
                   0000000000000000007c027405000000000000000000006a020000000000
                   00000064106407641164126413a6050000ab050000000000000000640066
                   02a6020000ab020000000000000000010064005300
                              0 MAKE_CELL                3 (DummyTimezone)
                
-               749           2 RESUME                   0
+               768           2 RESUME                   0
                
-               750           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               769           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                             16 LOAD_CONST               1 ('%m/%d/%Y %H:%M')
                             18 LOAD_CONST               2 ('oops')
                             20 KW_NAMES                 3
                             22 PRECALL                  2
                             26 CALL                     2
                             36 STORE_FAST               1 (v)
                
-               751          38 PUSH_NULL
+               770          38 PUSH_NULL
                             40 LOAD_FAST                1 (v)
                             42 LOAD_CONST               4 ('03/03/2008 12:40')
                             44 PRECALL                  1
                             48 CALL                     1
                             58 STORE_FAST               2 (rtn)
                
-               752          60 LOAD_FAST                0 (self)
+               771          60 LOAD_FAST                0 (self)
                             62 LOAD_METHOD              1 (assertEqual)
                             84 LOAD_FAST                2 (rtn)
                             86 LOAD_GLOBAL              5 (NULL + datetime)
                             98 LOAD_ATTR                2 (datetime)
                            108 LOAD_CONST               5 (2008)
                            110 LOAD_CONST               6 (3)
                            112 LOAD_CONST               6 (3)
@@ -8655,64 +8833,64 @@
                            122 CALL                     5
                            132 LOAD_CONST               0 (None)
                            134 BUILD_TUPLE              2
                            136 PRECALL                  2
                            140 CALL                     2
                            150 POP_TOP
                
-               753         152 PUSH_NULL
+               772         152 PUSH_NULL
                            154 LOAD_FAST                1 (v)
                            156 LOAD_CONST               9 ('31/03/2008 29:40')
                            158 PRECALL                  1
                            162 CALL                     1
                            172 STORE_FAST               2 (rtn)
                
-               754         174 LOAD_FAST                0 (self)
+               773         174 LOAD_FAST                0 (self)
                            176 LOAD_METHOD              1 (assertEqual)
                            198 LOAD_FAST                2 (rtn)
                            200 LOAD_CONST              10 (('31/03/2008 29:40', 'oops'))
                            202 PRECALL                  2
                            206 CALL                     2
                            216 POP_TOP
                
-               759         218 PUSH_NULL
+               778         218 PUSH_NULL
                            220 LOAD_BUILD_CLASS
                            222 LOAD_CLOSURE             3 (DummyTimezone)
                            224 BUILD_TUPLE              1
-                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 759>)
+                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 778>)
                            228 MAKE_FUNCTION            8 (closure)
                            230 LOAD_CONST              12 ('DummyTimezone')
                            232 LOAD_GLOBAL              4 (datetime)
                            244 LOAD_ATTR                3 (tzinfo)
                            254 PRECALL                  3
                            258 CALL                     3
                            268 STORE_DEREF              3 (DummyTimezone)
                
-               774         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               793         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                
-               775         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
+               794         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
                            284 LOAD_CONST               2 ('oops')
                            286 PUSH_NULL
                            288 LOAD_DEREF               3 (DummyTimezone)
                            290 PRECALL                  0
                            294 CALL                     0
                
-               774         304 KW_NAMES                14
+               793         304 KW_NAMES                14
                            306 PRECALL                  3
                            310 CALL                     3
                            320 STORE_FAST               1 (v)
                
-               777         322 PUSH_NULL
+               796         322 PUSH_NULL
                            324 LOAD_FAST                1 (v)
                            326 LOAD_CONST              15 ('1982-12-14 08:00')
                            328 PRECALL                  1
                            332 CALL                     1
                            342 STORE_FAST               2 (rtn)
                
-               778         344 LOAD_FAST                0 (self)
+               797         344 LOAD_FAST                0 (self)
                            346 LOAD_METHOD              1 (assertEqual)
                            368 LOAD_FAST                2 (rtn)
                            370 LOAD_GLOBAL              5 (NULL + datetime)
                            382 LOAD_ATTR                2 (datetime)
                            392 LOAD_CONST              16 (1982)
                            394 LOAD_CONST               7 (12)
                            396 LOAD_CONST              17 (14)
@@ -8746,47 +8924,47 @@
                      flags     : 0
                      code
                         0x9501970065005a0164005a02020065036a0400000000000000006401ac
                         02a6010000ab0100000000000000005a0588006601640384085a06640484
                         005a0788006601640584085a086409640784015a0964085300
                                    0 COPY_FREE_VARS           1
                      
-                     759           2 RESUME                   0
+                     778           2 RESUME                   0
                                    4 LOAD_NAME                0 (__name__)
                                    6 STORE_NAME               1 (__module__)
                                    8 LOAD_CONST               0 ('TestValidators.test_IS_DATETIME.<locals>.DummyTimezone')
                                   10 STORE_NAME               2 (__qualname__)
                      
-                     760          12 PUSH_NULL
+                     779          12 PUSH_NULL
                                   14 LOAD_NAME                3 (datetime)
                                   16 LOAD_ATTR                4 (timedelta)
                                   26 LOAD_CONST               1 (1)
                                   28 KW_NAMES                 2
                                   30 PRECALL                  1
                                   34 CALL                     1
                                   44 STORE_NAME               5 (ONE)
                      
-                     762          46 LOAD_CLOSURE             0 (DummyTimezone)
+                     781          46 LOAD_CLOSURE             0 (DummyTimezone)
                                   48 BUILD_TUPLE              1
-                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 762>)
+                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 781>)
                                   52 MAKE_FUNCTION            8 (closure)
                                   54 STORE_NAME               6 (utcoffset)
                      
-                     765          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 765>)
+                     784          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 784>)
                                   58 MAKE_FUNCTION            0
                                   60 STORE_NAME               7 (tzname)
                      
-                     768          62 LOAD_CLOSURE             0 (DummyTimezone)
+                     787          62 LOAD_CLOSURE             0 (DummyTimezone)
                                   64 BUILD_TUPLE              1
-                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 768>)
+                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 787>)
                                   68 MAKE_FUNCTION            8 (closure)
                                   70 STORE_NAME               8 (dst)
                      
-                     771          72 LOAD_CONST               9 ((False,))
-                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 771>)
+                     790          72 LOAD_CONST               9 ((False,))
+                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 790>)
                                   76 MAKE_FUNCTION            1 (defaults)
                                   78 STORE_NAME               9 (localize)
                                   80 LOAD_CONST               8 (None)
                                   82 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_DATETIME.<locals>.DummyTimezone'
                         1
@@ -8795,85 +8973,85 @@
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           762           2 RESUME                   0
+                           781           2 RESUME                   0
                            
-                           763           4 LOAD_DEREF               2 (DummyTimezone)
+                           782           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'utcoffset'
-                           firstlineno 762
+                           firstlineno 781
                            lnotab 0x0401
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x970064015300
-                           765           0 RESUME                   0
+                           784           0 RESUME                   0
                            
-                           766           2 LOAD_CONST               1 ('UTC+1')
+                           785           2 LOAD_CONST               1 ('UTC+1')
                                          4 RETURN_VALUE
                            consts
                               None
                               'UTC+1'
                            names      ()
                            varnames   ('self', 'dt')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'tzname'
-                           firstlineno 765
+                           firstlineno 784
                            lnotab 0x0201
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           768           2 RESUME                   0
+                           787           2 RESUME                   0
                            
-                           769           4 LOAD_DEREF               2 (DummyTimezone)
+                           788           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'dst'
-                           firstlineno 768
+                           firstlineno 787
                            lnotab 0x0401
                         False
                         code
                            argcount  : 3
                            nlocals   : 3
                            stacksize : 3
                            flags     : 19
                            code
                               0x97007c01a00000000000000000000000000000000000000000007c00ac
                               01a6010000ab0100000000000000005300
-                           771           0 RESUME                   0
+                           790           0 RESUME                   0
                            
-                           772           2 LOAD_FAST                1 (dt)
+                           791           2 LOAD_FAST                1 (dt)
                                          4 LOAD_METHOD              0 (replace)
                                         26 LOAD_FAST                0 (self)
                                         28 KW_NAMES                 1
                                         30 PRECALL                  1
                                         34 CALL                     1
                                         44 RETURN_VALUE
                            consts
@@ -8881,25 +9059,25 @@
                               ('tzinfo',)
                            names      ('replace',)
                            varnames   ('self', 'dt', 'is_dst')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'localize'
-                           firstlineno 771
+                           firstlineno 790
                            lnotab 0x0201
                         None
                         (False,)
                      names      ('__name__', '__module__', '__qualname__', 'datetime', 'timedelta', 'ONE', 'utcoffset', 'tzname', 'dst', 'localize')
                      varnames   ()
                      freevars   ('DummyTimezone',)
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyTimezone'
-                     firstlineno 759
+                     firstlineno 778
                      lnotab 0x0c0122020a0306030a03
                   'DummyTimezone'
                   '%Y-%m-%d %H:%M'
                   ('format', 'error_message', 'timezone')
                   '1982-12-14 08:00'
                   1982
                   14
@@ -8907,15 +9085,15 @@
                   0
                names      ('IS_DATETIME', 'assertEqual', 'datetime', 'tzinfo')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ('DummyTimezone',)
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME'
-               firstlineno 749
+               firstlineno 768
                lnotab 0x0401220116015c0116012c05340f0c0116ff12031601
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
                flags     : 3
                code
@@ -8951,51 +9129,51 @@
                   000000000001007401000000000000000000007403000000000000000000
                   006a020000000000000000640164026402a6030000ab0300000000000000
                   007403000000000000000000006a020000000000000000640364046405a6
                   030000ab0300000000000000006406ac13a6030000ab0300000000000000
                   007d0102007c016411a6010000ab0100000000000000007d027c00a00300
                   000000000000000000000000000000000000007c026414a6020000ab0200
                   00000000000000010064005300
-               780           0 RESUME                   0
+               799           0 RESUME                   0
                
-               781           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               800           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               782          14 LOAD_GLOBAL              3 (NULL + datetime)
+               801          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                2 (date)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 PRECALL                  3
                             46 CALL                     3
                
-               783          56 LOAD_GLOBAL              3 (NULL + datetime)
+               802          56 LOAD_GLOBAL              3 (NULL + datetime)
                             68 LOAD_ATTR                2 (date)
                             78 LOAD_CONST               3 (2009)
                             80 LOAD_CONST               4 (12)
                             82 LOAD_CONST               5 (31)
                             84 PRECALL                  3
                             88 CALL                     3
                
-               784          98 LOAD_CONST               6 ('%m/%d/%Y')
+               803          98 LOAD_CONST               6 ('%m/%d/%Y')
                
-               785         100 LOAD_CONST               7 ('oops')
+               804         100 LOAD_CONST               7 ('oops')
                
-               781         102 KW_NAMES                 8
+               800         102 KW_NAMES                 8
                            104 PRECALL                  4
                            108 CALL                     4
                            118 STORE_FAST               1 (v)
                
-               788         120 PUSH_NULL
+               807         120 PUSH_NULL
                            122 LOAD_FAST                1 (v)
                            124 LOAD_CONST               9 ('03/03/2008')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               2 (rtn)
                
-               789         142 LOAD_FAST                0 (self)
+               808         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              3 (assertEqual)
                            166 LOAD_FAST                2 (rtn)
                            168 LOAD_GLOBAL              3 (NULL + datetime)
                            180 LOAD_ATTR                2 (date)
                            190 LOAD_CONST               1 (2008)
                            192 LOAD_CONST              10 (3)
                            194 LOAD_CONST              10 (3)
@@ -9003,43 +9181,43 @@
                            200 CALL                     3
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               790         230 PUSH_NULL
+               809         230 PUSH_NULL
                            232 LOAD_FAST                1 (v)
                            234 LOAD_CONST              11 ('03/03/2010')
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               791         252 LOAD_FAST                0 (self)
+               810         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              3 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_CONST              12 (('03/03/2010', 'oops'))
                            280 PRECALL                  2
                            284 CALL                     2
                            294 POP_TOP
                
-               792         296 PUSH_NULL
+               811         296 PUSH_NULL
                            298 LOAD_FAST                1 (v)
                            300 LOAD_GLOBAL              3 (NULL + datetime)
                            312 LOAD_ATTR                2 (date)
                            322 LOAD_CONST               1 (2008)
                            324 LOAD_CONST              10 (3)
                            326 LOAD_CONST              10 (3)
                            328 PRECALL                  3
                            332 CALL                     3
                            342 PRECALL                  1
                            346 CALL                     1
                            356 STORE_FAST               2 (rtn)
                
-               793         358 LOAD_FAST                0 (self)
+               812         358 LOAD_FAST                0 (self)
                            360 LOAD_METHOD              3 (assertEqual)
                            382 LOAD_FAST                2 (rtn)
                            384 LOAD_GLOBAL              3 (NULL + datetime)
                            396 LOAD_ATTR                2 (date)
                            406 LOAD_CONST               1 (2008)
                            408 LOAD_CONST              10 (3)
                            410 LOAD_CONST              10 (3)
@@ -9047,28 +9225,28 @@
                            416 CALL                     3
                            426 LOAD_CONST               0 (None)
                            428 BUILD_TUPLE              2
                            430 PRECALL                  2
                            434 CALL                     2
                            444 POP_TOP
                
-               794         446 PUSH_NULL
+               813         446 PUSH_NULL
                            448 LOAD_FAST                1 (v)
                            450 LOAD_GLOBAL              3 (NULL + datetime)
                            462 LOAD_ATTR                2 (date)
                            472 LOAD_CONST              13 (2010)
                            474 LOAD_CONST              10 (3)
                            476 LOAD_CONST              10 (3)
                            478 PRECALL                  3
                            482 CALL                     3
                            492 PRECALL                  1
                            496 CALL                     1
                            506 STORE_FAST               2 (rtn)
                
-               795         508 LOAD_FAST                0 (self)
+               814         508 LOAD_FAST                0 (self)
                            510 LOAD_METHOD              3 (assertEqual)
                            532 LOAD_FAST                2 (rtn)
                            534 LOAD_GLOBAL              3 (NULL + datetime)
                            546 LOAD_ATTR                2 (date)
                            556 LOAD_CONST              13 (2010)
                            558 LOAD_CONST              10 (3)
                            560 LOAD_CONST              10 (3)
@@ -9076,111 +9254,111 @@
                            566 CALL                     3
                            576 LOAD_CONST               7 ('oops')
                            578 BUILD_TUPLE              2
                            580 PRECALL                  2
                            584 CALL                     2
                            594 POP_TOP
                
-               796         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               815         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            608 LOAD_GLOBAL              3 (NULL + datetime)
                            620 LOAD_ATTR                2 (date)
                            630 LOAD_CONST               3 (2009)
                            632 LOAD_CONST               4 (12)
                            634 LOAD_CONST               5 (31)
                            636 PRECALL                  3
                            640 CALL                     3
                            650 LOAD_CONST               6 ('%m/%d/%Y')
                            652 KW_NAMES                14
                            654 PRECALL                  2
                            658 CALL                     2
                            668 STORE_FAST               1 (v)
                
-               797         670 PUSH_NULL
+               816         670 PUSH_NULL
                            672 LOAD_FAST                1 (v)
                            674 LOAD_CONST              11 ('03/03/2010')
                            676 PRECALL                  1
                            680 CALL                     1
                            690 STORE_FAST               2 (rtn)
                
-               798         692 LOAD_FAST                0 (self)
+               817         692 LOAD_FAST                0 (self)
                            694 LOAD_METHOD              3 (assertEqual)
                            716 LOAD_FAST                2 (rtn)
                            718 LOAD_CONST              15 (('03/03/2010', 'Enter date on or before 12/31/2009'))
                            720 PRECALL                  2
                            724 CALL                     2
                            734 POP_TOP
                
-               799         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               818         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            748 LOAD_GLOBAL              3 (NULL + datetime)
                            760 LOAD_ATTR                2 (date)
                            770 LOAD_CONST               1 (2008)
                            772 LOAD_CONST               2 (1)
                            774 LOAD_CONST               2 (1)
                            776 PRECALL                  3
                            780 CALL                     3
                            790 LOAD_CONST               6 ('%m/%d/%Y')
                            792 KW_NAMES                16
                            794 PRECALL                  2
                            798 CALL                     2
                            808 STORE_FAST               1 (v)
                
-               800         810 PUSH_NULL
+               819         810 PUSH_NULL
                            812 LOAD_FAST                1 (v)
                            814 LOAD_CONST              17 ('03/03/2007')
                            816 PRECALL                  1
                            820 CALL                     1
                            830 STORE_FAST               2 (rtn)
                
-               801         832 LOAD_FAST                0 (self)
+               820         832 LOAD_FAST                0 (self)
                            834 LOAD_METHOD              3 (assertEqual)
                            856 LOAD_FAST                2 (rtn)
                            858 LOAD_CONST              18 (('03/03/2007', 'Enter date on or after 01/01/2008'))
                            860 PRECALL                  2
                            864 CALL                     2
                            874 POP_TOP
                
-               802         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               821         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               803         888 LOAD_GLOBAL              3 (NULL + datetime)
+               822         888 LOAD_GLOBAL              3 (NULL + datetime)
                            900 LOAD_ATTR                2 (date)
                            910 LOAD_CONST               1 (2008)
                            912 LOAD_CONST               2 (1)
                            914 LOAD_CONST               2 (1)
                            916 PRECALL                  3
                            920 CALL                     3
                
-               804         930 LOAD_GLOBAL              3 (NULL + datetime)
+               823         930 LOAD_GLOBAL              3 (NULL + datetime)
                            942 LOAD_ATTR                2 (date)
                            952 LOAD_CONST               3 (2009)
                            954 LOAD_CONST               4 (12)
                            956 LOAD_CONST               5 (31)
                            958 PRECALL                  3
                            962 CALL                     3
                
-               805         972 LOAD_CONST               6 ('%m/%d/%Y')
+               824         972 LOAD_CONST               6 ('%m/%d/%Y')
                
-               802         974 KW_NAMES                19
+               821         974 KW_NAMES                19
                            976 PRECALL                  3
                            980 CALL                     3
                            990 STORE_FAST               1 (v)
                
-               807         992 PUSH_NULL
+               826         992 PUSH_NULL
                            994 LOAD_FAST                1 (v)
                            996 LOAD_CONST              17 ('03/03/2007')
                            998 PRECALL                  1
                           1002 CALL                     1
                           1012 STORE_FAST               2 (rtn)
                
-               808        1014 LOAD_FAST                0 (self)
+               827        1014 LOAD_FAST                0 (self)
                           1016 LOAD_METHOD              3 (assertEqual)
                
-               809        1038 LOAD_FAST                2 (rtn)
+               828        1038 LOAD_FAST                2 (rtn)
                           1040 LOAD_CONST              20 (('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009'))
                
-               808        1042 PRECALL                  2
+               827        1042 PRECALL                  2
                           1046 CALL                     2
                           1056 POP_TOP
                           1058 LOAD_CONST               0 (None)
                           1060 RETURN_VALUE
                consts
                   None
                   2008
@@ -9205,15 +9383,15 @@
                   ('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009')
                names      ('IS_DATE_IN_RANGE', 'datetime', 'date', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE_IN_RANGE'
-               firstlineno 780
+               firstlineno 799
                lnotab
                   0x02010c012a012a01020102fc12071601580116012c013e0158013e0158
                   014a0116012c014a0116012c010c012a012a0102fd12051601180104ff
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
@@ -9257,55 +9435,55 @@
                   000000000000007d027c00a0020000000000000000000000000000000000
                   0000007c026419a6020000ab020000000000000000010074010000000000
                   00000000007403000000000000000000006a010000000000000000640564
                   03640664036404a6050000ab050000000000000000641a6408ac1ba60300
                   00ab0300000000000000007d0102007c01641ca6010000ab010000000000
                   0000007d027c00a00200000000000000000000000000000000000000007c
                   02641da6020000ab020000000000000000010064005300
-               812           0 RESUME                   0
+               831           0 RESUME                   0
                
-               813           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               832           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               814          14 LOAD_GLOBAL              3 (NULL + datetime)
+               833          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                1 (datetime)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 LOAD_CONST               3 (12)
                             44 LOAD_CONST               4 (20)
                             46 PRECALL                  5
                             50 CALL                     5
                
-               815          60 LOAD_GLOBAL              3 (NULL + datetime)
+               834          60 LOAD_GLOBAL              3 (NULL + datetime)
                             72 LOAD_ATTR                1 (datetime)
                             82 LOAD_CONST               5 (2009)
                             84 LOAD_CONST               3 (12)
                             86 LOAD_CONST               6 (31)
                             88 LOAD_CONST               3 (12)
                             90 LOAD_CONST               4 (20)
                             92 PRECALL                  5
                             96 CALL                     5
                
-               816         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
+               835         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
                
-               817         108 LOAD_CONST               8 ('oops')
+               836         108 LOAD_CONST               8 ('oops')
                
-               813         110 KW_NAMES                 9
+               832         110 KW_NAMES                 9
                            112 PRECALL                  4
                            116 CALL                     4
                            126 STORE_FAST               1 (v)
                
-               819         128 PUSH_NULL
+               838         128 PUSH_NULL
                            130 LOAD_FAST                1 (v)
                            132 LOAD_CONST              10 ('03/03/2008 12:40')
                            134 PRECALL                  1
                            138 CALL                     1
                            148 STORE_FAST               2 (rtn)
                
-               820         150 LOAD_FAST                0 (self)
+               839         150 LOAD_FAST                0 (self)
                            152 LOAD_METHOD              2 (assertEqual)
                            174 LOAD_FAST                2 (rtn)
                            176 LOAD_GLOBAL              3 (NULL + datetime)
                            188 LOAD_ATTR                1 (datetime)
                            198 LOAD_CONST               1 (2008)
                            200 LOAD_CONST              11 (3)
                            202 LOAD_CONST              11 (3)
@@ -9315,45 +9493,45 @@
                            212 CALL                     5
                            222 LOAD_CONST               0 (None)
                            224 BUILD_TUPLE              2
                            226 PRECALL                  2
                            230 CALL                     2
                            240 POP_TOP
                
-               821         242 PUSH_NULL
+               840         242 PUSH_NULL
                            244 LOAD_FAST                1 (v)
                            246 LOAD_CONST              13 ('03/03/2010 10:34')
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               822         264 LOAD_FAST                0 (self)
+               841         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST              14 (('03/03/2010 10:34', 'oops'))
                            292 PRECALL                  2
                            296 CALL                     2
                            306 POP_TOP
                
-               823         308 PUSH_NULL
+               842         308 PUSH_NULL
                            310 LOAD_FAST                1 (v)
                            312 LOAD_GLOBAL              3 (NULL + datetime)
                            324 LOAD_ATTR                1 (datetime)
                            334 LOAD_CONST               1 (2008)
                            336 LOAD_CONST              11 (3)
                            338 LOAD_CONST              11 (3)
                            340 LOAD_CONST              15 (0)
                            342 LOAD_CONST              15 (0)
                            344 PRECALL                  5
                            348 CALL                     5
                            358 PRECALL                  1
                            362 CALL                     1
                            372 STORE_FAST               2 (rtn)
                
-               824         374 LOAD_FAST                0 (self)
+               843         374 LOAD_FAST                0 (self)
                            376 LOAD_METHOD              2 (assertEqual)
                            398 LOAD_FAST                2 (rtn)
                            400 LOAD_GLOBAL              3 (NULL + datetime)
                            412 LOAD_ATTR                1 (datetime)
                            422 LOAD_CONST               1 (2008)
                            424 LOAD_CONST              11 (3)
                            426 LOAD_CONST              11 (3)
@@ -9363,30 +9541,30 @@
                            436 CALL                     5
                            446 LOAD_CONST               0 (None)
                            448 BUILD_TUPLE              2
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               825         466 PUSH_NULL
+               844         466 PUSH_NULL
                            468 LOAD_FAST                1 (v)
                            470 LOAD_GLOBAL              3 (NULL + datetime)
                            482 LOAD_ATTR                1 (datetime)
                            492 LOAD_CONST              16 (2010)
                            494 LOAD_CONST              11 (3)
                            496 LOAD_CONST              11 (3)
                            498 LOAD_CONST              15 (0)
                            500 LOAD_CONST              15 (0)
                            502 PRECALL                  5
                            506 CALL                     5
                            516 PRECALL                  1
                            520 CALL                     1
                            530 STORE_FAST               2 (rtn)
                
-               826         532 LOAD_FAST                0 (self)
+               845         532 LOAD_FAST                0 (self)
                            534 LOAD_METHOD              2 (assertEqual)
                            556 LOAD_FAST                2 (rtn)
                            558 LOAD_GLOBAL              3 (NULL + datetime)
                            570 LOAD_ATTR                1 (datetime)
                            580 LOAD_CONST              16 (2010)
                            582 LOAD_CONST              11 (3)
                            584 LOAD_CONST              11 (3)
@@ -9396,162 +9574,162 @@
                            594 CALL                     5
                            604 LOAD_CONST               8 ('oops')
                            606 BUILD_TUPLE              2
                            608 PRECALL                  2
                            612 CALL                     2
                            622 POP_TOP
                
-               827         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               846         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               828         636 LOAD_GLOBAL              3 (NULL + datetime)
+               847         636 LOAD_GLOBAL              3 (NULL + datetime)
                            648 LOAD_ATTR                1 (datetime)
                            658 LOAD_CONST               5 (2009)
                            660 LOAD_CONST               3 (12)
                            662 LOAD_CONST               6 (31)
                            664 LOAD_CONST               3 (12)
                            666 LOAD_CONST               4 (20)
                            668 PRECALL                  5
                            672 CALL                     5
                            682 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               827         684 KW_NAMES                18
+               846         684 KW_NAMES                18
                            686 PRECALL                  2
                            690 CALL                     2
                            700 STORE_FAST               1 (v)
                
-               830         702 PUSH_NULL
+               849         702 PUSH_NULL
                            704 LOAD_FAST                1 (v)
                            706 LOAD_CONST              19 ('03/03/2010 12:20:00')
                            708 PRECALL                  1
                            712 CALL                     1
                            722 STORE_FAST               2 (rtn)
                
-               831         724 LOAD_FAST                0 (self)
+               850         724 LOAD_FAST                0 (self)
                            726 LOAD_METHOD              2 (assertEqual)
                
-               832         748 LOAD_FAST                2 (rtn)
+               851         748 LOAD_FAST                2 (rtn)
                
-               833         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
+               852         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
                
-               831         752 PRECALL                  2
+               850         752 PRECALL                  2
                            756 CALL                     2
                            766 POP_TOP
                
-               838         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               857         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               839         780 LOAD_GLOBAL              3 (NULL + datetime)
+               858         780 LOAD_GLOBAL              3 (NULL + datetime)
                            792 LOAD_ATTR                1 (datetime)
                            802 LOAD_CONST               1 (2008)
                            804 LOAD_CONST               2 (1)
                            806 LOAD_CONST               2 (1)
                            808 LOAD_CONST               3 (12)
                            810 LOAD_CONST               4 (20)
                            812 PRECALL                  5
                            816 CALL                     5
                            826 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               838         828 KW_NAMES                21
+               857         828 KW_NAMES                21
                            830 PRECALL                  2
                            834 CALL                     2
                            844 STORE_FAST               1 (v)
                
-               841         846 PUSH_NULL
+               860         846 PUSH_NULL
                            848 LOAD_FAST                1 (v)
                            850 LOAD_CONST              22 ('03/03/2007 12:20:00')
                            852 PRECALL                  1
                            856 CALL                     1
                            866 STORE_FAST               2 (rtn)
                
-               842         868 LOAD_FAST                0 (self)
+               861         868 LOAD_FAST                0 (self)
                            870 LOAD_METHOD              2 (assertEqual)
                
-               843         892 LOAD_FAST                2 (rtn)
+               862         892 LOAD_FAST                2 (rtn)
                
-               844         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
+               863         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
                
-               842         896 PRECALL                  2
+               861         896 PRECALL                  2
                            900 CALL                     2
                            910 POP_TOP
                
-               849         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               868         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               850         924 LOAD_GLOBAL              3 (NULL + datetime)
+               869         924 LOAD_GLOBAL              3 (NULL + datetime)
                            936 LOAD_ATTR                1 (datetime)
                            946 LOAD_CONST               1 (2008)
                            948 LOAD_CONST               2 (1)
                            950 LOAD_CONST               2 (1)
                            952 LOAD_CONST               3 (12)
                            954 LOAD_CONST               4 (20)
                            956 PRECALL                  5
                            960 CALL                     5
                
-               851         970 LOAD_GLOBAL              3 (NULL + datetime)
+               870         970 LOAD_GLOBAL              3 (NULL + datetime)
                            982 LOAD_ATTR                1 (datetime)
                            992 LOAD_CONST               5 (2009)
                            994 LOAD_CONST               3 (12)
                            996 LOAD_CONST               6 (31)
                            998 LOAD_CONST               3 (12)
                           1000 LOAD_CONST               4 (20)
                           1002 PRECALL                  5
                           1006 CALL                     5
                
-               852        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
+               871        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               849        1018 KW_NAMES                24
+               868        1018 KW_NAMES                24
                           1020 PRECALL                  3
                           1024 CALL                     3
                           1034 STORE_FAST               1 (v)
                
-               854        1036 PUSH_NULL
+               873        1036 PUSH_NULL
                           1038 LOAD_FAST                1 (v)
                           1040 LOAD_CONST              22 ('03/03/2007 12:20:00')
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 STORE_FAST               2 (rtn)
                
-               855        1058 LOAD_FAST                0 (self)
+               874        1058 LOAD_FAST                0 (self)
                           1060 LOAD_METHOD              2 (assertEqual)
                
-               856        1082 LOAD_FAST                2 (rtn)
+               875        1082 LOAD_FAST                2 (rtn)
                
-               857        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
+               876        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
                
-               855        1086 PRECALL                  2
+               874        1086 PRECALL                  2
                           1090 CALL                     2
                           1100 POP_TOP
                
-               862        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               881        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               863        1114 LOAD_GLOBAL              3 (NULL + datetime)
+               882        1114 LOAD_GLOBAL              3 (NULL + datetime)
                           1126 LOAD_ATTR                1 (datetime)
                           1136 LOAD_CONST               5 (2009)
                           1138 LOAD_CONST               3 (12)
                           1140 LOAD_CONST               6 (31)
                           1142 LOAD_CONST               3 (12)
                           1144 LOAD_CONST               4 (20)
                           1146 PRECALL                  5
                           1150 CALL                     5
                
-               864        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
+               883        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
                
-               865        1162 LOAD_CONST               8 ('oops')
+               884        1162 LOAD_CONST               8 ('oops')
                
-               862        1164 KW_NAMES                27
+               881        1164 KW_NAMES                27
                           1166 PRECALL                  3
                           1170 CALL                     3
                           1180 STORE_FAST               1 (v)
                
-               867        1182 PUSH_NULL
+               886        1182 PUSH_NULL
                           1184 LOAD_FAST                1 (v)
                           1186 LOAD_CONST              28 ('clearly not a date')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 STORE_FAST               2 (rtn)
                
-               868        1204 LOAD_FAST                0 (self)
+               887        1204 LOAD_FAST                0 (self)
                           1206 LOAD_METHOD              2 (assertEqual)
                           1228 LOAD_FAST                2 (rtn)
                           1230 LOAD_CONST              29 (('clearly not a date', 'oops'))
                           1232 PRECALL                  2
                           1236 CALL                     2
                           1246 POP_TOP
                           1248 LOAD_CONST               0 (None)
@@ -9589,15 +9767,15 @@
                   ('clearly not a date', 'oops')
                names      ('IS_DATETIME_IN_RANGE', 'datetime', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME_IN_RANGE'
-               firstlineno 812
+               firstlineno 831
                lnotab
                   0x02010c012e012e01020102fc120616015c0116012c0142015c0142015c
                   010c0130ff120316011801020102fe10070c0130ff120316011801020102
                   fe10070c012e012e0102fd120516011801020102fe10070c012e01020102
                   fd12051601
             code
                argcount  : 1
@@ -9628,102 +9806,102 @@
                   000000000000006408ac0aa6020000ab0200000000000000006700640ba2
                   01a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026700640ba201640c6602a6020000ab0200
                   00000000000000010002007401000000000000000000006406ac07a60100
                   00ab010000000000000000640da6010000ab0100000000000000007d027c
                   00a00200000000000000000000000000000000000000007c02640ea60200
                   00ab020000000000000000010064005300
-               870           0 RESUME                   0
+               889           0 RESUME                   0
                
-               871           2 BUILD_LIST               0
+               890           2 BUILD_LIST               0
                              4 LOAD_CONST               1 ((0, 1, 2, 3, 4))
                              6 LIST_EXTEND              1
                              8 STORE_FAST               1 (values)
                
-               872          10 PUSH_NULL
+               891          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                             24 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                             36 LOAD_CONST               2 (0)
                             38 LOAD_CONST               3 (10)
                             40 PRECALL                  2
                             44 CALL                     2
                             54 PRECALL                  1
                             58 CALL                     1
                             68 LOAD_FAST                1 (values)
                             70 PRECALL                  1
                             74 CALL                     1
                             84 STORE_FAST               2 (rtn)
                
-               873          86 LOAD_FAST                0 (self)
+               892          86 LOAD_FAST                0 (self)
                             88 LOAD_METHOD              2 (assertEqual)
                            110 LOAD_FAST                2 (rtn)
                            112 LOAD_FAST                1 (values)
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               874         134 LOAD_FAST                1 (values)
+               893         134 LOAD_FAST                1 (values)
                            136 LOAD_METHOD              3 (append)
                            158 LOAD_CONST               4 (11)
                            160 PRECALL                  1
                            164 CALL                     1
                            174 POP_TOP
                
-               875         176 PUSH_NULL
+               894         176 PUSH_NULL
                            178 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            190 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            202 LOAD_CONST               2 (0)
                            204 LOAD_CONST               3 (10)
                            206 PRECALL                  2
                            210 CALL                     2
                            220 PRECALL                  1
                            224 CALL                     1
                            234 LOAD_FAST                1 (values)
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               876         252 LOAD_FAST                0 (self)
+               895         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              2 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_FAST                1 (values)
                            280 LOAD_CONST               5 ('Enter an integer between 0 and 9')
                            282 BUILD_TUPLE              2
                            284 PRECALL                  2
                            288 CALL                     2
                            298 POP_TOP
                
-               877         300 PUSH_NULL
+               896         300 PUSH_NULL
                            302 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            314 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            326 LOAD_CONST               2 (0)
                            328 LOAD_CONST               3 (10)
                            330 PRECALL                  2
                            334 CALL                     2
                            344 PRECALL                  1
                            348 CALL                     1
                            358 LOAD_CONST               6 (1)
                            360 PRECALL                  1
                            364 CALL                     1
                            374 STORE_FAST               2 (rtn)
                
-               878         376 LOAD_FAST                0 (self)
+               897         376 LOAD_FAST                0 (self)
                            378 LOAD_METHOD              2 (assertEqual)
                            400 LOAD_FAST                2 (rtn)
                            402 LOAD_CONST               6 (1)
                            404 BUILD_LIST               1
                            406 LOAD_CONST               0 (None)
                            408 BUILD_TUPLE              2
                            410 PRECALL                  2
                            414 CALL                     2
                            424 POP_TOP
                
-               879         426 PUSH_NULL
+               898         426 PUSH_NULL
                            428 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            440 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            452 LOAD_CONST               2 (0)
                            454 LOAD_CONST               3 (10)
                            456 PRECALL                  2
                            460 CALL                     2
                            470 LOAD_CONST               3 (10)
@@ -9733,27 +9911,27 @@
                            488 LOAD_CONST               6 (1)
                            490 LOAD_CONST               8 (2)
                            492 BUILD_LIST               2
                            494 PRECALL                  1
                            498 CALL                     1
                            508 STORE_FAST               2 (rtn)
                
-               880         510 LOAD_FAST                0 (self)
+               899         510 LOAD_FAST                0 (self)
                            512 LOAD_METHOD              2 (assertEqual)
                            534 LOAD_FAST                2 (rtn)
                            536 LOAD_CONST               6 (1)
                            538 LOAD_CONST               8 (2)
                            540 BUILD_LIST               2
                            542 LOAD_CONST               9 ('Minimum length is 10')
                            544 BUILD_TUPLE              2
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                
-               881         562 PUSH_NULL
+               900         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            576 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            588 LOAD_CONST               2 (0)
                            590 LOAD_CONST               3 (10)
                            592 PRECALL                  2
                            596 CALL                     2
                            606 LOAD_CONST               8 (2)
@@ -9763,38 +9941,38 @@
                            624 BUILD_LIST               0
                            626 LOAD_CONST              11 ((1, 2, 3))
                            628 LIST_EXTEND              1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               882         646 LOAD_FAST                0 (self)
+               901         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                            670 LOAD_FAST                2 (rtn)
                            672 BUILD_LIST               0
                            674 LOAD_CONST              11 ((1, 2, 3))
                            676 LIST_EXTEND              1
                            678 LOAD_CONST              12 ('Maximum length is 2')
                            680 BUILD_TUPLE              2
                            682 PRECALL                  2
                            686 CALL                     2
                            696 POP_TOP
                
-               884         698 PUSH_NULL
+               903         698 PUSH_NULL
                            700 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            712 LOAD_CONST               6 (1)
                            714 KW_NAMES                 7
                            716 PRECALL                  1
                            720 CALL                     1
                            730 LOAD_CONST              13 ('')
                            732 PRECALL                  1
                            736 CALL                     1
                            746 STORE_FAST               2 (rtn)
                
-               885         748 LOAD_FAST                0 (self)
+               904         748 LOAD_FAST                0 (self)
                            750 LOAD_METHOD              2 (assertEqual)
                            772 LOAD_FAST                2 (rtn)
                            774 LOAD_CONST              14 (('', 'Minimum length is 1'))
                            776 PRECALL                  2
                            780 CALL                     2
                            790 POP_TOP
                            792 LOAD_CONST               0 (None)
@@ -9817,15 +9995,15 @@
                   ('', 'Minimum length is 1')
                names      ('IS_LIST_OF', 'IS_INT_IN_RANGE', 'assertEqual', 'append')
                varnames   ('self', 'values', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF'
-               firstlineno 870
+               firstlineno 889
                lnotab 0x020108014c0130012a014c0130014c01320154013401540134023201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9835,60 +10013,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               887           0 RESUME                   0
+               906           0 RESUME                   0
                
-               888           2 PUSH_NULL
+               907           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('ABC')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               889          48 LOAD_FAST                0 (self)
+               908          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               890          92 PUSH_NULL
+               909          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'ABC')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               891         138 LOAD_FAST                0 (self)
+               910         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'abc', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               892         182 PUSH_NULL
+               911         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               893         228 LOAD_FAST                0 (self)
+               912         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9903,15 +10081,15 @@
                   ('', None)
                names      ('IS_LOWER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LOWER'
-               firstlineno 887
+               firstlineno 906
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9921,60 +10099,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               895           0 RESUME                   0
+               914           0 RESUME                   0
                
-               896           2 PUSH_NULL
+               915           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               897          48 LOAD_FAST                0 (self)
+               916          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('ABC', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               898          92 PUSH_NULL
+               917          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'abc')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               899         138 LOAD_FAST                0 (self)
+               918         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'ABC', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               900         182 PUSH_NULL
+               919         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               901         228 LOAD_FAST                0 (self)
+               920         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9989,15 +10167,15 @@
                   ('', None)
                names      ('IS_UPPER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPPER'
-               firstlineno 895
+               firstlineno 914
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -10056,346 +10234,346 @@
                   000000000000006416ac1aa6010000ab010000000000000000641ca60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c01641da6020000ab0200000000000000000100020074
                   01000000000000000000006418ac1aa6010000ab01000000000000000064
                   1ca6010000ab0100000000000000007d017c00a001000000000000000000
                   00000000000000000000007c01641ea6020000ab02000000000000000001
                   0064005300
-               903           0 RESUME                   0
+               922           0 RESUME                   0
                
-               904           2 PUSH_NULL
+               923           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc123')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               905          48 LOAD_FAST                0 (self)
+               924          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc123', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               906          92 PUSH_NULL
+               925          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('ABC123')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               907         138 LOAD_FAST                0 (self)
+               926         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               2 (('abc123', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               908         182 PUSH_NULL
+               927         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               4 ('abc-123')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               909         228 LOAD_FAST                0 (self)
+               928         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               5 (('abc-123', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               910         272 PUSH_NULL
+               929         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               6 ('abc--123')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               911         318 LOAD_FAST                0 (self)
+               930         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               5 (('abc-123', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               912         362 PUSH_NULL
+               931         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               7 ('abc 123')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               913         408 LOAD_FAST                0 (self)
+               932         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               5 (('abc-123', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               914         452 PUSH_NULL
+               933         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST               8 ('abc\t_123')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               915         498 LOAD_FAST                0 (self)
+               934         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST               5 (('abc-123', None))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               916         542 PUSH_NULL
+               935         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST               9 ('-abc-')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               917         588 LOAD_FAST                0 (self)
+               936         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              10 (('abc', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               918         632 PUSH_NULL
+               937         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              11 ('--a--b--_ -c--')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               919         678 LOAD_FAST                0 (self)
+               938         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              12 (('a-b-c', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               920         722 PUSH_NULL
+               939         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              13 ('abc&amp;123')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               921         768 LOAD_FAST                0 (self)
+               940         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST               2 (('abc123', None))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               922         812 PUSH_NULL
+               941         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              14 ('abc&amp;123&amp;def')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               923         858 LOAD_FAST                0 (self)
+               942         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              15 (('abc123def', None))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               924         902 PUSH_NULL
+               943         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              16 ('')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               925         948 LOAD_FAST                0 (self)
+               944         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              17 (('n', None))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               926         992 PUSH_NULL
+               945         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1006 LOAD_CONST              18 (4)
                           1008 KW_NAMES                19
                           1010 PRECALL                  1
                           1014 CALL                     1
                           1024 LOAD_CONST               1 ('abc123')
                           1026 PRECALL                  1
                           1030 CALL                     1
                           1040 STORE_FAST               1 (rtn)
                
-               927        1042 LOAD_FAST                0 (self)
+               946        1042 LOAD_FAST                0 (self)
                           1044 LOAD_METHOD              1 (assertEqual)
                           1066 LOAD_FAST                1 (rtn)
                           1068 LOAD_CONST              20 (('abc1', None))
                           1070 PRECALL                  2
                           1074 CALL                     2
                           1084 POP_TOP
                
-               928        1086 PUSH_NULL
+               947        1086 PUSH_NULL
                           1088 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1100 PRECALL                  0
                           1104 CALL                     0
                           1114 LOAD_CONST              21 ('abc_123')
                           1116 PRECALL                  1
                           1120 CALL                     1
                           1130 STORE_FAST               1 (rtn)
                
-               929        1132 LOAD_FAST                0 (self)
+               948        1132 LOAD_FAST                0 (self)
                           1134 LOAD_METHOD              1 (assertEqual)
                           1156 LOAD_FAST                1 (rtn)
                           1158 LOAD_CONST               5 (('abc-123', None))
                           1160 PRECALL                  2
                           1164 CALL                     2
                           1174 POP_TOP
                
-               930        1176 PUSH_NULL
+               949        1176 PUSH_NULL
                           1178 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1190 LOAD_CONST              22 (False)
                           1192 KW_NAMES                23
                           1194 PRECALL                  1
                           1198 CALL                     1
                           1208 LOAD_CONST              21 ('abc_123')
                           1210 PRECALL                  1
                           1214 CALL                     1
                           1224 STORE_FAST               1 (rtn)
                
-               931        1226 LOAD_FAST                0 (self)
+               950        1226 LOAD_FAST                0 (self)
                           1228 LOAD_METHOD              1 (assertEqual)
                           1250 LOAD_FAST                1 (rtn)
                           1252 LOAD_CONST               5 (('abc-123', None))
                           1254 PRECALL                  2
                           1258 CALL                     2
                           1268 POP_TOP
                
-               932        1270 PUSH_NULL
+               951        1270 PUSH_NULL
                           1272 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1284 LOAD_CONST              24 (True)
                           1286 KW_NAMES                23
                           1288 PRECALL                  1
                           1292 CALL                     1
                           1302 LOAD_CONST              21 ('abc_123')
                           1304 PRECALL                  1
                           1308 CALL                     1
                           1318 STORE_FAST               1 (rtn)
                
-               933        1320 LOAD_FAST                0 (self)
+               952        1320 LOAD_FAST                0 (self)
                           1322 LOAD_METHOD              1 (assertEqual)
                           1344 LOAD_FAST                1 (rtn)
                           1346 LOAD_CONST              25 (('abc_123', None))
                           1348 PRECALL                  2
                           1352 CALL                     2
                           1362 POP_TOP
                
-               934        1364 PUSH_NULL
+               953        1364 PUSH_NULL
                           1366 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1378 LOAD_CONST              22 (False)
                           1380 KW_NAMES                26
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 LOAD_CONST              27 ('abc')
                           1398 PRECALL                  1
                           1402 CALL                     1
                           1412 STORE_FAST               1 (rtn)
                
-               935        1414 LOAD_FAST                0 (self)
+               954        1414 LOAD_FAST                0 (self)
                           1416 LOAD_METHOD              1 (assertEqual)
                           1438 LOAD_FAST                1 (rtn)
                           1440 LOAD_CONST              10 (('abc', None))
                           1442 PRECALL                  2
                           1446 CALL                     2
                           1456 POP_TOP
                
-               936        1458 PUSH_NULL
+               955        1458 PUSH_NULL
                           1460 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1472 LOAD_CONST              24 (True)
                           1474 KW_NAMES                26
                           1476 PRECALL                  1
                           1480 CALL                     1
                           1490 LOAD_CONST              27 ('abc')
                           1492 PRECALL                  1
                           1496 CALL                     1
                           1506 STORE_FAST               1 (rtn)
                
-               937        1508 LOAD_FAST                0 (self)
+               956        1508 LOAD_FAST                0 (self)
                           1510 LOAD_METHOD              1 (assertEqual)
                           1532 LOAD_FAST                1 (rtn)
                           1534 LOAD_CONST              10 (('abc', None))
                           1536 PRECALL                  2
                           1540 CALL                     2
                           1550 POP_TOP
                
-               938        1552 PUSH_NULL
+               957        1552 PUSH_NULL
                           1554 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1566 LOAD_CONST              22 (False)
                           1568 KW_NAMES                26
                           1570 PRECALL                  1
                           1574 CALL                     1
                           1584 LOAD_CONST              28 ('a bc')
                           1586 PRECALL                  1
                           1590 CALL                     1
                           1600 STORE_FAST               1 (rtn)
                
-               939        1602 LOAD_FAST                0 (self)
+               958        1602 LOAD_FAST                0 (self)
                           1604 LOAD_METHOD              1 (assertEqual)
                           1626 LOAD_FAST                1 (rtn)
                           1628 LOAD_CONST              29 (('a-bc', None))
                           1630 PRECALL                  2
                           1634 CALL                     2
                           1644 POP_TOP
                
-               940        1646 PUSH_NULL
+               959        1646 PUSH_NULL
                           1648 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1660 LOAD_CONST              24 (True)
                           1662 KW_NAMES                26
                           1664 PRECALL                  1
                           1668 CALL                     1
                           1678 LOAD_CONST              28 ('a bc')
                           1680 PRECALL                  1
                           1684 CALL                     1
                           1694 STORE_FAST               1 (rtn)
                
-               941        1696 LOAD_FAST                0 (self)
+               960        1696 LOAD_FAST                0 (self)
                           1698 LOAD_METHOD              1 (assertEqual)
                           1720 LOAD_FAST                1 (rtn)
                           1722 LOAD_CONST              30 (('a bc', 'Must be slug'))
                           1724 PRECALL                  2
                           1728 CALL                     2
                           1738 POP_TOP
                           1740 LOAD_CONST               0 (None)
@@ -10434,15 +10612,15 @@
                   ('a bc', 'Must be slug')
                names      ('IS_SLUG', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_SLUG'
-               firstlineno 903
+               firstlineno 922
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c0132012c012e012c0132012c0132
                   012c0132012c0132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
@@ -10483,17 +10661,17 @@
                   0000000000640cac0da6010000ab01000000000000000074030000000000
                   0000000000a6000000ab0000000000000000006702a6010000ab01000000
                   0000000000a0070000000000000000000000000000000000000000740b00
                   0000000000000000006a060000000000000000640e640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d017c00a00300
                   000000000000000000000000000000000000007c01640fa6020000ab0200
                   00000000000000010064005300
-               943           0 RESUME                   0
+               962           0 RESUME                   0
                
-               944           2 PUSH_NULL
+               963           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + ANY_OF)
                             16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             28 PRECALL                  0
                             32 CALL                     0
                             42 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                             54 PRECALL                  0
                             58 CALL                     0
@@ -10501,23 +10679,23 @@
                             70 PRECALL                  1
                             74 CALL                     1
                             84 LOAD_CONST               1 ('a@b.co')
                             86 PRECALL                  1
                             90 CALL                     1
                            100 STORE_FAST               1 (rtn)
                
-               945         102 LOAD_FAST                0 (self)
+               964         102 LOAD_FAST                0 (self)
                            104 LOAD_METHOD              3 (assertEqual)
                            126 LOAD_FAST                1 (rtn)
                            128 LOAD_CONST               2 (('a@b.co', None))
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               946         146 PUSH_NULL
+               965         146 PUSH_NULL
                            148 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            160 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            172 PRECALL                  0
                            176 CALL                     0
                            186 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            198 PRECALL                  0
                            202 CALL                     0
@@ -10525,23 +10703,23 @@
                            214 PRECALL                  1
                            218 CALL                     1
                            228 LOAD_CONST               3 ('abco')
                            230 PRECALL                  1
                            234 CALL                     1
                            244 STORE_FAST               1 (rtn)
                
-               947         246 LOAD_FAST                0 (self)
+               966         246 LOAD_FAST                0 (self)
                            248 LOAD_METHOD              3 (assertEqual)
                            270 LOAD_FAST                1 (rtn)
                            272 LOAD_CONST               4 (('abco', None))
                            274 PRECALL                  2
                            278 CALL                     2
                            288 POP_TOP
                
-               948         290 PUSH_NULL
+               967         290 PUSH_NULL
                            292 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            304 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            316 PRECALL                  0
                            320 CALL                     0
                            330 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            342 PRECALL                  0
                            346 CALL                     0
@@ -10549,23 +10727,23 @@
                            358 PRECALL                  1
                            362 CALL                     1
                            372 LOAD_CONST               5 ('@ab.co')
                            374 PRECALL                  1
                            378 CALL                     1
                            388 STORE_FAST               1 (rtn)
                
-               949         390 LOAD_FAST                0 (self)
+               968         390 LOAD_FAST                0 (self)
                            392 LOAD_METHOD              3 (assertEqual)
                            414 LOAD_FAST                1 (rtn)
                            416 LOAD_CONST               6 (('@ab.co', 'Enter only letters, numbers, and underscore'))
                            418 PRECALL                  2
                            422 CALL                     2
                            432 POP_TOP
                
-               950         434 PUSH_NULL
+               969         434 PUSH_NULL
                            436 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            448 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            460 PRECALL                  0
                            464 CALL                     0
                            474 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            486 PRECALL                  0
                            490 CALL                     0
@@ -10573,23 +10751,23 @@
                            502 PRECALL                  1
                            506 CALL                     1
                            516 LOAD_CONST               5 ('@ab.co')
                            518 PRECALL                  1
                            522 CALL                     1
                            532 STORE_FAST               1 (rtn)
                
-               951         534 LOAD_FAST                0 (self)
+               970         534 LOAD_FAST                0 (self)
                            536 LOAD_METHOD              3 (assertEqual)
                            558 LOAD_FAST                1 (rtn)
                            560 LOAD_CONST               7 (('@ab.co', 'Enter a valid email address'))
                            562 PRECALL                  2
                            566 CALL                     2
                            576 POP_TOP
                
-               952         578 PUSH_NULL
+               971         578 PUSH_NULL
                            580 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            592 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            604 PRECALL                  0
                            608 CALL                     0
                            618 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            630 PRECALL                  0
                            634 CALL                     0
@@ -10597,23 +10775,23 @@
                            646 PRECALL                  1
                            650 CALL                     1
                            660 LOAD_CONST               1 ('a@b.co')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               953         678 LOAD_FAST                0 (self)
+               972         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              3 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST               2 (('a@b.co', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               954         722 PUSH_NULL
+               973         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            736 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            748 PRECALL                  0
                            752 CALL                     0
                            762 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            774 PRECALL                  0
                            778 CALL                     0
@@ -10621,15 +10799,15 @@
                            790 PRECALL                  1
                            794 CALL                     1
                            804 LOAD_CONST               8 ('1982-12-14')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               1 (rtn)
                
-               955         822 LOAD_FAST                0 (self)
+               974         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              3 (assertEqual)
                            846 LOAD_FAST                1 (rtn)
                            848 LOAD_GLOBAL             11 (NULL + datetime)
                            860 LOAD_ATTR                6 (date)
                            870 LOAD_CONST               9 (1982)
                            872 LOAD_CONST              10 (12)
                            874 LOAD_CONST              11 (14)
@@ -10637,41 +10815,41 @@
                            880 CALL                     3
                            890 LOAD_CONST               0 (None)
                            892 BUILD_TUPLE              2
                            894 PRECALL                  2
                            898 CALL                     2
                            908 POP_TOP
                
-               956         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
+               975         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            922 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            934 LOAD_CONST              12 ('%m/%d/%Y')
                            936 KW_NAMES                13
                            938 PRECALL                  1
                            942 CALL                     1
                            952 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            964 PRECALL                  0
                            968 CALL                     0
                            978 BUILD_LIST               2
                            980 PRECALL                  1
                            984 CALL                     1
                            994 LOAD_METHOD              7 (formatter)
                
-               957        1016 LOAD_GLOBAL             11 (NULL + datetime)
+               976        1016 LOAD_GLOBAL             11 (NULL + datetime)
                           1028 LOAD_ATTR                6 (date)
                           1038 LOAD_CONST              14 (1834)
                           1040 LOAD_CONST              10 (12)
                           1042 LOAD_CONST              11 (14)
                           1044 PRECALL                  3
                           1048 CALL                     3
                
-               956        1058 PRECALL                  1
+               975        1058 PRECALL                  1
                           1062 CALL                     1
                           1072 STORE_FAST               1 (rtn)
                
-               959        1074 LOAD_FAST                0 (self)
+               978        1074 LOAD_FAST                0 (self)
                           1076 LOAD_METHOD              3 (assertEqual)
                           1098 LOAD_FAST                1 (rtn)
                           1100 LOAD_CONST              15 ('12/14/1834')
                           1102 PRECALL                  2
                           1106 CALL                     2
                           1116 POP_TOP
                           1118 LOAD_CONST               0 (None)
@@ -10695,50 +10873,50 @@
                   '12/14/1834'
                names      ('ANY_OF', 'IS_EMAIL', 'IS_ALPHANUMERIC', 'assertEqual', 'IS_DATE', 'datetime', 'date', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_ANY_OF'
-               firstlineno 943
+               firstlineno 962
                lnotab
                   0x020164012c0164012c0164012c0164012c0164012c01640158016a012a
                   ff1003
             code
                argcount  : 0
                nlocals   : 0
                stacksize : 1
                flags     : 0
                code 0x970065005a0164005a0264015a03640284005a0464035300
-               961           0 RESUME                   0
+               980           0 RESUME                   0
                              2 LOAD_NAME                0 (__name__)
                              4 STORE_NAME               1 (__module__)
                              6 LOAD_CONST               0 ('TestValidators.CustomValidator')
                              8 STORE_NAME               2 (__qualname__)
                
-               962          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
+               981          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
                             12 STORE_NAME               3 (__doc__)
                
-               964          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 964>)
+               983          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 983>)
                             16 MAKE_FUNCTION            0
                             18 STORE_NAME               4 (__call__)
                             20 LOAD_CONST               3 (None)
                             22 RETURN_VALUE
                consts
                   'TestValidators.CustomValidator'
                   'Custom Validator not overloading .validate()'
                   code
                      argcount  : 2
                      nlocals   : 2
                      stacksize : 2
                      flags     : 3
                      code 0x97007c0172047c01640066026e037c01640166025300
-                     964           0 RESUME                   0
+                     983           0 RESUME                   0
                      
-                     965           2 LOAD_FAST                1 (value)
+                     984           2 LOAD_FAST                1 (value)
                                    4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                                    6 LOAD_FAST                1 (value)
                                    8 LOAD_CONST               0 (None)
                                   10 BUILD_TUPLE              2
                                   12 JUMP_FORWARD             3 (to 20)
                              >>   14 LOAD_FAST                1 (value)
                                   16 LOAD_CONST               1 ('invalid!')
@@ -10749,35 +10927,35 @@
                         'invalid!'
                      names      ()
                      varnames   ('self', 'value')
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '__call__'
-                     firstlineno 964
+                     firstlineno 983
                      lnotab 0x0201
                   None
                names      ('__name__', '__module__', '__qualname__', '__doc__', '__call__')
                varnames   ()
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'CustomValidator'
-               firstlineno 961
+               firstlineno 980
                lnotab 0x0a010402
             'CustomValidator'
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 2
                flags     : 3
                code 0x97007c0072047c00640166026e037c00640266025300
-               967           0 RESUME                   0
+               986           0 RESUME                   0
                
-               970           2 LOAD_FAST                0 (value)
+               989           2 LOAD_FAST                0 (value)
                              4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                              6 LOAD_FAST                0 (value)
                              8 LOAD_CONST               1 (None)
                             10 BUILD_TUPLE              2
                             12 JUMP_FORWARD             3 (to 20)
                        >>   14 LOAD_FAST                0 (value)
                             16 LOAD_CONST               2 ('invalid!')
@@ -10789,15 +10967,15 @@
                   'invalid!'
                names      ()
                varnames   ('value',)
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'custom_validator_func'
-               firstlineno 967
+               firstlineno 986
                lnotab 0x0203
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
                flags     : 3
                code
@@ -10856,208 +11034,208 @@
                   000000000000007c006a070000000000000000a6010000ab010000000000
                   0000006416a6010000ab0100000000000000007d017c00a0020000000000
                   0000000000000000000000000000007c016417a6020000ab020000000000
                   000000010002007401000000000000000000007c006a0700000000000000
                   00a6010000ab0100000000000000006418a6010000ab0100000000000000
                   007d017c00a00200000000000000000000000000000000000000007c0164
                   19a6020000ab020000000000000000010064005300
-                972           0 RESUME                   0
+                991           0 RESUME                   0
                
-                973           2 PUSH_NULL
+                992           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                              16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                              28 PRECALL                  0
                              32 CALL                     0
                              42 PRECALL                  1
                              46 CALL                     1
                              56 LOAD_CONST               1 ('abc@def.com')
                              58 PRECALL                  1
                              62 CALL                     1
                              72 STORE_FAST               1 (rtn)
                
-                974          74 LOAD_FAST                0 (self)
+                993          74 LOAD_FAST                0 (self)
                              76 LOAD_METHOD              2 (assertEqual)
                              98 LOAD_FAST                1 (rtn)
                             100 LOAD_CONST               2 (('abc@def.com', None))
                             102 PRECALL                  2
                             106 CALL                     2
                             116 POP_TOP
                
-                975         118 PUSH_NULL
+                994         118 PUSH_NULL
                             120 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             132 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             144 PRECALL                  0
                             148 CALL                     0
                             158 PRECALL                  1
                             162 CALL                     1
                             172 LOAD_CONST               3 ('   ')
                             174 PRECALL                  1
                             178 CALL                     1
                             188 STORE_FAST               1 (rtn)
                
-                976         190 LOAD_FAST                0 (self)
+                995         190 LOAD_FAST                0 (self)
                             192 LOAD_METHOD              2 (assertEqual)
                             214 LOAD_FAST                1 (rtn)
                             216 LOAD_CONST               4 ((None, None))
                             218 PRECALL                  2
                             222 CALL                     2
                             232 POP_TOP
                
-                977         234 PUSH_NULL
+                996         234 PUSH_NULL
                             236 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             248 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             260 PRECALL                  0
                             264 CALL                     0
                             274 LOAD_CONST               5 ('abc')
                             276 KW_NAMES                 6
                             278 PRECALL                  2
                             282 CALL                     2
                             292 LOAD_CONST               3 ('   ')
                             294 PRECALL                  1
                             298 CALL                     1
                             308 STORE_FAST               1 (rtn)
                
-                978         310 LOAD_FAST                0 (self)
+                997         310 LOAD_FAST                0 (self)
                             312 LOAD_METHOD              2 (assertEqual)
                             334 LOAD_FAST                1 (rtn)
                             336 LOAD_CONST               7 (('abc', None))
                             338 PRECALL                  2
                             342 CALL                     2
                             352 POP_TOP
                
-                979         354 PUSH_NULL
+                998         354 PUSH_NULL
                             356 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             368 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             380 PRECALL                  0
                             384 CALL                     0
                             394 LOAD_CONST               5 ('abc')
                             396 LOAD_CONST               8 ('def')
                             398 KW_NAMES                 9
                             400 PRECALL                  3
                             404 CALL                     3
                             414 LOAD_CONST               8 ('def')
                             416 PRECALL                  1
                             420 CALL                     1
                             430 STORE_FAST               1 (rtn)
                
-                980         432 LOAD_FAST                0 (self)
+                999         432 LOAD_FAST                0 (self)
                             434 LOAD_METHOD              2 (assertEqual)
                             456 LOAD_FAST                1 (rtn)
                             458 LOAD_CONST               7 (('abc', None))
                             460 PRECALL                  2
                             464 CALL                     2
                             474 POP_TOP
                
-                981         476 PUSH_NULL
+               1000         476 PUSH_NULL
                             478 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             490 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             502 PRECALL                  0
                             506 CALL                     0
                             516 PRECALL                  1
                             520 CALL                     1
                             530 LOAD_CONST               5 ('abc')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               1 (rtn)
                
-                982         548 LOAD_FAST                0 (self)
+               1001         548 LOAD_FAST                0 (self)
                             550 LOAD_METHOD              2 (assertEqual)
                             572 LOAD_FAST                1 (rtn)
                             574 LOAD_CONST              10 (('abc', 'Enter a valid email address'))
                             576 PRECALL                  2
                             580 CALL                     2
                             590 POP_TOP
                
-                983         592 PUSH_NULL
+               1002         592 PUSH_NULL
                             594 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             606 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             618 PRECALL                  0
                             622 CALL                     0
                             632 PRECALL                  1
                             636 CALL                     1
                             646 LOAD_CONST              11 (' abc ')
                             648 PRECALL                  1
                             652 CALL                     1
                             662 STORE_FAST               1 (rtn)
                
-                984         664 LOAD_FAST                0 (self)
+               1003         664 LOAD_FAST                0 (self)
                             666 LOAD_METHOD              2 (assertEqual)
                             688 LOAD_FAST                1 (rtn)
                             690 LOAD_CONST              12 ((' abc ', 'Enter a valid email address'))
                             692 PRECALL                  2
                             696 CALL                     2
                             706 POP_TOP
                
-                985         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+               1004         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                
-                986         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+               1005         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
                             732 LOAD_CONST              13 (('id1', 'first label'))
                             734 LOAD_CONST              14 (('id2', 'second label'))
                             736 BUILD_LIST               2
                             738 LOAD_CONST              15 ('zero')
                             740 KW_NAMES                16
                             742 PRECALL                  2
                             746 CALL                     2
                
-                985         756 PRECALL                  1
+               1004         756 PRECALL                  1
                             760 CALL                     1
                
-                987         770 LOAD_METHOD              4 (options)
+               1006         770 LOAD_METHOD              4 (options)
                             792 LOAD_CONST              17 (False)
                             794 KW_NAMES                16
                             796 PRECALL                  1
                             800 CALL                     1
                
-                985         810 STORE_FAST               1 (rtn)
+               1004         810 STORE_FAST               1 (rtn)
                
-                988         812 LOAD_FAST                0 (self)
+               1007         812 LOAD_FAST                0 (self)
                             814 LOAD_METHOD              2 (assertEqual)
                
-                989         836 LOAD_FAST                1 (rtn)
+               1008         836 LOAD_FAST                1 (rtn)
                             838 BUILD_LIST               0
                             840 LOAD_CONST              18 ((('', ''), ('id1', 'first label'), ('id2', 'second label')))
                             842 LIST_EXTEND              1
                
-                988         844 PRECALL                  2
+               1007         844 PRECALL                  2
                             848 CALL                     2
                             858 POP_TOP
                
-                991         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+               1010         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                
-                992         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+               1011         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
                             884 LOAD_CONST              13 (('id1', 'first label'))
                             886 LOAD_CONST              14 (('id2', 'second label'))
                             888 BUILD_LIST               2
                             890 LOAD_CONST              15 ('zero')
                             892 KW_NAMES                16
                             894 PRECALL                  2
                             898 CALL                     2
                
-                991         908 PRECALL                  1
+               1010         908 PRECALL                  1
                             912 CALL                     1
                
-                993         922 LOAD_METHOD              4 (options)
+               1012         922 LOAD_METHOD              4 (options)
                             944 PRECALL                  0
                             948 CALL                     0
                
-                991         958 STORE_FAST               1 (rtn)
+               1010         958 STORE_FAST               1 (rtn)
                
-                994         960 LOAD_FAST                0 (self)
+               1013         960 LOAD_FAST                0 (self)
                             962 LOAD_METHOD              2 (assertEqual)
                
-                995         984 LOAD_FAST                1 (rtn)
+               1014         984 LOAD_FAST                1 (rtn)
                             986 BUILD_LIST               0
                             988 LOAD_CONST              19 ((('', 'zero'), ('id1', 'first label'), ('id2', 'second label')))
                             990 LIST_EXTEND              1
                
-                994         992 PRECALL                  2
+               1013         992 PRECALL                  2
                             996 CALL                     2
                            1006 POP_TOP
                
-                997        1008 PUSH_NULL
+               1016        1008 PUSH_NULL
                            1010 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1022 LOAD_GLOBAL             11 (NULL + IS_LOWER)
                            1034 PRECALL                  0
                            1038 CALL                     0
                            1048 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            1060 PRECALL                  0
                            1064 CALL                     0
@@ -11065,23 +11243,23 @@
                            1076 PRECALL                  1
                            1080 CALL                     1
                            1090 LOAD_CONST              20 ('AAA')
                            1092 PRECALL                  1
                            1096 CALL                     1
                            1106 STORE_FAST               1 (rtn)
                
-                998        1108 LOAD_FAST                0 (self)
+               1017        1108 LOAD_FAST                0 (self)
                            1110 LOAD_METHOD              2 (assertEqual)
                            1132 LOAD_FAST                1 (rtn)
                            1134 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
                            1136 PRECALL                  2
                            1140 CALL                     2
                            1150 POP_TOP
                
-                999        1152 PUSH_NULL
+               1018        1152 PUSH_NULL
                            1154 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1166 LOAD_GLOBAL             11 (NULL + IS_LOWER)
                            1178 PRECALL                  0
                            1182 CALL                     0
                            1192 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            1204 PRECALL                  0
                            1208 CALL                     0
@@ -11089,95 +11267,95 @@
                            1220 PRECALL                  1
                            1224 CALL                     1
                            1234 LOAD_CONST              20 ('AAA')
                            1236 PRECALL                  1
                            1240 CALL                     1
                            1250 STORE_FAST               1 (rtn)
                
-               1000        1252 LOAD_FAST                0 (self)
+               1019        1252 LOAD_FAST                0 (self)
                            1254 LOAD_METHOD              2 (assertEqual)
                            1276 LOAD_FAST                1 (rtn)
                            1278 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
                            1280 PRECALL                  2
                            1284 CALL                     2
                            1294 POP_TOP
                
-               1001        1296 PUSH_NULL
+               1020        1296 PUSH_NULL
                            1298 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1310 LOAD_FAST                0 (self)
                            1312 LOAD_METHOD              6 (CustomValidator)
                            1334 PRECALL                  0
                            1338 CALL                     0
                            1348 PRECALL                  1
                            1352 CALL                     1
                            1362 LOAD_CONST              22 (1)
                            1364 PRECALL                  1
                            1368 CALL                     1
                            1378 STORE_FAST               1 (rtn)
                
-               1002        1380 LOAD_FAST                0 (self)
+               1021        1380 LOAD_FAST                0 (self)
                            1382 LOAD_METHOD              2 (assertEqual)
                            1404 LOAD_FAST                1 (rtn)
                            1406 LOAD_CONST              23 ((1, None))
                            1408 PRECALL                  2
                            1412 CALL                     2
                            1422 POP_TOP
                
-               1003        1424 PUSH_NULL
+               1022        1424 PUSH_NULL
                            1426 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1438 LOAD_FAST                0 (self)
                            1440 LOAD_METHOD              6 (CustomValidator)
                            1462 PRECALL                  0
                            1466 CALL                     0
                            1476 PRECALL                  1
                            1480 CALL                     1
                            1490 LOAD_CONST              24 (0)
                            1492 PRECALL                  1
                            1496 CALL                     1
                            1506 STORE_FAST               1 (rtn)
                
-               1004        1508 LOAD_FAST                0 (self)
+               1023        1508 LOAD_FAST                0 (self)
                            1510 LOAD_METHOD              2 (assertEqual)
                            1532 LOAD_FAST                1 (rtn)
                            1534 LOAD_CONST              25 ((0, 'invalid!'))
                            1536 PRECALL                  2
                            1540 CALL                     2
                            1550 POP_TOP
                
-               1005        1552 PUSH_NULL
+               1024        1552 PUSH_NULL
                            1554 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1566 LOAD_FAST                0 (self)
                            1568 LOAD_ATTR                7 (custom_validator_func)
                            1578 PRECALL                  1
                            1582 CALL                     1
                            1592 LOAD_CONST              22 (1)
                            1594 PRECALL                  1
                            1598 CALL                     1
                            1608 STORE_FAST               1 (rtn)
                
-               1006        1610 LOAD_FAST                0 (self)
+               1025        1610 LOAD_FAST                0 (self)
                            1612 LOAD_METHOD              2 (assertEqual)
                            1634 LOAD_FAST                1 (rtn)
                            1636 LOAD_CONST              23 ((1, None))
                            1638 PRECALL                  2
                            1642 CALL                     2
                            1652 POP_TOP
                
-               1007        1654 PUSH_NULL
+               1026        1654 PUSH_NULL
                            1656 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1668 LOAD_FAST                0 (self)
                            1670 LOAD_ATTR                7 (custom_validator_func)
                            1680 PRECALL                  1
                            1684 CALL                     1
                            1694 LOAD_CONST              24 (0)
                            1696 PRECALL                  1
                            1700 CALL                     1
                            1710 STORE_FAST               1 (rtn)
                
-               1008        1712 LOAD_FAST                0 (self)
+               1027        1712 LOAD_FAST                0 (self)
                            1714 LOAD_METHOD              2 (assertEqual)
                            1736 LOAD_FAST                1 (rtn)
                            1738 LOAD_CONST              25 ((0, 'invalid!'))
                            1740 PRECALL                  2
                            1744 CALL                     2
                            1754 POP_TOP
                            1756 LOAD_CONST               0 (None)
@@ -11211,41 +11389,41 @@
                   (0, 'invalid!')
                names      ('IS_EMPTY_OR', 'IS_EMAIL', 'assertEqual', 'IS_IN_SET', 'options', 'IS_LOWER', 'CustomValidator', 'custom_validator_func')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMPTY_OR'
-               firstlineno 972
+               firstlineno 991
                lnotab
                   0x020148012c0148012c014c012c014e012c0148012c0148012c010c0124
                   ff0e0228fe0203180108ff10030c0124ff0e0224fe0203180108ff100364
                   012c0164012c0154012c0154012c013a012c013a01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
                   0x97000200740100000000000000000000a6000000ab0000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016402a6020000ab0200000000000000
                   00010064005300
-               1010           0 RESUME                   0
+               1029           0 RESUME                   0
                
-               1011           2 PUSH_NULL
+               1030           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + CLEANUP)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('hello')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1012          48 LOAD_FAST                0 (self)
+               1031          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('hello', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                              92 LOAD_CONST               0 (None)
@@ -11256,15 +11434,15 @@
                   ('hello', None)
                names      ('CLEANUP', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CLEANUP'
-               firstlineno 1010
+               firstlineno 1029
                lnotab 0x02012e01
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 8
                flags     : 3
                code
@@ -11314,17 +11492,17 @@
                   00000000000000000064016413ac03a6020000ab02000000000000000064
                   04a6010000ab0100000000000000006405190000000000000000007c03a6
                   020000ab02000000000000000001007c00a0030000000000000000000000
                   000000000000000000020074030000000000000000000064016413ac03a6
                   020000ab0200000000000000006404a6010000ab01000000000000000064
                   05190000000000000000007c0364146400850219000000000000000000a6
                   020000ab020000000000000000010064005300
-               1014           0 RESUME                   0
+               1033           0 RESUME                   0
                
-               1015           2 LOAD_GLOBAL              1 (NULL + str)
+               1034           2 LOAD_GLOBAL              1 (NULL + str)
                              14 PUSH_NULL
                              16 LOAD_GLOBAL              3 (NULL + CRYPT)
                              28 LOAD_CONST               1 ('md5')
                              30 LOAD_CONST               2 (True)
                              32 KW_NAMES                 3
                              34 PRECALL                  2
                              38 CALL                     2
@@ -11333,23 +11511,23 @@
                              54 CALL                     1
                              64 LOAD_CONST               5 (0)
                              66 BINARY_SUBSCR
                              76 PRECALL                  1
                              80 CALL                     1
                              90 STORE_FAST               1 (rtn)
                
-               1016          92 LOAD_FAST                0 (self)
+               1035          92 LOAD_FAST                0 (self)
                              94 LOAD_METHOD              2 (myassertRegex)
                             116 LOAD_FAST                1 (rtn)
                             118 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             120 PRECALL                  2
                             124 CALL                     2
                             134 POP_TOP
                
-               1017         136 LOAD_GLOBAL              1 (NULL + str)
+               1036         136 LOAD_GLOBAL              1 (NULL + str)
                             148 PUSH_NULL
                             150 LOAD_GLOBAL              3 (NULL + CRYPT)
                             162 LOAD_CONST               7 ('sha1')
                             164 LOAD_CONST               2 (True)
                             166 KW_NAMES                 3
                             168 PRECALL                  2
                             172 CALL                     2
@@ -11358,23 +11536,23 @@
                             188 CALL                     1
                             198 LOAD_CONST               5 (0)
                             200 BINARY_SUBSCR
                             210 PRECALL                  1
                             214 CALL                     1
                             224 STORE_FAST               1 (rtn)
                
-               1018         226 LOAD_FAST                0 (self)
+               1037         226 LOAD_FAST                0 (self)
                             228 LOAD_METHOD              2 (myassertRegex)
                             250 LOAD_FAST                1 (rtn)
                             252 LOAD_CONST               8 ('^sha1\\$.{16}\\$.{40}$')
                             254 PRECALL                  2
                             258 CALL                     2
                             268 POP_TOP
                
-               1019         270 LOAD_GLOBAL              1 (NULL + str)
+               1038         270 LOAD_GLOBAL              1 (NULL + str)
                             282 PUSH_NULL
                             284 LOAD_GLOBAL              3 (NULL + CRYPT)
                             296 LOAD_CONST               9 ('sha256')
                             298 LOAD_CONST               2 (True)
                             300 KW_NAMES                 3
                             302 PRECALL                  2
                             306 CALL                     2
@@ -11383,23 +11561,23 @@
                             322 CALL                     1
                             332 LOAD_CONST               5 (0)
                             334 BINARY_SUBSCR
                             344 PRECALL                  1
                             348 CALL                     1
                             358 STORE_FAST               1 (rtn)
                
-               1020         360 LOAD_FAST                0 (self)
+               1039         360 LOAD_FAST                0 (self)
                             362 LOAD_METHOD              2 (myassertRegex)
                             384 LOAD_FAST                1 (rtn)
                             386 LOAD_CONST              10 ('^sha256\\$.{16}\\$.{64}$')
                             388 PRECALL                  2
                             392 CALL                     2
                             402 POP_TOP
                
-               1021         404 LOAD_GLOBAL              1 (NULL + str)
+               1040         404 LOAD_GLOBAL              1 (NULL + str)
                             416 PUSH_NULL
                             418 LOAD_GLOBAL              3 (NULL + CRYPT)
                             430 LOAD_CONST              11 ('sha384')
                             432 LOAD_CONST               2 (True)
                             434 KW_NAMES                 3
                             436 PRECALL                  2
                             440 CALL                     2
@@ -11408,23 +11586,23 @@
                             456 CALL                     1
                             466 LOAD_CONST               5 (0)
                             468 BINARY_SUBSCR
                             478 PRECALL                  1
                             482 CALL                     1
                             492 STORE_FAST               1 (rtn)
                
-               1022         494 LOAD_FAST                0 (self)
+               1041         494 LOAD_FAST                0 (self)
                             496 LOAD_METHOD              2 (myassertRegex)
                             518 LOAD_FAST                1 (rtn)
                             520 LOAD_CONST              12 ('^sha384\\$.{16}\\$.{96}$')
                             522 PRECALL                  2
                             526 CALL                     2
                             536 POP_TOP
                
-               1023         538 LOAD_GLOBAL              1 (NULL + str)
+               1042         538 LOAD_GLOBAL              1 (NULL + str)
                             550 PUSH_NULL
                             552 LOAD_GLOBAL              3 (NULL + CRYPT)
                             564 LOAD_CONST              13 ('sha512')
                             566 LOAD_CONST               2 (True)
                             568 KW_NAMES                 3
                             570 PRECALL                  2
                             574 CALL                     2
@@ -11433,26 +11611,26 @@
                             590 CALL                     1
                             600 LOAD_CONST               5 (0)
                             602 BINARY_SUBSCR
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1024         628 LOAD_FAST                0 (self)
+               1043         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              2 (myassertRegex)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              14 ('^sha512\\$.{16}\\$.{128}$')
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1025         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
+               1044         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
                             674 STORE_FAST               2 (alg)
                
-               1026         676 LOAD_GLOBAL              1 (NULL + str)
+               1045         676 LOAD_GLOBAL              1 (NULL + str)
                             688 PUSH_NULL
                             690 LOAD_GLOBAL              3 (NULL + CRYPT)
                             702 LOAD_FAST                2 (alg)
                             704 LOAD_CONST               2 (True)
                             706 KW_NAMES                 3
                             708 PRECALL                  2
                             712 CALL                     2
@@ -11461,23 +11639,23 @@
                             728 CALL                     1
                             738 LOAD_CONST               5 (0)
                             740 BINARY_SUBSCR
                             750 PRECALL                  1
                             754 CALL                     1
                             764 STORE_FAST               1 (rtn)
                
-               1027         766 LOAD_FAST                0 (self)
+               1046         766 LOAD_FAST                0 (self)
                             768 LOAD_METHOD              2 (myassertRegex)
                             790 LOAD_FAST                1 (rtn)
                             792 LOAD_CONST              16 ('^pbkdf2\\(1000,20,sha512\\)\\$.{16}\\$.{40}$')
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1028         810 LOAD_GLOBAL              1 (NULL + str)
+               1047         810 LOAD_GLOBAL              1 (NULL + str)
                             822 PUSH_NULL
                             824 LOAD_GLOBAL              3 (NULL + CRYPT)
                             836 LOAD_CONST               1 ('md5')
                             838 LOAD_CONST              17 ('mykey')
                             840 LOAD_CONST               2 (True)
                             842 KW_NAMES                18
                             844 PRECALL                  3
@@ -11487,23 +11665,23 @@
                             864 CALL                     1
                             874 LOAD_CONST               5 (0)
                             876 BINARY_SUBSCR
                             886 PRECALL                  1
                             890 CALL                     1
                             900 STORE_FAST               1 (rtn)
                
-               1029         902 LOAD_FAST                0 (self)
+               1048         902 LOAD_FAST                0 (self)
                             904 LOAD_METHOD              2 (myassertRegex)
                             926 LOAD_FAST                1 (rtn)
                             928 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             930 PRECALL                  2
                             934 CALL                     2
                             944 POP_TOP
                
-               1030         946 LOAD_GLOBAL              1 (NULL + str)
+               1049         946 LOAD_GLOBAL              1 (NULL + str)
                             958 PUSH_NULL
                             960 LOAD_GLOBAL              3 (NULL + CRYPT)
                             972 LOAD_CONST               7 ('sha1')
                             974 LOAD_CONST              19 (False)
                             976 KW_NAMES                 3
                             978 PRECALL                  2
                             982 CALL                     2
@@ -11512,15 +11690,15 @@
                             998 CALL                     1
                            1008 LOAD_CONST               5 (0)
                            1010 BINARY_SUBSCR
                            1020 PRECALL                  1
                            1024 CALL                     1
                            1034 STORE_FAST               3 (a)
                
-               1031        1036 LOAD_FAST                0 (self)
+               1050        1036 LOAD_FAST                0 (self)
                            1038 LOAD_METHOD              3 (assertEqual)
                            1060 PUSH_NULL
                            1062 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1074 LOAD_CONST               7 ('sha1')
                            1076 LOAD_CONST              19 (False)
                            1078 KW_NAMES                 3
                            1080 PRECALL                  2
@@ -11531,15 +11709,15 @@
                            1110 LOAD_CONST               5 (0)
                            1112 BINARY_SUBSCR
                            1122 LOAD_FAST                3 (a)
                            1124 PRECALL                  2
                            1128 CALL                     2
                            1138 POP_TOP
                
-               1032        1140 LOAD_FAST                0 (self)
+               1051        1140 LOAD_FAST                0 (self)
                            1142 LOAD_METHOD              3 (assertEqual)
                            1164 PUSH_NULL
                            1166 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1178 LOAD_CONST               7 ('sha1')
                            1180 LOAD_CONST              19 (False)
                            1182 KW_NAMES                 3
                            1184 PRECALL                  2
@@ -11554,15 +11732,15 @@
                            1230 LOAD_CONST               0 (None)
                            1232 BUILD_SLICE              2
                            1234 BINARY_SUBSCR
                            1244 PRECALL                  2
                            1248 CALL                     2
                            1258 POP_TOP
                
-               1033        1260 LOAD_FAST                0 (self)
+               1052        1260 LOAD_FAST                0 (self)
                            1262 LOAD_METHOD              3 (assertEqual)
                            1284 PUSH_NULL
                            1286 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1298 LOAD_CONST               1 ('md5')
                            1300 LOAD_CONST              19 (False)
                            1302 KW_NAMES                 3
                            1304 PRECALL                  2
@@ -11573,15 +11751,15 @@
                            1334 LOAD_CONST               5 (0)
                            1336 BINARY_SUBSCR
                            1346 LOAD_FAST                3 (a)
                            1348 PRECALL                  2
                            1352 CALL                     2
                            1362 POP_TOP
                
-               1034        1364 LOAD_FAST                0 (self)
+               1053        1364 LOAD_FAST                0 (self)
                            1366 LOAD_METHOD              3 (assertEqual)
                            1388 PUSH_NULL
                            1390 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1402 LOAD_CONST               1 ('md5')
                            1404 LOAD_CONST              19 (False)
                            1406 KW_NAMES                 3
                            1408 PRECALL                  2
@@ -11625,15 +11803,15 @@
                   6
                names      ('str', 'CRYPT', 'myassertRegex', 'assertEqual')
                varnames   ('self', 'rtn', 'alg', 'a')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CRYPT'
-               firstlineno 1014
+               firstlineno 1033
                lnotab
                   0x02015a012c015a012c015a012c015a012c015a012c0104015a012c015c
                   012c015a01680178016801
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
@@ -11692,385 +11870,385 @@
                   000000000000000000000000000000000000007c016427641fa003000000
                   0000000000000000000000000000000000642864296702a6010000ab0100
                   000000000000006602a6020000ab02000000000000000001000200740100
                   000000000000000000642a642a642a6401ac2ba6040000ab040000000000
                   0000006427a6010000ab0100000000000000007d017c00a0010000000000
                   0000000000000000000000000000007c01642ca6020000ab020000000000
                   000000010064005300
-               1036           0 RESUME                   0
+               1055           0 RESUME                   0
                
-               1037           2 PUSH_NULL
+               1056           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                              16 LOAD_CONST               1 (True)
                              18 KW_NAMES                 2
                              20 PRECALL                  1
                              24 CALL                     1
                              34 LOAD_CONST               3 ('Abcd1234')
                              36 PRECALL                  1
                              40 CALL                     1
                              50 STORE_FAST               1 (rtn)
                
-               1038          52 LOAD_FAST                0 (self)
+               1057          52 LOAD_FAST                0 (self)
                              54 LOAD_METHOD              1 (assertEqual)
                
-               1039          76 LOAD_FAST                1 (rtn)
+               1058          76 LOAD_FAST                1 (rtn)
                
-               1040          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
+               1059          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
                
-               1038          80 PRECALL                  2
+               1057          80 PRECALL                  2
                              84 CALL                     2
                              94 POP_TOP
                
-               1045          96 PUSH_NULL
+               1064          96 PUSH_NULL
                              98 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             110 LOAD_CONST               1 (True)
                             112 KW_NAMES                 2
                             114 PRECALL                  1
                             118 CALL                     1
                             128 LOAD_CONST               5 ('Abcd1234!')
                             130 PRECALL                  1
                             134 CALL                     1
                             144 STORE_FAST               1 (rtn)
                
-               1046         146 LOAD_FAST                0 (self)
+               1065         146 LOAD_FAST                0 (self)
                             148 LOAD_METHOD              1 (assertEqual)
                             170 LOAD_FAST                1 (rtn)
                             172 LOAD_CONST               6 (('Abcd1234!', None))
                             174 PRECALL                  2
                             178 CALL                     2
                             188 POP_TOP
                
-               1047         190 PUSH_NULL
+               1066         190 PUSH_NULL
                             192 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             204 LOAD_CONST               1 (True)
                             206 LOAD_CONST               7 (1)
                             208 KW_NAMES                 8
                             210 PRECALL                  2
                             214 CALL                     2
                             224 LOAD_CONST               9 ('a')
                             226 PRECALL                  1
                             230 CALL                     1
                             240 STORE_FAST               1 (rtn)
                
-               1048         242 LOAD_FAST                0 (self)
+               1067         242 LOAD_FAST                0 (self)
                             244 LOAD_METHOD              1 (assertEqual)
                             266 LOAD_FAST                1 (rtn)
                             268 LOAD_CONST              10 (('a', None))
                             270 PRECALL                  2
                             274 CALL                     2
                             284 POP_TOP
                
-               1049         286 PUSH_NULL
+               1068         286 PUSH_NULL
                             288 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             300 LOAD_CONST               1 (True)
                             302 LOAD_CONST               7 (1)
                             304 LOAD_CONST              11 (2)
                             306 KW_NAMES                12
                             308 PRECALL                  3
                             312 CALL                     3
                             322 LOAD_CONST               9 ('a')
                             324 PRECALL                  1
                             328 CALL                     1
                             338 STORE_FAST               1 (rtn)
                
-               1050         340 LOAD_FAST                0 (self)
+               1069         340 LOAD_FAST                0 (self)
                             342 LOAD_METHOD              1 (assertEqual)
                             364 LOAD_FAST                1 (rtn)
                             366 LOAD_CONST              13 (('a', 'Minimum length is 2'))
                             368 PRECALL                  2
                             372 CALL                     2
                             382 POP_TOP
                
-               1051         384 PUSH_NULL
+               1070         384 PUSH_NULL
                             386 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             398 LOAD_CONST               1 (True)
                             400 LOAD_CONST              14 (100)
                             402 KW_NAMES                 8
                             404 PRECALL                  2
                             408 CALL                     2
                             418 LOAD_CONST              15 ('abc123')
                             420 PRECALL                  1
                             424 CALL                     1
                             434 STORE_FAST               1 (rtn)
                
-               1052         436 LOAD_FAST                0 (self)
+               1071         436 LOAD_FAST                0 (self)
                             438 LOAD_METHOD              1 (assertEqual)
                             460 LOAD_FAST                1 (rtn)
                             462 LOAD_CONST              16 (('abc123', 'Password too simple (32.35/100)'))
                             464 PRECALL                  2
                             468 CALL                     2
                             478 POP_TOP
                
-               1053         480 PUSH_NULL
+               1072         480 PUSH_NULL
                             482 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             494 LOAD_CONST               1 (True)
                             496 LOAD_CONST              14 (100)
                             498 KW_NAMES                 8
                             500 PRECALL                  2
                             504 CALL                     2
                             514 LOAD_CONST              17 ('and')
                             516 PRECALL                  1
                             520 CALL                     1
                             530 STORE_FAST               1 (rtn)
                
-               1054         532 LOAD_FAST                0 (self)
+               1073         532 LOAD_FAST                0 (self)
                             534 LOAD_METHOD              1 (assertEqual)
                             556 LOAD_FAST                1 (rtn)
                             558 LOAD_CONST              18 (('and', 'Password too simple (14.57/100)'))
                             560 PRECALL                  2
                             564 CALL                     2
                             574 POP_TOP
                
-               1055         576 PUSH_NULL
+               1074         576 PUSH_NULL
                             578 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             590 LOAD_CONST               1 (True)
                             592 LOAD_CONST              14 (100)
                             594 KW_NAMES                 8
                             596 PRECALL                  2
                             600 CALL                     2
                             610 LOAD_CONST              19 ('aaa')
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1056         628 LOAD_FAST                0 (self)
+               1075         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              1 (assertEqual)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              20 (('aaa', 'Password too simple (14.42/100)'))
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1057         672 PUSH_NULL
+               1076         672 PUSH_NULL
                             674 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             686 LOAD_CONST               1 (True)
                             688 LOAD_CONST              14 (100)
                             690 KW_NAMES                 8
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_CONST              21 ('a1d')
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               1 (rtn)
                
-               1058         724 LOAD_FAST                0 (self)
+               1077         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              1 (assertEqual)
                             748 LOAD_FAST                1 (rtn)
                             750 LOAD_CONST              22 (('a1d', 'Password too simple (15.97/100)'))
                             752 PRECALL                  2
                             756 CALL                     2
                             766 POP_TOP
                
-               1059         768 PUSH_NULL
+               1078         768 PUSH_NULL
                             770 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             782 LOAD_CONST               1 (True)
                             784 LOAD_CONST              14 (100)
                             786 KW_NAMES                 8
                             788 PRECALL                  2
                             792 CALL                     2
                             802 LOAD_CONST              23 ('ad')
                             804 PRECALL                  1
                             808 CALL                     1
                             818 STORE_FAST               1 (rtn)
                
-               1060         820 LOAD_GLOBAL              4 (PY2)
+               1079         820 LOAD_GLOBAL              4 (PY2)
                             832 POP_JUMP_FORWARD_IF_FALSE    23 (to 880)
                
-               1061         834 LOAD_FAST                0 (self)
+               1080         834 LOAD_FAST                0 (self)
                             836 LOAD_METHOD              1 (assertEqual)
                             858 LOAD_FAST                1 (rtn)
                             860 LOAD_CONST              24 (('ad', 'Password too simple (32.66/100)'))
                             862 PRECALL                  2
                             866 CALL                     2
                             876 POP_TOP
                             878 JUMP_FORWARD            22 (to 924)
                
-               1063     >>  880 LOAD_FAST                0 (self)
+               1082     >>  880 LOAD_FAST                0 (self)
                             882 LOAD_METHOD              1 (assertEqual)
                             904 LOAD_FAST                1 (rtn)
                             906 LOAD_CONST              25 (('ad', 'Password too simple (31.26/100)'))
                             908 PRECALL                  2
                             912 CALL                     2
                             922 POP_TOP
                
-               1064     >>  924 PUSH_NULL
+               1083     >>  924 PUSH_NULL
                             926 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             938 PRECALL                  0
                             942 CALL                     0
                             952 LOAD_CONST              26 ('********')
                             954 PRECALL                  1
                             958 CALL                     1
                             968 STORE_FAST               1 (rtn)
                
-               1065         970 LOAD_FAST                0 (self)
+               1084         970 LOAD_FAST                0 (self)
                             972 LOAD_METHOD              1 (assertEqual)
                             994 LOAD_FAST                1 (rtn)
                             996 LOAD_CONST              27 (('********', None))
                             998 PRECALL                  2
                            1002 CALL                     2
                            1012 POP_TOP
                
-               1066        1014 PUSH_NULL
+               1085        1014 PUSH_NULL
                            1016 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1028 LOAD_CONST               1 (True)
                            1030 LOAD_CONST              28 (4)
                            1032 KW_NAMES                29
                            1034 PRECALL                  2
                            1038 CALL                     2
                            1048 LOAD_CONST              30 ('abcde')
                            1050 PRECALL                  1
                            1054 CALL                     1
                            1064 STORE_FAST               1 (rtn)
                
-               1067        1066 LOAD_FAST                0 (self)
+               1086        1066 LOAD_FAST                0 (self)
                            1068 LOAD_METHOD              1 (assertEqual)
                
-               1068        1090 LOAD_FAST                1 (rtn)
+               1087        1090 LOAD_FAST                1 (rtn)
                
-               1070        1092 LOAD_CONST              30 ('abcde')
+               1089        1092 LOAD_CONST              30 ('abcde')
                
-               1071        1094 LOAD_CONST              31 ('|')
+               1090        1094 LOAD_CONST              31 ('|')
                            1096 LOAD_METHOD              3 (join)
                
-               1072        1118 BUILD_LIST               0
+               1091        1118 BUILD_LIST               0
                            1120 LOAD_CONST              32 (('Minimum length is 8', 'Maximum length is 4', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1122 LIST_EXTEND              1
                
-               1071        1124 PRECALL                  1
+               1090        1124 PRECALL                  1
                            1128 CALL                     1
                
-               1069        1138 BUILD_TUPLE              2
+               1088        1138 BUILD_TUPLE              2
                
-               1067        1140 PRECALL                  2
+               1086        1140 PRECALL                  2
                            1144 CALL                     2
                            1154 POP_TOP
                
-               1082        1156 PUSH_NULL
+               1101        1156 PUSH_NULL
                            1158 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1170 LOAD_CONST               1 (True)
                            1172 KW_NAMES                 2
                            1174 PRECALL                  1
                            1178 CALL                     1
                            1188 LOAD_CONST              30 ('abcde')
                            1190 PRECALL                  1
                            1194 CALL                     1
                            1204 STORE_FAST               1 (rtn)
                
-               1083        1206 LOAD_FAST                0 (self)
+               1102        1206 LOAD_FAST                0 (self)
                            1208 LOAD_METHOD              1 (assertEqual)
                
-               1084        1230 LOAD_FAST                1 (rtn)
+               1103        1230 LOAD_FAST                1 (rtn)
                
-               1086        1232 LOAD_CONST              30 ('abcde')
+               1105        1232 LOAD_CONST              30 ('abcde')
                
-               1087        1234 LOAD_CONST              31 ('|')
+               1106        1234 LOAD_CONST              31 ('|')
                            1236 LOAD_METHOD              3 (join)
                
-               1088        1258 BUILD_LIST               0
+               1107        1258 BUILD_LIST               0
                            1260 LOAD_CONST              33 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1262 LIST_EXTEND              1
                
-               1087        1264 PRECALL                  1
+               1106        1264 PRECALL                  1
                            1268 CALL                     1
                
-               1085        1278 BUILD_TUPLE              2
+               1104        1278 BUILD_TUPLE              2
                
-               1083        1280 PRECALL                  2
+               1102        1280 PRECALL                  2
                            1284 CALL                     2
                            1294 POP_TOP
                
-               1097        1296 PUSH_NULL
+               1116        1296 PUSH_NULL
                            1298 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1310 LOAD_CONST              34 (0)
                            1312 LOAD_CONST              34 (0)
                            1314 LOAD_CONST              34 (0)
                            1316 LOAD_CONST               1 (True)
                            1318 KW_NAMES                35
                            1320 PRECALL                  4
                            1324 CALL                     4
                            1334 LOAD_CONST              36 ('Abcde1')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               1 (rtn)
                
-               1098        1352 LOAD_FAST                0 (self)
+               1117        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              1 (assertEqual)
                
-               1099        1376 LOAD_FAST                1 (rtn)
+               1118        1376 LOAD_FAST                1 (rtn)
                
-               1101        1378 LOAD_CONST              36 ('Abcde1')
+               1120        1378 LOAD_CONST              36 ('Abcde1')
                
-               1102        1380 LOAD_CONST              31 ('|')
+               1121        1380 LOAD_CONST              31 ('|')
                            1382 LOAD_METHOD              3 (join)
                
-               1103        1404 BUILD_LIST               0
+               1122        1404 BUILD_LIST               0
                            1406 LOAD_CONST              37 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'May not include any uppercase letters', 'May not include any lowercase letters', 'May not include any numbers'))
                            1408 LIST_EXTEND              1
                
-               1102        1410 PRECALL                  1
+               1121        1410 PRECALL                  1
                            1414 CALL                     1
                
-               1100        1424 BUILD_TUPLE              2
+               1119        1424 BUILD_TUPLE              2
                
-               1098        1426 PRECALL                  2
+               1117        1426 PRECALL                  2
                            1430 CALL                     2
                            1440 POP_TOP
                
-               1113        1442 PUSH_NULL
+               1132        1442 PUSH_NULL
                            1444 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1456 LOAD_CONST              34 (0)
                            1458 LOAD_CONST               1 (True)
                            1460 KW_NAMES                38
                            1462 PRECALL                  2
                            1466 CALL                     2
                            1476 LOAD_CONST              39 ('Abcde1!')
                            1478 PRECALL                  1
                            1482 CALL                     1
                            1492 STORE_FAST               1 (rtn)
                
-               1114        1494 LOAD_FAST                0 (self)
+               1133        1494 LOAD_FAST                0 (self)
                            1496 LOAD_METHOD              1 (assertEqual)
                
-               1115        1518 LOAD_FAST                1 (rtn)
+               1134        1518 LOAD_FAST                1 (rtn)
                
-               1117        1520 LOAD_CONST              39 ('Abcde1!')
+               1136        1520 LOAD_CONST              39 ('Abcde1!')
                
-               1118        1522 LOAD_CONST              31 ('|')
+               1137        1522 LOAD_CONST              31 ('|')
                            1524 LOAD_METHOD              3 (join)
                
-               1120        1546 LOAD_CONST              40 ('Minimum length is 8')
+               1139        1546 LOAD_CONST              40 ('Minimum length is 8')
                
-               1121        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
+               1140        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
                
-               1119        1550 BUILD_LIST               2
+               1138        1550 BUILD_LIST               2
                
-               1118        1552 PRECALL                  1
+               1137        1552 PRECALL                  1
                            1556 CALL                     1
                
-               1116        1566 BUILD_TUPLE              2
+               1135        1566 BUILD_TUPLE              2
                
-               1114        1568 PRECALL                  2
+               1133        1568 PRECALL                  2
                            1572 CALL                     2
                            1582 POP_TOP
                
-               1126        1584 PUSH_NULL
+               1145        1584 PUSH_NULL
                            1586 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1598 LOAD_CONST              42 (False)
                            1600 LOAD_CONST              42 (False)
                            1602 LOAD_CONST              42 (False)
                            1604 LOAD_CONST               1 (True)
                            1606 KW_NAMES                43
                            1608 PRECALL                  4
                            1612 CALL                     4
                            1622 LOAD_CONST              39 ('Abcde1!')
                            1624 PRECALL                  1
                            1628 CALL                     1
                            1638 STORE_FAST               1 (rtn)
                
-               1127        1640 LOAD_FAST                0 (self)
+               1146        1640 LOAD_FAST                0 (self)
                            1642 LOAD_METHOD              1 (assertEqual)
                            1664 LOAD_FAST                1 (rtn)
                            1666 LOAD_CONST              44 (('Abcde1!', 'Minimum length is 8'))
                            1668 PRECALL                  2
                            1672 CALL                     2
                            1682 POP_TOP
                            1684 LOAD_CONST               0 (None)
@@ -12123,15 +12301,15 @@
                   ('Abcde1!', 'Minimum length is 8')
                names      ('IS_STRONG', 'assertEqual', 'PY2', 'join')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_STRONG'
-               firstlineno 1036
+               firstlineno 1055
                lnotab
                   0x020132011801020102fe100732012c0134012c0136012c0134012c0134
                   012c0134012c0134012c0134010e012e022c012e012c0134011801020202
                   01180106ff0efe02fe100f3201180102020201180106ff0efe02fe100e38
                   01180102020201180106ff0efe02fe100f34011801020202011802020102
                   fe02ff0efe02fe100c3801
             code
@@ -12198,428 +12376,428 @@
                   020000ab0200000000000000007c02a6010000ab0100000000000000007d
                   037c00a00200000000000000000000000000000000000000007c037c0264
                   076602a6020000ab020000000000000000010002007c0164036410640564
                   06a6040000ab0400000000000000007d0202007403000000000000000000
                   006407ac11a6010000ab0100000000000000007c02a6010000ab01000000
                   00000000007d037c00a00200000000000000000000000000000000000000
                   007c037c0264076602a6020000ab020000000000000000010064005300
-               1129           0 RESUME                   0
+               1148           0 RESUME                   0
                
-               1130           2 PUSH_NULL
+               1149           2 PUSH_NULL
                               4 LOAD_BUILD_CLASS
-                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1130>)
+                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1149>)
                               8 MAKE_FUNCTION            0
                              10 LOAD_CONST               2 ('DummyImageFile')
                              12 LOAD_GLOBAL              0 (object)
                              24 PRECALL                  3
                              28 CALL                     3
                              38 STORE_FAST               1 (DummyImageFile)
                
-               1155          40 PUSH_NULL
+               1174          40 PUSH_NULL
                              42 LOAD_FAST                1 (DummyImageFile)
                              44 LOAD_CONST               3 ('test')
                              46 LOAD_CONST               4 ('bmp')
                              48 LOAD_CONST               5 (50)
                              50 LOAD_CONST               6 (100)
                              52 PRECALL                  4
                              56 CALL                     4
                              66 STORE_FAST               2 (img)
                
-               1156          68 PUSH_NULL
+               1175          68 PUSH_NULL
                              70 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                              82 PRECALL                  0
                              86 CALL                     0
                              96 LOAD_FAST                2 (img)
                              98 PRECALL                  1
                             102 CALL                     1
                             112 STORE_FAST               3 (rtn)
                
-               1157         114 LOAD_FAST                0 (self)
+               1176         114 LOAD_FAST                0 (self)
                             116 LOAD_METHOD              2 (assertEqual)
                             138 LOAD_FAST                3 (rtn)
                             140 LOAD_FAST                2 (img)
                             142 LOAD_CONST               0 (None)
                             144 BUILD_TUPLE              2
                             146 PRECALL                  2
                             150 CALL                     2
                             160 POP_TOP
                
-               1158         162 PUSH_NULL
+               1177         162 PUSH_NULL
                             164 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             176 LOAD_CONST               7 ('oops')
                             178 LOAD_CONST               8 ((100, 50))
                             180 KW_NAMES                 9
                             182 PRECALL                  2
                             186 CALL                     2
                             196 LOAD_FAST                2 (img)
                             198 PRECALL                  1
                             202 CALL                     1
                             212 STORE_FAST               3 (rtn)
                
-               1159         214 LOAD_FAST                0 (self)
+               1178         214 LOAD_FAST                0 (self)
                             216 LOAD_METHOD              2 (assertEqual)
                             238 LOAD_FAST                3 (rtn)
                             240 LOAD_FAST                2 (img)
                             242 LOAD_CONST               7 ('oops')
                             244 BUILD_TUPLE              2
                             246 PRECALL                  2
                             250 CALL                     2
                             260 POP_TOP
                
-               1160         262 PUSH_NULL
+               1179         262 PUSH_NULL
                             264 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             276 LOAD_CONST               7 ('oops')
                             278 LOAD_CONST               8 ((100, 50))
                             280 KW_NAMES                10
                             282 PRECALL                  2
                             286 CALL                     2
                             296 LOAD_FAST                2 (img)
                             298 PRECALL                  1
                             302 CALL                     1
                             312 STORE_FAST               3 (rtn)
                
-               1161         314 LOAD_FAST                0 (self)
+               1180         314 LOAD_FAST                0 (self)
                             316 LOAD_METHOD              2 (assertEqual)
                             338 LOAD_FAST                3 (rtn)
                             340 LOAD_FAST                2 (img)
                             342 LOAD_CONST               7 ('oops')
                             344 BUILD_TUPLE              2
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1162         362 PUSH_NULL
+               1181         362 PUSH_NULL
                             364 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             376 LOAD_CONST               7 ('oops')
                             378 LOAD_CONST              11 ((1, 1))
                             380 KW_NAMES                12
                             382 PRECALL                  2
                             386 CALL                     2
                             396 LOAD_FAST                2 (img)
                             398 PRECALL                  1
                             402 CALL                     1
                             412 STORE_FAST               3 (rtn)
                
-               1163         414 LOAD_FAST                0 (self)
+               1182         414 LOAD_FAST                0 (self)
                             416 LOAD_METHOD              2 (assertEqual)
                             438 LOAD_FAST                3 (rtn)
                             440 LOAD_FAST                2 (img)
                             442 LOAD_CONST               7 ('oops')
                             444 BUILD_TUPLE              2
                             446 PRECALL                  2
                             450 CALL                     2
                             460 POP_TOP
                
-               1165         462 PUSH_NULL
+               1184         462 PUSH_NULL
                             464 LOAD_FAST                1 (DummyImageFile)
                             466 LOAD_CONST               3 ('test')
                             468 LOAD_CONST              13 ('gif')
                             470 LOAD_CONST               5 (50)
                             472 LOAD_CONST               6 (100)
                             474 PRECALL                  4
                             478 CALL                     4
                             488 STORE_FAST               2 (img)
                
-               1166         490 PUSH_NULL
+               1185         490 PUSH_NULL
                             492 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             504 PRECALL                  0
                             508 CALL                     0
                             518 LOAD_FAST                2 (img)
                             520 PRECALL                  1
                             524 CALL                     1
                             534 STORE_FAST               3 (rtn)
                
-               1167         536 LOAD_FAST                0 (self)
+               1186         536 LOAD_FAST                0 (self)
                             538 LOAD_METHOD              2 (assertEqual)
                             560 LOAD_FAST                3 (rtn)
                             562 LOAD_FAST                2 (img)
                             564 LOAD_CONST               0 (None)
                             566 BUILD_TUPLE              2
                             568 PRECALL                  2
                             572 CALL                     2
                             582 POP_TOP
                
-               1168         584 PUSH_NULL
+               1187         584 PUSH_NULL
                             586 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             598 LOAD_CONST               7 ('oops')
                             600 LOAD_CONST               8 ((100, 50))
                             602 KW_NAMES                 9
                             604 PRECALL                  2
                             608 CALL                     2
                             618 LOAD_FAST                2 (img)
                             620 PRECALL                  1
                             624 CALL                     1
                             634 STORE_FAST               3 (rtn)
                
-               1169         636 LOAD_FAST                0 (self)
+               1188         636 LOAD_FAST                0 (self)
                             638 LOAD_METHOD              2 (assertEqual)
                             660 LOAD_FAST                3 (rtn)
                             662 LOAD_FAST                2 (img)
                             664 LOAD_CONST               7 ('oops')
                             666 BUILD_TUPLE              2
                             668 PRECALL                  2
                             672 CALL                     2
                             682 POP_TOP
                
-               1170         684 PUSH_NULL
+               1189         684 PUSH_NULL
                             686 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             698 LOAD_CONST               7 ('oops')
                             700 LOAD_CONST               8 ((100, 50))
                             702 KW_NAMES                10
                             704 PRECALL                  2
                             708 CALL                     2
                             718 LOAD_FAST                2 (img)
                             720 PRECALL                  1
                             724 CALL                     1
                             734 STORE_FAST               3 (rtn)
                
-               1171         736 LOAD_FAST                0 (self)
+               1190         736 LOAD_FAST                0 (self)
                             738 LOAD_METHOD              2 (assertEqual)
                             760 LOAD_FAST                3 (rtn)
                             762 LOAD_FAST                2 (img)
                             764 LOAD_CONST               7 ('oops')
                             766 BUILD_TUPLE              2
                             768 PRECALL                  2
                             772 CALL                     2
                             782 POP_TOP
                
-               1172         784 PUSH_NULL
+               1191         784 PUSH_NULL
                             786 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             798 LOAD_CONST               7 ('oops')
                             800 LOAD_CONST              11 ((1, 1))
                             802 KW_NAMES                12
                             804 PRECALL                  2
                             808 CALL                     2
                             818 LOAD_FAST                2 (img)
                             820 PRECALL                  1
                             824 CALL                     1
                             834 STORE_FAST               3 (rtn)
                
-               1173         836 LOAD_FAST                0 (self)
+               1192         836 LOAD_FAST                0 (self)
                             838 LOAD_METHOD              2 (assertEqual)
                             860 LOAD_FAST                3 (rtn)
                             862 LOAD_FAST                2 (img)
                             864 LOAD_CONST               7 ('oops')
                             866 BUILD_TUPLE              2
                             868 PRECALL                  2
                             872 CALL                     2
                             882 POP_TOP
                
-               1175         884 PUSH_NULL
+               1194         884 PUSH_NULL
                             886 LOAD_FAST                1 (DummyImageFile)
                             888 LOAD_CONST               3 ('test')
                             890 LOAD_CONST              14 ('jpeg')
                             892 LOAD_CONST               5 (50)
                             894 LOAD_CONST               6 (100)
                             896 PRECALL                  4
                             900 CALL                     4
                             910 STORE_FAST               2 (img)
                
-               1176         912 PUSH_NULL
+               1195         912 PUSH_NULL
                             914 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             926 PRECALL                  0
                             930 CALL                     0
                             940 LOAD_FAST                2 (img)
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               3 (rtn)
                
-               1177         958 LOAD_FAST                0 (self)
+               1196         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              2 (assertEqual)
                             982 LOAD_FAST                3 (rtn)
                             984 LOAD_FAST                2 (img)
                             986 LOAD_CONST               0 (None)
                             988 BUILD_TUPLE              2
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1178        1006 PUSH_NULL
+               1197        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1020 LOAD_CONST               7 ('oops')
                            1022 LOAD_CONST               8 ((100, 50))
                            1024 KW_NAMES                 9
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_FAST                2 (img)
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               3 (rtn)
                
-               1179        1058 LOAD_FAST                0 (self)
+               1198        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              2 (assertEqual)
                            1082 LOAD_FAST                3 (rtn)
                            1084 LOAD_FAST                2 (img)
                            1086 LOAD_CONST               7 ('oops')
                            1088 BUILD_TUPLE              2
                            1090 PRECALL                  2
                            1094 CALL                     2
                            1104 POP_TOP
                
-               1180        1106 PUSH_NULL
+               1199        1106 PUSH_NULL
                            1108 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1120 LOAD_CONST               7 ('oops')
                            1122 LOAD_CONST               8 ((100, 50))
                            1124 KW_NAMES                10
                            1126 PRECALL                  2
                            1130 CALL                     2
                            1140 LOAD_FAST                2 (img)
                            1142 PRECALL                  1
                            1146 CALL                     1
                            1156 STORE_FAST               3 (rtn)
                
-               1181        1158 LOAD_FAST                0 (self)
+               1200        1158 LOAD_FAST                0 (self)
                            1160 LOAD_METHOD              2 (assertEqual)
                            1182 LOAD_FAST                3 (rtn)
                            1184 LOAD_FAST                2 (img)
                            1186 LOAD_CONST               7 ('oops')
                            1188 BUILD_TUPLE              2
                            1190 PRECALL                  2
                            1194 CALL                     2
                            1204 POP_TOP
                
-               1182        1206 PUSH_NULL
+               1201        1206 PUSH_NULL
                            1208 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1220 LOAD_CONST               7 ('oops')
                            1222 LOAD_CONST              11 ((1, 1))
                            1224 KW_NAMES                12
                            1226 PRECALL                  2
                            1230 CALL                     2
                            1240 LOAD_FAST                2 (img)
                            1242 PRECALL                  1
                            1246 CALL                     1
                            1256 STORE_FAST               3 (rtn)
                
-               1183        1258 LOAD_FAST                0 (self)
+               1202        1258 LOAD_FAST                0 (self)
                            1260 LOAD_METHOD              2 (assertEqual)
                            1282 LOAD_FAST                3 (rtn)
                            1284 LOAD_FAST                2 (img)
                            1286 LOAD_CONST               7 ('oops')
                            1288 BUILD_TUPLE              2
                            1290 PRECALL                  2
                            1294 CALL                     2
                            1304 POP_TOP
                
-               1185        1306 PUSH_NULL
+               1204        1306 PUSH_NULL
                            1308 LOAD_FAST                1 (DummyImageFile)
                            1310 LOAD_CONST               3 ('test')
                            1312 LOAD_CONST              15 ('png')
                            1314 LOAD_CONST               5 (50)
                            1316 LOAD_CONST               6 (100)
                            1318 PRECALL                  4
                            1322 CALL                     4
                            1332 STORE_FAST               2 (img)
                
-               1186        1334 PUSH_NULL
+               1205        1334 PUSH_NULL
                            1336 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1348 PRECALL                  0
                            1352 CALL                     0
                            1362 LOAD_FAST                2 (img)
                            1364 PRECALL                  1
                            1368 CALL                     1
                            1378 STORE_FAST               3 (rtn)
                
-               1187        1380 LOAD_FAST                0 (self)
+               1206        1380 LOAD_FAST                0 (self)
                            1382 LOAD_METHOD              2 (assertEqual)
                            1404 LOAD_FAST                3 (rtn)
                            1406 LOAD_FAST                2 (img)
                            1408 LOAD_CONST               0 (None)
                            1410 BUILD_TUPLE              2
                            1412 PRECALL                  2
                            1416 CALL                     2
                            1426 POP_TOP
                
-               1188        1428 PUSH_NULL
+               1207        1428 PUSH_NULL
                            1430 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1442 LOAD_CONST               7 ('oops')
                            1444 LOAD_CONST               8 ((100, 50))
                            1446 KW_NAMES                 9
                            1448 PRECALL                  2
                            1452 CALL                     2
                            1462 LOAD_FAST                2 (img)
                            1464 PRECALL                  1
                            1468 CALL                     1
                            1478 STORE_FAST               3 (rtn)
                
-               1189        1480 LOAD_FAST                0 (self)
+               1208        1480 LOAD_FAST                0 (self)
                            1482 LOAD_METHOD              2 (assertEqual)
                            1504 LOAD_FAST                3 (rtn)
                            1506 LOAD_FAST                2 (img)
                            1508 LOAD_CONST               7 ('oops')
                            1510 BUILD_TUPLE              2
                            1512 PRECALL                  2
                            1516 CALL                     2
                            1526 POP_TOP
                
-               1190        1528 PUSH_NULL
+               1209        1528 PUSH_NULL
                            1530 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1542 LOAD_CONST               7 ('oops')
                            1544 LOAD_CONST               8 ((100, 50))
                            1546 KW_NAMES                10
                            1548 PRECALL                  2
                            1552 CALL                     2
                            1562 LOAD_FAST                2 (img)
                            1564 PRECALL                  1
                            1568 CALL                     1
                            1578 STORE_FAST               3 (rtn)
                
-               1191        1580 LOAD_FAST                0 (self)
+               1210        1580 LOAD_FAST                0 (self)
                            1582 LOAD_METHOD              2 (assertEqual)
                            1604 LOAD_FAST                3 (rtn)
                            1606 LOAD_FAST                2 (img)
                            1608 LOAD_CONST               7 ('oops')
                            1610 BUILD_TUPLE              2
                            1612 PRECALL                  2
                            1616 CALL                     2
                            1626 POP_TOP
                
-               1192        1628 PUSH_NULL
+               1211        1628 PUSH_NULL
                            1630 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1642 LOAD_CONST               7 ('oops')
                            1644 LOAD_CONST              11 ((1, 1))
                            1646 KW_NAMES                12
                            1648 PRECALL                  2
                            1652 CALL                     2
                            1662 LOAD_FAST                2 (img)
                            1664 PRECALL                  1
                            1668 CALL                     1
                            1678 STORE_FAST               3 (rtn)
                
-               1193        1680 LOAD_FAST                0 (self)
+               1212        1680 LOAD_FAST                0 (self)
                            1682 LOAD_METHOD              2 (assertEqual)
                            1704 LOAD_FAST                3 (rtn)
                            1706 LOAD_FAST                2 (img)
                            1708 LOAD_CONST               7 ('oops')
                            1710 BUILD_TUPLE              2
                            1712 PRECALL                  2
                            1716 CALL                     2
                            1726 POP_TOP
                
-               1195        1728 PUSH_NULL
+               1214        1728 PUSH_NULL
                            1730 LOAD_FAST                1 (DummyImageFile)
                            1732 LOAD_CONST               3 ('test')
                            1734 LOAD_CONST              16 ('xls')
                            1736 LOAD_CONST               5 (50)
                            1738 LOAD_CONST               6 (100)
                            1740 PRECALL                  4
                            1744 CALL                     4
                            1754 STORE_FAST               2 (img)
                
-               1196        1756 PUSH_NULL
+               1215        1756 PUSH_NULL
                            1758 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1770 LOAD_CONST               7 ('oops')
                            1772 KW_NAMES                17
                            1774 PRECALL                  1
                            1778 CALL                     1
                            1788 LOAD_FAST                2 (img)
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               3 (rtn)
                
-               1197        1806 LOAD_FAST                0 (self)
+               1216        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              2 (assertEqual)
                            1830 LOAD_FAST                3 (rtn)
                            1832 LOAD_FAST                2 (img)
                            1834 LOAD_CONST               7 ('oops')
                            1836 BUILD_TUPLE              2
                            1838 PRECALL                  2
                            1842 CALL                     2
@@ -12630,21 +12808,21 @@
                   None
                   code
                      argcount  : 0
                      nlocals   : 0
                      stacksize : 1
                      flags     : 0
                      code 0x970065005a0164005a02640184005a0364025300
-                     1130           0 RESUME                   0
+                     1149           0 RESUME                   0
                                     2 LOAD_NAME                0 (__name__)
                                     4 STORE_NAME               1 (__module__)
                                     6 LOAD_CONST               0 ('TestValidators.test_IS_IMAGE.<locals>.DummyImageFile')
                                     8 STORE_NAME               2 (__qualname__)
                      
-                     1131          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1131>)
+                     1150          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1150>)
                                    12 MAKE_FUNCTION            0
                                    14 STORE_NAME               3 (__init__)
                                    16 LOAD_CONST               2 (None)
                                    18 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_IMAGE.<locals>.DummyImageFile'
                         code
@@ -12684,65 +12862,65 @@
                               000000000000000000000000000000000000006415a6010000ab01000000
                               000000000001007c006a040000000000000000a005000000000000000000
                               00000000000000000000007c05a006000000000000000000000000000000
                               000000000064167c037c04a6030000ab030000000000000000a6010000ab
                               01000000000000000001007c006a040000000000000000a0070000000000
                               0000000000000000000000000000006401a6010000ab0100000000000000
                               00010064005300
-                           1131           0 RESUME                   0
+                           1150           0 RESUME                   0
                            
-                           1132           2 LOAD_CONST               1 (0)
+                           1151           2 LOAD_CONST               1 (0)
                                           4 LOAD_CONST               0 (None)
                                           6 IMPORT_NAME              0 (struct)
                                           8 STORE_FAST               5 (struct)
                            
-                           1133          10 LOAD_CONST               1 (0)
+                           1152          10 LOAD_CONST               1 (0)
                                          12 LOAD_CONST               2 (('BytesIO',))
                                          14 IMPORT_NAME              1 (io)
                                          16 IMPORT_FROM              2 (BytesIO)
                                          18 STORE_FAST               6 (BytesIO)
                                          20 POP_TOP
                            
-                           1135          22 LOAD_FAST                1 (filename)
+                           1154          22 LOAD_FAST                1 (filename)
                                          24 LOAD_CONST               3 ('.')
                                          26 BINARY_OP                0 (+)
                                          30 LOAD_FAST                2 (ext)
                                          32 BINARY_OP                0 (+)
                                          36 LOAD_FAST                0 (self)
                                          38 STORE_ATTR               3 (filename)
                            
-                           1136          48 PUSH_NULL
+                           1155          48 PUSH_NULL
                                          50 LOAD_FAST                6 (BytesIO)
                                          52 PRECALL                  0
                                          56 CALL                     0
                                          66 LOAD_FAST                0 (self)
                                          68 STORE_ATTR               4 (file)
                            
-                           1137          78 LOAD_FAST                2 (ext)
+                           1156          78 LOAD_FAST                2 (ext)
                                          80 LOAD_CONST               4 ('bmp')
                                          82 COMPARE_OP               2 (==)
                                          88 POP_JUMP_FORWARD_IF_FALSE   101 (to 292)
                            
-                           1138          90 LOAD_FAST                0 (self)
+                           1157          90 LOAD_FAST                0 (self)
                                          92 LOAD_ATTR                4 (file)
                                         102 LOAD_METHOD              5 (write)
                                         124 LOAD_CONST               5 (b'BM')
                                         126 PRECALL                  1
                                         130 CALL                     1
                                         140 POP_TOP
                            
-                           1139         142 LOAD_FAST                0 (self)
+                           1158         142 LOAD_FAST                0 (self)
                                         144 LOAD_ATTR                4 (file)
                                         154 LOAD_METHOD              5 (write)
                                         176 LOAD_CONST               6 (b'                ')
                                         178 PRECALL                  1
                                         182 CALL                     1
                                         192 POP_TOP
                            
-                           1140         194 LOAD_FAST                0 (self)
+                           1159         194 LOAD_FAST                0 (self)
                                         196 LOAD_ATTR                4 (file)
                                         206 LOAD_METHOD              5 (write)
                                         228 LOAD_FAST                5 (struct)
                                         230 LOAD_METHOD              6 (pack)
                                         252 LOAD_CONST               7 ('<LL')
                                         254 LOAD_FAST                3 (width)
                                         256 LOAD_FAST                4 (height)
@@ -12750,28 +12928,28 @@
                                         262 CALL                     3
                                         272 PRECALL                  1
                                         276 CALL                     1
                                         286 POP_TOP
                                         288 EXTENDED_ARG             1
                                         290 JUMP_FORWARD           339 (to 970)
                            
-                           1141     >>  292 LOAD_FAST                2 (ext)
+                           1160     >>  292 LOAD_FAST                2 (ext)
                                         294 LOAD_CONST               8 ('gif')
                                         296 COMPARE_OP               2 (==)
                                         302 POP_JUMP_FORWARD_IF_FALSE    76 (to 456)
                            
-                           1142         304 LOAD_FAST                0 (self)
+                           1161         304 LOAD_FAST                0 (self)
                                         306 LOAD_ATTR                4 (file)
                                         316 LOAD_METHOD              5 (write)
                                         338 LOAD_CONST               9 (b'GIF87a')
                                         340 PRECALL                  1
                                         344 CALL                     1
                                         354 POP_TOP
                            
-                           1143         356 LOAD_FAST                0 (self)
+                           1162         356 LOAD_FAST                0 (self)
                                         358 LOAD_ATTR                4 (file)
                                         368 LOAD_METHOD              5 (write)
                                         390 LOAD_FAST                5 (struct)
                                         392 LOAD_METHOD              6 (pack)
                                         414 LOAD_CONST              10 ('<HHB')
                                         416 LOAD_FAST                3 (width)
                                         418 LOAD_FAST                4 (height)
@@ -12780,101 +12958,101 @@
                                         426 CALL                     4
                                         436 PRECALL                  1
                                         440 CALL                     1
                                         450 POP_TOP
                                         452 EXTENDED_ARG             1
                                         454 JUMP_FORWARD           257 (to 970)
                            
-                           1144     >>  456 LOAD_FAST                2 (ext)
+                           1163     >>  456 LOAD_FAST                2 (ext)
                                         458 LOAD_CONST              11 (('jpg', 'jpeg'))
                                         460 CONTAINS_OP              0
                                         462 POP_JUMP_FORWARD_IF_FALSE   122 (to 708)
                            
-                           1145         464 LOAD_FAST                0 (self)
+                           1164         464 LOAD_FAST                0 (self)
                                         466 LOAD_ATTR                4 (file)
                                         476 LOAD_METHOD              5 (write)
                                         498 LOAD_CONST              12 (b'\xff\xd8')
                                         500 PRECALL                  1
                                         504 CALL                     1
                                         514 POP_TOP
                            
-                           1146         516 LOAD_FAST                0 (self)
+                           1165         516 LOAD_FAST                0 (self)
                                         518 LOAD_ATTR                4 (file)
                                         528 LOAD_METHOD              5 (write)
                                         550 LOAD_FAST                5 (struct)
                                         552 LOAD_METHOD              6 (pack)
                                         574 LOAD_CONST              13 ('!BBH')
                                         576 LOAD_CONST              14 (255)
                                         578 LOAD_CONST              15 (192)
                                         580 LOAD_CONST              16 (5)
                                         582 PRECALL                  4
                                         586 CALL                     4
                                         596 PRECALL                  1
                                         600 CALL                     1
                                         610 POP_TOP
                            
-                           1147         612 LOAD_FAST                0 (self)
+                           1166         612 LOAD_FAST                0 (self)
                                         614 LOAD_ATTR                4 (file)
                                         624 LOAD_METHOD              5 (write)
                                         646 LOAD_FAST                5 (struct)
                                         648 LOAD_METHOD              6 (pack)
                                         670 LOAD_CONST              17 ('!xHH')
                                         672 LOAD_FAST                4 (height)
                                         674 LOAD_FAST                3 (width)
                                         676 PRECALL                  3
                                         680 CALL                     3
                                         690 PRECALL                  1
                                         694 CALL                     1
                                         704 POP_TOP
                                         706 JUMP_FORWARD           131 (to 970)
                            
-                           1148     >>  708 LOAD_FAST                2 (ext)
+                           1167     >>  708 LOAD_FAST                2 (ext)
                                         710 LOAD_CONST              18 ('png')
                                         712 COMPARE_OP               2 (==)
                                         718 POP_JUMP_FORWARD_IF_FALSE   125 (to 970)
                            
-                           1149         720 LOAD_FAST                0 (self)
+                           1168         720 LOAD_FAST                0 (self)
                                         722 LOAD_ATTR                4 (file)
                                         732 LOAD_METHOD              5 (write)
                                         754 LOAD_CONST              19 (b'\x89PNG\r\n\x1a\n')
                                         756 PRECALL                  1
                                         760 CALL                     1
                                         770 POP_TOP
                            
-                           1150         772 LOAD_FAST                0 (self)
+                           1169         772 LOAD_FAST                0 (self)
                                         774 LOAD_ATTR                4 (file)
                                         784 LOAD_METHOD              5 (write)
                                         806 LOAD_CONST              20 (b'    ')
                                         808 PRECALL                  1
                                         812 CALL                     1
                                         822 POP_TOP
                            
-                           1151         824 LOAD_FAST                0 (self)
+                           1170         824 LOAD_FAST                0 (self)
                                         826 LOAD_ATTR                4 (file)
                                         836 LOAD_METHOD              5 (write)
                                         858 LOAD_CONST              21 (b'IHDR')
                                         860 PRECALL                  1
                                         864 CALL                     1
                                         874 POP_TOP
                            
-                           1152         876 LOAD_FAST                0 (self)
+                           1171         876 LOAD_FAST                0 (self)
                                         878 LOAD_ATTR                4 (file)
                                         888 LOAD_METHOD              5 (write)
                                         910 LOAD_FAST                5 (struct)
                                         912 LOAD_METHOD              6 (pack)
                                         934 LOAD_CONST              22 ('!LL')
                                         936 LOAD_FAST                3 (width)
                                         938 LOAD_FAST                4 (height)
                                         940 PRECALL                  3
                                         944 CALL                     3
                                         954 PRECALL                  1
                                         958 CALL                     1
                                         968 POP_TOP
                            
-                           1153     >>  970 LOAD_FAST                0 (self)
+                           1172     >>  970 LOAD_FAST                0 (self)
                                         972 LOAD_ATTR                4 (file)
                                         982 LOAD_METHOD              7 (seek)
                                        1004 LOAD_CONST               1 (0)
                                        1006 PRECALL                  1
                                        1010 CALL                     1
                                        1020 POP_TOP
                                        1022 LOAD_CONST               0 (None)
@@ -12905,26 +13083,26 @@
                               '!LL'
                            names      ('struct', 'io', 'BytesIO', 'filename', 'file', 'write', 'pack', 'seek')
                            varnames   ('self', 'filename', 'ext', 'width', 'height', 'struct', 'BytesIO')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       '__init__'
-                           firstlineno 1131
+                           firstlineno 1150
                            lnotab
                               0x020108010c021a011e010c013401340162010c01340164010801340160
                               0160010c013401340134015e01
                         None
                      names      ('__name__', '__module__', '__qualname__', '__init__')
                      varnames   ()
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyImageFile'
-                     firstlineno 1130
+                     firstlineno 1149
                      lnotab 0x0a01
                   'DummyImageFile'
                   'test'
                   'bmp'
                   50
                   100
                   'oops'
@@ -12940,15 +13118,15 @@
                   ('error_message',)
                names      ('object', 'IS_IMAGE', 'assertEqual')
                varnames   ('self', 'DummyImageFile', 'img', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IMAGE'
-               firstlineno 1129
+               firstlineno 1148
                lnotab
                   0x020126191c012e0130013401300134013001340130021c012e01300134
                   01300134013001340130021c012e0130013401300134013001340130021c
                   012e0130013401300134013001340130021c013201
             code
                argcount  : 1
                nlocals   : 4
@@ -13001,349 +13179,349 @@
                   00ab020000000000000000010002007407000000000000000000006405ac
                   06a6010000ab0100000000000000006404a6010000ab0100000000000000
                   007d037c00a00400000000000000000000000000000000000000007c0364
                   18a6020000ab020000000000000000010064005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1199           4 RESUME                   0
+               1218           4 RESUME                   0
                
-               1200           6 LOAD_CONST               1 (0)
+               1219           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1201          14 LOAD_CONST               1 (0)
+               1220          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1203          26 LOAD_CLOSURE             4 (BytesIO)
+               1222          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1203>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1222>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1230          38 PUSH_NULL
+               1249          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1231          60 PUSH_NULL
+               1250          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_FILE)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1232         110 LOAD_FAST                0 (self)
+               1251         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1233         158 PUSH_NULL
+               1252         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1234         180 PUSH_NULL
+               1253         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1235         230 LOAD_FAST                0 (self)
+               1254         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1236         278 PUSH_NULL
+               1255         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('multiple.pdf')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1237         300 PUSH_NULL
+               1256         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             314 LOAD_CONST               5 ('pdf')
                             316 LOAD_CONST              10 ('png')
                             318 BUILD_LIST               2
                             320 KW_NAMES                 6
                             322 PRECALL                  1
                             326 CALL                     1
                             336 LOAD_FAST                2 (fake)
                             338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1238         354 LOAD_FAST                0 (self)
+               1257         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1239         402 PUSH_NULL
+               1258         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              11 ('multiple.png')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1240         424 PUSH_NULL
+               1259         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             438 LOAD_CONST               5 ('pdf')
                             440 LOAD_CONST              10 ('png')
                             442 BUILD_LIST               2
                             444 KW_NAMES                 6
                             446 PRECALL                  1
                             450 CALL                     1
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1241         478 LOAD_FAST                0 (self)
+               1260         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1242         526 PUSH_NULL
+               1261         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              12 ('multiple.gif')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1243         548 PUSH_NULL
+               1262         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             562 LOAD_CONST               5 ('pdf')
                             564 LOAD_CONST              10 ('png')
                             566 BUILD_LIST               2
                             568 KW_NAMES                 6
                             570 PRECALL                  1
                             574 CALL                     1
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1244         602 LOAD_FAST                0 (self)
+               1263         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1245         650 PUSH_NULL
+               1264         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              13 ('backup2014.tar.gz')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1246         672 PUSH_NULL
+               1265         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_FILE)
                
-               1247         686 LOAD_GLOBAL             11 (NULL + re)
+               1266         686 LOAD_GLOBAL             11 (NULL + re)
                             698 LOAD_ATTR                6 (compile)
                             708 LOAD_CONST              14 ('backup.*')
                             710 PRECALL                  1
                             714 CALL                     1
                             724 LOAD_CONST              15 ('tar.gz')
                             726 LOAD_CONST              16 (False)
                
-               1246         728 KW_NAMES                17
+               1265         728 KW_NAMES                17
                             730 PRECALL                  3
                             734 CALL                     3
                
-               1248         744 LOAD_FAST                2 (fake)
+               1267         744 LOAD_FAST                2 (fake)
                
-               1246         746 PRECALL                  1
+               1265         746 PRECALL                  1
                             750 CALL                     1
                             760 STORE_FAST               3 (rtn)
                
-               1249         762 LOAD_FAST                0 (self)
+               1268         762 LOAD_FAST                0 (self)
                             764 LOAD_METHOD              4 (assertEqual)
                             786 LOAD_FAST                3 (rtn)
                             788 LOAD_FAST                2 (fake)
                             790 LOAD_CONST               0 (None)
                             792 BUILD_TUPLE              2
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1250         810 PUSH_NULL
+               1269         810 PUSH_NULL
                             812 LOAD_FAST                1 (gen_fake)
                             814 LOAD_CONST              18 ('README')
                             816 PRECALL                  1
                             820 CALL                     1
                             830 STORE_FAST               2 (fake)
                
-               1251         832 PUSH_NULL
+               1270         832 PUSH_NULL
                             834 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             846 LOAD_CONST              18 ('README')
                             848 LOAD_CONST              19 ('')
                             850 LOAD_CONST               1 (0)
                             852 KW_NAMES                20
                             854 PRECALL                  3
                             858 CALL                     3
                             868 LOAD_FAST                2 (fake)
                             870 PRECALL                  1
                             874 CALL                     1
                             884 STORE_FAST               3 (rtn)
                
-               1252         886 LOAD_FAST                0 (self)
+               1271         886 LOAD_FAST                0 (self)
                             888 LOAD_METHOD              4 (assertEqual)
                             910 LOAD_FAST                3 (rtn)
                             912 LOAD_FAST                2 (fake)
                             914 LOAD_CONST               0 (None)
                             916 BUILD_TUPLE              2
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1253         934 PUSH_NULL
+               1272         934 PUSH_NULL
                             936 LOAD_FAST                1 (gen_fake)
                             938 LOAD_CONST              21 ('readme')
                             940 PRECALL                  1
                             944 CALL                     1
                             954 STORE_FAST               2 (fake)
                
-               1254         956 PUSH_NULL
+               1273         956 PUSH_NULL
                             958 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             970 LOAD_CONST              18 ('README')
                             972 LOAD_CONST              19 ('')
                             974 LOAD_CONST               1 (0)
                             976 KW_NAMES                20
                             978 PRECALL                  3
                             982 CALL                     3
                             992 LOAD_FAST                2 (fake)
                             994 PRECALL                  1
                             998 CALL                     1
                            1008 STORE_FAST               3 (rtn)
                
-               1255        1010 LOAD_FAST                0 (self)
+               1274        1010 LOAD_FAST                0 (self)
                            1012 LOAD_METHOD              4 (assertEqual)
                            1034 LOAD_FAST                3 (rtn)
                            1036 LOAD_FAST                2 (fake)
                            1038 LOAD_CONST               8 ('Enter valid filename')
                            1040 BUILD_TUPLE              2
                            1042 PRECALL                  2
                            1046 CALL                     2
                            1056 POP_TOP
                
-               1256        1058 PUSH_NULL
+               1275        1058 PUSH_NULL
                            1060 LOAD_FAST                1 (gen_fake)
                            1062 LOAD_CONST              21 ('readme')
                            1064 PRECALL                  1
                            1068 CALL                     1
                            1078 STORE_FAST               2 (fake)
                
-               1257        1080 PUSH_NULL
+               1276        1080 PUSH_NULL
                            1082 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1094 LOAD_CONST              18 ('README')
                            1096 LOAD_CONST              22 (2)
                            1098 KW_NAMES                23
                            1100 PRECALL                  2
                            1104 CALL                     2
                            1114 LOAD_FAST                2 (fake)
                            1116 PRECALL                  1
                            1120 CALL                     1
                            1130 STORE_FAST               3 (rtn)
                
-               1258        1132 LOAD_FAST                0 (self)
+               1277        1132 LOAD_FAST                0 (self)
                            1134 LOAD_METHOD              4 (assertEqual)
                            1156 LOAD_FAST                3 (rtn)
                            1158 LOAD_FAST                2 (fake)
                            1160 LOAD_CONST               0 (None)
                            1162 BUILD_TUPLE              2
                            1164 PRECALL                  2
                            1168 CALL                     2
                            1178 POP_TOP
                
-               1259        1180 PUSH_NULL
+               1278        1180 PUSH_NULL
                            1182 LOAD_FAST                1 (gen_fake)
                            1184 LOAD_CONST              18 ('README')
                            1186 PRECALL                  1
                            1190 CALL                     1
                            1200 STORE_FAST               2 (fake)
                
-               1260        1202 PUSH_NULL
+               1279        1202 PUSH_NULL
                            1204 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1216 LOAD_CONST              18 ('README')
                            1218 LOAD_CONST              22 (2)
                            1220 KW_NAMES                23
                            1222 PRECALL                  2
                            1226 CALL                     2
                            1236 LOAD_FAST                2 (fake)
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 STORE_FAST               3 (rtn)
                
-               1261        1254 LOAD_FAST                0 (self)
+               1280        1254 LOAD_FAST                0 (self)
                            1256 LOAD_METHOD              4 (assertEqual)
                            1278 LOAD_FAST                3 (rtn)
                            1280 LOAD_FAST                2 (fake)
                            1282 LOAD_CONST               0 (None)
                            1284 BUILD_TUPLE              2
                            1286 PRECALL                  2
                            1290 CALL                     2
                            1300 POP_TOP
                
-               1262        1302 PUSH_NULL
+               1281        1302 PUSH_NULL
                            1304 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1316 LOAD_CONST               5 ('pdf')
                            1318 KW_NAMES                 6
                            1320 PRECALL                  1
                            1324 CALL                     1
                            1334 LOAD_CONST               4 ('example.pdf')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               3 (rtn)
                
-               1263        1352 LOAD_FAST                0 (self)
+               1282        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              4 (assertEqual)
                            1376 LOAD_FAST                3 (rtn)
                            1378 LOAD_CONST              24 (('example.pdf', 'Enter valid filename'))
                            1380 PRECALL                  2
                            1384 CALL                     2
                            1394 POP_TOP
                            1396 LOAD_CONST               0 (None)
@@ -13363,62 +13541,62 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1203           2 RESUME                   0
+                     1222           2 RESUME                   0
                      
-                     1205           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1224           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1218           6 LOAD_FAST                0 (filename)
+                     1237           6 LOAD_FAST                0 (filename)
                      
-                     1205           8 BINARY_OP                6 (%)
+                     1224           8 BINARY_OP                6 (%)
                      
-                     1204          12 STORE_FAST               1 (formdata_file_data)
+                     1223          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1221          14 LOAD_GLOBAL              1 (NULL + str)
+                     1240          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1222          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1241          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1223          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1242          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1224          72 LOAD_CONST               4 ('POST')
+                     1243          72 LOAD_CONST               4 ('POST')
                      
-                     1220          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1239          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1226          80 LOAD_DEREF               4 (cgi)
+                     1245          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1227         104 PUSH_NULL
+                     1246         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1226         152 KW_NAMES                 6
+                     1245         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1228         168 LOAD_CONST               7 ('file_attach')
+                     1247         168 LOAD_CONST               7 ('file_attach')
                      
-                     1226         170 BINARY_SUBSCR
+                     1245         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
@@ -13427,15 +13605,15 @@
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1203
+                     firstlineno 1222
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'multiple.pdf'
@@ -13456,15 +13634,15 @@
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_FILE', 'assertEqual', 're', 'compile')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FILE'
-               firstlineno 1199
+               firstlineno 1218
                lnotab
                   0x060108010c020c1b160132013001160132013001160136013001160136
                   01300116013601300116010e012aff100202fe1003300116013601300116
                   01360130011601340130011601340130013201
             code
                argcount  : 1
                nlocals   : 4
@@ -13504,255 +13682,255 @@
                   0000000000000000006405ac06a6010000ab0100000000000000006404a6
                   010000ab0100000000000000007d037c00a0040000000000000000000000
                   0000000000000000007c036415a6020000ab020000000000000000010064
                   005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1265           4 RESUME                   0
+               1284           4 RESUME                   0
                
-               1266           6 LOAD_CONST               1 (0)
+               1285           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1267          14 LOAD_CONST               1 (0)
+               1286          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1269          26 LOAD_CLOSURE             4 (BytesIO)
+               1288          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1269>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1288>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1296          38 PUSH_NULL
+               1315          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1297          60 PUSH_NULL
+               1316          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1298         110 LOAD_FAST                0 (self)
+               1317         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1299         158 PUSH_NULL
+               1318         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1300         180 PUSH_NULL
+               1319         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1301         230 LOAD_FAST                0 (self)
+               1320         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1302         278 PUSH_NULL
+               1321         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('backup2014.tar.gz')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1303         300 PUSH_NULL
+               1322         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                
-               1304         314 LOAD_CONST              10 ('backup.*')
+               1323         314 LOAD_CONST              10 ('backup.*')
                             316 LOAD_CONST              11 ('tar.gz')
                             318 LOAD_CONST              12 (False)
                
-               1303         320 KW_NAMES                13
+               1322         320 KW_NAMES                13
                             322 PRECALL                  3
                             326 CALL                     3
                
-               1305         336 LOAD_FAST                2 (fake)
+               1324         336 LOAD_FAST                2 (fake)
                
-               1303         338 PRECALL                  1
+               1322         338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1306         354 LOAD_FAST                0 (self)
+               1325         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1307         402 PUSH_NULL
+               1326         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              14 ('README')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1308         424 PUSH_NULL
+               1327         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             438 LOAD_CONST              15 ('^README$')
                             440 LOAD_CONST              16 ('^$')
                             442 LOAD_CONST               1 (0)
                             444 KW_NAMES                17
                             446 PRECALL                  3
                             450 CALL                     3
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1309         478 LOAD_FAST                0 (self)
+               1328         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1310         526 PUSH_NULL
+               1329         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              18 ('readme')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1311         548 PUSH_NULL
+               1330         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             562 LOAD_CONST              15 ('^README$')
                             564 LOAD_CONST              16 ('^$')
                             566 LOAD_CONST               1 (0)
                             568 KW_NAMES                17
                             570 PRECALL                  3
                             574 CALL                     3
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1312         602 LOAD_FAST                0 (self)
+               1331         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1313         650 PUSH_NULL
+               1332         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              18 ('readme')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1314         672 PUSH_NULL
+               1333         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             686 LOAD_CONST              14 ('README')
                             688 LOAD_CONST              19 (2)
                             690 KW_NAMES                20
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_FAST                2 (fake)
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               3 (rtn)
                
-               1315         724 LOAD_FAST                0 (self)
+               1334         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              4 (assertEqual)
                             748 LOAD_FAST                3 (rtn)
                             750 LOAD_FAST                2 (fake)
                             752 LOAD_CONST               0 (None)
                             754 BUILD_TUPLE              2
                             756 PRECALL                  2
                             760 CALL                     2
                             770 POP_TOP
                
-               1316         772 PUSH_NULL
+               1335         772 PUSH_NULL
                             774 LOAD_FAST                1 (gen_fake)
                             776 LOAD_CONST              14 ('README')
                             778 PRECALL                  1
                             782 CALL                     1
                             792 STORE_FAST               2 (fake)
                
-               1317         794 PUSH_NULL
+               1336         794 PUSH_NULL
                             796 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             808 LOAD_CONST              14 ('README')
                             810 LOAD_CONST              19 (2)
                             812 KW_NAMES                20
                             814 PRECALL                  2
                             818 CALL                     2
                             828 LOAD_FAST                2 (fake)
                             830 PRECALL                  1
                             834 CALL                     1
                             844 STORE_FAST               3 (rtn)
                
-               1318         846 LOAD_FAST                0 (self)
+               1337         846 LOAD_FAST                0 (self)
                             848 LOAD_METHOD              4 (assertEqual)
                             870 LOAD_FAST                3 (rtn)
                             872 LOAD_FAST                2 (fake)
                             874 LOAD_CONST               0 (None)
                             876 BUILD_TUPLE              2
                             878 PRECALL                  2
                             882 CALL                     2
                             892 POP_TOP
                
-               1319         894 PUSH_NULL
+               1338         894 PUSH_NULL
                             896 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             908 LOAD_CONST               5 ('pdf')
                             910 KW_NAMES                 6
                             912 PRECALL                  1
                             916 CALL                     1
                             926 LOAD_CONST               4 ('example.pdf')
                             928 PRECALL                  1
                             932 CALL                     1
                             942 STORE_FAST               3 (rtn)
                
-               1320         944 LOAD_FAST                0 (self)
+               1339         944 LOAD_FAST                0 (self)
                             946 LOAD_METHOD              4 (assertEqual)
                             968 LOAD_FAST                3 (rtn)
                             970 LOAD_CONST              21 (('example.pdf', 'Enter valid filename'))
                             972 PRECALL                  2
                             976 CALL                     2
                             986 POP_TOP
                             988 LOAD_CONST               0 (None)
@@ -13772,62 +13950,62 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1269           2 RESUME                   0
+                     1288           2 RESUME                   0
                      
-                     1271           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1290           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1284           6 LOAD_FAST                0 (filename)
+                     1303           6 LOAD_FAST                0 (filename)
                      
-                     1271           8 BINARY_OP                6 (%)
+                     1290           8 BINARY_OP                6 (%)
                      
-                     1270          12 STORE_FAST               1 (formdata_file_data)
+                     1289          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1287          14 LOAD_GLOBAL              1 (NULL + str)
+                     1306          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1288          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1307          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1289          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1308          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1290          72 LOAD_CONST               4 ('POST')
+                     1309          72 LOAD_CONST               4 ('POST')
                      
-                     1286          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1305          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1292          80 LOAD_DEREF               4 (cgi)
+                     1311          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1293         104 PUSH_NULL
+                     1312         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1292         152 KW_NAMES                 6
+                     1311         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1294         168 LOAD_CONST               7 ('file_attach')
+                     1313         168 LOAD_CONST               7 ('file_attach')
                      
-                     1292         170 BINARY_SUBSCR
+                     1311         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
@@ -13836,15 +14014,15 @@
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1269
+                     firstlineno 1288
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'backup2014.tar.gz'
@@ -13862,15 +14040,15 @@
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_UPLOAD_FILENAME', 'assertEqual')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPLOAD_FILENAME'
-               firstlineno 1265
+               firstlineno 1284
                lnotab
                   0x060108010c020c1b16013201300116013201300116010e0106ff100202
                   fe1003300116013601300116013601300116013401300116013401300132
                   01
             code
                argcount  : 1
                nlocals   : 2
@@ -13926,322 +14104,322 @@
                   000000000001000200740100000000000000000000641fac1ea6010000ab
                   010000000000000000641ba6010000ab0100000000000000007d017c00a0
                   0100000000000000000000000000000000000000007c016420a6020000ab
                   0200000000000000000100020074010000000000000000000064216419ac
                   22a6020000ab020000000000000000641ba6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   20a6020000ab020000000000000000010064005300
-               1322           0 RESUME                   0
+               1341           0 RESUME                   0
                
-               1323           2 PUSH_NULL
+               1342           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('1.2.3.4')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1324          48 LOAD_FAST                0 (self)
+               1343          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('1.2.3.4', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1325          92 PUSH_NULL
+               1344          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('255.255.255.255')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1326         138 LOAD_FAST                0 (self)
+               1345         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('255.255.255.255', None))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1327         182 PUSH_NULL
+               1346         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             196 PRECALL                  0
                             200 CALL                     0
                             210 LOAD_CONST               5 ('1.2.3.4 ')
                             212 PRECALL                  1
                             216 CALL                     1
                             226 STORE_FAST               1 (rtn)
                
-               1328         228 LOAD_FAST                0 (self)
+               1347         228 LOAD_FAST                0 (self)
                             230 LOAD_METHOD              1 (assertEqual)
                             252 LOAD_FAST                1 (rtn)
                             254 LOAD_CONST               6 (('1.2.3.4 ', 'Enter valid IPv4 address'))
                             256 PRECALL                  2
                             260 CALL                     2
                             270 POP_TOP
                
-               1329         272 PUSH_NULL
+               1348         272 PUSH_NULL
                             274 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             286 PRECALL                  0
                             290 CALL                     0
                             300 LOAD_CONST               7 ('1.2.3.4.5')
                             302 PRECALL                  1
                             306 CALL                     1
                             316 STORE_FAST               1 (rtn)
                
-               1330         318 LOAD_FAST                0 (self)
+               1349         318 LOAD_FAST                0 (self)
                             320 LOAD_METHOD              1 (assertEqual)
                             342 LOAD_FAST                1 (rtn)
                             344 LOAD_CONST               8 (('1.2.3.4.5', 'Enter valid IPv4 address'))
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1331         362 PUSH_NULL
+               1350         362 PUSH_NULL
                             364 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             376 PRECALL                  0
                             380 CALL                     0
                             390 LOAD_CONST               9 ('123.123')
                             392 PRECALL                  1
                             396 CALL                     1
                             406 STORE_FAST               1 (rtn)
                
-               1332         408 LOAD_FAST                0 (self)
+               1351         408 LOAD_FAST                0 (self)
                             410 LOAD_METHOD              1 (assertEqual)
                             432 LOAD_FAST                1 (rtn)
                             434 LOAD_CONST              10 (('123.123', 'Enter valid IPv4 address'))
                             436 PRECALL                  2
                             440 CALL                     2
                             450 POP_TOP
                
-               1333         452 PUSH_NULL
+               1352         452 PUSH_NULL
                             454 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             466 PRECALL                  0
                             470 CALL                     0
                             480 LOAD_CONST              11 ('1111.2.3.4')
                             482 PRECALL                  1
                             486 CALL                     1
                             496 STORE_FAST               1 (rtn)
                
-               1334         498 LOAD_FAST                0 (self)
+               1353         498 LOAD_FAST                0 (self)
                             500 LOAD_METHOD              1 (assertEqual)
                             522 LOAD_FAST                1 (rtn)
                             524 LOAD_CONST              12 (('1111.2.3.4', 'Enter valid IPv4 address'))
                             526 PRECALL                  2
                             530 CALL                     2
                             540 POP_TOP
                
-               1335         542 PUSH_NULL
+               1354         542 PUSH_NULL
                             544 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             556 PRECALL                  0
                             560 CALL                     0
                             570 LOAD_CONST              13 ('0111.2.3.4')
                             572 PRECALL                  1
                             576 CALL                     1
                             586 STORE_FAST               1 (rtn)
                
-               1336         588 LOAD_FAST                0 (self)
+               1355         588 LOAD_FAST                0 (self)
                             590 LOAD_METHOD              1 (assertEqual)
                             612 LOAD_FAST                1 (rtn)
                             614 LOAD_CONST              14 (('0111.2.3.4', 'Enter valid IPv4 address'))
                             616 PRECALL                  2
                             620 CALL                     2
                             630 POP_TOP
                
-               1337         632 PUSH_NULL
+               1356         632 PUSH_NULL
                             634 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             646 PRECALL                  0
                             650 CALL                     0
                             660 LOAD_CONST              15 ('256.2.3.4')
                             662 PRECALL                  1
                             666 CALL                     1
                             676 STORE_FAST               1 (rtn)
                
-               1338         678 LOAD_FAST                0 (self)
+               1357         678 LOAD_FAST                0 (self)
                             680 LOAD_METHOD              1 (assertEqual)
                             702 LOAD_FAST                1 (rtn)
                             704 LOAD_CONST              16 (('256.2.3.4', 'Enter valid IPv4 address'))
                             706 PRECALL                  2
                             710 CALL                     2
                             720 POP_TOP
                
-               1339         722 PUSH_NULL
+               1358         722 PUSH_NULL
                             724 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             736 PRECALL                  0
                             740 CALL                     0
                             750 LOAD_CONST              17 ('300.2.3.4')
                             752 PRECALL                  1
                             756 CALL                     1
                             766 STORE_FAST               1 (rtn)
                
-               1340         768 LOAD_FAST                0 (self)
+               1359         768 LOAD_FAST                0 (self)
                             770 LOAD_METHOD              1 (assertEqual)
                             792 LOAD_FAST                1 (rtn)
                             794 LOAD_CONST              18 (('300.2.3.4', 'Enter valid IPv4 address'))
                             796 PRECALL                  2
                             800 CALL                     2
                             810 POP_TOP
                
-               1341         812 PUSH_NULL
+               1360         812 PUSH_NULL
                             814 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             826 LOAD_CONST               1 ('1.2.3.4')
                             828 LOAD_CONST               1 ('1.2.3.4')
                             830 KW_NAMES                19
                             832 PRECALL                  2
                             836 CALL                     2
                             846 LOAD_CONST               1 ('1.2.3.4')
                             848 PRECALL                  1
                             852 CALL                     1
                             862 STORE_FAST               1 (rtn)
                
-               1342         864 LOAD_FAST                0 (self)
+               1361         864 LOAD_FAST                0 (self)
                             866 LOAD_METHOD              1 (assertEqual)
                             888 LOAD_FAST                1 (rtn)
                             890 LOAD_CONST               2 (('1.2.3.4', None))
                             892 PRECALL                  2
                             896 CALL                     2
                             906 POP_TOP
                
-               1343         908 PUSH_NULL
+               1362         908 PUSH_NULL
                             910 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             922 LOAD_CONST              20 ('1.2.3.5')
                             924 LOAD_CONST              21 ('1.2.3.9')
                             926 LOAD_CONST              22 ('bad ip')
                             928 KW_NAMES                23
                             930 PRECALL                  3
                             934 CALL                     3
                
-               1344         944 LOAD_CONST               1 ('1.2.3.4')
+               1363         944 LOAD_CONST               1 ('1.2.3.4')
                
-               1343         946 PRECALL                  1
+               1362         946 PRECALL                  1
                             950 CALL                     1
                             960 STORE_FAST               1 (rtn)
                
-               1346         962 LOAD_FAST                0 (self)
+               1365         962 LOAD_FAST                0 (self)
                             964 LOAD_METHOD              1 (assertEqual)
                             986 LOAD_FAST                1 (rtn)
                             988 LOAD_CONST              24 (('1.2.3.4', 'bad ip'))
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1347        1006 PUSH_NULL
+               1366        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1020 LOAD_CONST               1 ('1.2.3.4')
                            1022 LOAD_CONST              25 (True)
                            1024 KW_NAMES                26
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_CONST              27 ('127.0.0.1')
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               1 (rtn)
                
-               1348        1058 LOAD_FAST                0 (self)
+               1367        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              1 (assertEqual)
                            1082 LOAD_FAST                1 (rtn)
                            1084 LOAD_CONST              28 (('127.0.0.1', None))
                            1086 PRECALL                  2
                            1090 CALL                     2
                            1100 POP_TOP
                
-               1349        1102 PUSH_NULL
+               1368        1102 PUSH_NULL
                            1104 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1116 LOAD_CONST               1 ('1.2.3.4')
                            1118 LOAD_CONST              25 (True)
                            1120 KW_NAMES                26
                            1122 PRECALL                  2
                            1126 CALL                     2
                            1136 LOAD_CONST               1 ('1.2.3.4')
                            1138 PRECALL                  1
                            1142 CALL                     1
                            1152 STORE_FAST               1 (rtn)
                
-               1350        1154 LOAD_FAST                0 (self)
+               1369        1154 LOAD_FAST                0 (self)
                            1156 LOAD_METHOD              1 (assertEqual)
                            1178 LOAD_FAST                1 (rtn)
                            1180 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1182 PRECALL                  2
                            1186 CALL                     2
                            1196 POP_TOP
                
-               1351        1198 PUSH_NULL
+               1370        1198 PUSH_NULL
                            1200 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1212 LOAD_CONST              25 (True)
                            1214 KW_NAMES                30
                            1216 PRECALL                  1
                            1220 CALL                     1
                            1230 LOAD_CONST              27 ('127.0.0.1')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1352        1248 LOAD_FAST                0 (self)
+               1371        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              28 (('127.0.0.1', None))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1353        1292 PUSH_NULL
+               1372        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1306 LOAD_CONST              25 (True)
                            1308 KW_NAMES                30
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST               1 ('1.2.3.4')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1354        1342 LOAD_FAST                0 (self)
+               1373        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1355        1386 PUSH_NULL
+               1374        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1400 LOAD_CONST              31 (False)
                            1402 KW_NAMES                30
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              27 ('127.0.0.1')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1356        1436 LOAD_FAST                0 (self)
+               1375        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1357        1480 PUSH_NULL
+               1376        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1494 LOAD_CONST              33 ('100.0.0.0')
                            1496 LOAD_CONST              25 (True)
                            1498 KW_NAMES                34
                            1500 PRECALL                  2
                            1504 CALL                     2
                            1514 LOAD_CONST              27 ('127.0.0.1')
                            1516 PRECALL                  1
                            1520 CALL                     1
                            1530 STORE_FAST               1 (rtn)
                
-               1358        1532 LOAD_FAST                0 (self)
+               1377        1532 LOAD_FAST                0 (self)
                            1534 LOAD_METHOD              1 (assertEqual)
                            1556 LOAD_FAST                1 (rtn)
                            1558 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1560 PRECALL                  2
                            1564 CALL                     2
                            1574 POP_TOP
                            1576 LOAD_CONST               0 (None)
@@ -14284,15 +14462,15 @@
                   ('maxip', 'is_localhost')
                names      ('IS_IPV4', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV4'
-               firstlineno 1322
+               firstlineno 1341
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c0134012c01240102ff10032c0134012c0134012c0132
                   012c0132012c0132012c013401
             code
                argcount  : 1
                nlocals   : 2
@@ -14339,273 +14517,273 @@
                   00ab02000000000000000001000200740100000000000000000000641a64
                   146702ac15a6010000ab0100000000000000006416a6010000ab01000000
                   00000000007d017c00a00100000000000000000000000000000000000000
                   007c016417a6020000ab0200000000000000000100020074010000000000
                   0000000000641bac15a6010000ab0100000000000000006416a6010000ab
                   0100000000000000007d017c00a001000000000000000000000000000000
                   00000000007c01641ca6020000ab020000000000000000010064005300
-               1360           0 RESUME                   0
+               1379           0 RESUME                   0
                
-               1361           2 PUSH_NULL
+               1380           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1362          48 LOAD_FAST                0 (self)
+               1381          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1363          92 PUSH_NULL
+               1382          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('192.168.1.1')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1364         138 LOAD_FAST                0 (self)
+               1383         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('192.168.1.1', 'Enter valid IPv6 address'))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1365         182 PUSH_NULL
+               1384         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             196 LOAD_CONST               5 ('bad ip')
                             198 KW_NAMES                 6
                             200 PRECALL                  1
                             204 CALL                     1
                             214 LOAD_CONST               3 ('192.168.1.1')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1366         232 LOAD_FAST                0 (self)
+               1385         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               7 (('192.168.1.1', 'bad ip'))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1367         276 PUSH_NULL
+               1386         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             290 LOAD_CONST               8 (True)
                             292 KW_NAMES                 9
                             294 PRECALL                  1
                             298 CALL                     1
                             308 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             310 PRECALL                  1
                             314 CALL                     1
                             324 STORE_FAST               1 (rtn)
                
-               1368         326 LOAD_FAST                0 (self)
+               1387         326 LOAD_FAST                0 (self)
                             328 LOAD_METHOD              1 (assertEqual)
                             350 LOAD_FAST                1 (rtn)
                             352 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                             354 PRECALL                  2
                             358 CALL                     2
                             368 POP_TOP
                
-               1369         370 PUSH_NULL
+               1388         370 PUSH_NULL
                             372 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             384 LOAD_CONST              10 (False)
                             386 KW_NAMES                 9
                             388 PRECALL                  1
                             392 CALL                     1
                             402 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             404 PRECALL                  1
                             408 CALL                     1
                             418 STORE_FAST               1 (rtn)
                
-               1370         420 LOAD_FAST                0 (self)
+               1389         420 LOAD_FAST                0 (self)
                             422 LOAD_METHOD              1 (assertEqual)
                             444 LOAD_FAST                1 (rtn)
                             446 LOAD_CONST              11 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             448 PRECALL                  2
                             452 CALL                     2
                             462 POP_TOP
                
-               1371         464 PUSH_NULL
+               1390         464 PUSH_NULL
                             466 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             478 LOAD_CONST               8 (True)
                             480 KW_NAMES                 9
                             482 PRECALL                  1
                             486 CALL                     1
                             496 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             498 PRECALL                  1
                             502 CALL                     1
                             512 STORE_FAST               1 (rtn)
                
-               1372         514 LOAD_FAST                0 (self)
+               1391         514 LOAD_FAST                0 (self)
                             516 LOAD_METHOD              1 (assertEqual)
                             538 LOAD_FAST                1 (rtn)
                             540 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             542 PRECALL                  2
                             546 CALL                     2
                             556 POP_TOP
                
-               1373         558 PUSH_NULL
+               1392         558 PUSH_NULL
                             560 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             572 LOAD_CONST               8 (True)
                             574 KW_NAMES                14
                             576 PRECALL                  1
                             580 CALL                     1
                             590 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             592 PRECALL                  1
                             596 CALL                     1
                             606 STORE_FAST               1 (rtn)
                
-               1374         608 LOAD_FAST                0 (self)
+               1393         608 LOAD_FAST                0 (self)
                             610 LOAD_METHOD              1 (assertEqual)
                             632 LOAD_FAST                1 (rtn)
                             634 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             636 PRECALL                  2
                             640 CALL                     2
                             650 POP_TOP
                
-               1375         652 PUSH_NULL
+               1394         652 PUSH_NULL
                             654 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             666 LOAD_CONST               8 (True)
                             668 KW_NAMES                14
                             670 PRECALL                  1
                             674 CALL                     1
                             684 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             686 PRECALL                  1
                             690 CALL                     1
                             700 STORE_FAST               1 (rtn)
                
-               1376         702 LOAD_FAST                0 (self)
+               1395         702 LOAD_FAST                0 (self)
                             704 LOAD_METHOD              1 (assertEqual)
                             726 LOAD_FAST                1 (rtn)
                             728 LOAD_CONST              16 (('ff00::126c:8ffa:fe22:b3af', None))
                             730 PRECALL                  2
                             734 CALL                     2
                             744 POP_TOP
                
-               1380         746 PUSH_NULL
+               1399         746 PUSH_NULL
                             748 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             760 LOAD_CONST              10 (False)
                             762 KW_NAMES                17
                             764 PRECALL                  1
                             768 CALL                     1
                             778 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             780 PRECALL                  1
                             784 CALL                     1
                             794 STORE_FAST               1 (rtn)
                
-               1381         796 LOAD_FAST                0 (self)
+               1400         796 LOAD_FAST                0 (self)
                             798 LOAD_METHOD              1 (assertEqual)
                             820 LOAD_FAST                1 (rtn)
                             822 LOAD_CONST              18 (('2001::126c:8ffa:fe22:b3af', None))
                             824 PRECALL                  2
                             828 CALL                     2
                             838 POP_TOP
                
-               1382         840 PUSH_NULL
+               1401         840 PUSH_NULL
                             842 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             854 LOAD_CONST               8 (True)
                             856 KW_NAMES                17
                             858 PRECALL                  1
                             862 CALL                     1
                             872 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             874 PRECALL                  1
                             878 CALL                     1
                             888 STORE_FAST               1 (rtn)
                
-               1383         890 LOAD_FAST                0 (self)
+               1402         890 LOAD_FAST                0 (self)
                             892 LOAD_METHOD              1 (assertEqual)
                             914 LOAD_FAST                1 (rtn)
                             916 LOAD_CONST              19 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1384         934 PUSH_NULL
+               1403         934 PUSH_NULL
                             936 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             948 LOAD_CONST              20 ('2001::/32')
                             950 KW_NAMES                21
                             952 PRECALL                  1
                             956 CALL                     1
                             966 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                             968 PRECALL                  1
                             972 CALL                     1
                             982 STORE_FAST               1 (rtn)
                
-               1385         984 LOAD_FAST                0 (self)
+               1404         984 LOAD_FAST                0 (self)
                             986 LOAD_METHOD              1 (assertEqual)
                            1008 LOAD_FAST                1 (rtn)
                            1010 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1012 PRECALL                  2
                            1016 CALL                     2
                            1026 POP_TOP
                
-               1386        1028 PUSH_NULL
+               1405        1028 PUSH_NULL
                            1030 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1042 LOAD_CONST              24 ('fb00::/8')
                            1044 KW_NAMES                21
                            1046 PRECALL                  1
                            1050 CALL                     1
                            1060 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1062 PRECALL                  1
                            1066 CALL                     1
                            1076 STORE_FAST               1 (rtn)
                
-               1387        1078 LOAD_FAST                0 (self)
+               1406        1078 LOAD_FAST                0 (self)
                            1080 LOAD_METHOD              1 (assertEqual)
                            1102 LOAD_FAST                1 (rtn)
                            1104 LOAD_CONST              25 (('2001::8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                            1106 PRECALL                  2
                            1110 CALL                     2
                            1120 POP_TOP
                
-               1388        1122 PUSH_NULL
+               1407        1122 PUSH_NULL
                            1124 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1136 LOAD_CONST              26 ('fc00::/8')
                            1138 LOAD_CONST              20 ('2001::/32')
                            1140 BUILD_LIST               2
                            1142 KW_NAMES                21
                            1144 PRECALL                  1
                            1148 CALL                     1
                            1158 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1160 PRECALL                  1
                            1164 CALL                     1
                            1174 STORE_FAST               1 (rtn)
                
-               1389        1176 LOAD_FAST                0 (self)
+               1408        1176 LOAD_FAST                0 (self)
                            1178 LOAD_METHOD              1 (assertEqual)
                            1200 LOAD_FAST                1 (rtn)
                            1202 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1204 PRECALL                  2
                            1208 CALL                     2
                            1218 POP_TOP
                
-               1390        1220 PUSH_NULL
+               1409        1220 PUSH_NULL
                            1222 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1234 LOAD_CONST              27 ('invalidsubnet')
                            1236 KW_NAMES                21
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1254 PRECALL                  1
                            1258 CALL                     1
                            1268 STORE_FAST               1 (rtn)
                
-               1391        1270 LOAD_FAST                0 (self)
+               1410        1270 LOAD_FAST                0 (self)
                            1272 LOAD_METHOD              1 (assertEqual)
                            1294 LOAD_FAST                1 (rtn)
                            1296 LOAD_CONST              28 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            1298 PRECALL                  2
                            1302 CALL                     2
                            1312 POP_TOP
                            1314 LOAD_CONST               0 (None)
@@ -14642,15 +14820,15 @@
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPV6', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV6'
-               firstlineno 1360
+               firstlineno 1379
                lnotab
                   0x02012e012c012e012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0432012c0132012c0132012c0132012c0136012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
@@ -14761,661 +14939,661 @@
                   020000000000000000010002007401000000000000000000006446644067
                   02ac41a6010000ab0100000000000000006442a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   016443a6020000ab02000000000000000001000200740100000000000000
                   0000006447ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016448a6020000ab020000000000000000010064005300
-               1393           0 RESUME                   0
+               1412           0 RESUME                   0
                
-               1394           2 PUSH_NULL
+               1413           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('192.168.1.5')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1395          48 LOAD_FAST                0 (self)
+               1414          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('192.168.1.5', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1396          92 PUSH_NULL
+               1415          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             106 LOAD_CONST               3 (False)
                             108 KW_NAMES                 4
                             110 PRECALL                  1
                             114 CALL                     1
                             124 LOAD_CONST               1 ('192.168.1.5')
                             126 PRECALL                  1
                             130 CALL                     1
                             140 STORE_FAST               1 (rtn)
                
-               1397         142 LOAD_FAST                0 (self)
+               1416         142 LOAD_FAST                0 (self)
                             144 LOAD_METHOD              1 (assertEqual)
                             166 LOAD_FAST                1 (rtn)
                             168 LOAD_CONST               2 (('192.168.1.5', None))
                             170 PRECALL                  2
                             174 CALL                     2
                             184 POP_TOP
                
-               1398         186 PUSH_NULL
+               1417         186 PUSH_NULL
                             188 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             200 PRECALL                  0
                             204 CALL                     0
                             214 LOAD_CONST               5 ('255.255.255.255')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1399         232 LOAD_FAST                0 (self)
+               1418         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               6 (('255.255.255.255', None))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1400         276 PUSH_NULL
+               1419         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             290 PRECALL                  0
                             294 CALL                     0
                             304 LOAD_CONST               7 ('192.168.1.5 ')
                             306 PRECALL                  1
                             310 CALL                     1
                             320 STORE_FAST               1 (rtn)
                
-               1401         322 LOAD_FAST                0 (self)
+               1420         322 LOAD_FAST                0 (self)
                             324 LOAD_METHOD              1 (assertEqual)
                             346 LOAD_FAST                1 (rtn)
                             348 LOAD_CONST               8 (('192.168.1.5 ', 'Enter valid IP address'))
                             350 PRECALL                  2
                             354 CALL                     2
                             364 POP_TOP
                
-               1402         366 PUSH_NULL
+               1421         366 PUSH_NULL
                             368 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             380 PRECALL                  0
                             384 CALL                     0
                             394 LOAD_CONST               9 ('192.168.1.1.5')
                             396 PRECALL                  1
                             400 CALL                     1
                             410 STORE_FAST               1 (rtn)
                
-               1403         412 LOAD_FAST                0 (self)
+               1422         412 LOAD_FAST                0 (self)
                             414 LOAD_METHOD              1 (assertEqual)
                             436 LOAD_FAST                1 (rtn)
                             438 LOAD_CONST              10 (('192.168.1.1.5', 'Enter valid IP address'))
                             440 PRECALL                  2
                             444 CALL                     2
                             454 POP_TOP
                
-               1404         456 PUSH_NULL
+               1423         456 PUSH_NULL
                             458 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             470 PRECALL                  0
                             474 CALL                     0
                             484 LOAD_CONST              11 ('123.123')
                             486 PRECALL                  1
                             490 CALL                     1
                             500 STORE_FAST               1 (rtn)
                
-               1405         502 LOAD_FAST                0 (self)
+               1424         502 LOAD_FAST                0 (self)
                             504 LOAD_METHOD              1 (assertEqual)
                             526 LOAD_FAST                1 (rtn)
                             528 LOAD_CONST              12 (('123.123', 'Enter valid IP address'))
                             530 PRECALL                  2
                             534 CALL                     2
                             544 POP_TOP
                
-               1406         546 PUSH_NULL
+               1425         546 PUSH_NULL
                             548 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             560 PRECALL                  0
                             564 CALL                     0
                             574 LOAD_CONST              13 ('1111.2.3.4')
                             576 PRECALL                  1
                             580 CALL                     1
                             590 STORE_FAST               1 (rtn)
                
-               1407         592 LOAD_FAST                0 (self)
+               1426         592 LOAD_FAST                0 (self)
                             594 LOAD_METHOD              1 (assertEqual)
                             616 LOAD_FAST                1 (rtn)
                             618 LOAD_CONST              14 (('1111.2.3.4', 'Enter valid IP address'))
                             620 PRECALL                  2
                             624 CALL                     2
                             634 POP_TOP
                
-               1408         636 PUSH_NULL
+               1427         636 PUSH_NULL
                             638 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             650 PRECALL                  0
                             654 CALL                     0
                             664 LOAD_CONST              15 ('0111.2.3.4')
                             666 PRECALL                  1
                             670 CALL                     1
                             680 STORE_FAST               1 (rtn)
                
-               1409         682 LOAD_FAST                0 (self)
+               1428         682 LOAD_FAST                0 (self)
                             684 LOAD_METHOD              1 (assertEqual)
                             706 LOAD_FAST                1 (rtn)
                             708 LOAD_CONST              16 (('0111.2.3.4', 'Enter valid IP address'))
                             710 PRECALL                  2
                             714 CALL                     2
                             724 POP_TOP
                
-               1410         726 PUSH_NULL
+               1429         726 PUSH_NULL
                             728 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             740 PRECALL                  0
                             744 CALL                     0
                             754 LOAD_CONST              17 ('256.2.3.4')
                             756 PRECALL                  1
                             760 CALL                     1
                             770 STORE_FAST               1 (rtn)
                
-               1411         772 LOAD_FAST                0 (self)
+               1430         772 LOAD_FAST                0 (self)
                             774 LOAD_METHOD              1 (assertEqual)
                             796 LOAD_FAST                1 (rtn)
                             798 LOAD_CONST              18 (('256.2.3.4', 'Enter valid IP address'))
                             800 PRECALL                  2
                             804 CALL                     2
                             814 POP_TOP
                
-               1412         816 PUSH_NULL
+               1431         816 PUSH_NULL
                             818 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             830 PRECALL                  0
                             834 CALL                     0
                             844 LOAD_CONST              19 ('300.2.3.4')
                             846 PRECALL                  1
                             850 CALL                     1
                             860 STORE_FAST               1 (rtn)
                
-               1413         862 LOAD_FAST                0 (self)
+               1432         862 LOAD_FAST                0 (self)
                             864 LOAD_METHOD              1 (assertEqual)
                             886 LOAD_FAST                1 (rtn)
                             888 LOAD_CONST              20 (('300.2.3.4', 'Enter valid IP address'))
                             890 PRECALL                  2
                             894 CALL                     2
                             904 POP_TOP
                
-               1414         906 PUSH_NULL
+               1433         906 PUSH_NULL
                             908 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             920 LOAD_CONST              21 ('192.168.1.0')
                             922 LOAD_CONST              22 ('192.168.1.255')
                             924 KW_NAMES                23
                             926 PRECALL                  2
                             930 CALL                     2
                             940 LOAD_CONST              24 ('192.168.1.100')
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               1 (rtn)
                
-               1415         958 LOAD_FAST                0 (self)
+               1434         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              1 (assertEqual)
                             982 LOAD_FAST                1 (rtn)
                             984 LOAD_CONST              25 (('192.168.1.100', None))
                             986 PRECALL                  2
                             990 CALL                     2
                            1000 POP_TOP
                
-               1416        1002 PUSH_NULL
+               1435        1002 PUSH_NULL
                            1004 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1016 LOAD_CONST              26 ('1.2.3.5')
                            1018 LOAD_CONST              27 ('1.2.3.9')
                            1020 LOAD_CONST              28 ('bad ip')
                            1022 KW_NAMES                29
                            1024 PRECALL                  3
                            1028 CALL                     3
                
-               1417        1038 LOAD_CONST              30 ('1.2.3.4')
+               1436        1038 LOAD_CONST              30 ('1.2.3.4')
                
-               1416        1040 PRECALL                  1
+               1435        1040 PRECALL                  1
                            1044 CALL                     1
                            1054 STORE_FAST               1 (rtn)
                
-               1419        1056 LOAD_FAST                0 (self)
+               1438        1056 LOAD_FAST                0 (self)
                            1058 LOAD_METHOD              1 (assertEqual)
                            1080 LOAD_FAST                1 (rtn)
                            1082 LOAD_CONST              31 (('1.2.3.4', 'bad ip'))
                            1084 PRECALL                  2
                            1088 CALL                     2
                            1098 POP_TOP
                
-               1420        1100 PUSH_NULL
+               1439        1100 PUSH_NULL
                            1102 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1114 LOAD_CONST              30 ('1.2.3.4')
                            1116 LOAD_CONST              32 (True)
                            1118 KW_NAMES                33
                            1120 PRECALL                  2
                            1124 CALL                     2
                            1134 LOAD_CONST              34 ('127.0.0.1')
                            1136 PRECALL                  1
                            1140 CALL                     1
                            1150 STORE_FAST               1 (rtn)
                
-               1421        1152 LOAD_FAST                0 (self)
+               1440        1152 LOAD_FAST                0 (self)
                            1154 LOAD_METHOD              1 (assertEqual)
                            1176 LOAD_FAST                1 (rtn)
                            1178 LOAD_CONST              35 (('127.0.0.1', None))
                            1180 PRECALL                  2
                            1184 CALL                     2
                            1194 POP_TOP
                
-               1422        1196 PUSH_NULL
+               1441        1196 PUSH_NULL
                            1198 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1210 LOAD_CONST              36 ('192.168.1.4')
                            1212 LOAD_CONST              32 (True)
                            1214 KW_NAMES                33
                            1216 PRECALL                  2
                            1220 CALL                     2
                            1230 LOAD_CONST              36 ('192.168.1.4')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1423        1248 LOAD_FAST                0 (self)
+               1442        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              37 (('192.168.1.4', 'Enter valid IP address'))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1424        1292 PUSH_NULL
+               1443        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1306 LOAD_CONST              32 (True)
                            1308 KW_NAMES                38
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST              34 ('127.0.0.1')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1425        1342 LOAD_FAST                0 (self)
+               1444        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              35 (('127.0.0.1', None))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1426        1386 PUSH_NULL
+               1445        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1400 LOAD_CONST              32 (True)
                            1402 KW_NAMES                38
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              39 ('192.168.1.10')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1427        1436 LOAD_FAST                0 (self)
+               1446        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              40 (('192.168.1.10', 'Enter valid IP address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1428        1480 PUSH_NULL
+               1447        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1494 LOAD_CONST               3 (False)
                            1496 KW_NAMES                38
                            1498 PRECALL                  1
                            1502 CALL                     1
                            1512 LOAD_CONST              34 ('127.0.0.1')
                            1514 PRECALL                  1
                            1518 CALL                     1
                            1528 STORE_FAST               1 (rtn)
                
-               1429        1530 LOAD_FAST                0 (self)
+               1448        1530 LOAD_FAST                0 (self)
                            1532 LOAD_METHOD              1 (assertEqual)
                            1554 LOAD_FAST                1 (rtn)
                            1556 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1558 PRECALL                  2
                            1562 CALL                     2
                            1572 POP_TOP
                
-               1430        1574 PUSH_NULL
+               1449        1574 PUSH_NULL
                            1576 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1588 LOAD_CONST              42 ('100.0.0.0')
                            1590 LOAD_CONST              32 (True)
                            1592 KW_NAMES                43
                            1594 PRECALL                  2
                            1598 CALL                     2
                            1608 LOAD_CONST              34 ('127.0.0.1')
                            1610 PRECALL                  1
                            1614 CALL                     1
                            1624 STORE_FAST               1 (rtn)
                
-               1431        1626 LOAD_FAST                0 (self)
+               1450        1626 LOAD_FAST                0 (self)
                            1628 LOAD_METHOD              1 (assertEqual)
                            1650 LOAD_FAST                1 (rtn)
                            1652 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1654 PRECALL                  2
                            1658 CALL                     2
                            1668 POP_TOP
                
-               1432        1670 PUSH_NULL
+               1451        1670 PUSH_NULL
                            1672 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1684 PRECALL                  0
                            1688 CALL                     0
                            1698 LOAD_CONST              44 ('aaa')
                            1700 PRECALL                  1
                            1704 CALL                     1
                            1714 STORE_FAST               1 (rtn)
                
-               1433        1716 LOAD_FAST                0 (self)
+               1452        1716 LOAD_FAST                0 (self)
                            1718 LOAD_METHOD              1 (assertEqual)
                            1740 LOAD_FAST                1 (rtn)
                            1742 LOAD_CONST              45 (('aaa', 'Enter valid IP address'))
                            1744 PRECALL                  2
                            1748 CALL                     2
                            1758 POP_TOP
                
-               1435        1760 PUSH_NULL
+               1454        1760 PUSH_NULL
                            1762 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1774 PRECALL                  0
                            1778 CALL                     0
                            1788 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               1 (rtn)
                
-               1436        1806 LOAD_FAST                0 (self)
+               1455        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              1 (assertEqual)
                            1830 LOAD_FAST                1 (rtn)
                            1832 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1834 PRECALL                  2
                            1838 CALL                     2
                            1848 POP_TOP
                
-               1437        1850 PUSH_NULL
+               1456        1850 PUSH_NULL
                            1852 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1864 LOAD_CONST               3 (False)
                            1866 KW_NAMES                48
                            1868 PRECALL                  1
                            1872 CALL                     1
                            1882 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1884 PRECALL                  1
                            1888 CALL                     1
                            1898 STORE_FAST               1 (rtn)
                
-               1438        1900 LOAD_FAST                0 (self)
+               1457        1900 LOAD_FAST                0 (self)
                            1902 LOAD_METHOD              1 (assertEqual)
                            1924 LOAD_FAST                1 (rtn)
                            1926 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1928 PRECALL                  2
                            1932 CALL                     2
                            1942 POP_TOP
                
-               1439        1944 PUSH_NULL
+               1458        1944 PUSH_NULL
                            1946 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1958 PRECALL                  0
                            1962 CALL                     0
                            1972 LOAD_CONST              49 ('fe80::126c:8ffa:fe22:b3af  ')
                            1974 PRECALL                  1
                            1978 CALL                     1
                            1988 STORE_FAST               1 (rtn)
                
-               1440        1990 LOAD_FAST                0 (self)
+               1459        1990 LOAD_FAST                0 (self)
                            1992 LOAD_METHOD              1 (assertEqual)
                            2014 LOAD_FAST                1 (rtn)
                            2016 LOAD_CONST              50 (('fe80::126c:8ffa:fe22:b3af  ', 'Enter valid IP address'))
                            2018 PRECALL                  2
                            2022 CALL                     2
                            2032 POP_TOP
                
-               1441        2034 PUSH_NULL
+               1460        2034 PUSH_NULL
                            2036 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2048 LOAD_CONST              32 (True)
                            2050 KW_NAMES                48
                            2052 PRECALL                  1
                            2056 CALL                     1
                            2066 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2068 PRECALL                  1
                            2072 CALL                     1
                            2082 STORE_FAST               1 (rtn)
                
-               1442        2084 LOAD_FAST                0 (self)
+               1461        2084 LOAD_FAST                0 (self)
                            2086 LOAD_METHOD              1 (assertEqual)
                            2108 LOAD_FAST                1 (rtn)
                            2110 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2112 PRECALL                  2
                            2116 CALL                     2
                            2126 POP_TOP
                
-               1443        2128 PUSH_NULL
+               1462        2128 PUSH_NULL
                            2130 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2142 LOAD_CONST              32 (True)
                            2144 KW_NAMES                 4
                            2146 PRECALL                  1
                            2150 CALL                     1
                            2160 LOAD_CONST              52 ('192.168.1.1')
                            2162 PRECALL                  1
                            2166 CALL                     1
                            2176 STORE_FAST               1 (rtn)
                
-               1444        2178 LOAD_FAST                0 (self)
+               1463        2178 LOAD_FAST                0 (self)
                            2180 LOAD_METHOD              1 (assertEqual)
                            2202 LOAD_FAST                1 (rtn)
                            2204 LOAD_CONST              53 (('192.168.1.1', 'Enter valid IP address'))
                            2206 PRECALL                  2
                            2210 CALL                     2
                            2220 POP_TOP
                
-               1445        2222 PUSH_NULL
+               1464        2222 PUSH_NULL
                            2224 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2236 LOAD_CONST              32 (True)
                            2238 LOAD_CONST              28 ('bad ip')
                            2240 KW_NAMES                54
                            2242 PRECALL                  2
                            2246 CALL                     2
                            2256 LOAD_CONST              52 ('192.168.1.1')
                            2258 PRECALL                  1
                            2262 CALL                     1
                            2272 STORE_FAST               1 (rtn)
                
-               1446        2274 LOAD_FAST                0 (self)
+               1465        2274 LOAD_FAST                0 (self)
                            2276 LOAD_METHOD              1 (assertEqual)
                            2298 LOAD_FAST                1 (rtn)
                            2300 LOAD_CONST              55 (('192.168.1.1', 'bad ip'))
                            2302 PRECALL                  2
                            2306 CALL                     2
                            2316 POP_TOP
                
-               1447        2318 PUSH_NULL
+               1466        2318 PUSH_NULL
                            2320 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2332 LOAD_CONST              32 (True)
                            2334 KW_NAMES                56
                            2336 PRECALL                  1
                            2340 CALL                     1
                            2350 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2352 PRECALL                  1
                            2356 CALL                     1
                            2366 STORE_FAST               1 (rtn)
                
-               1448        2368 LOAD_FAST                0 (self)
+               1467        2368 LOAD_FAST                0 (self)
                            2370 LOAD_METHOD              1 (assertEqual)
                            2392 LOAD_FAST                1 (rtn)
                            2394 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            2396 PRECALL                  2
                            2400 CALL                     2
                            2410 POP_TOP
                
-               1449        2412 PUSH_NULL
+               1468        2412 PUSH_NULL
                            2414 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2426 LOAD_CONST               3 (False)
                            2428 KW_NAMES                56
                            2430 PRECALL                  1
                            2434 CALL                     1
                            2444 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2446 PRECALL                  1
                            2450 CALL                     1
                            2460 STORE_FAST               1 (rtn)
                
-               1450        2462 LOAD_FAST                0 (self)
+               1469        2462 LOAD_FAST                0 (self)
                            2464 LOAD_METHOD              1 (assertEqual)
                            2486 LOAD_FAST                1 (rtn)
                            2488 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2490 PRECALL                  2
                            2494 CALL                     2
                            2504 POP_TOP
                
-               1451        2506 PUSH_NULL
+               1470        2506 PUSH_NULL
                            2508 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2520 LOAD_CONST              32 (True)
                            2522 KW_NAMES                56
                            2524 PRECALL                  1
                            2528 CALL                     1
                            2538 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2540 PRECALL                  1
                            2544 CALL                     1
                            2554 STORE_FAST               1 (rtn)
                
-               1452        2556 LOAD_FAST                0 (self)
+               1471        2556 LOAD_FAST                0 (self)
                            2558 LOAD_METHOD              1 (assertEqual)
                            2580 LOAD_FAST                1 (rtn)
                            2582 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2584 PRECALL                  2
                            2588 CALL                     2
                            2598 POP_TOP
                
-               1453        2600 PUSH_NULL
+               1472        2600 PUSH_NULL
                            2602 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2614 LOAD_CONST              32 (True)
                            2616 KW_NAMES                59
                            2618 PRECALL                  1
                            2622 CALL                     1
                            2632 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2634 PRECALL                  1
                            2638 CALL                     1
                            2648 STORE_FAST               1 (rtn)
                
-               1454        2650 LOAD_FAST                0 (self)
+               1473        2650 LOAD_FAST                0 (self)
                            2652 LOAD_METHOD              1 (assertEqual)
                            2674 LOAD_FAST                1 (rtn)
                            2676 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2678 PRECALL                  2
                            2682 CALL                     2
                            2692 POP_TOP
                
-               1455        2694 PUSH_NULL
+               1474        2694 PUSH_NULL
                            2696 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2708 LOAD_CONST              32 (True)
                            2710 KW_NAMES                59
                            2712 PRECALL                  1
                            2716 CALL                     1
                            2726 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2728 PRECALL                  1
                            2732 CALL                     1
                            2742 STORE_FAST               1 (rtn)
                
-               1456        2744 LOAD_FAST                0 (self)
+               1475        2744 LOAD_FAST                0 (self)
                            2746 LOAD_METHOD              1 (assertEqual)
                            2768 LOAD_FAST                1 (rtn)
                            2770 LOAD_CONST              61 (('ff00::126c:8ffa:fe22:b3af', None))
                            2772 PRECALL                  2
                            2776 CALL                     2
                            2786 POP_TOP
                
-               1457        2788 PUSH_NULL
+               1476        2788 PUSH_NULL
                            2790 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2802 LOAD_CONST              32 (True)
                            2804 KW_NAMES                62
                            2806 PRECALL                  1
                            2810 CALL                     1
                            2820 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2822 PRECALL                  1
                            2826 CALL                     1
                            2836 STORE_FAST               1 (rtn)
                
-               1458        2838 LOAD_FAST                0 (self)
+               1477        2838 LOAD_FAST                0 (self)
                            2840 LOAD_METHOD              1 (assertEqual)
                            2862 LOAD_FAST                1 (rtn)
                            2864 LOAD_CONST              63 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2866 PRECALL                  2
                            2870 CALL                     2
                            2880 POP_TOP
                
-               1459        2882 PUSH_NULL
+               1478        2882 PUSH_NULL
                            2884 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2896 LOAD_CONST              64 ('2001::/32')
                            2898 KW_NAMES                65
                            2900 PRECALL                  1
                            2904 CALL                     1
                            2914 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            2916 PRECALL                  1
                            2920 CALL                     1
                            2930 STORE_FAST               1 (rtn)
                
-               1460        2932 LOAD_FAST                0 (self)
+               1479        2932 LOAD_FAST                0 (self)
                            2934 LOAD_METHOD              1 (assertEqual)
                            2956 LOAD_FAST                1 (rtn)
                            2958 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            2960 PRECALL                  2
                            2964 CALL                     2
                            2974 POP_TOP
                
-               1461        2976 PUSH_NULL
+               1480        2976 PUSH_NULL
                            2978 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2990 LOAD_CONST              68 ('fb00::/8')
                            2992 KW_NAMES                65
                            2994 PRECALL                  1
                            2998 CALL                     1
                            3008 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3010 PRECALL                  1
                            3014 CALL                     1
                            3024 STORE_FAST               1 (rtn)
                
-               1462        3026 LOAD_FAST                0 (self)
+               1481        3026 LOAD_FAST                0 (self)
                            3028 LOAD_METHOD              1 (assertEqual)
                            3050 LOAD_FAST                1 (rtn)
                            3052 LOAD_CONST              69 (('2001::8ffa:fe22:b3af', 'Enter valid IP address'))
                            3054 PRECALL                  2
                            3058 CALL                     2
                            3068 POP_TOP
                
-               1463        3070 PUSH_NULL
+               1482        3070 PUSH_NULL
                            3072 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3084 LOAD_CONST              70 ('fc00::/8')
                            3086 LOAD_CONST              64 ('2001::/32')
                            3088 BUILD_LIST               2
                            3090 KW_NAMES                65
                            3092 PRECALL                  1
                            3096 CALL                     1
                            3106 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3108 PRECALL                  1
                            3112 CALL                     1
                            3122 STORE_FAST               1 (rtn)
                
-               1464        3124 LOAD_FAST                0 (self)
+               1483        3124 LOAD_FAST                0 (self)
                            3126 LOAD_METHOD              1 (assertEqual)
                            3148 LOAD_FAST                1 (rtn)
                            3150 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            3152 PRECALL                  2
                            3156 CALL                     2
                            3166 POP_TOP
                
-               1465        3168 PUSH_NULL
+               1484        3168 PUSH_NULL
                            3170 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3182 LOAD_CONST              71 ('invalidsubnet')
                            3184 KW_NAMES                65
                            3186 PRECALL                  1
                            3190 CALL                     1
                            3200 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3202 PRECALL                  1
                            3206 CALL                     1
                            3216 STORE_FAST               1 (rtn)
                
-               1466        3218 LOAD_FAST                0 (self)
+               1485        3218 LOAD_FAST                0 (self)
                            3220 LOAD_METHOD              1 (assertEqual)
                            3242 LOAD_FAST                1 (rtn)
                            3244 LOAD_CONST              72 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            3246 PRECALL                  2
                            3250 CALL                     2
                            3260 POP_TOP
                            3262 LOAD_CONST               0 (None)
@@ -15496,34 +15674,97 @@
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPADDRESS', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPADDRESS'
-               firstlineno 1393
+               firstlineno 1412
                lnotab
                   0x02012e012c0132012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c0134012c01240102ff10032c0134012c0134
                   012c0132012c0132012c0132012c0134012c012e012c022e012c0132012c
                   012e012c0132012c0132012c0134012c0132012c0132012c0132012c0132
                   012c0132012c0132012c0132012c0132012c0136012c013201
+            code
+               argcount  : 1
+               nlocals   : 2
+               stacksize : 4
+               flags     : 3
+               code
+                  0x97000200740100000000000000000000a6000000ab0000000000000000
+                  006401a6010000ab0100000000000000007d010900020074010000000000
+                  0000000000a6000000ab0000000000000000006402a6010000ab01000000
+                  00000000007d01090002007401000000000000000000006403ac04a60100
+                  00ab0100000000000000006402a6010000ab0100000000000000007d0164
+                  005300
+               1487           0 RESUME                   0
+               
+               1489           2 PUSH_NULL
+                              4 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                             16 PRECALL                  0
+                             20 CALL                     0
+                             30 LOAD_CONST               1 ('<div>test</div>')
+                             32 PRECALL                  1
+                             36 CALL                     1
+                             46 STORE_FAST               1 (rtn)
+               
+               1490          48 NOP
+               
+               1492          50 PUSH_NULL
+                             52 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                             64 PRECALL                  0
+                             68 CALL                     0
+                             78 LOAD_CONST               2 ('<div><script>xxx</script></div>')
+                             80 PRECALL                  1
+                             84 CALL                     1
+                             94 STORE_FAST               1 (rtn)
+               
+               1493          96 NOP
+               
+               1495          98 PUSH_NULL
+                            100 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                            112 LOAD_CONST               3 ('sanitize')
+                            114 KW_NAMES                 4
+                            116 PRECALL                  1
+                            120 CALL                     1
+                            130 LOAD_CONST               2 ('<div><script>xxx</script></div>')
+                            132 PRECALL                  1
+                            136 CALL                     1
+                            146 STORE_FAST               1 (rtn)
+               
+               1496         148 LOAD_CONST               0 (None)
+                            150 RETURN_VALUE
+               consts
+                  None
+                  '<div>test</div>'
+                  '<div><script>xxx</script></div>'
+                  'sanitize'
+                  ('mode',)
+               names      ('IS_SAFE',)
+               varnames   ('self', 'rtn')
+               freevars   ()
+               cellvars   ()
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+               name       'test_IS_SAFE'
+               firstlineno 1487
+               lnotab 0x02022e0102022e0102023201
             None
-         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_IN_DB_options', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS')
+         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_IN_DB_options', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS', 'test_IS_SAFE')
          varnames   ()
          freevars   ()
          cellvars   ()
          filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
          name       'TestValidators'
          firstlineno 17
          lnotab
-            0x0a010605060d06240606060a0647060e0628067f0031060d061e061a06
+            0x0a010605060d06240606060a0647060e0631067f00310617061e061a06
             290636061c060a064d061006100626060b061f0620063a06110608060806
             2806121c06020104ff0e010204062606040616065d064606420639062606
-            21
+            21064b
       'TestValidators'
    names      ('__doc__', 'builtins', '@py_builtins', '_pytest.assertion.rewrite', 'assertion', 'rewrite', '@pytest_ar', 'datetime', 'decimal', 're', 'unittest', 'pydal', 'DAL', 'Field', 'pydal._compat', 'PY2', 'to_bytes', 'pydal.validators', 'UTC', 'Validator', 'options_sorter', 'TestCase', 'TestValidators')
    varnames   ()
    freevars   ()
    cellvars   ()
    filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
    name       '<module>'
```

### Comparing `pydal-20240529.1/tests/__pycache__/validators.cpython-311.pyc` & `pydal-20240601.1/tests/__pycache__/validators.cpython-311.pyc`

 * *Files 2% similar despite different names*

#### Python bytecode

```diff
@@ -1,24 +1,24 @@
 magic:    0xa70d0d0a
-moddate:  0x75245866 (Thu May 30 07:02:13 2024 UTC)
-files sz: 67571
+moddate:  0xc8f45b66 (Sun Jun  2 04:27:52 2024 UTC)
+files sz: 68332
 code
    argcount  : 0
    nlocals   : 0
    stacksize : 5
    flags     : 0
    code
       0x970064005a00640164026c015a01640164026c025a02640164026c035a
       03640164026c045a04640164036c056d065a066d075a070100640164046c
       086d095a096d0a5a0a0100640164056c0b5400640164066c0b6d0c5a0c6d
       0d5a0d6d0e5a0e01000200470064078400640865046a0f00000000000000
       00a6030000ab0300000000000000005a1064025300
      0           0 RESUME                   0
    
-     4           2 LOAD_CONST               0 ('Unit tests for http.py ')
+     4           2 LOAD_CONST               0 ('Unit tests for validators.py ')
                  4 STORE_NAME               0 (__doc__)
    
      6           6 LOAD_CONST               1 (0)
                  8 LOAD_CONST               2 (None)
                 10 IMPORT_NAME              1 (datetime)
                 12 STORE_NAME               1 (datetime)
    
@@ -80,15 +80,15 @@
                110 LOAD_ATTR               15 (TestCase)
                120 PRECALL                  3
                124 CALL                     3
                134 STORE_NAME              16 (TestValidators)
                136 LOAD_CONST               2 (None)
                138 RETURN_VALUE
    consts
-      'Unit tests for http.py '
+      'Unit tests for validators.py '
       0
       None
       ('DAL', 'Field')
       ('PY2', 'to_bytes')
       ('*',)
       ('UTC', 'Validator', 'options_sorter')
       code
@@ -102,15 +102,16 @@
             0984005a0b640a84005a0c640b84005a0d640c84005a0e640d84005a0f64
             0e84005a10640f84005a11641084005a12641184005a13641284005a1464
             1384005a15641484005a16641584005a17641684005a18641784005a1964
             1884005a1a641984005a1b641a84005a1c641b84005a1d641c84005a1e64
             1d84005a1f02004700641e8400641f6520a6030000ab0300000000000000
             005a21652264208400a6000000ab0000000000000000005a23642184005a
             24642284005a25642384005a26642484005a27642584005a28642684005a
-            29642784005a2a642884005a2b642984005a2c642a84005a2d642b5300
+            29642784005a2a642884005a2b642984005a2c642a84005a2d642b84005a
+            2e642c5300
            17           0 RESUME                   0
                         2 LOAD_NAME                0 (__name__)
                         4 STORE_NAME               1 (__module__)
                         6 LOAD_CONST               0 ('TestValidators')
                         8 STORE_NAME               2 (__qualname__)
          
            18          10 LOAD_CONST               1 (<code object myassertRegex, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 18>)
@@ -141,159 +142,163 @@
                        48 MAKE_FUNCTION            0
                        50 STORE_NAME               9 (test_IS_JSON)
          
           173          52 LOAD_CONST               8 (<code object test_IS_IN_SET, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 173>)
                        54 MAKE_FUNCTION            0
                        56 STORE_NAME              10 (test_IS_IN_SET)
          
-          213          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 213>)
+          222          58 LOAD_CONST               9 (<code object test_IS_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 222>)
                        60 MAKE_FUNCTION            0
                        62 STORE_NAME              11 (test_IS_IN_DB)
          
-          389          64 LOAD_CONST              10 (<code object test_IS_IN_DB_options, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 389>)
+          398          64 LOAD_CONST              10 (<code object test_IS_IN_DB_options, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 398>)
                        66 MAKE_FUNCTION            0
                        68 STORE_NAME              12 (test_IS_IN_DB_options)
          
-          402          70 LOAD_CONST              11 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 402>)
+          421          70 LOAD_CONST              11 (<code object test_IS_NOT_IN_DB, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 421>)
                        72 MAKE_FUNCTION            0
                        74 STORE_NAME              13 (test_IS_NOT_IN_DB)
          
-          432          76 LOAD_CONST              12 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 432>)
+          451          76 LOAD_CONST              12 (<code object test_IS_INT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 451>)
                        78 MAKE_FUNCTION            0
                        80 STORE_NAME              14 (test_IS_INT_IN_RANGE)
          
-          458          82 LOAD_CONST              13 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 458>)
+          477          82 LOAD_CONST              13 (<code object test_IS_FLOAT_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 477>)
                        84 MAKE_FUNCTION            0
                        86 STORE_NAME              15 (test_IS_FLOAT_IN_RANGE)
          
-          499          88 LOAD_CONST              14 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 499>)
+          518          88 LOAD_CONST              14 (<code object test_IS_DECIMAL_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 518>)
                        90 MAKE_FUNCTION            0
                        92 STORE_NAME              16 (test_IS_DECIMAL_IN_RANGE)
          
-          553          94 LOAD_CONST              15 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 553>)
+          572          94 LOAD_CONST              15 (<code object test_IS_NOT_EMPTY, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 572>)
                        96 MAKE_FUNCTION            0
                        98 STORE_NAME              17 (test_IS_NOT_EMPTY)
          
-          581         100 LOAD_CONST              16 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 581>)
+          600         100 LOAD_CONST              16 (<code object test_IS_ALPHANUMERIC, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 600>)
                       102 MAKE_FUNCTION            0
                       104 STORE_NAME              18 (test_IS_ALPHANUMERIC)
          
-          591         106 LOAD_CONST              17 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 591>)
+          610         106 LOAD_CONST              17 (<code object test_IS_EMAIL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 610>)
                       108 MAKE_FUNCTION            0
                       110 STORE_NAME              19 (test_IS_EMAIL)
          
-          668         112 LOAD_CONST              18 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 668>)
+          687         112 LOAD_CONST              18 (<code object test_IS_LIST_OF_EMAILS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 687>)
                       114 MAKE_FUNCTION            0
                       116 STORE_NAME              20 (test_IS_LIST_OF_EMAILS)
          
-          684         118 LOAD_CONST              19 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 684>)
+          703         118 LOAD_CONST              19 (<code object test_IS_URL, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 703>)
                       120 MAKE_FUNCTION            0
                       122 STORE_NAME              21 (test_IS_URL)
          
-          700         124 LOAD_CONST              20 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 700>)
+          719         124 LOAD_CONST              20 (<code object test_IS_TIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 719>)
                       126 MAKE_FUNCTION            0
                       128 STORE_NAME              22 (test_IS_TIME)
          
-          738         130 LOAD_CONST              21 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 738>)
+          757         130 LOAD_CONST              21 (<code object test_IS_DATE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 757>)
                       132 MAKE_FUNCTION            0
                       134 STORE_NAME              23 (test_IS_DATE)
          
-          749         136 LOAD_CONST              22 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 749>)
+          768         136 LOAD_CONST              22 (<code object test_IS_DATETIME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 768>)
                       138 MAKE_FUNCTION            0
                       140 STORE_NAME              24 (test_IS_DATETIME)
          
-          780         142 LOAD_CONST              23 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 780>)
+          799         142 LOAD_CONST              23 (<code object test_IS_DATE_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 799>)
                       144 MAKE_FUNCTION            0
                       146 STORE_NAME              25 (test_IS_DATE_IN_RANGE)
          
-          812         148 LOAD_CONST              24 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 812>)
+          831         148 LOAD_CONST              24 (<code object test_IS_DATETIME_IN_RANGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 831>)
                       150 MAKE_FUNCTION            0
                       152 STORE_NAME              26 (test_IS_DATETIME_IN_RANGE)
          
-          870         154 LOAD_CONST              25 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 870>)
+          889         154 LOAD_CONST              25 (<code object test_IS_LIST_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 889>)
                       156 MAKE_FUNCTION            0
                       158 STORE_NAME              27 (test_IS_LIST_OF)
          
-          887         160 LOAD_CONST              26 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 887>)
+          906         160 LOAD_CONST              26 (<code object test_IS_LOWER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 906>)
                       162 MAKE_FUNCTION            0
                       164 STORE_NAME              28 (test_IS_LOWER)
          
-          895         166 LOAD_CONST              27 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 895>)
+          914         166 LOAD_CONST              27 (<code object test_IS_UPPER, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 914>)
                       168 MAKE_FUNCTION            0
                       170 STORE_NAME              29 (test_IS_UPPER)
          
-          903         172 LOAD_CONST              28 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 903>)
+          922         172 LOAD_CONST              28 (<code object test_IS_SLUG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 922>)
                       174 MAKE_FUNCTION            0
                       176 STORE_NAME              30 (test_IS_SLUG)
          
-          943         178 LOAD_CONST              29 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 943>)
+          962         178 LOAD_CONST              29 (<code object test_ANY_OF, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 962>)
                       180 MAKE_FUNCTION            0
                       182 STORE_NAME              31 (test_ANY_OF)
          
-          961         184 PUSH_NULL
+          980         184 PUSH_NULL
                       186 LOAD_BUILD_CLASS
-                      188 LOAD_CONST              30 (<code object CustomValidator, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 961>)
+                      188 LOAD_CONST              30 (<code object CustomValidator, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 980>)
                       190 MAKE_FUNCTION            0
                       192 LOAD_CONST              31 ('CustomValidator')
                       194 LOAD_NAME               32 (Validator)
                       196 PRECALL                  3
                       200 CALL                     3
                       210 STORE_NAME              33 (CustomValidator)
          
-          967         212 LOAD_NAME               34 (staticmethod)
+          986         212 LOAD_NAME               34 (staticmethod)
          
-          968         214 LOAD_CONST              32 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 967>)
+          987         214 LOAD_CONST              32 (<code object custom_validator_func, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 986>)
                       216 MAKE_FUNCTION            0
          
-          967         218 PRECALL                  0
+          986         218 PRECALL                  0
                       222 CALL                     0
          
-          968         232 STORE_NAME              35 (custom_validator_func)
+          987         232 STORE_NAME              35 (custom_validator_func)
          
-          972         234 LOAD_CONST              33 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 972>)
+          991         234 LOAD_CONST              33 (<code object test_IS_EMPTY_OR, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 991>)
                       236 MAKE_FUNCTION            0
                       238 STORE_NAME              36 (test_IS_EMPTY_OR)
          
-         1010         240 LOAD_CONST              34 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1010>)
+         1029         240 LOAD_CONST              34 (<code object test_CLEANUP, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1029>)
                       242 MAKE_FUNCTION            0
                       244 STORE_NAME              37 (test_CLEANUP)
          
-         1014         246 LOAD_CONST              35 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1014>)
+         1033         246 LOAD_CONST              35 (<code object test_CRYPT, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1033>)
                       248 MAKE_FUNCTION            0
                       250 STORE_NAME              38 (test_CRYPT)
          
-         1036         252 LOAD_CONST              36 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1036>)
+         1055         252 LOAD_CONST              36 (<code object test_IS_STRONG, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1055>)
                       254 MAKE_FUNCTION            0
                       256 STORE_NAME              39 (test_IS_STRONG)
          
-         1129         258 LOAD_CONST              37 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1129>)
+         1148         258 LOAD_CONST              37 (<code object test_IS_IMAGE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1148>)
                       260 MAKE_FUNCTION            0
                       262 STORE_NAME              40 (test_IS_IMAGE)
          
-         1199         264 LOAD_CONST              38 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1199>)
+         1218         264 LOAD_CONST              38 (<code object test_IS_FILE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1218>)
                       266 MAKE_FUNCTION            0
                       268 STORE_NAME              41 (test_IS_FILE)
          
-         1265         270 LOAD_CONST              39 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1265>)
+         1284         270 LOAD_CONST              39 (<code object test_IS_UPLOAD_FILENAME, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1284>)
                       272 MAKE_FUNCTION            0
                       274 STORE_NAME              42 (test_IS_UPLOAD_FILENAME)
          
-         1322         276 LOAD_CONST              40 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1322>)
+         1341         276 LOAD_CONST              40 (<code object test_IS_IPV4, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1341>)
                       278 MAKE_FUNCTION            0
                       280 STORE_NAME              43 (test_IS_IPV4)
          
-         1360         282 LOAD_CONST              41 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1360>)
+         1379         282 LOAD_CONST              41 (<code object test_IS_IPV6, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1379>)
                       284 MAKE_FUNCTION            0
                       286 STORE_NAME              44 (test_IS_IPV6)
          
-         1393         288 LOAD_CONST              42 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1393>)
+         1412         288 LOAD_CONST              42 (<code object test_IS_IPADDRESS, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1412>)
                       290 MAKE_FUNCTION            0
                       292 STORE_NAME              45 (test_IS_IPADDRESS)
-                      294 LOAD_CONST              43 (None)
-                      296 RETURN_VALUE
+         
+         1487         294 LOAD_CONST              43 (<code object test_IS_SAFE, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1487>)
+                      296 MAKE_FUNCTION            0
+                      298 STORE_NAME              46 (test_IS_SAFE)
+                      300 LOAD_CONST              44 (None)
+                      302 RETURN_VALUE
          consts
             'TestValidators'
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 5
                flags     : 15
@@ -1971,430 +1976,488 @@
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_JSON'
                firstlineno 159
                lnotab 0x02012e0134012e012c0132012c0142012c0146012c014a01
             code
                argcount  : 1
-               nlocals   : 3
+               nlocals   : 4
                stacksize : 8
                flags     : 3
                code
-                  0x97000200740100000000000000000000640164026702a6010000ab0100
-                  000000000000006401a6010000ab0100000000000000007d017c00a00100
-                  000000000000000000000000000000000000007c016403a6020000ab0200
-                  0000000000000001000200740100000000000000000000640164026702a6
-                  010000ab0100000000000000006404a6010000ab0100000000000000007d
-                  017c00a00100000000000000000000000000000000000000007c016405a6
+                  0x870497000200740100000000000000000000640164026702a6010000ab
+                  0100000000000000006401a6010000ab0100000000000000007d017c00a0
+                  0100000000000000000000000000000000000000007c016403a6020000ab
+                  020000000000000000010002007401000000000000000000006401640267
+                  02a6010000ab0100000000000000006404a6010000ab0100000000000000
+                  007d017c00a00100000000000000000000000000000000000000007c0164
+                  05a6020000ab020000000000000000010002007401000000000000000000
+                  006401640267026406ac07a6020000ab0200000000000000006408a60100
+                  00ab0100000000000000007d017c00a00100000000000000000000000000
+                  000000000000007c016409a6020000ab0200000000000000000100020074
+                  01000000000000000000006401640267026406ac07a6020000ab02000000
+                  0000000000640aa6010000ab0100000000000000007d017c00a001000000
+                  00000000000000000000000000000000007c01640ba6020000ab02000000
+                  000000000001000200740100000000000000000000640c640d640e6702a6
+                  020000ab020000000000000000640fa6010000ab0100000000000000007d
+                  017c00a00100000000000000000000000000000000000000007c016410a6
                   020000ab0200000000000000000100020074010000000000000000000064
-                  01640267026406ac07a6020000ab0200000000000000006408a6010000ab
-                  0100000000000000007d017c00a001000000000000000000000000000000
-                  00000000007c016409a6020000ab02000000000000000001000200740100
-                  0000000000000000006401640267026406ac07a6020000ab020000000000
-                  000000640aa6010000ab0100000000000000007d017c00a0010000000000
-                  0000000000000000000000000000007c01640ba6020000ab020000000000
-                  00000001000200740100000000000000000000640c640d640e6702a60200
-                  00ab020000000000000000640fa6010000ab0100000000000000007d017c
-                  00a00100000000000000000000000000000000000000007c016410a60200
-                  00ab02000000000000000001000200740100000000000000000000640d64
-                  0e640c9c02a6010000ab010000000000000000640fa6010000ab01000000
-                  00000000007d017c00a00100000000000000000000000000000000000000
-                  007c016410a6020000ab0200000000000000000100020074010000000000
-                  0000000000640f6411670264126406ac13a6030000ab0300000000000000
-                  006400a6010000ab0100000000000000007d017c00a00100000000000000
-                  000000000000000000000000007c01670064006602a6020000ab02000000
-                  000000000001000200740100000000000000000000640f64116702641264
-                  06ac13a6030000ab0300000000000000006414a6010000ab010000000000
-                  0000007d017c00a00100000000000000000000000000000000000000007c
-                  01670064006602a6020000ab020000000000000000010002007401000000
-                  00000000000000640f6411670264126406ac13a6030000ab030000000000
-                  000000640fa6010000ab0100000000000000007d017c00a0010000000000
-                  0000000000000000000000000000007c01640f670164006602a6020000ab
-                  02000000000000000001000200740100000000000000000000640f641167
-                  0264126415ac13a6030000ab0300000000000000006400a6010000ab0100
+                  0d640e640c9c02a6010000ab010000000000000000640fa6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
-                  0000007c016416a6020000ab0200000000000000000100641764006c027d
-                  0202007401000000000000000000007c02a0030000000000000000000000
-                  00000000000000000067006418a20167006419a201a6020000ab02000000
-                  0000000000a6010000ab010000000000000000641aa6010000ab01000000
+                  0000007c016410a6020000ab020000000000000000010002007401000000
+                  00000000000000640f6411670264126406ac13a6030000ab030000000000
+                  0000006400a6010000ab0100000000000000007d017c00a0010000000000
+                  0000000000000000000000000000007c01670064006602a6020000ab0200
+                  0000000000000001000200740100000000000000000000640f6411670264
+                  126406ac13a6030000ab0300000000000000006414a6010000ab01000000
                   00000000007d017c00a00100000000000000000000000000000000000000
-                  007c01641ba6020000ab0200000000000000000100020074010000000000
-                  0000000000641c641d6702a6010000ab010000000000000000640fa60100
-                  00ab0100000000000000007d017c00a00100000000000000000000000000
-                  000000000000007c016410a6020000ab0200000000000000000100740100
-                  000000000000000000641c641d6702a6010000ab010000000000000000a0
-                  040000000000000000000000000000000000000000641eac1fa6010000ab
+                  007c01670064006602a6020000ab02000000000000000001000200740100
+                  000000000000000000640f6411670264126406ac13a6030000ab03000000
+                  0000000000640fa6010000ab0100000000000000007d017c00a001000000
+                  00000000000000000000000000000000007c01640f670164006602a60200
+                  00ab02000000000000000001000200740100000000000000000000640f64
+                  11670264126415ac13a6030000ab0300000000000000006400a6010000ab
                   0100000000000000007d017c00a001000000000000000000000000000000
-                  00000000007c01641c641d6702a6020000ab020000000000000000010074
-                  0100000000000000000000640f64116702a6010000ab0100000000000000
+                  00000000007c016416a6020000ab0200000000000000000100641764006c
+                  027d0202007401000000000000000000007c02a003000000000000000000
+                  000000000000000000000067006418a20167006419a201a6020000ab0200
+                  00000000000000a6010000ab010000000000000000641aa6010000ab0100
+                  000000000000007d017c00a0010000000000000000000000000000000000
+                  0000007c01641ba6020000ab020000000000000000010002007401000000
+                  00000000000000641c641d6702a6010000ab010000000000000000640fa6
+                  010000ab0100000000000000007d017c00a0010000000000000000000000
+                  0000000000000000007c016410a6020000ab020000000000000000010074
+                  0100000000000000000000641c641d6702a6010000ab0100000000000000
                   00a0040000000000000000000000000000000000000000641eac1fa60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
-                  000000000000007c01642064216702a6020000ab02000000000000000001
-                  007401000000000000000000006411640f67026406ac22a6020000ab0200
-                  00000000000000a004000000000000000000000000000000000000000064
-                  1eac1fa6010000ab0100000000000000007d017c00a00100000000000000
-                  000000000000000000000000007c01642064216702a6020000ab02000000
-                  0000000000010064005300
-               173           0 RESUME                   0
+                  000000000000007c01641c641d6702a6020000ab02000000000000000001
+                  00740100000000000000000000640f64116702a6010000ab010000000000
+                  000000a0040000000000000000000000000000000000000000641eac1fa6
+                  010000ab0100000000000000007d017c00a0010000000000000000000000
+                  0000000000000000007c01642064216702a6020000ab0200000000000000
+                  0001007401000000000000000000006411640f67026406ac22a6020000ab
+                  020000000000000000a00400000000000000000000000000000000000000
+                  00641eac1fa6010000ab0100000000000000007d017c00a0010000000000
+                  0000000000000000000000000000007c01642064216702a6020000ab0200
+                  00000000000000010067008a047401000000000000000000008804660164
+                  238408a6010000ab0100000000000000007d0302007c036401a6010000ab
+                  0100000000000000007d017c00a001000000000000000000000000000000
+                  00000000007c016424a6020000ab02000000000000000001008904a00500
+                  000000000000000000000000000000000000006401a6010000ab01000000
+                  0000000000010002007c036401a6010000ab0100000000000000007d017c
+                  00a00100000000000000000000000000000000000000007c016403a60200
+                  00ab020000000000000000010064005300
+                             0 MAKE_CELL                4 (theset)
                
-               174           2 PUSH_NULL
-                             4 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                            16 LOAD_CONST               1 ('max')
-                            18 LOAD_CONST               2 ('john')
-                            20 BUILD_LIST               2
-                            22 PRECALL                  1
-                            26 CALL                     1
-                            36 LOAD_CONST               1 ('max')
-                            38 PRECALL                  1
-                            42 CALL                     1
-                            52 STORE_FAST               1 (rtn)
-               
-               175          54 LOAD_FAST                0 (self)
-                            56 LOAD_METHOD              1 (assertEqual)
-                            78 LOAD_FAST                1 (rtn)
-                            80 LOAD_CONST               3 (('max', None))
-                            82 PRECALL                  2
-                            86 CALL                     2
-                            96 POP_TOP
-               
-               176          98 PUSH_NULL
-                           100 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           112 LOAD_CONST               1 ('max')
-                           114 LOAD_CONST               2 ('john')
-                           116 BUILD_LIST               2
-                           118 PRECALL                  1
-                           122 CALL                     1
-                           132 LOAD_CONST               4 ('massimo')
-                           134 PRECALL                  1
-                           138 CALL                     1
-                           148 STORE_FAST               1 (rtn)
+               173           2 RESUME                   0
                
-               177         150 LOAD_FAST                0 (self)
-                           152 LOAD_METHOD              1 (assertEqual)
-                           174 LOAD_FAST                1 (rtn)
-                           176 LOAD_CONST               5 (('massimo', 'Value not allowed'))
-                           178 PRECALL                  2
-                           182 CALL                     2
-                           192 POP_TOP
-               
-               178         194 PUSH_NULL
-                           196 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           208 LOAD_CONST               1 ('max')
-                           210 LOAD_CONST               2 ('john')
-                           212 BUILD_LIST               2
-                           214 LOAD_CONST               6 (True)
-                           216 KW_NAMES                 7
-                           218 PRECALL                  2
-                           222 CALL                     2
-                           232 LOAD_CONST               8 (('max', 'john'))
-                           234 PRECALL                  1
-                           238 CALL                     1
-                           248 STORE_FAST               1 (rtn)
+               174           4 PUSH_NULL
+                             6 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                            18 LOAD_CONST               1 ('max')
+                            20 LOAD_CONST               2 ('john')
+                            22 BUILD_LIST               2
+                            24 PRECALL                  1
+                            28 CALL                     1
+                            38 LOAD_CONST               1 ('max')
+                            40 PRECALL                  1
+                            44 CALL                     1
+                            54 STORE_FAST               1 (rtn)
+               
+               175          56 LOAD_FAST                0 (self)
+                            58 LOAD_METHOD              1 (assertEqual)
+                            80 LOAD_FAST                1 (rtn)
+                            82 LOAD_CONST               3 (('max', None))
+                            84 PRECALL                  2
+                            88 CALL                     2
+                            98 POP_TOP
                
-               179         250 LOAD_FAST                0 (self)
-                           252 LOAD_METHOD              1 (assertEqual)
-                           274 LOAD_FAST                1 (rtn)
-                           276 LOAD_CONST               9 ((('max', 'john'), None))
-                           278 PRECALL                  2
-                           282 CALL                     2
-                           292 POP_TOP
-               
-               180         294 PUSH_NULL
-                           296 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           308 LOAD_CONST               1 ('max')
-                           310 LOAD_CONST               2 ('john')
-                           312 BUILD_LIST               2
-                           314 LOAD_CONST               6 (True)
-                           316 KW_NAMES                 7
-                           318 PRECALL                  2
-                           322 CALL                     2
-                           332 LOAD_CONST              10 (('bill', 'john'))
-                           334 PRECALL                  1
-                           338 CALL                     1
-                           348 STORE_FAST               1 (rtn)
+               176         100 PUSH_NULL
+                           102 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           114 LOAD_CONST               1 ('max')
+                           116 LOAD_CONST               2 ('john')
+                           118 BUILD_LIST               2
+                           120 PRECALL                  1
+                           124 CALL                     1
+                           134 LOAD_CONST               4 ('massimo')
+                           136 PRECALL                  1
+                           140 CALL                     1
+                           150 STORE_FAST               1 (rtn)
+               
+               177         152 LOAD_FAST                0 (self)
+                           154 LOAD_METHOD              1 (assertEqual)
+                           176 LOAD_FAST                1 (rtn)
+                           178 LOAD_CONST               5 (('massimo', 'Value not allowed'))
+                           180 PRECALL                  2
+                           184 CALL                     2
+                           194 POP_TOP
+               
+               178         196 PUSH_NULL
+                           198 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           210 LOAD_CONST               1 ('max')
+                           212 LOAD_CONST               2 ('john')
+                           214 BUILD_LIST               2
+                           216 LOAD_CONST               6 (True)
+                           218 KW_NAMES                 7
+                           220 PRECALL                  2
+                           224 CALL                     2
+                           234 LOAD_CONST               8 (('max', 'john'))
+                           236 PRECALL                  1
+                           240 CALL                     1
+                           250 STORE_FAST               1 (rtn)
                
-               181         350 LOAD_FAST                0 (self)
-                           352 LOAD_METHOD              1 (assertEqual)
-                           374 LOAD_FAST                1 (rtn)
-                           376 LOAD_CONST              11 ((('bill', 'john'), 'Value not allowed'))
-                           378 PRECALL                  2
-                           382 CALL                     2
-                           392 POP_TOP
+               179         252 LOAD_FAST                0 (self)
+                           254 LOAD_METHOD              1 (assertEqual)
+                           276 LOAD_FAST                1 (rtn)
+                           278 LOAD_CONST               9 ((('max', 'john'), None))
+                           280 PRECALL                  2
+                           284 CALL                     2
+                           294 POP_TOP
                
-               182         394 PUSH_NULL
-                           396 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           408 LOAD_CONST              12 (('id1', 'id2'))
-                           410 LOAD_CONST              13 ('first label')
-                           412 LOAD_CONST              14 ('second label')
-                           414 BUILD_LIST               2
-                           416 PRECALL                  2
-                           420 CALL                     2
-               
-               183         430 LOAD_CONST              15 ('id1')
-               
-               182         432 PRECALL                  1
-                           436 CALL                     1
-                           446 STORE_FAST               1 (rtn)
-               
-               185         448 LOAD_FAST                0 (self)
-                           450 LOAD_METHOD              1 (assertEqual)
-                           472 LOAD_FAST                1 (rtn)
-                           474 LOAD_CONST              16 (('id1', None))
-                           476 PRECALL                  2
-                           480 CALL                     2
-                           490 POP_TOP
-               
-               186         492 PUSH_NULL
-                           494 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           506 LOAD_CONST              13 ('first label')
-                           508 LOAD_CONST              14 ('second label')
-                           510 LOAD_CONST              12 (('id1', 'id2'))
-                           512 BUILD_CONST_KEY_MAP      2
-                           514 PRECALL                  1
-                           518 CALL                     1
-                           528 LOAD_CONST              15 ('id1')
-                           530 PRECALL                  1
-                           534 CALL                     1
-                           544 STORE_FAST               1 (rtn)
-               
-               187         546 LOAD_FAST                0 (self)
-                           548 LOAD_METHOD              1 (assertEqual)
-                           570 LOAD_FAST                1 (rtn)
-                           572 LOAD_CONST              16 (('id1', None))
-                           574 PRECALL                  2
-                           578 CALL                     2
-                           588 POP_TOP
+               180         296 PUSH_NULL
+                           298 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           310 LOAD_CONST               1 ('max')
+                           312 LOAD_CONST               2 ('john')
+                           314 BUILD_LIST               2
+                           316 LOAD_CONST               6 (True)
+                           318 KW_NAMES                 7
+                           320 PRECALL                  2
+                           324 CALL                     2
+                           334 LOAD_CONST              10 (('bill', 'john'))
+                           336 PRECALL                  1
+                           340 CALL                     1
+                           350 STORE_FAST               1 (rtn)
+               
+               181         352 LOAD_FAST                0 (self)
+                           354 LOAD_METHOD              1 (assertEqual)
+                           376 LOAD_FAST                1 (rtn)
+                           378 LOAD_CONST              11 ((('bill', 'john'), 'Value not allowed'))
+                           380 PRECALL                  2
+                           384 CALL                     2
+                           394 POP_TOP
+               
+               182         396 PUSH_NULL
+                           398 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           410 LOAD_CONST              12 (('id1', 'id2'))
+                           412 LOAD_CONST              13 ('first label')
+                           414 LOAD_CONST              14 ('second label')
+                           416 BUILD_LIST               2
+                           418 PRECALL                  2
+                           422 CALL                     2
                
-               188         590 PUSH_NULL
-                           592 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           604 LOAD_CONST              15 ('id1')
-                           606 LOAD_CONST              17 ('id2')
-                           608 BUILD_LIST               2
-                           610 LOAD_CONST              18 ('oops')
-                           612 LOAD_CONST               6 (True)
-                           614 KW_NAMES                19
-                           616 PRECALL                  3
-                           620 CALL                     3
-                           630 LOAD_CONST               0 (None)
-                           632 PRECALL                  1
-                           636 CALL                     1
-                           646 STORE_FAST               1 (rtn)
-               
-               189         648 LOAD_FAST                0 (self)
-                           650 LOAD_METHOD              1 (assertEqual)
-                           672 LOAD_FAST                1 (rtn)
-                           674 BUILD_LIST               0
-                           676 LOAD_CONST               0 (None)
-                           678 BUILD_TUPLE              2
-                           680 PRECALL                  2
-                           684 CALL                     2
-                           694 POP_TOP
-               
-               190         696 PUSH_NULL
-                           698 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           710 LOAD_CONST              15 ('id1')
-                           712 LOAD_CONST              17 ('id2')
-                           714 BUILD_LIST               2
-                           716 LOAD_CONST              18 ('oops')
-                           718 LOAD_CONST               6 (True)
-                           720 KW_NAMES                19
-                           722 PRECALL                  3
-                           726 CALL                     3
-                           736 LOAD_CONST              20 ('')
-                           738 PRECALL                  1
-                           742 CALL                     1
-                           752 STORE_FAST               1 (rtn)
-               
-               191         754 LOAD_FAST                0 (self)
-                           756 LOAD_METHOD              1 (assertEqual)
-                           778 LOAD_FAST                1 (rtn)
-                           780 BUILD_LIST               0
-                           782 LOAD_CONST               0 (None)
-                           784 BUILD_TUPLE              2
-                           786 PRECALL                  2
-                           790 CALL                     2
-                           800 POP_TOP
-               
-               192         802 PUSH_NULL
-                           804 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           816 LOAD_CONST              15 ('id1')
-                           818 LOAD_CONST              17 ('id2')
-                           820 BUILD_LIST               2
-                           822 LOAD_CONST              18 ('oops')
-                           824 LOAD_CONST               6 (True)
-                           826 KW_NAMES                19
-                           828 PRECALL                  3
-                           832 CALL                     3
-                           842 LOAD_CONST              15 ('id1')
-                           844 PRECALL                  1
-                           848 CALL                     1
-                           858 STORE_FAST               1 (rtn)
+               183         432 LOAD_CONST              15 ('id1')
                
-               193         860 LOAD_FAST                0 (self)
-                           862 LOAD_METHOD              1 (assertEqual)
-                           884 LOAD_FAST                1 (rtn)
-                           886 LOAD_CONST              15 ('id1')
-                           888 BUILD_LIST               1
-                           890 LOAD_CONST               0 (None)
-                           892 BUILD_TUPLE              2
-                           894 PRECALL                  2
-                           898 CALL                     2
-                           908 POP_TOP
+               182         434 PRECALL                  1
+                           438 CALL                     1
+                           448 STORE_FAST               1 (rtn)
+               
+               185         450 LOAD_FAST                0 (self)
+                           452 LOAD_METHOD              1 (assertEqual)
+                           474 LOAD_FAST                1 (rtn)
+                           476 LOAD_CONST              16 (('id1', None))
+                           478 PRECALL                  2
+                           482 CALL                     2
+                           492 POP_TOP
+               
+               186         494 PUSH_NULL
+                           496 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           508 LOAD_CONST              13 ('first label')
+                           510 LOAD_CONST              14 ('second label')
+                           512 LOAD_CONST              12 (('id1', 'id2'))
+                           514 BUILD_CONST_KEY_MAP      2
+                           516 PRECALL                  1
+                           520 CALL                     1
+                           530 LOAD_CONST              15 ('id1')
+                           532 PRECALL                  1
+                           536 CALL                     1
+                           546 STORE_FAST               1 (rtn)
                
-               194         910 PUSH_NULL
-                           912 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                           924 LOAD_CONST              15 ('id1')
-                           926 LOAD_CONST              17 ('id2')
-                           928 BUILD_LIST               2
-                           930 LOAD_CONST              18 ('oops')
-                           932 LOAD_CONST              21 ((1, 2))
-                           934 KW_NAMES                19
-                           936 PRECALL                  3
-                           940 CALL                     3
-                           950 LOAD_CONST               0 (None)
-                           952 PRECALL                  1
-                           956 CALL                     1
-                           966 STORE_FAST               1 (rtn)
-               
-               195         968 LOAD_FAST                0 (self)
-                           970 LOAD_METHOD              1 (assertEqual)
-                           992 LOAD_FAST                1 (rtn)
-                           994 LOAD_CONST              22 ((None, 'oops'))
-                           996 PRECALL                  2
-                          1000 CALL                     2
-                          1010 POP_TOP
-               
-               196        1012 LOAD_CONST              23 (0)
-                          1014 LOAD_CONST               0 (None)
-                          1016 IMPORT_NAME              2 (itertools)
-                          1018 STORE_FAST               2 (itertools)
-               
-               198        1020 PUSH_NULL
-                          1022 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1034 LOAD_FAST                2 (itertools)
-                          1036 LOAD_METHOD              3 (chain)
-                          1058 BUILD_LIST               0
-                          1060 LOAD_CONST              24 (('1', '3', '5'))
-                          1062 LIST_EXTEND              1
-                          1064 BUILD_LIST               0
-                          1066 LOAD_CONST              25 (('2', '4', '6'))
-                          1068 LIST_EXTEND              1
-                          1070 PRECALL                  2
-                          1074 CALL                     2
-                          1084 PRECALL                  1
-                          1088 CALL                     1
-                          1098 LOAD_CONST              26 ('1')
-                          1100 PRECALL                  1
-                          1104 CALL                     1
-                          1114 STORE_FAST               1 (rtn)
-               
-               199        1116 LOAD_FAST                0 (self)
-                          1118 LOAD_METHOD              1 (assertEqual)
-                          1140 LOAD_FAST                1 (rtn)
-                          1142 LOAD_CONST              27 (('1', None))
-                          1144 PRECALL                  2
-                          1148 CALL                     2
-                          1158 POP_TOP
-               
-               200        1160 PUSH_NULL
-                          1162 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1174 LOAD_CONST              28 (('id1', 'first label'))
-                          1176 LOAD_CONST              29 (('id2', 'second label'))
-                          1178 BUILD_LIST               2
-                          1180 PRECALL                  1
-                          1184 CALL                     1
-               
-               201        1194 LOAD_CONST              15 ('id1')
-               
-               200        1196 PRECALL                  1
-                          1200 CALL                     1
-                          1210 STORE_FAST               1 (rtn)
-               
-               203        1212 LOAD_FAST                0 (self)
-                          1214 LOAD_METHOD              1 (assertEqual)
-                          1236 LOAD_FAST                1 (rtn)
-                          1238 LOAD_CONST              16 (('id1', None))
-                          1240 PRECALL                  2
-                          1244 CALL                     2
-                          1254 POP_TOP
+               187         548 LOAD_FAST                0 (self)
+                           550 LOAD_METHOD              1 (assertEqual)
+                           572 LOAD_FAST                1 (rtn)
+                           574 LOAD_CONST              16 (('id1', None))
+                           576 PRECALL                  2
+                           580 CALL                     2
+                           590 POP_TOP
                
-               204        1256 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1268 LOAD_CONST              28 (('id1', 'first label'))
-                          1270 LOAD_CONST              29 (('id2', 'second label'))
-                          1272 BUILD_LIST               2
-                          1274 PRECALL                  1
-                          1278 CALL                     1
-                          1288 LOAD_METHOD              4 (options)
-               
-               205        1310 LOAD_CONST              30 (False)
-               
-               204        1312 KW_NAMES                31
-                          1314 PRECALL                  1
-                          1318 CALL                     1
-                          1328 STORE_FAST               1 (rtn)
-               
-               207        1330 LOAD_FAST                0 (self)
-                          1332 LOAD_METHOD              1 (assertEqual)
-                          1354 LOAD_FAST                1 (rtn)
-                          1356 LOAD_CONST              28 (('id1', 'first label'))
-                          1358 LOAD_CONST              29 (('id2', 'second label'))
-                          1360 BUILD_LIST               2
-                          1362 PRECALL                  2
-                          1366 CALL                     2
-                          1376 POP_TOP
+               188         592 PUSH_NULL
+                           594 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           606 LOAD_CONST              15 ('id1')
+                           608 LOAD_CONST              17 ('id2')
+                           610 BUILD_LIST               2
+                           612 LOAD_CONST              18 ('oops')
+                           614 LOAD_CONST               6 (True)
+                           616 KW_NAMES                19
+                           618 PRECALL                  3
+                           622 CALL                     3
+                           632 LOAD_CONST               0 (None)
+                           634 PRECALL                  1
+                           638 CALL                     1
+                           648 STORE_FAST               1 (rtn)
+               
+               189         650 LOAD_FAST                0 (self)
+                           652 LOAD_METHOD              1 (assertEqual)
+                           674 LOAD_FAST                1 (rtn)
+                           676 BUILD_LIST               0
+                           678 LOAD_CONST               0 (None)
+                           680 BUILD_TUPLE              2
+                           682 PRECALL                  2
+                           686 CALL                     2
+                           696 POP_TOP
                
-               208        1378 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1390 LOAD_CONST              15 ('id1')
-                          1392 LOAD_CONST              17 ('id2')
-                          1394 BUILD_LIST               2
-                          1396 PRECALL                  1
-                          1400 CALL                     1
-                          1410 LOAD_METHOD              4 (options)
-                          1432 LOAD_CONST              30 (False)
-                          1434 KW_NAMES                31
-                          1436 PRECALL                  1
-                          1440 CALL                     1
-                          1450 STORE_FAST               1 (rtn)
-               
-               209        1452 LOAD_FAST                0 (self)
-                          1454 LOAD_METHOD              1 (assertEqual)
-                          1476 LOAD_FAST                1 (rtn)
-                          1478 LOAD_CONST              32 (('id1', 'id1'))
-                          1480 LOAD_CONST              33 (('id2', 'id2'))
-                          1482 BUILD_LIST               2
-                          1484 PRECALL                  2
-                          1488 CALL                     2
-                          1498 POP_TOP
-               
-               210        1500 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
-                          1512 LOAD_CONST              17 ('id2')
-                          1514 LOAD_CONST              15 ('id1')
-                          1516 BUILD_LIST               2
-                          1518 LOAD_CONST               6 (True)
-                          1520 KW_NAMES                34
-                          1522 PRECALL                  2
-                          1526 CALL                     2
-                          1536 LOAD_METHOD              4 (options)
-                          1558 LOAD_CONST              30 (False)
-                          1560 KW_NAMES                31
-                          1562 PRECALL                  1
-                          1566 CALL                     1
-                          1576 STORE_FAST               1 (rtn)
+               190         698 PUSH_NULL
+                           700 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           712 LOAD_CONST              15 ('id1')
+                           714 LOAD_CONST              17 ('id2')
+                           716 BUILD_LIST               2
+                           718 LOAD_CONST              18 ('oops')
+                           720 LOAD_CONST               6 (True)
+                           722 KW_NAMES                19
+                           724 PRECALL                  3
+                           728 CALL                     3
+                           738 LOAD_CONST              20 ('')
+                           740 PRECALL                  1
+                           744 CALL                     1
+                           754 STORE_FAST               1 (rtn)
+               
+               191         756 LOAD_FAST                0 (self)
+                           758 LOAD_METHOD              1 (assertEqual)
+                           780 LOAD_FAST                1 (rtn)
+                           782 BUILD_LIST               0
+                           784 LOAD_CONST               0 (None)
+                           786 BUILD_TUPLE              2
+                           788 PRECALL                  2
+                           792 CALL                     2
+                           802 POP_TOP
                
-               211        1578 LOAD_FAST                0 (self)
-                          1580 LOAD_METHOD              1 (assertEqual)
-                          1602 LOAD_FAST                1 (rtn)
-                          1604 LOAD_CONST              32 (('id1', 'id1'))
-                          1606 LOAD_CONST              33 (('id2', 'id2'))
-                          1608 BUILD_LIST               2
-                          1610 PRECALL                  2
-                          1614 CALL                     2
-                          1624 POP_TOP
-                          1626 LOAD_CONST               0 (None)
-                          1628 RETURN_VALUE
+               192         804 PUSH_NULL
+                           806 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           818 LOAD_CONST              15 ('id1')
+                           820 LOAD_CONST              17 ('id2')
+                           822 BUILD_LIST               2
+                           824 LOAD_CONST              18 ('oops')
+                           826 LOAD_CONST               6 (True)
+                           828 KW_NAMES                19
+                           830 PRECALL                  3
+                           834 CALL                     3
+                           844 LOAD_CONST              15 ('id1')
+                           846 PRECALL                  1
+                           850 CALL                     1
+                           860 STORE_FAST               1 (rtn)
+               
+               193         862 LOAD_FAST                0 (self)
+                           864 LOAD_METHOD              1 (assertEqual)
+                           886 LOAD_FAST                1 (rtn)
+                           888 LOAD_CONST              15 ('id1')
+                           890 BUILD_LIST               1
+                           892 LOAD_CONST               0 (None)
+                           894 BUILD_TUPLE              2
+                           896 PRECALL                  2
+                           900 CALL                     2
+                           910 POP_TOP
+               
+               194         912 PUSH_NULL
+                           914 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                           926 LOAD_CONST              15 ('id1')
+                           928 LOAD_CONST              17 ('id2')
+                           930 BUILD_LIST               2
+                           932 LOAD_CONST              18 ('oops')
+                           934 LOAD_CONST              21 ((1, 2))
+                           936 KW_NAMES                19
+                           938 PRECALL                  3
+                           942 CALL                     3
+                           952 LOAD_CONST               0 (None)
+                           954 PRECALL                  1
+                           958 CALL                     1
+                           968 STORE_FAST               1 (rtn)
+               
+               195         970 LOAD_FAST                0 (self)
+                           972 LOAD_METHOD              1 (assertEqual)
+                           994 LOAD_FAST                1 (rtn)
+                           996 LOAD_CONST              22 ((None, 'oops'))
+                           998 PRECALL                  2
+                          1002 CALL                     2
+                          1012 POP_TOP
+               
+               196        1014 LOAD_CONST              23 (0)
+                          1016 LOAD_CONST               0 (None)
+                          1018 IMPORT_NAME              2 (itertools)
+                          1020 STORE_FAST               2 (itertools)
+               
+               198        1022 PUSH_NULL
+                          1024 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1036 LOAD_FAST                2 (itertools)
+                          1038 LOAD_METHOD              3 (chain)
+                          1060 BUILD_LIST               0
+                          1062 LOAD_CONST              24 (('1', '3', '5'))
+                          1064 LIST_EXTEND              1
+                          1066 BUILD_LIST               0
+                          1068 LOAD_CONST              25 (('2', '4', '6'))
+                          1070 LIST_EXTEND              1
+                          1072 PRECALL                  2
+                          1076 CALL                     2
+                          1086 PRECALL                  1
+                          1090 CALL                     1
+                          1100 LOAD_CONST              26 ('1')
+                          1102 PRECALL                  1
+                          1106 CALL                     1
+                          1116 STORE_FAST               1 (rtn)
+               
+               199        1118 LOAD_FAST                0 (self)
+                          1120 LOAD_METHOD              1 (assertEqual)
+                          1142 LOAD_FAST                1 (rtn)
+                          1144 LOAD_CONST              27 (('1', None))
+                          1146 PRECALL                  2
+                          1150 CALL                     2
+                          1160 POP_TOP
+               
+               200        1162 PUSH_NULL
+                          1164 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1176 LOAD_CONST              28 (('id1', 'first label'))
+                          1178 LOAD_CONST              29 (('id2', 'second label'))
+                          1180 BUILD_LIST               2
+                          1182 PRECALL                  1
+                          1186 CALL                     1
+               
+               201        1196 LOAD_CONST              15 ('id1')
+               
+               200        1198 PRECALL                  1
+                          1202 CALL                     1
+                          1212 STORE_FAST               1 (rtn)
+               
+               203        1214 LOAD_FAST                0 (self)
+                          1216 LOAD_METHOD              1 (assertEqual)
+                          1238 LOAD_FAST                1 (rtn)
+                          1240 LOAD_CONST              16 (('id1', None))
+                          1242 PRECALL                  2
+                          1246 CALL                     2
+                          1256 POP_TOP
+               
+               204        1258 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1270 LOAD_CONST              28 (('id1', 'first label'))
+                          1272 LOAD_CONST              29 (('id2', 'second label'))
+                          1274 BUILD_LIST               2
+                          1276 PRECALL                  1
+                          1280 CALL                     1
+                          1290 LOAD_METHOD              4 (options)
+               
+               205        1312 LOAD_CONST              30 (False)
+               
+               204        1314 KW_NAMES                31
+                          1316 PRECALL                  1
+                          1320 CALL                     1
+                          1330 STORE_FAST               1 (rtn)
+               
+               207        1332 LOAD_FAST                0 (self)
+                          1334 LOAD_METHOD              1 (assertEqual)
+                          1356 LOAD_FAST                1 (rtn)
+                          1358 LOAD_CONST              28 (('id1', 'first label'))
+                          1360 LOAD_CONST              29 (('id2', 'second label'))
+                          1362 BUILD_LIST               2
+                          1364 PRECALL                  2
+                          1368 CALL                     2
+                          1378 POP_TOP
+               
+               208        1380 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1392 LOAD_CONST              15 ('id1')
+                          1394 LOAD_CONST              17 ('id2')
+                          1396 BUILD_LIST               2
+                          1398 PRECALL                  1
+                          1402 CALL                     1
+                          1412 LOAD_METHOD              4 (options)
+                          1434 LOAD_CONST              30 (False)
+                          1436 KW_NAMES                31
+                          1438 PRECALL                  1
+                          1442 CALL                     1
+                          1452 STORE_FAST               1 (rtn)
+               
+               209        1454 LOAD_FAST                0 (self)
+                          1456 LOAD_METHOD              1 (assertEqual)
+                          1478 LOAD_FAST                1 (rtn)
+                          1480 LOAD_CONST              32 (('id1', 'id1'))
+                          1482 LOAD_CONST              33 (('id2', 'id2'))
+                          1484 BUILD_LIST               2
+                          1486 PRECALL                  2
+                          1490 CALL                     2
+                          1500 POP_TOP
+               
+               210        1502 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1514 LOAD_CONST              17 ('id2')
+                          1516 LOAD_CONST              15 ('id1')
+                          1518 BUILD_LIST               2
+                          1520 LOAD_CONST               6 (True)
+                          1522 KW_NAMES                34
+                          1524 PRECALL                  2
+                          1528 CALL                     2
+                          1538 LOAD_METHOD              4 (options)
+                          1560 LOAD_CONST              30 (False)
+                          1562 KW_NAMES                31
+                          1564 PRECALL                  1
+                          1568 CALL                     1
+                          1578 STORE_FAST               1 (rtn)
+               
+               211        1580 LOAD_FAST                0 (self)
+                          1582 LOAD_METHOD              1 (assertEqual)
+                          1604 LOAD_FAST                1 (rtn)
+                          1606 LOAD_CONST              32 (('id1', 'id1'))
+                          1608 LOAD_CONST              33 (('id2', 'id2'))
+                          1610 BUILD_LIST               2
+                          1612 PRECALL                  2
+                          1616 CALL                     2
+                          1626 POP_TOP
+               
+               214        1628 BUILD_LIST               0
+                          1630 STORE_DEREF              4 (theset)
+               
+               215        1632 LOAD_GLOBAL              1 (NULL + IS_IN_SET)
+                          1644 LOAD_CLOSURE             4 (theset)
+                          1646 BUILD_TUPLE              1
+                          1648 LOAD_CONST              35 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 215>)
+                          1650 MAKE_FUNCTION            8 (closure)
+                          1652 PRECALL                  1
+                          1656 CALL                     1
+                          1666 STORE_FAST               3 (validator)
+               
+               216        1668 PUSH_NULL
+                          1670 LOAD_FAST                3 (validator)
+                          1672 LOAD_CONST               1 ('max')
+                          1674 PRECALL                  1
+                          1678 CALL                     1
+                          1688 STORE_FAST               1 (rtn)
+               
+               217        1690 LOAD_FAST                0 (self)
+                          1692 LOAD_METHOD              1 (assertEqual)
+                          1714 LOAD_FAST                1 (rtn)
+                          1716 LOAD_CONST              36 (('max', 'Value not allowed'))
+                          1718 PRECALL                  2
+                          1722 CALL                     2
+                          1732 POP_TOP
+               
+               218        1734 LOAD_DEREF               4 (theset)
+                          1736 LOAD_METHOD              5 (append)
+                          1758 LOAD_CONST               1 ('max')
+                          1760 PRECALL                  1
+                          1764 CALL                     1
+                          1774 POP_TOP
+               
+               219        1776 PUSH_NULL
+                          1778 LOAD_FAST                3 (validator)
+                          1780 LOAD_CONST               1 ('max')
+                          1782 PRECALL                  1
+                          1786 CALL                     1
+                          1796 STORE_FAST               1 (rtn)
+               
+               220        1798 LOAD_FAST                0 (self)
+                          1800 LOAD_METHOD              1 (assertEqual)
+                          1822 LOAD_FAST                1 (rtn)
+                          1824 LOAD_CONST               3 (('max', None))
+                          1826 PRECALL                  2
+                          1830 CALL                     2
+                          1840 POP_TOP
+                          1842 LOAD_CONST               0 (None)
+                          1844 RETURN_VALUE
                consts
                   None
                   'max'
                   'john'
                   ('max', None)
                   'massimo'
                   ('massimo', 'Value not allowed')
@@ -2423,25 +2486,47 @@
                   ('id1', 'first label')
                   ('id2', 'second label')
                   False
                   ('zero',)
                   ('id1', 'id1')
                   ('id2', 'id2')
                   ('sort',)
-               names      ('IS_IN_SET', 'assertEqual', 'itertools', 'chain', 'options')
-               varnames   ('self', 'rtn', 'itertools')
+                  code
+                     argcount  : 0
+                     nlocals   : 0
+                     stacksize : 1
+                     flags     : 19
+                     code 0x9501970089005300
+                                   0 COPY_FREE_VARS           1
+                     
+                     215           2 RESUME                   0
+                                   4 LOAD_DEREF               0 (theset)
+                                   6 RETURN_VALUE
+                     consts
+                        None
+                     names      ()
+                     varnames   ()
+                     freevars   ('theset',)
+                     cellvars   ()
+                     filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+                     name       '<lambda>'
+                     firstlineno 215
+                     lnotab 0x
+                  ('max', 'Value not allowed')
+               names      ('IS_IN_SET', 'assertEqual', 'itertools', 'chain', 'options', 'append')
+               varnames   ('self', 'rtn', 'itertools', 'validator')
                freevars   ()
-               cellvars   ()
+               cellvars   ('theset',)
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_SET'
                firstlineno 173
                lnotab
-                  0x020134012c0134012c0138012c0138012c01240102ff10032c0136012c
+                  0x040134012c0134012c0138012c0138012c01240102ff10032c0136012c
                   013a0130013a0130013a0132013a012c01080260012c01220102ff10032c
-                  01360102ff120330014a0130014e01
+                  01360102ff120330014a0130014e0130030401240116012c012a011601
             code
                argcount  : 1
                nlocals   : 7
                stacksize : 14
                flags     : 3
                code
                   0x97007401000000000000000000006401a6010000ab0100000000000000
@@ -2640,117 +2725,117 @@
                   170000000000000000000000000000000000000000a6000000ab00000000
                   000000000001007c016a120000000000000000a017000000000000000000
                   0000000000000000000000a6000000ab00000000000000000001007c016a
                   150000000000000000a01700000000000000000000000000000000000000
                   00a6000000ab00000000000000000001007c016a160000000000000000a0
                   170000000000000000000000000000000000000000a6000000ab00000000
                   0000000000010064005300
-               213           0 RESUME                   0
+               222           0 RESUME                   0
                
-               214           2 LOAD_GLOBAL              1 (NULL + DAL)
+               223           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               215          32 LOAD_FAST                1 (db)
+               224          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('person')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 PRECALL                  2
                             90 CALL                     2
                            100 POP_TOP
                
-               216         102 LOAD_FAST                1 (db)
+               225         102 LOAD_FAST                1 (db)
                            104 LOAD_ATTR                3 (person)
                            114 LOAD_METHOD              4 (insert)
                            136 LOAD_CONST               4 ('george')
                            138 KW_NAMES                 5
                            140 PRECALL                  1
                            144 CALL                     1
                            154 STORE_FAST               2 (george_id)
                
-               217         156 LOAD_FAST                1 (db)
+               226         156 LOAD_FAST                1 (db)
                            158 LOAD_ATTR                3 (person)
                            168 LOAD_METHOD              4 (insert)
                            190 LOAD_CONST               6 ('costanza')
                            192 KW_NAMES                 5
                            194 PRECALL                  1
                            198 CALL                     1
                            208 STORE_FAST               3 (costanza_id)
                
-               218         210 PUSH_NULL
+               227         210 PUSH_NULL
                            212 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            224 LOAD_FAST                1 (db)
                            226 LOAD_CONST               7 ('person.id')
                            228 LOAD_CONST               8 ('%(name)s')
                            230 PRECALL                  3
                            234 CALL                     3
                            244 LOAD_FAST                2 (george_id)
                            246 PRECALL                  1
                            250 CALL                     1
                            260 STORE_FAST               4 (rtn)
                
-               219         262 LOAD_FAST                0 (self)
+               228         262 LOAD_FAST                0 (self)
                            264 LOAD_METHOD              6 (assertEqual)
                            286 LOAD_FAST                4 (rtn)
                            288 LOAD_FAST                2 (george_id)
                            290 LOAD_CONST               0 (None)
                            292 BUILD_TUPLE              2
                            294 PRECALL                  2
                            298 CALL                     2
                            308 POP_TOP
                
-               220         310 PUSH_NULL
+               229         310 PUSH_NULL
                            312 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            324 LOAD_FAST                1 (db)
                            326 LOAD_CONST               9 ('person.name')
                            328 LOAD_CONST               8 ('%(name)s')
                            330 PRECALL                  3
                            334 CALL                     3
                            344 LOAD_CONST               4 ('george')
                            346 PRECALL                  1
                            350 CALL                     1
                            360 STORE_FAST               4 (rtn)
                
-               221         362 LOAD_FAST                0 (self)
+               230         362 LOAD_FAST                0 (self)
                            364 LOAD_METHOD              6 (assertEqual)
                            386 LOAD_FAST                4 (rtn)
                            388 LOAD_CONST              10 (('george', None))
                            390 PRECALL                  2
                            394 CALL                     2
                            404 POP_TOP
                
-               222         406 PUSH_NULL
+               231         406 PUSH_NULL
                            408 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            420 LOAD_FAST                1 (db)
                            422 LOAD_FAST                1 (db)
                            424 LOAD_ATTR                3 (person)
                            434 LOAD_CONST               8 ('%(name)s')
                            436 PRECALL                  3
                            440 CALL                     3
                            450 LOAD_FAST                2 (george_id)
                            452 PRECALL                  1
                            456 CALL                     1
                            466 STORE_FAST               4 (rtn)
                
-               223         468 LOAD_FAST                0 (self)
+               232         468 LOAD_FAST                0 (self)
                            470 LOAD_METHOD              6 (assertEqual)
                            492 LOAD_FAST                4 (rtn)
                            494 LOAD_FAST                2 (george_id)
                            496 LOAD_CONST               0 (None)
                            498 BUILD_TUPLE              2
                            500 PRECALL                  2
                            504 CALL                     2
                            514 POP_TOP
                
-               224         516 PUSH_NULL
+               233         516 PUSH_NULL
                            518 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            530 PUSH_NULL
                            532 LOAD_FAST                1 (db)
                            534 LOAD_FAST                1 (db)
                            536 LOAD_ATTR                3 (person)
                            546 LOAD_ATTR                7 (id)
                            556 LOAD_CONST              11 (0)
@@ -2763,189 +2848,189 @@
                            592 PRECALL                  3
                            596 CALL                     3
                            606 LOAD_FAST                2 (george_id)
                            608 PRECALL                  1
                            612 CALL                     1
                            622 STORE_FAST               4 (rtn)
                
-               225         624 LOAD_FAST                0 (self)
+               234         624 LOAD_FAST                0 (self)
                            626 LOAD_METHOD              6 (assertEqual)
                            648 LOAD_FAST                4 (rtn)
                            650 LOAD_FAST                2 (george_id)
                            652 LOAD_CONST               0 (None)
                            654 BUILD_TUPLE              2
                            656 PRECALL                  2
                            660 CALL                     2
                            670 POP_TOP
                
-               226         672 PUSH_NULL
+               235         672 PUSH_NULL
                            674 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            686 LOAD_FAST                1 (db)
                            688 LOAD_CONST               7 ('person.id')
                            690 LOAD_CONST               8 ('%(name)s')
                            692 LOAD_CONST              12 ('oops')
                            694 KW_NAMES                13
                            696 PRECALL                  4
                            700 CALL                     4
                
-               227         710 LOAD_FAST                2 (george_id)
+               236         710 LOAD_FAST                2 (george_id)
                            712 LOAD_FAST                3 (costanza_id)
                            714 BINARY_OP                0 (+)
                
-               226         718 PRECALL                  1
+               235         718 PRECALL                  1
                            722 CALL                     1
                            732 STORE_FAST               4 (rtn)
                
-               229         734 LOAD_FAST                0 (self)
+               238         734 LOAD_FAST                0 (self)
                            736 LOAD_METHOD              6 (assertEqual)
                            758 LOAD_FAST                4 (rtn)
                            760 LOAD_FAST                2 (george_id)
                            762 LOAD_FAST                3 (costanza_id)
                            764 BINARY_OP                0 (+)
                            768 LOAD_CONST              12 ('oops')
                            770 BUILD_TUPLE              2
                            772 PRECALL                  2
                            776 CALL                     2
                            786 POP_TOP
                
-               230         788 PUSH_NULL
+               239         788 PUSH_NULL
                            790 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            802 LOAD_FAST                1 (db)
                            804 LOAD_FAST                1 (db)
                            806 LOAD_ATTR                3 (person)
                            816 LOAD_ATTR                7 (id)
                            826 LOAD_CONST               8 ('%(name)s')
                            828 PRECALL                  3
                            832 CALL                     3
                            842 LOAD_FAST                2 (george_id)
                            844 PRECALL                  1
                            848 CALL                     1
                            858 STORE_FAST               4 (rtn)
                
-               231         860 LOAD_FAST                0 (self)
+               240         860 LOAD_FAST                0 (self)
                            862 LOAD_METHOD              6 (assertEqual)
                            884 LOAD_FAST                4 (rtn)
                            886 LOAD_FAST                2 (george_id)
                            888 LOAD_CONST               0 (None)
                            890 BUILD_TUPLE              2
                            892 PRECALL                  2
                            896 CALL                     2
                            906 POP_TOP
                
-               232         908 PUSH_NULL
+               241         908 PUSH_NULL
                            910 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            922 LOAD_FAST                1 (db)
                            924 LOAD_FAST                1 (db)
                            926 LOAD_ATTR                3 (person)
                            936 LOAD_ATTR                7 (id)
                            946 LOAD_CONST               8 ('%(name)s')
                            948 LOAD_CONST              12 ('oops')
                            950 KW_NAMES                13
                            952 PRECALL                  4
                            956 CALL                     4
                
-               233         966 LOAD_FAST                2 (george_id)
+               242         966 LOAD_FAST                2 (george_id)
                            968 LOAD_FAST                3 (costanza_id)
                            970 BINARY_OP                0 (+)
                
-               232         974 PRECALL                  1
+               241         974 PRECALL                  1
                            978 CALL                     1
                            988 STORE_FAST               4 (rtn)
                
-               235         990 LOAD_FAST                0 (self)
+               244         990 LOAD_FAST                0 (self)
                            992 LOAD_METHOD              6 (assertEqual)
                           1014 LOAD_FAST                4 (rtn)
                           1016 LOAD_FAST                2 (george_id)
                           1018 LOAD_FAST                3 (costanza_id)
                           1020 BINARY_OP                0 (+)
                           1024 LOAD_CONST              12 ('oops')
                           1026 BUILD_TUPLE              2
                           1028 PRECALL                  2
                           1032 CALL                     2
                           1042 POP_TOP
                
-               236        1044 PUSH_NULL
+               245        1044 PUSH_NULL
                           1046 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1058 LOAD_FAST                1 (db)
                           1060 LOAD_CONST               7 ('person.id')
                           1062 LOAD_CONST               8 ('%(name)s')
                           1064 LOAD_CONST              14 (True)
                           1066 KW_NAMES                15
                           1068 PRECALL                  4
                           1072 CALL                     4
                
-               237        1082 LOAD_FAST                2 (george_id)
+               246        1082 LOAD_FAST                2 (george_id)
                           1084 LOAD_FAST                3 (costanza_id)
                           1086 BUILD_LIST               2
                
-               236        1088 PRECALL                  1
+               245        1088 PRECALL                  1
                           1092 CALL                     1
                           1102 STORE_FAST               4 (rtn)
                
-               239        1104 LOAD_FAST                0 (self)
+               248        1104 LOAD_FAST                0 (self)
                           1106 LOAD_METHOD              6 (assertEqual)
                           1128 LOAD_FAST                4 (rtn)
                           1130 LOAD_FAST                2 (george_id)
                           1132 LOAD_FAST                3 (costanza_id)
                           1134 BUILD_LIST               2
                           1136 LOAD_CONST               0 (None)
                           1138 BUILD_TUPLE              2
                           1140 PRECALL                  2
                           1144 CALL                     2
                           1154 POP_TOP
                
-               240        1156 PUSH_NULL
+               249        1156 PUSH_NULL
                           1158 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               241        1170 LOAD_FAST                1 (db)
+               250        1170 LOAD_FAST                1 (db)
                           1172 LOAD_CONST               7 ('person.id')
                           1174 LOAD_CONST               8 ('%(name)s')
                           1176 LOAD_CONST              14 (True)
                           1178 LOAD_CONST              12 ('oops')
                
-               240        1180 KW_NAMES                16
+               249        1180 KW_NAMES                16
                           1182 PRECALL                  5
                           1186 CALL                     5
                
-               242        1196 LOAD_CONST              17 ("I'm not even an id")
+               251        1196 LOAD_CONST              17 ("I'm not even an id")
                
-               240        1198 PRECALL                  1
+               249        1198 PRECALL                  1
                           1202 CALL                     1
                           1212 STORE_FAST               4 (rtn)
                
-               243        1214 LOAD_FAST                0 (self)
+               252        1214 LOAD_FAST                0 (self)
                           1216 LOAD_METHOD              6 (assertEqual)
                           1238 LOAD_FAST                4 (rtn)
                           1240 LOAD_CONST              18 (("I'm not even an id", 'oops'))
                           1242 PRECALL                  2
                           1246 CALL                     2
                           1256 POP_TOP
                
-               244        1258 PUSH_NULL
+               253        1258 PUSH_NULL
                           1260 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1272 LOAD_FAST                1 (db)
                           1274 LOAD_CONST               7 ('person.id')
                           1276 LOAD_CONST               8 ('%(name)s')
                           1278 LOAD_CONST              14 (True)
                           1280 LOAD_CONST              19 (',')
                           1282 KW_NAMES                20
                           1284 PRECALL                  5
                           1288 CALL                     5
                
-               245        1298 LOAD_CONST              21 ('%d,%d')
+               254        1298 LOAD_CONST              21 ('%d,%d')
                           1300 LOAD_FAST                2 (george_id)
                           1302 LOAD_FAST                3 (costanza_id)
                           1304 BUILD_TUPLE              2
                           1306 BINARY_OP                6 (%)
                
-               244        1310 PRECALL                  1
+               253        1310 PRECALL                  1
                           1314 CALL                     1
                           1324 STORE_FAST               4 (rtn)
                
-               247        1326 LOAD_FAST                0 (self)
+               256        1326 LOAD_FAST                0 (self)
                           1328 LOAD_METHOD              6 (assertEqual)
                           1350 LOAD_FAST                4 (rtn)
                           1352 LOAD_CONST              21 ('%d,%d')
                           1354 LOAD_FAST                2 (george_id)
                           1356 LOAD_FAST                3 (costanza_id)
                           1358 BUILD_TUPLE              2
                           1360 BINARY_OP                6 (%)
@@ -2955,36 +3040,36 @@
                           1392 CALL                     1
                           1402 LOAD_CONST               0 (None)
                           1404 BUILD_TUPLE              2
                           1406 PRECALL                  2
                           1410 CALL                     2
                           1420 POP_TOP
                
-               248        1422 PUSH_NULL
+               257        1422 PUSH_NULL
                           1424 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1436 LOAD_FAST                1 (db)
                           1438 LOAD_CONST               7 ('person.id')
                           1440 LOAD_CONST               8 ('%(name)s')
                           1442 LOAD_CONST              22 ((1, 3))
                           1444 LOAD_CONST              19 (',')
                           1446 KW_NAMES                20
                           1448 PRECALL                  5
                           1452 CALL                     5
                
-               249        1462 LOAD_CONST              21 ('%d,%d')
+               258        1462 LOAD_CONST              21 ('%d,%d')
                           1464 LOAD_FAST                2 (george_id)
                           1466 LOAD_FAST                3 (costanza_id)
                           1468 BUILD_TUPLE              2
                           1470 BINARY_OP                6 (%)
                
-               248        1474 PRECALL                  1
+               257        1474 PRECALL                  1
                           1478 CALL                     1
                           1488 STORE_FAST               4 (rtn)
                
-               251        1490 LOAD_FAST                0 (self)
+               260        1490 LOAD_FAST                0 (self)
                           1492 LOAD_METHOD              6 (assertEqual)
                           1514 LOAD_FAST                4 (rtn)
                           1516 LOAD_CONST              21 ('%d,%d')
                           1518 LOAD_FAST                2 (george_id)
                           1520 LOAD_FAST                3 (costanza_id)
                           1522 BUILD_TUPLE              2
                           1524 BINARY_OP                6 (%)
@@ -2994,358 +3079,358 @@
                           1556 CALL                     1
                           1566 LOAD_CONST               0 (None)
                           1568 BUILD_TUPLE              2
                           1570 PRECALL                  2
                           1574 CALL                     2
                           1584 POP_TOP
                
-               252        1586 PUSH_NULL
+               261        1586 PUSH_NULL
                           1588 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               253        1600 LOAD_FAST                1 (db)
+               262        1600 LOAD_FAST                1 (db)
                
-               254        1602 LOAD_CONST               7 ('person.id')
+               263        1602 LOAD_CONST               7 ('person.id')
                
-               255        1604 LOAD_CONST               8 ('%(name)s')
+               264        1604 LOAD_CONST               8 ('%(name)s')
                
-               256        1606 LOAD_CONST              23 ((1, 2))
+               265        1606 LOAD_CONST              23 ((1, 2))
                
-               257        1608 LOAD_CONST              19 (',')
+               266        1608 LOAD_CONST              19 (',')
                
-               258        1610 LOAD_CONST              12 ('oops')
+               267        1610 LOAD_CONST              12 ('oops')
                
-               252        1612 KW_NAMES                24
+               261        1612 KW_NAMES                24
                           1614 PRECALL                  6
                           1618 CALL                     6
                
-               259        1628 LOAD_CONST              21 ('%d,%d')
+               268        1628 LOAD_CONST              21 ('%d,%d')
                           1630 LOAD_FAST                2 (george_id)
                           1632 LOAD_FAST                3 (costanza_id)
                           1634 BUILD_TUPLE              2
                           1636 BINARY_OP                6 (%)
                
-               252        1640 PRECALL                  1
+               261        1640 PRECALL                  1
                           1644 CALL                     1
                           1654 STORE_FAST               4 (rtn)
                
-               260        1656 LOAD_FAST                0 (self)
+               269        1656 LOAD_FAST                0 (self)
                           1658 LOAD_METHOD              6 (assertEqual)
                           1680 LOAD_FAST                4 (rtn)
                           1682 LOAD_CONST              21 ('%d,%d')
                           1684 LOAD_FAST                2 (george_id)
                           1686 LOAD_FAST                3 (costanza_id)
                           1688 BUILD_TUPLE              2
                           1690 BINARY_OP                6 (%)
                           1694 LOAD_CONST              12 ('oops')
                           1696 BUILD_TUPLE              2
                           1698 PRECALL                  2
                           1702 CALL                     2
                           1712 POP_TOP
                
-               261        1714 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               270        1714 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           1726 LOAD_FAST                1 (db)
                           1728 LOAD_FAST                1 (db)
                           1730 LOAD_ATTR                3 (person)
                           1740 LOAD_ATTR                7 (id)
                           1750 LOAD_CONST               8 ('%(name)s')
                           1752 LOAD_CONST              12 ('oops')
                           1754 KW_NAMES                13
                           1756 PRECALL                  4
                           1760 CALL                     4
                           1770 LOAD_METHOD              9 (options)
                
-               262        1792 LOAD_CONST              25 (False)
+               271        1792 LOAD_CONST              25 (False)
                
-               261        1794 KW_NAMES                26
+               270        1794 KW_NAMES                26
                           1796 PRECALL                  1
                           1800 CALL                     1
                           1810 STORE_FAST               4 (rtn)
                
-               264        1812 LOAD_FAST                0 (self)
+               273        1812 LOAD_FAST                0 (self)
                           1814 LOAD_METHOD              6 (assertEqual)
                
-               265        1836 LOAD_GLOBAL             21 (NULL + sorted)
+               274        1836 LOAD_GLOBAL             21 (NULL + sorted)
                           1848 LOAD_FAST                4 (rtn)
                           1850 PRECALL                  1
                           1854 CALL                     1
                
-               266        1864 LOAD_CONST              27 ('%d')
+               275        1864 LOAD_CONST              27 ('%d')
                           1866 LOAD_FAST                2 (george_id)
                           1868 BINARY_OP                6 (%)
                           1872 LOAD_CONST               4 ('george')
                           1874 BUILD_TUPLE              2
                           1876 LOAD_CONST              27 ('%d')
                           1878 LOAD_FAST                3 (costanza_id)
                           1880 BINARY_OP                6 (%)
                           1884 LOAD_CONST               6 ('costanza')
                           1886 BUILD_TUPLE              2
                           1888 BUILD_LIST               2
                
-               264        1890 PRECALL                  2
+               273        1890 PRECALL                  2
                           1894 CALL                     2
                           1904 POP_TOP
                
-               268        1906 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               277        1906 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               269        1918 LOAD_FAST                1 (db)
+               278        1918 LOAD_FAST                1 (db)
                           1920 LOAD_FAST                1 (db)
                           1922 LOAD_ATTR                3 (person)
                           1932 LOAD_ATTR                7 (id)
                           1942 LOAD_FAST                1 (db)
                           1944 LOAD_ATTR                3 (person)
                           1954 LOAD_ATTR               11 (name)
                           1964 LOAD_CONST              12 ('oops')
                           1966 LOAD_CONST              14 (True)
                
-               268        1968 KW_NAMES                28
+               277        1968 KW_NAMES                28
                           1970 PRECALL                  5
                           1974 CALL                     5
                
-               270        1984 LOAD_METHOD              9 (options)
+               279        1984 LOAD_METHOD              9 (options)
                           2006 LOAD_CONST              14 (True)
                           2008 KW_NAMES                26
                           2010 PRECALL                  1
                           2014 CALL                     1
                
-               268        2024 STORE_FAST               4 (rtn)
+               277        2024 STORE_FAST               4 (rtn)
                
-               271        2026 LOAD_FAST                0 (self)
+               280        2026 LOAD_FAST                0 (self)
                           2028 LOAD_METHOD              6 (assertEqual)
                
-               272        2050 LOAD_FAST                4 (rtn)
+               281        2050 LOAD_FAST                4 (rtn)
                
-               273        2052 LOAD_CONST              29 (('', ''))
+               282        2052 LOAD_CONST              29 (('', ''))
                           2054 LOAD_CONST              27 ('%d')
                           2056 LOAD_FAST                3 (costanza_id)
                           2058 BINARY_OP                6 (%)
                           2062 LOAD_CONST               6 ('costanza')
                           2064 BUILD_TUPLE              2
                           2066 LOAD_CONST              27 ('%d')
                           2068 LOAD_FAST                2 (george_id)
                           2070 BINARY_OP                6 (%)
                           2074 LOAD_CONST               4 ('george')
                           2076 BUILD_TUPLE              2
                           2078 BUILD_LIST               3
                
-               271        2080 PRECALL                  2
+               280        2080 PRECALL                  2
                           2084 CALL                     2
                           2094 POP_TOP
                
-               276        2096 PUSH_NULL
+               285        2096 PUSH_NULL
                           2098 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2110 LOAD_FAST                1 (db)
                           2112 LOAD_CONST               7 ('person.id')
                           2114 LOAD_CONST               8 ('%(name)s')
                           2116 LOAD_CONST              12 ('oops')
                           2118 KW_NAMES                13
                           2120 PRECALL                  4
                           2124 CALL                     4
                           2134 LOAD_CONST               0 (None)
                           2136 PRECALL                  1
                           2140 CALL                     1
                           2150 STORE_FAST               4 (rtn)
                
-               277        2152 LOAD_FAST                0 (self)
+               286        2152 LOAD_FAST                0 (self)
                           2154 LOAD_METHOD              6 (assertEqual)
                           2176 LOAD_FAST                4 (rtn)
                           2178 LOAD_CONST              30 ((None, 'oops'))
                           2180 PRECALL                  2
                           2184 CALL                     2
                           2194 POP_TOP
                
-               278        2196 PUSH_NULL
+               287        2196 PUSH_NULL
                           2198 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2210 LOAD_FAST                1 (db)
                           2212 LOAD_CONST               9 ('person.name')
                           2214 LOAD_CONST               8 ('%(name)s')
                           2216 LOAD_CONST              12 ('oops')
                           2218 KW_NAMES                13
                           2220 PRECALL                  4
                           2224 CALL                     4
                           2234 LOAD_CONST               0 (None)
                           2236 PRECALL                  1
                           2240 CALL                     1
                           2250 STORE_FAST               4 (rtn)
                
-               279        2252 LOAD_FAST                0 (self)
+               288        2252 LOAD_FAST                0 (self)
                           2254 LOAD_METHOD              6 (assertEqual)
                           2276 LOAD_FAST                4 (rtn)
                           2278 LOAD_CONST              30 ((None, 'oops'))
                           2280 PRECALL                  2
                           2284 CALL                     2
                           2294 POP_TOP
                
-               281        2296 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               290        2296 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2308 LOAD_FAST                1 (db)
                           2310 LOAD_CONST               9 ('person.name')
                           2312 LOAD_CONST               8 ('%(name)s')
                           2314 LOAD_CONST              12 ('oops')
                           2316 KW_NAMES                13
                           2318 PRECALL                  4
                           2322 CALL                     4
                           2332 STORE_FAST               5 (vldtr)
                
-               282        2334 LOAD_FAST                5 (vldtr)
+               291        2334 LOAD_FAST                5 (vldtr)
                           2336 LOAD_METHOD              9 (options)
                           2358 PRECALL                  0
                           2362 CALL                     0
                           2372 POP_TOP
                
-               283        2374 PUSH_NULL
+               292        2374 PUSH_NULL
                           2376 LOAD_FAST                5 (vldtr)
                           2378 LOAD_CONST               4 ('george')
                           2380 PRECALL                  1
                           2384 CALL                     1
                           2394 STORE_FAST               4 (rtn)
                
-               284        2396 LOAD_FAST                0 (self)
+               293        2396 LOAD_FAST                0 (self)
                           2398 LOAD_METHOD              6 (assertEqual)
                           2420 LOAD_FAST                4 (rtn)
                           2422 LOAD_CONST              10 (('george', None))
                           2424 PRECALL                  2
                           2428 CALL                     2
                           2438 POP_TOP
                
-               285        2440 PUSH_NULL
+               294        2440 PUSH_NULL
                           2442 LOAD_FAST                5 (vldtr)
                           2444 LOAD_CONST              31 ('jerry')
                           2446 PRECALL                  1
                           2450 CALL                     1
                           2460 STORE_FAST               4 (rtn)
                
-               286        2462 LOAD_FAST                0 (self)
+               295        2462 LOAD_FAST                0 (self)
                           2464 LOAD_METHOD              6 (assertEqual)
                           2486 LOAD_FAST                4 (rtn)
                           2488 LOAD_CONST              32 (('jerry', 'oops'))
                           2490 PRECALL                  2
                           2494 CALL                     2
                           2504 POP_TOP
                
-               287        2506 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               296        2506 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               288        2518 LOAD_FAST                1 (db)
+               297        2518 LOAD_FAST                1 (db)
                           2520 LOAD_CONST               9 ('person.name')
                           2522 LOAD_CONST               8 ('%(name)s')
                           2524 LOAD_CONST              12 ('oops')
                           2526 LOAD_CONST              14 (True)
                
-               287        2528 KW_NAMES                33
+               296        2528 KW_NAMES                33
                           2530 PRECALL                  5
                           2534 CALL                     5
                           2544 STORE_FAST               5 (vldtr)
                
-               290        2546 LOAD_FAST                5 (vldtr)
+               299        2546 LOAD_FAST                5 (vldtr)
                           2548 LOAD_METHOD              9 (options)
                           2570 PRECALL                  0
                           2574 CALL                     0
                           2584 POP_TOP
                
-               291        2586 PUSH_NULL
+               300        2586 PUSH_NULL
                           2588 LOAD_FAST                5 (vldtr)
                           2590 LOAD_CONST               4 ('george')
                           2592 LOAD_CONST               6 ('costanza')
                           2594 BUILD_LIST               2
                           2596 PRECALL                  1
                           2600 CALL                     1
                           2610 STORE_FAST               4 (rtn)
                
-               292        2612 LOAD_FAST                0 (self)
+               301        2612 LOAD_FAST                0 (self)
                           2614 LOAD_METHOD              6 (assertEqual)
                           2636 LOAD_FAST                4 (rtn)
                           2638 LOAD_CONST               4 ('george')
                           2640 LOAD_CONST               6 ('costanza')
                           2642 BUILD_LIST               2
                           2644 LOAD_CONST               0 (None)
                           2646 BUILD_TUPLE              2
                           2648 PRECALL                  2
                           2652 CALL                     2
                           2662 POP_TOP
                
-               294        2664 LOAD_FAST                1 (db)
+               303        2664 LOAD_FAST                1 (db)
                           2666 LOAD_METHOD              1 (define_table)
                
-               295        2688 LOAD_CONST              34 ('category')
+               304        2688 LOAD_CONST              34 ('category')
                
-               296        2690 LOAD_GLOBAL              5 (NULL + Field)
+               305        2690 LOAD_GLOBAL              5 (NULL + Field)
                
-               297        2702 LOAD_CONST              35 ('parent_id')
+               306        2702 LOAD_CONST              35 ('parent_id')
                
-               298        2704 LOAD_CONST              36 ('reference category')
+               307        2704 LOAD_CONST              36 ('reference category')
                
-               299        2706 LOAD_GLOBAL             25 (NULL + IS_EMPTY_OR)
+               308        2706 LOAD_GLOBAL             25 (NULL + IS_EMPTY_OR)
                           2718 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           2730 LOAD_FAST                1 (db)
                           2732 LOAD_CONST              37 ('category.id')
                           2734 LOAD_CONST               8 ('%(name)s')
                           2736 PRECALL                  3
                           2740 CALL                     3
                           2750 PRECALL                  1
                           2754 CALL                     1
                
-               296        2764 KW_NAMES                38
+               305        2764 KW_NAMES                38
                           2766 PRECALL                  3
                           2770 CALL                     3
                
-               301        2780 LOAD_GLOBAL              5 (NULL + Field)
+               310        2780 LOAD_GLOBAL              5 (NULL + Field)
                           2792 LOAD_CONST               3 ('name')
                           2794 PRECALL                  1
                           2798 CALL                     1
                
-               294        2808 PRECALL                  3
+               303        2808 PRECALL                  3
                           2812 CALL                     3
                           2822 POP_TOP
                
-               303        2824 LOAD_FAST                1 (db)
+               312        2824 LOAD_FAST                1 (db)
                           2826 LOAD_ATTR               13 (category)
                           2836 LOAD_METHOD             14 (validate_and_insert)
                           2858 LOAD_CONST              39 ('seinfeld')
                           2860 KW_NAMES                 5
                           2862 PRECALL                  1
                           2866 CALL                     1
                           2876 STORE_FAST               6 (ret)
                
-               304        2878 LOAD_FAST                0 (self)
+               313        2878 LOAD_FAST                0 (self)
                           2880 LOAD_METHOD             15 (assertFalse)
                           2902 LOAD_FAST                6 (ret)
                           2904 LOAD_METHOD             16 (get)
                           2926 LOAD_CONST              40 ('errors')
                           2928 PRECALL                  1
                           2932 CALL                     1
                           2942 PRECALL                  1
                           2946 CALL                     1
                           2956 POP_TOP
                
-               305        2958 LOAD_FAST                1 (db)
+               314        2958 LOAD_FAST                1 (db)
                           2960 LOAD_ATTR               13 (category)
                           2970 LOAD_METHOD             14 (validate_and_insert)
                
-               306        2992 LOAD_CONST              41 ('characters')
+               315        2992 LOAD_CONST              41 ('characters')
                           2994 LOAD_FAST                6 (ret)
                           2996 LOAD_METHOD             16 (get)
                           3018 LOAD_CONST              42 ('id')
                           3020 PRECALL                  1
                           3024 CALL                     1
                
-               305        3034 KW_NAMES                43
+               314        3034 KW_NAMES                43
                           3036 PRECALL                  2
                           3040 CALL                     2
                           3050 STORE_FAST               6 (ret)
                
-               308        3052 LOAD_FAST                0 (self)
+               317        3052 LOAD_FAST                0 (self)
                           3054 LOAD_METHOD             15 (assertFalse)
                           3076 LOAD_FAST                6 (ret)
                           3078 LOAD_METHOD             16 (get)
                           3100 LOAD_CONST              40 ('errors')
                           3102 PRECALL                  1
                           3106 CALL                     1
                           3116 PRECALL                  1
                           3120 CALL                     1
                           3130 POP_TOP
                
-               309        3132 PUSH_NULL
+               318        3132 PUSH_NULL
                           3134 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3146 LOAD_FAST                1 (db)
                           3148 LOAD_CONST              37 ('category.id')
                           3150 LOAD_CONST               8 ('%(name)s')
                           3152 PRECALL                  3
                           3156 CALL                     3
                           3166 LOAD_FAST                6 (ret)
@@ -3353,527 +3438,527 @@
                           3190 LOAD_CONST              42 ('id')
                           3192 PRECALL                  1
                           3196 CALL                     1
                           3206 PRECALL                  1
                           3210 CALL                     1
                           3220 STORE_FAST               4 (rtn)
                
-               310        3222 LOAD_FAST                0 (self)
+               319        3222 LOAD_FAST                0 (self)
                           3224 LOAD_METHOD              6 (assertEqual)
                           3246 LOAD_FAST                4 (rtn)
                           3248 LOAD_FAST                6 (ret)
                           3250 LOAD_METHOD             16 (get)
                           3272 LOAD_CONST              42 ('id')
                           3274 PRECALL                  1
                           3278 CALL                     1
                           3288 LOAD_CONST               0 (None)
                           3290 BUILD_TUPLE              2
                           3292 PRECALL                  2
                           3296 CALL                     2
                           3306 POP_TOP
                
-               312        3308 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               321        3308 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                
-               313        3320 LOAD_FAST                1 (db)
+               322        3320 LOAD_FAST                1 (db)
                
-               314        3322 LOAD_CONST               9 ('person.name')
+               323        3322 LOAD_CONST               9 ('person.name')
                
-               315        3324 LOAD_CONST               8 ('%(name)s')
+               324        3324 LOAD_CONST               8 ('%(name)s')
                
-               316        3326 LOAD_CONST              12 ('oops')
+               325        3326 LOAD_CONST              12 ('oops')
                
-               317        3328 LOAD_GLOBAL             35 (NULL + IS_LENGTH)
+               326        3328 LOAD_GLOBAL             35 (NULL + IS_LENGTH)
                           3340 LOAD_CONST              44 (7)
                           3342 LOAD_CONST              45 ('bad')
                           3344 KW_NAMES                46
                           3346 PRECALL                  2
                           3350 CALL                     2
                
-               312        3360 KW_NAMES                47
+               321        3360 KW_NAMES                47
                           3362 PRECALL                  5
                           3366 CALL                     5
                           3376 STORE_FAST               5 (vldtr)
                
-               319        3378 PUSH_NULL
+               328        3378 PUSH_NULL
                           3380 LOAD_FAST                5 (vldtr)
                           3382 LOAD_CONST               4 ('george')
                           3384 PRECALL                  1
                           3388 CALL                     1
                           3398 STORE_FAST               4 (rtn)
                
-               320        3400 LOAD_FAST                0 (self)
+               329        3400 LOAD_FAST                0 (self)
                           3402 LOAD_METHOD              6 (assertEqual)
                           3424 LOAD_FAST                4 (rtn)
                           3426 LOAD_CONST              10 (('george', None))
                           3428 PRECALL                  2
                           3432 CALL                     2
                           3442 POP_TOP
                
-               321        3444 PUSH_NULL
+               330        3444 PUSH_NULL
                           3446 LOAD_FAST                5 (vldtr)
                           3448 LOAD_CONST               6 ('costanza')
                           3450 PRECALL                  1
                           3454 CALL                     1
                           3464 STORE_FAST               4 (rtn)
                
-               322        3466 LOAD_FAST                0 (self)
+               331        3466 LOAD_FAST                0 (self)
                           3468 LOAD_METHOD              6 (assertEqual)
                           3490 LOAD_FAST                4 (rtn)
                           3492 LOAD_CONST              48 (('costanza', 'bad'))
                           3494 PRECALL                  2
                           3498 CALL                     2
                           3508 POP_TOP
                
-               323        3510 PUSH_NULL
+               332        3510 PUSH_NULL
                           3512 LOAD_FAST                5 (vldtr)
                           3514 LOAD_CONST              31 ('jerry')
                           3516 PRECALL                  1
                           3520 CALL                     1
                           3530 STORE_FAST               4 (rtn)
                
-               324        3532 LOAD_FAST                0 (self)
+               333        3532 LOAD_FAST                0 (self)
                           3534 LOAD_METHOD              6 (assertEqual)
                           3556 LOAD_FAST                4 (rtn)
                           3558 LOAD_CONST              32 (('jerry', 'oops'))
                           3560 PRECALL                  2
                           3564 CALL                     2
                           3574 POP_TOP
                
-               325        3576 LOAD_FAST                5 (vldtr)
+               334        3576 LOAD_FAST                5 (vldtr)
                           3578 LOAD_METHOD              9 (options)
                           3600 PRECALL                  0
                           3604 CALL                     0
                           3614 POP_TOP
                
-               326        3616 PUSH_NULL
+               335        3616 PUSH_NULL
                           3618 LOAD_FAST                5 (vldtr)
                           3620 LOAD_CONST              31 ('jerry')
                           3622 PRECALL                  1
                           3626 CALL                     1
                           3636 STORE_FAST               4 (rtn)
                
-               327        3638 LOAD_FAST                0 (self)
+               336        3638 LOAD_FAST                0 (self)
                           3640 LOAD_METHOD              6 (assertEqual)
                           3662 LOAD_FAST                4 (rtn)
                           3664 LOAD_CONST              32 (('jerry', 'oops'))
                           3666 PRECALL                  2
                           3670 CALL                     2
                           3680 POP_TOP
                
-               329        3682 PUSH_NULL
+               338        3682 PUSH_NULL
                           3684 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3696 LOAD_FAST                1 (db)
                           3698 LOAD_CONST               7 ('person.id')
                           3700 LOAD_CONST               8 ('%(name)s')
                           3702 LOAD_CONST              12 ('oops')
                           3704 KW_NAMES                13
                           3706 PRECALL                  4
                           3710 CALL                     4
                           3720 LOAD_CONST              31 ('jerry')
                           3722 PRECALL                  1
                           3726 CALL                     1
                           3736 STORE_FAST               4 (rtn)
                
-               330        3738 LOAD_FAST                0 (self)
+               339        3738 LOAD_FAST                0 (self)
                           3740 LOAD_METHOD              6 (assertEqual)
                           3762 LOAD_FAST                4 (rtn)
                           3764 LOAD_CONST              32 (('jerry', 'oops'))
                           3766 PRECALL                  2
                           3770 CALL                     2
                           3780 POP_TOP
                
-               331        3782 PUSH_NULL
+               340        3782 PUSH_NULL
                           3784 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           3796 LOAD_FAST                1 (db)
                           3798 LOAD_CONST               7 ('person.id')
                           3800 LOAD_CONST               8 ('%(name)s')
                           3802 LOAD_CONST              14 (True)
                           3804 KW_NAMES                49
                           3806 PRECALL                  4
                           3810 CALL                     4
                           3820 LOAD_CONST              31 ('jerry')
                           3822 PRECALL                  1
                           3826 CALL                     1
                           3836 STORE_FAST               4 (rtn)
                
-               332        3838 LOAD_FAST                0 (self)
+               341        3838 LOAD_FAST                0 (self)
                           3840 LOAD_METHOD              6 (assertEqual)
                           3862 LOAD_FAST                4 (rtn)
                           3864 LOAD_CONST              50 ((3, None))
                           3866 PRECALL                  2
                           3870 CALL                     2
                           3880 POP_TOP
                
-               334        3882 LOAD_FAST                1 (db)
+               343        3882 LOAD_FAST                1 (db)
                           3884 LOAD_METHOD              1 (define_table)
                
-               335        3906 LOAD_CONST              51 ('ref_table')
+               344        3906 LOAD_CONST              51 ('ref_table')
                           3908 LOAD_GLOBAL              5 (NULL + Field)
                           3920 LOAD_CONST               3 ('name')
                           3922 PRECALL                  1
                           3926 CALL                     1
                           3936 LOAD_GLOBAL              5 (NULL + Field)
                           3948 LOAD_CONST              52 ('person_id')
                           3950 LOAD_CONST              53 ('reference person')
                           3952 PRECALL                  2
                           3956 CALL                     2
                
-               334        3966 PRECALL                  3
+               343        3966 PRECALL                  3
                           3970 CALL                     3
                           3980 POP_TOP
                
-               337        3982 LOAD_FAST                1 (db)
+               346        3982 LOAD_FAST                1 (db)
                           3984 LOAD_ATTR               18 (ref_table)
                           3994 LOAD_METHOD             14 (validate_and_insert)
                           4016 LOAD_CONST              54 ('test reference table')
                           4018 KW_NAMES                 5
                           4020 PRECALL                  1
                           4024 CALL                     1
                           4034 STORE_FAST               6 (ret)
                
-               338        4036 LOAD_FAST                0 (self)
+               347        4036 LOAD_FAST                0 (self)
                           4038 LOAD_METHOD             19 (assertTrue)
                           4060 LOAD_FAST                6 (ret)
                           4062 LOAD_METHOD             16 (get)
                           4084 LOAD_CONST              40 ('errors')
                           4086 PRECALL                  1
                           4090 CALL                     1
                           4100 UNARY_NOT
                           4102 PRECALL                  1
                           4106 CALL                     1
                           4116 POP_TOP
                
-               339        4118 LOAD_FAST                1 (db)
+               348        4118 LOAD_FAST                1 (db)
                           4120 LOAD_ATTR               18 (ref_table)
                           4130 LOAD_METHOD             14 (validate_and_insert)
                
-               340        4152 LOAD_CONST              54 ('test reference table')
+               349        4152 LOAD_CONST              54 ('test reference table')
                           4154 LOAD_FAST                2 (george_id)
                
-               339        4156 KW_NAMES                55
+               348        4156 KW_NAMES                55
                           4158 PRECALL                  2
                           4162 CALL                     2
                           4172 STORE_FAST               6 (ret)
                
-               342        4174 LOAD_FAST                0 (self)
+               351        4174 LOAD_FAST                0 (self)
                           4176 LOAD_METHOD             19 (assertTrue)
                           4198 LOAD_FAST                6 (ret)
                           4200 LOAD_METHOD             16 (get)
                           4222 LOAD_CONST              40 ('errors')
                           4224 PRECALL                  1
                           4228 CALL                     1
                           4238 UNARY_NOT
                           4240 PRECALL                  1
                           4244 CALL                     1
                           4254 POP_TOP
                
-               343        4256 PUSH_NULL
+               352        4256 PUSH_NULL
                           4258 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           4270 LOAD_FAST                1 (db)
                           4272 LOAD_CONST              56 ('ref_table.person_id')
                           4274 LOAD_CONST               8 ('%(name)s')
                           4276 PRECALL                  3
                           4280 CALL                     3
                           4290 LOAD_FAST                2 (george_id)
                           4292 PRECALL                  1
                           4296 CALL                     1
                           4306 STORE_FAST               4 (rtn)
                
-               344        4308 LOAD_FAST                0 (self)
+               353        4308 LOAD_FAST                0 (self)
                           4310 LOAD_METHOD              6 (assertEqual)
                           4332 LOAD_FAST                4 (rtn)
                           4334 LOAD_FAST                2 (george_id)
                           4336 LOAD_CONST               0 (None)
                           4338 BUILD_TUPLE              2
                           4340 PRECALL                  2
                           4344 CALL                     2
                           4354 POP_TOP
                
-               346        4356 LOAD_FAST                1 (db)
+               355        4356 LOAD_FAST                1 (db)
                           4358 LOAD_METHOD              1 (define_table)
                           4380 LOAD_CONST              57 ('person_keyed')
                           4382 LOAD_GLOBAL              5 (NULL + Field)
                           4394 LOAD_CONST               3 ('name')
                           4396 PRECALL                  1
                           4400 CALL                     1
                           4410 LOAD_CONST               3 ('name')
                           4412 BUILD_LIST               1
                           4414 KW_NAMES                58
                           4416 PRECALL                  3
                           4420 CALL                     3
                           4430 POP_TOP
                
-               347        4432 LOAD_FAST                1 (db)
+               356        4432 LOAD_FAST                1 (db)
                           4434 LOAD_ATTR               20 (person_keyed)
                           4444 LOAD_METHOD              4 (insert)
                           4466 LOAD_CONST               4 ('george')
                           4468 KW_NAMES                 5
                           4470 PRECALL                  1
                           4474 CALL                     1
                           4484 POP_TOP
                
-               348        4486 LOAD_FAST                1 (db)
+               357        4486 LOAD_FAST                1 (db)
                           4488 LOAD_ATTR               20 (person_keyed)
                           4498 LOAD_METHOD              4 (insert)
                           4520 LOAD_CONST               6 ('costanza')
                           4522 KW_NAMES                 5
                           4524 PRECALL                  1
                           4528 CALL                     1
                           4538 POP_TOP
                
-               349        4540 PUSH_NULL
+               358        4540 PUSH_NULL
                           4542 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           4554 LOAD_FAST                1 (db)
                           4556 LOAD_CONST              59 ('person_keyed.name')
                           4558 PRECALL                  2
                           4562 CALL                     2
                           4572 LOAD_CONST               4 ('george')
                           4574 PRECALL                  1
                           4578 CALL                     1
                           4588 STORE_FAST               4 (rtn)
                
-               350        4590 LOAD_FAST                0 (self)
+               359        4590 LOAD_FAST                0 (self)
                           4592 LOAD_METHOD              6 (assertEqual)
                           4614 LOAD_FAST                4 (rtn)
                           4616 LOAD_CONST              10 (('george', None))
                           4618 PRECALL                  2
                           4622 CALL                     2
                           4632 POP_TOP
                
-               351        4634 LOAD_FAST                1 (db)
+               360        4634 LOAD_FAST                1 (db)
                           4636 LOAD_METHOD              1 (define_table)
                
-               352        4658 LOAD_CONST              60 ('ref_table_field')
+               361        4658 LOAD_CONST              60 ('ref_table_field')
                
-               353        4660 LOAD_GLOBAL              5 (NULL + Field)
+               362        4660 LOAD_GLOBAL              5 (NULL + Field)
                           4672 LOAD_CONST               3 ('name')
                           4674 PRECALL                  1
                           4678 CALL                     1
                
-               354        4688 LOAD_GLOBAL              5 (NULL + Field)
+               363        4688 LOAD_GLOBAL              5 (NULL + Field)
                           4700 LOAD_CONST              61 ('person_name')
                           4702 LOAD_CONST              62 ('reference person_keyed.name')
                           4704 PRECALL                  2
                           4708 CALL                     2
                
-               351        4718 PRECALL                  3
+               360        4718 PRECALL                  3
                           4722 CALL                     3
                           4732 POP_TOP
                
-               356        4734 LOAD_FAST                1 (db)
+               365        4734 LOAD_FAST                1 (db)
                           4736 LOAD_ATTR               21 (ref_table_field)
                           4746 LOAD_METHOD             14 (validate_and_insert)
                           4768 LOAD_CONST              63 ('test reference table.field')
                           4770 KW_NAMES                 5
                           4772 PRECALL                  1
                           4776 CALL                     1
                           4786 STORE_FAST               6 (ret)
                
-               357        4788 LOAD_FAST                0 (self)
+               366        4788 LOAD_FAST                0 (self)
                           4790 LOAD_METHOD             19 (assertTrue)
                           4812 LOAD_FAST                6 (ret)
                           4814 LOAD_METHOD             16 (get)
                           4836 LOAD_CONST              40 ('errors')
                           4838 PRECALL                  1
                           4842 CALL                     1
                           4852 UNARY_NOT
                           4854 PRECALL                  1
                           4858 CALL                     1
                           4868 POP_TOP
                
-               358        4870 LOAD_FAST                1 (db)
+               367        4870 LOAD_FAST                1 (db)
                           4872 LOAD_ATTR               21 (ref_table_field)
                           4882 LOAD_METHOD             14 (validate_and_insert)
                
-               359        4904 LOAD_CONST              63 ('test reference table.field')
+               368        4904 LOAD_CONST              63 ('test reference table.field')
                           4906 LOAD_CONST               4 ('george')
                
-               358        4908 KW_NAMES                64
+               367        4908 KW_NAMES                64
                           4910 PRECALL                  2
                           4914 CALL                     2
                           4924 STORE_FAST               6 (ret)
                
-               361        4926 LOAD_FAST                0 (self)
+               370        4926 LOAD_FAST                0 (self)
                           4928 LOAD_METHOD             19 (assertTrue)
                           4950 LOAD_FAST                6 (ret)
                           4952 LOAD_METHOD             16 (get)
                           4974 LOAD_CONST              40 ('errors')
                           4976 PRECALL                  1
                           4980 CALL                     1
                           4990 UNARY_NOT
                           4992 PRECALL                  1
                           4996 CALL                     1
                           5006 POP_TOP
                
-               362        5008 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               371        5008 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           5020 LOAD_FAST                1 (db)
                           5022 LOAD_CONST              65 ('ref_table_field.person_name')
                           5024 LOAD_CONST               8 ('%(name)s')
                           5026 PRECALL                  3
                           5030 CALL                     3
                           5040 STORE_FAST               5 (vldtr)
                
-               363        5042 LOAD_FAST                5 (vldtr)
+               372        5042 LOAD_FAST                5 (vldtr)
                           5044 LOAD_METHOD              9 (options)
                           5066 PRECALL                  0
                           5070 CALL                     0
                           5080 POP_TOP
                
-               364        5082 PUSH_NULL
+               373        5082 PUSH_NULL
                           5084 LOAD_FAST                5 (vldtr)
                           5086 LOAD_CONST               4 ('george')
                           5088 PRECALL                  1
                           5092 CALL                     1
                           5102 STORE_FAST               4 (rtn)
                
-               365        5104 LOAD_FAST                0 (self)
+               374        5104 LOAD_FAST                0 (self)
                           5106 LOAD_METHOD              6 (assertEqual)
                           5128 LOAD_FAST                4 (rtn)
                           5130 LOAD_CONST              10 (('george', None))
                           5132 PRECALL                  2
                           5136 CALL                     2
                           5146 POP_TOP
                
-               367        5148 LOAD_FAST                1 (db)
+               376        5148 LOAD_FAST                1 (db)
                           5150 LOAD_METHOD              1 (define_table)
                
-               368        5172 LOAD_CONST              66 ('list_ref_table')
+               377        5172 LOAD_CONST              66 ('list_ref_table')
                
-               369        5174 LOAD_GLOBAL              5 (NULL + Field)
+               378        5174 LOAD_GLOBAL              5 (NULL + Field)
                           5186 LOAD_CONST               3 ('name')
                           5188 PRECALL                  1
                           5192 CALL                     1
                
-               370        5202 LOAD_GLOBAL              5 (NULL + Field)
+               379        5202 LOAD_GLOBAL              5 (NULL + Field)
                           5214 LOAD_CONST              67 ('person_list')
                           5216 LOAD_CONST              68 ('list:reference person')
                           5218 PRECALL                  2
                           5222 CALL                     2
                
-               367        5232 PRECALL                  3
+               376        5232 PRECALL                  3
                           5236 CALL                     3
                           5246 POP_TOP
                
-               372        5248 LOAD_FAST                1 (db)
+               381        5248 LOAD_FAST                1 (db)
                           5250 LOAD_ATTR               22 (list_ref_table)
                           5260 LOAD_METHOD             14 (validate_and_insert)
                           5282 LOAD_CONST              69 ('test list:reference table')
                           5284 KW_NAMES                 5
                           5286 PRECALL                  1
                           5290 CALL                     1
                           5300 STORE_FAST               6 (ret)
                
-               373        5302 LOAD_FAST                0 (self)
+               382        5302 LOAD_FAST                0 (self)
                           5304 LOAD_METHOD             19 (assertTrue)
                           5326 LOAD_FAST                6 (ret)
                           5328 LOAD_METHOD             16 (get)
                           5350 LOAD_CONST              40 ('errors')
                           5352 PRECALL                  1
                           5356 CALL                     1
                           5366 UNARY_NOT
                           5368 PRECALL                  1
                           5372 CALL                     1
                           5382 POP_TOP
                
-               374        5384 LOAD_FAST                1 (db)
+               383        5384 LOAD_FAST                1 (db)
                           5386 LOAD_ATTR               22 (list_ref_table)
                           5396 LOAD_METHOD             14 (validate_and_insert)
                
-               375        5418 LOAD_CONST              69 ('test list:reference table')
+               384        5418 LOAD_CONST              69 ('test list:reference table')
                           5420 LOAD_FAST                2 (george_id)
                           5422 LOAD_FAST                3 (costanza_id)
                           5424 BUILD_LIST               2
                
-               374        5426 KW_NAMES                70
+               383        5426 KW_NAMES                70
                           5428 PRECALL                  2
                           5432 CALL                     2
                           5442 STORE_FAST               6 (ret)
                
-               377        5444 LOAD_FAST                0 (self)
+               386        5444 LOAD_FAST                0 (self)
                           5446 LOAD_METHOD             19 (assertTrue)
                           5468 LOAD_FAST                6 (ret)
                           5470 LOAD_METHOD             16 (get)
                           5492 LOAD_CONST              40 ('errors')
                           5494 PRECALL                  1
                           5498 CALL                     1
                           5508 UNARY_NOT
                           5510 PRECALL                  1
                           5514 CALL                     1
                           5524 POP_TOP
                
-               378        5526 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               387        5526 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                           5538 LOAD_FAST                1 (db)
                           5540 LOAD_CONST              71 ('list_ref_table.person_list')
                           5542 PRECALL                  2
                           5546 CALL                     2
                           5556 STORE_FAST               5 (vldtr)
                
-               379        5558 LOAD_FAST                5 (vldtr)
+               388        5558 LOAD_FAST                5 (vldtr)
                           5560 LOAD_METHOD              9 (options)
                           5582 PRECALL                  0
                           5586 CALL                     0
                           5596 POP_TOP
                
-               380        5598 PUSH_NULL
+               389        5598 PUSH_NULL
                           5600 LOAD_FAST                5 (vldtr)
                           5602 LOAD_FAST                2 (george_id)
                           5604 LOAD_FAST                3 (costanza_id)
                           5606 BUILD_LIST               2
                           5608 PRECALL                  1
                           5612 CALL                     1
                           5622 STORE_FAST               4 (rtn)
                
-               381        5624 LOAD_FAST                0 (self)
+               390        5624 LOAD_FAST                0 (self)
                           5626 LOAD_METHOD              6 (assertEqual)
                           5648 LOAD_FAST                4 (rtn)
                           5650 LOAD_FAST                2 (george_id)
                           5652 LOAD_FAST                3 (costanza_id)
                           5654 BUILD_LIST               2
                           5656 LOAD_CONST               0 (None)
                           5658 BUILD_TUPLE              2
                           5660 PRECALL                  2
                           5664 CALL                     2
                           5674 POP_TOP
                
-               382        5676 LOAD_FAST                1 (db)
+               391        5676 LOAD_FAST                1 (db)
                           5678 LOAD_ATTR                3 (person)
                           5688 LOAD_METHOD             23 (drop)
                           5710 PRECALL                  0
                           5714 CALL                     0
                           5724 POP_TOP
                
-               383        5726 LOAD_FAST                1 (db)
+               392        5726 LOAD_FAST                1 (db)
                           5728 LOAD_ATTR               13 (category)
                           5738 LOAD_METHOD             23 (drop)
                           5760 PRECALL                  0
                           5764 CALL                     0
                           5774 POP_TOP
                
-               384        5776 LOAD_FAST                1 (db)
+               393        5776 LOAD_FAST                1 (db)
                           5778 LOAD_ATTR               20 (person_keyed)
                           5788 LOAD_METHOD             23 (drop)
                           5810 PRECALL                  0
                           5814 CALL                     0
                           5824 POP_TOP
                
-               385        5826 LOAD_FAST                1 (db)
+               394        5826 LOAD_FAST                1 (db)
                           5828 LOAD_ATTR               18 (ref_table)
                           5838 LOAD_METHOD             23 (drop)
                           5860 PRECALL                  0
                           5864 CALL                     0
                           5874 POP_TOP
                
-               386        5876 LOAD_FAST                1 (db)
+               395        5876 LOAD_FAST                1 (db)
                           5878 LOAD_ATTR               21 (ref_table_field)
                           5888 LOAD_METHOD             23 (drop)
                           5910 PRECALL                  0
                           5914 CALL                     0
                           5924 POP_TOP
                
-               387        5926 LOAD_FAST                1 (db)
+               396        5926 LOAD_FAST                1 (db)
                           5928 LOAD_ATTR               22 (list_ref_table)
                           5938 LOAD_METHOD             23 (drop)
                           5960 PRECALL                  0
                           5964 CALL                     0
                           5974 POP_TOP
                           5976 LOAD_CONST               0 (None)
                           5978 RETURN_VALUE
@@ -3952,15 +4037,15 @@
                   'list_ref_table.person_list'
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_IN_DB', 'assertEqual', 'id', 'split', 'options', 'sorted', 'name', 'IS_EMPTY_OR', 'category', 'validate_and_insert', 'assertFalse', 'get', 'IS_LENGTH', 'ref_table', 'assertTrue', 'person_keyed', 'ref_table_field', 'list_ref_table', 'drop')
                varnames   ('self', 'db', 'george_id', 'costanza_id', 'rtn', 'vldtr', 'ret')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_DB'
-               firstlineno 213
+               firstlineno 222
                lnotab
                   0x02011e014601360136013401300134012c013e0130016c013001260108
                   ff10033601480130013a0108ff10033601260106ff100334010e010aff10
                   0202fe10032c0128010cff1003600128010cff100360010e010201020102
                   010201020102fa10070cf910083a014e0102ff120318011c011afe10040c
                   0132ff100228fe0203180102011cfe100538012c0138012c022601280116
                   012c0116012c010c010aff120328011a013402180102010c01020102013a
@@ -3992,52 +4077,52 @@
                   09a2016b020000000073024a008201740b000000000000000000007c0164
                   026400ac0aa6030000ab030000000000000000a006000000000000000000
                   0000000000000000000000a6000000ab000000000000000000640b640c67
                   026b020000000073024a008201740b000000000000000000007c01640264
                   0dac0aa6030000ab030000000000000000a0060000000000000000000000
                   000000000000000000a6000000ab0000000000000000006700640ea2016b
                   020000000073024a00820164005300
-               389           0 RESUME                   0
+               398           0 RESUME                   0
                
-               390           2 LOAD_GLOBAL              1 (NULL + DAL)
+               399           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               391          32 LOAD_FAST                1 (db)
+               400          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('thing')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 PRECALL                  2
                             90 CALL                     2
                            100 POP_TOP
                
-               392         102 LOAD_FAST                1 (db)
+               401         102 LOAD_FAST                1 (db)
                            104 LOAD_ATTR                3 (thing)
                            114 LOAD_METHOD              4 (insert)
                            136 LOAD_CONST               4 ('red')
                            138 KW_NAMES                 5
                            140 PRECALL                  1
                            144 CALL                     1
                            154 POP_TOP
                
-               393         156 LOAD_FAST                1 (db)
+               402         156 LOAD_FAST                1 (db)
                            158 LOAD_ATTR                3 (thing)
                            168 LOAD_METHOD              4 (insert)
                            190 LOAD_CONST               6 ('green')
                            192 KW_NAMES                 5
                            194 PRECALL                  1
                            198 CALL                     1
                            208 POP_TOP
                
-               394         210 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               403         210 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            222 LOAD_FAST                1 (db)
                            224 LOAD_CONST               2 ('thing')
                            226 PRECALL                  2
                            230 CALL                     2
                            240 LOAD_METHOD              6 (options)
                            262 PRECALL                  0
                            266 CALL                     0
@@ -4045,21 +4130,21 @@
                            278 LOAD_CONST               7 ((('', ''), ('1', '1'), ('2', '2')))
                            280 LIST_EXTEND              1
                            282 COMPARE_OP               2 (==)
                            288 POP_JUMP_FORWARD_IF_TRUE     2 (to 294)
                            290 LOAD_ASSERTION_ERROR
                            292 RAISE_VARARGS            1
                
-               396     >>  294 LOAD_CONST               8 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 396>)
+               405     >>  294 LOAD_CONST               8 (<code object <lambda>, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 405>)
                            296 MAKE_FUNCTION            0
                            298 LOAD_FAST                1 (db)
                            300 LOAD_ATTR                3 (thing)
                            310 STORE_ATTR               7 (_format)
                
-               397         320 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               406         320 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            332 LOAD_FAST                1 (db)
                            334 LOAD_CONST               2 ('thing')
                            336 PRECALL                  2
                            340 CALL                     2
                            350 LOAD_METHOD              6 (options)
                            372 PRECALL                  0
                            376 CALL                     0
@@ -4067,33 +4152,36 @@
                            388 LOAD_CONST               9 ((('', ''), ('1', 'red'), ('2', 'green')))
                            390 LIST_EXTEND              1
                            392 COMPARE_OP               2 (==)
                            398 POP_JUMP_FORWARD_IF_TRUE     2 (to 404)
                            400 LOAD_ASSERTION_ERROR
                            402 RAISE_VARARGS            1
                
-               398     >>  404 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               411     >>  404 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            416 LOAD_FAST                1 (db)
                            418 LOAD_CONST               2 ('thing')
                            420 LOAD_CONST               0 (None)
                            422 KW_NAMES                10
                            424 PRECALL                  3
                            428 CALL                     3
                            438 LOAD_METHOD              6 (options)
                            460 PRECALL                  0
                            464 CALL                     0
-                           474 LOAD_CONST              11 (('1', 'red'))
-                           476 LOAD_CONST              12 (('2', 'green'))
-                           478 BUILD_LIST               2
+               
+               412         474 LOAD_CONST              11 (('1', 'red'))
+               
+               413         476 LOAD_CONST              12 (('2', 'green'))
+               
+               411         478 BUILD_LIST               2
                            480 COMPARE_OP               2 (==)
                            486 POP_JUMP_FORWARD_IF_TRUE     2 (to 492)
                            488 LOAD_ASSERTION_ERROR
                            490 RAISE_VARARGS            1
                
-               399     >>  492 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
+               415     >>  492 LOAD_GLOBAL             11 (NULL + IS_IN_DB)
                            504 LOAD_FAST                1 (db)
                            506 LOAD_CONST               2 ('thing')
                            508 LOAD_CONST              13 ('x')
                            510 KW_NAMES                10
                            512 PRECALL                  3
                            516 CALL                     3
                            526 LOAD_METHOD              6 (options)
@@ -4119,42 +4207,42 @@
                   (('', ''), ('1', '1'), ('2', '2'))
                   code
                      argcount  : 1
                      nlocals   : 1
                      stacksize : 1
                      flags     : 19
                      code 0x97007c006a0000000000000000005300
-                     396           0 RESUME                   0
+                     405           0 RESUME                   0
                                    2 LOAD_FAST                0 (i)
                                    4 LOAD_ATTR                0 (name)
                                   14 RETURN_VALUE
                      consts
                         None
                      names      ('name',)
                      varnames   ('i',)
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '<lambda>'
-                     firstlineno 396
+                     firstlineno 405
                      lnotab 0x
                   (('', ''), ('1', 'red'), ('2', 'green'))
                   ('zero',)
                   ('1', 'red')
                   ('2', 'green')
                   'x'
                   (('', 'x'), ('1', 'red'), ('2', 'green'))
                names      ('DAL', 'define_table', 'Field', 'thing', 'insert', 'IS_IN_DB', 'options', '_format')
                varnames   ('self', 'db')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IN_DB_options'
-               firstlineno 389
-               lnotab 0x02011e0146013601360154021a0154015801
+               firstlineno 398
+               lnotab 0x02011e0146013601360154021a0154054601020102fe0e04
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 7
                flags     : 3
                code
                   0x97007401000000000000000000006401a6010000ab0100000000000000
@@ -4195,164 +4283,164 @@
                   00000000000000010002007c036405a6010000ab0100000000000000007d
                   027c00a00600000000000000000000000000000000000000007c02640da6
                   020000ab020000000000000000010002007c036407a6010000ab01000000
                   00000000007d027c00a00600000000000000000000000000000000000000
                   007c026417a6020000ab02000000000000000001007c016a030000000000
                   000000a0090000000000000000000000000000000000000000a6000000ab
                   000000000000000000010064005300
-               402           0 RESUME                   0
+               421           0 RESUME                   0
                
-               403           2 LOAD_GLOBAL              1 (NULL + DAL)
+               422           2 LOAD_GLOBAL              1 (NULL + DAL)
                             14 LOAD_CONST               1 ('sqlite:memory')
                             16 PRECALL                  1
                             20 CALL                     1
                             30 STORE_FAST               1 (db)
                
-               404          32 LOAD_FAST                1 (db)
+               423          32 LOAD_FAST                1 (db)
                             34 LOAD_METHOD              1 (define_table)
                             56 LOAD_CONST               2 ('person')
                             58 LOAD_GLOBAL              5 (NULL + Field)
                             70 LOAD_CONST               3 ('name')
                             72 PRECALL                  1
                             76 CALL                     1
                             86 LOAD_GLOBAL              5 (NULL + Field)
                             98 LOAD_CONST               4 ('nickname')
                            100 PRECALL                  1
                            104 CALL                     1
                            114 PRECALL                  3
                            118 CALL                     3
                            128 POP_TOP
                
-               405         130 LOAD_FAST                1 (db)
+               424         130 LOAD_FAST                1 (db)
                            132 LOAD_ATTR                3 (person)
                            142 LOAD_METHOD              4 (insert)
                            164 LOAD_CONST               5 ('george')
                            166 KW_NAMES                 6
                            168 PRECALL                  1
                            172 CALL                     1
                            182 POP_TOP
                
-               406         184 LOAD_FAST                1 (db)
+               425         184 LOAD_FAST                1 (db)
                            186 LOAD_ATTR                3 (person)
                            196 LOAD_METHOD              4 (insert)
                            218 LOAD_CONST               7 ('costanza')
                            220 LOAD_CONST               8 ('T Bone')
                            222 KW_NAMES                 9
                            224 PRECALL                  2
                            228 CALL                     2
                            238 POP_TOP
                
-               407         240 PUSH_NULL
+               426         240 PUSH_NULL
                            242 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            254 LOAD_FAST                1 (db)
                            256 LOAD_CONST              10 ('person.name')
                            258 LOAD_CONST              11 ('oops')
                            260 KW_NAMES                12
                            262 PRECALL                  3
                            266 CALL                     3
                            276 LOAD_CONST               5 ('george')
                            278 PRECALL                  1
                            282 CALL                     1
                            292 STORE_FAST               2 (rtn)
                
-               408         294 LOAD_FAST                0 (self)
+               427         294 LOAD_FAST                0 (self)
                            296 LOAD_METHOD              6 (assertEqual)
                            318 LOAD_FAST                2 (rtn)
                            320 LOAD_CONST              13 (('george', 'oops'))
                            322 PRECALL                  2
                            326 CALL                     2
                            336 POP_TOP
                
-               409         338 PUSH_NULL
+               428         338 PUSH_NULL
                            340 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                
-               410         352 LOAD_FAST                1 (db)
+               429         352 LOAD_FAST                1 (db)
                            354 LOAD_CONST              10 ('person.name')
                            356 LOAD_CONST              11 ('oops')
                            358 LOAD_CONST               5 ('george')
                            360 BUILD_LIST               1
                
-               409         362 KW_NAMES                14
+               428         362 KW_NAMES                14
                            364 PRECALL                  4
                            368 CALL                     4
                
-               411         378 LOAD_CONST               5 ('george')
+               430         378 LOAD_CONST               5 ('george')
                
-               409         380 PRECALL                  1
+               428         380 PRECALL                  1
                            384 CALL                     1
                            394 STORE_FAST               2 (rtn)
                
-               412         396 LOAD_FAST                0 (self)
+               431         396 LOAD_FAST                0 (self)
                            398 LOAD_METHOD              6 (assertEqual)
                            420 LOAD_FAST                2 (rtn)
                            422 LOAD_CONST              15 (('george', None))
                            424 PRECALL                  2
                            428 CALL                     2
                            438 POP_TOP
                
-               413         440 PUSH_NULL
+               432         440 PUSH_NULL
                            442 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            454 LOAD_FAST                1 (db)
                            456 LOAD_CONST              10 ('person.name')
                            458 LOAD_CONST              11 ('oops')
                            460 KW_NAMES                12
                            462 PRECALL                  3
                            466 CALL                     3
                            476 LOAD_CONST              16 ('  ')
                            478 PRECALL                  1
                            482 CALL                     1
                            492 STORE_FAST               2 (rtn)
                
-               414         494 LOAD_FAST                0 (self)
+               433         494 LOAD_FAST                0 (self)
                            496 LOAD_METHOD              6 (assertEqual)
                            518 LOAD_FAST                2 (rtn)
                            520 LOAD_CONST              17 (('  ', 'oops'))
                            522 PRECALL                  2
                            526 CALL                     2
                            536 POP_TOP
                
-               415         538 PUSH_NULL
+               434         538 PUSH_NULL
                            540 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            552 LOAD_FAST                1 (db)
                            554 LOAD_CONST              10 ('person.name')
                            556 PRECALL                  2
                            560 CALL                     2
                            570 LOAD_CONST              18 ('jerry')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               2 (rtn)
                
-               416         588 LOAD_FAST                0 (self)
+               435         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              6 (assertEqual)
                            612 LOAD_FAST                2 (rtn)
                            614 LOAD_CONST              19 (('jerry', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               417         632 PUSH_NULL
+               436         632 PUSH_NULL
                            634 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            646 LOAD_FAST                1 (db)
                            648 LOAD_CONST              10 ('person.name')
                            650 PRECALL                  2
                            654 CALL                     2
                            664 LOAD_CONST              18 ('jerry')
                            666 PRECALL                  1
                            670 CALL                     1
                            680 STORE_FAST               2 (rtn)
                
-               418         682 LOAD_FAST                0 (self)
+               437         682 LOAD_FAST                0 (self)
                            684 LOAD_METHOD              6 (assertEqual)
                            706 LOAD_FAST                2 (rtn)
                            708 LOAD_CONST              19 (('jerry', None))
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               419         726 PUSH_NULL
+               438         726 PUSH_NULL
                            728 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            740 PUSH_NULL
                            742 LOAD_FAST                1 (db)
                            744 LOAD_FAST                1 (db)
                            746 LOAD_ATTR                3 (person)
                            756 LOAD_ATTR                7 (id)
                            766 LOAD_CONST              20 (0)
@@ -4363,94 +4451,94 @@
                            790 PRECALL                  2
                            794 CALL                     2
                            804 LOAD_CONST              18 ('jerry')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               2 (rtn)
                
-               420         822 LOAD_FAST                0 (self)
+               439         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              6 (assertEqual)
                            846 LOAD_FAST                2 (rtn)
                            848 LOAD_CONST              19 (('jerry', None))
                            850 PRECALL                  2
                            854 CALL                     2
                            864 POP_TOP
                
-               421         866 PUSH_NULL
+               440         866 PUSH_NULL
                            868 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            880 LOAD_FAST                1 (db)
                            882 LOAD_FAST                1 (db)
                            884 LOAD_ATTR                3 (person)
                            894 LOAD_CONST              11 ('oops')
                            896 KW_NAMES                12
                            898 PRECALL                  3
                            902 CALL                     3
                            912 LOAD_CONST              21 (1)
                            914 PRECALL                  1
                            918 CALL                     1
                            928 STORE_FAST               2 (rtn)
                
-               422         930 LOAD_FAST                0 (self)
+               441         930 LOAD_FAST                0 (self)
                            932 LOAD_METHOD              6 (assertEqual)
                            954 LOAD_FAST                2 (rtn)
                            956 LOAD_CONST              22 ((1, 'oops'))
                            958 PRECALL                  2
                            962 CALL                     2
                            972 POP_TOP
                
-               423         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
+               442         974 LOAD_GLOBAL             11 (NULL + IS_NOT_IN_DB)
                            986 LOAD_FAST                1 (db)
                            988 LOAD_CONST              10 ('person.name')
                            990 LOAD_CONST              11 ('oops')
                            992 KW_NAMES                12
                            994 PRECALL                  3
                            998 CALL                     3
                           1008 STORE_FAST               3 (vldtr)
                
-               424        1010 LOAD_FAST                3 (vldtr)
+               443        1010 LOAD_FAST                3 (vldtr)
                           1012 LOAD_METHOD              8 (set_self_id)
                           1034 LOAD_CONST               7 ('costanza')
                           1036 LOAD_CONST               8 ('T Bone')
                           1038 LOAD_CONST               9 (('name', 'nickname'))
                           1040 BUILD_CONST_KEY_MAP      2
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 POP_TOP
                
-               425        1058 PUSH_NULL
+               444        1058 PUSH_NULL
                           1060 LOAD_FAST                3 (vldtr)
                           1062 LOAD_CONST               5 ('george')
                           1064 PRECALL                  1
                           1068 CALL                     1
                           1078 STORE_FAST               2 (rtn)
                
-               426        1080 LOAD_FAST                0 (self)
+               445        1080 LOAD_FAST                0 (self)
                           1082 LOAD_METHOD              6 (assertEqual)
                           1104 LOAD_FAST                2 (rtn)
                           1106 LOAD_CONST              13 (('george', 'oops'))
                           1108 PRECALL                  2
                           1112 CALL                     2
                           1122 POP_TOP
                
-               427        1124 PUSH_NULL
+               446        1124 PUSH_NULL
                           1126 LOAD_FAST                3 (vldtr)
                           1128 LOAD_CONST               7 ('costanza')
                           1130 PRECALL                  1
                           1134 CALL                     1
                           1144 STORE_FAST               2 (rtn)
                
-               428        1146 LOAD_FAST                0 (self)
+               447        1146 LOAD_FAST                0 (self)
                           1148 LOAD_METHOD              6 (assertEqual)
                           1170 LOAD_FAST                2 (rtn)
                           1172 LOAD_CONST              23 (('costanza', None))
                           1174 PRECALL                  2
                           1178 CALL                     2
                           1188 POP_TOP
                
-               430        1190 LOAD_FAST                1 (db)
+               449        1190 LOAD_FAST                1 (db)
                           1192 LOAD_ATTR                3 (person)
                           1202 LOAD_METHOD              9 (drop)
                           1224 PRECALL                  0
                           1228 CALL                     0
                           1238 POP_TOP
                           1240 LOAD_CONST               0 (None)
                           1242 RETURN_VALUE
@@ -4481,15 +4569,15 @@
                   ('costanza', None)
                names      ('DAL', 'define_table', 'Field', 'person', 'insert', 'IS_NOT_IN_DB', 'assertEqual', 'id', 'set_self_id', 'drop')
                varnames   ('self', 'db', 'rtn', 'vldtr')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_IN_DB'
-               firstlineno 402
+               firstlineno 421
                lnotab
                   0x02011e0162013601380136012c010e010aff100202fe10032c0136012c
                   0132012c0132012c0160012c0140012c012401300116012c0116012c02
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -4529,233 +4617,233 @@
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab000000000000000000640ea6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c01640fa60200
                   00ab02000000000000000001000200740100000000000000000000a60000
                   00ab0000000000000000006410a6010000ab0100000000000000007d017c
                   00a00100000000000000000000000000000000000000007c016411a60200
                   00ab020000000000000000010064005300
-               432           0 RESUME                   0
+               451           0 RESUME                   0
                
-               433           2 PUSH_NULL
+               452           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               3 ('4')
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               434          52 LOAD_FAST                0 (self)
+               453          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               4 ((4, None))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               435          96 PUSH_NULL
+               454          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               5 (4)
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               436         146 LOAD_FAST                0 (self)
+               455         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               4 ((4, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               437         190 PUSH_NULL
+               456         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               1 (1)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               438         240 LOAD_FAST                0 (self)
+               457         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               6 ((1, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               439         284 PUSH_NULL
+               458         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               2 (5)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               440         334 LOAD_FAST                0 (self)
+               459         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               441         378 PUSH_NULL
+               460         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               2 (5)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               442         428 LOAD_FAST                0 (self)
+               461         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               7 ((5, 'Enter an integer between 1 and 4'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               443         472 PUSH_NULL
+               462         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST               8 (3.5)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               444         522 LOAD_FAST                0 (self)
+               463         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST               9 ((3.5, 'Enter an integer between 1 and 4'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               445         566 PUSH_NULL
+               464         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            580 LOAD_CONST               0 (None)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST               3 ('4')
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               446         616 LOAD_FAST                0 (self)
+               465         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST               4 ((4, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               447         660 PUSH_NULL
+               466         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            674 LOAD_CONST               0 (None)
                            676 LOAD_CONST               2 (5)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              10 ('6')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               448         710 LOAD_FAST                0 (self)
+               467         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              11 (('6', 'Enter an integer less than or equal to 4'))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               449         754 PUSH_NULL
+               468         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            768 LOAD_CONST               1 (1)
                            770 LOAD_CONST               0 (None)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST               3 ('4')
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               450         804 LOAD_FAST                0 (self)
+               469         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST               4 ((4, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               451         848 PUSH_NULL
+               470         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              12 ('0')
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               452         898 LOAD_FAST                0 (self)
+               471         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              13 (('0', 'Enter an integer greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               453         942 PUSH_NULL
+               472         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                            956 PRECALL                  0
                            960 CALL                     0
                            970 LOAD_CONST              14 (6)
                            972 PRECALL                  1
                            976 CALL                     1
                            986 STORE_FAST               1 (rtn)
                
-               454         988 LOAD_FAST                0 (self)
+               473         988 LOAD_FAST                0 (self)
                            990 LOAD_METHOD              1 (assertEqual)
                           1012 LOAD_FAST                1 (rtn)
                           1014 LOAD_CONST              15 ((6, None))
                           1016 PRECALL                  2
                           1020 CALL                     2
                           1030 POP_TOP
                
-               455        1032 PUSH_NULL
+               474        1032 PUSH_NULL
                           1034 LOAD_GLOBAL              1 (NULL + IS_INT_IN_RANGE)
                           1046 PRECALL                  0
                           1050 CALL                     0
                           1060 LOAD_CONST              16 ('abc')
                           1062 PRECALL                  1
                           1066 CALL                     1
                           1076 STORE_FAST               1 (rtn)
                
-               456        1078 LOAD_FAST                0 (self)
+               475        1078 LOAD_FAST                0 (self)
                           1080 LOAD_METHOD              1 (assertEqual)
                           1102 LOAD_FAST                1 (rtn)
                           1104 LOAD_CONST              17 (('abc', 'Enter an integer'))
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 POP_TOP
                           1122 LOAD_CONST               0 (None)
@@ -4781,15 +4869,15 @@
                   ('abc', 'Enter an integer')
                names      ('IS_INT_IN_RANGE', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_INT_IN_RANGE'
-               firstlineno 432
+               firstlineno 451
                lnotab
                   0x020132012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
@@ -4850,345 +4938,345 @@
                   00000000000000641aa6010000ab0100000000000000007d017c00a00100
                   000000000000000000000000000000000000007c01641ba6020000ab0200
                   0000000000000001007401000000000000000000006417ac18a6010000ab
                   010000000000000000a00200000000000000000000000000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c01641ca6020000ab0200000000000000
                   00010064005300
-               458           0 RESUME                   0
+               477           0 RESUME                   0
                
-               460           2 PUSH_NULL
+               479           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               461          52 LOAD_FAST                0 (self)
+               480          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               462          96 PUSH_NULL
+               481          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               463         146 LOAD_FAST                0 (self)
+               482         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_CONST               5 ((4.0, None))
                            174 PRECALL                  2
                            178 CALL                     2
                            188 POP_TOP
                
-               464         190 PUSH_NULL
+               483         190 PUSH_NULL
                            192 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            204 LOAD_CONST               1 (1)
                            206 LOAD_CONST               2 (5)
                            208 PRECALL                  2
                            212 CALL                     2
                            222 LOAD_CONST               6 (4)
                            224 PRECALL                  1
                            228 CALL                     1
                            238 STORE_FAST               1 (rtn)
                
-               465         240 LOAD_FAST                0 (self)
+               484         240 LOAD_FAST                0 (self)
                            242 LOAD_METHOD              1 (assertEqual)
                            264 LOAD_FAST                1 (rtn)
                            266 LOAD_CONST               5 ((4.0, None))
                            268 PRECALL                  2
                            272 CALL                     2
                            282 POP_TOP
                
-               466         284 PUSH_NULL
+               485         284 PUSH_NULL
                            286 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            298 LOAD_CONST               1 (1)
                            300 LOAD_CONST               2 (5)
                            302 PRECALL                  2
                            306 CALL                     2
                            316 LOAD_CONST               1 (1)
                            318 PRECALL                  1
                            322 CALL                     1
                            332 STORE_FAST               1 (rtn)
                
-               467         334 LOAD_FAST                0 (self)
+               486         334 LOAD_FAST                0 (self)
                            336 LOAD_METHOD              1 (assertEqual)
                            358 LOAD_FAST                1 (rtn)
                            360 LOAD_CONST               7 ((1.0, None))
                            362 PRECALL                  2
                            366 CALL                     2
                            376 POP_TOP
                
-               468         378 PUSH_NULL
+               487         378 PUSH_NULL
                            380 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            392 LOAD_CONST               1 (1)
                            394 LOAD_CONST               2 (5)
                            396 PRECALL                  2
                            400 CALL                     2
                            410 LOAD_CONST               8 (5.25)
                            412 PRECALL                  1
                            416 CALL                     1
                            426 STORE_FAST               1 (rtn)
                
-               469         428 LOAD_FAST                0 (self)
+               488         428 LOAD_FAST                0 (self)
                            430 LOAD_METHOD              1 (assertEqual)
                            452 LOAD_FAST                1 (rtn)
                            454 LOAD_CONST               9 ((5.25, 'Enter a number between 1 and 5'))
                            456 PRECALL                  2
                            460 CALL                     2
                            470 POP_TOP
                
-               470         472 PUSH_NULL
+               489         472 PUSH_NULL
                            474 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            486 LOAD_CONST               1 (1)
                            488 LOAD_CONST               2 (5)
                            490 PRECALL                  2
                            494 CALL                     2
                            504 LOAD_CONST              10 (6.0)
                            506 PRECALL                  1
                            510 CALL                     1
                            520 STORE_FAST               1 (rtn)
                
-               471         522 LOAD_FAST                0 (self)
+               490         522 LOAD_FAST                0 (self)
                            524 LOAD_METHOD              1 (assertEqual)
                            546 LOAD_FAST                1 (rtn)
                            548 LOAD_CONST              11 ((6.0, 'Enter a number between 1 and 5'))
                            550 PRECALL                  2
                            554 CALL                     2
                            564 POP_TOP
                
-               472         566 PUSH_NULL
+               491         566 PUSH_NULL
                            568 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            580 LOAD_CONST               1 (1)
                            582 LOAD_CONST               2 (5)
                            584 PRECALL                  2
                            588 CALL                     2
                            598 LOAD_CONST              12 (3.5)
                            600 PRECALL                  1
                            604 CALL                     1
                            614 STORE_FAST               1 (rtn)
                
-               473         616 LOAD_FAST                0 (self)
+               492         616 LOAD_FAST                0 (self)
                            618 LOAD_METHOD              1 (assertEqual)
                            640 LOAD_FAST                1 (rtn)
                            642 LOAD_CONST              13 ((3.5, None))
                            644 PRECALL                  2
                            648 CALL                     2
                            658 POP_TOP
                
-               474         660 PUSH_NULL
+               493         660 PUSH_NULL
                            662 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            674 LOAD_CONST               1 (1)
                            676 LOAD_CONST               0 (None)
                            678 PRECALL                  2
                            682 CALL                     2
                            692 LOAD_CONST              12 (3.5)
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               475         710 LOAD_FAST                0 (self)
+               494         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_CONST              13 ((3.5, None))
                            738 PRECALL                  2
                            742 CALL                     2
                            752 POP_TOP
                
-               476         754 PUSH_NULL
+               495         754 PUSH_NULL
                            756 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            768 LOAD_CONST               0 (None)
                            770 LOAD_CONST               2 (5)
                            772 PRECALL                  2
                            776 CALL                     2
                            786 LOAD_CONST              12 (3.5)
                            788 PRECALL                  1
                            792 CALL                     1
                            802 STORE_FAST               1 (rtn)
                
-               477         804 LOAD_FAST                0 (self)
+               496         804 LOAD_FAST                0 (self)
                            806 LOAD_METHOD              1 (assertEqual)
                            828 LOAD_FAST                1 (rtn)
                            830 LOAD_CONST              13 ((3.5, None))
                            832 PRECALL                  2
                            836 CALL                     2
                            846 POP_TOP
                
-               478         848 PUSH_NULL
+               497         848 PUSH_NULL
                            850 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            862 LOAD_CONST               1 (1)
                            864 LOAD_CONST               0 (None)
                            866 PRECALL                  2
                            870 CALL                     2
                            880 LOAD_CONST              14 (0.5)
                            882 PRECALL                  1
                            886 CALL                     1
                            896 STORE_FAST               1 (rtn)
                
-               479         898 LOAD_FAST                0 (self)
+               498         898 LOAD_FAST                0 (self)
                            900 LOAD_METHOD              1 (assertEqual)
                            922 LOAD_FAST                1 (rtn)
                            924 LOAD_CONST              15 ((0.5, 'Enter a number greater than or equal to 1'))
                            926 PRECALL                  2
                            930 CALL                     2
                            940 POP_TOP
                
-               480         942 PUSH_NULL
+               499         942 PUSH_NULL
                            944 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                            956 LOAD_CONST               0 (None)
                            958 LOAD_CONST               2 (5)
                            960 PRECALL                  2
                            964 CALL                     2
                            974 LOAD_CONST              16 (6.5)
                            976 PRECALL                  1
                            980 CALL                     1
                            990 STORE_FAST               1 (rtn)
                
-               481         992 LOAD_FAST                0 (self)
+               500         992 LOAD_FAST                0 (self)
                            994 LOAD_METHOD              1 (assertEqual)
                           1016 LOAD_FAST                1 (rtn)
                           1018 LOAD_CONST              17 ((6.5, 'Enter a number less than or equal to 5'))
                           1020 PRECALL                  2
                           1024 CALL                     2
                           1034 POP_TOP
                
-               482        1036 PUSH_NULL
+               501        1036 PUSH_NULL
                           1038 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1050 PRECALL                  0
                           1054 CALL                     0
                           1064 LOAD_CONST              16 (6.5)
                           1066 PRECALL                  1
                           1070 CALL                     1
                           1080 STORE_FAST               1 (rtn)
                
-               483        1082 LOAD_FAST                0 (self)
+               502        1082 LOAD_FAST                0 (self)
                           1084 LOAD_METHOD              1 (assertEqual)
                           1106 LOAD_FAST                1 (rtn)
                           1108 LOAD_CONST              18 ((6.5, None))
                           1110 PRECALL                  2
                           1114 CALL                     2
                           1124 POP_TOP
                
-               484        1126 PUSH_NULL
+               503        1126 PUSH_NULL
                           1128 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1140 PRECALL                  0
                           1144 CALL                     0
                           1154 LOAD_CONST              19 ('abc')
                           1156 PRECALL                  1
                           1160 CALL                     1
                           1170 STORE_FAST               1 (rtn)
                
-               485        1172 LOAD_FAST                0 (self)
+               504        1172 LOAD_FAST                0 (self)
                           1174 LOAD_METHOD              1 (assertEqual)
                           1196 LOAD_FAST                1 (rtn)
                           1198 LOAD_CONST              20 (('abc', 'Enter a number'))
                           1200 PRECALL                  2
                           1204 CALL                     2
                           1214 POP_TOP
                
-               486        1216 PUSH_NULL
+               505        1216 PUSH_NULL
                           1218 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1230 PRECALL                  0
                           1234 CALL                     0
                           1244 LOAD_CONST              21 ('6,5')
                           1246 PRECALL                  1
                           1250 CALL                     1
                           1260 STORE_FAST               1 (rtn)
                
-               487        1262 LOAD_FAST                0 (self)
+               506        1262 LOAD_FAST                0 (self)
                           1264 LOAD_METHOD              1 (assertEqual)
                           1286 LOAD_FAST                1 (rtn)
                           1288 LOAD_CONST              22 (('6,5', 'Enter a number'))
                           1290 PRECALL                  2
                           1294 CALL                     2
                           1304 POP_TOP
                
-               488        1306 PUSH_NULL
+               507        1306 PUSH_NULL
                           1308 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1320 LOAD_CONST              23 (',')
                           1322 KW_NAMES                24
                           1324 PRECALL                  1
                           1328 CALL                     1
                           1338 LOAD_CONST              25 ('6.5')
                           1340 PRECALL                  1
                           1344 CALL                     1
                           1354 STORE_FAST               1 (rtn)
                
-               489        1356 LOAD_FAST                0 (self)
+               508        1356 LOAD_FAST                0 (self)
                           1358 LOAD_METHOD              1 (assertEqual)
                           1380 LOAD_FAST                1 (rtn)
                           1382 LOAD_CONST              18 ((6.5, None))
                           1384 PRECALL                  2
                           1388 CALL                     2
                           1398 POP_TOP
                
-               491        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               510        1400 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1412 LOAD_CONST              23 (',')
                           1414 KW_NAMES                24
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_METHOD              2 (formatter)
                           1452 LOAD_CONST               0 (None)
                           1454 PRECALL                  1
                           1458 CALL                     1
                           1468 STORE_FAST               1 (rtn)
                
-               492        1470 LOAD_FAST                0 (self)
+               511        1470 LOAD_FAST                0 (self)
                           1472 LOAD_METHOD              1 (assertEqual)
                           1494 LOAD_FAST                1 (rtn)
                           1496 LOAD_CONST               0 (None)
                           1498 PRECALL                  2
                           1502 CALL                     2
                           1512 POP_TOP
                
-               493        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               512        1514 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1526 LOAD_CONST              23 (',')
                           1528 KW_NAMES                24
                           1530 PRECALL                  1
                           1534 CALL                     1
                           1544 LOAD_METHOD              2 (formatter)
                           1566 LOAD_CONST              26 (0.25)
                           1568 PRECALL                  1
                           1572 CALL                     1
                           1582 STORE_FAST               1 (rtn)
                
-               494        1584 LOAD_FAST                0 (self)
+               513        1584 LOAD_FAST                0 (self)
                           1586 LOAD_METHOD              1 (assertEqual)
                           1608 LOAD_FAST                1 (rtn)
                           1610 LOAD_CONST              27 ('0,25')
                           1612 PRECALL                  2
                           1616 CALL                     2
                           1626 POP_TOP
                
-               496        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
+               515        1628 LOAD_GLOBAL              1 (NULL + IS_FLOAT_IN_RANGE)
                           1640 LOAD_CONST              23 (',')
                           1642 KW_NAMES                24
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_METHOD              2 (formatter)
                           1680 LOAD_CONST               1 (1)
                           1682 PRECALL                  1
                           1686 CALL                     1
                           1696 STORE_FAST               1 (rtn)
                
-               497        1698 LOAD_FAST                0 (self)
+               516        1698 LOAD_FAST                0 (self)
                           1700 LOAD_METHOD              1 (assertEqual)
                           1722 LOAD_FAST                1 (rtn)
                           1724 LOAD_CONST              28 ('1,00')
                           1726 PRECALL                  2
                           1730 CALL                     2
                           1740 POP_TOP
                           1742 LOAD_CONST               0 (None)
@@ -5225,15 +5313,15 @@
                   '1,00'
                names      ('IS_FLOAT_IN_RANGE', 'assertEqual', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FLOAT_IN_RANGE'
-               firstlineno 458
+               firstlineno 477
                lnotab
                   0x020232012c0132012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0132012c0132012c0132012c012e012c012e012c012e012c0132
                   012c0246012c0146012c024601
             code
                argcount  : 1
                nlocals   : 2
@@ -5335,560 +5423,560 @@
                   006400a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016400a6020000ab0200000000000000
                   0001007401000000000000000000006424ac25a6010000ab010000000000
                   000000a00400000000000000000000000000000000000000006426a60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c016427a6020000ab0200000000000000000100640053
                   00
-               499           0 RESUME                   0
+               518           0 RESUME                   0
                
-               501           2 PUSH_NULL
+               520           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                             16 LOAD_CONST               1 (1)
                             18 LOAD_CONST               2 (5)
                             20 PRECALL                  2
                             24 CALL                     2
                             34 LOAD_CONST               0 (None)
                             36 PRECALL                  1
                             40 CALL                     1
                             50 STORE_FAST               1 (rtn)
                
-               502          52 LOAD_FAST                0 (self)
+               521          52 LOAD_FAST                0 (self)
                             54 LOAD_METHOD              1 (assertEqual)
                             76 LOAD_FAST                1 (rtn)
                             78 LOAD_CONST               3 ((None, 'Enter a number between 1 and 5'))
                             80 PRECALL                  2
                             84 CALL                     2
                             94 POP_TOP
                
-               503          96 PUSH_NULL
+               522          96 PUSH_NULL
                             98 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            110 LOAD_CONST               1 (1)
                            112 LOAD_CONST               2 (5)
                            114 PRECALL                  2
                            118 CALL                     2
                            128 LOAD_CONST               4 ('4')
                            130 PRECALL                  1
                            134 CALL                     1
                            144 STORE_FAST               1 (rtn)
                
-               504         146 LOAD_FAST                0 (self)
+               523         146 LOAD_FAST                0 (self)
                            148 LOAD_METHOD              1 (assertEqual)
                            170 LOAD_FAST                1 (rtn)
                            172 LOAD_GLOBAL              5 (NULL + decimal)
                            184 LOAD_ATTR                3 (Decimal)
                            194 LOAD_CONST               4 ('4')
                            196 PRECALL                  1
                            200 CALL                     1
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               505         230 PUSH_NULL
+               524         230 PUSH_NULL
                            232 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            244 LOAD_CONST               1 (1)
                            246 LOAD_CONST               2 (5)
                            248 PRECALL                  2
                            252 CALL                     2
                            262 LOAD_CONST               5 (4)
                            264 PRECALL                  1
                            268 CALL                     1
                            278 STORE_FAST               1 (rtn)
                
-               506         280 LOAD_FAST                0 (self)
+               525         280 LOAD_FAST                0 (self)
                            282 LOAD_METHOD              1 (assertEqual)
                            304 LOAD_FAST                1 (rtn)
                            306 LOAD_GLOBAL              5 (NULL + decimal)
                            318 LOAD_ATTR                3 (Decimal)
                            328 LOAD_CONST               4 ('4')
                            330 PRECALL                  1
                            334 CALL                     1
                            344 LOAD_CONST               0 (None)
                            346 BUILD_TUPLE              2
                            348 PRECALL                  2
                            352 CALL                     2
                            362 POP_TOP
                
-               507         364 PUSH_NULL
+               526         364 PUSH_NULL
                            366 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            378 LOAD_CONST               1 (1)
                            380 LOAD_CONST               2 (5)
                            382 PRECALL                  2
                            386 CALL                     2
                            396 LOAD_CONST               1 (1)
                            398 PRECALL                  1
                            402 CALL                     1
                            412 STORE_FAST               1 (rtn)
                
-               508         414 LOAD_FAST                0 (self)
+               527         414 LOAD_FAST                0 (self)
                            416 LOAD_METHOD              1 (assertEqual)
                            438 LOAD_FAST                1 (rtn)
                            440 LOAD_GLOBAL              5 (NULL + decimal)
                            452 LOAD_ATTR                3 (Decimal)
                            462 LOAD_CONST               6 ('1')
                            464 PRECALL                  1
                            468 CALL                     1
                            478 LOAD_CONST               0 (None)
                            480 BUILD_TUPLE              2
                            482 PRECALL                  2
                            486 CALL                     2
                            496 POP_TOP
                
-               509         498 PUSH_NULL
+               528         498 PUSH_NULL
                            500 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            512 LOAD_CONST               1 (1)
                            514 LOAD_CONST               2 (5)
                            516 PRECALL                  2
                            520 CALL                     2
                            530 LOAD_CONST               7 (5.25)
                            532 PRECALL                  1
                            536 CALL                     1
                            546 STORE_FAST               1 (rtn)
                
-               510         548 LOAD_FAST                0 (self)
+               529         548 LOAD_FAST                0 (self)
                            550 LOAD_METHOD              1 (assertEqual)
                            572 LOAD_FAST                1 (rtn)
                            574 LOAD_CONST               8 ((5.25, 'Enter a number between 1 and 5'))
                            576 PRECALL                  2
                            580 CALL                     2
                            590 POP_TOP
                
-               511         592 PUSH_NULL
+               530         592 PUSH_NULL
                            594 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            606 LOAD_CONST               7 (5.25)
                            608 LOAD_CONST               9 (6)
                            610 PRECALL                  2
                            614 CALL                     2
                            624 LOAD_CONST               7 (5.25)
                            626 PRECALL                  1
                            630 CALL                     1
                            640 STORE_FAST               1 (rtn)
                
-               512         642 LOAD_FAST                0 (self)
+               531         642 LOAD_FAST                0 (self)
                            644 LOAD_METHOD              1 (assertEqual)
                            666 LOAD_FAST                1 (rtn)
                            668 LOAD_GLOBAL              5 (NULL + decimal)
                            680 LOAD_ATTR                3 (Decimal)
                            690 LOAD_CONST              10 ('5.25')
                            692 PRECALL                  1
                            696 CALL                     1
                            706 LOAD_CONST               0 (None)
                            708 BUILD_TUPLE              2
                            710 PRECALL                  2
                            714 CALL                     2
                            724 POP_TOP
                
-               513         726 PUSH_NULL
+               532         726 PUSH_NULL
                            728 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            740 LOAD_CONST               7 (5.25)
                            742 LOAD_CONST               9 (6)
                            744 PRECALL                  2
                            748 CALL                     2
                            758 LOAD_CONST              10 ('5.25')
                            760 PRECALL                  1
                            764 CALL                     1
                            774 STORE_FAST               1 (rtn)
                
-               514         776 LOAD_FAST                0 (self)
+               533         776 LOAD_FAST                0 (self)
                            778 LOAD_METHOD              1 (assertEqual)
                            800 LOAD_FAST                1 (rtn)
                            802 LOAD_GLOBAL              5 (NULL + decimal)
                            814 LOAD_ATTR                3 (Decimal)
                            824 LOAD_CONST              10 ('5.25')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 LOAD_CONST               0 (None)
                            842 BUILD_TUPLE              2
                            844 PRECALL                  2
                            848 CALL                     2
                            858 POP_TOP
                
-               515         860 PUSH_NULL
+               534         860 PUSH_NULL
                            862 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            874 LOAD_CONST               1 (1)
                            876 LOAD_CONST               2 (5)
                            878 PRECALL                  2
                            882 CALL                     2
                            892 LOAD_CONST              11 (6.0)
                            894 PRECALL                  1
                            898 CALL                     1
                            908 STORE_FAST               1 (rtn)
                
-               516         910 LOAD_FAST                0 (self)
+               535         910 LOAD_FAST                0 (self)
                            912 LOAD_METHOD              1 (assertEqual)
                            934 LOAD_FAST                1 (rtn)
                            936 LOAD_CONST              12 ((6.0, 'Enter a number between 1 and 5'))
                            938 PRECALL                  2
                            942 CALL                     2
                            952 POP_TOP
                
-               517         954 PUSH_NULL
+               536         954 PUSH_NULL
                            956 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                            968 LOAD_CONST               1 (1)
                            970 LOAD_CONST               2 (5)
                            972 PRECALL                  2
                            976 CALL                     2
                            986 LOAD_CONST              13 (3.5)
                            988 PRECALL                  1
                            992 CALL                     1
                           1002 STORE_FAST               1 (rtn)
                
-               518        1004 LOAD_FAST                0 (self)
+               537        1004 LOAD_FAST                0 (self)
                           1006 LOAD_METHOD              1 (assertEqual)
                           1028 LOAD_FAST                1 (rtn)
                           1030 LOAD_GLOBAL              5 (NULL + decimal)
                           1042 LOAD_ATTR                3 (Decimal)
                           1052 LOAD_CONST              14 ('3.5')
                           1054 PRECALL                  1
                           1058 CALL                     1
                           1068 LOAD_CONST               0 (None)
                           1070 BUILD_TUPLE              2
                           1072 PRECALL                  2
                           1076 CALL                     2
                           1086 POP_TOP
                
-               519        1088 PUSH_NULL
+               538        1088 PUSH_NULL
                           1090 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1102 LOAD_CONST              15 (1.5)
                           1104 LOAD_CONST              16 (5.5)
                           1106 PRECALL                  2
                           1110 CALL                     2
                           1120 LOAD_CONST              13 (3.5)
                           1122 PRECALL                  1
                           1126 CALL                     1
                           1136 STORE_FAST               1 (rtn)
                
-               520        1138 LOAD_FAST                0 (self)
+               539        1138 LOAD_FAST                0 (self)
                           1140 LOAD_METHOD              1 (assertEqual)
                           1162 LOAD_FAST                1 (rtn)
                           1164 LOAD_GLOBAL              5 (NULL + decimal)
                           1176 LOAD_ATTR                3 (Decimal)
                           1186 LOAD_CONST              14 ('3.5')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 LOAD_CONST               0 (None)
                           1204 BUILD_TUPLE              2
                           1206 PRECALL                  2
                           1210 CALL                     2
                           1220 POP_TOP
                
-               521        1222 PUSH_NULL
+               540        1222 PUSH_NULL
                           1224 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1236 LOAD_CONST              15 (1.5)
                           1238 LOAD_CONST              16 (5.5)
                           1240 PRECALL                  2
                           1244 CALL                     2
                           1254 LOAD_CONST              17 (6.5)
                           1256 PRECALL                  1
                           1260 CALL                     1
                           1270 STORE_FAST               1 (rtn)
                
-               522        1272 LOAD_FAST                0 (self)
+               541        1272 LOAD_FAST                0 (self)
                           1274 LOAD_METHOD              1 (assertEqual)
                           1296 LOAD_FAST                1 (rtn)
                           1298 LOAD_CONST              18 ((6.5, 'Enter a number between 1.5 and 5.5'))
                           1300 PRECALL                  2
                           1304 CALL                     2
                           1314 POP_TOP
                
-               523        1316 PUSH_NULL
+               542        1316 PUSH_NULL
                           1318 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1330 LOAD_CONST              15 (1.5)
                           1332 LOAD_CONST               0 (None)
                           1334 PRECALL                  2
                           1338 CALL                     2
                           1348 LOAD_CONST              17 (6.5)
                           1350 PRECALL                  1
                           1354 CALL                     1
                           1364 STORE_FAST               1 (rtn)
                
-               524        1366 LOAD_FAST                0 (self)
+               543        1366 LOAD_FAST                0 (self)
                           1368 LOAD_METHOD              1 (assertEqual)
                           1390 LOAD_FAST                1 (rtn)
                           1392 LOAD_GLOBAL              5 (NULL + decimal)
                           1404 LOAD_ATTR                3 (Decimal)
                           1414 LOAD_CONST              19 ('6.5')
                           1416 PRECALL                  1
                           1420 CALL                     1
                           1430 LOAD_CONST               0 (None)
                           1432 BUILD_TUPLE              2
                           1434 PRECALL                  2
                           1438 CALL                     2
                           1448 POP_TOP
                
-               525        1450 PUSH_NULL
+               544        1450 PUSH_NULL
                           1452 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1464 LOAD_CONST              15 (1.5)
                           1466 LOAD_CONST               0 (None)
                           1468 PRECALL                  2
                           1472 CALL                     2
                           1482 LOAD_CONST              20 (0.5)
                           1484 PRECALL                  1
                           1488 CALL                     1
                           1498 STORE_FAST               1 (rtn)
                
-               526        1500 LOAD_FAST                0 (self)
+               545        1500 LOAD_FAST                0 (self)
                           1502 LOAD_METHOD              1 (assertEqual)
                           1524 LOAD_FAST                1 (rtn)
                           1526 LOAD_CONST              21 ((0.5, 'Enter a number greater than or equal to 1.5'))
                           1528 PRECALL                  2
                           1532 CALL                     2
                           1542 POP_TOP
                
-               527        1544 PUSH_NULL
+               546        1544 PUSH_NULL
                           1546 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1558 LOAD_CONST               0 (None)
                           1560 LOAD_CONST              16 (5.5)
                           1562 PRECALL                  2
                           1566 CALL                     2
                           1576 LOAD_CONST              22 (4.5)
                           1578 PRECALL                  1
                           1582 CALL                     1
                           1592 STORE_FAST               1 (rtn)
                
-               528        1594 LOAD_FAST                0 (self)
+               547        1594 LOAD_FAST                0 (self)
                           1596 LOAD_METHOD              1 (assertEqual)
                           1618 LOAD_FAST                1 (rtn)
                           1620 LOAD_GLOBAL              5 (NULL + decimal)
                           1632 LOAD_ATTR                3 (Decimal)
                           1642 LOAD_CONST              23 ('4.5')
                           1644 PRECALL                  1
                           1648 CALL                     1
                           1658 LOAD_CONST               0 (None)
                           1660 BUILD_TUPLE              2
                           1662 PRECALL                  2
                           1666 CALL                     2
                           1676 POP_TOP
                
-               529        1678 PUSH_NULL
+               548        1678 PUSH_NULL
                           1680 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1692 LOAD_CONST               0 (None)
                           1694 LOAD_CONST              16 (5.5)
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 LOAD_CONST              17 (6.5)
                           1712 PRECALL                  1
                           1716 CALL                     1
                           1726 STORE_FAST               1 (rtn)
                
-               530        1728 LOAD_FAST                0 (self)
+               549        1728 LOAD_FAST                0 (self)
                           1730 LOAD_METHOD              1 (assertEqual)
                           1752 LOAD_FAST                1 (rtn)
                           1754 LOAD_CONST              24 ((6.5, 'Enter a number less than or equal to 5.5'))
                           1756 PRECALL                  2
                           1760 CALL                     2
                           1770 POP_TOP
                
-               531        1772 PUSH_NULL
+               550        1772 PUSH_NULL
                           1774 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1786 PRECALL                  0
                           1790 CALL                     0
                           1800 LOAD_CONST              17 (6.5)
                           1802 PRECALL                  1
                           1806 CALL                     1
                           1816 STORE_FAST               1 (rtn)
                
-               532        1818 LOAD_FAST                0 (self)
+               551        1818 LOAD_FAST                0 (self)
                           1820 LOAD_METHOD              1 (assertEqual)
                           1842 LOAD_FAST                1 (rtn)
                           1844 LOAD_GLOBAL              5 (NULL + decimal)
                           1856 LOAD_ATTR                3 (Decimal)
                           1866 LOAD_CONST              19 ('6.5')
                           1868 PRECALL                  1
                           1872 CALL                     1
                           1882 LOAD_CONST               0 (None)
                           1884 BUILD_TUPLE              2
                           1886 PRECALL                  2
                           1890 CALL                     2
                           1900 POP_TOP
                
-               533        1902 PUSH_NULL
+               552        1902 PUSH_NULL
                           1904 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           1916 LOAD_CONST              25 (0)
                           1918 LOAD_CONST              26 (99)
                           1920 PRECALL                  2
                           1924 CALL                     2
                           1934 LOAD_CONST              27 (123.123)
                           1936 PRECALL                  1
                           1940 CALL                     1
                           1950 STORE_FAST               1 (rtn)
                
-               534        1952 LOAD_FAST                0 (self)
+               553        1952 LOAD_FAST                0 (self)
                           1954 LOAD_METHOD              1 (assertEqual)
                           1976 LOAD_FAST                1 (rtn)
                           1978 LOAD_CONST              28 ((123.123, 'Enter a number between 0 and 99'))
                           1980 PRECALL                  2
                           1984 CALL                     2
                           1994 POP_TOP
                
-               535        1996 PUSH_NULL
+               554        1996 PUSH_NULL
                           1998 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2010 LOAD_CONST              25 (0)
                           2012 LOAD_CONST              26 (99)
                           2014 PRECALL                  2
                           2018 CALL                     2
                           2028 LOAD_CONST              29 ('123.123')
                           2030 PRECALL                  1
                           2034 CALL                     1
                           2044 STORE_FAST               1 (rtn)
                
-               536        2046 LOAD_FAST                0 (self)
+               555        2046 LOAD_FAST                0 (self)
                           2048 LOAD_METHOD              1 (assertEqual)
                           2070 LOAD_FAST                1 (rtn)
                           2072 LOAD_CONST              30 (('123.123', 'Enter a number between 0 and 99'))
                           2074 PRECALL                  2
                           2078 CALL                     2
                           2088 POP_TOP
                
-               537        2090 PUSH_NULL
+               556        2090 PUSH_NULL
                           2092 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2104 LOAD_CONST              25 (0)
                           2106 LOAD_CONST              26 (99)
                           2108 PRECALL                  2
                           2112 CALL                     2
                           2122 LOAD_CONST              31 ('12.34')
                           2124 PRECALL                  1
                           2128 CALL                     1
                           2138 STORE_FAST               1 (rtn)
                
-               538        2140 LOAD_FAST                0 (self)
+               557        2140 LOAD_FAST                0 (self)
                           2142 LOAD_METHOD              1 (assertEqual)
                           2164 LOAD_FAST                1 (rtn)
                           2166 LOAD_GLOBAL              5 (NULL + decimal)
                           2178 LOAD_ATTR                3 (Decimal)
                           2188 LOAD_CONST              31 ('12.34')
                           2190 PRECALL                  1
                           2194 CALL                     1
                           2204 LOAD_CONST               0 (None)
                           2206 BUILD_TUPLE              2
                           2208 PRECALL                  2
                           2212 CALL                     2
                           2222 POP_TOP
                
-               539        2224 PUSH_NULL
+               558        2224 PUSH_NULL
                           2226 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2238 PRECALL                  0
                           2242 CALL                     0
                           2252 LOAD_CONST              32 ('abc')
                           2254 PRECALL                  1
                           2258 CALL                     1
                           2268 STORE_FAST               1 (rtn)
                
-               540        2270 LOAD_FAST                0 (self)
+               559        2270 LOAD_FAST                0 (self)
                           2272 LOAD_METHOD              1 (assertEqual)
                           2294 LOAD_FAST                1 (rtn)
                           2296 LOAD_CONST              33 (('abc', 'Enter a number'))
                           2298 PRECALL                  2
                           2302 CALL                     2
                           2312 POP_TOP
                
-               541        2314 PUSH_NULL
+               560        2314 PUSH_NULL
                           2316 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2328 PRECALL                  0
                           2332 CALL                     0
                           2342 LOAD_CONST              34 ('6,5')
                           2344 PRECALL                  1
                           2348 CALL                     1
                           2358 STORE_FAST               1 (rtn)
                
-               542        2360 LOAD_FAST                0 (self)
+               561        2360 LOAD_FAST                0 (self)
                           2362 LOAD_METHOD              1 (assertEqual)
                           2384 LOAD_FAST                1 (rtn)
                           2386 LOAD_CONST              35 (('6,5', 'Enter a number'))
                           2388 PRECALL                  2
                           2392 CALL                     2
                           2402 POP_TOP
                
-               543        2404 PUSH_NULL
+               562        2404 PUSH_NULL
                           2406 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2418 LOAD_CONST              36 (',')
                           2420 KW_NAMES                37
                           2422 PRECALL                  1
                           2426 CALL                     1
                           2436 LOAD_CONST              19 ('6.5')
                           2438 PRECALL                  1
                           2442 CALL                     1
                           2452 STORE_FAST               1 (rtn)
                
-               544        2454 LOAD_FAST                0 (self)
+               563        2454 LOAD_FAST                0 (self)
                           2456 LOAD_METHOD              1 (assertEqual)
                           2478 LOAD_FAST                1 (rtn)
                           2480 LOAD_GLOBAL              5 (NULL + decimal)
                           2492 LOAD_ATTR                3 (Decimal)
                           2502 LOAD_CONST              19 ('6.5')
                           2504 PRECALL                  1
                           2508 CALL                     1
                           2518 LOAD_CONST               0 (None)
                           2520 BUILD_TUPLE              2
                           2522 PRECALL                  2
                           2526 CALL                     2
                           2536 POP_TOP
                
-               545        2538 PUSH_NULL
+               564        2538 PUSH_NULL
                           2540 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2552 LOAD_CONST               1 (1)
                           2554 LOAD_CONST               2 (5)
                           2556 PRECALL                  2
                           2560 CALL                     2
                           2570 LOAD_GLOBAL              5 (NULL + decimal)
                           2582 LOAD_ATTR                3 (Decimal)
                           2592 LOAD_CONST               4 ('4')
                           2594 PRECALL                  1
                           2598 CALL                     1
                           2608 PRECALL                  1
                           2612 CALL                     1
                           2622 STORE_FAST               1 (rtn)
                
-               546        2624 LOAD_FAST                0 (self)
+               565        2624 LOAD_FAST                0 (self)
                           2626 LOAD_METHOD              1 (assertEqual)
                           2648 LOAD_FAST                1 (rtn)
                           2650 LOAD_GLOBAL              5 (NULL + decimal)
                           2662 LOAD_ATTR                3 (Decimal)
                           2672 LOAD_CONST               4 ('4')
                           2674 PRECALL                  1
                           2678 CALL                     1
                           2688 LOAD_CONST               0 (None)
                           2690 BUILD_TUPLE              2
                           2692 PRECALL                  2
                           2696 CALL                     2
                           2706 POP_TOP
                
-               548        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               567        2708 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2720 LOAD_CONST              36 (',')
                           2722 KW_NAMES                37
                           2724 PRECALL                  1
                           2728 CALL                     1
                           2738 LOAD_METHOD              4 (formatter)
                           2760 LOAD_CONST               0 (None)
                           2762 PRECALL                  1
                           2766 CALL                     1
                           2776 STORE_FAST               1 (rtn)
                
-               549        2778 LOAD_FAST                0 (self)
+               568        2778 LOAD_FAST                0 (self)
                           2780 LOAD_METHOD              1 (assertEqual)
                           2802 LOAD_FAST                1 (rtn)
                           2804 LOAD_CONST               0 (None)
                           2806 PRECALL                  2
                           2810 CALL                     2
                           2820 POP_TOP
                
-               550        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
+               569        2822 LOAD_GLOBAL              1 (NULL + IS_DECIMAL_IN_RANGE)
                           2834 LOAD_CONST              36 (',')
                           2836 KW_NAMES                37
                           2838 PRECALL                  1
                           2842 CALL                     1
                           2852 LOAD_METHOD              4 (formatter)
                           2874 LOAD_CONST              38 (0.25)
                           2876 PRECALL                  1
                           2880 CALL                     1
                           2890 STORE_FAST               1 (rtn)
                
-               551        2892 LOAD_FAST                0 (self)
+               570        2892 LOAD_FAST                0 (self)
                           2894 LOAD_METHOD              1 (assertEqual)
                           2916 LOAD_FAST                1 (rtn)
                           2918 LOAD_CONST              39 ('0,25')
                           2920 PRECALL                  2
                           2924 CALL                     2
                           2934 POP_TOP
                           2936 LOAD_CONST               0 (None)
@@ -5936,15 +6024,15 @@
                   '0,25'
                names      ('IS_DECIMAL_IN_RANGE', 'assertEqual', 'decimal', 'Decimal', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DECIMAL_IN_RANGE'
-               firstlineno 499
+               firstlineno 518
                lnotab
                   0x020232012c0132015401320154013201540132012c0132015401320154
                   0132012c01320154013201540132012c013201540132012c013201540132
                   012c012e01540132012c0132012c01320154012e012c012e012c01320154
                   015601540246012c014601
             code
                argcount  : 1
@@ -5988,238 +6076,238 @@
                   020000000000000000010002007401000000000000000000006416ac14a6
                   010000ab0100000000000000006417a6010000ab0100000000000000007d
                   017c00a00100000000000000000000000000000000000000007c016418a6
                   020000ab0200000000000000000100020074010000000000000000000064
                   13ac14a6010000ab0100000000000000006419a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   01641aa6020000ab020000000000000000010064005300
-               553           0 RESUME                   0
+               572           0 RESUME                   0
                
-               554           2 PUSH_NULL
+               573           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 (1)
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               555          48 LOAD_FAST                0 (self)
+               574          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 ((1, None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               556          92 PUSH_NULL
+               575          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (0)
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               557         138 LOAD_FAST                0 (self)
+               576         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((0, None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               558         182 PUSH_NULL
+               577         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('x')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               559         228 LOAD_FAST                0 (self)
+               578         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('x', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               560         272 PUSH_NULL
+               579         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 (' x ')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               561         318 LOAD_FAST                0 (self)
+               580         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 ((' x ', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               562         362 PUSH_NULL
+               581         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               0 (None)
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               563         408 LOAD_FAST                0 (self)
+               582         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               9 ((None, 'Enter a value'))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               564         452 PUSH_NULL
+               583         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              10 ('')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               565         498 LOAD_FAST                0 (self)
+               584         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              11 (('', 'Enter a value'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               566         542 PUSH_NULL
+               585         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              12 (b'')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               567         588 LOAD_FAST                0 (self)
+               586         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              13 ((b'', 'Enter a value'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               568         632 PUSH_NULL
+               587         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              14 ('  ')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               569         678 LOAD_FAST                0 (self)
+               588         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              15 (('  ', 'Enter a value'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               570         722 PUSH_NULL
+               589         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              16 (' \n\t')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               571         768 LOAD_FAST                0 (self)
+               590         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              17 ((' \n\t', 'Enter a value'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               572         812 PUSH_NULL
+               591         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 BUILD_LIST               0
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               573         858 LOAD_FAST                0 (self)
+               592         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 BUILD_LIST               0
                            886 LOAD_CONST              18 ('Enter a value')
                            888 BUILD_TUPLE              2
                            890 PRECALL                  2
                            894 CALL                     2
                            904 POP_TOP
                
-               574         906 PUSH_NULL
+               593         906 PUSH_NULL
                            908 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                            920 LOAD_CONST              19 ('def')
                            922 KW_NAMES                20
                            924 PRECALL                  1
                            928 CALL                     1
                            938 LOAD_CONST              19 ('def')
                            940 PRECALL                  1
                            944 CALL                     1
                            954 STORE_FAST               1 (rtn)
                
-               575         956 LOAD_FAST                0 (self)
+               594         956 LOAD_FAST                0 (self)
                            958 LOAD_METHOD              1 (assertEqual)
                            980 LOAD_FAST                1 (rtn)
                            982 LOAD_CONST              21 (('def', 'Enter a value'))
                            984 PRECALL                  2
                            988 CALL                     2
                            998 POP_TOP
                
-               576        1000 PUSH_NULL
+               595        1000 PUSH_NULL
                           1002 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1014 LOAD_CONST              22 ('de[fg]')
                           1016 KW_NAMES                20
                           1018 PRECALL                  1
                           1022 CALL                     1
                           1032 LOAD_CONST              23 ('deg')
                           1034 PRECALL                  1
                           1038 CALL                     1
                           1048 STORE_FAST               1 (rtn)
                
-               577        1050 LOAD_FAST                0 (self)
+               596        1050 LOAD_FAST                0 (self)
                           1052 LOAD_METHOD              1 (assertEqual)
                           1074 LOAD_FAST                1 (rtn)
                           1076 LOAD_CONST              24 (('deg', 'Enter a value'))
                           1078 PRECALL                  2
                           1082 CALL                     2
                           1092 POP_TOP
                
-               578        1094 PUSH_NULL
+               597        1094 PUSH_NULL
                           1096 LOAD_GLOBAL              1 (NULL + IS_NOT_EMPTY)
                           1108 LOAD_CONST              19 ('def')
                           1110 KW_NAMES                20
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 LOAD_CONST              25 ('abc')
                           1128 PRECALL                  1
                           1132 CALL                     1
                           1142 STORE_FAST               1 (rtn)
                
-               579        1144 LOAD_FAST                0 (self)
+               598        1144 LOAD_FAST                0 (self)
                           1146 LOAD_METHOD              1 (assertEqual)
                           1168 LOAD_FAST                1 (rtn)
                           1170 LOAD_CONST              26 (('abc', None))
                           1172 PRECALL                  2
                           1176 CALL                     2
                           1186 POP_TOP
                           1188 LOAD_CONST               0 (None)
@@ -6254,15 +6342,15 @@
                   ('abc', None)
                names      ('IS_NOT_EMPTY', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_NOT_EMPTY'
-               firstlineno 553
+               firstlineno 572
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e01300132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
@@ -6277,77 +6365,77 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006407a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016408a6020000ab0200000000000000
                   00010064005300
-               581           0 RESUME                   0
+               600           0 RESUME                   0
                
-               582           2 PUSH_NULL
+               601           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('1')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               583          48 LOAD_FAST                0 (self)
+               602          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('1', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               584          92 PUSH_NULL
+               603          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               585         138 LOAD_FAST                0 (self)
+               604         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               586         182 PUSH_NULL
+               605         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('A_a')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               587         228 LOAD_FAST                0 (self)
+               606         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('A_a', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               588         272 PUSH_NULL
+               607         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_ALPHANUMERIC)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('!')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               589         318 LOAD_FAST                0 (self)
+               608         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('!', 'Enter only letters, numbers, and underscore'))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                            362 LOAD_CONST               0 (None)
@@ -6364,15 +6452,15 @@
                   ('!', 'Enter only letters, numbers, and underscore')
                names      ('IS_ALPHANUMERIC', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_ALPHANUMERIC'
-               firstlineno 581
+               firstlineno 600
                lnotab 0x02012e012c012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -6472,584 +6560,584 @@
                   01643fa6020000ab02000000000000000001000200740100000000000000
                   0000006440ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016443a6020000ab020000000000000000010002007401000000
                   00000000000000a6000000ab0000000000000000006444a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016445a6020000ab020000000000000000010064005300
-               591           0 RESUME                   0
+               610           0 RESUME                   0
                
-               592           2 PUSH_NULL
+               611           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('a@b.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               593          48 LOAD_FAST                0 (self)
+               612          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('a@b.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               594          92 PUSH_NULL
+               613          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('abc@def.com')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               595         138 LOAD_FAST                0 (self)
+               614         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 (('abc@def.com', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               596         182 PUSH_NULL
+               615         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('abc@3def.com')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               597         228 LOAD_FAST                0 (self)
+               616         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('abc@3def.com', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               598         272 PUSH_NULL
+               617         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               7 ('abc@def.us')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               599         318 LOAD_FAST                0 (self)
+               618         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               8 (('abc@def.us', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               600         362 PUSH_NULL
+               619         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               9 ('abc@d_-f.us')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               601         408 LOAD_FAST                0 (self)
+               620         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST              10 (('abc@d_-f.us', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               602         452 PUSH_NULL
+               621         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST              11 ('@def.com')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               603         498 LOAD_FAST                0 (self)
+               622         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST              12 (('@def.com', 'Enter a valid email address'))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               604         542 PUSH_NULL
+               623         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST              13 ('"abc@def".com')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               605         588 LOAD_FAST                0 (self)
+               624         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              14 (('"abc@def".com', 'Enter a valid email address'))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               606         632 PUSH_NULL
+               625         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              15 ('abc+def.com')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               607         678 LOAD_FAST                0 (self)
+               626         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              16 (('abc+def.com', 'Enter a valid email address'))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               608         722 PUSH_NULL
+               627         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              17 ('abc@def.x')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               609         768 LOAD_FAST                0 (self)
+               628         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST              18 (('abc@def.x', 'Enter a valid email address'))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               610         812 PUSH_NULL
+               629         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              19 ('abc@def.12')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               611         858 LOAD_FAST                0 (self)
+               630         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              20 (('abc@def.12', 'Enter a valid email address'))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               612         902 PUSH_NULL
+               631         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              21 ('abc@def..com')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               613         948 LOAD_FAST                0 (self)
+               632         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              22 (('abc@def..com', 'Enter a valid email address'))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               614         992 PUSH_NULL
+               633         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1006 PRECALL                  0
                           1010 CALL                     0
                           1020 LOAD_CONST              23 ('abc@.def.com')
                           1022 PRECALL                  1
                           1026 CALL                     1
                           1036 STORE_FAST               1 (rtn)
                
-               615        1038 LOAD_FAST                0 (self)
+               634        1038 LOAD_FAST                0 (self)
                           1040 LOAD_METHOD              1 (assertEqual)
                           1062 LOAD_FAST                1 (rtn)
                           1064 LOAD_CONST              24 (('abc@.def.com', 'Enter a valid email address'))
                           1066 PRECALL                  2
                           1070 CALL                     2
                           1080 POP_TOP
                
-               616        1082 PUSH_NULL
+               635        1082 PUSH_NULL
                           1084 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1096 PRECALL                  0
                           1100 CALL                     0
                           1110 LOAD_CONST              25 ('abc@def.c_m')
                           1112 PRECALL                  1
                           1116 CALL                     1
                           1126 STORE_FAST               1 (rtn)
                
-               617        1128 LOAD_FAST                0 (self)
+               636        1128 LOAD_FAST                0 (self)
                           1130 LOAD_METHOD              1 (assertEqual)
                           1152 LOAD_FAST                1 (rtn)
                           1154 LOAD_CONST              26 (('abc@def.c_m', 'Enter a valid email address'))
                           1156 PRECALL                  2
                           1160 CALL                     2
                           1170 POP_TOP
                
-               618        1172 PUSH_NULL
+               637        1172 PUSH_NULL
                           1174 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1186 PRECALL                  0
                           1190 CALL                     0
                           1200 LOAD_CONST              27 ('NotAnEmail')
                           1202 PRECALL                  1
                           1206 CALL                     1
                           1216 STORE_FAST               1 (rtn)
                
-               619        1218 LOAD_FAST                0 (self)
+               638        1218 LOAD_FAST                0 (self)
                           1220 LOAD_METHOD              1 (assertEqual)
                           1242 LOAD_FAST                1 (rtn)
                           1244 LOAD_CONST              28 (('NotAnEmail', 'Enter a valid email address'))
                           1246 PRECALL                  2
                           1250 CALL                     2
                           1260 POP_TOP
                
-               620        1262 PUSH_NULL
+               639        1262 PUSH_NULL
                           1264 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1276 PRECALL                  0
                           1280 CALL                     0
                           1290 LOAD_CONST              29 ('abc@NotAnEmail')
                           1292 PRECALL                  1
                           1296 CALL                     1
                           1306 STORE_FAST               1 (rtn)
                
-               621        1308 LOAD_FAST                0 (self)
+               640        1308 LOAD_FAST                0 (self)
                           1310 LOAD_METHOD              1 (assertEqual)
                           1332 LOAD_FAST                1 (rtn)
                           1334 LOAD_CONST              30 (('abc@NotAnEmail', 'Enter a valid email address'))
                           1336 PRECALL                  2
                           1340 CALL                     2
                           1350 POP_TOP
                
-               622        1352 PUSH_NULL
+               641        1352 PUSH_NULL
                           1354 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1366 PRECALL                  0
                           1370 CALL                     0
                           1380 LOAD_CONST              31 ('customer/department@example.com')
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 STORE_FAST               1 (rtn)
                
-               623        1398 LOAD_FAST                0 (self)
+               642        1398 LOAD_FAST                0 (self)
                           1400 LOAD_METHOD              1 (assertEqual)
                           1422 LOAD_FAST                1 (rtn)
                           1424 LOAD_CONST              32 (('customer/department@example.com', None))
                           1426 PRECALL                  2
                           1430 CALL                     2
                           1440 POP_TOP
                
-               624        1442 PUSH_NULL
+               643        1442 PUSH_NULL
                           1444 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1456 PRECALL                  0
                           1460 CALL                     0
                           1470 LOAD_CONST              33 ('$A12345@example.com')
                           1472 PRECALL                  1
                           1476 CALL                     1
                           1486 STORE_FAST               1 (rtn)
                
-               625        1488 LOAD_FAST                0 (self)
+               644        1488 LOAD_FAST                0 (self)
                           1490 LOAD_METHOD              1 (assertEqual)
                           1512 LOAD_FAST                1 (rtn)
                           1514 LOAD_CONST              34 (('$A12345@example.com', None))
                           1516 PRECALL                  2
                           1520 CALL                     2
                           1530 POP_TOP
                
-               626        1532 PUSH_NULL
+               645        1532 PUSH_NULL
                           1534 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1546 PRECALL                  0
                           1550 CALL                     0
                           1560 LOAD_CONST              35 ('!def!xyz%abc@example.com')
                           1562 PRECALL                  1
                           1566 CALL                     1
                           1576 STORE_FAST               1 (rtn)
                
-               627        1578 LOAD_FAST                0 (self)
+               646        1578 LOAD_FAST                0 (self)
                           1580 LOAD_METHOD              1 (assertEqual)
                           1602 LOAD_FAST                1 (rtn)
                           1604 LOAD_CONST              36 (('!def!xyz%abc@example.com', None))
                           1606 PRECALL                  2
                           1610 CALL                     2
                           1620 POP_TOP
                
-               628        1622 PUSH_NULL
+               647        1622 PUSH_NULL
                           1624 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1636 PRECALL                  0
                           1640 CALL                     0
                           1650 LOAD_CONST              37 ('_Yosemite.Sam@example.com')
                           1652 PRECALL                  1
                           1656 CALL                     1
                           1666 STORE_FAST               1 (rtn)
                
-               629        1668 LOAD_FAST                0 (self)
+               648        1668 LOAD_FAST                0 (self)
                           1670 LOAD_METHOD              1 (assertEqual)
                           1692 LOAD_FAST                1 (rtn)
                           1694 LOAD_CONST              38 (('_Yosemite.Sam@example.com', None))
                           1696 PRECALL                  2
                           1700 CALL                     2
                           1710 POP_TOP
                
-               630        1712 PUSH_NULL
+               649        1712 PUSH_NULL
                           1714 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1726 PRECALL                  0
                           1730 CALL                     0
                           1740 LOAD_CONST              39 ('~@example.com')
                           1742 PRECALL                  1
                           1746 CALL                     1
                           1756 STORE_FAST               1 (rtn)
                
-               631        1758 LOAD_FAST                0 (self)
+               650        1758 LOAD_FAST                0 (self)
                           1760 LOAD_METHOD              1 (assertEqual)
                           1782 LOAD_FAST                1 (rtn)
                           1784 LOAD_CONST              40 (('~@example.com', None))
                           1786 PRECALL                  2
                           1790 CALL                     2
                           1800 POP_TOP
                
-               632        1802 PUSH_NULL
+               651        1802 PUSH_NULL
                           1804 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1816 PRECALL                  0
                           1820 CALL                     0
                           1830 LOAD_CONST              41 ('.wooly@example.com')
                           1832 PRECALL                  1
                           1836 CALL                     1
                           1846 STORE_FAST               1 (rtn)
                
-               633        1848 LOAD_FAST                0 (self)
+               652        1848 LOAD_FAST                0 (self)
                           1850 LOAD_METHOD              1 (assertEqual)
                           1872 LOAD_FAST                1 (rtn)
                           1874 LOAD_CONST              42 (('.wooly@example.com', 'Enter a valid email address'))
                           1876 PRECALL                  2
                           1880 CALL                     2
                           1890 POP_TOP
                
-               634        1892 PUSH_NULL
+               653        1892 PUSH_NULL
                           1894 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1906 PRECALL                  0
                           1910 CALL                     0
                           1920 LOAD_CONST              43 ('wo..oly@example.com')
                           1922 PRECALL                  1
                           1926 CALL                     1
                           1936 STORE_FAST               1 (rtn)
                
-               635        1938 LOAD_FAST                0 (self)
+               654        1938 LOAD_FAST                0 (self)
                           1940 LOAD_METHOD              1 (assertEqual)
                           1962 LOAD_FAST                1 (rtn)
                           1964 LOAD_CONST              44 (('wo..oly@example.com', 'Enter a valid email address'))
                           1966 PRECALL                  2
                           1970 CALL                     2
                           1980 POP_TOP
                
-               636        1982 PUSH_NULL
+               655        1982 PUSH_NULL
                           1984 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           1996 PRECALL                  0
                           2000 CALL                     0
                           2010 LOAD_CONST              45 ('pootietang.@example.com')
                           2012 PRECALL                  1
                           2016 CALL                     1
                           2026 STORE_FAST               1 (rtn)
                
-               637        2028 LOAD_FAST                0 (self)
+               656        2028 LOAD_FAST                0 (self)
                           2030 LOAD_METHOD              1 (assertEqual)
                
-               638        2052 LOAD_FAST                1 (rtn)
+               657        2052 LOAD_FAST                1 (rtn)
                           2054 LOAD_CONST              46 (('pootietang.@example.com', 'Enter a valid email address'))
                
-               637        2056 PRECALL                  2
+               656        2056 PRECALL                  2
                           2060 CALL                     2
                           2070 POP_TOP
                
-               640        2072 PUSH_NULL
+               659        2072 PUSH_NULL
                           2074 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2086 PRECALL                  0
                           2090 CALL                     0
                           2100 LOAD_CONST              47 ('.@example.com')
                           2102 PRECALL                  1
                           2106 CALL                     1
                           2116 STORE_FAST               1 (rtn)
                
-               641        2118 LOAD_FAST                0 (self)
+               660        2118 LOAD_FAST                0 (self)
                           2120 LOAD_METHOD              1 (assertEqual)
                           2142 LOAD_FAST                1 (rtn)
                           2144 LOAD_CONST              48 (('.@example.com', 'Enter a valid email address'))
                           2146 PRECALL                  2
                           2150 CALL                     2
                           2160 POP_TOP
                
-               642        2162 PUSH_NULL
+               661        2162 PUSH_NULL
                           2164 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2176 PRECALL                  0
                           2180 CALL                     0
                           2190 LOAD_CONST              49 ('Ima.Fool@example.com')
                           2192 PRECALL                  1
                           2196 CALL                     1
                           2206 STORE_FAST               1 (rtn)
                
-               643        2208 LOAD_FAST                0 (self)
+               662        2208 LOAD_FAST                0 (self)
                           2210 LOAD_METHOD              1 (assertEqual)
                           2232 LOAD_FAST                1 (rtn)
                           2234 LOAD_CONST              50 (('Ima.Fool@example.com', None))
                           2236 PRECALL                  2
                           2240 CALL                     2
                           2250 POP_TOP
                
-               644        2252 PUSH_NULL
+               663        2252 PUSH_NULL
                           2254 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2266 PRECALL                  0
                           2270 CALL                     0
                           2280 LOAD_CONST              51 ('Ima Fool@example.com')
                           2282 PRECALL                  1
                           2286 CALL                     1
                           2296 STORE_FAST               1 (rtn)
                
-               645        2298 LOAD_FAST                0 (self)
+               664        2298 LOAD_FAST                0 (self)
                           2300 LOAD_METHOD              1 (assertEqual)
                           2322 LOAD_FAST                1 (rtn)
                           2324 LOAD_CONST              52 (('Ima Fool@example.com', 'Enter a valid email address'))
                           2326 PRECALL                  2
                           2330 CALL                     2
                           2340 POP_TOP
                
-               646        2342 PUSH_NULL
+               665        2342 PUSH_NULL
                           2344 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2356 PRECALL                  0
                           2360 CALL                     0
                           2370 LOAD_CONST              53 ('localguy@localhost')
                           2372 PRECALL                  1
                           2376 CALL                     1
                           2386 STORE_FAST               1 (rtn)
                
-               647        2388 LOAD_FAST                0 (self)
+               666        2388 LOAD_FAST                0 (self)
                           2390 LOAD_METHOD              1 (assertEqual)
                           2412 LOAD_FAST                1 (rtn)
                           2414 LOAD_CONST              54 (('localguy@localhost', None))
                           2416 PRECALL                  2
                           2420 CALL                     2
                           2430 POP_TOP
                
-               649        2432 PUSH_NULL
+               668        2432 PUSH_NULL
                           2434 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2446 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2448 KW_NAMES                56
                           2450 PRECALL                  1
                           2454 CALL                     1
                
-               650        2464 LOAD_CONST              53 ('localguy@localhost')
+               669        2464 LOAD_CONST              53 ('localguy@localhost')
                
-               649        2466 PRECALL                  1
+               668        2466 PRECALL                  1
                           2470 CALL                     1
                           2480 STORE_FAST               1 (rtn)
                
-               652        2482 LOAD_FAST                0 (self)
+               671        2482 LOAD_FAST                0 (self)
                           2484 LOAD_METHOD              1 (assertEqual)
                           2506 LOAD_FAST                1 (rtn)
                           2508 LOAD_CONST              54 (('localguy@localhost', None))
                           2510 PRECALL                  2
                           2514 CALL                     2
                           2524 POP_TOP
                
-               653        2526 PUSH_NULL
+               672        2526 PUSH_NULL
                           2528 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2540 LOAD_CONST              55 ('^.*\\.com(|\\..*)$')
                           2542 KW_NAMES                56
                           2544 PRECALL                  1
                           2548 CALL                     1
                           2558 LOAD_CONST              57 ('abc@example.com')
                           2560 PRECALL                  1
                           2564 CALL                     1
                           2574 STORE_FAST               1 (rtn)
                
-               654        2576 LOAD_FAST                0 (self)
+               673        2576 LOAD_FAST                0 (self)
                           2578 LOAD_METHOD              1 (assertEqual)
                           2600 LOAD_FAST                1 (rtn)
                           2602 LOAD_CONST              58 (('abc@example.com', 'Enter a valid email address'))
                           2604 PRECALL                  2
                           2608 CALL                     2
                           2618 POP_TOP
                
-               656        2620 PUSH_NULL
+               675        2620 PUSH_NULL
                           2622 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2634 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2636 KW_NAMES                60
                           2638 PRECALL                  1
                           2642 CALL                     1
                           2652 LOAD_CONST              53 ('localguy@localhost')
                           2654 PRECALL                  1
                           2658 CALL                     1
                           2668 STORE_FAST               1 (rtn)
                
-               657        2670 LOAD_FAST                0 (self)
+               676        2670 LOAD_FAST                0 (self)
                           2672 LOAD_METHOD              1 (assertEqual)
                           2694 LOAD_FAST                1 (rtn)
                           2696 LOAD_CONST              61 (('localguy@localhost', 'Enter a valid email address'))
                           2698 PRECALL                  2
                           2702 CALL                     2
                           2712 POP_TOP
                
-               658        2714 PUSH_NULL
+               677        2714 PUSH_NULL
                           2716 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2728 LOAD_CONST              59 ('^.*\\.edu(|\\..*)$')
                           2730 KW_NAMES                60
                           2732 PRECALL                  1
                           2736 CALL                     1
                           2746 LOAD_CONST              62 ('localguy@example.edu')
                           2748 PRECALL                  1
                           2752 CALL                     1
                           2762 STORE_FAST               1 (rtn)
                
-               659        2764 LOAD_FAST                0 (self)
+               678        2764 LOAD_FAST                0 (self)
                           2766 LOAD_METHOD              1 (assertEqual)
                           2788 LOAD_FAST                1 (rtn)
                           2790 LOAD_CONST              63 (('localguy@example.edu', None))
                           2792 PRECALL                  2
                           2796 CALL                     2
                           2806 POP_TOP
                
-               661        2808 PUSH_NULL
+               680        2808 PUSH_NULL
                           2810 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2822 LOAD_CONST              64 ('oops')
                           2824 KW_NAMES                65
                           2826 PRECALL                  1
                           2830 CALL                     1
                           2840 LOAD_CONST              66 (42)
                           2842 PRECALL                  1
                           2846 CALL                     1
                           2856 STORE_FAST               1 (rtn)
                
-               662        2858 LOAD_FAST                0 (self)
+               681        2858 LOAD_FAST                0 (self)
                           2860 LOAD_METHOD              1 (assertEqual)
                           2882 LOAD_FAST                1 (rtn)
                           2884 LOAD_CONST              67 ((42, 'oops'))
                           2886 PRECALL                  2
                           2890 CALL                     2
                           2900 POP_TOP
                
-               665        2902 PUSH_NULL
+               684        2902 PUSH_NULL
                           2904 LOAD_GLOBAL              1 (NULL + IS_EMAIL)
                           2916 PRECALL                  0
                           2920 CALL                     0
                           2930 LOAD_CONST              68 ('web2py@Alliancefranaise.nu')
                           2932 PRECALL                  1
                           2936 CALL                     1
                           2946 STORE_FAST               1 (rtn)
                
-               666        2948 LOAD_FAST                0 (self)
+               685        2948 LOAD_FAST                0 (self)
                           2950 LOAD_METHOD              1 (assertEqual)
                           2972 LOAD_FAST                1 (rtn)
                           2974 LOAD_CONST              69 (('web2py@Alliancefranaise.nu', None))
                           2976 PRECALL                  2
                           2980 CALL                     2
                           2990 POP_TOP
                           2992 LOAD_CONST               0 (None)
@@ -7127,15 +7215,15 @@
                   ('web2py@Alliancefranaise.nu', None)
                names      ('IS_EMAIL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMAIL'
-               firstlineno 591
+               firstlineno 610
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c012e012c012e012c012e012c012e
                   012c012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e01180104ff10032e012c012e012c012e012c012e012c02200102ff10
                   032c0132012c0232012c0132012c0232012c032e01
             code
@@ -7167,144 +7255,144 @@
                   0000000000000000000000000000007c01a6010000ab0100000000000000
                   00a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026407a6020000ab02000000000000000001
                   00740100000000000000000000a6000000ab000000000000000000a00400
                   00000000000000000000000000000000000000640864096702a6010000ab
                   0100000000000000007d027c00a002000000000000000000000000000000
                   00000000007c02640aa6020000ab020000000000000000010064005300
-               668           0 RESUME                   0
+               687           0 RESUME                   0
                
-               669           2 LOAD_CONST               1 ('localguy@localhost')
+               688           2 LOAD_CONST               1 ('localguy@localhost')
                              4 LOAD_CONST               2 ('_Yosemite.Sam@example.com')
                              6 BUILD_LIST               2
                              8 STORE_FAST               1 (emails)
                
-               670          10 PUSH_NULL
+               689          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                             24 PRECALL                  0
                             28 CALL                     0
                             38 LOAD_CONST               3 (',')
                             40 LOAD_METHOD              1 (join)
                             62 LOAD_FAST                1 (emails)
                             64 PRECALL                  1
                             68 CALL                     1
                             78 PRECALL                  1
                             82 CALL                     1
                             92 STORE_FAST               2 (rtn)
                
-               671          94 LOAD_FAST                0 (self)
+               690          94 LOAD_FAST                0 (self)
                             96 LOAD_METHOD              2 (assertEqual)
                            118 LOAD_FAST                2 (rtn)
                            120 LOAD_CONST               3 (',')
                            122 LOAD_METHOD              1 (join)
                            144 LOAD_FAST                1 (emails)
                            146 PRECALL                  1
                            150 CALL                     1
                            160 LOAD_CONST               0 (None)
                            162 BUILD_TUPLE              2
                            164 PRECALL                  2
                            168 CALL                     2
                            178 POP_TOP
                
-               672         180 PUSH_NULL
+               691         180 PUSH_NULL
                            182 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            194 PRECALL                  0
                            198 CALL                     0
                            208 LOAD_CONST               4 (';')
                            210 LOAD_METHOD              1 (join)
                            232 LOAD_FAST                1 (emails)
                            234 PRECALL                  1
                            238 CALL                     1
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               673         264 LOAD_FAST                0 (self)
+               692         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST               4 (';')
                            292 LOAD_METHOD              1 (join)
                            314 LOAD_FAST                1 (emails)
                            316 PRECALL                  1
                            320 CALL                     1
                            330 LOAD_CONST               0 (None)
                            332 BUILD_TUPLE              2
                            334 PRECALL                  2
                            338 CALL                     2
                            348 POP_TOP
                
-               674         350 PUSH_NULL
+               693         350 PUSH_NULL
                            352 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            364 PRECALL                  0
                            368 CALL                     0
                            378 LOAD_CONST               5 (' ')
                            380 LOAD_METHOD              1 (join)
                            402 LOAD_FAST                1 (emails)
                            404 PRECALL                  1
                            408 CALL                     1
                            418 PRECALL                  1
                            422 CALL                     1
                            432 STORE_FAST               2 (rtn)
                
-               675         434 LOAD_FAST                0 (self)
+               694         434 LOAD_FAST                0 (self)
                            436 LOAD_METHOD              2 (assertEqual)
                            458 LOAD_FAST                2 (rtn)
                            460 LOAD_CONST               5 (' ')
                            462 LOAD_METHOD              1 (join)
                            484 LOAD_FAST                1 (emails)
                            486 PRECALL                  1
                            490 CALL                     1
                            500 LOAD_CONST               0 (None)
                            502 BUILD_TUPLE              2
                            504 PRECALL                  2
                            508 CALL                     2
                            518 POP_TOP
                
-               676         520 LOAD_FAST                1 (emails)
+               695         520 LOAD_FAST                1 (emails)
                            522 LOAD_METHOD              3 (append)
                            544 LOAD_CONST               6 ('a')
                            546 PRECALL                  1
                            550 CALL                     1
                            560 POP_TOP
                
-               677         562 PUSH_NULL
+               696         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            576 PRECALL                  0
                            580 CALL                     0
                            590 LOAD_CONST               4 (';')
                            592 LOAD_METHOD              1 (join)
                            614 LOAD_FAST                1 (emails)
                            616 PRECALL                  1
                            620 CALL                     1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               678         646 LOAD_FAST                0 (self)
+               697         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                
-               679         670 LOAD_FAST                2 (rtn)
+               698         670 LOAD_FAST                2 (rtn)
                            672 LOAD_CONST               7 (('localguy@localhost;_Yosemite.Sam@example.com;a', 'Invalid emails: a'))
                
-               678         674 PRECALL                  2
+               697         674 PRECALL                  2
                            678 CALL                     2
                            688 POP_TOP
                
-               681         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
+               700         690 LOAD_GLOBAL              1 (NULL + IS_LIST_OF_EMAILS)
                            702 PRECALL                  0
                            706 CALL                     0
                            716 LOAD_METHOD              4 (formatter)
                            738 LOAD_CONST               8 ('test@example.com')
                            740 LOAD_CONST               9 ('dude@example.com')
                            742 BUILD_LIST               2
                            744 PRECALL                  1
                            748 CALL                     1
                            758 STORE_FAST               2 (rtn)
                
-               682         760 LOAD_FAST                0 (self)
+               701         760 LOAD_FAST                0 (self)
                            762 LOAD_METHOD              2 (assertEqual)
                            784 LOAD_FAST                2 (rtn)
                            786 LOAD_CONST              10 ('test@example.com, dude@example.com')
                            788 PRECALL                  2
                            792 CALL                     2
                            802 POP_TOP
                            804 LOAD_CONST               0 (None)
@@ -7323,15 +7411,15 @@
                   'test@example.com, dude@example.com'
                names      ('IS_LIST_OF_EMAILS', 'join', 'assertEqual', 'append', 'formatter')
                varnames   ('self', 'emails', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF_EMAILS'
-               firstlineno 668
+               firstlineno 687
                lnotab 0x020108015401560154015601540156012a015401180104ff10034601
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 5
                flags     : 3
                code
@@ -7350,123 +7438,123 @@
                   02a6020000ab020000000000000000010002007401000000000000000000
                   00a6000000ab000000000000000000640ca6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   0da6020000ab020000000000000000010002007401000000000000000000
                   00640e6400ac0fa6020000ab020000000000000000640ba6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016410a6020000ab020000000000000000010064005300
-               684           0 RESUME                   0
+               703           0 RESUME                   0
                
-               685           2 PUSH_NULL
+               704           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_URL)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('http://example.com')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               686          48 LOAD_FAST                0 (self)
+               705          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('http://example.com', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               687          92 PUSH_NULL
+               706          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_URL)
                            106 LOAD_CONST               3 ('oops')
                            108 KW_NAMES                 4
                            110 PRECALL                  1
                            114 CALL                     1
                            124 LOAD_CONST               5 ('http://example,com')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               1 (rtn)
                
-               688         142 LOAD_FAST                0 (self)
+               707         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              1 (assertEqual)
                            166 LOAD_FAST                1 (rtn)
                            168 LOAD_CONST               6 (('http://example,com', 'oops'))
                            170 PRECALL                  2
                            174 CALL                     2
                            184 POP_TOP
                
-               689         186 PUSH_NULL
+               708         186 PUSH_NULL
                            188 LOAD_GLOBAL              1 (NULL + IS_URL)
                            200 LOAD_CONST               3 ('oops')
                            202 KW_NAMES                 4
                            204 PRECALL                  1
                            208 CALL                     1
                
-               690         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
+               709         218 LOAD_CONST               7 ('http://www.example.com:8800/a/b/c/d/e/f/g/h')
                
-               689         220 PRECALL                  1
+               708         220 PRECALL                  1
                            224 CALL                     1
                            234 STORE_FAST               1 (rtn)
                
-               692         236 LOAD_FAST                0 (self)
+               711         236 LOAD_FAST                0 (self)
                            238 LOAD_METHOD              1 (assertEqual)
                            260 LOAD_FAST                1 (rtn)
                            262 LOAD_CONST               8 (('http://www.example.com:8800/a/b/c/d/e/f/g/h', None))
                            264 PRECALL                  2
                            268 CALL                     2
                            278 POP_TOP
                
-               693         280 PUSH_NULL
+               712         280 PUSH_NULL
                            282 LOAD_GLOBAL              1 (NULL + IS_URL)
                            294 LOAD_CONST               3 ('oops')
                            296 LOAD_CONST               9 ('http')
                            298 KW_NAMES                10
                            300 PRECALL                  2
                            304 CALL                     2
                            314 LOAD_CONST              11 ('example.com')
                            316 PRECALL                  1
                            320 CALL                     1
                            330 STORE_FAST               1 (rtn)
                
-               694         332 LOAD_FAST                0 (self)
+               713         332 LOAD_FAST                0 (self)
                            334 LOAD_METHOD              1 (assertEqual)
                            356 LOAD_FAST                1 (rtn)
                            358 LOAD_CONST               2 (('http://example.com', None))
                            360 PRECALL                  2
                            364 CALL                     2
                            374 POP_TOP
                
-               695         376 PUSH_NULL
+               714         376 PUSH_NULL
                            378 LOAD_GLOBAL              1 (NULL + IS_URL)
                            390 PRECALL                  0
                            394 CALL                     0
                            404 LOAD_CONST              12 ('http://example.com?q=george&p=22')
                            406 PRECALL                  1
                            410 CALL                     1
                            420 STORE_FAST               1 (rtn)
                
-               696         422 LOAD_FAST                0 (self)
+               715         422 LOAD_FAST                0 (self)
                            424 LOAD_METHOD              1 (assertEqual)
                            446 LOAD_FAST                1 (rtn)
                            448 LOAD_CONST              13 (('http://example.com?q=george&p=22', None))
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               697         466 PUSH_NULL
+               716         466 PUSH_NULL
                            468 LOAD_GLOBAL              1 (NULL + IS_URL)
                            480 LOAD_CONST              14 ('generic')
                            482 LOAD_CONST               0 (None)
                            484 KW_NAMES                15
                            486 PRECALL                  2
                            490 CALL                     2
                            500 LOAD_CONST              11 ('example.com')
                            502 PRECALL                  1
                            506 CALL                     1
                            516 STORE_FAST               1 (rtn)
                
-               698         518 LOAD_FAST                0 (self)
+               717         518 LOAD_FAST                0 (self)
                            520 LOAD_METHOD              1 (assertEqual)
                            542 LOAD_FAST                1 (rtn)
                            544 LOAD_CONST              16 (('example.com', None))
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                            562 LOAD_CONST               0 (None)
@@ -7491,15 +7579,15 @@
                   ('example.com', None)
                names      ('IS_URL', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_URL'
-               firstlineno 684
+               firstlineno 703
                lnotab 0x02012e012c0132012c01200102ff10032c0134012c012e012c013401
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
                flags     : 3
                code
@@ -7549,98 +7637,98 @@
                   00740100000000000000000000a6000000ab0000000000000000006415a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016416a6020000ab020000000000000000010002
                   00740100000000000000000000a6000000ab0000000000000000006417a6
                   010000ab0100000000000000007d017c00a0010000000000000000000000
                   0000000000000000007c016418a6020000ab020000000000000000010064
                   005300
-               700           0 RESUME                   0
+               719           0 RESUME                   0
                
-               701           2 PUSH_NULL
+               720           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_TIME)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('21:30')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               702          48 LOAD_FAST                0 (self)
+               721          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_GLOBAL              5 (NULL + datetime)
                             86 LOAD_ATTR                3 (time)
                             96 LOAD_CONST               2 (21)
                             98 LOAD_CONST               3 (30)
                            100 PRECALL                  2
                            104 CALL                     2
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               703         134 PUSH_NULL
+               722         134 PUSH_NULL
                            136 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            148 PRECALL                  0
                            152 CALL                     0
                            162 LOAD_CONST               4 ('21-30')
                            164 PRECALL                  1
                            168 CALL                     1
                            178 STORE_FAST               1 (rtn)
                
-               704         180 LOAD_FAST                0 (self)
+               723         180 LOAD_FAST                0 (self)
                            182 LOAD_METHOD              1 (assertEqual)
                            204 LOAD_FAST                1 (rtn)
                            206 LOAD_GLOBAL              5 (NULL + datetime)
                            218 LOAD_ATTR                3 (time)
                            228 LOAD_CONST               2 (21)
                            230 LOAD_CONST               3 (30)
                            232 PRECALL                  2
                            236 CALL                     2
                            246 LOAD_CONST               0 (None)
                            248 BUILD_TUPLE              2
                            250 PRECALL                  2
                            254 CALL                     2
                            264 POP_TOP
                
-               705         266 PUSH_NULL
+               724         266 PUSH_NULL
                            268 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            280 PRECALL                  0
                            284 CALL                     0
                            294 LOAD_CONST               5 ('21.30')
                            296 PRECALL                  1
                            300 CALL                     1
                            310 STORE_FAST               1 (rtn)
                
-               706         312 LOAD_FAST                0 (self)
+               725         312 LOAD_FAST                0 (self)
                            314 LOAD_METHOD              1 (assertEqual)
                            336 LOAD_FAST                1 (rtn)
                            338 LOAD_GLOBAL              5 (NULL + datetime)
                            350 LOAD_ATTR                3 (time)
                            360 LOAD_CONST               2 (21)
                            362 LOAD_CONST               3 (30)
                            364 PRECALL                  2
                            368 CALL                     2
                            378 LOAD_CONST               0 (None)
                            380 BUILD_TUPLE              2
                            382 PRECALL                  2
                            386 CALL                     2
                            396 POP_TOP
                
-               707         398 PUSH_NULL
+               726         398 PUSH_NULL
                            400 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            412 PRECALL                  0
                            416 CALL                     0
                            426 LOAD_CONST               6 ('21:30:59')
                            428 PRECALL                  1
                            432 CALL                     1
                            442 STORE_FAST               1 (rtn)
                
-               708         444 LOAD_FAST                0 (self)
+               727         444 LOAD_FAST                0 (self)
                            446 LOAD_METHOD              1 (assertEqual)
                            468 LOAD_FAST                1 (rtn)
                            470 LOAD_GLOBAL              5 (NULL + datetime)
                            482 LOAD_ATTR                3 (time)
                            492 LOAD_CONST               2 (21)
                            494 LOAD_CONST               3 (30)
                            496 LOAD_CONST               7 (59)
@@ -7648,191 +7736,191 @@
                            502 CALL                     3
                            512 LOAD_CONST               0 (None)
                            514 BUILD_TUPLE              2
                            516 PRECALL                  2
                            520 CALL                     2
                            530 POP_TOP
                
-               709         532 PUSH_NULL
+               728         532 PUSH_NULL
                            534 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            546 PRECALL                  0
                            550 CALL                     0
                            560 LOAD_CONST               8 ('5:30')
                            562 PRECALL                  1
                            566 CALL                     1
                            576 STORE_FAST               1 (rtn)
                
-               710         578 LOAD_FAST                0 (self)
+               729         578 LOAD_FAST                0 (self)
                            580 LOAD_METHOD              1 (assertEqual)
                            602 LOAD_FAST                1 (rtn)
                            604 LOAD_GLOBAL              5 (NULL + datetime)
                            616 LOAD_ATTR                3 (time)
                            626 LOAD_CONST               9 (5)
                            628 LOAD_CONST               3 (30)
                            630 PRECALL                  2
                            634 CALL                     2
                            644 LOAD_CONST               0 (None)
                            646 BUILD_TUPLE              2
                            648 PRECALL                  2
                            652 CALL                     2
                            662 POP_TOP
                
-               711         664 PUSH_NULL
+               730         664 PUSH_NULL
                            666 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            678 PRECALL                  0
                            682 CALL                     0
                            692 LOAD_CONST              10 ('5:30 am')
                            694 PRECALL                  1
                            698 CALL                     1
                            708 STORE_FAST               1 (rtn)
                
-               712         710 LOAD_FAST                0 (self)
+               731         710 LOAD_FAST                0 (self)
                            712 LOAD_METHOD              1 (assertEqual)
                            734 LOAD_FAST                1 (rtn)
                            736 LOAD_GLOBAL              5 (NULL + datetime)
                            748 LOAD_ATTR                3 (time)
                            758 LOAD_CONST               9 (5)
                            760 LOAD_CONST               3 (30)
                            762 PRECALL                  2
                            766 CALL                     2
                            776 LOAD_CONST               0 (None)
                            778 BUILD_TUPLE              2
                            780 PRECALL                  2
                            784 CALL                     2
                            794 POP_TOP
                
-               713         796 PUSH_NULL
+               732         796 PUSH_NULL
                            798 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            810 PRECALL                  0
                            814 CALL                     0
                            824 LOAD_CONST              11 ('5:30 pm')
                            826 PRECALL                  1
                            830 CALL                     1
                            840 STORE_FAST               1 (rtn)
                
-               714         842 LOAD_FAST                0 (self)
+               733         842 LOAD_FAST                0 (self)
                            844 LOAD_METHOD              1 (assertEqual)
                            866 LOAD_FAST                1 (rtn)
                            868 LOAD_GLOBAL              5 (NULL + datetime)
                            880 LOAD_ATTR                3 (time)
                            890 LOAD_CONST              12 (17)
                            892 LOAD_CONST               3 (30)
                            894 PRECALL                  2
                            898 CALL                     2
                            908 LOAD_CONST               0 (None)
                            910 BUILD_TUPLE              2
                            912 PRECALL                  2
                            916 CALL                     2
                            926 POP_TOP
                
-               715         928 PUSH_NULL
+               734         928 PUSH_NULL
                            930 LOAD_GLOBAL              1 (NULL + IS_TIME)
                            942 PRECALL                  0
                            946 CALL                     0
                            956 LOAD_CONST              13 ('5:30 whatever')
                            958 PRECALL                  1
                            962 CALL                     1
                            972 STORE_FAST               1 (rtn)
                
-               716         974 LOAD_FAST                0 (self)
+               735         974 LOAD_FAST                0 (self)
                            976 LOAD_METHOD              1 (assertEqual)
                
-               717         998 LOAD_FAST                1 (rtn)
+               736         998 LOAD_FAST                1 (rtn)
                           1000 LOAD_CONST              14 (('5:30 whatever', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               716        1002 PRECALL                  2
+               735        1002 PRECALL                  2
                           1006 CALL                     2
                           1016 POP_TOP
                
-               719        1018 PUSH_NULL
+               738        1018 PUSH_NULL
                           1020 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1032 PRECALL                  0
                           1036 CALL                     0
                           1046 LOAD_CONST              15 ('5:30 20')
                           1048 PRECALL                  1
                           1052 CALL                     1
                           1062 STORE_FAST               1 (rtn)
                
-               720        1064 LOAD_FAST                0 (self)
+               739        1064 LOAD_FAST                0 (self)
                           1066 LOAD_METHOD              1 (assertEqual)
                
-               721        1088 LOAD_FAST                1 (rtn)
+               740        1088 LOAD_FAST                1 (rtn)
                           1090 LOAD_CONST              16 (('5:30 20', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               720        1092 PRECALL                  2
+               739        1092 PRECALL                  2
                           1096 CALL                     2
                           1106 POP_TOP
                
-               723        1108 PUSH_NULL
+               742        1108 PUSH_NULL
                           1110 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1122 PRECALL                  0
                           1126 CALL                     0
                           1136 LOAD_CONST              17 ('24:30')
                           1138 PRECALL                  1
                           1142 CALL                     1
                           1152 STORE_FAST               1 (rtn)
                
-               724        1154 LOAD_FAST                0 (self)
+               743        1154 LOAD_FAST                0 (self)
                           1156 LOAD_METHOD              1 (assertEqual)
                
-               725        1178 LOAD_FAST                1 (rtn)
+               744        1178 LOAD_FAST                1 (rtn)
                           1180 LOAD_CONST              18 (('24:30', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               724        1182 PRECALL                  2
+               743        1182 PRECALL                  2
                           1186 CALL                     2
                           1196 POP_TOP
                
-               727        1198 PUSH_NULL
+               746        1198 PUSH_NULL
                           1200 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1212 PRECALL                  0
                           1216 CALL                     0
                           1226 LOAD_CONST              19 ('21:60')
                           1228 PRECALL                  1
                           1232 CALL                     1
                           1242 STORE_FAST               1 (rtn)
                
-               728        1244 LOAD_FAST                0 (self)
+               747        1244 LOAD_FAST                0 (self)
                           1246 LOAD_METHOD              1 (assertEqual)
                
-               729        1268 LOAD_FAST                1 (rtn)
+               748        1268 LOAD_FAST                1 (rtn)
                           1270 LOAD_CONST              20 (('21:60', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               728        1272 PRECALL                  2
+               747        1272 PRECALL                  2
                           1276 CALL                     2
                           1286 POP_TOP
                
-               731        1288 PUSH_NULL
+               750        1288 PUSH_NULL
                           1290 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1302 PRECALL                  0
                           1306 CALL                     0
                           1316 LOAD_CONST              21 ('21:30::')
                           1318 PRECALL                  1
                           1322 CALL                     1
                           1332 STORE_FAST               1 (rtn)
                
-               732        1334 LOAD_FAST                0 (self)
+               751        1334 LOAD_FAST                0 (self)
                           1336 LOAD_METHOD              1 (assertEqual)
                
-               733        1358 LOAD_FAST                1 (rtn)
+               752        1358 LOAD_FAST                1 (rtn)
                           1360 LOAD_CONST              22 (('21:30::', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                
-               732        1362 PRECALL                  2
+               751        1362 PRECALL                  2
                           1366 CALL                     2
                           1376 POP_TOP
                
-               735        1378 PUSH_NULL
+               754        1378 PUSH_NULL
                           1380 LOAD_GLOBAL              1 (NULL + IS_TIME)
                           1392 PRECALL                  0
                           1396 CALL                     0
                           1406 LOAD_CONST              23 ('')
                           1408 PRECALL                  1
                           1412 CALL                     1
                           1422 STORE_FAST               1 (rtn)
                
-               736        1424 LOAD_FAST                0 (self)
+               755        1424 LOAD_FAST                0 (self)
                           1426 LOAD_METHOD              1 (assertEqual)
                           1448 LOAD_FAST                1 (rtn)
                           1450 LOAD_CONST              24 (('', 'Enter time as hh:mm:ss (seconds, am, pm optional)'))
                           1452 PRECALL                  2
                           1456 CALL                     2
                           1466 POP_TOP
                           1468 LOAD_CONST               0 (None)
@@ -7865,15 +7953,15 @@
                   ('', 'Enter time as hh:mm:ss (seconds, am, pm optional)')
                names      ('IS_TIME', 'assertEqual', 'datetime', 'time')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_TIME'
-               firstlineno 700
+               firstlineno 719
                lnotab
                   0x02012e0156012e0156012e0156012e0158012e0156012e0156012e0156
                   012e01180104ff10032e01180104ff10032e01180104ff10032e01180104
                   ff10032e01180104ff10032e01
             code
                argcount  : 1
                nlocals   : 3
@@ -7889,32 +7977,32 @@
                   000000000000000000000000007c026408a6020000ab0200000000000000
                   00010074010000000000000000000064016402ac03a6020000ab02000000
                   0000000000a0040000000000000000000000000000000000000000740500
                   0000000000000000006a0300000000000000006409640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d027c00a00100
                   000000000000000000000000000000000000007c02640ca6020000ab0200
                   00000000000000010064005300
-               738           0 RESUME                   0
+               757           0 RESUME                   0
                
-               739           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               758           2 LOAD_GLOBAL              1 (NULL + IS_DATE)
                             14 LOAD_CONST               1 ('%m/%d/%Y')
                             16 LOAD_CONST               2 ('oops')
                             18 KW_NAMES                 3
                             20 PRECALL                  2
                             24 CALL                     2
                             34 STORE_FAST               1 (v)
                
-               740          36 PUSH_NULL
+               759          36 PUSH_NULL
                             38 LOAD_FAST                1 (v)
                             40 LOAD_CONST               4 ('03/03/2008')
                             42 PRECALL                  1
                             46 CALL                     1
                             56 STORE_FAST               2 (rtn)
                
-               741          58 LOAD_FAST                0 (self)
+               760          58 LOAD_FAST                0 (self)
                             60 LOAD_METHOD              1 (assertEqual)
                             82 LOAD_FAST                2 (rtn)
                             84 LOAD_GLOBAL              5 (NULL + datetime)
                             96 LOAD_ATTR                3 (date)
                            106 LOAD_CONST               5 (2008)
                            108 LOAD_CONST               6 (3)
                            110 LOAD_CONST               6 (3)
@@ -7922,50 +8010,50 @@
                            116 CALL                     3
                            126 LOAD_CONST               0 (None)
                            128 BUILD_TUPLE              2
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               742         146 PUSH_NULL
+               761         146 PUSH_NULL
                            148 LOAD_FAST                1 (v)
                            150 LOAD_CONST               7 ('31/03/2008')
                            152 PRECALL                  1
                            156 CALL                     1
                            166 STORE_FAST               2 (rtn)
                
-               743         168 LOAD_FAST                0 (self)
+               762         168 LOAD_FAST                0 (self)
                            170 LOAD_METHOD              1 (assertEqual)
                            192 LOAD_FAST                2 (rtn)
                            194 LOAD_CONST               8 (('31/03/2008', 'oops'))
                            196 PRECALL                  2
                            200 CALL                     2
                            210 POP_TOP
                
-               744         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
+               763         212 LOAD_GLOBAL              1 (NULL + IS_DATE)
                            224 LOAD_CONST               1 ('%m/%d/%Y')
                            226 LOAD_CONST               2 ('oops')
                            228 KW_NAMES                 3
                            230 PRECALL                  2
                            234 CALL                     2
                            244 LOAD_METHOD              4 (formatter)
                
-               745         266 LOAD_GLOBAL              5 (NULL + datetime)
+               764         266 LOAD_GLOBAL              5 (NULL + datetime)
                            278 LOAD_ATTR                3 (date)
                            288 LOAD_CONST               9 (1834)
                            290 LOAD_CONST              10 (12)
                            292 LOAD_CONST              11 (14)
                            294 PRECALL                  3
                            298 CALL                     3
                
-               744         308 PRECALL                  1
+               763         308 PRECALL                  1
                            312 CALL                     1
                            322 STORE_FAST               2 (rtn)
                
-               747         324 LOAD_FAST                0 (self)
+               766         324 LOAD_FAST                0 (self)
                            326 LOAD_METHOD              1 (assertEqual)
                            348 LOAD_FAST                2 (rtn)
                            350 LOAD_CONST              12 ('12/14/1834')
                            352 PRECALL                  2
                            356 CALL                     2
                            366 POP_TOP
                            368 LOAD_CONST               0 (None)
@@ -7986,15 +8074,15 @@
                   '12/14/1834'
                names      ('IS_DATE', 'assertEqual', 'datetime', 'date', 'formatter')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE'
-               firstlineno 738
+               firstlineno 757
                lnotab 0x020122011601580116012c0136012aff1003
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
                flags     : 3
                code
@@ -8011,32 +8099,32 @@
                   0000000000ac0ea6030000ab0300000000000000007d0102007c01640fa6
                   010000ab0100000000000000007d027c00a0010000000000000000000000
                   0000000000000000007c027405000000000000000000006a020000000000
                   00000064106407641164126413a6050000ab050000000000000000640066
                   02a6020000ab020000000000000000010064005300
                              0 MAKE_CELL                3 (DummyTimezone)
                
-               749           2 RESUME                   0
+               768           2 RESUME                   0
                
-               750           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               769           4 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                             16 LOAD_CONST               1 ('%m/%d/%Y %H:%M')
                             18 LOAD_CONST               2 ('oops')
                             20 KW_NAMES                 3
                             22 PRECALL                  2
                             26 CALL                     2
                             36 STORE_FAST               1 (v)
                
-               751          38 PUSH_NULL
+               770          38 PUSH_NULL
                             40 LOAD_FAST                1 (v)
                             42 LOAD_CONST               4 ('03/03/2008 12:40')
                             44 PRECALL                  1
                             48 CALL                     1
                             58 STORE_FAST               2 (rtn)
                
-               752          60 LOAD_FAST                0 (self)
+               771          60 LOAD_FAST                0 (self)
                             62 LOAD_METHOD              1 (assertEqual)
                             84 LOAD_FAST                2 (rtn)
                             86 LOAD_GLOBAL              5 (NULL + datetime)
                             98 LOAD_ATTR                2 (datetime)
                            108 LOAD_CONST               5 (2008)
                            110 LOAD_CONST               6 (3)
                            112 LOAD_CONST               6 (3)
@@ -8046,64 +8134,64 @@
                            122 CALL                     5
                            132 LOAD_CONST               0 (None)
                            134 BUILD_TUPLE              2
                            136 PRECALL                  2
                            140 CALL                     2
                            150 POP_TOP
                
-               753         152 PUSH_NULL
+               772         152 PUSH_NULL
                            154 LOAD_FAST                1 (v)
                            156 LOAD_CONST               9 ('31/03/2008 29:40')
                            158 PRECALL                  1
                            162 CALL                     1
                            172 STORE_FAST               2 (rtn)
                
-               754         174 LOAD_FAST                0 (self)
+               773         174 LOAD_FAST                0 (self)
                            176 LOAD_METHOD              1 (assertEqual)
                            198 LOAD_FAST                2 (rtn)
                            200 LOAD_CONST              10 (('31/03/2008 29:40', 'oops'))
                            202 PRECALL                  2
                            206 CALL                     2
                            216 POP_TOP
                
-               759         218 PUSH_NULL
+               778         218 PUSH_NULL
                            220 LOAD_BUILD_CLASS
                            222 LOAD_CLOSURE             3 (DummyTimezone)
                            224 BUILD_TUPLE              1
-                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 759>)
+                           226 LOAD_CONST              11 (<code object DummyTimezone, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 778>)
                            228 MAKE_FUNCTION            8 (closure)
                            230 LOAD_CONST              12 ('DummyTimezone')
                            232 LOAD_GLOBAL              4 (datetime)
                            244 LOAD_ATTR                3 (tzinfo)
                            254 PRECALL                  3
                            258 CALL                     3
                            268 STORE_DEREF              3 (DummyTimezone)
                
-               774         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
+               793         270 LOAD_GLOBAL              1 (NULL + IS_DATETIME)
                
-               775         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
+               794         282 LOAD_CONST              13 ('%Y-%m-%d %H:%M')
                            284 LOAD_CONST               2 ('oops')
                            286 PUSH_NULL
                            288 LOAD_DEREF               3 (DummyTimezone)
                            290 PRECALL                  0
                            294 CALL                     0
                
-               774         304 KW_NAMES                14
+               793         304 KW_NAMES                14
                            306 PRECALL                  3
                            310 CALL                     3
                            320 STORE_FAST               1 (v)
                
-               777         322 PUSH_NULL
+               796         322 PUSH_NULL
                            324 LOAD_FAST                1 (v)
                            326 LOAD_CONST              15 ('1982-12-14 08:00')
                            328 PRECALL                  1
                            332 CALL                     1
                            342 STORE_FAST               2 (rtn)
                
-               778         344 LOAD_FAST                0 (self)
+               797         344 LOAD_FAST                0 (self)
                            346 LOAD_METHOD              1 (assertEqual)
                            368 LOAD_FAST                2 (rtn)
                            370 LOAD_GLOBAL              5 (NULL + datetime)
                            382 LOAD_ATTR                2 (datetime)
                            392 LOAD_CONST              16 (1982)
                            394 LOAD_CONST               7 (12)
                            396 LOAD_CONST              17 (14)
@@ -8137,47 +8225,47 @@
                      flags     : 0
                      code
                         0x9501970065005a0164005a02020065036a0400000000000000006401ac
                         02a6010000ab0100000000000000005a0588006601640384085a06640484
                         005a0788006601640584085a086409640784015a0964085300
                                    0 COPY_FREE_VARS           1
                      
-                     759           2 RESUME                   0
+                     778           2 RESUME                   0
                                    4 LOAD_NAME                0 (__name__)
                                    6 STORE_NAME               1 (__module__)
                                    8 LOAD_CONST               0 ('TestValidators.test_IS_DATETIME.<locals>.DummyTimezone')
                                   10 STORE_NAME               2 (__qualname__)
                      
-                     760          12 PUSH_NULL
+                     779          12 PUSH_NULL
                                   14 LOAD_NAME                3 (datetime)
                                   16 LOAD_ATTR                4 (timedelta)
                                   26 LOAD_CONST               1 (1)
                                   28 KW_NAMES                 2
                                   30 PRECALL                  1
                                   34 CALL                     1
                                   44 STORE_NAME               5 (ONE)
                      
-                     762          46 LOAD_CLOSURE             0 (DummyTimezone)
+                     781          46 LOAD_CLOSURE             0 (DummyTimezone)
                                   48 BUILD_TUPLE              1
-                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 762>)
+                                  50 LOAD_CONST               3 (<code object utcoffset, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 781>)
                                   52 MAKE_FUNCTION            8 (closure)
                                   54 STORE_NAME               6 (utcoffset)
                      
-                     765          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 765>)
+                     784          56 LOAD_CONST               4 (<code object tzname, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 784>)
                                   58 MAKE_FUNCTION            0
                                   60 STORE_NAME               7 (tzname)
                      
-                     768          62 LOAD_CLOSURE             0 (DummyTimezone)
+                     787          62 LOAD_CLOSURE             0 (DummyTimezone)
                                   64 BUILD_TUPLE              1
-                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 768>)
+                                  66 LOAD_CONST               5 (<code object dst, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 787>)
                                   68 MAKE_FUNCTION            8 (closure)
                                   70 STORE_NAME               8 (dst)
                      
-                     771          72 LOAD_CONST               9 ((False,))
-                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 771>)
+                     790          72 LOAD_CONST               9 ((False,))
+                                  74 LOAD_CONST               7 (<code object localize, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 790>)
                                   76 MAKE_FUNCTION            1 (defaults)
                                   78 STORE_NAME               9 (localize)
                                   80 LOAD_CONST               8 (None)
                                   82 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_DATETIME.<locals>.DummyTimezone'
                         1
@@ -8186,85 +8274,85 @@
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           762           2 RESUME                   0
+                           781           2 RESUME                   0
                            
-                           763           4 LOAD_DEREF               2 (DummyTimezone)
+                           782           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'utcoffset'
-                           firstlineno 762
+                           firstlineno 781
                            lnotab 0x0401
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x970064015300
-                           765           0 RESUME                   0
+                           784           0 RESUME                   0
                            
-                           766           2 LOAD_CONST               1 ('UTC+1')
+                           785           2 LOAD_CONST               1 ('UTC+1')
                                          4 RETURN_VALUE
                            consts
                               None
                               'UTC+1'
                            names      ()
                            varnames   ('self', 'dt')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'tzname'
-                           firstlineno 765
+                           firstlineno 784
                            lnotab 0x0201
                         code
                            argcount  : 2
                            nlocals   : 2
                            stacksize : 1
                            flags     : 19
                            code 0x9501970089026a0000000000000000005300
                                          0 COPY_FREE_VARS           1
                            
-                           768           2 RESUME                   0
+                           787           2 RESUME                   0
                            
-                           769           4 LOAD_DEREF               2 (DummyTimezone)
+                           788           4 LOAD_DEREF               2 (DummyTimezone)
                                          6 LOAD_ATTR                0 (ONE)
                                         16 RETURN_VALUE
                            consts
                               None
                            names      ('ONE',)
                            varnames   ('self', 'dt')
                            freevars   ('DummyTimezone',)
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'dst'
-                           firstlineno 768
+                           firstlineno 787
                            lnotab 0x0401
                         False
                         code
                            argcount  : 3
                            nlocals   : 3
                            stacksize : 3
                            flags     : 19
                            code
                               0x97007c01a00000000000000000000000000000000000000000007c00ac
                               01a6010000ab0100000000000000005300
-                           771           0 RESUME                   0
+                           790           0 RESUME                   0
                            
-                           772           2 LOAD_FAST                1 (dt)
+                           791           2 LOAD_FAST                1 (dt)
                                          4 LOAD_METHOD              0 (replace)
                                         26 LOAD_FAST                0 (self)
                                         28 KW_NAMES                 1
                                         30 PRECALL                  1
                                         34 CALL                     1
                                         44 RETURN_VALUE
                            consts
@@ -8272,25 +8360,25 @@
                               ('tzinfo',)
                            names      ('replace',)
                            varnames   ('self', 'dt', 'is_dst')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       'localize'
-                           firstlineno 771
+                           firstlineno 790
                            lnotab 0x0201
                         None
                         (False,)
                      names      ('__name__', '__module__', '__qualname__', 'datetime', 'timedelta', 'ONE', 'utcoffset', 'tzname', 'dst', 'localize')
                      varnames   ()
                      freevars   ('DummyTimezone',)
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyTimezone'
-                     firstlineno 759
+                     firstlineno 778
                      lnotab 0x0c0122020a0306030a03
                   'DummyTimezone'
                   '%Y-%m-%d %H:%M'
                   ('format', 'error_message', 'timezone')
                   '1982-12-14 08:00'
                   1982
                   14
@@ -8298,15 +8386,15 @@
                   0
                names      ('IS_DATETIME', 'assertEqual', 'datetime', 'tzinfo')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ('DummyTimezone',)
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME'
-               firstlineno 749
+               firstlineno 768
                lnotab 0x0401220116015c0116012c05340f0c0116ff12031601
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 8
                flags     : 3
                code
@@ -8342,51 +8430,51 @@
                   000000000001007401000000000000000000007403000000000000000000
                   006a020000000000000000640164026402a6030000ab0300000000000000
                   007403000000000000000000006a020000000000000000640364046405a6
                   030000ab0300000000000000006406ac13a6030000ab0300000000000000
                   007d0102007c016411a6010000ab0100000000000000007d027c00a00300
                   000000000000000000000000000000000000007c026414a6020000ab0200
                   00000000000000010064005300
-               780           0 RESUME                   0
+               799           0 RESUME                   0
                
-               781           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               800           2 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               782          14 LOAD_GLOBAL              3 (NULL + datetime)
+               801          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                2 (date)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 PRECALL                  3
                             46 CALL                     3
                
-               783          56 LOAD_GLOBAL              3 (NULL + datetime)
+               802          56 LOAD_GLOBAL              3 (NULL + datetime)
                             68 LOAD_ATTR                2 (date)
                             78 LOAD_CONST               3 (2009)
                             80 LOAD_CONST               4 (12)
                             82 LOAD_CONST               5 (31)
                             84 PRECALL                  3
                             88 CALL                     3
                
-               784          98 LOAD_CONST               6 ('%m/%d/%Y')
+               803          98 LOAD_CONST               6 ('%m/%d/%Y')
                
-               785         100 LOAD_CONST               7 ('oops')
+               804         100 LOAD_CONST               7 ('oops')
                
-               781         102 KW_NAMES                 8
+               800         102 KW_NAMES                 8
                            104 PRECALL                  4
                            108 CALL                     4
                            118 STORE_FAST               1 (v)
                
-               788         120 PUSH_NULL
+               807         120 PUSH_NULL
                            122 LOAD_FAST                1 (v)
                            124 LOAD_CONST               9 ('03/03/2008')
                            126 PRECALL                  1
                            130 CALL                     1
                            140 STORE_FAST               2 (rtn)
                
-               789         142 LOAD_FAST                0 (self)
+               808         142 LOAD_FAST                0 (self)
                            144 LOAD_METHOD              3 (assertEqual)
                            166 LOAD_FAST                2 (rtn)
                            168 LOAD_GLOBAL              3 (NULL + datetime)
                            180 LOAD_ATTR                2 (date)
                            190 LOAD_CONST               1 (2008)
                            192 LOAD_CONST              10 (3)
                            194 LOAD_CONST              10 (3)
@@ -8394,43 +8482,43 @@
                            200 CALL                     3
                            210 LOAD_CONST               0 (None)
                            212 BUILD_TUPLE              2
                            214 PRECALL                  2
                            218 CALL                     2
                            228 POP_TOP
                
-               790         230 PUSH_NULL
+               809         230 PUSH_NULL
                            232 LOAD_FAST                1 (v)
                            234 LOAD_CONST              11 ('03/03/2010')
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               791         252 LOAD_FAST                0 (self)
+               810         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              3 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_CONST              12 (('03/03/2010', 'oops'))
                            280 PRECALL                  2
                            284 CALL                     2
                            294 POP_TOP
                
-               792         296 PUSH_NULL
+               811         296 PUSH_NULL
                            298 LOAD_FAST                1 (v)
                            300 LOAD_GLOBAL              3 (NULL + datetime)
                            312 LOAD_ATTR                2 (date)
                            322 LOAD_CONST               1 (2008)
                            324 LOAD_CONST              10 (3)
                            326 LOAD_CONST              10 (3)
                            328 PRECALL                  3
                            332 CALL                     3
                            342 PRECALL                  1
                            346 CALL                     1
                            356 STORE_FAST               2 (rtn)
                
-               793         358 LOAD_FAST                0 (self)
+               812         358 LOAD_FAST                0 (self)
                            360 LOAD_METHOD              3 (assertEqual)
                            382 LOAD_FAST                2 (rtn)
                            384 LOAD_GLOBAL              3 (NULL + datetime)
                            396 LOAD_ATTR                2 (date)
                            406 LOAD_CONST               1 (2008)
                            408 LOAD_CONST              10 (3)
                            410 LOAD_CONST              10 (3)
@@ -8438,28 +8526,28 @@
                            416 CALL                     3
                            426 LOAD_CONST               0 (None)
                            428 BUILD_TUPLE              2
                            430 PRECALL                  2
                            434 CALL                     2
                            444 POP_TOP
                
-               794         446 PUSH_NULL
+               813         446 PUSH_NULL
                            448 LOAD_FAST                1 (v)
                            450 LOAD_GLOBAL              3 (NULL + datetime)
                            462 LOAD_ATTR                2 (date)
                            472 LOAD_CONST              13 (2010)
                            474 LOAD_CONST              10 (3)
                            476 LOAD_CONST              10 (3)
                            478 PRECALL                  3
                            482 CALL                     3
                            492 PRECALL                  1
                            496 CALL                     1
                            506 STORE_FAST               2 (rtn)
                
-               795         508 LOAD_FAST                0 (self)
+               814         508 LOAD_FAST                0 (self)
                            510 LOAD_METHOD              3 (assertEqual)
                            532 LOAD_FAST                2 (rtn)
                            534 LOAD_GLOBAL              3 (NULL + datetime)
                            546 LOAD_ATTR                2 (date)
                            556 LOAD_CONST              13 (2010)
                            558 LOAD_CONST              10 (3)
                            560 LOAD_CONST              10 (3)
@@ -8467,111 +8555,111 @@
                            566 CALL                     3
                            576 LOAD_CONST               7 ('oops')
                            578 BUILD_TUPLE              2
                            580 PRECALL                  2
                            584 CALL                     2
                            594 POP_TOP
                
-               796         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               815         596 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            608 LOAD_GLOBAL              3 (NULL + datetime)
                            620 LOAD_ATTR                2 (date)
                            630 LOAD_CONST               3 (2009)
                            632 LOAD_CONST               4 (12)
                            634 LOAD_CONST               5 (31)
                            636 PRECALL                  3
                            640 CALL                     3
                            650 LOAD_CONST               6 ('%m/%d/%Y')
                            652 KW_NAMES                14
                            654 PRECALL                  2
                            658 CALL                     2
                            668 STORE_FAST               1 (v)
                
-               797         670 PUSH_NULL
+               816         670 PUSH_NULL
                            672 LOAD_FAST                1 (v)
                            674 LOAD_CONST              11 ('03/03/2010')
                            676 PRECALL                  1
                            680 CALL                     1
                            690 STORE_FAST               2 (rtn)
                
-               798         692 LOAD_FAST                0 (self)
+               817         692 LOAD_FAST                0 (self)
                            694 LOAD_METHOD              3 (assertEqual)
                            716 LOAD_FAST                2 (rtn)
                            718 LOAD_CONST              15 (('03/03/2010', 'Enter date on or before 12/31/2009'))
                            720 PRECALL                  2
                            724 CALL                     2
                            734 POP_TOP
                
-               799         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               818         736 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                            748 LOAD_GLOBAL              3 (NULL + datetime)
                            760 LOAD_ATTR                2 (date)
                            770 LOAD_CONST               1 (2008)
                            772 LOAD_CONST               2 (1)
                            774 LOAD_CONST               2 (1)
                            776 PRECALL                  3
                            780 CALL                     3
                            790 LOAD_CONST               6 ('%m/%d/%Y')
                            792 KW_NAMES                16
                            794 PRECALL                  2
                            798 CALL                     2
                            808 STORE_FAST               1 (v)
                
-               800         810 PUSH_NULL
+               819         810 PUSH_NULL
                            812 LOAD_FAST                1 (v)
                            814 LOAD_CONST              17 ('03/03/2007')
                            816 PRECALL                  1
                            820 CALL                     1
                            830 STORE_FAST               2 (rtn)
                
-               801         832 LOAD_FAST                0 (self)
+               820         832 LOAD_FAST                0 (self)
                            834 LOAD_METHOD              3 (assertEqual)
                            856 LOAD_FAST                2 (rtn)
                            858 LOAD_CONST              18 (('03/03/2007', 'Enter date on or after 01/01/2008'))
                            860 PRECALL                  2
                            864 CALL                     2
                            874 POP_TOP
                
-               802         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
+               821         876 LOAD_GLOBAL              1 (NULL + IS_DATE_IN_RANGE)
                
-               803         888 LOAD_GLOBAL              3 (NULL + datetime)
+               822         888 LOAD_GLOBAL              3 (NULL + datetime)
                            900 LOAD_ATTR                2 (date)
                            910 LOAD_CONST               1 (2008)
                            912 LOAD_CONST               2 (1)
                            914 LOAD_CONST               2 (1)
                            916 PRECALL                  3
                            920 CALL                     3
                
-               804         930 LOAD_GLOBAL              3 (NULL + datetime)
+               823         930 LOAD_GLOBAL              3 (NULL + datetime)
                            942 LOAD_ATTR                2 (date)
                            952 LOAD_CONST               3 (2009)
                            954 LOAD_CONST               4 (12)
                            956 LOAD_CONST               5 (31)
                            958 PRECALL                  3
                            962 CALL                     3
                
-               805         972 LOAD_CONST               6 ('%m/%d/%Y')
+               824         972 LOAD_CONST               6 ('%m/%d/%Y')
                
-               802         974 KW_NAMES                19
+               821         974 KW_NAMES                19
                            976 PRECALL                  3
                            980 CALL                     3
                            990 STORE_FAST               1 (v)
                
-               807         992 PUSH_NULL
+               826         992 PUSH_NULL
                            994 LOAD_FAST                1 (v)
                            996 LOAD_CONST              17 ('03/03/2007')
                            998 PRECALL                  1
                           1002 CALL                     1
                           1012 STORE_FAST               2 (rtn)
                
-               808        1014 LOAD_FAST                0 (self)
+               827        1014 LOAD_FAST                0 (self)
                           1016 LOAD_METHOD              3 (assertEqual)
                
-               809        1038 LOAD_FAST                2 (rtn)
+               828        1038 LOAD_FAST                2 (rtn)
                           1040 LOAD_CONST              20 (('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009'))
                
-               808        1042 PRECALL                  2
+               827        1042 PRECALL                  2
                           1046 CALL                     2
                           1056 POP_TOP
                           1058 LOAD_CONST               0 (None)
                           1060 RETURN_VALUE
                consts
                   None
                   2008
@@ -8596,15 +8684,15 @@
                   ('03/03/2007', 'Enter date in range 01/01/2008 12/31/2009')
                names      ('IS_DATE_IN_RANGE', 'datetime', 'date', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATE_IN_RANGE'
-               firstlineno 780
+               firstlineno 799
                lnotab
                   0x02010c012a012a01020102fc12071601580116012c013e0158013e0158
                   014a0116012c014a0116012c010c012a012a0102fd12051601180104ff
             code
                argcount  : 1
                nlocals   : 3
                stacksize : 10
@@ -8648,55 +8736,55 @@
                   000000000000007d027c00a0020000000000000000000000000000000000
                   0000007c026419a6020000ab020000000000000000010074010000000000
                   00000000007403000000000000000000006a010000000000000000640564
                   03640664036404a6050000ab050000000000000000641a6408ac1ba60300
                   00ab0300000000000000007d0102007c01641ca6010000ab010000000000
                   0000007d027c00a00200000000000000000000000000000000000000007c
                   02641da6020000ab020000000000000000010064005300
-               812           0 RESUME                   0
+               831           0 RESUME                   0
                
-               813           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               832           2 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               814          14 LOAD_GLOBAL              3 (NULL + datetime)
+               833          14 LOAD_GLOBAL              3 (NULL + datetime)
                             26 LOAD_ATTR                1 (datetime)
                             36 LOAD_CONST               1 (2008)
                             38 LOAD_CONST               2 (1)
                             40 LOAD_CONST               2 (1)
                             42 LOAD_CONST               3 (12)
                             44 LOAD_CONST               4 (20)
                             46 PRECALL                  5
                             50 CALL                     5
                
-               815          60 LOAD_GLOBAL              3 (NULL + datetime)
+               834          60 LOAD_GLOBAL              3 (NULL + datetime)
                             72 LOAD_ATTR                1 (datetime)
                             82 LOAD_CONST               5 (2009)
                             84 LOAD_CONST               3 (12)
                             86 LOAD_CONST               6 (31)
                             88 LOAD_CONST               3 (12)
                             90 LOAD_CONST               4 (20)
                             92 PRECALL                  5
                             96 CALL                     5
                
-               816         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
+               835         106 LOAD_CONST               7 ('%m/%d/%Y %H:%M')
                
-               817         108 LOAD_CONST               8 ('oops')
+               836         108 LOAD_CONST               8 ('oops')
                
-               813         110 KW_NAMES                 9
+               832         110 KW_NAMES                 9
                            112 PRECALL                  4
                            116 CALL                     4
                            126 STORE_FAST               1 (v)
                
-               819         128 PUSH_NULL
+               838         128 PUSH_NULL
                            130 LOAD_FAST                1 (v)
                            132 LOAD_CONST              10 ('03/03/2008 12:40')
                            134 PRECALL                  1
                            138 CALL                     1
                            148 STORE_FAST               2 (rtn)
                
-               820         150 LOAD_FAST                0 (self)
+               839         150 LOAD_FAST                0 (self)
                            152 LOAD_METHOD              2 (assertEqual)
                            174 LOAD_FAST                2 (rtn)
                            176 LOAD_GLOBAL              3 (NULL + datetime)
                            188 LOAD_ATTR                1 (datetime)
                            198 LOAD_CONST               1 (2008)
                            200 LOAD_CONST              11 (3)
                            202 LOAD_CONST              11 (3)
@@ -8706,45 +8794,45 @@
                            212 CALL                     5
                            222 LOAD_CONST               0 (None)
                            224 BUILD_TUPLE              2
                            226 PRECALL                  2
                            230 CALL                     2
                            240 POP_TOP
                
-               821         242 PUSH_NULL
+               840         242 PUSH_NULL
                            244 LOAD_FAST                1 (v)
                            246 LOAD_CONST              13 ('03/03/2010 10:34')
                            248 PRECALL                  1
                            252 CALL                     1
                            262 STORE_FAST               2 (rtn)
                
-               822         264 LOAD_FAST                0 (self)
+               841         264 LOAD_FAST                0 (self)
                            266 LOAD_METHOD              2 (assertEqual)
                            288 LOAD_FAST                2 (rtn)
                            290 LOAD_CONST              14 (('03/03/2010 10:34', 'oops'))
                            292 PRECALL                  2
                            296 CALL                     2
                            306 POP_TOP
                
-               823         308 PUSH_NULL
+               842         308 PUSH_NULL
                            310 LOAD_FAST                1 (v)
                            312 LOAD_GLOBAL              3 (NULL + datetime)
                            324 LOAD_ATTR                1 (datetime)
                            334 LOAD_CONST               1 (2008)
                            336 LOAD_CONST              11 (3)
                            338 LOAD_CONST              11 (3)
                            340 LOAD_CONST              15 (0)
                            342 LOAD_CONST              15 (0)
                            344 PRECALL                  5
                            348 CALL                     5
                            358 PRECALL                  1
                            362 CALL                     1
                            372 STORE_FAST               2 (rtn)
                
-               824         374 LOAD_FAST                0 (self)
+               843         374 LOAD_FAST                0 (self)
                            376 LOAD_METHOD              2 (assertEqual)
                            398 LOAD_FAST                2 (rtn)
                            400 LOAD_GLOBAL              3 (NULL + datetime)
                            412 LOAD_ATTR                1 (datetime)
                            422 LOAD_CONST               1 (2008)
                            424 LOAD_CONST              11 (3)
                            426 LOAD_CONST              11 (3)
@@ -8754,30 +8842,30 @@
                            436 CALL                     5
                            446 LOAD_CONST               0 (None)
                            448 BUILD_TUPLE              2
                            450 PRECALL                  2
                            454 CALL                     2
                            464 POP_TOP
                
-               825         466 PUSH_NULL
+               844         466 PUSH_NULL
                            468 LOAD_FAST                1 (v)
                            470 LOAD_GLOBAL              3 (NULL + datetime)
                            482 LOAD_ATTR                1 (datetime)
                            492 LOAD_CONST              16 (2010)
                            494 LOAD_CONST              11 (3)
                            496 LOAD_CONST              11 (3)
                            498 LOAD_CONST              15 (0)
                            500 LOAD_CONST              15 (0)
                            502 PRECALL                  5
                            506 CALL                     5
                            516 PRECALL                  1
                            520 CALL                     1
                            530 STORE_FAST               2 (rtn)
                
-               826         532 LOAD_FAST                0 (self)
+               845         532 LOAD_FAST                0 (self)
                            534 LOAD_METHOD              2 (assertEqual)
                            556 LOAD_FAST                2 (rtn)
                            558 LOAD_GLOBAL              3 (NULL + datetime)
                            570 LOAD_ATTR                1 (datetime)
                            580 LOAD_CONST              16 (2010)
                            582 LOAD_CONST              11 (3)
                            584 LOAD_CONST              11 (3)
@@ -8787,162 +8875,162 @@
                            594 CALL                     5
                            604 LOAD_CONST               8 ('oops')
                            606 BUILD_TUPLE              2
                            608 PRECALL                  2
                            612 CALL                     2
                            622 POP_TOP
                
-               827         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               846         624 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               828         636 LOAD_GLOBAL              3 (NULL + datetime)
+               847         636 LOAD_GLOBAL              3 (NULL + datetime)
                            648 LOAD_ATTR                1 (datetime)
                            658 LOAD_CONST               5 (2009)
                            660 LOAD_CONST               3 (12)
                            662 LOAD_CONST               6 (31)
                            664 LOAD_CONST               3 (12)
                            666 LOAD_CONST               4 (20)
                            668 PRECALL                  5
                            672 CALL                     5
                            682 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               827         684 KW_NAMES                18
+               846         684 KW_NAMES                18
                            686 PRECALL                  2
                            690 CALL                     2
                            700 STORE_FAST               1 (v)
                
-               830         702 PUSH_NULL
+               849         702 PUSH_NULL
                            704 LOAD_FAST                1 (v)
                            706 LOAD_CONST              19 ('03/03/2010 12:20:00')
                            708 PRECALL                  1
                            712 CALL                     1
                            722 STORE_FAST               2 (rtn)
                
-               831         724 LOAD_FAST                0 (self)
+               850         724 LOAD_FAST                0 (self)
                            726 LOAD_METHOD              2 (assertEqual)
                
-               832         748 LOAD_FAST                2 (rtn)
+               851         748 LOAD_FAST                2 (rtn)
                
-               833         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
+               852         750 LOAD_CONST              20 (('03/03/2010 12:20:00', 'Enter date and time on or before 12/31/2009 12:20:00'))
                
-               831         752 PRECALL                  2
+               850         752 PRECALL                  2
                            756 CALL                     2
                            766 POP_TOP
                
-               838         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               857         768 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               839         780 LOAD_GLOBAL              3 (NULL + datetime)
+               858         780 LOAD_GLOBAL              3 (NULL + datetime)
                            792 LOAD_ATTR                1 (datetime)
                            802 LOAD_CONST               1 (2008)
                            804 LOAD_CONST               2 (1)
                            806 LOAD_CONST               2 (1)
                            808 LOAD_CONST               3 (12)
                            810 LOAD_CONST               4 (20)
                            812 PRECALL                  5
                            816 CALL                     5
                            826 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               838         828 KW_NAMES                21
+               857         828 KW_NAMES                21
                            830 PRECALL                  2
                            834 CALL                     2
                            844 STORE_FAST               1 (v)
                
-               841         846 PUSH_NULL
+               860         846 PUSH_NULL
                            848 LOAD_FAST                1 (v)
                            850 LOAD_CONST              22 ('03/03/2007 12:20:00')
                            852 PRECALL                  1
                            856 CALL                     1
                            866 STORE_FAST               2 (rtn)
                
-               842         868 LOAD_FAST                0 (self)
+               861         868 LOAD_FAST                0 (self)
                            870 LOAD_METHOD              2 (assertEqual)
                
-               843         892 LOAD_FAST                2 (rtn)
+               862         892 LOAD_FAST                2 (rtn)
                
-               844         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
+               863         894 LOAD_CONST              23 (('03/03/2007 12:20:00', 'Enter date and time on or after 01/01/2008 12:20:00'))
                
-               842         896 PRECALL                  2
+               861         896 PRECALL                  2
                            900 CALL                     2
                            910 POP_TOP
                
-               849         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               868         912 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               850         924 LOAD_GLOBAL              3 (NULL + datetime)
+               869         924 LOAD_GLOBAL              3 (NULL + datetime)
                            936 LOAD_ATTR                1 (datetime)
                            946 LOAD_CONST               1 (2008)
                            948 LOAD_CONST               2 (1)
                            950 LOAD_CONST               2 (1)
                            952 LOAD_CONST               3 (12)
                            954 LOAD_CONST               4 (20)
                            956 PRECALL                  5
                            960 CALL                     5
                
-               851         970 LOAD_GLOBAL              3 (NULL + datetime)
+               870         970 LOAD_GLOBAL              3 (NULL + datetime)
                            982 LOAD_ATTR                1 (datetime)
                            992 LOAD_CONST               5 (2009)
                            994 LOAD_CONST               3 (12)
                            996 LOAD_CONST               6 (31)
                            998 LOAD_CONST               3 (12)
                           1000 LOAD_CONST               4 (20)
                           1002 PRECALL                  5
                           1006 CALL                     5
                
-               852        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
+               871        1016 LOAD_CONST              17 ('%m/%d/%Y %H:%M:%S')
                
-               849        1018 KW_NAMES                24
+               868        1018 KW_NAMES                24
                           1020 PRECALL                  3
                           1024 CALL                     3
                           1034 STORE_FAST               1 (v)
                
-               854        1036 PUSH_NULL
+               873        1036 PUSH_NULL
                           1038 LOAD_FAST                1 (v)
                           1040 LOAD_CONST              22 ('03/03/2007 12:20:00')
                           1042 PRECALL                  1
                           1046 CALL                     1
                           1056 STORE_FAST               2 (rtn)
                
-               855        1058 LOAD_FAST                0 (self)
+               874        1058 LOAD_FAST                0 (self)
                           1060 LOAD_METHOD              2 (assertEqual)
                
-               856        1082 LOAD_FAST                2 (rtn)
+               875        1082 LOAD_FAST                2 (rtn)
                
-               857        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
+               876        1084 LOAD_CONST              25 (('03/03/2007 12:20:00', 'Enter date and time in range 01/01/2008 12:20:00 12/31/2009 12:20:00'))
                
-               855        1086 PRECALL                  2
+               874        1086 PRECALL                  2
                           1090 CALL                     2
                           1100 POP_TOP
                
-               862        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
+               881        1102 LOAD_GLOBAL              1 (NULL + IS_DATETIME_IN_RANGE)
                
-               863        1114 LOAD_GLOBAL              3 (NULL + datetime)
+               882        1114 LOAD_GLOBAL              3 (NULL + datetime)
                           1126 LOAD_ATTR                1 (datetime)
                           1136 LOAD_CONST               5 (2009)
                           1138 LOAD_CONST               3 (12)
                           1140 LOAD_CONST               6 (31)
                           1142 LOAD_CONST               3 (12)
                           1144 LOAD_CONST               4 (20)
                           1146 PRECALL                  5
                           1150 CALL                     5
                
-               864        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
+               883        1160 LOAD_CONST              26 ('%Y-%m-%d %H:%M:%S')
                
-               865        1162 LOAD_CONST               8 ('oops')
+               884        1162 LOAD_CONST               8 ('oops')
                
-               862        1164 KW_NAMES                27
+               881        1164 KW_NAMES                27
                           1166 PRECALL                  3
                           1170 CALL                     3
                           1180 STORE_FAST               1 (v)
                
-               867        1182 PUSH_NULL
+               886        1182 PUSH_NULL
                           1184 LOAD_FAST                1 (v)
                           1186 LOAD_CONST              28 ('clearly not a date')
                           1188 PRECALL                  1
                           1192 CALL                     1
                           1202 STORE_FAST               2 (rtn)
                
-               868        1204 LOAD_FAST                0 (self)
+               887        1204 LOAD_FAST                0 (self)
                           1206 LOAD_METHOD              2 (assertEqual)
                           1228 LOAD_FAST                2 (rtn)
                           1230 LOAD_CONST              29 (('clearly not a date', 'oops'))
                           1232 PRECALL                  2
                           1236 CALL                     2
                           1246 POP_TOP
                           1248 LOAD_CONST               0 (None)
@@ -8980,15 +9068,15 @@
                   ('clearly not a date', 'oops')
                names      ('IS_DATETIME_IN_RANGE', 'datetime', 'assertEqual')
                varnames   ('self', 'v', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_DATETIME_IN_RANGE'
-               firstlineno 812
+               firstlineno 831
                lnotab
                   0x02010c012e012e01020102fc120616015c0116012c0142015c0142015c
                   010c0130ff120316011801020102fe10070c0130ff120316011801020102
                   fe10070c012e012e0102fd120516011801020102fe10070c012e01020102
                   fd12051601
             code
                argcount  : 1
@@ -9019,102 +9107,102 @@
                   000000000000006408ac0aa6020000ab0200000000000000006700640ba2
                   01a6010000ab0100000000000000007d027c00a002000000000000000000
                   00000000000000000000007c026700640ba201640c6602a6020000ab0200
                   00000000000000010002007401000000000000000000006406ac07a60100
                   00ab010000000000000000640da6010000ab0100000000000000007d027c
                   00a00200000000000000000000000000000000000000007c02640ea60200
                   00ab020000000000000000010064005300
-               870           0 RESUME                   0
+               889           0 RESUME                   0
                
-               871           2 BUILD_LIST               0
+               890           2 BUILD_LIST               0
                              4 LOAD_CONST               1 ((0, 1, 2, 3, 4))
                              6 LIST_EXTEND              1
                              8 STORE_FAST               1 (values)
                
-               872          10 PUSH_NULL
+               891          10 PUSH_NULL
                             12 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                             24 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                             36 LOAD_CONST               2 (0)
                             38 LOAD_CONST               3 (10)
                             40 PRECALL                  2
                             44 CALL                     2
                             54 PRECALL                  1
                             58 CALL                     1
                             68 LOAD_FAST                1 (values)
                             70 PRECALL                  1
                             74 CALL                     1
                             84 STORE_FAST               2 (rtn)
                
-               873          86 LOAD_FAST                0 (self)
+               892          86 LOAD_FAST                0 (self)
                             88 LOAD_METHOD              2 (assertEqual)
                            110 LOAD_FAST                2 (rtn)
                            112 LOAD_FAST                1 (values)
                            114 LOAD_CONST               0 (None)
                            116 BUILD_TUPLE              2
                            118 PRECALL                  2
                            122 CALL                     2
                            132 POP_TOP
                
-               874         134 LOAD_FAST                1 (values)
+               893         134 LOAD_FAST                1 (values)
                            136 LOAD_METHOD              3 (append)
                            158 LOAD_CONST               4 (11)
                            160 PRECALL                  1
                            164 CALL                     1
                            174 POP_TOP
                
-               875         176 PUSH_NULL
+               894         176 PUSH_NULL
                            178 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            190 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            202 LOAD_CONST               2 (0)
                            204 LOAD_CONST               3 (10)
                            206 PRECALL                  2
                            210 CALL                     2
                            220 PRECALL                  1
                            224 CALL                     1
                            234 LOAD_FAST                1 (values)
                            236 PRECALL                  1
                            240 CALL                     1
                            250 STORE_FAST               2 (rtn)
                
-               876         252 LOAD_FAST                0 (self)
+               895         252 LOAD_FAST                0 (self)
                            254 LOAD_METHOD              2 (assertEqual)
                            276 LOAD_FAST                2 (rtn)
                            278 LOAD_FAST                1 (values)
                            280 LOAD_CONST               5 ('Enter an integer between 0 and 9')
                            282 BUILD_TUPLE              2
                            284 PRECALL                  2
                            288 CALL                     2
                            298 POP_TOP
                
-               877         300 PUSH_NULL
+               896         300 PUSH_NULL
                            302 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            314 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            326 LOAD_CONST               2 (0)
                            328 LOAD_CONST               3 (10)
                            330 PRECALL                  2
                            334 CALL                     2
                            344 PRECALL                  1
                            348 CALL                     1
                            358 LOAD_CONST               6 (1)
                            360 PRECALL                  1
                            364 CALL                     1
                            374 STORE_FAST               2 (rtn)
                
-               878         376 LOAD_FAST                0 (self)
+               897         376 LOAD_FAST                0 (self)
                            378 LOAD_METHOD              2 (assertEqual)
                            400 LOAD_FAST                2 (rtn)
                            402 LOAD_CONST               6 (1)
                            404 BUILD_LIST               1
                            406 LOAD_CONST               0 (None)
                            408 BUILD_TUPLE              2
                            410 PRECALL                  2
                            414 CALL                     2
                            424 POP_TOP
                
-               879         426 PUSH_NULL
+               898         426 PUSH_NULL
                            428 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            440 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            452 LOAD_CONST               2 (0)
                            454 LOAD_CONST               3 (10)
                            456 PRECALL                  2
                            460 CALL                     2
                            470 LOAD_CONST               3 (10)
@@ -9124,27 +9212,27 @@
                            488 LOAD_CONST               6 (1)
                            490 LOAD_CONST               8 (2)
                            492 BUILD_LIST               2
                            494 PRECALL                  1
                            498 CALL                     1
                            508 STORE_FAST               2 (rtn)
                
-               880         510 LOAD_FAST                0 (self)
+               899         510 LOAD_FAST                0 (self)
                            512 LOAD_METHOD              2 (assertEqual)
                            534 LOAD_FAST                2 (rtn)
                            536 LOAD_CONST               6 (1)
                            538 LOAD_CONST               8 (2)
                            540 BUILD_LIST               2
                            542 LOAD_CONST               9 ('Minimum length is 10')
                            544 BUILD_TUPLE              2
                            546 PRECALL                  2
                            550 CALL                     2
                            560 POP_TOP
                
-               881         562 PUSH_NULL
+               900         562 PUSH_NULL
                            564 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            576 LOAD_GLOBAL              3 (NULL + IS_INT_IN_RANGE)
                            588 LOAD_CONST               2 (0)
                            590 LOAD_CONST               3 (10)
                            592 PRECALL                  2
                            596 CALL                     2
                            606 LOAD_CONST               8 (2)
@@ -9154,38 +9242,38 @@
                            624 BUILD_LIST               0
                            626 LOAD_CONST              11 ((1, 2, 3))
                            628 LIST_EXTEND              1
                            630 PRECALL                  1
                            634 CALL                     1
                            644 STORE_FAST               2 (rtn)
                
-               882         646 LOAD_FAST                0 (self)
+               901         646 LOAD_FAST                0 (self)
                            648 LOAD_METHOD              2 (assertEqual)
                            670 LOAD_FAST                2 (rtn)
                            672 BUILD_LIST               0
                            674 LOAD_CONST              11 ((1, 2, 3))
                            676 LIST_EXTEND              1
                            678 LOAD_CONST              12 ('Maximum length is 2')
                            680 BUILD_TUPLE              2
                            682 PRECALL                  2
                            686 CALL                     2
                            696 POP_TOP
                
-               884         698 PUSH_NULL
+               903         698 PUSH_NULL
                            700 LOAD_GLOBAL              1 (NULL + IS_LIST_OF)
                            712 LOAD_CONST               6 (1)
                            714 KW_NAMES                 7
                            716 PRECALL                  1
                            720 CALL                     1
                            730 LOAD_CONST              13 ('')
                            732 PRECALL                  1
                            736 CALL                     1
                            746 STORE_FAST               2 (rtn)
                
-               885         748 LOAD_FAST                0 (self)
+               904         748 LOAD_FAST                0 (self)
                            750 LOAD_METHOD              2 (assertEqual)
                            772 LOAD_FAST                2 (rtn)
                            774 LOAD_CONST              14 (('', 'Minimum length is 1'))
                            776 PRECALL                  2
                            780 CALL                     2
                            790 POP_TOP
                            792 LOAD_CONST               0 (None)
@@ -9208,15 +9296,15 @@
                   ('', 'Minimum length is 1')
                names      ('IS_LIST_OF', 'IS_INT_IN_RANGE', 'assertEqual', 'append')
                varnames   ('self', 'values', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LIST_OF'
-               firstlineno 870
+               firstlineno 889
                lnotab 0x020108014c0130012a014c0130014c01320154013401540134023201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9226,60 +9314,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               887           0 RESUME                   0
+               906           0 RESUME                   0
                
-               888           2 PUSH_NULL
+               907           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('ABC')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               889          48 LOAD_FAST                0 (self)
+               908          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               890          92 PUSH_NULL
+               909          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'ABC')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               891         138 LOAD_FAST                0 (self)
+               910         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'abc', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               892         182 PUSH_NULL
+               911         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_LOWER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               893         228 LOAD_FAST                0 (self)
+               912         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9294,15 +9382,15 @@
                   ('', None)
                names      ('IS_LOWER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_LOWER'
-               firstlineno 887
+               firstlineno 906
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9312,60 +9400,60 @@
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006403a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016404a6020000ab0200000000000000
                   0001000200740100000000000000000000a6000000ab0000000000000000
                   006405a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016406a6020000ab0200000000000000
                   00010064005300
-               895           0 RESUME                   0
+               914           0 RESUME                   0
                
-               896           2 PUSH_NULL
+               915           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               897          48 LOAD_FAST                0 (self)
+               916          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('ABC', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               898          92 PUSH_NULL
+               917          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 (b'abc')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               899         138 LOAD_FAST                0 (self)
+               918         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               4 ((b'ABC', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               900         182 PUSH_NULL
+               919         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_UPPER)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               5 ('')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               901         228 LOAD_FAST                0 (self)
+               920         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               6 (('', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                            272 LOAD_CONST               0 (None)
@@ -9380,15 +9468,15 @@
                   ('', None)
                names      ('IS_UPPER', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPPER'
-               firstlineno 895
+               firstlineno 914
                lnotab 0x02012e012c012e012c012e01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
@@ -9447,346 +9535,346 @@
                   000000000000006416ac1aa6010000ab010000000000000000641ca60100
                   00ab0100000000000000007d017c00a00100000000000000000000000000
                   000000000000007c01641da6020000ab0200000000000000000100020074
                   01000000000000000000006418ac1aa6010000ab01000000000000000064
                   1ca6010000ab0100000000000000007d017c00a001000000000000000000
                   00000000000000000000007c01641ea6020000ab02000000000000000001
                   0064005300
-               903           0 RESUME                   0
+               922           0 RESUME                   0
                
-               904           2 PUSH_NULL
+               923           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                             16 PRECALL                  0
                             20 CALL                     0
                             30 LOAD_CONST               1 ('abc123')
                             32 PRECALL                  1
                             36 CALL                     1
                             46 STORE_FAST               1 (rtn)
                
-               905          48 LOAD_FAST                0 (self)
+               924          48 LOAD_FAST                0 (self)
                             50 LOAD_METHOD              1 (assertEqual)
                             72 LOAD_FAST                1 (rtn)
                             74 LOAD_CONST               2 (('abc123', None))
                             76 PRECALL                  2
                             80 CALL                     2
                             90 POP_TOP
                
-               906          92 PUSH_NULL
+               925          92 PUSH_NULL
                             94 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            106 PRECALL                  0
                            110 CALL                     0
                            120 LOAD_CONST               3 ('ABC123')
                            122 PRECALL                  1
                            126 CALL                     1
                            136 STORE_FAST               1 (rtn)
                
-               907         138 LOAD_FAST                0 (self)
+               926         138 LOAD_FAST                0 (self)
                            140 LOAD_METHOD              1 (assertEqual)
                            162 LOAD_FAST                1 (rtn)
                            164 LOAD_CONST               2 (('abc123', None))
                            166 PRECALL                  2
                            170 CALL                     2
                            180 POP_TOP
                
-               908         182 PUSH_NULL
+               927         182 PUSH_NULL
                            184 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            196 PRECALL                  0
                            200 CALL                     0
                            210 LOAD_CONST               4 ('abc-123')
                            212 PRECALL                  1
                            216 CALL                     1
                            226 STORE_FAST               1 (rtn)
                
-               909         228 LOAD_FAST                0 (self)
+               928         228 LOAD_FAST                0 (self)
                            230 LOAD_METHOD              1 (assertEqual)
                            252 LOAD_FAST                1 (rtn)
                            254 LOAD_CONST               5 (('abc-123', None))
                            256 PRECALL                  2
                            260 CALL                     2
                            270 POP_TOP
                
-               910         272 PUSH_NULL
+               929         272 PUSH_NULL
                            274 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            286 PRECALL                  0
                            290 CALL                     0
                            300 LOAD_CONST               6 ('abc--123')
                            302 PRECALL                  1
                            306 CALL                     1
                            316 STORE_FAST               1 (rtn)
                
-               911         318 LOAD_FAST                0 (self)
+               930         318 LOAD_FAST                0 (self)
                            320 LOAD_METHOD              1 (assertEqual)
                            342 LOAD_FAST                1 (rtn)
                            344 LOAD_CONST               5 (('abc-123', None))
                            346 PRECALL                  2
                            350 CALL                     2
                            360 POP_TOP
                
-               912         362 PUSH_NULL
+               931         362 PUSH_NULL
                            364 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            376 PRECALL                  0
                            380 CALL                     0
                            390 LOAD_CONST               7 ('abc 123')
                            392 PRECALL                  1
                            396 CALL                     1
                            406 STORE_FAST               1 (rtn)
                
-               913         408 LOAD_FAST                0 (self)
+               932         408 LOAD_FAST                0 (self)
                            410 LOAD_METHOD              1 (assertEqual)
                            432 LOAD_FAST                1 (rtn)
                            434 LOAD_CONST               5 (('abc-123', None))
                            436 PRECALL                  2
                            440 CALL                     2
                            450 POP_TOP
                
-               914         452 PUSH_NULL
+               933         452 PUSH_NULL
                            454 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            466 PRECALL                  0
                            470 CALL                     0
                            480 LOAD_CONST               8 ('abc\t_123')
                            482 PRECALL                  1
                            486 CALL                     1
                            496 STORE_FAST               1 (rtn)
                
-               915         498 LOAD_FAST                0 (self)
+               934         498 LOAD_FAST                0 (self)
                            500 LOAD_METHOD              1 (assertEqual)
                            522 LOAD_FAST                1 (rtn)
                            524 LOAD_CONST               5 (('abc-123', None))
                            526 PRECALL                  2
                            530 CALL                     2
                            540 POP_TOP
                
-               916         542 PUSH_NULL
+               935         542 PUSH_NULL
                            544 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            556 PRECALL                  0
                            560 CALL                     0
                            570 LOAD_CONST               9 ('-abc-')
                            572 PRECALL                  1
                            576 CALL                     1
                            586 STORE_FAST               1 (rtn)
                
-               917         588 LOAD_FAST                0 (self)
+               936         588 LOAD_FAST                0 (self)
                            590 LOAD_METHOD              1 (assertEqual)
                            612 LOAD_FAST                1 (rtn)
                            614 LOAD_CONST              10 (('abc', None))
                            616 PRECALL                  2
                            620 CALL                     2
                            630 POP_TOP
                
-               918         632 PUSH_NULL
+               937         632 PUSH_NULL
                            634 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            646 PRECALL                  0
                            650 CALL                     0
                            660 LOAD_CONST              11 ('--a--b--_ -c--')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               919         678 LOAD_FAST                0 (self)
+               938         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              1 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST              12 (('a-b-c', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               920         722 PUSH_NULL
+               939         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            736 PRECALL                  0
                            740 CALL                     0
                            750 LOAD_CONST              13 ('abc&amp;123')
                            752 PRECALL                  1
                            756 CALL                     1
                            766 STORE_FAST               1 (rtn)
                
-               921         768 LOAD_FAST                0 (self)
+               940         768 LOAD_FAST                0 (self)
                            770 LOAD_METHOD              1 (assertEqual)
                            792 LOAD_FAST                1 (rtn)
                            794 LOAD_CONST               2 (('abc123', None))
                            796 PRECALL                  2
                            800 CALL                     2
                            810 POP_TOP
                
-               922         812 PUSH_NULL
+               941         812 PUSH_NULL
                            814 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            826 PRECALL                  0
                            830 CALL                     0
                            840 LOAD_CONST              14 ('abc&amp;123&amp;def')
                            842 PRECALL                  1
                            846 CALL                     1
                            856 STORE_FAST               1 (rtn)
                
-               923         858 LOAD_FAST                0 (self)
+               942         858 LOAD_FAST                0 (self)
                            860 LOAD_METHOD              1 (assertEqual)
                            882 LOAD_FAST                1 (rtn)
                            884 LOAD_CONST              15 (('abc123def', None))
                            886 PRECALL                  2
                            890 CALL                     2
                            900 POP_TOP
                
-               924         902 PUSH_NULL
+               943         902 PUSH_NULL
                            904 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                            916 PRECALL                  0
                            920 CALL                     0
                            930 LOAD_CONST              16 ('')
                            932 PRECALL                  1
                            936 CALL                     1
                            946 STORE_FAST               1 (rtn)
                
-               925         948 LOAD_FAST                0 (self)
+               944         948 LOAD_FAST                0 (self)
                            950 LOAD_METHOD              1 (assertEqual)
                            972 LOAD_FAST                1 (rtn)
                            974 LOAD_CONST              17 (('n', None))
                            976 PRECALL                  2
                            980 CALL                     2
                            990 POP_TOP
                
-               926         992 PUSH_NULL
+               945         992 PUSH_NULL
                            994 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1006 LOAD_CONST              18 (4)
                           1008 KW_NAMES                19
                           1010 PRECALL                  1
                           1014 CALL                     1
                           1024 LOAD_CONST               1 ('abc123')
                           1026 PRECALL                  1
                           1030 CALL                     1
                           1040 STORE_FAST               1 (rtn)
                
-               927        1042 LOAD_FAST                0 (self)
+               946        1042 LOAD_FAST                0 (self)
                           1044 LOAD_METHOD              1 (assertEqual)
                           1066 LOAD_FAST                1 (rtn)
                           1068 LOAD_CONST              20 (('abc1', None))
                           1070 PRECALL                  2
                           1074 CALL                     2
                           1084 POP_TOP
                
-               928        1086 PUSH_NULL
+               947        1086 PUSH_NULL
                           1088 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1100 PRECALL                  0
                           1104 CALL                     0
                           1114 LOAD_CONST              21 ('abc_123')
                           1116 PRECALL                  1
                           1120 CALL                     1
                           1130 STORE_FAST               1 (rtn)
                
-               929        1132 LOAD_FAST                0 (self)
+               948        1132 LOAD_FAST                0 (self)
                           1134 LOAD_METHOD              1 (assertEqual)
                           1156 LOAD_FAST                1 (rtn)
                           1158 LOAD_CONST               5 (('abc-123', None))
                           1160 PRECALL                  2
                           1164 CALL                     2
                           1174 POP_TOP
                
-               930        1176 PUSH_NULL
+               949        1176 PUSH_NULL
                           1178 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1190 LOAD_CONST              22 (False)
                           1192 KW_NAMES                23
                           1194 PRECALL                  1
                           1198 CALL                     1
                           1208 LOAD_CONST              21 ('abc_123')
                           1210 PRECALL                  1
                           1214 CALL                     1
                           1224 STORE_FAST               1 (rtn)
                
-               931        1226 LOAD_FAST                0 (self)
+               950        1226 LOAD_FAST                0 (self)
                           1228 LOAD_METHOD              1 (assertEqual)
                           1250 LOAD_FAST                1 (rtn)
                           1252 LOAD_CONST               5 (('abc-123', None))
                           1254 PRECALL                  2
                           1258 CALL                     2
                           1268 POP_TOP
                
-               932        1270 PUSH_NULL
+               951        1270 PUSH_NULL
                           1272 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1284 LOAD_CONST              24 (True)
                           1286 KW_NAMES                23
                           1288 PRECALL                  1
                           1292 CALL                     1
                           1302 LOAD_CONST              21 ('abc_123')
                           1304 PRECALL                  1
                           1308 CALL                     1
                           1318 STORE_FAST               1 (rtn)
                
-               933        1320 LOAD_FAST                0 (self)
+               952        1320 LOAD_FAST                0 (self)
                           1322 LOAD_METHOD              1 (assertEqual)
                           1344 LOAD_FAST                1 (rtn)
                           1346 LOAD_CONST              25 (('abc_123', None))
                           1348 PRECALL                  2
                           1352 CALL                     2
                           1362 POP_TOP
                
-               934        1364 PUSH_NULL
+               953        1364 PUSH_NULL
                           1366 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1378 LOAD_CONST              22 (False)
                           1380 KW_NAMES                26
                           1382 PRECALL                  1
                           1386 CALL                     1
                           1396 LOAD_CONST              27 ('abc')
                           1398 PRECALL                  1
                           1402 CALL                     1
                           1412 STORE_FAST               1 (rtn)
                
-               935        1414 LOAD_FAST                0 (self)
+               954        1414 LOAD_FAST                0 (self)
                           1416 LOAD_METHOD              1 (assertEqual)
                           1438 LOAD_FAST                1 (rtn)
                           1440 LOAD_CONST              10 (('abc', None))
                           1442 PRECALL                  2
                           1446 CALL                     2
                           1456 POP_TOP
                
-               936        1458 PUSH_NULL
+               955        1458 PUSH_NULL
                           1460 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1472 LOAD_CONST              24 (True)
                           1474 KW_NAMES                26
                           1476 PRECALL                  1
                           1480 CALL                     1
                           1490 LOAD_CONST              27 ('abc')
                           1492 PRECALL                  1
                           1496 CALL                     1
                           1506 STORE_FAST               1 (rtn)
                
-               937        1508 LOAD_FAST                0 (self)
+               956        1508 LOAD_FAST                0 (self)
                           1510 LOAD_METHOD              1 (assertEqual)
                           1532 LOAD_FAST                1 (rtn)
                           1534 LOAD_CONST              10 (('abc', None))
                           1536 PRECALL                  2
                           1540 CALL                     2
                           1550 POP_TOP
                
-               938        1552 PUSH_NULL
+               957        1552 PUSH_NULL
                           1554 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1566 LOAD_CONST              22 (False)
                           1568 KW_NAMES                26
                           1570 PRECALL                  1
                           1574 CALL                     1
                           1584 LOAD_CONST              28 ('a bc')
                           1586 PRECALL                  1
                           1590 CALL                     1
                           1600 STORE_FAST               1 (rtn)
                
-               939        1602 LOAD_FAST                0 (self)
+               958        1602 LOAD_FAST                0 (self)
                           1604 LOAD_METHOD              1 (assertEqual)
                           1626 LOAD_FAST                1 (rtn)
                           1628 LOAD_CONST              29 (('a-bc', None))
                           1630 PRECALL                  2
                           1634 CALL                     2
                           1644 POP_TOP
                
-               940        1646 PUSH_NULL
+               959        1646 PUSH_NULL
                           1648 LOAD_GLOBAL              1 (NULL + IS_SLUG)
                           1660 LOAD_CONST              24 (True)
                           1662 KW_NAMES                26
                           1664 PRECALL                  1
                           1668 CALL                     1
                           1678 LOAD_CONST              28 ('a bc')
                           1680 PRECALL                  1
                           1684 CALL                     1
                           1694 STORE_FAST               1 (rtn)
                
-               941        1696 LOAD_FAST                0 (self)
+               960        1696 LOAD_FAST                0 (self)
                           1698 LOAD_METHOD              1 (assertEqual)
                           1720 LOAD_FAST                1 (rtn)
                           1722 LOAD_CONST              30 (('a bc', 'Must be slug'))
                           1724 PRECALL                  2
                           1728 CALL                     2
                           1738 POP_TOP
                           1740 LOAD_CONST               0 (None)
@@ -9825,15 +9913,15 @@
                   ('a bc', 'Must be slug')
                names      ('IS_SLUG', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_SLUG'
-               firstlineno 903
+               firstlineno 922
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c012e012c0132012c012e012c0132012c0132
                   012c0132012c0132012c0132012c013201
             code
                argcount  : 1
                nlocals   : 2
@@ -9874,17 +9962,17 @@
                   0000000000640cac0da6010000ab01000000000000000074030000000000
                   0000000000a6000000ab0000000000000000006702a6010000ab01000000
                   0000000000a0070000000000000000000000000000000000000000740b00
                   0000000000000000006a060000000000000000640e640a640ba6030000ab
                   030000000000000000a6010000ab0100000000000000007d017c00a00300
                   000000000000000000000000000000000000007c01640fa6020000ab0200
                   00000000000000010064005300
-               943           0 RESUME                   0
+               962           0 RESUME                   0
                
-               944           2 PUSH_NULL
+               963           2 PUSH_NULL
                              4 LOAD_GLOBAL              1 (NULL + ANY_OF)
                             16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             28 PRECALL                  0
                             32 CALL                     0
                             42 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                             54 PRECALL                  0
                             58 CALL                     0
@@ -9892,23 +9980,23 @@
                             70 PRECALL                  1
                             74 CALL                     1
                             84 LOAD_CONST               1 ('a@b.co')
                             86 PRECALL                  1
                             90 CALL                     1
                            100 STORE_FAST               1 (rtn)
                
-               945         102 LOAD_FAST                0 (self)
+               964         102 LOAD_FAST                0 (self)
                            104 LOAD_METHOD              3 (assertEqual)
                            126 LOAD_FAST                1 (rtn)
                            128 LOAD_CONST               2 (('a@b.co', None))
                            130 PRECALL                  2
                            134 CALL                     2
                            144 POP_TOP
                
-               946         146 PUSH_NULL
+               965         146 PUSH_NULL
                            148 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            160 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            172 PRECALL                  0
                            176 CALL                     0
                            186 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            198 PRECALL                  0
                            202 CALL                     0
@@ -9916,23 +10004,23 @@
                            214 PRECALL                  1
                            218 CALL                     1
                            228 LOAD_CONST               3 ('abco')
                            230 PRECALL                  1
                            234 CALL                     1
                            244 STORE_FAST               1 (rtn)
                
-               947         246 LOAD_FAST                0 (self)
+               966         246 LOAD_FAST                0 (self)
                            248 LOAD_METHOD              3 (assertEqual)
                            270 LOAD_FAST                1 (rtn)
                            272 LOAD_CONST               4 (('abco', None))
                            274 PRECALL                  2
                            278 CALL                     2
                            288 POP_TOP
                
-               948         290 PUSH_NULL
+               967         290 PUSH_NULL
                            292 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            304 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            316 PRECALL                  0
                            320 CALL                     0
                            330 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            342 PRECALL                  0
                            346 CALL                     0
@@ -9940,23 +10028,23 @@
                            358 PRECALL                  1
                            362 CALL                     1
                            372 LOAD_CONST               5 ('@ab.co')
                            374 PRECALL                  1
                            378 CALL                     1
                            388 STORE_FAST               1 (rtn)
                
-               949         390 LOAD_FAST                0 (self)
+               968         390 LOAD_FAST                0 (self)
                            392 LOAD_METHOD              3 (assertEqual)
                            414 LOAD_FAST                1 (rtn)
                            416 LOAD_CONST               6 (('@ab.co', 'Enter only letters, numbers, and underscore'))
                            418 PRECALL                  2
                            422 CALL                     2
                            432 POP_TOP
                
-               950         434 PUSH_NULL
+               969         434 PUSH_NULL
                            436 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            448 LOAD_GLOBAL              5 (NULL + IS_ALPHANUMERIC)
                            460 PRECALL                  0
                            464 CALL                     0
                            474 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            486 PRECALL                  0
                            490 CALL                     0
@@ -9964,23 +10052,23 @@
                            502 PRECALL                  1
                            506 CALL                     1
                            516 LOAD_CONST               5 ('@ab.co')
                            518 PRECALL                  1
                            522 CALL                     1
                            532 STORE_FAST               1 (rtn)
                
-               951         534 LOAD_FAST                0 (self)
+               970         534 LOAD_FAST                0 (self)
                            536 LOAD_METHOD              3 (assertEqual)
                            558 LOAD_FAST                1 (rtn)
                            560 LOAD_CONST               7 (('@ab.co', 'Enter a valid email address'))
                            562 PRECALL                  2
                            566 CALL                     2
                            576 POP_TOP
                
-               952         578 PUSH_NULL
+               971         578 PUSH_NULL
                            580 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            592 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            604 PRECALL                  0
                            608 CALL                     0
                            618 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            630 PRECALL                  0
                            634 CALL                     0
@@ -9988,23 +10076,23 @@
                            646 PRECALL                  1
                            650 CALL                     1
                            660 LOAD_CONST               1 ('a@b.co')
                            662 PRECALL                  1
                            666 CALL                     1
                            676 STORE_FAST               1 (rtn)
                
-               953         678 LOAD_FAST                0 (self)
+               972         678 LOAD_FAST                0 (self)
                            680 LOAD_METHOD              3 (assertEqual)
                            702 LOAD_FAST                1 (rtn)
                            704 LOAD_CONST               2 (('a@b.co', None))
                            706 PRECALL                  2
                            710 CALL                     2
                            720 POP_TOP
                
-               954         722 PUSH_NULL
+               973         722 PUSH_NULL
                            724 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            736 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            748 PRECALL                  0
                            752 CALL                     0
                            762 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            774 PRECALL                  0
                            778 CALL                     0
@@ -10012,15 +10100,15 @@
                            790 PRECALL                  1
                            794 CALL                     1
                            804 LOAD_CONST               8 ('1982-12-14')
                            806 PRECALL                  1
                            810 CALL                     1
                            820 STORE_FAST               1 (rtn)
                
-               955         822 LOAD_FAST                0 (self)
+               974         822 LOAD_FAST                0 (self)
                            824 LOAD_METHOD              3 (assertEqual)
                            846 LOAD_FAST                1 (rtn)
                            848 LOAD_GLOBAL             11 (NULL + datetime)
                            860 LOAD_ATTR                6 (date)
                            870 LOAD_CONST               9 (1982)
                            872 LOAD_CONST              10 (12)
                            874 LOAD_CONST              11 (14)
@@ -10028,41 +10116,41 @@
                            880 CALL                     3
                            890 LOAD_CONST               0 (None)
                            892 BUILD_TUPLE              2
                            894 PRECALL                  2
                            898 CALL                     2
                            908 POP_TOP
                
-               956         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
+               975         910 LOAD_GLOBAL              1 (NULL + ANY_OF)
                            922 LOAD_GLOBAL              9 (NULL + IS_DATE)
                            934 LOAD_CONST              12 ('%m/%d/%Y')
                            936 KW_NAMES                13
                            938 PRECALL                  1
                            942 CALL                     1
                            952 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            964 PRECALL                  0
                            968 CALL                     0
                            978 BUILD_LIST               2
                            980 PRECALL                  1
                            984 CALL                     1
                            994 LOAD_METHOD              7 (formatter)
                
-               957        1016 LOAD_GLOBAL             11 (NULL + datetime)
+               976        1016 LOAD_GLOBAL             11 (NULL + datetime)
                           1028 LOAD_ATTR                6 (date)
                           1038 LOAD_CONST              14 (1834)
                           1040 LOAD_CONST              10 (12)
                           1042 LOAD_CONST              11 (14)
                           1044 PRECALL                  3
                           1048 CALL                     3
                
-               956        1058 PRECALL                  1
+               975        1058 PRECALL                  1
                           1062 CALL                     1
                           1072 STORE_FAST               1 (rtn)
                
-               959        1074 LOAD_FAST                0 (self)
+               978        1074 LOAD_FAST                0 (self)
                           1076 LOAD_METHOD              3 (assertEqual)
                           1098 LOAD_FAST                1 (rtn)
                           1100 LOAD_CONST              15 ('12/14/1834')
                           1102 PRECALL                  2
                           1106 CALL                     2
                           1116 POP_TOP
                           1118 LOAD_CONST               0 (None)
@@ -10086,50 +10174,50 @@
                   '12/14/1834'
                names      ('ANY_OF', 'IS_EMAIL', 'IS_ALPHANUMERIC', 'assertEqual', 'IS_DATE', 'datetime', 'date', 'formatter')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_ANY_OF'
-               firstlineno 943
+               firstlineno 962
                lnotab
                   0x020164012c0164012c0164012c0164012c0164012c01640158016a012a
                   ff1003
             code
                argcount  : 0
                nlocals   : 0
                stacksize : 1
                flags     : 0
                code 0x970065005a0164005a0264015a03640284005a0464035300
-               961           0 RESUME                   0
+               980           0 RESUME                   0
                              2 LOAD_NAME                0 (__name__)
                              4 STORE_NAME               1 (__module__)
                              6 LOAD_CONST               0 ('TestValidators.CustomValidator')
                              8 STORE_NAME               2 (__qualname__)
                
-               962          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
+               981          10 LOAD_CONST               1 ('Custom Validator not overloading .validate()')
                             12 STORE_NAME               3 (__doc__)
                
-               964          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 964>)
+               983          14 LOAD_CONST               2 (<code object __call__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 983>)
                             16 MAKE_FUNCTION            0
                             18 STORE_NAME               4 (__call__)
                             20 LOAD_CONST               3 (None)
                             22 RETURN_VALUE
                consts
                   'TestValidators.CustomValidator'
                   'Custom Validator not overloading .validate()'
                   code
                      argcount  : 2
                      nlocals   : 2
                      stacksize : 2
                      flags     : 3
                      code 0x97007c0172047c01640066026e037c01640166025300
-                     964           0 RESUME                   0
+                     983           0 RESUME                   0
                      
-                     965           2 LOAD_FAST                1 (value)
+                     984           2 LOAD_FAST                1 (value)
                                    4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                                    6 LOAD_FAST                1 (value)
                                    8 LOAD_CONST               0 (None)
                                   10 BUILD_TUPLE              2
                                   12 JUMP_FORWARD             3 (to 20)
                              >>   14 LOAD_FAST                1 (value)
                                   16 LOAD_CONST               1 ('invalid!')
@@ -10140,35 +10228,35 @@
                         'invalid!'
                      names      ()
                      varnames   ('self', 'value')
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       '__call__'
-                     firstlineno 964
+                     firstlineno 983
                      lnotab 0x0201
                   None
                names      ('__name__', '__module__', '__qualname__', '__doc__', '__call__')
                varnames   ()
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'CustomValidator'
-               firstlineno 961
+               firstlineno 980
                lnotab 0x0a010402
             'CustomValidator'
             code
                argcount  : 1
                nlocals   : 1
                stacksize : 2
                flags     : 3
                code 0x97007c0072047c00640166026e037c00640266025300
-               967           0 RESUME                   0
+               986           0 RESUME                   0
                
-               970           2 LOAD_FAST                0 (value)
+               989           2 LOAD_FAST                0 (value)
                              4 POP_JUMP_FORWARD_IF_FALSE     4 (to 14)
                              6 LOAD_FAST                0 (value)
                              8 LOAD_CONST               1 (None)
                             10 BUILD_TUPLE              2
                             12 JUMP_FORWARD             3 (to 20)
                        >>   14 LOAD_FAST                0 (value)
                             16 LOAD_CONST               2 ('invalid!')
@@ -10180,15 +10268,15 @@
                   'invalid!'
                names      ()
                varnames   ('value',)
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'custom_validator_func'
-               firstlineno 967
+               firstlineno 986
                lnotab 0x0203
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
                flags     : 3
                code
@@ -10247,208 +10335,208 @@
                   000000000000007c006a070000000000000000a6010000ab010000000000
                   0000006416a6010000ab0100000000000000007d017c00a0020000000000
                   0000000000000000000000000000007c016417a6020000ab020000000000
                   000000010002007401000000000000000000007c006a0700000000000000
                   00a6010000ab0100000000000000006418a6010000ab0100000000000000
                   007d017c00a00200000000000000000000000000000000000000007c0164
                   19a6020000ab020000000000000000010064005300
-                972           0 RESUME                   0
+                991           0 RESUME                   0
                
-                973           2 PUSH_NULL
+                992           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                              16 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                              28 PRECALL                  0
                              32 CALL                     0
                              42 PRECALL                  1
                              46 CALL                     1
                              56 LOAD_CONST               1 ('abc@def.com')
                              58 PRECALL                  1
                              62 CALL                     1
                              72 STORE_FAST               1 (rtn)
                
-                974          74 LOAD_FAST                0 (self)
+                993          74 LOAD_FAST                0 (self)
                              76 LOAD_METHOD              2 (assertEqual)
                              98 LOAD_FAST                1 (rtn)
                             100 LOAD_CONST               2 (('abc@def.com', None))
                             102 PRECALL                  2
                             106 CALL                     2
                             116 POP_TOP
                
-                975         118 PUSH_NULL
+                994         118 PUSH_NULL
                             120 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             132 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             144 PRECALL                  0
                             148 CALL                     0
                             158 PRECALL                  1
                             162 CALL                     1
                             172 LOAD_CONST               3 ('   ')
                             174 PRECALL                  1
                             178 CALL                     1
                             188 STORE_FAST               1 (rtn)
                
-                976         190 LOAD_FAST                0 (self)
+                995         190 LOAD_FAST                0 (self)
                             192 LOAD_METHOD              2 (assertEqual)
                             214 LOAD_FAST                1 (rtn)
                             216 LOAD_CONST               4 ((None, None))
                             218 PRECALL                  2
                             222 CALL                     2
                             232 POP_TOP
                
-                977         234 PUSH_NULL
+                996         234 PUSH_NULL
                             236 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             248 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             260 PRECALL                  0
                             264 CALL                     0
                             274 LOAD_CONST               5 ('abc')
                             276 KW_NAMES                 6
                             278 PRECALL                  2
                             282 CALL                     2
                             292 LOAD_CONST               3 ('   ')
                             294 PRECALL                  1
                             298 CALL                     1
                             308 STORE_FAST               1 (rtn)
                
-                978         310 LOAD_FAST                0 (self)
+                997         310 LOAD_FAST                0 (self)
                             312 LOAD_METHOD              2 (assertEqual)
                             334 LOAD_FAST                1 (rtn)
                             336 LOAD_CONST               7 (('abc', None))
                             338 PRECALL                  2
                             342 CALL                     2
                             352 POP_TOP
                
-                979         354 PUSH_NULL
+                998         354 PUSH_NULL
                             356 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             368 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             380 PRECALL                  0
                             384 CALL                     0
                             394 LOAD_CONST               5 ('abc')
                             396 LOAD_CONST               8 ('def')
                             398 KW_NAMES                 9
                             400 PRECALL                  3
                             404 CALL                     3
                             414 LOAD_CONST               8 ('def')
                             416 PRECALL                  1
                             420 CALL                     1
                             430 STORE_FAST               1 (rtn)
                
-                980         432 LOAD_FAST                0 (self)
+                999         432 LOAD_FAST                0 (self)
                             434 LOAD_METHOD              2 (assertEqual)
                             456 LOAD_FAST                1 (rtn)
                             458 LOAD_CONST               7 (('abc', None))
                             460 PRECALL                  2
                             464 CALL                     2
                             474 POP_TOP
                
-                981         476 PUSH_NULL
+               1000         476 PUSH_NULL
                             478 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             490 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             502 PRECALL                  0
                             506 CALL                     0
                             516 PRECALL                  1
                             520 CALL                     1
                             530 LOAD_CONST               5 ('abc')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               1 (rtn)
                
-                982         548 LOAD_FAST                0 (self)
+               1001         548 LOAD_FAST                0 (self)
                             550 LOAD_METHOD              2 (assertEqual)
                             572 LOAD_FAST                1 (rtn)
                             574 LOAD_CONST              10 (('abc', 'Enter a valid email address'))
                             576 PRECALL                  2
                             580 CALL                     2
                             590 POP_TOP
                
-                983         592 PUSH_NULL
+               1002         592 PUSH_NULL
                             594 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                             606 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                             618 PRECALL                  0
                             622 CALL                     0
                             632 PRECALL                  1
                             636 CALL                     1
                             646 LOAD_CONST              11 (' abc ')
                             648 PRECALL                  1
                             652 CALL                     1
                             662 STORE_FAST               1 (rtn)
                
-                984         664 LOAD_FAST                0 (self)
+               1003         664 LOAD_FAST                0 (self)
                             666 LOAD_METHOD              2 (assertEqual)
                             688 LOAD_FAST                1 (rtn)
                             690 LOAD_CONST              12 ((' abc ', 'Enter a valid email address'))
                             692 PRECALL                  2
                             696 CALL                     2
                             706 POP_TOP
                
-                985         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+               1004         708 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                
-                986         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+               1005         720 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
                             732 LOAD_CONST              13 (('id1', 'first label'))
                             734 LOAD_CONST              14 (('id2', 'second label'))
                             736 BUILD_LIST               2
                             738 LOAD_CONST              15 ('zero')
                             740 KW_NAMES                16
                             742 PRECALL                  2
                             746 CALL                     2
                
-                985         756 PRECALL                  1
+               1004         756 PRECALL                  1
                             760 CALL                     1
                
-                987         770 LOAD_METHOD              4 (options)
+               1006         770 LOAD_METHOD              4 (options)
                             792 LOAD_CONST              17 (False)
                             794 KW_NAMES                16
                             796 PRECALL                  1
                             800 CALL                     1
                
-                985         810 STORE_FAST               1 (rtn)
+               1004         810 STORE_FAST               1 (rtn)
                
-                988         812 LOAD_FAST                0 (self)
+               1007         812 LOAD_FAST                0 (self)
                             814 LOAD_METHOD              2 (assertEqual)
                
-                989         836 LOAD_FAST                1 (rtn)
+               1008         836 LOAD_FAST                1 (rtn)
                             838 BUILD_LIST               0
                             840 LOAD_CONST              18 ((('', ''), ('id1', 'first label'), ('id2', 'second label')))
                             842 LIST_EXTEND              1
                
-                988         844 PRECALL                  2
+               1007         844 PRECALL                  2
                             848 CALL                     2
                             858 POP_TOP
                
-                991         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
+               1010         860 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                
-                992         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
+               1011         872 LOAD_GLOBAL              7 (NULL + IS_IN_SET)
                             884 LOAD_CONST              13 (('id1', 'first label'))
                             886 LOAD_CONST              14 (('id2', 'second label'))
                             888 BUILD_LIST               2
                             890 LOAD_CONST              15 ('zero')
                             892 KW_NAMES                16
                             894 PRECALL                  2
                             898 CALL                     2
                
-                991         908 PRECALL                  1
+               1010         908 PRECALL                  1
                             912 CALL                     1
                
-                993         922 LOAD_METHOD              4 (options)
+               1012         922 LOAD_METHOD              4 (options)
                             944 PRECALL                  0
                             948 CALL                     0
                
-                991         958 STORE_FAST               1 (rtn)
+               1010         958 STORE_FAST               1 (rtn)
                
-                994         960 LOAD_FAST                0 (self)
+               1013         960 LOAD_FAST                0 (self)
                             962 LOAD_METHOD              2 (assertEqual)
                
-                995         984 LOAD_FAST                1 (rtn)
+               1014         984 LOAD_FAST                1 (rtn)
                             986 BUILD_LIST               0
                             988 LOAD_CONST              19 ((('', 'zero'), ('id1', 'first label'), ('id2', 'second label')))
                             990 LIST_EXTEND              1
                
-                994         992 PRECALL                  2
+               1013         992 PRECALL                  2
                             996 CALL                     2
                            1006 POP_TOP
                
-                997        1008 PUSH_NULL
+               1016        1008 PUSH_NULL
                            1010 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1022 LOAD_GLOBAL             11 (NULL + IS_LOWER)
                            1034 PRECALL                  0
                            1038 CALL                     0
                            1048 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            1060 PRECALL                  0
                            1064 CALL                     0
@@ -10456,23 +10544,23 @@
                            1076 PRECALL                  1
                            1080 CALL                     1
                            1090 LOAD_CONST              20 ('AAA')
                            1092 PRECALL                  1
                            1096 CALL                     1
                            1106 STORE_FAST               1 (rtn)
                
-                998        1108 LOAD_FAST                0 (self)
+               1017        1108 LOAD_FAST                0 (self)
                            1110 LOAD_METHOD              2 (assertEqual)
                            1132 LOAD_FAST                1 (rtn)
                            1134 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
                            1136 PRECALL                  2
                            1140 CALL                     2
                            1150 POP_TOP
                
-                999        1152 PUSH_NULL
+               1018        1152 PUSH_NULL
                            1154 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1166 LOAD_GLOBAL             11 (NULL + IS_LOWER)
                            1178 PRECALL                  0
                            1182 CALL                     0
                            1192 LOAD_GLOBAL              3 (NULL + IS_EMAIL)
                            1204 PRECALL                  0
                            1208 CALL                     0
@@ -10480,95 +10568,95 @@
                            1220 PRECALL                  1
                            1224 CALL                     1
                            1234 LOAD_CONST              20 ('AAA')
                            1236 PRECALL                  1
                            1240 CALL                     1
                            1250 STORE_FAST               1 (rtn)
                
-               1000        1252 LOAD_FAST                0 (self)
+               1019        1252 LOAD_FAST                0 (self)
                            1254 LOAD_METHOD              2 (assertEqual)
                            1276 LOAD_FAST                1 (rtn)
                            1278 LOAD_CONST              21 (('AAA', 'Enter a valid email address'))
                            1280 PRECALL                  2
                            1284 CALL                     2
                            1294 POP_TOP
                
-               1001        1296 PUSH_NULL
+               1020        1296 PUSH_NULL
                            1298 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1310 LOAD_FAST                0 (self)
                            1312 LOAD_METHOD              6 (CustomValidator)
                            1334 PRECALL                  0
                            1338 CALL                     0
                            1348 PRECALL                  1
                            1352 CALL                     1
                            1362 LOAD_CONST              22 (1)
                            1364 PRECALL                  1
                            1368 CALL                     1
                            1378 STORE_FAST               1 (rtn)
                
-               1002        1380 LOAD_FAST                0 (self)
+               1021        1380 LOAD_FAST                0 (self)
                            1382 LOAD_METHOD              2 (assertEqual)
                            1404 LOAD_FAST                1 (rtn)
                            1406 LOAD_CONST              23 ((1, None))
                            1408 PRECALL                  2
                            1412 CALL                     2
                            1422 POP_TOP
                
-               1003        1424 PUSH_NULL
+               1022        1424 PUSH_NULL
                            1426 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1438 LOAD_FAST                0 (self)
                            1440 LOAD_METHOD              6 (CustomValidator)
                            1462 PRECALL                  0
                            1466 CALL                     0
                            1476 PRECALL                  1
                            1480 CALL                     1
                            1490 LOAD_CONST              24 (0)
                            1492 PRECALL                  1
                            1496 CALL                     1
                            1506 STORE_FAST               1 (rtn)
                
-               1004        1508 LOAD_FAST                0 (self)
+               1023        1508 LOAD_FAST                0 (self)
                            1510 LOAD_METHOD              2 (assertEqual)
                            1532 LOAD_FAST                1 (rtn)
                            1534 LOAD_CONST              25 ((0, 'invalid!'))
                            1536 PRECALL                  2
                            1540 CALL                     2
                            1550 POP_TOP
                
-               1005        1552 PUSH_NULL
+               1024        1552 PUSH_NULL
                            1554 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1566 LOAD_FAST                0 (self)
                            1568 LOAD_ATTR                7 (custom_validator_func)
                            1578 PRECALL                  1
                            1582 CALL                     1
                            1592 LOAD_CONST              22 (1)
                            1594 PRECALL                  1
                            1598 CALL                     1
                            1608 STORE_FAST               1 (rtn)
                
-               1006        1610 LOAD_FAST                0 (self)
+               1025        1610 LOAD_FAST                0 (self)
                            1612 LOAD_METHOD              2 (assertEqual)
                            1634 LOAD_FAST                1 (rtn)
                            1636 LOAD_CONST              23 ((1, None))
                            1638 PRECALL                  2
                            1642 CALL                     2
                            1652 POP_TOP
                
-               1007        1654 PUSH_NULL
+               1026        1654 PUSH_NULL
                            1656 LOAD_GLOBAL              1 (NULL + IS_EMPTY_OR)
                            1668 LOAD_FAST                0 (self)
                            1670 LOAD_ATTR                7 (custom_validator_func)
                            1680 PRECALL                  1
                            1684 CALL                     1
                            1694 LOAD_CONST              24 (0)
                            1696 PRECALL                  1
                            1700 CALL                     1
                            1710 STORE_FAST               1 (rtn)
                
-               1008        1712 LOAD_FAST                0 (self)
+               1027        1712 LOAD_FAST                0 (self)
                            1714 LOAD_METHOD              2 (assertEqual)
                            1736 LOAD_FAST                1 (rtn)
                            1738 LOAD_CONST              25 ((0, 'invalid!'))
                            1740 PRECALL                  2
                            1744 CALL                     2
                            1754 POP_TOP
                            1756 LOAD_CONST               0 (None)
@@ -10602,41 +10690,41 @@
                   (0, 'invalid!')
                names      ('IS_EMPTY_OR', 'IS_EMAIL', 'assertEqual', 'IS_IN_SET', 'options', 'IS_LOWER', 'CustomValidator', 'custom_validator_func')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_EMPTY_OR'
-               firstlineno 972
+               firstlineno 991
                lnotab
                   0x020148012c0148012c014c012c014e012c0148012c0148012c010c0124
                   ff0e0228fe0203180108ff10030c0124ff0e0224fe0203180108ff100364
                   012c0164012c0154012c0154012c013a012c013a01
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 4
                flags     : 3
                code
                   0x97000200740100000000000000000000a6000000ab0000000000000000
                   006401a6010000ab0100000000000000007d017c00a00100000000000000
                   000000000000000000000000007c016402a6020000ab0200000000000000
                   00010064005300
-               1010           0 RESUME                   0
+               1029           0 RESUME                   0
                
-               1011           2 PUSH_NULL
+               1030           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + CLEANUP)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('hello')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1012          48 LOAD_FAST                0 (self)
+               1031          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('hello', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                              92 LOAD_CONST               0 (None)
@@ -10647,15 +10735,15 @@
                   ('hello', None)
                names      ('CLEANUP', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CLEANUP'
-               firstlineno 1010
+               firstlineno 1029
                lnotab 0x02012e01
             code
                argcount  : 1
                nlocals   : 4
                stacksize : 8
                flags     : 3
                code
@@ -10705,17 +10793,17 @@
                   00000000000000000064016413ac03a6020000ab02000000000000000064
                   04a6010000ab0100000000000000006405190000000000000000007c03a6
                   020000ab02000000000000000001007c00a0030000000000000000000000
                   000000000000000000020074030000000000000000000064016413ac03a6
                   020000ab0200000000000000006404a6010000ab01000000000000000064
                   05190000000000000000007c0364146400850219000000000000000000a6
                   020000ab020000000000000000010064005300
-               1014           0 RESUME                   0
+               1033           0 RESUME                   0
                
-               1015           2 LOAD_GLOBAL              1 (NULL + str)
+               1034           2 LOAD_GLOBAL              1 (NULL + str)
                              14 PUSH_NULL
                              16 LOAD_GLOBAL              3 (NULL + CRYPT)
                              28 LOAD_CONST               1 ('md5')
                              30 LOAD_CONST               2 (True)
                              32 KW_NAMES                 3
                              34 PRECALL                  2
                              38 CALL                     2
@@ -10724,23 +10812,23 @@
                              54 CALL                     1
                              64 LOAD_CONST               5 (0)
                              66 BINARY_SUBSCR
                              76 PRECALL                  1
                              80 CALL                     1
                              90 STORE_FAST               1 (rtn)
                
-               1016          92 LOAD_FAST                0 (self)
+               1035          92 LOAD_FAST                0 (self)
                              94 LOAD_METHOD              2 (myassertRegex)
                             116 LOAD_FAST                1 (rtn)
                             118 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             120 PRECALL                  2
                             124 CALL                     2
                             134 POP_TOP
                
-               1017         136 LOAD_GLOBAL              1 (NULL + str)
+               1036         136 LOAD_GLOBAL              1 (NULL + str)
                             148 PUSH_NULL
                             150 LOAD_GLOBAL              3 (NULL + CRYPT)
                             162 LOAD_CONST               7 ('sha1')
                             164 LOAD_CONST               2 (True)
                             166 KW_NAMES                 3
                             168 PRECALL                  2
                             172 CALL                     2
@@ -10749,23 +10837,23 @@
                             188 CALL                     1
                             198 LOAD_CONST               5 (0)
                             200 BINARY_SUBSCR
                             210 PRECALL                  1
                             214 CALL                     1
                             224 STORE_FAST               1 (rtn)
                
-               1018         226 LOAD_FAST                0 (self)
+               1037         226 LOAD_FAST                0 (self)
                             228 LOAD_METHOD              2 (myassertRegex)
                             250 LOAD_FAST                1 (rtn)
                             252 LOAD_CONST               8 ('^sha1\\$.{16}\\$.{40}$')
                             254 PRECALL                  2
                             258 CALL                     2
                             268 POP_TOP
                
-               1019         270 LOAD_GLOBAL              1 (NULL + str)
+               1038         270 LOAD_GLOBAL              1 (NULL + str)
                             282 PUSH_NULL
                             284 LOAD_GLOBAL              3 (NULL + CRYPT)
                             296 LOAD_CONST               9 ('sha256')
                             298 LOAD_CONST               2 (True)
                             300 KW_NAMES                 3
                             302 PRECALL                  2
                             306 CALL                     2
@@ -10774,23 +10862,23 @@
                             322 CALL                     1
                             332 LOAD_CONST               5 (0)
                             334 BINARY_SUBSCR
                             344 PRECALL                  1
                             348 CALL                     1
                             358 STORE_FAST               1 (rtn)
                
-               1020         360 LOAD_FAST                0 (self)
+               1039         360 LOAD_FAST                0 (self)
                             362 LOAD_METHOD              2 (myassertRegex)
                             384 LOAD_FAST                1 (rtn)
                             386 LOAD_CONST              10 ('^sha256\\$.{16}\\$.{64}$')
                             388 PRECALL                  2
                             392 CALL                     2
                             402 POP_TOP
                
-               1021         404 LOAD_GLOBAL              1 (NULL + str)
+               1040         404 LOAD_GLOBAL              1 (NULL + str)
                             416 PUSH_NULL
                             418 LOAD_GLOBAL              3 (NULL + CRYPT)
                             430 LOAD_CONST              11 ('sha384')
                             432 LOAD_CONST               2 (True)
                             434 KW_NAMES                 3
                             436 PRECALL                  2
                             440 CALL                     2
@@ -10799,23 +10887,23 @@
                             456 CALL                     1
                             466 LOAD_CONST               5 (0)
                             468 BINARY_SUBSCR
                             478 PRECALL                  1
                             482 CALL                     1
                             492 STORE_FAST               1 (rtn)
                
-               1022         494 LOAD_FAST                0 (self)
+               1041         494 LOAD_FAST                0 (self)
                             496 LOAD_METHOD              2 (myassertRegex)
                             518 LOAD_FAST                1 (rtn)
                             520 LOAD_CONST              12 ('^sha384\\$.{16}\\$.{96}$')
                             522 PRECALL                  2
                             526 CALL                     2
                             536 POP_TOP
                
-               1023         538 LOAD_GLOBAL              1 (NULL + str)
+               1042         538 LOAD_GLOBAL              1 (NULL + str)
                             550 PUSH_NULL
                             552 LOAD_GLOBAL              3 (NULL + CRYPT)
                             564 LOAD_CONST              13 ('sha512')
                             566 LOAD_CONST               2 (True)
                             568 KW_NAMES                 3
                             570 PRECALL                  2
                             574 CALL                     2
@@ -10824,26 +10912,26 @@
                             590 CALL                     1
                             600 LOAD_CONST               5 (0)
                             602 BINARY_SUBSCR
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1024         628 LOAD_FAST                0 (self)
+               1043         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              2 (myassertRegex)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              14 ('^sha512\\$.{16}\\$.{128}$')
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1025         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
+               1044         672 LOAD_CONST              15 ('pbkdf2(1000,20,sha512)')
                             674 STORE_FAST               2 (alg)
                
-               1026         676 LOAD_GLOBAL              1 (NULL + str)
+               1045         676 LOAD_GLOBAL              1 (NULL + str)
                             688 PUSH_NULL
                             690 LOAD_GLOBAL              3 (NULL + CRYPT)
                             702 LOAD_FAST                2 (alg)
                             704 LOAD_CONST               2 (True)
                             706 KW_NAMES                 3
                             708 PRECALL                  2
                             712 CALL                     2
@@ -10852,23 +10940,23 @@
                             728 CALL                     1
                             738 LOAD_CONST               5 (0)
                             740 BINARY_SUBSCR
                             750 PRECALL                  1
                             754 CALL                     1
                             764 STORE_FAST               1 (rtn)
                
-               1027         766 LOAD_FAST                0 (self)
+               1046         766 LOAD_FAST                0 (self)
                             768 LOAD_METHOD              2 (myassertRegex)
                             790 LOAD_FAST                1 (rtn)
                             792 LOAD_CONST              16 ('^pbkdf2\\(1000,20,sha512\\)\\$.{16}\\$.{40}$')
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1028         810 LOAD_GLOBAL              1 (NULL + str)
+               1047         810 LOAD_GLOBAL              1 (NULL + str)
                             822 PUSH_NULL
                             824 LOAD_GLOBAL              3 (NULL + CRYPT)
                             836 LOAD_CONST               1 ('md5')
                             838 LOAD_CONST              17 ('mykey')
                             840 LOAD_CONST               2 (True)
                             842 KW_NAMES                18
                             844 PRECALL                  3
@@ -10878,23 +10966,23 @@
                             864 CALL                     1
                             874 LOAD_CONST               5 (0)
                             876 BINARY_SUBSCR
                             886 PRECALL                  1
                             890 CALL                     1
                             900 STORE_FAST               1 (rtn)
                
-               1029         902 LOAD_FAST                0 (self)
+               1048         902 LOAD_FAST                0 (self)
                             904 LOAD_METHOD              2 (myassertRegex)
                             926 LOAD_FAST                1 (rtn)
                             928 LOAD_CONST               6 ('^md5\\$.{16}\\$.{32}$')
                             930 PRECALL                  2
                             934 CALL                     2
                             944 POP_TOP
                
-               1030         946 LOAD_GLOBAL              1 (NULL + str)
+               1049         946 LOAD_GLOBAL              1 (NULL + str)
                             958 PUSH_NULL
                             960 LOAD_GLOBAL              3 (NULL + CRYPT)
                             972 LOAD_CONST               7 ('sha1')
                             974 LOAD_CONST              19 (False)
                             976 KW_NAMES                 3
                             978 PRECALL                  2
                             982 CALL                     2
@@ -10903,15 +10991,15 @@
                             998 CALL                     1
                            1008 LOAD_CONST               5 (0)
                            1010 BINARY_SUBSCR
                            1020 PRECALL                  1
                            1024 CALL                     1
                            1034 STORE_FAST               3 (a)
                
-               1031        1036 LOAD_FAST                0 (self)
+               1050        1036 LOAD_FAST                0 (self)
                            1038 LOAD_METHOD              3 (assertEqual)
                            1060 PUSH_NULL
                            1062 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1074 LOAD_CONST               7 ('sha1')
                            1076 LOAD_CONST              19 (False)
                            1078 KW_NAMES                 3
                            1080 PRECALL                  2
@@ -10922,15 +11010,15 @@
                            1110 LOAD_CONST               5 (0)
                            1112 BINARY_SUBSCR
                            1122 LOAD_FAST                3 (a)
                            1124 PRECALL                  2
                            1128 CALL                     2
                            1138 POP_TOP
                
-               1032        1140 LOAD_FAST                0 (self)
+               1051        1140 LOAD_FAST                0 (self)
                            1142 LOAD_METHOD              3 (assertEqual)
                            1164 PUSH_NULL
                            1166 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1178 LOAD_CONST               7 ('sha1')
                            1180 LOAD_CONST              19 (False)
                            1182 KW_NAMES                 3
                            1184 PRECALL                  2
@@ -10945,15 +11033,15 @@
                            1230 LOAD_CONST               0 (None)
                            1232 BUILD_SLICE              2
                            1234 BINARY_SUBSCR
                            1244 PRECALL                  2
                            1248 CALL                     2
                            1258 POP_TOP
                
-               1033        1260 LOAD_FAST                0 (self)
+               1052        1260 LOAD_FAST                0 (self)
                            1262 LOAD_METHOD              3 (assertEqual)
                            1284 PUSH_NULL
                            1286 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1298 LOAD_CONST               1 ('md5')
                            1300 LOAD_CONST              19 (False)
                            1302 KW_NAMES                 3
                            1304 PRECALL                  2
@@ -10964,15 +11052,15 @@
                            1334 LOAD_CONST               5 (0)
                            1336 BINARY_SUBSCR
                            1346 LOAD_FAST                3 (a)
                            1348 PRECALL                  2
                            1352 CALL                     2
                            1362 POP_TOP
                
-               1034        1364 LOAD_FAST                0 (self)
+               1053        1364 LOAD_FAST                0 (self)
                            1366 LOAD_METHOD              3 (assertEqual)
                            1388 PUSH_NULL
                            1390 LOAD_GLOBAL              3 (NULL + CRYPT)
                            1402 LOAD_CONST               1 ('md5')
                            1404 LOAD_CONST              19 (False)
                            1406 KW_NAMES                 3
                            1408 PRECALL                  2
@@ -11016,15 +11104,15 @@
                   6
                names      ('str', 'CRYPT', 'myassertRegex', 'assertEqual')
                varnames   ('self', 'rtn', 'alg', 'a')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_CRYPT'
-               firstlineno 1014
+               firstlineno 1033
                lnotab
                   0x02015a012c015a012c015a012c015a012c015a012c0104015a012c015c
                   012c015a01680178016801
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 8
@@ -11083,385 +11171,385 @@
                   000000000000000000000000000000000000007c016427641fa003000000
                   0000000000000000000000000000000000642864296702a6010000ab0100
                   000000000000006602a6020000ab02000000000000000001000200740100
                   000000000000000000642a642a642a6401ac2ba6040000ab040000000000
                   0000006427a6010000ab0100000000000000007d017c00a0010000000000
                   0000000000000000000000000000007c01642ca6020000ab020000000000
                   000000010064005300
-               1036           0 RESUME                   0
+               1055           0 RESUME                   0
                
-               1037           2 PUSH_NULL
+               1056           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                              16 LOAD_CONST               1 (True)
                              18 KW_NAMES                 2
                              20 PRECALL                  1
                              24 CALL                     1
                              34 LOAD_CONST               3 ('Abcd1234')
                              36 PRECALL                  1
                              40 CALL                     1
                              50 STORE_FAST               1 (rtn)
                
-               1038          52 LOAD_FAST                0 (self)
+               1057          52 LOAD_FAST                0 (self)
                              54 LOAD_METHOD              1 (assertEqual)
                
-               1039          76 LOAD_FAST                1 (rtn)
+               1058          76 LOAD_FAST                1 (rtn)
                
-               1040          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
+               1059          78 LOAD_CONST               4 (('Abcd1234', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|'))
                
-               1038          80 PRECALL                  2
+               1057          80 PRECALL                  2
                              84 CALL                     2
                              94 POP_TOP
                
-               1045          96 PUSH_NULL
+               1064          96 PUSH_NULL
                              98 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             110 LOAD_CONST               1 (True)
                             112 KW_NAMES                 2
                             114 PRECALL                  1
                             118 CALL                     1
                             128 LOAD_CONST               5 ('Abcd1234!')
                             130 PRECALL                  1
                             134 CALL                     1
                             144 STORE_FAST               1 (rtn)
                
-               1046         146 LOAD_FAST                0 (self)
+               1065         146 LOAD_FAST                0 (self)
                             148 LOAD_METHOD              1 (assertEqual)
                             170 LOAD_FAST                1 (rtn)
                             172 LOAD_CONST               6 (('Abcd1234!', None))
                             174 PRECALL                  2
                             178 CALL                     2
                             188 POP_TOP
                
-               1047         190 PUSH_NULL
+               1066         190 PUSH_NULL
                             192 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             204 LOAD_CONST               1 (True)
                             206 LOAD_CONST               7 (1)
                             208 KW_NAMES                 8
                             210 PRECALL                  2
                             214 CALL                     2
                             224 LOAD_CONST               9 ('a')
                             226 PRECALL                  1
                             230 CALL                     1
                             240 STORE_FAST               1 (rtn)
                
-               1048         242 LOAD_FAST                0 (self)
+               1067         242 LOAD_FAST                0 (self)
                             244 LOAD_METHOD              1 (assertEqual)
                             266 LOAD_FAST                1 (rtn)
                             268 LOAD_CONST              10 (('a', None))
                             270 PRECALL                  2
                             274 CALL                     2
                             284 POP_TOP
                
-               1049         286 PUSH_NULL
+               1068         286 PUSH_NULL
                             288 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             300 LOAD_CONST               1 (True)
                             302 LOAD_CONST               7 (1)
                             304 LOAD_CONST              11 (2)
                             306 KW_NAMES                12
                             308 PRECALL                  3
                             312 CALL                     3
                             322 LOAD_CONST               9 ('a')
                             324 PRECALL                  1
                             328 CALL                     1
                             338 STORE_FAST               1 (rtn)
                
-               1050         340 LOAD_FAST                0 (self)
+               1069         340 LOAD_FAST                0 (self)
                             342 LOAD_METHOD              1 (assertEqual)
                             364 LOAD_FAST                1 (rtn)
                             366 LOAD_CONST              13 (('a', 'Minimum length is 2'))
                             368 PRECALL                  2
                             372 CALL                     2
                             382 POP_TOP
                
-               1051         384 PUSH_NULL
+               1070         384 PUSH_NULL
                             386 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             398 LOAD_CONST               1 (True)
                             400 LOAD_CONST              14 (100)
                             402 KW_NAMES                 8
                             404 PRECALL                  2
                             408 CALL                     2
                             418 LOAD_CONST              15 ('abc123')
                             420 PRECALL                  1
                             424 CALL                     1
                             434 STORE_FAST               1 (rtn)
                
-               1052         436 LOAD_FAST                0 (self)
+               1071         436 LOAD_FAST                0 (self)
                             438 LOAD_METHOD              1 (assertEqual)
                             460 LOAD_FAST                1 (rtn)
                             462 LOAD_CONST              16 (('abc123', 'Password too simple (32.35/100)'))
                             464 PRECALL                  2
                             468 CALL                     2
                             478 POP_TOP
                
-               1053         480 PUSH_NULL
+               1072         480 PUSH_NULL
                             482 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             494 LOAD_CONST               1 (True)
                             496 LOAD_CONST              14 (100)
                             498 KW_NAMES                 8
                             500 PRECALL                  2
                             504 CALL                     2
                             514 LOAD_CONST              17 ('and')
                             516 PRECALL                  1
                             520 CALL                     1
                             530 STORE_FAST               1 (rtn)
                
-               1054         532 LOAD_FAST                0 (self)
+               1073         532 LOAD_FAST                0 (self)
                             534 LOAD_METHOD              1 (assertEqual)
                             556 LOAD_FAST                1 (rtn)
                             558 LOAD_CONST              18 (('and', 'Password too simple (14.57/100)'))
                             560 PRECALL                  2
                             564 CALL                     2
                             574 POP_TOP
                
-               1055         576 PUSH_NULL
+               1074         576 PUSH_NULL
                             578 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             590 LOAD_CONST               1 (True)
                             592 LOAD_CONST              14 (100)
                             594 KW_NAMES                 8
                             596 PRECALL                  2
                             600 CALL                     2
                             610 LOAD_CONST              19 ('aaa')
                             612 PRECALL                  1
                             616 CALL                     1
                             626 STORE_FAST               1 (rtn)
                
-               1056         628 LOAD_FAST                0 (self)
+               1075         628 LOAD_FAST                0 (self)
                             630 LOAD_METHOD              1 (assertEqual)
                             652 LOAD_FAST                1 (rtn)
                             654 LOAD_CONST              20 (('aaa', 'Password too simple (14.42/100)'))
                             656 PRECALL                  2
                             660 CALL                     2
                             670 POP_TOP
                
-               1057         672 PUSH_NULL
+               1076         672 PUSH_NULL
                             674 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             686 LOAD_CONST               1 (True)
                             688 LOAD_CONST              14 (100)
                             690 KW_NAMES                 8
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_CONST              21 ('a1d')
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               1 (rtn)
                
-               1058         724 LOAD_FAST                0 (self)
+               1077         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              1 (assertEqual)
                             748 LOAD_FAST                1 (rtn)
                             750 LOAD_CONST              22 (('a1d', 'Password too simple (15.97/100)'))
                             752 PRECALL                  2
                             756 CALL                     2
                             766 POP_TOP
                
-               1059         768 PUSH_NULL
+               1078         768 PUSH_NULL
                             770 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             782 LOAD_CONST               1 (True)
                             784 LOAD_CONST              14 (100)
                             786 KW_NAMES                 8
                             788 PRECALL                  2
                             792 CALL                     2
                             802 LOAD_CONST              23 ('ad')
                             804 PRECALL                  1
                             808 CALL                     1
                             818 STORE_FAST               1 (rtn)
                
-               1060         820 LOAD_GLOBAL              4 (PY2)
+               1079         820 LOAD_GLOBAL              4 (PY2)
                             832 POP_JUMP_FORWARD_IF_FALSE    23 (to 880)
                
-               1061         834 LOAD_FAST                0 (self)
+               1080         834 LOAD_FAST                0 (self)
                             836 LOAD_METHOD              1 (assertEqual)
                             858 LOAD_FAST                1 (rtn)
                             860 LOAD_CONST              24 (('ad', 'Password too simple (32.66/100)'))
                             862 PRECALL                  2
                             866 CALL                     2
                             876 POP_TOP
                             878 JUMP_FORWARD            22 (to 924)
                
-               1063     >>  880 LOAD_FAST                0 (self)
+               1082     >>  880 LOAD_FAST                0 (self)
                             882 LOAD_METHOD              1 (assertEqual)
                             904 LOAD_FAST                1 (rtn)
                             906 LOAD_CONST              25 (('ad', 'Password too simple (31.26/100)'))
                             908 PRECALL                  2
                             912 CALL                     2
                             922 POP_TOP
                
-               1064     >>  924 PUSH_NULL
+               1083     >>  924 PUSH_NULL
                             926 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                             938 PRECALL                  0
                             942 CALL                     0
                             952 LOAD_CONST              26 ('********')
                             954 PRECALL                  1
                             958 CALL                     1
                             968 STORE_FAST               1 (rtn)
                
-               1065         970 LOAD_FAST                0 (self)
+               1084         970 LOAD_FAST                0 (self)
                             972 LOAD_METHOD              1 (assertEqual)
                             994 LOAD_FAST                1 (rtn)
                             996 LOAD_CONST              27 (('********', None))
                             998 PRECALL                  2
                            1002 CALL                     2
                            1012 POP_TOP
                
-               1066        1014 PUSH_NULL
+               1085        1014 PUSH_NULL
                            1016 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1028 LOAD_CONST               1 (True)
                            1030 LOAD_CONST              28 (4)
                            1032 KW_NAMES                29
                            1034 PRECALL                  2
                            1038 CALL                     2
                            1048 LOAD_CONST              30 ('abcde')
                            1050 PRECALL                  1
                            1054 CALL                     1
                            1064 STORE_FAST               1 (rtn)
                
-               1067        1066 LOAD_FAST                0 (self)
+               1086        1066 LOAD_FAST                0 (self)
                            1068 LOAD_METHOD              1 (assertEqual)
                
-               1068        1090 LOAD_FAST                1 (rtn)
+               1087        1090 LOAD_FAST                1 (rtn)
                
-               1070        1092 LOAD_CONST              30 ('abcde')
+               1089        1092 LOAD_CONST              30 ('abcde')
                
-               1071        1094 LOAD_CONST              31 ('|')
+               1090        1094 LOAD_CONST              31 ('|')
                            1096 LOAD_METHOD              3 (join)
                
-               1072        1118 BUILD_LIST               0
+               1091        1118 BUILD_LIST               0
                            1120 LOAD_CONST              32 (('Minimum length is 8', 'Maximum length is 4', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1122 LIST_EXTEND              1
                
-               1071        1124 PRECALL                  1
+               1090        1124 PRECALL                  1
                            1128 CALL                     1
                
-               1069        1138 BUILD_TUPLE              2
+               1088        1138 BUILD_TUPLE              2
                
-               1067        1140 PRECALL                  2
+               1086        1140 PRECALL                  2
                            1144 CALL                     2
                            1154 POP_TOP
                
-               1082        1156 PUSH_NULL
+               1101        1156 PUSH_NULL
                            1158 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1170 LOAD_CONST               1 (True)
                            1172 KW_NAMES                 2
                            1174 PRECALL                  1
                            1178 CALL                     1
                            1188 LOAD_CONST              30 ('abcde')
                            1190 PRECALL                  1
                            1194 CALL                     1
                            1204 STORE_FAST               1 (rtn)
                
-               1083        1206 LOAD_FAST                0 (self)
+               1102        1206 LOAD_FAST                0 (self)
                            1208 LOAD_METHOD              1 (assertEqual)
                
-               1084        1230 LOAD_FAST                1 (rtn)
+               1103        1230 LOAD_FAST                1 (rtn)
                
-               1086        1232 LOAD_CONST              30 ('abcde')
+               1105        1232 LOAD_CONST              30 ('abcde')
                
-               1087        1234 LOAD_CONST              31 ('|')
+               1106        1234 LOAD_CONST              31 ('|')
                            1236 LOAD_METHOD              3 (join)
                
-               1088        1258 BUILD_LIST               0
+               1107        1258 BUILD_LIST               0
                            1260 LOAD_CONST              33 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'Must include at least 1 uppercase', 'Must include at least 1 number'))
                            1262 LIST_EXTEND              1
                
-               1087        1264 PRECALL                  1
+               1106        1264 PRECALL                  1
                            1268 CALL                     1
                
-               1085        1278 BUILD_TUPLE              2
+               1104        1278 BUILD_TUPLE              2
                
-               1083        1280 PRECALL                  2
+               1102        1280 PRECALL                  2
                            1284 CALL                     2
                            1294 POP_TOP
                
-               1097        1296 PUSH_NULL
+               1116        1296 PUSH_NULL
                            1298 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1310 LOAD_CONST              34 (0)
                            1312 LOAD_CONST              34 (0)
                            1314 LOAD_CONST              34 (0)
                            1316 LOAD_CONST               1 (True)
                            1318 KW_NAMES                35
                            1320 PRECALL                  4
                            1324 CALL                     4
                            1334 LOAD_CONST              36 ('Abcde1')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               1 (rtn)
                
-               1098        1352 LOAD_FAST                0 (self)
+               1117        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              1 (assertEqual)
                
-               1099        1376 LOAD_FAST                1 (rtn)
+               1118        1376 LOAD_FAST                1 (rtn)
                
-               1101        1378 LOAD_CONST              36 ('Abcde1')
+               1120        1378 LOAD_CONST              36 ('Abcde1')
                
-               1102        1380 LOAD_CONST              31 ('|')
+               1121        1380 LOAD_CONST              31 ('|')
                            1382 LOAD_METHOD              3 (join)
                
-               1103        1404 BUILD_LIST               0
+               1122        1404 BUILD_LIST               0
                            1406 LOAD_CONST              37 (('Minimum length is 8', 'Must include at least 1 of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|', 'May not include any uppercase letters', 'May not include any lowercase letters', 'May not include any numbers'))
                            1408 LIST_EXTEND              1
                
-               1102        1410 PRECALL                  1
+               1121        1410 PRECALL                  1
                            1414 CALL                     1
                
-               1100        1424 BUILD_TUPLE              2
+               1119        1424 BUILD_TUPLE              2
                
-               1098        1426 PRECALL                  2
+               1117        1426 PRECALL                  2
                            1430 CALL                     2
                            1440 POP_TOP
                
-               1113        1442 PUSH_NULL
+               1132        1442 PUSH_NULL
                            1444 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1456 LOAD_CONST              34 (0)
                            1458 LOAD_CONST               1 (True)
                            1460 KW_NAMES                38
                            1462 PRECALL                  2
                            1466 CALL                     2
                            1476 LOAD_CONST              39 ('Abcde1!')
                            1478 PRECALL                  1
                            1482 CALL                     1
                            1492 STORE_FAST               1 (rtn)
                
-               1114        1494 LOAD_FAST                0 (self)
+               1133        1494 LOAD_FAST                0 (self)
                            1496 LOAD_METHOD              1 (assertEqual)
                
-               1115        1518 LOAD_FAST                1 (rtn)
+               1134        1518 LOAD_FAST                1 (rtn)
                
-               1117        1520 LOAD_CONST              39 ('Abcde1!')
+               1136        1520 LOAD_CONST              39 ('Abcde1!')
                
-               1118        1522 LOAD_CONST              31 ('|')
+               1137        1522 LOAD_CONST              31 ('|')
                            1524 LOAD_METHOD              3 (join)
                
-               1120        1546 LOAD_CONST              40 ('Minimum length is 8')
+               1139        1546 LOAD_CONST              40 ('Minimum length is 8')
                
-               1121        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
+               1140        1548 LOAD_CONST              41 ('May not contain any of the following: ~!@#$%^&*()_+-=?<>,.:;{}[]|')
                
-               1119        1550 BUILD_LIST               2
+               1138        1550 BUILD_LIST               2
                
-               1118        1552 PRECALL                  1
+               1137        1552 PRECALL                  1
                            1556 CALL                     1
                
-               1116        1566 BUILD_TUPLE              2
+               1135        1566 BUILD_TUPLE              2
                
-               1114        1568 PRECALL                  2
+               1133        1568 PRECALL                  2
                            1572 CALL                     2
                            1582 POP_TOP
                
-               1126        1584 PUSH_NULL
+               1145        1584 PUSH_NULL
                            1586 LOAD_GLOBAL              1 (NULL + IS_STRONG)
                            1598 LOAD_CONST              42 (False)
                            1600 LOAD_CONST              42 (False)
                            1602 LOAD_CONST              42 (False)
                            1604 LOAD_CONST               1 (True)
                            1606 KW_NAMES                43
                            1608 PRECALL                  4
                            1612 CALL                     4
                            1622 LOAD_CONST              39 ('Abcde1!')
                            1624 PRECALL                  1
                            1628 CALL                     1
                            1638 STORE_FAST               1 (rtn)
                
-               1127        1640 LOAD_FAST                0 (self)
+               1146        1640 LOAD_FAST                0 (self)
                            1642 LOAD_METHOD              1 (assertEqual)
                            1664 LOAD_FAST                1 (rtn)
                            1666 LOAD_CONST              44 (('Abcde1!', 'Minimum length is 8'))
                            1668 PRECALL                  2
                            1672 CALL                     2
                            1682 POP_TOP
                            1684 LOAD_CONST               0 (None)
@@ -11514,15 +11602,15 @@
                   ('Abcde1!', 'Minimum length is 8')
                names      ('IS_STRONG', 'assertEqual', 'PY2', 'join')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_STRONG'
-               firstlineno 1036
+               firstlineno 1055
                lnotab
                   0x020132011801020102fe100732012c0134012c0136012c0134012c0134
                   012c0134012c0134012c0134010e012e022c012e012c0134011801020202
                   01180106ff0efe02fe100f3201180102020201180106ff0efe02fe100e38
                   01180102020201180106ff0efe02fe100f34011801020202011802020102
                   fe02ff0efe02fe100c3801
             code
@@ -11589,428 +11677,428 @@
                   020000ab0200000000000000007c02a6010000ab0100000000000000007d
                   037c00a00200000000000000000000000000000000000000007c037c0264
                   076602a6020000ab020000000000000000010002007c0164036410640564
                   06a6040000ab0400000000000000007d0202007403000000000000000000
                   006407ac11a6010000ab0100000000000000007c02a6010000ab01000000
                   00000000007d037c00a00200000000000000000000000000000000000000
                   007c037c0264076602a6020000ab020000000000000000010064005300
-               1129           0 RESUME                   0
+               1148           0 RESUME                   0
                
-               1130           2 PUSH_NULL
+               1149           2 PUSH_NULL
                               4 LOAD_BUILD_CLASS
-                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1130>)
+                              6 LOAD_CONST               1 (<code object DummyImageFile, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1149>)
                               8 MAKE_FUNCTION            0
                              10 LOAD_CONST               2 ('DummyImageFile')
                              12 LOAD_GLOBAL              0 (object)
                              24 PRECALL                  3
                              28 CALL                     3
                              38 STORE_FAST               1 (DummyImageFile)
                
-               1155          40 PUSH_NULL
+               1174          40 PUSH_NULL
                              42 LOAD_FAST                1 (DummyImageFile)
                              44 LOAD_CONST               3 ('test')
                              46 LOAD_CONST               4 ('bmp')
                              48 LOAD_CONST               5 (50)
                              50 LOAD_CONST               6 (100)
                              52 PRECALL                  4
                              56 CALL                     4
                              66 STORE_FAST               2 (img)
                
-               1156          68 PUSH_NULL
+               1175          68 PUSH_NULL
                              70 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                              82 PRECALL                  0
                              86 CALL                     0
                              96 LOAD_FAST                2 (img)
                              98 PRECALL                  1
                             102 CALL                     1
                             112 STORE_FAST               3 (rtn)
                
-               1157         114 LOAD_FAST                0 (self)
+               1176         114 LOAD_FAST                0 (self)
                             116 LOAD_METHOD              2 (assertEqual)
                             138 LOAD_FAST                3 (rtn)
                             140 LOAD_FAST                2 (img)
                             142 LOAD_CONST               0 (None)
                             144 BUILD_TUPLE              2
                             146 PRECALL                  2
                             150 CALL                     2
                             160 POP_TOP
                
-               1158         162 PUSH_NULL
+               1177         162 PUSH_NULL
                             164 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             176 LOAD_CONST               7 ('oops')
                             178 LOAD_CONST               8 ((100, 50))
                             180 KW_NAMES                 9
                             182 PRECALL                  2
                             186 CALL                     2
                             196 LOAD_FAST                2 (img)
                             198 PRECALL                  1
                             202 CALL                     1
                             212 STORE_FAST               3 (rtn)
                
-               1159         214 LOAD_FAST                0 (self)
+               1178         214 LOAD_FAST                0 (self)
                             216 LOAD_METHOD              2 (assertEqual)
                             238 LOAD_FAST                3 (rtn)
                             240 LOAD_FAST                2 (img)
                             242 LOAD_CONST               7 ('oops')
                             244 BUILD_TUPLE              2
                             246 PRECALL                  2
                             250 CALL                     2
                             260 POP_TOP
                
-               1160         262 PUSH_NULL
+               1179         262 PUSH_NULL
                             264 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             276 LOAD_CONST               7 ('oops')
                             278 LOAD_CONST               8 ((100, 50))
                             280 KW_NAMES                10
                             282 PRECALL                  2
                             286 CALL                     2
                             296 LOAD_FAST                2 (img)
                             298 PRECALL                  1
                             302 CALL                     1
                             312 STORE_FAST               3 (rtn)
                
-               1161         314 LOAD_FAST                0 (self)
+               1180         314 LOAD_FAST                0 (self)
                             316 LOAD_METHOD              2 (assertEqual)
                             338 LOAD_FAST                3 (rtn)
                             340 LOAD_FAST                2 (img)
                             342 LOAD_CONST               7 ('oops')
                             344 BUILD_TUPLE              2
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1162         362 PUSH_NULL
+               1181         362 PUSH_NULL
                             364 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             376 LOAD_CONST               7 ('oops')
                             378 LOAD_CONST              11 ((1, 1))
                             380 KW_NAMES                12
                             382 PRECALL                  2
                             386 CALL                     2
                             396 LOAD_FAST                2 (img)
                             398 PRECALL                  1
                             402 CALL                     1
                             412 STORE_FAST               3 (rtn)
                
-               1163         414 LOAD_FAST                0 (self)
+               1182         414 LOAD_FAST                0 (self)
                             416 LOAD_METHOD              2 (assertEqual)
                             438 LOAD_FAST                3 (rtn)
                             440 LOAD_FAST                2 (img)
                             442 LOAD_CONST               7 ('oops')
                             444 BUILD_TUPLE              2
                             446 PRECALL                  2
                             450 CALL                     2
                             460 POP_TOP
                
-               1165         462 PUSH_NULL
+               1184         462 PUSH_NULL
                             464 LOAD_FAST                1 (DummyImageFile)
                             466 LOAD_CONST               3 ('test')
                             468 LOAD_CONST              13 ('gif')
                             470 LOAD_CONST               5 (50)
                             472 LOAD_CONST               6 (100)
                             474 PRECALL                  4
                             478 CALL                     4
                             488 STORE_FAST               2 (img)
                
-               1166         490 PUSH_NULL
+               1185         490 PUSH_NULL
                             492 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             504 PRECALL                  0
                             508 CALL                     0
                             518 LOAD_FAST                2 (img)
                             520 PRECALL                  1
                             524 CALL                     1
                             534 STORE_FAST               3 (rtn)
                
-               1167         536 LOAD_FAST                0 (self)
+               1186         536 LOAD_FAST                0 (self)
                             538 LOAD_METHOD              2 (assertEqual)
                             560 LOAD_FAST                3 (rtn)
                             562 LOAD_FAST                2 (img)
                             564 LOAD_CONST               0 (None)
                             566 BUILD_TUPLE              2
                             568 PRECALL                  2
                             572 CALL                     2
                             582 POP_TOP
                
-               1168         584 PUSH_NULL
+               1187         584 PUSH_NULL
                             586 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             598 LOAD_CONST               7 ('oops')
                             600 LOAD_CONST               8 ((100, 50))
                             602 KW_NAMES                 9
                             604 PRECALL                  2
                             608 CALL                     2
                             618 LOAD_FAST                2 (img)
                             620 PRECALL                  1
                             624 CALL                     1
                             634 STORE_FAST               3 (rtn)
                
-               1169         636 LOAD_FAST                0 (self)
+               1188         636 LOAD_FAST                0 (self)
                             638 LOAD_METHOD              2 (assertEqual)
                             660 LOAD_FAST                3 (rtn)
                             662 LOAD_FAST                2 (img)
                             664 LOAD_CONST               7 ('oops')
                             666 BUILD_TUPLE              2
                             668 PRECALL                  2
                             672 CALL                     2
                             682 POP_TOP
                
-               1170         684 PUSH_NULL
+               1189         684 PUSH_NULL
                             686 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             698 LOAD_CONST               7 ('oops')
                             700 LOAD_CONST               8 ((100, 50))
                             702 KW_NAMES                10
                             704 PRECALL                  2
                             708 CALL                     2
                             718 LOAD_FAST                2 (img)
                             720 PRECALL                  1
                             724 CALL                     1
                             734 STORE_FAST               3 (rtn)
                
-               1171         736 LOAD_FAST                0 (self)
+               1190         736 LOAD_FAST                0 (self)
                             738 LOAD_METHOD              2 (assertEqual)
                             760 LOAD_FAST                3 (rtn)
                             762 LOAD_FAST                2 (img)
                             764 LOAD_CONST               7 ('oops')
                             766 BUILD_TUPLE              2
                             768 PRECALL                  2
                             772 CALL                     2
                             782 POP_TOP
                
-               1172         784 PUSH_NULL
+               1191         784 PUSH_NULL
                             786 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             798 LOAD_CONST               7 ('oops')
                             800 LOAD_CONST              11 ((1, 1))
                             802 KW_NAMES                12
                             804 PRECALL                  2
                             808 CALL                     2
                             818 LOAD_FAST                2 (img)
                             820 PRECALL                  1
                             824 CALL                     1
                             834 STORE_FAST               3 (rtn)
                
-               1173         836 LOAD_FAST                0 (self)
+               1192         836 LOAD_FAST                0 (self)
                             838 LOAD_METHOD              2 (assertEqual)
                             860 LOAD_FAST                3 (rtn)
                             862 LOAD_FAST                2 (img)
                             864 LOAD_CONST               7 ('oops')
                             866 BUILD_TUPLE              2
                             868 PRECALL                  2
                             872 CALL                     2
                             882 POP_TOP
                
-               1175         884 PUSH_NULL
+               1194         884 PUSH_NULL
                             886 LOAD_FAST                1 (DummyImageFile)
                             888 LOAD_CONST               3 ('test')
                             890 LOAD_CONST              14 ('jpeg')
                             892 LOAD_CONST               5 (50)
                             894 LOAD_CONST               6 (100)
                             896 PRECALL                  4
                             900 CALL                     4
                             910 STORE_FAST               2 (img)
                
-               1176         912 PUSH_NULL
+               1195         912 PUSH_NULL
                             914 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                             926 PRECALL                  0
                             930 CALL                     0
                             940 LOAD_FAST                2 (img)
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               3 (rtn)
                
-               1177         958 LOAD_FAST                0 (self)
+               1196         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              2 (assertEqual)
                             982 LOAD_FAST                3 (rtn)
                             984 LOAD_FAST                2 (img)
                             986 LOAD_CONST               0 (None)
                             988 BUILD_TUPLE              2
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1178        1006 PUSH_NULL
+               1197        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1020 LOAD_CONST               7 ('oops')
                            1022 LOAD_CONST               8 ((100, 50))
                            1024 KW_NAMES                 9
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_FAST                2 (img)
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               3 (rtn)
                
-               1179        1058 LOAD_FAST                0 (self)
+               1198        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              2 (assertEqual)
                            1082 LOAD_FAST                3 (rtn)
                            1084 LOAD_FAST                2 (img)
                            1086 LOAD_CONST               7 ('oops')
                            1088 BUILD_TUPLE              2
                            1090 PRECALL                  2
                            1094 CALL                     2
                            1104 POP_TOP
                
-               1180        1106 PUSH_NULL
+               1199        1106 PUSH_NULL
                            1108 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1120 LOAD_CONST               7 ('oops')
                            1122 LOAD_CONST               8 ((100, 50))
                            1124 KW_NAMES                10
                            1126 PRECALL                  2
                            1130 CALL                     2
                            1140 LOAD_FAST                2 (img)
                            1142 PRECALL                  1
                            1146 CALL                     1
                            1156 STORE_FAST               3 (rtn)
                
-               1181        1158 LOAD_FAST                0 (self)
+               1200        1158 LOAD_FAST                0 (self)
                            1160 LOAD_METHOD              2 (assertEqual)
                            1182 LOAD_FAST                3 (rtn)
                            1184 LOAD_FAST                2 (img)
                            1186 LOAD_CONST               7 ('oops')
                            1188 BUILD_TUPLE              2
                            1190 PRECALL                  2
                            1194 CALL                     2
                            1204 POP_TOP
                
-               1182        1206 PUSH_NULL
+               1201        1206 PUSH_NULL
                            1208 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1220 LOAD_CONST               7 ('oops')
                            1222 LOAD_CONST              11 ((1, 1))
                            1224 KW_NAMES                12
                            1226 PRECALL                  2
                            1230 CALL                     2
                            1240 LOAD_FAST                2 (img)
                            1242 PRECALL                  1
                            1246 CALL                     1
                            1256 STORE_FAST               3 (rtn)
                
-               1183        1258 LOAD_FAST                0 (self)
+               1202        1258 LOAD_FAST                0 (self)
                            1260 LOAD_METHOD              2 (assertEqual)
                            1282 LOAD_FAST                3 (rtn)
                            1284 LOAD_FAST                2 (img)
                            1286 LOAD_CONST               7 ('oops')
                            1288 BUILD_TUPLE              2
                            1290 PRECALL                  2
                            1294 CALL                     2
                            1304 POP_TOP
                
-               1185        1306 PUSH_NULL
+               1204        1306 PUSH_NULL
                            1308 LOAD_FAST                1 (DummyImageFile)
                            1310 LOAD_CONST               3 ('test')
                            1312 LOAD_CONST              15 ('png')
                            1314 LOAD_CONST               5 (50)
                            1316 LOAD_CONST               6 (100)
                            1318 PRECALL                  4
                            1322 CALL                     4
                            1332 STORE_FAST               2 (img)
                
-               1186        1334 PUSH_NULL
+               1205        1334 PUSH_NULL
                            1336 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1348 PRECALL                  0
                            1352 CALL                     0
                            1362 LOAD_FAST                2 (img)
                            1364 PRECALL                  1
                            1368 CALL                     1
                            1378 STORE_FAST               3 (rtn)
                
-               1187        1380 LOAD_FAST                0 (self)
+               1206        1380 LOAD_FAST                0 (self)
                            1382 LOAD_METHOD              2 (assertEqual)
                            1404 LOAD_FAST                3 (rtn)
                            1406 LOAD_FAST                2 (img)
                            1408 LOAD_CONST               0 (None)
                            1410 BUILD_TUPLE              2
                            1412 PRECALL                  2
                            1416 CALL                     2
                            1426 POP_TOP
                
-               1188        1428 PUSH_NULL
+               1207        1428 PUSH_NULL
                            1430 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1442 LOAD_CONST               7 ('oops')
                            1444 LOAD_CONST               8 ((100, 50))
                            1446 KW_NAMES                 9
                            1448 PRECALL                  2
                            1452 CALL                     2
                            1462 LOAD_FAST                2 (img)
                            1464 PRECALL                  1
                            1468 CALL                     1
                            1478 STORE_FAST               3 (rtn)
                
-               1189        1480 LOAD_FAST                0 (self)
+               1208        1480 LOAD_FAST                0 (self)
                            1482 LOAD_METHOD              2 (assertEqual)
                            1504 LOAD_FAST                3 (rtn)
                            1506 LOAD_FAST                2 (img)
                            1508 LOAD_CONST               7 ('oops')
                            1510 BUILD_TUPLE              2
                            1512 PRECALL                  2
                            1516 CALL                     2
                            1526 POP_TOP
                
-               1190        1528 PUSH_NULL
+               1209        1528 PUSH_NULL
                            1530 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1542 LOAD_CONST               7 ('oops')
                            1544 LOAD_CONST               8 ((100, 50))
                            1546 KW_NAMES                10
                            1548 PRECALL                  2
                            1552 CALL                     2
                            1562 LOAD_FAST                2 (img)
                            1564 PRECALL                  1
                            1568 CALL                     1
                            1578 STORE_FAST               3 (rtn)
                
-               1191        1580 LOAD_FAST                0 (self)
+               1210        1580 LOAD_FAST                0 (self)
                            1582 LOAD_METHOD              2 (assertEqual)
                            1604 LOAD_FAST                3 (rtn)
                            1606 LOAD_FAST                2 (img)
                            1608 LOAD_CONST               7 ('oops')
                            1610 BUILD_TUPLE              2
                            1612 PRECALL                  2
                            1616 CALL                     2
                            1626 POP_TOP
                
-               1192        1628 PUSH_NULL
+               1211        1628 PUSH_NULL
                            1630 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1642 LOAD_CONST               7 ('oops')
                            1644 LOAD_CONST              11 ((1, 1))
                            1646 KW_NAMES                12
                            1648 PRECALL                  2
                            1652 CALL                     2
                            1662 LOAD_FAST                2 (img)
                            1664 PRECALL                  1
                            1668 CALL                     1
                            1678 STORE_FAST               3 (rtn)
                
-               1193        1680 LOAD_FAST                0 (self)
+               1212        1680 LOAD_FAST                0 (self)
                            1682 LOAD_METHOD              2 (assertEqual)
                            1704 LOAD_FAST                3 (rtn)
                            1706 LOAD_FAST                2 (img)
                            1708 LOAD_CONST               7 ('oops')
                            1710 BUILD_TUPLE              2
                            1712 PRECALL                  2
                            1716 CALL                     2
                            1726 POP_TOP
                
-               1195        1728 PUSH_NULL
+               1214        1728 PUSH_NULL
                            1730 LOAD_FAST                1 (DummyImageFile)
                            1732 LOAD_CONST               3 ('test')
                            1734 LOAD_CONST              16 ('xls')
                            1736 LOAD_CONST               5 (50)
                            1738 LOAD_CONST               6 (100)
                            1740 PRECALL                  4
                            1744 CALL                     4
                            1754 STORE_FAST               2 (img)
                
-               1196        1756 PUSH_NULL
+               1215        1756 PUSH_NULL
                            1758 LOAD_GLOBAL              3 (NULL + IS_IMAGE)
                            1770 LOAD_CONST               7 ('oops')
                            1772 KW_NAMES                17
                            1774 PRECALL                  1
                            1778 CALL                     1
                            1788 LOAD_FAST                2 (img)
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               3 (rtn)
                
-               1197        1806 LOAD_FAST                0 (self)
+               1216        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              2 (assertEqual)
                            1830 LOAD_FAST                3 (rtn)
                            1832 LOAD_FAST                2 (img)
                            1834 LOAD_CONST               7 ('oops')
                            1836 BUILD_TUPLE              2
                            1838 PRECALL                  2
                            1842 CALL                     2
@@ -12021,21 +12109,21 @@
                   None
                   code
                      argcount  : 0
                      nlocals   : 0
                      stacksize : 1
                      flags     : 0
                      code 0x970065005a0164005a02640184005a0364025300
-                     1130           0 RESUME                   0
+                     1149           0 RESUME                   0
                                     2 LOAD_NAME                0 (__name__)
                                     4 STORE_NAME               1 (__module__)
                                     6 LOAD_CONST               0 ('TestValidators.test_IS_IMAGE.<locals>.DummyImageFile')
                                     8 STORE_NAME               2 (__qualname__)
                      
-                     1131          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1131>)
+                     1150          10 LOAD_CONST               1 (<code object __init__, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1150>)
                                    12 MAKE_FUNCTION            0
                                    14 STORE_NAME               3 (__init__)
                                    16 LOAD_CONST               2 (None)
                                    18 RETURN_VALUE
                      consts
                         'TestValidators.test_IS_IMAGE.<locals>.DummyImageFile'
                         code
@@ -12075,65 +12163,65 @@
                               000000000000000000000000000000000000006415a6010000ab01000000
                               000000000001007c006a040000000000000000a005000000000000000000
                               00000000000000000000007c05a006000000000000000000000000000000
                               000000000064167c037c04a6030000ab030000000000000000a6010000ab
                               01000000000000000001007c006a040000000000000000a0070000000000
                               0000000000000000000000000000006401a6010000ab0100000000000000
                               00010064005300
-                           1131           0 RESUME                   0
+                           1150           0 RESUME                   0
                            
-                           1132           2 LOAD_CONST               1 (0)
+                           1151           2 LOAD_CONST               1 (0)
                                           4 LOAD_CONST               0 (None)
                                           6 IMPORT_NAME              0 (struct)
                                           8 STORE_FAST               5 (struct)
                            
-                           1133          10 LOAD_CONST               1 (0)
+                           1152          10 LOAD_CONST               1 (0)
                                          12 LOAD_CONST               2 (('BytesIO',))
                                          14 IMPORT_NAME              1 (io)
                                          16 IMPORT_FROM              2 (BytesIO)
                                          18 STORE_FAST               6 (BytesIO)
                                          20 POP_TOP
                            
-                           1135          22 LOAD_FAST                1 (filename)
+                           1154          22 LOAD_FAST                1 (filename)
                                          24 LOAD_CONST               3 ('.')
                                          26 BINARY_OP                0 (+)
                                          30 LOAD_FAST                2 (ext)
                                          32 BINARY_OP                0 (+)
                                          36 LOAD_FAST                0 (self)
                                          38 STORE_ATTR               3 (filename)
                            
-                           1136          48 PUSH_NULL
+                           1155          48 PUSH_NULL
                                          50 LOAD_FAST                6 (BytesIO)
                                          52 PRECALL                  0
                                          56 CALL                     0
                                          66 LOAD_FAST                0 (self)
                                          68 STORE_ATTR               4 (file)
                            
-                           1137          78 LOAD_FAST                2 (ext)
+                           1156          78 LOAD_FAST                2 (ext)
                                          80 LOAD_CONST               4 ('bmp')
                                          82 COMPARE_OP               2 (==)
                                          88 POP_JUMP_FORWARD_IF_FALSE   101 (to 292)
                            
-                           1138          90 LOAD_FAST                0 (self)
+                           1157          90 LOAD_FAST                0 (self)
                                          92 LOAD_ATTR                4 (file)
                                         102 LOAD_METHOD              5 (write)
                                         124 LOAD_CONST               5 (b'BM')
                                         126 PRECALL                  1
                                         130 CALL                     1
                                         140 POP_TOP
                            
-                           1139         142 LOAD_FAST                0 (self)
+                           1158         142 LOAD_FAST                0 (self)
                                         144 LOAD_ATTR                4 (file)
                                         154 LOAD_METHOD              5 (write)
                                         176 LOAD_CONST               6 (b'                ')
                                         178 PRECALL                  1
                                         182 CALL                     1
                                         192 POP_TOP
                            
-                           1140         194 LOAD_FAST                0 (self)
+                           1159         194 LOAD_FAST                0 (self)
                                         196 LOAD_ATTR                4 (file)
                                         206 LOAD_METHOD              5 (write)
                                         228 LOAD_FAST                5 (struct)
                                         230 LOAD_METHOD              6 (pack)
                                         252 LOAD_CONST               7 ('<LL')
                                         254 LOAD_FAST                3 (width)
                                         256 LOAD_FAST                4 (height)
@@ -12141,28 +12229,28 @@
                                         262 CALL                     3
                                         272 PRECALL                  1
                                         276 CALL                     1
                                         286 POP_TOP
                                         288 EXTENDED_ARG             1
                                         290 JUMP_FORWARD           339 (to 970)
                            
-                           1141     >>  292 LOAD_FAST                2 (ext)
+                           1160     >>  292 LOAD_FAST                2 (ext)
                                         294 LOAD_CONST               8 ('gif')
                                         296 COMPARE_OP               2 (==)
                                         302 POP_JUMP_FORWARD_IF_FALSE    76 (to 456)
                            
-                           1142         304 LOAD_FAST                0 (self)
+                           1161         304 LOAD_FAST                0 (self)
                                         306 LOAD_ATTR                4 (file)
                                         316 LOAD_METHOD              5 (write)
                                         338 LOAD_CONST               9 (b'GIF87a')
                                         340 PRECALL                  1
                                         344 CALL                     1
                                         354 POP_TOP
                            
-                           1143         356 LOAD_FAST                0 (self)
+                           1162         356 LOAD_FAST                0 (self)
                                         358 LOAD_ATTR                4 (file)
                                         368 LOAD_METHOD              5 (write)
                                         390 LOAD_FAST                5 (struct)
                                         392 LOAD_METHOD              6 (pack)
                                         414 LOAD_CONST              10 ('<HHB')
                                         416 LOAD_FAST                3 (width)
                                         418 LOAD_FAST                4 (height)
@@ -12171,101 +12259,101 @@
                                         426 CALL                     4
                                         436 PRECALL                  1
                                         440 CALL                     1
                                         450 POP_TOP
                                         452 EXTENDED_ARG             1
                                         454 JUMP_FORWARD           257 (to 970)
                            
-                           1144     >>  456 LOAD_FAST                2 (ext)
+                           1163     >>  456 LOAD_FAST                2 (ext)
                                         458 LOAD_CONST              11 (('jpg', 'jpeg'))
                                         460 CONTAINS_OP              0
                                         462 POP_JUMP_FORWARD_IF_FALSE   122 (to 708)
                            
-                           1145         464 LOAD_FAST                0 (self)
+                           1164         464 LOAD_FAST                0 (self)
                                         466 LOAD_ATTR                4 (file)
                                         476 LOAD_METHOD              5 (write)
                                         498 LOAD_CONST              12 (b'\xff\xd8')
                                         500 PRECALL                  1
                                         504 CALL                     1
                                         514 POP_TOP
                            
-                           1146         516 LOAD_FAST                0 (self)
+                           1165         516 LOAD_FAST                0 (self)
                                         518 LOAD_ATTR                4 (file)
                                         528 LOAD_METHOD              5 (write)
                                         550 LOAD_FAST                5 (struct)
                                         552 LOAD_METHOD              6 (pack)
                                         574 LOAD_CONST              13 ('!BBH')
                                         576 LOAD_CONST              14 (255)
                                         578 LOAD_CONST              15 (192)
                                         580 LOAD_CONST              16 (5)
                                         582 PRECALL                  4
                                         586 CALL                     4
                                         596 PRECALL                  1
                                         600 CALL                     1
                                         610 POP_TOP
                            
-                           1147         612 LOAD_FAST                0 (self)
+                           1166         612 LOAD_FAST                0 (self)
                                         614 LOAD_ATTR                4 (file)
                                         624 LOAD_METHOD              5 (write)
                                         646 LOAD_FAST                5 (struct)
                                         648 LOAD_METHOD              6 (pack)
                                         670 LOAD_CONST              17 ('!xHH')
                                         672 LOAD_FAST                4 (height)
                                         674 LOAD_FAST                3 (width)
                                         676 PRECALL                  3
                                         680 CALL                     3
                                         690 PRECALL                  1
                                         694 CALL                     1
                                         704 POP_TOP
                                         706 JUMP_FORWARD           131 (to 970)
                            
-                           1148     >>  708 LOAD_FAST                2 (ext)
+                           1167     >>  708 LOAD_FAST                2 (ext)
                                         710 LOAD_CONST              18 ('png')
                                         712 COMPARE_OP               2 (==)
                                         718 POP_JUMP_FORWARD_IF_FALSE   125 (to 970)
                            
-                           1149         720 LOAD_FAST                0 (self)
+                           1168         720 LOAD_FAST                0 (self)
                                         722 LOAD_ATTR                4 (file)
                                         732 LOAD_METHOD              5 (write)
                                         754 LOAD_CONST              19 (b'\x89PNG\r\n\x1a\n')
                                         756 PRECALL                  1
                                         760 CALL                     1
                                         770 POP_TOP
                            
-                           1150         772 LOAD_FAST                0 (self)
+                           1169         772 LOAD_FAST                0 (self)
                                         774 LOAD_ATTR                4 (file)
                                         784 LOAD_METHOD              5 (write)
                                         806 LOAD_CONST              20 (b'    ')
                                         808 PRECALL                  1
                                         812 CALL                     1
                                         822 POP_TOP
                            
-                           1151         824 LOAD_FAST                0 (self)
+                           1170         824 LOAD_FAST                0 (self)
                                         826 LOAD_ATTR                4 (file)
                                         836 LOAD_METHOD              5 (write)
                                         858 LOAD_CONST              21 (b'IHDR')
                                         860 PRECALL                  1
                                         864 CALL                     1
                                         874 POP_TOP
                            
-                           1152         876 LOAD_FAST                0 (self)
+                           1171         876 LOAD_FAST                0 (self)
                                         878 LOAD_ATTR                4 (file)
                                         888 LOAD_METHOD              5 (write)
                                         910 LOAD_FAST                5 (struct)
                                         912 LOAD_METHOD              6 (pack)
                                         934 LOAD_CONST              22 ('!LL')
                                         936 LOAD_FAST                3 (width)
                                         938 LOAD_FAST                4 (height)
                                         940 PRECALL                  3
                                         944 CALL                     3
                                         954 PRECALL                  1
                                         958 CALL                     1
                                         968 POP_TOP
                            
-                           1153     >>  970 LOAD_FAST                0 (self)
+                           1172     >>  970 LOAD_FAST                0 (self)
                                         972 LOAD_ATTR                4 (file)
                                         982 LOAD_METHOD              7 (seek)
                                        1004 LOAD_CONST               1 (0)
                                        1006 PRECALL                  1
                                        1010 CALL                     1
                                        1020 POP_TOP
                                        1022 LOAD_CONST               0 (None)
@@ -12296,26 +12384,26 @@
                               '!LL'
                            names      ('struct', 'io', 'BytesIO', 'filename', 'file', 'write', 'pack', 'seek')
                            varnames   ('self', 'filename', 'ext', 'width', 'height', 'struct', 'BytesIO')
                            freevars   ()
                            cellvars   ()
                            filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                            name       '__init__'
-                           firstlineno 1131
+                           firstlineno 1150
                            lnotab
                               0x020108010c021a011e010c013401340162010c01340164010801340160
                               0160010c013401340134015e01
                         None
                      names      ('__name__', '__module__', '__qualname__', '__init__')
                      varnames   ()
                      freevars   ()
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'DummyImageFile'
-                     firstlineno 1130
+                     firstlineno 1149
                      lnotab 0x0a01
                   'DummyImageFile'
                   'test'
                   'bmp'
                   50
                   100
                   'oops'
@@ -12331,15 +12419,15 @@
                   ('error_message',)
                names      ('object', 'IS_IMAGE', 'assertEqual')
                varnames   ('self', 'DummyImageFile', 'img', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IMAGE'
-               firstlineno 1129
+               firstlineno 1148
                lnotab
                   0x020126191c012e0130013401300134013001340130021c012e01300134
                   01300134013001340130021c012e0130013401300134013001340130021c
                   012e0130013401300134013001340130021c013201
             code
                argcount  : 1
                nlocals   : 4
@@ -12392,349 +12480,349 @@
                   00ab020000000000000000010002007407000000000000000000006405ac
                   06a6010000ab0100000000000000006404a6010000ab0100000000000000
                   007d037c00a00400000000000000000000000000000000000000007c0364
                   18a6020000ab020000000000000000010064005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1199           4 RESUME                   0
+               1218           4 RESUME                   0
                
-               1200           6 LOAD_CONST               1 (0)
+               1219           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1201          14 LOAD_CONST               1 (0)
+               1220          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1203          26 LOAD_CLOSURE             4 (BytesIO)
+               1222          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1203>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1222>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1230          38 PUSH_NULL
+               1249          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1231          60 PUSH_NULL
+               1250          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_FILE)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1232         110 LOAD_FAST                0 (self)
+               1251         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1233         158 PUSH_NULL
+               1252         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1234         180 PUSH_NULL
+               1253         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1235         230 LOAD_FAST                0 (self)
+               1254         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1236         278 PUSH_NULL
+               1255         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('multiple.pdf')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1237         300 PUSH_NULL
+               1256         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             314 LOAD_CONST               5 ('pdf')
                             316 LOAD_CONST              10 ('png')
                             318 BUILD_LIST               2
                             320 KW_NAMES                 6
                             322 PRECALL                  1
                             326 CALL                     1
                             336 LOAD_FAST                2 (fake)
                             338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1238         354 LOAD_FAST                0 (self)
+               1257         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1239         402 PUSH_NULL
+               1258         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              11 ('multiple.png')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1240         424 PUSH_NULL
+               1259         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             438 LOAD_CONST               5 ('pdf')
                             440 LOAD_CONST              10 ('png')
                             442 BUILD_LIST               2
                             444 KW_NAMES                 6
                             446 PRECALL                  1
                             450 CALL                     1
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1241         478 LOAD_FAST                0 (self)
+               1260         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1242         526 PUSH_NULL
+               1261         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              12 ('multiple.gif')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1243         548 PUSH_NULL
+               1262         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             562 LOAD_CONST               5 ('pdf')
                             564 LOAD_CONST              10 ('png')
                             566 BUILD_LIST               2
                             568 KW_NAMES                 6
                             570 PRECALL                  1
                             574 CALL                     1
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1244         602 LOAD_FAST                0 (self)
+               1263         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1245         650 PUSH_NULL
+               1264         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              13 ('backup2014.tar.gz')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1246         672 PUSH_NULL
+               1265         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_FILE)
                
-               1247         686 LOAD_GLOBAL             11 (NULL + re)
+               1266         686 LOAD_GLOBAL             11 (NULL + re)
                             698 LOAD_ATTR                6 (compile)
                             708 LOAD_CONST              14 ('backup.*')
                             710 PRECALL                  1
                             714 CALL                     1
                             724 LOAD_CONST              15 ('tar.gz')
                             726 LOAD_CONST              16 (False)
                
-               1246         728 KW_NAMES                17
+               1265         728 KW_NAMES                17
                             730 PRECALL                  3
                             734 CALL                     3
                
-               1248         744 LOAD_FAST                2 (fake)
+               1267         744 LOAD_FAST                2 (fake)
                
-               1246         746 PRECALL                  1
+               1265         746 PRECALL                  1
                             750 CALL                     1
                             760 STORE_FAST               3 (rtn)
                
-               1249         762 LOAD_FAST                0 (self)
+               1268         762 LOAD_FAST                0 (self)
                             764 LOAD_METHOD              4 (assertEqual)
                             786 LOAD_FAST                3 (rtn)
                             788 LOAD_FAST                2 (fake)
                             790 LOAD_CONST               0 (None)
                             792 BUILD_TUPLE              2
                             794 PRECALL                  2
                             798 CALL                     2
                             808 POP_TOP
                
-               1250         810 PUSH_NULL
+               1269         810 PUSH_NULL
                             812 LOAD_FAST                1 (gen_fake)
                             814 LOAD_CONST              18 ('README')
                             816 PRECALL                  1
                             820 CALL                     1
                             830 STORE_FAST               2 (fake)
                
-               1251         832 PUSH_NULL
+               1270         832 PUSH_NULL
                             834 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             846 LOAD_CONST              18 ('README')
                             848 LOAD_CONST              19 ('')
                             850 LOAD_CONST               1 (0)
                             852 KW_NAMES                20
                             854 PRECALL                  3
                             858 CALL                     3
                             868 LOAD_FAST                2 (fake)
                             870 PRECALL                  1
                             874 CALL                     1
                             884 STORE_FAST               3 (rtn)
                
-               1252         886 LOAD_FAST                0 (self)
+               1271         886 LOAD_FAST                0 (self)
                             888 LOAD_METHOD              4 (assertEqual)
                             910 LOAD_FAST                3 (rtn)
                             912 LOAD_FAST                2 (fake)
                             914 LOAD_CONST               0 (None)
                             916 BUILD_TUPLE              2
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1253         934 PUSH_NULL
+               1272         934 PUSH_NULL
                             936 LOAD_FAST                1 (gen_fake)
                             938 LOAD_CONST              21 ('readme')
                             940 PRECALL                  1
                             944 CALL                     1
                             954 STORE_FAST               2 (fake)
                
-               1254         956 PUSH_NULL
+               1273         956 PUSH_NULL
                             958 LOAD_GLOBAL              7 (NULL + IS_FILE)
                             970 LOAD_CONST              18 ('README')
                             972 LOAD_CONST              19 ('')
                             974 LOAD_CONST               1 (0)
                             976 KW_NAMES                20
                             978 PRECALL                  3
                             982 CALL                     3
                             992 LOAD_FAST                2 (fake)
                             994 PRECALL                  1
                             998 CALL                     1
                            1008 STORE_FAST               3 (rtn)
                
-               1255        1010 LOAD_FAST                0 (self)
+               1274        1010 LOAD_FAST                0 (self)
                            1012 LOAD_METHOD              4 (assertEqual)
                            1034 LOAD_FAST                3 (rtn)
                            1036 LOAD_FAST                2 (fake)
                            1038 LOAD_CONST               8 ('Enter valid filename')
                            1040 BUILD_TUPLE              2
                            1042 PRECALL                  2
                            1046 CALL                     2
                            1056 POP_TOP
                
-               1256        1058 PUSH_NULL
+               1275        1058 PUSH_NULL
                            1060 LOAD_FAST                1 (gen_fake)
                            1062 LOAD_CONST              21 ('readme')
                            1064 PRECALL                  1
                            1068 CALL                     1
                            1078 STORE_FAST               2 (fake)
                
-               1257        1080 PUSH_NULL
+               1276        1080 PUSH_NULL
                            1082 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1094 LOAD_CONST              18 ('README')
                            1096 LOAD_CONST              22 (2)
                            1098 KW_NAMES                23
                            1100 PRECALL                  2
                            1104 CALL                     2
                            1114 LOAD_FAST                2 (fake)
                            1116 PRECALL                  1
                            1120 CALL                     1
                            1130 STORE_FAST               3 (rtn)
                
-               1258        1132 LOAD_FAST                0 (self)
+               1277        1132 LOAD_FAST                0 (self)
                            1134 LOAD_METHOD              4 (assertEqual)
                            1156 LOAD_FAST                3 (rtn)
                            1158 LOAD_FAST                2 (fake)
                            1160 LOAD_CONST               0 (None)
                            1162 BUILD_TUPLE              2
                            1164 PRECALL                  2
                            1168 CALL                     2
                            1178 POP_TOP
                
-               1259        1180 PUSH_NULL
+               1278        1180 PUSH_NULL
                            1182 LOAD_FAST                1 (gen_fake)
                            1184 LOAD_CONST              18 ('README')
                            1186 PRECALL                  1
                            1190 CALL                     1
                            1200 STORE_FAST               2 (fake)
                
-               1260        1202 PUSH_NULL
+               1279        1202 PUSH_NULL
                            1204 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1216 LOAD_CONST              18 ('README')
                            1218 LOAD_CONST              22 (2)
                            1220 KW_NAMES                23
                            1222 PRECALL                  2
                            1226 CALL                     2
                            1236 LOAD_FAST                2 (fake)
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 STORE_FAST               3 (rtn)
                
-               1261        1254 LOAD_FAST                0 (self)
+               1280        1254 LOAD_FAST                0 (self)
                            1256 LOAD_METHOD              4 (assertEqual)
                            1278 LOAD_FAST                3 (rtn)
                            1280 LOAD_FAST                2 (fake)
                            1282 LOAD_CONST               0 (None)
                            1284 BUILD_TUPLE              2
                            1286 PRECALL                  2
                            1290 CALL                     2
                            1300 POP_TOP
                
-               1262        1302 PUSH_NULL
+               1281        1302 PUSH_NULL
                            1304 LOAD_GLOBAL              7 (NULL + IS_FILE)
                            1316 LOAD_CONST               5 ('pdf')
                            1318 KW_NAMES                 6
                            1320 PRECALL                  1
                            1324 CALL                     1
                            1334 LOAD_CONST               4 ('example.pdf')
                            1336 PRECALL                  1
                            1340 CALL                     1
                            1350 STORE_FAST               3 (rtn)
                
-               1263        1352 LOAD_FAST                0 (self)
+               1282        1352 LOAD_FAST                0 (self)
                            1354 LOAD_METHOD              4 (assertEqual)
                            1376 LOAD_FAST                3 (rtn)
                            1378 LOAD_CONST              24 (('example.pdf', 'Enter valid filename'))
                            1380 PRECALL                  2
                            1384 CALL                     2
                            1394 POP_TOP
                            1396 LOAD_CONST               0 (None)
@@ -12754,62 +12842,62 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1203           2 RESUME                   0
+                     1222           2 RESUME                   0
                      
-                     1205           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1224           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1218           6 LOAD_FAST                0 (filename)
+                     1237           6 LOAD_FAST                0 (filename)
                      
-                     1205           8 BINARY_OP                6 (%)
+                     1224           8 BINARY_OP                6 (%)
                      
-                     1204          12 STORE_FAST               1 (formdata_file_data)
+                     1223          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1221          14 LOAD_GLOBAL              1 (NULL + str)
+                     1240          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1222          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1241          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1223          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1242          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1224          72 LOAD_CONST               4 ('POST')
+                     1243          72 LOAD_CONST               4 ('POST')
                      
-                     1220          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1239          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1226          80 LOAD_DEREF               4 (cgi)
+                     1245          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1227         104 PUSH_NULL
+                     1246         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1226         152 KW_NAMES                 6
+                     1245         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1228         168 LOAD_CONST               7 ('file_attach')
+                     1247         168 LOAD_CONST               7 ('file_attach')
                      
-                     1226         170 BINARY_SUBSCR
+                     1245         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
@@ -12818,15 +12906,15 @@
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1203
+                     firstlineno 1222
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'multiple.pdf'
@@ -12847,15 +12935,15 @@
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_FILE', 'assertEqual', 're', 'compile')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_FILE'
-               firstlineno 1199
+               firstlineno 1218
                lnotab
                   0x060108010c020c1b160132013001160132013001160136013001160136
                   01300116013601300116010e012aff100202fe1003300116013601300116
                   01360130011601340130011601340130013201
             code
                argcount  : 1
                nlocals   : 4
@@ -12895,255 +12983,255 @@
                   0000000000000000006405ac06a6010000ab0100000000000000006404a6
                   010000ab0100000000000000007d037c00a0040000000000000000000000
                   0000000000000000007c036415a6020000ab020000000000000000010064
                   005300
                               0 MAKE_CELL                4 (BytesIO)
                               2 MAKE_CELL                5 (cgi)
                
-               1265           4 RESUME                   0
+               1284           4 RESUME                   0
                
-               1266           6 LOAD_CONST               1 (0)
+               1285           6 LOAD_CONST               1 (0)
                               8 LOAD_CONST               0 (None)
                              10 IMPORT_NAME              0 (cgi)
                              12 STORE_DEREF              5 (cgi)
                
-               1267          14 LOAD_CONST               1 (0)
+               1286          14 LOAD_CONST               1 (0)
                              16 LOAD_CONST               2 (('BytesIO',))
                              18 IMPORT_NAME              1 (io)
                              20 IMPORT_FROM              2 (BytesIO)
                              22 STORE_DEREF              4 (BytesIO)
                              24 POP_TOP
                
-               1269          26 LOAD_CLOSURE             4 (BytesIO)
+               1288          26 LOAD_CLOSURE             4 (BytesIO)
                              28 LOAD_CLOSURE             5 (cgi)
                              30 BUILD_TUPLE              2
-                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1269>)
+                             32 LOAD_CONST               3 (<code object gen_fake, file "/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py", line 1288>)
                              34 MAKE_FUNCTION            8 (closure)
                              36 STORE_FAST               1 (gen_fake)
                
-               1296          38 PUSH_NULL
+               1315          38 PUSH_NULL
                              40 LOAD_FAST                1 (gen_fake)
                              42 LOAD_CONST               4 ('example.pdf')
                              44 PRECALL                  1
                              48 CALL                     1
                              58 STORE_FAST               2 (fake)
                
-               1297          60 PUSH_NULL
+               1316          60 PUSH_NULL
                              62 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                              74 LOAD_CONST               5 ('pdf')
                              76 KW_NAMES                 6
                              78 PRECALL                  1
                              82 CALL                     1
                              92 LOAD_FAST                2 (fake)
                              94 PRECALL                  1
                              98 CALL                     1
                             108 STORE_FAST               3 (rtn)
                
-               1298         110 LOAD_FAST                0 (self)
+               1317         110 LOAD_FAST                0 (self)
                             112 LOAD_METHOD              4 (assertEqual)
                             134 LOAD_FAST                3 (rtn)
                             136 LOAD_FAST                2 (fake)
                             138 LOAD_CONST               0 (None)
                             140 BUILD_TUPLE              2
                             142 PRECALL                  2
                             146 CALL                     2
                             156 POP_TOP
                
-               1299         158 PUSH_NULL
+               1318         158 PUSH_NULL
                             160 LOAD_FAST                1 (gen_fake)
                             162 LOAD_CONST               7 ('example.gif')
                             164 PRECALL                  1
                             168 CALL                     1
                             178 STORE_FAST               2 (fake)
                
-               1300         180 PUSH_NULL
+               1319         180 PUSH_NULL
                             182 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             194 LOAD_CONST               5 ('pdf')
                             196 KW_NAMES                 6
                             198 PRECALL                  1
                             202 CALL                     1
                             212 LOAD_FAST                2 (fake)
                             214 PRECALL                  1
                             218 CALL                     1
                             228 STORE_FAST               3 (rtn)
                
-               1301         230 LOAD_FAST                0 (self)
+               1320         230 LOAD_FAST                0 (self)
                             232 LOAD_METHOD              4 (assertEqual)
                             254 LOAD_FAST                3 (rtn)
                             256 LOAD_FAST                2 (fake)
                             258 LOAD_CONST               8 ('Enter valid filename')
                             260 BUILD_TUPLE              2
                             262 PRECALL                  2
                             266 CALL                     2
                             276 POP_TOP
                
-               1302         278 PUSH_NULL
+               1321         278 PUSH_NULL
                             280 LOAD_FAST                1 (gen_fake)
                             282 LOAD_CONST               9 ('backup2014.tar.gz')
                             284 PRECALL                  1
                             288 CALL                     1
                             298 STORE_FAST               2 (fake)
                
-               1303         300 PUSH_NULL
+               1322         300 PUSH_NULL
                             302 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                
-               1304         314 LOAD_CONST              10 ('backup.*')
+               1323         314 LOAD_CONST              10 ('backup.*')
                             316 LOAD_CONST              11 ('tar.gz')
                             318 LOAD_CONST              12 (False)
                
-               1303         320 KW_NAMES                13
+               1322         320 KW_NAMES                13
                             322 PRECALL                  3
                             326 CALL                     3
                
-               1305         336 LOAD_FAST                2 (fake)
+               1324         336 LOAD_FAST                2 (fake)
                
-               1303         338 PRECALL                  1
+               1322         338 PRECALL                  1
                             342 CALL                     1
                             352 STORE_FAST               3 (rtn)
                
-               1306         354 LOAD_FAST                0 (self)
+               1325         354 LOAD_FAST                0 (self)
                             356 LOAD_METHOD              4 (assertEqual)
                             378 LOAD_FAST                3 (rtn)
                             380 LOAD_FAST                2 (fake)
                             382 LOAD_CONST               0 (None)
                             384 BUILD_TUPLE              2
                             386 PRECALL                  2
                             390 CALL                     2
                             400 POP_TOP
                
-               1307         402 PUSH_NULL
+               1326         402 PUSH_NULL
                             404 LOAD_FAST                1 (gen_fake)
                             406 LOAD_CONST              14 ('README')
                             408 PRECALL                  1
                             412 CALL                     1
                             422 STORE_FAST               2 (fake)
                
-               1308         424 PUSH_NULL
+               1327         424 PUSH_NULL
                             426 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             438 LOAD_CONST              15 ('^README$')
                             440 LOAD_CONST              16 ('^$')
                             442 LOAD_CONST               1 (0)
                             444 KW_NAMES                17
                             446 PRECALL                  3
                             450 CALL                     3
                             460 LOAD_FAST                2 (fake)
                             462 PRECALL                  1
                             466 CALL                     1
                             476 STORE_FAST               3 (rtn)
                
-               1309         478 LOAD_FAST                0 (self)
+               1328         478 LOAD_FAST                0 (self)
                             480 LOAD_METHOD              4 (assertEqual)
                             502 LOAD_FAST                3 (rtn)
                             504 LOAD_FAST                2 (fake)
                             506 LOAD_CONST               0 (None)
                             508 BUILD_TUPLE              2
                             510 PRECALL                  2
                             514 CALL                     2
                             524 POP_TOP
                
-               1310         526 PUSH_NULL
+               1329         526 PUSH_NULL
                             528 LOAD_FAST                1 (gen_fake)
                             530 LOAD_CONST              18 ('readme')
                             532 PRECALL                  1
                             536 CALL                     1
                             546 STORE_FAST               2 (fake)
                
-               1311         548 PUSH_NULL
+               1330         548 PUSH_NULL
                             550 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             562 LOAD_CONST              15 ('^README$')
                             564 LOAD_CONST              16 ('^$')
                             566 LOAD_CONST               1 (0)
                             568 KW_NAMES                17
                             570 PRECALL                  3
                             574 CALL                     3
                             584 LOAD_FAST                2 (fake)
                             586 PRECALL                  1
                             590 CALL                     1
                             600 STORE_FAST               3 (rtn)
                
-               1312         602 LOAD_FAST                0 (self)
+               1331         602 LOAD_FAST                0 (self)
                             604 LOAD_METHOD              4 (assertEqual)
                             626 LOAD_FAST                3 (rtn)
                             628 LOAD_FAST                2 (fake)
                             630 LOAD_CONST               8 ('Enter valid filename')
                             632 BUILD_TUPLE              2
                             634 PRECALL                  2
                             638 CALL                     2
                             648 POP_TOP
                
-               1313         650 PUSH_NULL
+               1332         650 PUSH_NULL
                             652 LOAD_FAST                1 (gen_fake)
                             654 LOAD_CONST              18 ('readme')
                             656 PRECALL                  1
                             660 CALL                     1
                             670 STORE_FAST               2 (fake)
                
-               1314         672 PUSH_NULL
+               1333         672 PUSH_NULL
                             674 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             686 LOAD_CONST              14 ('README')
                             688 LOAD_CONST              19 (2)
                             690 KW_NAMES                20
                             692 PRECALL                  2
                             696 CALL                     2
                             706 LOAD_FAST                2 (fake)
                             708 PRECALL                  1
                             712 CALL                     1
                             722 STORE_FAST               3 (rtn)
                
-               1315         724 LOAD_FAST                0 (self)
+               1334         724 LOAD_FAST                0 (self)
                             726 LOAD_METHOD              4 (assertEqual)
                             748 LOAD_FAST                3 (rtn)
                             750 LOAD_FAST                2 (fake)
                             752 LOAD_CONST               0 (None)
                             754 BUILD_TUPLE              2
                             756 PRECALL                  2
                             760 CALL                     2
                             770 POP_TOP
                
-               1316         772 PUSH_NULL
+               1335         772 PUSH_NULL
                             774 LOAD_FAST                1 (gen_fake)
                             776 LOAD_CONST              14 ('README')
                             778 PRECALL                  1
                             782 CALL                     1
                             792 STORE_FAST               2 (fake)
                
-               1317         794 PUSH_NULL
+               1336         794 PUSH_NULL
                             796 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             808 LOAD_CONST              14 ('README')
                             810 LOAD_CONST              19 (2)
                             812 KW_NAMES                20
                             814 PRECALL                  2
                             818 CALL                     2
                             828 LOAD_FAST                2 (fake)
                             830 PRECALL                  1
                             834 CALL                     1
                             844 STORE_FAST               3 (rtn)
                
-               1318         846 LOAD_FAST                0 (self)
+               1337         846 LOAD_FAST                0 (self)
                             848 LOAD_METHOD              4 (assertEqual)
                             870 LOAD_FAST                3 (rtn)
                             872 LOAD_FAST                2 (fake)
                             874 LOAD_CONST               0 (None)
                             876 BUILD_TUPLE              2
                             878 PRECALL                  2
                             882 CALL                     2
                             892 POP_TOP
                
-               1319         894 PUSH_NULL
+               1338         894 PUSH_NULL
                             896 LOAD_GLOBAL              7 (NULL + IS_UPLOAD_FILENAME)
                             908 LOAD_CONST               5 ('pdf')
                             910 KW_NAMES                 6
                             912 PRECALL                  1
                             916 CALL                     1
                             926 LOAD_CONST               4 ('example.pdf')
                             928 PRECALL                  1
                             932 CALL                     1
                             942 STORE_FAST               3 (rtn)
                
-               1320         944 LOAD_FAST                0 (self)
+               1339         944 LOAD_FAST                0 (self)
                             946 LOAD_METHOD              4 (assertEqual)
                             968 LOAD_FAST                3 (rtn)
                             970 LOAD_CONST              21 (('example.pdf', 'Enter valid filename'))
                             972 PRECALL                  2
                             976 CALL                     2
                             986 POP_TOP
                             988 LOAD_CONST               0 (None)
@@ -13163,62 +13251,62 @@
                         01000000000000000064026403640464059c047d028904a0020000000000
                         000000000000000000000000000000020089037407000000000000000000
                         007c01a6010000ab010000000000000000a6010000ab0100000000000000
                         007c02ac06a6020000ab0200000000000000006407190000000000000000
                         005300
                                     0 COPY_FREE_VARS           2
                      
-                     1269           2 RESUME                   0
+                     1288           2 RESUME                   0
                      
-                     1271           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
+                     1290           4 LOAD_CONST               1 ('\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n')
                      
-                     1284           6 LOAD_FAST                0 (filename)
+                     1303           6 LOAD_FAST                0 (filename)
                      
-                     1271           8 BINARY_OP                6 (%)
+                     1290           8 BINARY_OP                6 (%)
                      
-                     1270          12 STORE_FAST               1 (formdata_file_data)
+                     1289          12 STORE_FAST               1 (formdata_file_data)
                      
-                     1287          14 LOAD_GLOBAL              1 (NULL + str)
+                     1306          14 LOAD_GLOBAL              1 (NULL + str)
                                    26 LOAD_GLOBAL              3 (NULL + len)
                                    38 LOAD_FAST                1 (formdata_file_data)
                                    40 PRECALL                  1
                                    44 CALL                     1
                                    54 PRECALL                  1
                                    58 CALL                     1
                      
-                     1288          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
+                     1307          68 LOAD_CONST               2 ('multipart/form-data; boundary=-123')
                      
-                     1289          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
+                     1308          70 LOAD_CONST               3 ('key1=value1&key2=value2x')
                      
-                     1290          72 LOAD_CONST               4 ('POST')
+                     1309          72 LOAD_CONST               4 ('POST')
                      
-                     1286          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
+                     1305          74 LOAD_CONST               5 (('CONTENT_LENGTH', 'CONTENT_TYPE', 'QUERY_STRING', 'REQUEST_METHOD'))
                                    76 BUILD_CONST_KEY_MAP      4
                                    78 STORE_FAST               2 (formdata_file_environ)
                      
-                     1292          80 LOAD_DEREF               4 (cgi)
+                     1311          80 LOAD_DEREF               4 (cgi)
                                    82 LOAD_METHOD              2 (FieldStorage)
                      
-                     1293         104 PUSH_NULL
+                     1312         104 PUSH_NULL
                                   106 LOAD_DEREF               3 (BytesIO)
                                   108 LOAD_GLOBAL              7 (NULL + to_bytes)
                                   120 LOAD_FAST                1 (formdata_file_data)
                                   122 PRECALL                  1
                                   126 CALL                     1
                                   136 PRECALL                  1
                                   140 CALL                     1
                                   150 LOAD_FAST                2 (formdata_file_environ)
                      
-                     1292         152 KW_NAMES                 6
+                     1311         152 KW_NAMES                 6
                                   154 PRECALL                  2
                                   158 CALL                     2
                      
-                     1294         168 LOAD_CONST               7 ('file_attach')
+                     1313         168 LOAD_CONST               7 ('file_attach')
                      
-                     1292         170 BINARY_SUBSCR
+                     1311         170 BINARY_SUBSCR
                                   180 RETURN_VALUE
                      consts
                         None
                         '\n---123\nContent-Disposition: form-data; name="key2"\n\nvalue2y\n---123\nContent-Disposition: form-data; name="file_attach"; filename="%s"\nContent-Type: text/plain\n\nthis is the content of the fake file\n\n---123--\n'
                         'multipart/form-data; boundary=-123'
                         'key1=value1&key2=value2x'
                         'POST'
@@ -13227,15 +13315,15 @@
                         'file_attach'
                      names      ('str', 'len', 'FieldStorage', 'to_bytes')
                      varnames   ('filename', 'formdata_file_data', 'formdata_file_environ')
                      freevars   ('BytesIO', 'cgi')
                      cellvars   ()
                      filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                      name       'gen_fake'
-                     firstlineno 1269
+                     firstlineno 1288
                      lnotab 0x0402020d02f304ff021136010201020102fc0606180130ff100202fe
                   'example.pdf'
                   'pdf'
                   ('extension',)
                   'example.gif'
                   'Enter valid filename'
                   'backup2014.tar.gz'
@@ -13253,15 +13341,15 @@
                   ('example.pdf', 'Enter valid filename')
                names      ('cgi', 'io', 'BytesIO', 'IS_UPLOAD_FILENAME', 'assertEqual')
                varnames   ('self', 'gen_fake', 'fake', 'rtn')
                freevars   ()
                cellvars   ('BytesIO', 'cgi')
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_UPLOAD_FILENAME'
-               firstlineno 1265
+               firstlineno 1284
                lnotab
                   0x060108010c020c1b16013201300116013201300116010e0106ff100202
                   fe1003300116013601300116013601300116013401300116013401300132
                   01
             code
                argcount  : 1
                nlocals   : 2
@@ -13317,322 +13405,322 @@
                   000000000001000200740100000000000000000000641fac1ea6010000ab
                   010000000000000000641ba6010000ab0100000000000000007d017c00a0
                   0100000000000000000000000000000000000000007c016420a6020000ab
                   0200000000000000000100020074010000000000000000000064216419ac
                   22a6020000ab020000000000000000641ba6010000ab0100000000000000
                   007d017c00a00100000000000000000000000000000000000000007c0164
                   20a6020000ab020000000000000000010064005300
-               1322           0 RESUME                   0
+               1341           0 RESUME                   0
                
-               1323           2 PUSH_NULL
+               1342           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('1.2.3.4')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1324          48 LOAD_FAST                0 (self)
+               1343          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('1.2.3.4', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1325          92 PUSH_NULL
+               1344          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('255.255.255.255')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1326         138 LOAD_FAST                0 (self)
+               1345         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('255.255.255.255', None))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1327         182 PUSH_NULL
+               1346         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             196 PRECALL                  0
                             200 CALL                     0
                             210 LOAD_CONST               5 ('1.2.3.4 ')
                             212 PRECALL                  1
                             216 CALL                     1
                             226 STORE_FAST               1 (rtn)
                
-               1328         228 LOAD_FAST                0 (self)
+               1347         228 LOAD_FAST                0 (self)
                             230 LOAD_METHOD              1 (assertEqual)
                             252 LOAD_FAST                1 (rtn)
                             254 LOAD_CONST               6 (('1.2.3.4 ', 'Enter valid IPv4 address'))
                             256 PRECALL                  2
                             260 CALL                     2
                             270 POP_TOP
                
-               1329         272 PUSH_NULL
+               1348         272 PUSH_NULL
                             274 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             286 PRECALL                  0
                             290 CALL                     0
                             300 LOAD_CONST               7 ('1.2.3.4.5')
                             302 PRECALL                  1
                             306 CALL                     1
                             316 STORE_FAST               1 (rtn)
                
-               1330         318 LOAD_FAST                0 (self)
+               1349         318 LOAD_FAST                0 (self)
                             320 LOAD_METHOD              1 (assertEqual)
                             342 LOAD_FAST                1 (rtn)
                             344 LOAD_CONST               8 (('1.2.3.4.5', 'Enter valid IPv4 address'))
                             346 PRECALL                  2
                             350 CALL                     2
                             360 POP_TOP
                
-               1331         362 PUSH_NULL
+               1350         362 PUSH_NULL
                             364 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             376 PRECALL                  0
                             380 CALL                     0
                             390 LOAD_CONST               9 ('123.123')
                             392 PRECALL                  1
                             396 CALL                     1
                             406 STORE_FAST               1 (rtn)
                
-               1332         408 LOAD_FAST                0 (self)
+               1351         408 LOAD_FAST                0 (self)
                             410 LOAD_METHOD              1 (assertEqual)
                             432 LOAD_FAST                1 (rtn)
                             434 LOAD_CONST              10 (('123.123', 'Enter valid IPv4 address'))
                             436 PRECALL                  2
                             440 CALL                     2
                             450 POP_TOP
                
-               1333         452 PUSH_NULL
+               1352         452 PUSH_NULL
                             454 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             466 PRECALL                  0
                             470 CALL                     0
                             480 LOAD_CONST              11 ('1111.2.3.4')
                             482 PRECALL                  1
                             486 CALL                     1
                             496 STORE_FAST               1 (rtn)
                
-               1334         498 LOAD_FAST                0 (self)
+               1353         498 LOAD_FAST                0 (self)
                             500 LOAD_METHOD              1 (assertEqual)
                             522 LOAD_FAST                1 (rtn)
                             524 LOAD_CONST              12 (('1111.2.3.4', 'Enter valid IPv4 address'))
                             526 PRECALL                  2
                             530 CALL                     2
                             540 POP_TOP
                
-               1335         542 PUSH_NULL
+               1354         542 PUSH_NULL
                             544 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             556 PRECALL                  0
                             560 CALL                     0
                             570 LOAD_CONST              13 ('0111.2.3.4')
                             572 PRECALL                  1
                             576 CALL                     1
                             586 STORE_FAST               1 (rtn)
                
-               1336         588 LOAD_FAST                0 (self)
+               1355         588 LOAD_FAST                0 (self)
                             590 LOAD_METHOD              1 (assertEqual)
                             612 LOAD_FAST                1 (rtn)
                             614 LOAD_CONST              14 (('0111.2.3.4', 'Enter valid IPv4 address'))
                             616 PRECALL                  2
                             620 CALL                     2
                             630 POP_TOP
                
-               1337         632 PUSH_NULL
+               1356         632 PUSH_NULL
                             634 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             646 PRECALL                  0
                             650 CALL                     0
                             660 LOAD_CONST              15 ('256.2.3.4')
                             662 PRECALL                  1
                             666 CALL                     1
                             676 STORE_FAST               1 (rtn)
                
-               1338         678 LOAD_FAST                0 (self)
+               1357         678 LOAD_FAST                0 (self)
                             680 LOAD_METHOD              1 (assertEqual)
                             702 LOAD_FAST                1 (rtn)
                             704 LOAD_CONST              16 (('256.2.3.4', 'Enter valid IPv4 address'))
                             706 PRECALL                  2
                             710 CALL                     2
                             720 POP_TOP
                
-               1339         722 PUSH_NULL
+               1358         722 PUSH_NULL
                             724 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             736 PRECALL                  0
                             740 CALL                     0
                             750 LOAD_CONST              17 ('300.2.3.4')
                             752 PRECALL                  1
                             756 CALL                     1
                             766 STORE_FAST               1 (rtn)
                
-               1340         768 LOAD_FAST                0 (self)
+               1359         768 LOAD_FAST                0 (self)
                             770 LOAD_METHOD              1 (assertEqual)
                             792 LOAD_FAST                1 (rtn)
                             794 LOAD_CONST              18 (('300.2.3.4', 'Enter valid IPv4 address'))
                             796 PRECALL                  2
                             800 CALL                     2
                             810 POP_TOP
                
-               1341         812 PUSH_NULL
+               1360         812 PUSH_NULL
                             814 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             826 LOAD_CONST               1 ('1.2.3.4')
                             828 LOAD_CONST               1 ('1.2.3.4')
                             830 KW_NAMES                19
                             832 PRECALL                  2
                             836 CALL                     2
                             846 LOAD_CONST               1 ('1.2.3.4')
                             848 PRECALL                  1
                             852 CALL                     1
                             862 STORE_FAST               1 (rtn)
                
-               1342         864 LOAD_FAST                0 (self)
+               1361         864 LOAD_FAST                0 (self)
                             866 LOAD_METHOD              1 (assertEqual)
                             888 LOAD_FAST                1 (rtn)
                             890 LOAD_CONST               2 (('1.2.3.4', None))
                             892 PRECALL                  2
                             896 CALL                     2
                             906 POP_TOP
                
-               1343         908 PUSH_NULL
+               1362         908 PUSH_NULL
                             910 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                             922 LOAD_CONST              20 ('1.2.3.5')
                             924 LOAD_CONST              21 ('1.2.3.9')
                             926 LOAD_CONST              22 ('bad ip')
                             928 KW_NAMES                23
                             930 PRECALL                  3
                             934 CALL                     3
                
-               1344         944 LOAD_CONST               1 ('1.2.3.4')
+               1363         944 LOAD_CONST               1 ('1.2.3.4')
                
-               1343         946 PRECALL                  1
+               1362         946 PRECALL                  1
                             950 CALL                     1
                             960 STORE_FAST               1 (rtn)
                
-               1346         962 LOAD_FAST                0 (self)
+               1365         962 LOAD_FAST                0 (self)
                             964 LOAD_METHOD              1 (assertEqual)
                             986 LOAD_FAST                1 (rtn)
                             988 LOAD_CONST              24 (('1.2.3.4', 'bad ip'))
                             990 PRECALL                  2
                             994 CALL                     2
                            1004 POP_TOP
                
-               1347        1006 PUSH_NULL
+               1366        1006 PUSH_NULL
                            1008 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1020 LOAD_CONST               1 ('1.2.3.4')
                            1022 LOAD_CONST              25 (True)
                            1024 KW_NAMES                26
                            1026 PRECALL                  2
                            1030 CALL                     2
                            1040 LOAD_CONST              27 ('127.0.0.1')
                            1042 PRECALL                  1
                            1046 CALL                     1
                            1056 STORE_FAST               1 (rtn)
                
-               1348        1058 LOAD_FAST                0 (self)
+               1367        1058 LOAD_FAST                0 (self)
                            1060 LOAD_METHOD              1 (assertEqual)
                            1082 LOAD_FAST                1 (rtn)
                            1084 LOAD_CONST              28 (('127.0.0.1', None))
                            1086 PRECALL                  2
                            1090 CALL                     2
                            1100 POP_TOP
                
-               1349        1102 PUSH_NULL
+               1368        1102 PUSH_NULL
                            1104 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1116 LOAD_CONST               1 ('1.2.3.4')
                            1118 LOAD_CONST              25 (True)
                            1120 KW_NAMES                26
                            1122 PRECALL                  2
                            1126 CALL                     2
                            1136 LOAD_CONST               1 ('1.2.3.4')
                            1138 PRECALL                  1
                            1142 CALL                     1
                            1152 STORE_FAST               1 (rtn)
                
-               1350        1154 LOAD_FAST                0 (self)
+               1369        1154 LOAD_FAST                0 (self)
                            1156 LOAD_METHOD              1 (assertEqual)
                            1178 LOAD_FAST                1 (rtn)
                            1180 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1182 PRECALL                  2
                            1186 CALL                     2
                            1196 POP_TOP
                
-               1351        1198 PUSH_NULL
+               1370        1198 PUSH_NULL
                            1200 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1212 LOAD_CONST              25 (True)
                            1214 KW_NAMES                30
                            1216 PRECALL                  1
                            1220 CALL                     1
                            1230 LOAD_CONST              27 ('127.0.0.1')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1352        1248 LOAD_FAST                0 (self)
+               1371        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              28 (('127.0.0.1', None))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1353        1292 PUSH_NULL
+               1372        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1306 LOAD_CONST              25 (True)
                            1308 KW_NAMES                30
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST               1 ('1.2.3.4')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1354        1342 LOAD_FAST                0 (self)
+               1373        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              29 (('1.2.3.4', 'Enter valid IPv4 address'))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1355        1386 PUSH_NULL
+               1374        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1400 LOAD_CONST              31 (False)
                            1402 KW_NAMES                30
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              27 ('127.0.0.1')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1356        1436 LOAD_FAST                0 (self)
+               1375        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1357        1480 PUSH_NULL
+               1376        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPV4)
                            1494 LOAD_CONST              33 ('100.0.0.0')
                            1496 LOAD_CONST              25 (True)
                            1498 KW_NAMES                34
                            1500 PRECALL                  2
                            1504 CALL                     2
                            1514 LOAD_CONST              27 ('127.0.0.1')
                            1516 PRECALL                  1
                            1520 CALL                     1
                            1530 STORE_FAST               1 (rtn)
                
-               1358        1532 LOAD_FAST                0 (self)
+               1377        1532 LOAD_FAST                0 (self)
                            1534 LOAD_METHOD              1 (assertEqual)
                            1556 LOAD_FAST                1 (rtn)
                            1558 LOAD_CONST              32 (('127.0.0.1', 'Enter valid IPv4 address'))
                            1560 PRECALL                  2
                            1564 CALL                     2
                            1574 POP_TOP
                            1576 LOAD_CONST               0 (None)
@@ -13675,15 +13763,15 @@
                   ('maxip', 'is_localhost')
                names      ('IS_IPV4', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV4'
-               firstlineno 1322
+               firstlineno 1341
                lnotab
                   0x02012e012c012e012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c0134012c01240102ff10032c0134012c0134012c0132
                   012c0132012c0132012c013401
             code
                argcount  : 1
                nlocals   : 2
@@ -13730,273 +13818,273 @@
                   00ab02000000000000000001000200740100000000000000000000641a64
                   146702ac15a6010000ab0100000000000000006416a6010000ab01000000
                   00000000007d017c00a00100000000000000000000000000000000000000
                   007c016417a6020000ab0200000000000000000100020074010000000000
                   0000000000641bac15a6010000ab0100000000000000006416a6010000ab
                   0100000000000000007d017c00a001000000000000000000000000000000
                   00000000007c01641ca6020000ab020000000000000000010064005300
-               1360           0 RESUME                   0
+               1379           0 RESUME                   0
                
-               1361           2 PUSH_NULL
+               1380           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1362          48 LOAD_FAST                0 (self)
+               1381          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1363          92 PUSH_NULL
+               1382          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             106 PRECALL                  0
                             110 CALL                     0
                             120 LOAD_CONST               3 ('192.168.1.1')
                             122 PRECALL                  1
                             126 CALL                     1
                             136 STORE_FAST               1 (rtn)
                
-               1364         138 LOAD_FAST                0 (self)
+               1383         138 LOAD_FAST                0 (self)
                             140 LOAD_METHOD              1 (assertEqual)
                             162 LOAD_FAST                1 (rtn)
                             164 LOAD_CONST               4 (('192.168.1.1', 'Enter valid IPv6 address'))
                             166 PRECALL                  2
                             170 CALL                     2
                             180 POP_TOP
                
-               1365         182 PUSH_NULL
+               1384         182 PUSH_NULL
                             184 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             196 LOAD_CONST               5 ('bad ip')
                             198 KW_NAMES                 6
                             200 PRECALL                  1
                             204 CALL                     1
                             214 LOAD_CONST               3 ('192.168.1.1')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1366         232 LOAD_FAST                0 (self)
+               1385         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               7 (('192.168.1.1', 'bad ip'))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1367         276 PUSH_NULL
+               1386         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             290 LOAD_CONST               8 (True)
                             292 KW_NAMES                 9
                             294 PRECALL                  1
                             298 CALL                     1
                             308 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             310 PRECALL                  1
                             314 CALL                     1
                             324 STORE_FAST               1 (rtn)
                
-               1368         326 LOAD_FAST                0 (self)
+               1387         326 LOAD_FAST                0 (self)
                             328 LOAD_METHOD              1 (assertEqual)
                             350 LOAD_FAST                1 (rtn)
                             352 LOAD_CONST               2 (('fe80::126c:8ffa:fe22:b3af', None))
                             354 PRECALL                  2
                             358 CALL                     2
                             368 POP_TOP
                
-               1369         370 PUSH_NULL
+               1388         370 PUSH_NULL
                             372 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             384 LOAD_CONST              10 (False)
                             386 KW_NAMES                 9
                             388 PRECALL                  1
                             392 CALL                     1
                             402 LOAD_CONST               1 ('fe80::126c:8ffa:fe22:b3af')
                             404 PRECALL                  1
                             408 CALL                     1
                             418 STORE_FAST               1 (rtn)
                
-               1370         420 LOAD_FAST                0 (self)
+               1389         420 LOAD_FAST                0 (self)
                             422 LOAD_METHOD              1 (assertEqual)
                             444 LOAD_FAST                1 (rtn)
                             446 LOAD_CONST              11 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             448 PRECALL                  2
                             452 CALL                     2
                             462 POP_TOP
                
-               1371         464 PUSH_NULL
+               1390         464 PUSH_NULL
                             466 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             478 LOAD_CONST               8 (True)
                             480 KW_NAMES                 9
                             482 PRECALL                  1
                             486 CALL                     1
                             496 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             498 PRECALL                  1
                             502 CALL                     1
                             512 STORE_FAST               1 (rtn)
                
-               1372         514 LOAD_FAST                0 (self)
+               1391         514 LOAD_FAST                0 (self)
                             516 LOAD_METHOD              1 (assertEqual)
                             538 LOAD_FAST                1 (rtn)
                             540 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             542 PRECALL                  2
                             546 CALL                     2
                             556 POP_TOP
                
-               1373         558 PUSH_NULL
+               1392         558 PUSH_NULL
                             560 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             572 LOAD_CONST               8 (True)
                             574 KW_NAMES                14
                             576 PRECALL                  1
                             580 CALL                     1
                             590 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             592 PRECALL                  1
                             596 CALL                     1
                             606 STORE_FAST               1 (rtn)
                
-               1374         608 LOAD_FAST                0 (self)
+               1393         608 LOAD_FAST                0 (self)
                             610 LOAD_METHOD              1 (assertEqual)
                             632 LOAD_FAST                1 (rtn)
                             634 LOAD_CONST              13 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             636 PRECALL                  2
                             640 CALL                     2
                             650 POP_TOP
                
-               1375         652 PUSH_NULL
+               1394         652 PUSH_NULL
                             654 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             666 LOAD_CONST               8 (True)
                             668 KW_NAMES                14
                             670 PRECALL                  1
                             674 CALL                     1
                             684 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             686 PRECALL                  1
                             690 CALL                     1
                             700 STORE_FAST               1 (rtn)
                
-               1376         702 LOAD_FAST                0 (self)
+               1395         702 LOAD_FAST                0 (self)
                             704 LOAD_METHOD              1 (assertEqual)
                             726 LOAD_FAST                1 (rtn)
                             728 LOAD_CONST              16 (('ff00::126c:8ffa:fe22:b3af', None))
                             730 PRECALL                  2
                             734 CALL                     2
                             744 POP_TOP
                
-               1380         746 PUSH_NULL
+               1399         746 PUSH_NULL
                             748 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             760 LOAD_CONST              10 (False)
                             762 KW_NAMES                17
                             764 PRECALL                  1
                             768 CALL                     1
                             778 LOAD_CONST              12 ('2001::126c:8ffa:fe22:b3af')
                             780 PRECALL                  1
                             784 CALL                     1
                             794 STORE_FAST               1 (rtn)
                
-               1381         796 LOAD_FAST                0 (self)
+               1400         796 LOAD_FAST                0 (self)
                             798 LOAD_METHOD              1 (assertEqual)
                             820 LOAD_FAST                1 (rtn)
                             822 LOAD_CONST              18 (('2001::126c:8ffa:fe22:b3af', None))
                             824 PRECALL                  2
                             828 CALL                     2
                             838 POP_TOP
                
-               1382         840 PUSH_NULL
+               1401         840 PUSH_NULL
                             842 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             854 LOAD_CONST               8 (True)
                             856 KW_NAMES                17
                             858 PRECALL                  1
                             862 CALL                     1
                             872 LOAD_CONST              15 ('ff00::126c:8ffa:fe22:b3af')
                             874 PRECALL                  1
                             878 CALL                     1
                             888 STORE_FAST               1 (rtn)
                
-               1383         890 LOAD_FAST                0 (self)
+               1402         890 LOAD_FAST                0 (self)
                             892 LOAD_METHOD              1 (assertEqual)
                             914 LOAD_FAST                1 (rtn)
                             916 LOAD_CONST              19 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                             918 PRECALL                  2
                             922 CALL                     2
                             932 POP_TOP
                
-               1384         934 PUSH_NULL
+               1403         934 PUSH_NULL
                             936 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                             948 LOAD_CONST              20 ('2001::/32')
                             950 KW_NAMES                21
                             952 PRECALL                  1
                             956 CALL                     1
                             966 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                             968 PRECALL                  1
                             972 CALL                     1
                             982 STORE_FAST               1 (rtn)
                
-               1385         984 LOAD_FAST                0 (self)
+               1404         984 LOAD_FAST                0 (self)
                             986 LOAD_METHOD              1 (assertEqual)
                            1008 LOAD_FAST                1 (rtn)
                            1010 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1012 PRECALL                  2
                            1016 CALL                     2
                            1026 POP_TOP
                
-               1386        1028 PUSH_NULL
+               1405        1028 PUSH_NULL
                            1030 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1042 LOAD_CONST              24 ('fb00::/8')
                            1044 KW_NAMES                21
                            1046 PRECALL                  1
                            1050 CALL                     1
                            1060 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1062 PRECALL                  1
                            1066 CALL                     1
                            1076 STORE_FAST               1 (rtn)
                
-               1387        1078 LOAD_FAST                0 (self)
+               1406        1078 LOAD_FAST                0 (self)
                            1080 LOAD_METHOD              1 (assertEqual)
                            1102 LOAD_FAST                1 (rtn)
                            1104 LOAD_CONST              25 (('2001::8ffa:fe22:b3af', 'Enter valid IPv6 address'))
                            1106 PRECALL                  2
                            1110 CALL                     2
                            1120 POP_TOP
                
-               1388        1122 PUSH_NULL
+               1407        1122 PUSH_NULL
                            1124 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1136 LOAD_CONST              26 ('fc00::/8')
                            1138 LOAD_CONST              20 ('2001::/32')
                            1140 BUILD_LIST               2
                            1142 KW_NAMES                21
                            1144 PRECALL                  1
                            1148 CALL                     1
                            1158 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1160 PRECALL                  1
                            1164 CALL                     1
                            1174 STORE_FAST               1 (rtn)
                
-               1389        1176 LOAD_FAST                0 (self)
+               1408        1176 LOAD_FAST                0 (self)
                            1178 LOAD_METHOD              1 (assertEqual)
                            1200 LOAD_FAST                1 (rtn)
                            1202 LOAD_CONST              23 (('2001::8ffa:fe22:b3af', None))
                            1204 PRECALL                  2
                            1208 CALL                     2
                            1218 POP_TOP
                
-               1390        1220 PUSH_NULL
+               1409        1220 PUSH_NULL
                            1222 LOAD_GLOBAL              1 (NULL + IS_IPV6)
                            1234 LOAD_CONST              27 ('invalidsubnet')
                            1236 KW_NAMES                21
                            1238 PRECALL                  1
                            1242 CALL                     1
                            1252 LOAD_CONST              22 ('2001::8ffa:fe22:b3af')
                            1254 PRECALL                  1
                            1258 CALL                     1
                            1268 STORE_FAST               1 (rtn)
                
-               1391        1270 LOAD_FAST                0 (self)
+               1410        1270 LOAD_FAST                0 (self)
                            1272 LOAD_METHOD              1 (assertEqual)
                            1294 LOAD_FAST                1 (rtn)
                            1296 LOAD_CONST              28 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            1298 PRECALL                  2
                            1302 CALL                     2
                            1312 POP_TOP
                            1314 LOAD_CONST               0 (None)
@@ -14033,15 +14121,15 @@
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPV6', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPV6'
-               firstlineno 1360
+               firstlineno 1379
                lnotab
                   0x02012e012c012e012c0132012c0132012c0132012c0132012c0132012c
                   0132012c0432012c0132012c0132012c0132012c0136012c013201
             code
                argcount  : 1
                nlocals   : 2
                stacksize : 6
@@ -14152,661 +14240,661 @@
                   020000000000000000010002007401000000000000000000006446644067
                   02ac41a6010000ab0100000000000000006442a6010000ab010000000000
                   0000007d017c00a00100000000000000000000000000000000000000007c
                   016443a6020000ab02000000000000000001000200740100000000000000
                   0000006447ac41a6010000ab0100000000000000006442a6010000ab0100
                   000000000000007d017c00a0010000000000000000000000000000000000
                   0000007c016448a6020000ab020000000000000000010064005300
-               1393           0 RESUME                   0
+               1412           0 RESUME                   0
                
-               1394           2 PUSH_NULL
+               1413           2 PUSH_NULL
                               4 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                              16 PRECALL                  0
                              20 CALL                     0
                              30 LOAD_CONST               1 ('192.168.1.5')
                              32 PRECALL                  1
                              36 CALL                     1
                              46 STORE_FAST               1 (rtn)
                
-               1395          48 LOAD_FAST                0 (self)
+               1414          48 LOAD_FAST                0 (self)
                              50 LOAD_METHOD              1 (assertEqual)
                              72 LOAD_FAST                1 (rtn)
                              74 LOAD_CONST               2 (('192.168.1.5', None))
                              76 PRECALL                  2
                              80 CALL                     2
                              90 POP_TOP
                
-               1396          92 PUSH_NULL
+               1415          92 PUSH_NULL
                              94 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             106 LOAD_CONST               3 (False)
                             108 KW_NAMES                 4
                             110 PRECALL                  1
                             114 CALL                     1
                             124 LOAD_CONST               1 ('192.168.1.5')
                             126 PRECALL                  1
                             130 CALL                     1
                             140 STORE_FAST               1 (rtn)
                
-               1397         142 LOAD_FAST                0 (self)
+               1416         142 LOAD_FAST                0 (self)
                             144 LOAD_METHOD              1 (assertEqual)
                             166 LOAD_FAST                1 (rtn)
                             168 LOAD_CONST               2 (('192.168.1.5', None))
                             170 PRECALL                  2
                             174 CALL                     2
                             184 POP_TOP
                
-               1398         186 PUSH_NULL
+               1417         186 PUSH_NULL
                             188 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             200 PRECALL                  0
                             204 CALL                     0
                             214 LOAD_CONST               5 ('255.255.255.255')
                             216 PRECALL                  1
                             220 CALL                     1
                             230 STORE_FAST               1 (rtn)
                
-               1399         232 LOAD_FAST                0 (self)
+               1418         232 LOAD_FAST                0 (self)
                             234 LOAD_METHOD              1 (assertEqual)
                             256 LOAD_FAST                1 (rtn)
                             258 LOAD_CONST               6 (('255.255.255.255', None))
                             260 PRECALL                  2
                             264 CALL                     2
                             274 POP_TOP
                
-               1400         276 PUSH_NULL
+               1419         276 PUSH_NULL
                             278 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             290 PRECALL                  0
                             294 CALL                     0
                             304 LOAD_CONST               7 ('192.168.1.5 ')
                             306 PRECALL                  1
                             310 CALL                     1
                             320 STORE_FAST               1 (rtn)
                
-               1401         322 LOAD_FAST                0 (self)
+               1420         322 LOAD_FAST                0 (self)
                             324 LOAD_METHOD              1 (assertEqual)
                             346 LOAD_FAST                1 (rtn)
                             348 LOAD_CONST               8 (('192.168.1.5 ', 'Enter valid IP address'))
                             350 PRECALL                  2
                             354 CALL                     2
                             364 POP_TOP
                
-               1402         366 PUSH_NULL
+               1421         366 PUSH_NULL
                             368 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             380 PRECALL                  0
                             384 CALL                     0
                             394 LOAD_CONST               9 ('192.168.1.1.5')
                             396 PRECALL                  1
                             400 CALL                     1
                             410 STORE_FAST               1 (rtn)
                
-               1403         412 LOAD_FAST                0 (self)
+               1422         412 LOAD_FAST                0 (self)
                             414 LOAD_METHOD              1 (assertEqual)
                             436 LOAD_FAST                1 (rtn)
                             438 LOAD_CONST              10 (('192.168.1.1.5', 'Enter valid IP address'))
                             440 PRECALL                  2
                             444 CALL                     2
                             454 POP_TOP
                
-               1404         456 PUSH_NULL
+               1423         456 PUSH_NULL
                             458 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             470 PRECALL                  0
                             474 CALL                     0
                             484 LOAD_CONST              11 ('123.123')
                             486 PRECALL                  1
                             490 CALL                     1
                             500 STORE_FAST               1 (rtn)
                
-               1405         502 LOAD_FAST                0 (self)
+               1424         502 LOAD_FAST                0 (self)
                             504 LOAD_METHOD              1 (assertEqual)
                             526 LOAD_FAST                1 (rtn)
                             528 LOAD_CONST              12 (('123.123', 'Enter valid IP address'))
                             530 PRECALL                  2
                             534 CALL                     2
                             544 POP_TOP
                
-               1406         546 PUSH_NULL
+               1425         546 PUSH_NULL
                             548 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             560 PRECALL                  0
                             564 CALL                     0
                             574 LOAD_CONST              13 ('1111.2.3.4')
                             576 PRECALL                  1
                             580 CALL                     1
                             590 STORE_FAST               1 (rtn)
                
-               1407         592 LOAD_FAST                0 (self)
+               1426         592 LOAD_FAST                0 (self)
                             594 LOAD_METHOD              1 (assertEqual)
                             616 LOAD_FAST                1 (rtn)
                             618 LOAD_CONST              14 (('1111.2.3.4', 'Enter valid IP address'))
                             620 PRECALL                  2
                             624 CALL                     2
                             634 POP_TOP
                
-               1408         636 PUSH_NULL
+               1427         636 PUSH_NULL
                             638 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             650 PRECALL                  0
                             654 CALL                     0
                             664 LOAD_CONST              15 ('0111.2.3.4')
                             666 PRECALL                  1
                             670 CALL                     1
                             680 STORE_FAST               1 (rtn)
                
-               1409         682 LOAD_FAST                0 (self)
+               1428         682 LOAD_FAST                0 (self)
                             684 LOAD_METHOD              1 (assertEqual)
                             706 LOAD_FAST                1 (rtn)
                             708 LOAD_CONST              16 (('0111.2.3.4', 'Enter valid IP address'))
                             710 PRECALL                  2
                             714 CALL                     2
                             724 POP_TOP
                
-               1410         726 PUSH_NULL
+               1429         726 PUSH_NULL
                             728 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             740 PRECALL                  0
                             744 CALL                     0
                             754 LOAD_CONST              17 ('256.2.3.4')
                             756 PRECALL                  1
                             760 CALL                     1
                             770 STORE_FAST               1 (rtn)
                
-               1411         772 LOAD_FAST                0 (self)
+               1430         772 LOAD_FAST                0 (self)
                             774 LOAD_METHOD              1 (assertEqual)
                             796 LOAD_FAST                1 (rtn)
                             798 LOAD_CONST              18 (('256.2.3.4', 'Enter valid IP address'))
                             800 PRECALL                  2
                             804 CALL                     2
                             814 POP_TOP
                
-               1412         816 PUSH_NULL
+               1431         816 PUSH_NULL
                             818 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             830 PRECALL                  0
                             834 CALL                     0
                             844 LOAD_CONST              19 ('300.2.3.4')
                             846 PRECALL                  1
                             850 CALL                     1
                             860 STORE_FAST               1 (rtn)
                
-               1413         862 LOAD_FAST                0 (self)
+               1432         862 LOAD_FAST                0 (self)
                             864 LOAD_METHOD              1 (assertEqual)
                             886 LOAD_FAST                1 (rtn)
                             888 LOAD_CONST              20 (('300.2.3.4', 'Enter valid IP address'))
                             890 PRECALL                  2
                             894 CALL                     2
                             904 POP_TOP
                
-               1414         906 PUSH_NULL
+               1433         906 PUSH_NULL
                             908 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                             920 LOAD_CONST              21 ('192.168.1.0')
                             922 LOAD_CONST              22 ('192.168.1.255')
                             924 KW_NAMES                23
                             926 PRECALL                  2
                             930 CALL                     2
                             940 LOAD_CONST              24 ('192.168.1.100')
                             942 PRECALL                  1
                             946 CALL                     1
                             956 STORE_FAST               1 (rtn)
                
-               1415         958 LOAD_FAST                0 (self)
+               1434         958 LOAD_FAST                0 (self)
                             960 LOAD_METHOD              1 (assertEqual)
                             982 LOAD_FAST                1 (rtn)
                             984 LOAD_CONST              25 (('192.168.1.100', None))
                             986 PRECALL                  2
                             990 CALL                     2
                            1000 POP_TOP
                
-               1416        1002 PUSH_NULL
+               1435        1002 PUSH_NULL
                            1004 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1016 LOAD_CONST              26 ('1.2.3.5')
                            1018 LOAD_CONST              27 ('1.2.3.9')
                            1020 LOAD_CONST              28 ('bad ip')
                            1022 KW_NAMES                29
                            1024 PRECALL                  3
                            1028 CALL                     3
                
-               1417        1038 LOAD_CONST              30 ('1.2.3.4')
+               1436        1038 LOAD_CONST              30 ('1.2.3.4')
                
-               1416        1040 PRECALL                  1
+               1435        1040 PRECALL                  1
                            1044 CALL                     1
                            1054 STORE_FAST               1 (rtn)
                
-               1419        1056 LOAD_FAST                0 (self)
+               1438        1056 LOAD_FAST                0 (self)
                            1058 LOAD_METHOD              1 (assertEqual)
                            1080 LOAD_FAST                1 (rtn)
                            1082 LOAD_CONST              31 (('1.2.3.4', 'bad ip'))
                            1084 PRECALL                  2
                            1088 CALL                     2
                            1098 POP_TOP
                
-               1420        1100 PUSH_NULL
+               1439        1100 PUSH_NULL
                            1102 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1114 LOAD_CONST              30 ('1.2.3.4')
                            1116 LOAD_CONST              32 (True)
                            1118 KW_NAMES                33
                            1120 PRECALL                  2
                            1124 CALL                     2
                            1134 LOAD_CONST              34 ('127.0.0.1')
                            1136 PRECALL                  1
                            1140 CALL                     1
                            1150 STORE_FAST               1 (rtn)
                
-               1421        1152 LOAD_FAST                0 (self)
+               1440        1152 LOAD_FAST                0 (self)
                            1154 LOAD_METHOD              1 (assertEqual)
                            1176 LOAD_FAST                1 (rtn)
                            1178 LOAD_CONST              35 (('127.0.0.1', None))
                            1180 PRECALL                  2
                            1184 CALL                     2
                            1194 POP_TOP
                
-               1422        1196 PUSH_NULL
+               1441        1196 PUSH_NULL
                            1198 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1210 LOAD_CONST              36 ('192.168.1.4')
                            1212 LOAD_CONST              32 (True)
                            1214 KW_NAMES                33
                            1216 PRECALL                  2
                            1220 CALL                     2
                            1230 LOAD_CONST              36 ('192.168.1.4')
                            1232 PRECALL                  1
                            1236 CALL                     1
                            1246 STORE_FAST               1 (rtn)
                
-               1423        1248 LOAD_FAST                0 (self)
+               1442        1248 LOAD_FAST                0 (self)
                            1250 LOAD_METHOD              1 (assertEqual)
                            1272 LOAD_FAST                1 (rtn)
                            1274 LOAD_CONST              37 (('192.168.1.4', 'Enter valid IP address'))
                            1276 PRECALL                  2
                            1280 CALL                     2
                            1290 POP_TOP
                
-               1424        1292 PUSH_NULL
+               1443        1292 PUSH_NULL
                            1294 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1306 LOAD_CONST              32 (True)
                            1308 KW_NAMES                38
                            1310 PRECALL                  1
                            1314 CALL                     1
                            1324 LOAD_CONST              34 ('127.0.0.1')
                            1326 PRECALL                  1
                            1330 CALL                     1
                            1340 STORE_FAST               1 (rtn)
                
-               1425        1342 LOAD_FAST                0 (self)
+               1444        1342 LOAD_FAST                0 (self)
                            1344 LOAD_METHOD              1 (assertEqual)
                            1366 LOAD_FAST                1 (rtn)
                            1368 LOAD_CONST              35 (('127.0.0.1', None))
                            1370 PRECALL                  2
                            1374 CALL                     2
                            1384 POP_TOP
                
-               1426        1386 PUSH_NULL
+               1445        1386 PUSH_NULL
                            1388 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1400 LOAD_CONST              32 (True)
                            1402 KW_NAMES                38
                            1404 PRECALL                  1
                            1408 CALL                     1
                            1418 LOAD_CONST              39 ('192.168.1.10')
                            1420 PRECALL                  1
                            1424 CALL                     1
                            1434 STORE_FAST               1 (rtn)
                
-               1427        1436 LOAD_FAST                0 (self)
+               1446        1436 LOAD_FAST                0 (self)
                            1438 LOAD_METHOD              1 (assertEqual)
                            1460 LOAD_FAST                1 (rtn)
                            1462 LOAD_CONST              40 (('192.168.1.10', 'Enter valid IP address'))
                            1464 PRECALL                  2
                            1468 CALL                     2
                            1478 POP_TOP
                
-               1428        1480 PUSH_NULL
+               1447        1480 PUSH_NULL
                            1482 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1494 LOAD_CONST               3 (False)
                            1496 KW_NAMES                38
                            1498 PRECALL                  1
                            1502 CALL                     1
                            1512 LOAD_CONST              34 ('127.0.0.1')
                            1514 PRECALL                  1
                            1518 CALL                     1
                            1528 STORE_FAST               1 (rtn)
                
-               1429        1530 LOAD_FAST                0 (self)
+               1448        1530 LOAD_FAST                0 (self)
                            1532 LOAD_METHOD              1 (assertEqual)
                            1554 LOAD_FAST                1 (rtn)
                            1556 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1558 PRECALL                  2
                            1562 CALL                     2
                            1572 POP_TOP
                
-               1430        1574 PUSH_NULL
+               1449        1574 PUSH_NULL
                            1576 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1588 LOAD_CONST              42 ('100.0.0.0')
                            1590 LOAD_CONST              32 (True)
                            1592 KW_NAMES                43
                            1594 PRECALL                  2
                            1598 CALL                     2
                            1608 LOAD_CONST              34 ('127.0.0.1')
                            1610 PRECALL                  1
                            1614 CALL                     1
                            1624 STORE_FAST               1 (rtn)
                
-               1431        1626 LOAD_FAST                0 (self)
+               1450        1626 LOAD_FAST                0 (self)
                            1628 LOAD_METHOD              1 (assertEqual)
                            1650 LOAD_FAST                1 (rtn)
                            1652 LOAD_CONST              41 (('127.0.0.1', 'Enter valid IP address'))
                            1654 PRECALL                  2
                            1658 CALL                     2
                            1668 POP_TOP
                
-               1432        1670 PUSH_NULL
+               1451        1670 PUSH_NULL
                            1672 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1684 PRECALL                  0
                            1688 CALL                     0
                            1698 LOAD_CONST              44 ('aaa')
                            1700 PRECALL                  1
                            1704 CALL                     1
                            1714 STORE_FAST               1 (rtn)
                
-               1433        1716 LOAD_FAST                0 (self)
+               1452        1716 LOAD_FAST                0 (self)
                            1718 LOAD_METHOD              1 (assertEqual)
                            1740 LOAD_FAST                1 (rtn)
                            1742 LOAD_CONST              45 (('aaa', 'Enter valid IP address'))
                            1744 PRECALL                  2
                            1748 CALL                     2
                            1758 POP_TOP
                
-               1435        1760 PUSH_NULL
+               1454        1760 PUSH_NULL
                            1762 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1774 PRECALL                  0
                            1778 CALL                     0
                            1788 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1790 PRECALL                  1
                            1794 CALL                     1
                            1804 STORE_FAST               1 (rtn)
                
-               1436        1806 LOAD_FAST                0 (self)
+               1455        1806 LOAD_FAST                0 (self)
                            1808 LOAD_METHOD              1 (assertEqual)
                            1830 LOAD_FAST                1 (rtn)
                            1832 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1834 PRECALL                  2
                            1838 CALL                     2
                            1848 POP_TOP
                
-               1437        1850 PUSH_NULL
+               1456        1850 PUSH_NULL
                            1852 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1864 LOAD_CONST               3 (False)
                            1866 KW_NAMES                48
                            1868 PRECALL                  1
                            1872 CALL                     1
                            1882 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            1884 PRECALL                  1
                            1888 CALL                     1
                            1898 STORE_FAST               1 (rtn)
                
-               1438        1900 LOAD_FAST                0 (self)
+               1457        1900 LOAD_FAST                0 (self)
                            1902 LOAD_METHOD              1 (assertEqual)
                            1924 LOAD_FAST                1 (rtn)
                            1926 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            1928 PRECALL                  2
                            1932 CALL                     2
                            1942 POP_TOP
                
-               1439        1944 PUSH_NULL
+               1458        1944 PUSH_NULL
                            1946 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            1958 PRECALL                  0
                            1962 CALL                     0
                            1972 LOAD_CONST              49 ('fe80::126c:8ffa:fe22:b3af  ')
                            1974 PRECALL                  1
                            1978 CALL                     1
                            1988 STORE_FAST               1 (rtn)
                
-               1440        1990 LOAD_FAST                0 (self)
+               1459        1990 LOAD_FAST                0 (self)
                            1992 LOAD_METHOD              1 (assertEqual)
                            2014 LOAD_FAST                1 (rtn)
                            2016 LOAD_CONST              50 (('fe80::126c:8ffa:fe22:b3af  ', 'Enter valid IP address'))
                            2018 PRECALL                  2
                            2022 CALL                     2
                            2032 POP_TOP
                
-               1441        2034 PUSH_NULL
+               1460        2034 PUSH_NULL
                            2036 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2048 LOAD_CONST              32 (True)
                            2050 KW_NAMES                48
                            2052 PRECALL                  1
                            2056 CALL                     1
                            2066 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2068 PRECALL                  1
                            2072 CALL                     1
                            2082 STORE_FAST               1 (rtn)
                
-               1442        2084 LOAD_FAST                0 (self)
+               1461        2084 LOAD_FAST                0 (self)
                            2086 LOAD_METHOD              1 (assertEqual)
                            2108 LOAD_FAST                1 (rtn)
                            2110 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2112 PRECALL                  2
                            2116 CALL                     2
                            2126 POP_TOP
                
-               1443        2128 PUSH_NULL
+               1462        2128 PUSH_NULL
                            2130 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2142 LOAD_CONST              32 (True)
                            2144 KW_NAMES                 4
                            2146 PRECALL                  1
                            2150 CALL                     1
                            2160 LOAD_CONST              52 ('192.168.1.1')
                            2162 PRECALL                  1
                            2166 CALL                     1
                            2176 STORE_FAST               1 (rtn)
                
-               1444        2178 LOAD_FAST                0 (self)
+               1463        2178 LOAD_FAST                0 (self)
                            2180 LOAD_METHOD              1 (assertEqual)
                            2202 LOAD_FAST                1 (rtn)
                            2204 LOAD_CONST              53 (('192.168.1.1', 'Enter valid IP address'))
                            2206 PRECALL                  2
                            2210 CALL                     2
                            2220 POP_TOP
                
-               1445        2222 PUSH_NULL
+               1464        2222 PUSH_NULL
                            2224 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2236 LOAD_CONST              32 (True)
                            2238 LOAD_CONST              28 ('bad ip')
                            2240 KW_NAMES                54
                            2242 PRECALL                  2
                            2246 CALL                     2
                            2256 LOAD_CONST              52 ('192.168.1.1')
                            2258 PRECALL                  1
                            2262 CALL                     1
                            2272 STORE_FAST               1 (rtn)
                
-               1446        2274 LOAD_FAST                0 (self)
+               1465        2274 LOAD_FAST                0 (self)
                            2276 LOAD_METHOD              1 (assertEqual)
                            2298 LOAD_FAST                1 (rtn)
                            2300 LOAD_CONST              55 (('192.168.1.1', 'bad ip'))
                            2302 PRECALL                  2
                            2306 CALL                     2
                            2316 POP_TOP
                
-               1447        2318 PUSH_NULL
+               1466        2318 PUSH_NULL
                            2320 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2332 LOAD_CONST              32 (True)
                            2334 KW_NAMES                56
                            2336 PRECALL                  1
                            2340 CALL                     1
                            2350 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2352 PRECALL                  1
                            2356 CALL                     1
                            2366 STORE_FAST               1 (rtn)
                
-               1448        2368 LOAD_FAST                0 (self)
+               1467        2368 LOAD_FAST                0 (self)
                            2370 LOAD_METHOD              1 (assertEqual)
                            2392 LOAD_FAST                1 (rtn)
                            2394 LOAD_CONST              47 (('fe80::126c:8ffa:fe22:b3af', None))
                            2396 PRECALL                  2
                            2400 CALL                     2
                            2410 POP_TOP
                
-               1449        2412 PUSH_NULL
+               1468        2412 PUSH_NULL
                            2414 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2426 LOAD_CONST               3 (False)
                            2428 KW_NAMES                56
                            2430 PRECALL                  1
                            2434 CALL                     1
                            2444 LOAD_CONST              46 ('fe80::126c:8ffa:fe22:b3af')
                            2446 PRECALL                  1
                            2450 CALL                     1
                            2460 STORE_FAST               1 (rtn)
                
-               1450        2462 LOAD_FAST                0 (self)
+               1469        2462 LOAD_FAST                0 (self)
                            2464 LOAD_METHOD              1 (assertEqual)
                            2486 LOAD_FAST                1 (rtn)
                            2488 LOAD_CONST              51 (('fe80::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2490 PRECALL                  2
                            2494 CALL                     2
                            2504 POP_TOP
                
-               1451        2506 PUSH_NULL
+               1470        2506 PUSH_NULL
                            2508 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2520 LOAD_CONST              32 (True)
                            2522 KW_NAMES                56
                            2524 PRECALL                  1
                            2528 CALL                     1
                            2538 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2540 PRECALL                  1
                            2544 CALL                     1
                            2554 STORE_FAST               1 (rtn)
                
-               1452        2556 LOAD_FAST                0 (self)
+               1471        2556 LOAD_FAST                0 (self)
                            2558 LOAD_METHOD              1 (assertEqual)
                            2580 LOAD_FAST                1 (rtn)
                            2582 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2584 PRECALL                  2
                            2588 CALL                     2
                            2598 POP_TOP
                
-               1453        2600 PUSH_NULL
+               1472        2600 PUSH_NULL
                            2602 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2614 LOAD_CONST              32 (True)
                            2616 KW_NAMES                59
                            2618 PRECALL                  1
                            2622 CALL                     1
                            2632 LOAD_CONST              57 ('2001::126c:8ffa:fe22:b3af')
                            2634 PRECALL                  1
                            2638 CALL                     1
                            2648 STORE_FAST               1 (rtn)
                
-               1454        2650 LOAD_FAST                0 (self)
+               1473        2650 LOAD_FAST                0 (self)
                            2652 LOAD_METHOD              1 (assertEqual)
                            2674 LOAD_FAST                1 (rtn)
                            2676 LOAD_CONST              58 (('2001::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2678 PRECALL                  2
                            2682 CALL                     2
                            2692 POP_TOP
                
-               1455        2694 PUSH_NULL
+               1474        2694 PUSH_NULL
                            2696 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2708 LOAD_CONST              32 (True)
                            2710 KW_NAMES                59
                            2712 PRECALL                  1
                            2716 CALL                     1
                            2726 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2728 PRECALL                  1
                            2732 CALL                     1
                            2742 STORE_FAST               1 (rtn)
                
-               1456        2744 LOAD_FAST                0 (self)
+               1475        2744 LOAD_FAST                0 (self)
                            2746 LOAD_METHOD              1 (assertEqual)
                            2768 LOAD_FAST                1 (rtn)
                            2770 LOAD_CONST              61 (('ff00::126c:8ffa:fe22:b3af', None))
                            2772 PRECALL                  2
                            2776 CALL                     2
                            2786 POP_TOP
                
-               1457        2788 PUSH_NULL
+               1476        2788 PUSH_NULL
                            2790 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2802 LOAD_CONST              32 (True)
                            2804 KW_NAMES                62
                            2806 PRECALL                  1
                            2810 CALL                     1
                            2820 LOAD_CONST              60 ('ff00::126c:8ffa:fe22:b3af')
                            2822 PRECALL                  1
                            2826 CALL                     1
                            2836 STORE_FAST               1 (rtn)
                
-               1458        2838 LOAD_FAST                0 (self)
+               1477        2838 LOAD_FAST                0 (self)
                            2840 LOAD_METHOD              1 (assertEqual)
                            2862 LOAD_FAST                1 (rtn)
                            2864 LOAD_CONST              63 (('ff00::126c:8ffa:fe22:b3af', 'Enter valid IP address'))
                            2866 PRECALL                  2
                            2870 CALL                     2
                            2880 POP_TOP
                
-               1459        2882 PUSH_NULL
+               1478        2882 PUSH_NULL
                            2884 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2896 LOAD_CONST              64 ('2001::/32')
                            2898 KW_NAMES                65
                            2900 PRECALL                  1
                            2904 CALL                     1
                            2914 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            2916 PRECALL                  1
                            2920 CALL                     1
                            2930 STORE_FAST               1 (rtn)
                
-               1460        2932 LOAD_FAST                0 (self)
+               1479        2932 LOAD_FAST                0 (self)
                            2934 LOAD_METHOD              1 (assertEqual)
                            2956 LOAD_FAST                1 (rtn)
                            2958 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            2960 PRECALL                  2
                            2964 CALL                     2
                            2974 POP_TOP
                
-               1461        2976 PUSH_NULL
+               1480        2976 PUSH_NULL
                            2978 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            2990 LOAD_CONST              68 ('fb00::/8')
                            2992 KW_NAMES                65
                            2994 PRECALL                  1
                            2998 CALL                     1
                            3008 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3010 PRECALL                  1
                            3014 CALL                     1
                            3024 STORE_FAST               1 (rtn)
                
-               1462        3026 LOAD_FAST                0 (self)
+               1481        3026 LOAD_FAST                0 (self)
                            3028 LOAD_METHOD              1 (assertEqual)
                            3050 LOAD_FAST                1 (rtn)
                            3052 LOAD_CONST              69 (('2001::8ffa:fe22:b3af', 'Enter valid IP address'))
                            3054 PRECALL                  2
                            3058 CALL                     2
                            3068 POP_TOP
                
-               1463        3070 PUSH_NULL
+               1482        3070 PUSH_NULL
                            3072 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3084 LOAD_CONST              70 ('fc00::/8')
                            3086 LOAD_CONST              64 ('2001::/32')
                            3088 BUILD_LIST               2
                            3090 KW_NAMES                65
                            3092 PRECALL                  1
                            3096 CALL                     1
                            3106 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3108 PRECALL                  1
                            3112 CALL                     1
                            3122 STORE_FAST               1 (rtn)
                
-               1464        3124 LOAD_FAST                0 (self)
+               1483        3124 LOAD_FAST                0 (self)
                            3126 LOAD_METHOD              1 (assertEqual)
                            3148 LOAD_FAST                1 (rtn)
                            3150 LOAD_CONST              67 (('2001::8ffa:fe22:b3af', None))
                            3152 PRECALL                  2
                            3156 CALL                     2
                            3166 POP_TOP
                
-               1465        3168 PUSH_NULL
+               1484        3168 PUSH_NULL
                            3170 LOAD_GLOBAL              1 (NULL + IS_IPADDRESS)
                            3182 LOAD_CONST              71 ('invalidsubnet')
                            3184 KW_NAMES                65
                            3186 PRECALL                  1
                            3190 CALL                     1
                            3200 LOAD_CONST              66 ('2001::8ffa:fe22:b3af')
                            3202 PRECALL                  1
                            3206 CALL                     1
                            3216 STORE_FAST               1 (rtn)
                
-               1466        3218 LOAD_FAST                0 (self)
+               1485        3218 LOAD_FAST                0 (self)
                            3220 LOAD_METHOD              1 (assertEqual)
                            3242 LOAD_FAST                1 (rtn)
                            3244 LOAD_CONST              72 (('2001::8ffa:fe22:b3af', 'invalid subnet provided'))
                            3246 PRECALL                  2
                            3250 CALL                     2
                            3260 POP_TOP
                            3262 LOAD_CONST               0 (None)
@@ -14887,34 +14975,97 @@
                   ('2001::8ffa:fe22:b3af', 'invalid subnet provided')
                names      ('IS_IPADDRESS', 'assertEqual')
                varnames   ('self', 'rtn')
                freevars   ()
                cellvars   ()
                filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
                name       'test_IS_IPADDRESS'
-               firstlineno 1393
+               firstlineno 1412
                lnotab
                   0x02012e012c0132012c012e012c012e012c012e012c012e012c012e012c
                   012e012c012e012c012e012c0134012c01240102ff10032c0134012c0134
                   012c0132012c0132012c0132012c0134012c012e012c022e012c0132012c
                   012e012c0132012c0132012c0134012c0132012c0132012c0132012c0132
                   012c0132012c0132012c0132012c0132012c0136012c013201
+            code
+               argcount  : 1
+               nlocals   : 2
+               stacksize : 4
+               flags     : 3
+               code
+                  0x97000200740100000000000000000000a6000000ab0000000000000000
+                  006401a6010000ab0100000000000000007d010900020074010000000000
+                  0000000000a6000000ab0000000000000000006402a6010000ab01000000
+                  00000000007d01090002007401000000000000000000006403ac04a60100
+                  00ab0100000000000000006402a6010000ab0100000000000000007d0164
+                  005300
+               1487           0 RESUME                   0
+               
+               1488           2 PUSH_NULL
+                              4 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                             16 PRECALL                  0
+                             20 CALL                     0
+                             30 LOAD_CONST               1 ('<div>test</div>')
+                             32 PRECALL                  1
+                             36 CALL                     1
+                             46 STORE_FAST               1 (rtn)
+               
+               1489          48 NOP
+               
+               1491          50 PUSH_NULL
+                             52 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                             64 PRECALL                  0
+                             68 CALL                     0
+                             78 LOAD_CONST               2 ('<div><script>xxx</script></div>')
+                             80 PRECALL                  1
+                             84 CALL                     1
+                             94 STORE_FAST               1 (rtn)
+               
+               1492          96 NOP
+               
+               1494          98 PUSH_NULL
+                            100 LOAD_GLOBAL              1 (NULL + IS_SAFE)
+                            112 LOAD_CONST               3 ('sanitize')
+                            114 KW_NAMES                 4
+                            116 PRECALL                  1
+                            120 CALL                     1
+                            130 LOAD_CONST               2 ('<div><script>xxx</script></div>')
+                            132 PRECALL                  1
+                            136 CALL                     1
+                            146 STORE_FAST               1 (rtn)
+               
+               1495         148 LOAD_CONST               0 (None)
+                            150 RETURN_VALUE
+               consts
+                  None
+                  '<div>test</div>'
+                  '<div><script>xxx</script></div>'
+                  'sanitize'
+                  ('mode',)
+               names      ('IS_SAFE',)
+               varnames   ('self', 'rtn')
+               freevars   ()
+               cellvars   ()
+               filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
+               name       'test_IS_SAFE'
+               firstlineno 1487
+               lnotab 0x02012e0102022e0102023201
             None
-         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_IN_DB_options', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS')
+         names      ('__name__', '__module__', '__qualname__', 'myassertRegex', 'test_MISC', 'test_IS_MATCH', 'test_IS_EQUAL_TO', 'test_IS_EXPR', 'test_IS_LENGTH', 'test_IS_JSON', 'test_IS_IN_SET', 'test_IS_IN_DB', 'test_IS_IN_DB_options', 'test_IS_NOT_IN_DB', 'test_IS_INT_IN_RANGE', 'test_IS_FLOAT_IN_RANGE', 'test_IS_DECIMAL_IN_RANGE', 'test_IS_NOT_EMPTY', 'test_IS_ALPHANUMERIC', 'test_IS_EMAIL', 'test_IS_LIST_OF_EMAILS', 'test_IS_URL', 'test_IS_TIME', 'test_IS_DATE', 'test_IS_DATETIME', 'test_IS_DATE_IN_RANGE', 'test_IS_DATETIME_IN_RANGE', 'test_IS_LIST_OF', 'test_IS_LOWER', 'test_IS_UPPER', 'test_IS_SLUG', 'test_ANY_OF', 'Validator', 'CustomValidator', 'staticmethod', 'custom_validator_func', 'test_IS_EMPTY_OR', 'test_CLEANUP', 'test_CRYPT', 'test_IS_STRONG', 'test_IS_IMAGE', 'test_IS_FILE', 'test_IS_UPLOAD_FILENAME', 'test_IS_IPV4', 'test_IS_IPV6', 'test_IS_IPADDRESS', 'test_IS_SAFE')
          varnames   ()
          freevars   ()
          cellvars   ()
          filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
          name       'TestValidators'
          firstlineno 17
          lnotab
-            0x0a010605060d06240606060a0647060e0628067f0031060d061e061a06
+            0x0a010605060d06240606060a0647060e0631067f00310617061e061a06
             290636061c060a064d061006100626060b061f0620063a06110608060806
             2806121c06020104ff0e010204062606040616065d064606420639062606
-            21
+            21064b
       'TestValidators'
    names      ('__doc__', 'datetime', 'decimal', 're', 'unittest', 'pydal', 'DAL', 'Field', 'pydal._compat', 'PY2', 'to_bytes', 'pydal.validators', 'UTC', 'Validator', 'options_sorter', 'TestCase', 'TestValidators')
    varnames   ()
    freevars   ()
    cellvars   ()
    filename   '/home/mdipierro/Dropbox/ProjectsActive/pydal/tests/validators.py'
    name       '<module>'
```

### Comparing `pydal-20240529.1/tests/_adapt.py` & `pydal-20240601.1/tests/_adapt.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/_helpers.py` & `pydal-20240601.1/tests/_helpers.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/base.py` & `pydal-20240601.1/tests/base.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/caching.py` & `pydal-20240601.1/tests/caching.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/contribs.py` & `pydal-20240601.1/tests/contribs.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/indexes.py` & `pydal-20240601.1/tests/indexes.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/is_url_validators.py` & `pydal-20240601.1/tests/is_url_validators.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/nosql.py` & `pydal-20240601.1/tests/nosql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/restapi.py` & `pydal-20240601.1/tests/restapi.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/smart_query.py` & `pydal-20240601.1/tests/smart_query.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/sql.py` & `pydal-20240601.1/tests/sql.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/tags.py` & `pydal-20240601.1/tests/tags.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/validation.py` & `pydal-20240601.1/tests/validation.py`

 * *Files identical despite different names*

### Comparing `pydal-20240529.1/tests/validators.py` & `pydal-20240601.1/tests/validators.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
 
-"""Unit tests for http.py """
+"""Unit tests for validators.py """
 
 import datetime
 import decimal
 import re
 import unittest
 
 from pydal import DAL, Field
@@ -206,14 +206,23 @@
         )
         self.assertEqual(rtn, [("id1", "first label"), ("id2", "second label")])
         rtn = IS_IN_SET(["id1", "id2"]).options(zero=False)
         self.assertEqual(rtn, [("id1", "id1"), ("id2", "id2")])
         rtn = IS_IN_SET(["id2", "id1"], sort=True).options(zero=False)
         self.assertEqual(rtn, [("id1", "id1"), ("id2", "id2")])
 
+        # sets can be lazy
+        theset = []
+        validator = IS_IN_SET(lambda: theset)
+        rtn = validator("max")
+        self.assertEqual(rtn, ("max", "Value not allowed"))
+        theset.append("max")
+        rtn = validator("max")
+        self.assertEqual(rtn, ("max", None))
+
     def test_IS_IN_DB(self):
         db = DAL("sqlite:memory")
         db.define_table("person", Field("name"))
         george_id = db.person.insert(name="george")
         costanza_id = db.person.insert(name="costanza")
         rtn = IS_IN_DB(db, "person.id", "%(name)s")(george_id)
         self.assertEqual(rtn, (george_id, None))
@@ -387,21 +396,31 @@
         db.list_ref_table.drop()
 
     def test_IS_IN_DB_options(self):
         db = DAL("sqlite:memory")
         db.define_table("thing", Field("name"))
         db.thing.insert(name="red")
         db.thing.insert(name="green")
-        assert IS_IN_DB(db, "thing").options() == [('', ''), ('1', '1'), ('2', '2')]
+        assert IS_IN_DB(db, "thing").options() == [("", ""), ("1", "1"), ("2", "2")]
         # setting a format for the validator
         db.thing._format = lambda i: i.name
-        assert IS_IN_DB(db, "thing").options() == [('', ''), ('1', 'red'), ('2', 'green')]
-        assert IS_IN_DB(db, "thing", zero=None).options() == [('1', 'red'), ('2', 'green')]
-        assert IS_IN_DB(db, "thing", zero="x").options() == [('', 'x'), ('1', 'red'), ('2', 'green')]
-        
+        assert IS_IN_DB(db, "thing").options() == [
+            ("", ""),
+            ("1", "red"),
+            ("2", "green"),
+        ]
+        assert IS_IN_DB(db, "thing", zero=None).options() == [
+            ("1", "red"),
+            ("2", "green"),
+        ]
+        assert IS_IN_DB(db, "thing", zero="x").options() == [
+            ("", "x"),
+            ("1", "red"),
+            ("2", "green"),
+        ]
 
     def test_IS_NOT_IN_DB(self):
         db = DAL("sqlite:memory")
         db.define_table("person", Field("name"), Field("nickname"))
         db.person.insert(name="george")
         db.person.insert(name="costanza", nickname="T Bone")
         rtn = IS_NOT_IN_DB(db, "person.name", error_message="oops")("george")
@@ -649,15 +668,15 @@
         rtn = IS_EMAIL(banned=r"^.*\.com(|\..*)$")(
             "localguy@localhost"
         )  # localhost as domain
         self.assertEqual(rtn, ("localguy@localhost", None))
         rtn = IS_EMAIL(banned=r"^.*\.com(|\..*)$")("abc@example.com")
         self.assertEqual(rtn, ("abc@example.com", "Enter a valid email address"))
         # test for forced
-        rtn = IS_EMAIL(forced="^.*\.edu(|\..*)$")("localguy@localhost")
+        rtn = IS_EMAIL(forced=r"^.*\.edu(|\..*)$")("localguy@localhost")
         self.assertEqual(rtn, ("localguy@localhost", "Enter a valid email address"))
         rtn = IS_EMAIL(forced=r"^.*\.edu(|\..*)$")("localguy@example.edu")
         self.assertEqual(rtn, ("localguy@example.edu", None))
         # test for not a string at all
         rtn = IS_EMAIL(error_message="oops")(42)
         self.assertEqual(rtn, (42, "oops"))
 
@@ -1460,7 +1479,17 @@
         self.assertEqual(rtn, ("2001::8ffa:fe22:b3af", None))
         rtn = IS_IPADDRESS(subnets="fb00::/8")("2001::8ffa:fe22:b3af")
         self.assertEqual(rtn, ("2001::8ffa:fe22:b3af", "Enter valid IP address"))
         rtn = IS_IPADDRESS(subnets=["fc00::/8", "2001::/32"])("2001::8ffa:fe22:b3af")
         self.assertEqual(rtn, ("2001::8ffa:fe22:b3af", None))
         rtn = IS_IPADDRESS(subnets="invalidsubnet")("2001::8ffa:fe22:b3af")
         self.assertEqual(rtn, ("2001::8ffa:fe22:b3af", "invalid subnet provided"))
+
+    def test_IS_SAFE(self):
+        rtn = IS_SAFE()("<div>test</div>")
+        ("<div></div>", None)
+
+        rtn = IS_SAFE()("<div><script>xxx</script></div>")
+        ("<div><script>xxx</script></div>", "Unsafe Content")
+
+        rtn = IS_SAFE(mode="sanitize")("<div><script>xxx</script></div>")
+        ("<div>xxx</div>", "Unsafe Content")
```

