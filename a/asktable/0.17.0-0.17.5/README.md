# Comparing `tmp/asktable-0.17.0-py3-none-any.whl.zip` & `tmp/asktable-0.17.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,38 +1,38 @@
-Zip file size: 39363 bytes, number of entries: 36
--rw-r--r--  2.0 unx       86 b- defN 24-Apr-02 15:29 asktable/__init__.py
--rw-r--r--  2.0 unx     2180 b- defN 24-Apr-01 06:16 asktable/api.py
--rw-r--r--  2.0 unx     2213 b- defN 24-May-27 04:16 asktable/cli.py
--rw-r--r--  2.0 unx     1395 b- defN 24-May-27 04:16 asktable/client.py
--rw-r--r--  2.0 unx       41 b- defN 24-Apr-01 06:16 asktable/exceptions.py
--rw-r--r--  2.0 unx      875 b- defN 24-Apr-01 06:44 asktable/log.py
--rw-r--r--  2.0 unx     1492 b- defN 24-Apr-01 06:16 asktable/upload.py
--rw-r--r--  2.0 unx      584 b- defN 24-May-27 04:16 asktable/models/__init__.py
--rw-r--r--  2.0 unx     4495 b- defN 24-May-27 04:16 asktable/models/client_auth.py
--rw-r--r--  2.0 unx     4023 b- defN 24-May-27 04:16 asktable/models/client_base.py
--rw-r--r--  2.0 unx     2785 b- defN 24-May-27 04:16 asktable/models/client_chat.py
--rw-r--r--  2.0 unx    10830 b- defN 24-May-27 04:16 asktable/models/client_ds.py
--rw-r--r--  2.0 unx     1290 b- defN 24-May-27 04:16 asktable/models/client_msg.py
--rw-r--r--  2.0 unx      885 b- defN 24-Apr-06 09:09 asktable/models/client_run.py
--rw-r--r--  2.0 unx     1597 b- defN 24-May-27 04:16 asktable/models/client_securetunnel.py
--rw-r--r--  2.0 unx        0 b- defN 23-Dec-08 14:27 atcommon/__init__.py
--rw-r--r--  2.0 unx     3964 b- defN 24-May-27 04:16 atcommon/tools.py
--rw-r--r--  2.0 unx       16 b- defN 24-May-27 04:17 atcommon/version.py
--rw-r--r--  2.0 unx        0 b- defN 24-Jan-31 13:33 atcommon/exceptions/__init__.py
--rw-r--r--  2.0 unx     1402 b- defN 24-Apr-16 12:45 atcommon/exceptions/client.py
--rw-r--r--  2.0 unx       95 b- defN 24-Apr-01 06:16 atcommon/exceptions/server.py
--rw-r--r--  2.0 unx     4174 b- defN 24-May-27 04:16 atcommon/exceptions/server_base.py
--rw-r--r--  2.0 unx      656 b- defN 24-May-27 04:16 atcommon/exceptions/server_plugins.py
--rw-r--r--  2.0 unx      763 b- defN 24-May-27 04:16 atcommon/models/__init__.py
--rw-r--r--  2.0 unx     1095 b- defN 24-May-27 04:16 atcommon/models/auth.py
--rw-r--r--  2.0 unx     1063 b- defN 24-May-27 04:16 atcommon/models/base.py
--rw-r--r--  2.0 unx     1326 b- defN 24-May-27 04:16 atcommon/models/chat.py
--rw-r--r--  2.0 unx     1594 b- defN 24-May-27 04:16 atcommon/models/datasource.py
--rw-r--r--  2.0 unx    37127 b- defN 24-May-27 04:16 atcommon/models/meta.py
--rw-r--r--  2.0 unx     5061 b- defN 24-May-27 04:16 atcommon/models/qa.py
--rw-r--r--  2.0 unx     1137 b- defN 24-May-27 04:16 atcommon/models/securetunnel.py
--rw-r--r--  2.0 unx    18288 b- defN 24-May-27 06:18 asktable-0.17.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-27 06:18 asktable-0.17.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       47 b- defN 24-May-27 06:18 asktable-0.17.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       18 b- defN 24-May-27 06:18 asktable-0.17.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2934 b- defN 24-May-27 06:18 asktable-0.17.0.dist-info/RECORD
-36 files, 115623 bytes uncompressed, 34689 bytes compressed:  70.0%
+Zip file size: 39735 bytes, number of entries: 36
+-rw-r--r--  2.0 unx       86 b- defN 24-May-01 14:48 asktable/__init__.py
+-rw-r--r--  2.0 unx     2180 b- defN 24-May-06 10:32 asktable/api.py
+-rw-r--r--  2.0 unx     2213 b- defN 24-May-27 14:24 asktable/cli.py
+-rw-r--r--  2.0 unx     1434 b- defN 24-May-28 15:33 asktable/client.py
+-rw-r--r--  2.0 unx       41 b- defN 24-May-01 14:48 asktable/exceptions.py
+-rw-r--r--  2.0 unx      875 b- defN 24-May-01 14:48 asktable/log.py
+-rw-r--r--  2.0 unx     1492 b- defN 24-May-01 14:48 asktable/upload.py
+-rw-r--r--  2.0 unx      618 b- defN 24-May-28 15:33 asktable/models/__init__.py
+-rw-r--r--  2.0 unx     4495 b- defN 24-May-27 14:24 asktable/models/client_auth.py
+-rw-r--r--  2.0 unx     4023 b- defN 24-May-27 14:24 asktable/models/client_base.py
+-rw-r--r--  2.0 unx     2791 b- defN 24-Jun-02 04:34 asktable/models/client_chat.py
+-rw-r--r--  2.0 unx    10810 b- defN 24-Jun-02 04:34 asktable/models/client_ds.py
+-rw-r--r--  2.0 unx     1290 b- defN 24-May-27 14:24 asktable/models/client_msg.py
+-rw-r--r--  2.0 unx      885 b- defN 24-May-01 14:48 asktable/models/client_run.py
+-rw-r--r--  2.0 unx     1597 b- defN 24-May-27 14:24 asktable/models/client_securetunnel.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-01 14:48 atcommon/__init__.py
+-rw-r--r--  2.0 unx     4287 b- defN 24-Jun-02 04:34 atcommon/tools.py
+-rw-r--r--  2.0 unx       16 b- defN 24-Jun-02 04:35 atcommon/version.py
+-rw-r--r--  2.0 unx        0 b- defN 24-May-01 14:48 atcommon/exceptions/__init__.py
+-rw-r--r--  2.0 unx     1402 b- defN 24-May-04 12:53 atcommon/exceptions/client.py
+-rw-r--r--  2.0 unx       95 b- defN 24-May-01 14:48 atcommon/exceptions/server.py
+-rw-r--r--  2.0 unx     4174 b- defN 24-May-27 14:24 atcommon/exceptions/server_base.py
+-rw-r--r--  2.0 unx      656 b- defN 24-May-27 14:24 atcommon/exceptions/server_plugins.py
+-rw-r--r--  2.0 unx      763 b- defN 24-May-27 14:24 atcommon/models/__init__.py
+-rw-r--r--  2.0 unx     1095 b- defN 24-May-27 14:24 atcommon/models/auth.py
+-rw-r--r--  2.0 unx     1063 b- defN 24-May-27 14:24 atcommon/models/base.py
+-rw-r--r--  2.0 unx     1326 b- defN 24-May-27 14:24 atcommon/models/chat.py
+-rw-r--r--  2.0 unx     1594 b- defN 24-May-27 14:24 atcommon/models/datasource.py
+-rw-r--r--  2.0 unx    37282 b- defN 24-Jun-02 04:34 atcommon/models/meta.py
+-rw-r--r--  2.0 unx     5728 b- defN 24-Jun-02 04:34 atcommon/models/qa.py
+-rw-r--r--  2.0 unx     1137 b- defN 24-May-27 14:24 atcommon/models/securetunnel.py
+-rw-r--r--  2.0 unx    18288 b- defN 24-Jun-02 04:40 asktable-0.17.5.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Jun-02 04:40 asktable-0.17.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx       47 b- defN 24-Jun-02 04:40 asktable-0.17.5.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       18 b- defN 24-Jun-02 04:40 asktable-0.17.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2934 b- defN 24-Jun-02 04:40 asktable-0.17.5.dist-info/RECORD
+36 files, 116827 bytes uncompressed, 35061 bytes compressed:  70.0%
```

## zipnote {}

```diff
@@ -87,23 +87,23 @@
 
 Filename: atcommon/models/qa.py
 Comment: 
 
 Filename: atcommon/models/securetunnel.py
 Comment: 
 
-Filename: asktable-0.17.0.dist-info/METADATA
+Filename: asktable-0.17.5.dist-info/METADATA
 Comment: 
 
-Filename: asktable-0.17.0.dist-info/WHEEL
+Filename: asktable-0.17.5.dist-info/WHEEL
 Comment: 
 
-Filename: asktable-0.17.0.dist-info/entry_points.txt
+Filename: asktable-0.17.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: asktable-0.17.0.dist-info/top_level.txt
+Filename: asktable-0.17.5.dist-info/top_level.txt
 Comment: 
 
-Filename: asktable-0.17.0.dist-info/RECORD
+Filename: asktable-0.17.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## asktable/client.py

```diff
@@ -7,14 +7,15 @@
 class AskTable:
     __version__ = VERSION
     version = VERSION
 
     DataSource = models.DataSourceClientModel
     Policy = models.AuthPolicyClient
     Role = models.AuthRoleClient
+    SecureTunnel = models.SecureTunnel
 
     errors = errors
 
     def __init__(self, api_url='https://api.asktable.com',
                  token='token1', debug=False, user_id=None):
         self.api_url = api_url
         self.token = token
```

## asktable/models/__init__.py

```diff
@@ -1,16 +1,17 @@
 from asktable.models.client_ds import DataSourceList, DataSourceClientModel
 from asktable.models.client_chat import ChatList
 from asktable.models.client_msg import MessageClientModel, MessageList
-from asktable.models.client_securetunnel import SecureTunnelList
+from asktable.models.client_securetunnel import SecureTunnelList, SecureTunnel
 from asktable.models.client_auth import AuthRoleList, AuthPolicyList, AuthRoleClient, AuthPolicyClient
 
 __ALL__ = [
     "DataSourceList",
     "ChatList",
+    "SecureTunnel",
     "SecureTunnelList",
     "AuthRoleList",
     "AuthPolicyList",
     "DataSourceClientModel",
     "AuthRoleClient",
     "AuthPolicyClient",
     "MessageClientModel",
```

## asktable/models/client_chat.py

```diff
@@ -57,15 +57,15 @@
 
     @convert_to_object(cls=ChatClientModel)
     def get(self, id):
         # 通过资源ID来获取
         return self.api.send(endpoint=f"{self.endpoint}/{id}", method="GET")
 
     @convert_to_object(cls=ChatClientModel)
-    def create(self, datasource_ids, **kwargs):
+    def create(self, datasource_ids: list, **kwargs):
 
         # check datasource_ids
         if any(not isinstance(ds_id, str) for ds_id in datasource_ids):
             raise ValueError(f"datasource_ids must be a list of str: {datasource_ids}")
         #
         # if role_variables:
         #     if not isinstance(role_variables, dict):
```

## asktable/models/client_ds.py

```diff
@@ -30,15 +30,14 @@
 
     def delete(self):
         self.api.send(endpoint=f"{self.endpoint}/{self.datasource_id}/meta", method="DELETE")
         return True
 
     def update(self):
         self.api.send(endpoint=f"{self.endpoint}/{self.datasource_id}/meta", method="POST")
-        return True
 
     def update_until_success(self, timeout=600):
         """
         同步元数据并轮询其状态，直到超时、成功或失败。
 
         参数:
             timeout (int): 超时时间，单位为秒。默认值为 600 秒。
```

## atcommon/tools.py

```diff
@@ -33,15 +33,15 @@
     elif diff < 3 * day:
         return f"{diff // day} days ago"
     else:
         # Convert to specific date and time format for durations longer than 3 days
         return datetime.utcfromtimestamp(unix_timestamp).strftime('%Y-%m-%d %H:%M:%S')
 
 
-def dict_to_markdown(d, indent=0, table_format_keys=()):
+def dict_to_markdown(d, indent=0, table_format_keys=()) -> str:
     # table_format_keys 中的key，会用table来展示，否则默认用列表展示
     # 假定table_format_keys 中的key对应的value是list，且list中的元素是dict，且dict的key是一样的
     markdown = ""
     if isinstance(d, dict):
         for key, value in d.items():
             # print(f"key: {key}, value: {value}, type: {type(value)}")
             if key in table_format_keys and value:
@@ -116,7 +116,16 @@
     # 获取星期几的数字（0-6），然后将其转换为中文名称
     weekday_cn = chinese_weekday[now.weekday()]
     date_time = now.strftime("%Y年%m月%d日%H时%M分%S秒")
     chinese_time_full_format = f"{date_time}{weekday_cn}"
     return chinese_time_full_format
 
 
+def get_current_datetime() -> str:
+    # 获取当前日期时间
+    now = datetime.now()
+    # 格式化日期时间
+    current_time = now.strftime("%Y-%m-%d %H:%M:%S")
+    # 获取星期几
+    day_of_week = now.strftime("%A")
+
+    return f"Current Date and Time: {current_time}, Day of the Week: {day_of_week}"
```

## atcommon/version.py

```diff
@@ -1 +1 @@
-VERSION="0.17.0"
+VERSION="0.17.5"
```

## atcommon/models/meta.py

```diff
@@ -41,36 +41,37 @@
     # def to_string_for_analysis(self):
     #     return self.to_dict_for_analysis()
 
 
 class DataField(DataBaseObject):
     _save_in_db_properties = ['name', 'full_name', 'origin_desc',
                               'curr_desc', 'curr_desc_stat',
-                              'sample_data'
+                              'sample_data', 'data_type'
                               ]
     _in_dict_properties = (
             _save_in_db_properties + ['related_field', 'related_field_precision_rate']
     )
 
     def __init__(self, name, table, origin_desc=None, curr_desc=None,
                  curr_desc_stat=None,
                  related_field=None,
                  related_field_precision_rate=None,
-                 sample_data=None, **kwargs):
+                 sample_data=None, data_type=None, **kwargs):
         self.name = name
         self.origin_desc = origin_desc
         self.table = table  # Reference to the DataTable
         self.full_name = f"{self.table.schema.name}.{self.table.name}.{self.name}"
         if curr_desc:
             self.curr_desc = curr_desc
             self.curr_desc_stat = curr_desc_stat
         else:
             self.curr_desc = origin_desc
             self.curr_desc_stat = 'origin'
         self.sample_data = sample_data
+        self.data_type = data_type
         self.related_field = related_field  # Reference to related DataField, if any
         self.related_field_precision_rate = related_field_precision_rate
 
     def set_related_field(self, field):
         self.related_field = field
 
     def __repr__(self):
@@ -331,14 +332,15 @@
                     field = DataField(
                         name=field_data.get('name', ''),
                         table=table,
                         origin_desc=field_data.get('origin_desc'),
                         curr_desc=field_data.get('curr_desc'),
                         curr_desc_stat=field_data.get('curr_desc_stat'),
                         sample_data=field_data.get('sample_data'),
+                        data_type=field_data.get('data_type'),
                     )
                     table.add_field(field)
                     # 创建一个唯一键来标识每个字段
                     field_key = f"{schema.name}.{table.name}.{field.name}"
                     field_refs[field_key] = field
 
                 schema.add_table(table)
@@ -414,22 +416,24 @@
                         field = DataField(
                             name=field_name,
                             table=table,
                             origin_desc=field_data.get('origin_desc'),
                             curr_desc=field_data.get('curr_desc'),
                             curr_desc_stat=field_data.get('curr_desc_stat'),
                             sample_data=field_data.get('sample_data'),
+                            data_type=field_data.get('data_type'),
                         )
                         table.add_field(field)
                     else:
                         # 更新field的属性
                         field.origin_desc = field_data.get('origin_desc', field.origin_desc)
                         field.curr_desc = field_data.get('curr_desc', field.curr_desc)
                         field.curr_desc_stat = field_data.get('curr_desc_stat', field.curr_desc_stat)
                         field.sample_data = field_data.get('sample_data', field.sample_data)
+                        field.data_type = field_data.get('data_type', field.data_type)
 
                     # 保存字段关联信息
                     full_field_name = f"{schema_data.get('name')}.{table_data.get('name')}.{field_data.get('name')}"
                     related_field_name = field_data.get('related_field')
                     if related_field_name:
                         # 存储字段关联信息，稍后处理
                         temp_related_fields[full_field_name] = related_field_name
@@ -450,25 +454,26 @@
         return {
             'name': self.name,
             'datasource_id': self.datasource_id,
             'schemas': [schema.to_dict(level, includes=includes, excludes=excludes)
                         for schema in self.schemas]
         }
 
-    def to_dict_for_prompt(self):
+    def to_dict_for_prompt(self, with_data_type=False):
+        if with_data_type:
+            includes = ('name', 'full_name', 'curr_desc', 'data_type')
+        else:
+            includes = ('name', 'full_name', 'curr_desc')
+
         result = {
             'name': self.name,
             # 'datasource_id': self.datasource_id,
             'schemas': [schema.to_dict(
                 level='field',
-                includes=(
-                    'name',
-                    'full_name',
-                    'curr_desc',
-                )) for schema in self.schemas]
+                includes=includes) for schema in self.schemas]
         }
 
         # 修改fields的结构，减少token数量
         for schema in result['schemas']:
             for table in schema.get('tables', []):
                 for field in table.get('fields', []):
                     field.pop('full_name', None)
@@ -478,27 +483,18 @@
                         field.pop('related_field_precision_rate', None)
 
                     # 更名，更直接，更少的字符
                     field['desc'] = field.pop('curr_desc', None)
 
         return result
 
-    def to_markdown_for_prompt(self):
-        return dict_to_markdown(self.to_dict_for_prompt(), table_format_keys=('fields',))
-
-    # def to_dict_for_analysis(self):
-    #     return {
-    #         'name': self.name,
-    #         'datasource_id': self.datasource_id,
-    #         'schemas': [schema.to_dict_for_analysis() for schema
-    #                     in self.schemas if schema.to_dict_for_analysis()]
-    #     }
-    #
-    # def to_markdown_for_analysis(self):
-    #     return dict_to_markdown(self.to_dict_for_analysis(), table_format_keys=('fields',))
+    def to_markdown_for_prompt(self, with_data_type=False) -> str:
+        return dict_to_markdown(
+            self.to_dict_for_prompt(with_data_type=with_data_type), table_format_keys=('fields',)
+        )
 
     def to_simple_dict_for_process(self) -> dict:
         schemas = []
         for s in self.schemas:
             tables = []
             for t in s.tables:
                 if t.curr_desc and all([f.curr_desc for f in t.fields]):
@@ -600,15 +596,15 @@
     def overview(self):
         return f"<{self.datasource_id}>[{self.schema_count}S|{self.table_count}T|{self.field_count}F]"
 
     def __str__(self):
         return self.__repr__()
 
     def __repr__(self):
-        output = ""
+        output = "\n"
         for schema in self.schemas:
             schema_data = []  # Prepare data for the current schema
             schema_desc = schema.name
             schema_desc += f" ({schema.curr_desc})" if schema.curr_desc else ""
             schema_desc += "\n" + "-" * 30
 
             for table in schema.tables:
@@ -717,53 +713,53 @@
                     # 然后复制 table 到新的 schema 中
                     cloned_table = deepcopy(table)
                     # 更新 cloned_table 的 schema 属性为新的 schema
                     cloned_table.schema = filtered_schema
                     filtered_schema.add_table(cloned_table)
 
         return filtered_metadata
-
-    def get_schema_names(self, pattern=None) -> List[str]:
-        """
-        Return a list of schema names that match the given pattern.
-        """
-        if pattern:
-            regex = re.compile(pattern)
-            return [schema.name for schema in self.schemas if regex.match(schema.name)]
-        return [schema.name for schema in self.schemas]
-
-    def get_table_names(self, schema_pattern=None, table_pattern=None):
-        table_names = []
-        schema_regex = re.compile(schema_pattern) if schema_pattern else None
-        table_regex = re.compile(table_pattern) if table_pattern else None
-        for schema in self.schemas:
-            if not schema_pattern or schema_regex.match(schema.name):
-                for table in schema.tables:
-                    if not table_pattern or table_regex.match(table.name):
-                        table_names.append(f"{schema.name}.{table.name}")
-        return table_names
-
-    def get_field_names(self, schema_pattern=None, table_pattern=None, field_pattern=None) -> dict[str, List[str]]:
-        """
-        Return a dictionary of field names, where the key is the table name and the value is a list of field names.
-        """
-        field_names = {}
-        schema_regex = re.compile(schema_pattern) if schema_pattern else None
-        table_regex = re.compile(table_pattern) if table_pattern else None
-        field_regex = re.compile(field_pattern) if field_pattern else None
-        for schema in self.schemas:
-            if not schema_pattern or schema_regex.match(schema.name):
-                for table in schema.tables:
-                    if not table_pattern or table_regex.match(table.name):
-                        fields_in_table = []
-                        for field in table.fields:
-                            if not field_pattern or field_regex.match(field.name):
-                                fields_in_table.append(f"{schema.name}.{table.name}.{field.name}")
-                        field_names[f"{schema.name}.{table.name}"] = fields_in_table
-        return field_names
+    #
+    # def get_schema_names(self, pattern=None) -> List[str]:
+    #     """
+    #     Return a list of schema names that match the given pattern.
+    #     """
+    #     if pattern:
+    #         regex = re.compile(pattern)
+    #         return [schema.name for schema in self.schemas if regex.match(schema.name)]
+    #     return [schema.name for schema in self.schemas]
+    #
+    # def get_table_names(self, schema_pattern=None, table_pattern=None):
+    #     table_names = []
+    #     schema_regex = re.compile(schema_pattern) if schema_pattern else None
+    #     table_regex = re.compile(table_pattern) if table_pattern else None
+    #     for schema in self.schemas:
+    #         if not schema_pattern or schema_regex.match(schema.name):
+    #             for table in schema.tables:
+    #                 if not table_pattern or table_regex.match(table.name):
+    #                     table_names.append(f"{schema.name}.{table.name}")
+    #     return table_names
+    #
+    # def get_field_names(self, schema_pattern=None, table_pattern=None, field_pattern=None) -> dict[str, List[str]]:
+    #     """
+    #     Return a dictionary of field names, where the key is the table name and the value is a list of field names.
+    #     """
+    #     field_names = {}
+    #     schema_regex = re.compile(schema_pattern) if schema_pattern else None
+    #     table_regex = re.compile(table_pattern) if table_pattern else None
+    #     field_regex = re.compile(field_pattern) if field_pattern else None
+    #     for schema in self.schemas:
+    #         if not schema_pattern or schema_regex.match(schema.name):
+    #             for table in schema.tables:
+    #                 if not table_pattern or table_regex.match(table.name):
+    #                     fields_in_table = []
+    #                     for field in table.fields:
+    #                         if not field_pattern or field_regex.match(field.name):
+    #                             fields_in_table.append(f"{schema.name}.{table.name}.{field.name}")
+    #                     field_names[f"{schema.name}.{table.name}"] = fields_in_table
+    #     return field_names
 
     def filter_by_regex(self, schema_pattern=None, table_pattern=None, field_pattern=None) -> "MetaData":
         """
         Filter the metadata by regular expressions and return a new MetaData instance containing only the matching items.
         if a pattern is None, it will not be used for filtering, so all items will be included.
         """
         filtered_metadata = MetaData(name=f"{self.name}_regex_filtered", datasource_id=self.datasource_id)
@@ -872,15 +868,16 @@
                             name=field.name,
                             table=result_table,
                             origin_desc=field.origin_desc,
                             curr_desc=field.curr_desc,
                             curr_desc_stat=field.curr_desc_stat,
                             related_field=field.related_field,
                             related_field_precision_rate=field.related_field_precision_rate,
-                            sample_data=field.sample_data
+                            sample_data=field.sample_data,
+                            data_type=field.data_type,
                         )
                         result_table.add_field(new_field)
 
     # 然后剔除所有禁止的 meta
     for deny_meta in deny_metas:
         for schema in deny_meta.schemas:
             for table in schema.tables:
```

## atcommon/models/qa.py

```diff
@@ -14,17 +14,40 @@
 
     def __str__(self):
         return f"USER-Q[{self.content}]"
 
 
 class StrucQuery:
 
-    def __init__(self, content: str, params: dict = None):
+    def __init__(self, content: str, full_params: dict = None):
         self.content = content
-        self.params = params or {}
+        self.full_params = full_params or {}
+        self.params = {key: value['value'] for key, value in self.full_params.items()}
+
+    @classmethod
+    def load(cls, query_params: dict):
+        """
+        query_params:
+        {
+          "content': "SELECT score FROM students WHERE name = :stu_name",
+          "full_params": {
+            "stu_name": {
+              "field_full_name": "exam_db.students.name",
+              "value": "张三",
+          },
+        }
+        """
+
+        return cls(query_params['content'], query_params.get('full_params'))
+
+    def dumps(self):
+        return {
+            "content": self.content,
+            "full_params": self.full_params,
+        }
 
     def __str__(self):
         return self.to_string()
 
     def __repr__(self):
         return f"SQ[{self.to_string()[:20]}...]"
 
@@ -43,15 +66,15 @@
         self.result = result
         self.query_time_ms = query_time_ms
 
     def __str__(self):
         return self.__repr__()
 
     def __repr__(self):
-        return f"{self.query} -> R[{self.row_count} 行 {self.column_count} 列]"
+        return f"\n{self.query} -> R[{self.row_count} 行 {self.column_count} 列]"
 
     def to_dict(self):
         return {
             "query": self.query.to_string(),
             "result_info": {
                 "row_count": self.row_count,
                 "column_count": self.column_count,
```

## Comparing `asktable-0.17.0.dist-info/METADATA` & `asktable-0.17.5.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: asktable
-Version: 0.17.0
+Version: 0.17.5
 Summary: AskTable SDK
 Home-page: https://asktable.com/
 Author: lele
 Description-Content-Type: text/markdown
 Requires-Dist: requests
 Requires-Dist: tabulate
 Requires-Dist: pybase62
```

## Comparing `asktable-0.17.0.dist-info/RECORD` & `asktable-0.17.5.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 asktable/__init__.py,sha256=12mHQ4Yrr7_vY7ilhc6_tdOtuclBWPWj88YFIiTTU6I,86
 asktable/api.py,sha256=e5XbDpNv3V0OVdpUin6xhkA1xW0u-Jik5wFlS_2ZkiY,2180
 asktable/cli.py,sha256=1aXfzeaLRpYJWp5c5Uhzv3Upb8AprxUOhY6YGCi_ulY,2213
-asktable/client.py,sha256=7wMUQmgVUSujlOKAsupYlazuz73VmAmCR7TXEFGFMw8,1395
+asktable/client.py,sha256=JL8aIYIV-1XVXemznXfYOikYdX564j8bANJug3Lpn3k,1434
 asktable/exceptions.py,sha256=HUys_aPowtoLqjO4XhANXBQCUUpty1zLxV4fWPqBkLc,41
 asktable/log.py,sha256=CIRsQtXMB24sD5fFsUn2hxlEVJB33Ej8TIQKyET2pQ8,875
 asktable/upload.py,sha256=ZctBvZtKnBZWucRXzvdp25zBNGz3eQ6PAfdhzLzfMUU,1492
-asktable/models/__init__.py,sha256=AmMMCVGsemK9FuAjULJwsmV1Hk3LkzoVjECN9AkYgoI,584
+asktable/models/__init__.py,sha256=J9gTPe-Sk9TW5vtgjFY-O3F1MG6yBP0BCiDcEfYebSA,618
 asktable/models/client_auth.py,sha256=8QfXXDkH-pG_3nQnlEs_VFVgpahVxYvpdRdnV4lQYI4,4495
 asktable/models/client_base.py,sha256=txj6G1zz3jbysnX-AGPJIuuFNyMmWYLF2VHtjP_aY8c,4023
-asktable/models/client_chat.py,sha256=33u0Jv_FzbLWINNVqOFYtYXL_kNgiF7vmwrduVtHq1w,2785
-asktable/models/client_ds.py,sha256=YGdTx2eAxrlnNnlxakYUoRkIkq5XN8tQ9rZvUjICDGI,10830
+asktable/models/client_chat.py,sha256=sVQd-wiYawJytUMR0RCdg5v-0EXU2nMcOlDaFiO6GO0,2791
+asktable/models/client_ds.py,sha256=a4ZN5ftOeNNuVQxOEWjGxwj5tVvz6Sol5Ppe-ekcBOc,10810
 asktable/models/client_msg.py,sha256=TBaiiGELjtNBq6Lp40Hs0heMHNG5ik0kTRLHeBwXO2U,1290
 asktable/models/client_run.py,sha256=YEu-lhVUPamwN9yLJLLldZXTBppIOMIMZ6wOmoxPsc4,885
 asktable/models/client_securetunnel.py,sha256=RXC0pTP_L9F1F-iqJ60ClQLVH6ntYvEYem4gCfjHbjk,1597
 atcommon/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-atcommon/tools.py,sha256=QzS75_UUz3NLH_LCUL5uNejcZereYT4Q_A5SqP30nq8,3964
-atcommon/version.py,sha256=8_h83RPSvFbwcnc0Eb-1eQnWHleOCpi3EbqoRyp1ljQ,16
+atcommon/tools.py,sha256=kfvCPWq_MtW1KDr9r76KJ1cGO0Uf_k6bOIrz93rIyIU,4287
+atcommon/version.py,sha256=bVoo3NJZrXKWH7q3K2L11Bz1mfuellKSrblQzbulE_w,16
 atcommon/exceptions/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 atcommon/exceptions/client.py,sha256=9NRkVMHEBdCfiaTvz2p5knT6gWwAzhksZJf0yeyo9rI,1402
 atcommon/exceptions/server.py,sha256=BSlYmdfDasoAq6oK9fyGhws3EBPII_hkHpx_JQmMdAY,95
 atcommon/exceptions/server_base.py,sha256=rtFZC4x7J0FlNkij3ZJPxWKtL3HEha9vFy-hcURdCQU,4174
 atcommon/exceptions/server_plugins.py,sha256=GTi89Ws7QZmn6p7IrYovu-7wkWSkGridPNZlYfrSAjQ,656
 atcommon/models/__init__.py,sha256=yf9y4iejr6g0kcjbkWnaUlEts7XN3ehWBIvzwZ7g5UI,763
 atcommon/models/auth.py,sha256=yfn67V-JL4eImCq4CxuCUlafI2GFlYMrWSgM8gPBVaw,1095
 atcommon/models/base.py,sha256=yRaaii4IOAIfKNN1fV2OmR-SesdX_2pj6Vpcx-Ecr0E,1063
 atcommon/models/chat.py,sha256=uMwAz3-Eofy71sSiSpS5EAS6S-IZc1Orbup1owB7vl0,1326
 atcommon/models/datasource.py,sha256=gzM4ZB02YrOjuj6wYD46wUgK53QQjecZGb0fmS_a-Y4,1594
-atcommon/models/meta.py,sha256=Rz5epvQwY63kvGa6KGCh1yPf83sqmGnkydFlZ2vwjsA,37127
-atcommon/models/qa.py,sha256=Q5ipN1L3SsUQNUd1iwVxeJe38p0fpZzSZ6zRS9v_758,5061
+atcommon/models/meta.py,sha256=DtOo5zpH1YJEJx1LLldv_GtHbV3qBcIs7ZTbGHN0kM4,37282
+atcommon/models/qa.py,sha256=fkFMPt6BtV9TRaf66BfMB4m7pWyWoBxUjF6JOyVLC64,5728
 atcommon/models/securetunnel.py,sha256=n5duS3dduaDNPv_Y0r0M6zOc9hD05OPM4rtR6o7O3nw,1137
-asktable-0.17.0.dist-info/METADATA,sha256=eci2BaHr1ahW_XhXCATSAkKIKgB8JZ7b4ximGs9Y3m4,18288
-asktable-0.17.0.dist-info/WHEEL,sha256=Xo9-1PvkuimrydujYJAjF7pCkriuXBpUPEjma1nZyJ0,92
-asktable-0.17.0.dist-info/entry_points.txt,sha256=OS7zXFo5f2wYttNLFf6EScGBaN_2XtYbV_Fl_C3RhY8,47
-asktable-0.17.0.dist-info/top_level.txt,sha256=j_dz8lioIJZMGAy7UUdXv0ytGGhh8HFsGhSXaULxT4M,18
-asktable-0.17.0.dist-info/RECORD,,
+asktable-0.17.5.dist-info/METADATA,sha256=8tptAZGQyIrOWaD18Q-oVCUSknh8jm9hrY537H_OEkc,18288
+asktable-0.17.5.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
+asktable-0.17.5.dist-info/entry_points.txt,sha256=OS7zXFo5f2wYttNLFf6EScGBaN_2XtYbV_Fl_C3RhY8,47
+asktable-0.17.5.dist-info/top_level.txt,sha256=j_dz8lioIJZMGAy7UUdXv0ytGGhh8HFsGhSXaULxT4M,18
+asktable-0.17.5.dist-info/RECORD,,
```

