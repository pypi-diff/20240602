# Comparing `tmp/homebase_calendar_sync-0.1.0.tar.gz` & `tmp/homebase_calendar_sync-0.1.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "homebase_calendar_sync-0.1.0.tar", last modified: Sun Jun  2 14:40:29 2024, max compression
+gzip compressed data, was "homebase_calendar_sync-0.1.1.tar", last modified: Sun Jun  2 14:44:29 2024, max compression
```

## Comparing `homebase_calendar_sync-0.1.0.tar` & `homebase_calendar_sync-0.1.1.tar`

### file list

```diff
@@ -1,18 +1,18 @@
-drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:40:29.043142 homebase_calendar_sync-0.1.0/
--rw-r--r--   0 davidmidlo   (501) staff       (20)    17546 2024-06-02 14:40:29.042868 homebase_calendar_sync-0.1.0/PKG-INFO
--rw-r--r--   0 davidmidlo   (501) staff       (20)    15097 2024-06-02 14:02:21.000000 homebase_calendar_sync-0.1.0/README.md
--rw-r--r--   0 davidmidlo   (501) staff       (20)       38 2024-06-02 14:40:29.043194 homebase_calendar_sync-0.1.0/setup.cfg
--rw-r--r--   0 davidmidlo   (501) staff       (20)     1009 2024-06-02 14:40:09.000000 homebase_calendar_sync-0.1.0/setup.py
-drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:40:29.040273 homebase_calendar_sync-0.1.0/src/
-drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:40:29.041353 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync/
--rw-r--r--   0 davidmidlo   (501) staff       (20)        0 2024-06-02 13:57:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync/__init__.py
--rw-r--r--   0 davidmidlo   (501) staff       (20)        0 2024-06-02 13:57:40.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync/__main__.py
--rw-r--r--   0 davidmidlo   (501) staff       (20)      123 2024-06-02 13:40:44.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync/config.py
--rw-r--r--   0 davidmidlo   (501) staff       (20)    13183 2024-06-02 14:13:17.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync/homebase_calendar_sync.py
-drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:40:29.042464 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/
--rw-r--r--   0 davidmidlo   (501) staff       (20)    17546 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/PKG-INFO
--rw-r--r--   0 davidmidlo   (501) staff       (20)      488 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/SOURCES.txt
--rw-r--r--   0 davidmidlo   (501) staff       (20)        1 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/dependency_links.txt
--rw-r--r--   0 davidmidlo   (501) staff       (20)       94 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/entry_points.txt
--rw-r--r--   0 davidmidlo   (501) staff       (20)     1080 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/requires.txt
--rw-r--r--   0 davidmidlo   (501) staff       (20)       23 2024-06-02 14:40:29.000000 homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/top_level.txt
+drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:44:29.627637 homebase_calendar_sync-0.1.1/
+-rw-r--r--   0 davidmidlo   (501) staff       (20)     2927 2024-06-02 14:44:29.627422 homebase_calendar_sync-0.1.1/PKG-INFO
+-rw-r--r--   0 davidmidlo   (501) staff       (20)      477 2024-06-02 14:42:53.000000 homebase_calendar_sync-0.1.1/README.md
+-rw-r--r--   0 davidmidlo   (501) staff       (20)       38 2024-06-02 14:44:29.627678 homebase_calendar_sync-0.1.1/setup.cfg
+-rw-r--r--   0 davidmidlo   (501) staff       (20)     1009 2024-06-02 14:43:36.000000 homebase_calendar_sync-0.1.1/setup.py
+drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:44:29.625411 homebase_calendar_sync-0.1.1/src/
+drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:44:29.626158 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/
+-rw-r--r--   0 davidmidlo   (501) staff       (20)        0 2024-06-02 13:57:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/__init__.py
+-rw-r--r--   0 davidmidlo   (501) staff       (20)        0 2024-06-02 13:57:40.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/__main__.py
+-rw-r--r--   0 davidmidlo   (501) staff       (20)      123 2024-06-02 13:40:44.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/config.py
+-rw-r--r--   0 davidmidlo   (501) staff       (20)    13183 2024-06-02 14:13:17.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/homebase_calendar_sync.py
+drwxr-xr-x   0 davidmidlo   (501) staff       (20)        0 2024-06-02 14:44:29.627066 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/
+-rw-r--r--   0 davidmidlo   (501) staff       (20)     2927 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/PKG-INFO
+-rw-r--r--   0 davidmidlo   (501) staff       (20)      488 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/SOURCES.txt
+-rw-r--r--   0 davidmidlo   (501) staff       (20)        1 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/dependency_links.txt
+-rw-r--r--   0 davidmidlo   (501) staff       (20)       94 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/entry_points.txt
+-rw-r--r--   0 davidmidlo   (501) staff       (20)     1080 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/requires.txt
+-rw-r--r--   0 davidmidlo   (501) staff       (20)       23 2024-06-02 14:44:29.000000 homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/top_level.txt
```

### Comparing `homebase_calendar_sync-0.1.0/README.md` & `homebase_calendar_sync-0.1.1/src/homebase_calendar_sync/homebase_calendar_sync.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,944 +1,824 @@
-00000000: 6060 602e 0ae2 949c e294 80e2 9480 2052  ```........... R
-00000010: 4541 444d 452e 6d64 0ae2 949c e294 80e2  EADME.md........
-00000020: 9480 205f 5f70 7963 6163 6865 5f5f 0ae2  .. __pycache__..
-00000030: 9482 c2a0 c2a0 20e2 9494 e294 80e2 9480  ...... .........
-00000040: 2063 6f6e 6669 672e 6370 7974 686f 6e2d   config.cpython-
-00000050: 3331 322e 7079 630a e294 9ce2 9480 e294  312.pyc.........
-00000060: 8020 6576 656e 7473 2e64 620a e294 9ce2  . events.db.....
-00000070: 9480 e294 8020 7265 7175 6972 656d 656e  ..... requiremen
-00000080: 7473 2e74 7874 0ae2 949c e294 80e2 9480  ts.txt..........
-00000090: 2073 6574 7570 2e70 790a e294 94e2 9480   setup.py.......
-000000a0: e294 8020 7372 630a 2020 2020 e294 94e2  ... src.    ....
-000000b0: 9480 e294 8020 686f 6d65 6261 7365 5f63  ..... homebase_c
-000000c0: 616c 656e 6461 725f 7379 6e63 0a20 2020  alendar_sync.   
-000000d0: 2020 2020 20e2 949c e294 80e2 9480 205f       ......... _
-000000e0: 5f69 6e69 745f 5f2e 7079 0a20 2020 2020  _init__.py.     
-000000f0: 2020 20e2 949c e294 80e2 9480 205f 5f6d     ......... __m
-00000100: 6169 6e5f 5f2e 7079 0a20 2020 2020 2020  ain__.py.       
-00000110: 20e2 949c e294 80e2 9480 205f 5f70 7963   ......... __pyc
-00000120: 6163 6865 5f5f 0a20 2020 2020 2020 20e2  ache__.        .
-00000130: 9482 c2a0 c2a0 20e2 949c e294 80e2 9480  ...... .........
-00000140: 2063 6f6e 6669 672e 6370 7974 686f 6e2d   config.cpython-
-00000150: 3331 322e 7079 630a 2020 2020 2020 2020  312.pyc.        
-00000160: e294 82c2 a0c2 a020 e294 94e2 9480 e294  ....... ........
-00000170: 8020 686f 6d65 6261 7365 5f63 616c 656e  . homebase_calen
-00000180: 6461 725f 7379 6e63 2e63 7079 7468 6f6e  dar_sync.cpython
-00000190: 2d33 3132 2e70 7963 0a20 2020 2020 2020  -312.pyc.       
-000001a0: 20e2 949c e294 80e2 9480 2063 6f6e 6669   ......... confi
-000001b0: 672e 7079 0a20 2020 2020 2020 20e2 949c  g.py.        ...
-000001c0: e294 80e2 9480 2064 620a 2020 2020 2020  ...... db.      
-000001d0: 2020 e294 82c2 a0c2 a020 e294 9ce2 9480    ....... ......
-000001e0: e294 8020 5f5f 7079 6361 6368 655f 5f0a  ... __pycache__.
-000001f0: 2020 2020 2020 2020 e294 82c2 a0c2 a020          ....... 
-00000200: e294 82c2 a0c2 a020 e294 94e2 9480 e294  ....... ........
-00000210: 8020 6d6f 6465 6c73 2e63 7079 7468 6f6e  . models.cpython
-00000220: 2d33 3132 2e70 7963 0a20 2020 2020 2020  -312.pyc.       
-00000230: 20e2 9482 c2a0 c2a0 20e2 9494 e294 80e2   ....... .......
-00000240: 9480 206d 6f64 656c 732e 7079 0a20 2020  .. models.py.   
-00000250: 2020 2020 20e2 949c e294 80e2 9480 2067       ......... g
-00000260: 6f6f 676c 655f 636c 6965 6e74 0a20 2020  oogle_client.   
-00000270: 2020 2020 20e2 9482 c2a0 c2a0 20e2 949c       ....... ...
-00000280: e294 80e2 9480 205f 5f70 7963 6163 6865  ...... __pycache
-00000290: 5f5f 0a20 2020 2020 2020 20e2 9482 c2a0  __.        .....
-000002a0: c2a0 20e2 9482 c2a0 c2a0 20e2 949c e294  .. ....... .....
-000002b0: 80e2 9480 2061 7574 682e 6370 7974 686f  .... auth.cpytho
-000002c0: 6e2d 3331 322e 7079 630a 2020 2020 2020  n-312.pyc.      
-000002d0: 2020 e294 82c2 a0c2 a020 e294 82c2 a0c2    ....... ......
-000002e0: a020 e294 9ce2 9480 e294 8020 6472 6976  . ......... driv
-000002f0: 655f 7479 7065 732e 6370 7974 686f 6e2d  e_types.cpython-
-00000300: 3331 322e 7079 630a 2020 2020 2020 2020  312.pyc.        
-00000310: e294 82c2 a0c2 a020 e294 82c2 a0c2 a020  ....... ....... 
-00000320: e294 94e2 9480 e294 8020 676f 6f67 6c65  ......... google
-00000330: 5f63 6c69 656e 742e 6370 7974 686f 6e2d  _client.cpython-
-00000340: 3331 322e 7079 630a 2020 2020 2020 2020  312.pyc.        
-00000350: e294 82c2 a0c2 a020 e294 9ce2 9480 e294  ....... ........
-00000360: 8020 6175 7468 2e70 790a 2020 2020 2020  . auth.py.      
-00000370: 2020 e294 82c2 a0c2 a020 e294 9ce2 9480    ....... ......
-00000380: e294 8020 6472 6976 655f 7479 7065 732e  ... drive_types.
-00000390: 7079 0a20 2020 2020 2020 20e2 9482 c2a0  py.        .....
-000003a0: c2a0 20e2 9494 e294 80e2 9480 2067 6f6f  .. ......... goo
-000003b0: 676c 655f 636c 6965 6e74 2e70 790a 2020  gle_client.py.  
-000003c0: 2020 2020 2020 e294 94e2 9480 e294 8020        ......... 
-000003d0: 686f 6d65 6261 7365 5f63 616c 656e 6461  homebase_calenda
-000003e0: 725f 7379 6e63 2e70 790a 6060 600a 0a60  r_sync.py.```..`
-000003f0: 6060 7365 7475 702e 7079 0a66 726f 6d20  ``setup.py.from 
-00000400: 7365 7475 7074 6f6f 6c73 2069 6d70 6f72  setuptools impor
-00000410: 7420 7365 7475 702c 2066 696e 645f 7061  t setup, find_pa
-00000420: 636b 6167 6573 0a0a 7365 7475 7028 0a20  ckages..setup(. 
-00000430: 2020 206e 616d 653d 2768 6f6d 6562 6173     name='homebas
-00000440: 655f 6361 6c65 6e64 6172 5f73 796e 6327  e_calendar_sync'
-00000450: 2c0a 2020 2020 7665 7273 696f 6e3d 2730  ,.    version='0
-00000460: 2e31 2e30 272c 0a20 2020 2061 7574 686f  .1.0',.    autho
-00000470: 723d 2744 6176 6964 204d 6964 6c6f 272c  r='David Midlo',
-00000480: 0a20 2020 2061 7574 686f 725f 656d 6169  .    author_emai
-00000490: 6c3d 2764 6d69 646c 6f40 676d 6169 6c2e  l='dmidlo@gmail.
-000004a0: 636f 6d27 2c0a 2020 2020 6465 7363 7269  com',.    descri
-000004b0: 7074 696f 6e3d 2741 2073 696d 706c 6520  ption='A simple 
-000004c0: 7765 6220 7363 7261 7065 7220 7468 6174  web scraper that
-000004d0: 2072 6561 6473 2067 6574 686f 6d65 6261   reads gethomeba
-000004e0: 7365 2e63 6f6d 2773 2073 6368 6564 756c  se.com's schedul
-000004f0: 6520 616e 6420 7570 6461 7465 7320 676f  e and updates go
-00000500: 6f67 6c65 2063 616c 656e 6461 722e 272c  ogle calendar.',
-00000510: 0a20 2020 206c 6f6e 675f 6465 7363 7269  .    long_descri
-00000520: 7074 696f 6e3d 6f70 656e 2827 5245 4144  ption=open('READ
-00000530: 4d45 2e6d 6427 292e 7265 6164 2829 2c0a  ME.md').read(),.
-00000540: 2020 2020 6c6f 6e67 5f64 6573 6372 6970      long_descrip
-00000550: 7469 6f6e 5f63 6f6e 7465 6e74 5f74 7970  tion_content_typ
-00000560: 653d 2774 6578 742f 6d61 726b 646f 776e  e='text/markdown
-00000570: 272c 0a20 2020 2075 726c 3d27 6874 7470  ',.    url='http
-00000580: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f64  s://github.com/d
-00000590: 6d69 646c 6f2f 686f 6d65 6261 7365 5f63  midlo/homebase_c
-000005a0: 616c 656e 6461 725f 7379 6e63 272c 2020  alendar_sync',  
-000005b0: 2320 5570 6461 7465 2074 6869 7320 746f  # Update this to
-000005c0: 2079 6f75 7220 7072 6f6a 6563 7427 7320   your project's 
-000005d0: 5552 4c0a 2020 2020 7061 636b 6167 6573  URL.    packages
-000005e0: 3d66 696e 645f 7061 636b 6167 6573 2829  =find_packages()
-000005f0: 2c0a 2020 2020 696e 7374 616c 6c5f 7265  ,.    install_re
-00000600: 7175 6972 6573 3d6f 7065 6e28 2772 6571  quires=open('req
-00000610: 7569 7265 6d65 6e74 732e 7478 7427 292e  uirements.txt').
-00000620: 7265 6164 2829 2e73 706c 6974 6c69 6e65  read().splitline
-00000630: 7328 292c 0a20 2020 2063 6c61 7373 6966  s(),.    classif
-00000640: 6965 7273 3d5b 0a20 2020 2020 2020 2027  iers=[.        '
-00000650: 5072 6f67 7261 6d6d 696e 6720 4c61 6e67  Programming Lang
-00000660: 7561 6765 203a 3a20 5079 7468 6f6e 203a  uage :: Python :
-00000670: 3a20 3327 2c0a 2020 2020 2020 2020 274c  : 3',.        'L
-00000680: 6963 656e 7365 203a 3a20 4f53 4920 4170  icense :: OSI Ap
-00000690: 7072 6f76 6564 203a 3a20 4d49 5420 4c69  proved :: MIT Li
-000006a0: 6365 6e73 6527 2c0a 2020 2020 2020 2020  cense',.        
-000006b0: 274f 7065 7261 7469 6e67 2053 7973 7465  'Operating Syste
-000006c0: 6d20 3a3a 204f 5320 496e 6465 7065 6e64  m :: OS Independ
-000006d0: 656e 7427 2c0a 2020 2020 5d2c 0a20 2020  ent',.    ],.   
-000006e0: 2070 7974 686f 6e5f 7265 7175 6972 6573   python_requires
-000006f0: 3d27 3e3d 332e 3627 2c0a 290a 6060 600a  ='>=3.6',.).```.
-00000700: 0a60 6060 0a69 6d70 6f72 7420 6f73 0a69  .```.import os.i
-00000710: 6d70 6f72 7420 6a73 6f6e 0a69 6d70 6f72  mport json.impor
-00000720: 7420 6874 7470 780a 6672 6f6d 2062 7334  t httpx.from bs4
-00000730: 2069 6d70 6f72 7420 4265 6175 7469 6675   import Beautifu
-00000740: 6c53 6f75 700a 696d 706f 7274 2070 656e  lSoup.import pen
-00000750: 6475 6c75 6d0a 6672 6f6d 2070 6174 686c  dulum.from pathl
-00000760: 6962 2069 6d70 6f72 7420 5061 7468 0a66  ib import Path.f
-00000770: 726f 6d20 646f 7465 6e76 2069 6d70 6f72  rom dotenv impor
-00000780: 7420 6c6f 6164 5f64 6f74 656e 760a 6672  t load_dotenv.fr
-00000790: 6f6d 2072 6963 6820 696d 706f 7274 2070  om rich import p
-000007a0: 7269 6e74 0a69 6d70 6f72 7420 6861 7368  rint.import hash
-000007b0: 6c69 620a 0a69 6d70 6f72 7420 636f 6e66  lib..import conf
-000007c0: 6967 0a66 726f 6d20 6462 2e6d 6f64 656c  ig.from db.model
-000007d0: 7320 696d 706f 7274 2073 6574 7570 5f64  s import setup_d
-000007e0: 6174 6162 6173 652c 2063 6f6e 6e65 6374  atabase, connect
-000007f0: 5f64 6174 6162 6173 650a 6672 6f6d 2067  _database.from g
-00000800: 6f6f 676c 655f 636c 6965 6e74 2e61 7574  oogle_client.aut
-00000810: 6820 696d 706f 7274 204d 6574 6164 6174  h import Metadat
-00000820: 610a 6672 6f6d 2067 6f6f 676c 655f 636c  a.from google_cl
-00000830: 6965 6e74 2e67 6f6f 676c 655f 636c 6965  ient.google_clie
-00000840: 6e74 2069 6d70 6f72 7420 476f 6f67 6c65  nt import Google
-00000850: 436c 6965 6e74 0a0a 444f 5445 4e56 5f42  Client..DOTENV_B
-00000860: 4153 455f 4449 5220 3d20 5061 7468 285f  ASE_DIR = Path(_
-00000870: 5f66 696c 655f 5f29 2e70 6172 656e 742e  _file__).parent.
-00000880: 7061 7265 6e74 2e70 6172 656e 740a 6c6f  parent.parent.lo
-00000890: 6164 5f64 6f74 656e 7628 5061 7468 2844  ad_dotenv(Path(D
-000008a0: 4f54 454e 565f 4241 5345 5f44 4952 2c20  OTENV_BASE_DIR, 
-000008b0: 222e 656e 7622 2929 0a0a 484f 4d45 4241  ".env"))..HOMEBA
-000008c0: 5345 5f55 5345 524e 414d 4520 3d20 6f73  SE_USERNAME = os
-000008d0: 2e65 6e76 6972 6f6e 5b22 4343 5f48 4f4d  .environ["CC_HOM
-000008e0: 4542 4153 455f 5553 4552 4e41 4d45 225d  EBASE_USERNAME"]
-000008f0: 0a48 4f4d 4542 4153 455f 5041 5353 574f  .HOMEBASE_PASSWO
-00000900: 5244 203d 206f 732e 656e 7669 726f 6e5b  RD = os.environ[
-00000910: 2243 435f 484f 4d45 4241 5345 5f50 4153  "CC_HOMEBASE_PAS
-00000920: 5357 4f52 4422 5d0a 454d 504c 4f59 4545  SWORD"].EMPLOYEE
-00000930: 5f46 4952 5354 4e41 4d45 203d 206f 732e  _FIRSTNAME = os.
-00000940: 656e 7669 726f 6e5b 2243 435f 484f 4d45  environ["CC_HOME
-00000950: 4241 5345 5f45 4d50 4c4f 5945 455f 4649  BASE_EMPLOYEE_FI
-00000960: 5253 544e 414d 4522 5d0a 454d 504c 4f59  RSTNAME"].EMPLOY
-00000970: 4545 5f4c 4153 544e 414d 4520 3d20 6f73  EE_LASTNAME = os
-00000980: 2e65 6e76 6972 6f6e 5b22 4343 5f48 4f4d  .environ["CC_HOM
-00000990: 4542 4153 455f 454d 504c 4f59 4545 5f4c  EBASE_EMPLOYEE_L
-000009a0: 4153 544e 414d 4522 5d0a 5354 4152 545f  ASTNAME"].START_
-000009b0: 4441 5445 203d 206f 732e 656e 7669 726f  DATE = os.enviro
-000009c0: 6e5b 2243 435f 484f 4d45 4241 5345 5f53  n["CC_HOMEBASE_S
-000009d0: 5441 5254 5f44 4154 4522 5d0a 454e 445f  TART_DATE"].END_
-000009e0: 4441 5445 203d 206f 732e 656e 7669 726f  DATE = os.enviro
-000009f0: 6e5b 2243 435f 484f 4d45 4241 5345 5f45  n["CC_HOMEBASE_E
-00000a00: 4e44 5f44 4154 4522 5d0a 4c4f 4f4b 4148  ND_DATE"].LOOKAH
-00000a10: 4541 4420 3d20 6f73 2e65 6e76 6972 6f6e  EAD = os.environ
-00000a20: 5b22 4343 5f48 4f4d 4542 4153 455f 4c4f  ["CC_HOMEBASE_LO
-00000a30: 4f4b 4148 4541 4422 5d0a 4c4f 4f4b 4148  OKAHEAD"].LOOKAH
-00000a40: 4541 4420 3d20 4c4f 4f4b 4148 4541 442e  EAD = LOOKAHEAD.
-00000a50: 6c6f 7765 7228 2920 696e 205b 2274 7275  lower() in ["tru
-00000a60: 6522 2c20 2231 222c 2022 7422 2c20 2279  e", "1", "t", "y
-00000a70: 222c 2022 7965 7322 5d0a 4c4f 4f4b 4148  ", "yes"].LOOKAH
-00000a80: 4541 445f 4441 5953 203d 206f 732e 656e  EAD_DAYS = os.en
-00000a90: 7669 726f 6e5b 2243 435f 484f 4d45 4241  viron["CC_HOMEBA
-00000aa0: 5345 5f44 4159 535f 4c4f 4f4b 4148 4541  SE_DAYS_LOOKAHEA
-00000ab0: 4422 5d0a 4c4f 4f4b 4148 4541 445f 4441  D"].LOOKAHEAD_DA
-00000ac0: 5953 203d 2069 6e74 284c 4f4f 4b41 4845  YS = int(LOOKAHE
-00000ad0: 4144 5f44 4159 5329 0a0a 0a63 6c61 7373  AD_DAYS)...class
-00000ae0: 2048 6f6d 6562 6173 6553 6368 6564 756c   HomebaseSchedul
-00000af0: 6553 6372 6170 6572 3a0a 2020 2020 6465  eScraper:.    de
-00000b00: 6620 5f5f 696e 6974 5f5f 280a 2020 2020  f __init__(.    
-00000b10: 2020 2020 7365 6c66 2c20 7573 6572 6e61      self, userna
-00000b20: 6d65 2c20 7061 7373 776f 7264 2c20 6669  me, password, fi
-00000b30: 7273 745f 6e61 6d65 2c20 6c61 7374 5f6e  rst_name, last_n
-00000b40: 616d 652c 2073 7461 7274 5f64 6174 652c  ame, start_date,
-00000b50: 2065 6e64 5f64 6174 650a 2020 2020 2920   end_date.    ) 
-00000b60: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00000b70: 2073 656c 662e 7573 6572 6e61 6d65 203d   self.username =
-00000b80: 2075 7365 726e 616d 650a 2020 2020 2020   username.      
-00000b90: 2020 7365 6c66 2e70 6173 7377 6f72 6420    self.password 
-00000ba0: 3d20 7061 7373 776f 7264 0a20 2020 2020  = password.     
-00000bb0: 2020 2073 656c 662e 7374 6172 745f 6461     self.start_da
-00000bc0: 7465 2c20 7365 6c66 2e65 6e64 5f64 6174  te, self.end_dat
-00000bd0: 6520 3d20 7365 6c66 2e69 6e69 7469 616c  e = self.initial
-00000be0: 697a 655f 6461 7465 5f72 616e 6765 280a  ize_date_range(.
-00000bf0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00000c00: 745f 6461 7465 2c20 656e 645f 6461 7465  t_date, end_date
-00000c10: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00000c20: 2020 2073 656c 662e 6c6f 6769 6e5f 7572     self.login_ur
-00000c30: 6c20 3d20 2268 7474 7073 3a2f 2f61 7070  l = "https://app
-00000c40: 2e6a 6f69 6e68 6f6d 6562 6173 652e 636f  .joinhomebase.co
-00000c50: 6d2f 6163 636f 756e 7473 2f73 6967 6e2d  m/accounts/sign-
-00000c60: 696e 220a 2020 2020 2020 2020 7365 6c66  in".        self
-00000c70: 2e62 6173 655f 7363 6865 6475 6c65 5f75  .base_schedule_u
-00000c80: 726c 203d 2028 0a20 2020 2020 2020 2020  rl = (.         
-00000c90: 2020 2022 6874 7470 733a 2f2f 6170 702e     "https://app.
-00000ca0: 6a6f 696e 686f 6d65 6261 7365 2e63 6f6d  joinhomebase.com
-00000cb0: 2f61 7069 2f66 652f 7363 6865 6475 6c65  /api/fe/schedule
-00000cc0: 5f62 7569 6c64 6572 2f73 6368 6564 756c  _builder/schedul
-00000cd0: 653f 220a 2020 2020 2020 2020 290a 2020  e?".        ).  
-00000ce0: 2020 2020 2020 7365 6c66 2e63 6c69 656e        self.clien
-00000cf0: 7420 3d20 6874 7470 782e 436c 6965 6e74  t = httpx.Client
-00000d00: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00000d10: 6c6f 6769 6e5f 7061 796c 6f61 6420 3d20  login_payload = 
-00000d20: 7b0a 2020 2020 2020 2020 2020 2020 2261  {.            "a
-00000d30: 7574 6865 6e74 6963 6974 795f 746f 6b65  uthenticity_toke
-00000d40: 6e22 3a20 7365 6c66 2e67 6574 5f61 7574  n": self.get_aut
-00000d50: 6865 6e74 6963 6974 795f 746f 6b65 6e28  henticity_token(
-00000d60: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
-00000d70: 6163 636f 756e 745b 6c6f 6769 6e5d 223a  account[login]":
-00000d80: 2075 7365 726e 616d 652c 0a20 2020 2020   username,.     
-00000d90: 2020 2020 2020 2022 6163 636f 756e 745b         "account[
-00000da0: 7061 7373 776f 7264 5d22 3a20 7061 7373  password]": pass
-00000db0: 776f 7264 2c0a 2020 2020 2020 2020 2020  word,.          
-00000dc0: 2020 2261 6363 6f75 6e74 5b72 656d 656d    "account[remem
-00000dd0: 6265 725f 6d65 5d22 3a20 302c 0a20 2020  ber_me]": 0,.   
-00000de0: 2020 2020 207d 0a20 2020 2020 2020 2073       }.        s
-00000df0: 656c 662e 6c6f 6769 6e28 290a 2020 2020  elf.login().    
-00000e00: 2020 2020 7365 6c66 2e63 616c 656e 6461      self.calenda
-00000e10: 725f 6a73 6f6e 203d 206a 736f 6e2e 6c6f  r_json = json.lo
-00000e20: 6164 7328 7365 6c66 2e67 6574 5f63 616c  ads(self.get_cal
-00000e30: 656e 6461 725f 6a73 6f6e 2829 290a 2020  endar_json()).  
-00000e40: 2020 2020 2020 7365 6c66 2e65 6d70 6c6f        self.emplo
-00000e50: 7965 655f 6669 7273 745f 6e61 6d65 203d  yee_first_name =
-00000e60: 2066 6972 7374 5f6e 616d 650a 2020 2020   first_name.    
-00000e70: 2020 2020 7365 6c66 2e65 6d70 6c6f 7965      self.employe
-00000e80: 655f 6c61 7374 5f6e 616d 6520 3d20 6c61  e_last_name = la
-00000e90: 7374 5f6e 616d 650a 2020 2020 2020 2020  st_name.        
-00000ea0: 7365 6c66 2e65 6d70 6c6f 7965 655f 6964  self.employee_id
-00000eb0: 203d 2073 656c 662e 6765 745f 656d 706c   = self.get_empl
-00000ec0: 6f79 6565 5f69 6428 290a 2020 2020 2020  oyee_id().      
-00000ed0: 2020 7365 6c66 2e65 6d70 6c6f 7965 655f    self.employee_
-00000ee0: 6a6f 6273 203d 2073 656c 662e 6765 745f  jobs = self.get_
-00000ef0: 656d 706c 6f79 6565 5f6a 6f62 7328 290a  employee_jobs().
-00000f00: 2020 2020 2020 2020 7365 6c66 2e65 6d70          self.emp
-00000f10: 6c6f 7965 655f 7368 6966 7473 203d 2073  loyee_shifts = s
-00000f20: 656c 662e 6765 745f 656d 706c 6f79 6565  elf.get_employee
-00000f30: 5f73 6869 6674 7328 290a 2020 2020 2020  _shifts().      
-00000f40: 2020 7365 6c66 2e65 6d70 6c6f 7965 655f    self.employee_
-00000f50: 7368 6966 7473 5f69 6e5f 7261 6e67 6520  shifts_in_range 
-00000f60: 3d20 7365 6c66 2e66 696c 7465 725f 7368  = self.filter_sh
-00000f70: 6966 7473 5f62 795f 6461 7465 2829 0a20  ifts_by_date(). 
-00000f80: 2020 2020 2020 2073 656c 662e 636c 6f73         self.clos
-00000f90: 6528 290a 0a20 2020 2064 6566 2063 6c6f  e()..    def clo
-00000fa0: 7365 2873 656c 6629 3a0a 2020 2020 2020  se(self):.      
-00000fb0: 2020 7365 6c66 2e63 6c69 656e 742e 636c    self.client.cl
-00000fc0: 6f73 6528 290a 0a20 2020 2064 6566 2067  ose()..    def g
-00000fd0: 6574 5f6c 6f67 696e 5f66 6f72 6d28 7365  et_login_form(se
-00000fe0: 6c66 293a 0a20 2020 2020 2020 2072 6573  lf):.        res
-00000ff0: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
-00001000: 656e 742e 6765 7428 7365 6c66 2e6c 6f67  ent.get(self.log
-00001010: 696e 5f75 726c 290a 0a20 2020 2020 2020  in_url)..       
-00001020: 2069 6620 7265 7370 6f6e 7365 2e73 7461   if response.sta
-00001030: 7475 735f 636f 6465 203d 3d20 3230 303a  tus_code == 200:
-00001040: 0a20 2020 2020 2020 2020 2020 2068 746d  .            htm
-00001050: 6c5f 636f 6e74 656e 7420 3d20 4265 6175  l_content = Beau
-00001060: 7469 6675 6c53 6f75 7028 7265 7370 6f6e  tifulSoup(respon
-00001070: 7365 2e74 6578 742c 2022 6874 6d6c 2e70  se.text, "html.p
-00001080: 6172 7365 7222 290a 0a20 2020 2020 2020  arser")..       
-00001090: 2020 2020 2072 6574 7572 6e20 6874 6d6c       return html
-000010a0: 5f63 6f6e 7465 6e74 2e66 696e 6428 2266  _content.find("f
-000010b0: 6f72 6d22 2c20 6d65 7468 6f64 3d22 706f  orm", method="po
-000010c0: 7374 2229 0a20 2020 2020 2020 2065 6c73  st").        els
-000010d0: 653a 0a20 2020 2020 2020 2020 2020 2070  e:.            p
-000010e0: 7269 6e74 2866 2246 6169 6c65 6420 746f  rint(f"Failed to
-000010f0: 2072 6574 7269 6576 6520 7468 6520 7061   retrieve the pa
-00001100: 6765 2e20 5374 6174 7573 2043 6f64 653a  ge. Status Code:
-00001110: 207b 7265 7370 6f6e 7365 2e73 7461 7475   {response.statu
-00001120: 735f 636f 6465 7d22 290a 0a20 2020 2064  s_code}")..    d
-00001130: 6566 2067 6574 5f61 7574 6865 6e74 6963  ef get_authentic
-00001140: 6974 795f 746f 6b65 6e28 7365 6c66 293a  ity_token(self):
-00001150: 0a20 2020 2020 2020 206c 6f67 696e 5f66  .        login_f
-00001160: 6f72 6d20 3d20 7365 6c66 2e67 6574 5f6c  orm = self.get_l
-00001170: 6f67 696e 5f66 6f72 6d28 290a 2020 2020  ogin_form().    
-00001180: 2020 2020 6966 206c 6f67 696e 5f66 6f72      if login_for
-00001190: 6d3a 0a20 2020 2020 2020 2020 2020 2069  m:.            i
-000011a0: 6e70 7574 5f65 6c65 6d65 6e74 203d 206c  nput_element = l
-000011b0: 6f67 696e 5f66 6f72 6d2e 6669 6e64 280a  ogin_form.find(.
-000011c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011d0: 2269 6e70 7574 222c 2061 7474 7273 3d7b  "input", attrs={
-000011e0: 226e 616d 6522 3a20 2261 7574 6865 6e74  "name": "authent
-000011f0: 6963 6974 795f 746f 6b65 6e22 2c20 2274  icity_token", "t
-00001200: 7970 6522 3a20 2268 6964 6465 6e22 7d0a  ype": "hidden"}.
-00001210: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-00001220: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00001230: 2069 6e70 7574 5f65 6c65 6d65 6e74 2e67   input_element.g
-00001240: 6574 2822 7661 6c75 6522 290a 2020 2020  et("value").    
-00001250: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00001260: 2020 2020 2020 7072 696e 7428 224e 6f20        print("No 
-00001270: 696e 7075 7420 656c 656d 656e 7420 7769  input element wi
-00001280: 7468 2060 6e61 6d65 3d27 6175 7468 656e  th `name='authen
-00001290: 7469 6369 7479 5f74 6f6b 656e 2760 2066  ticity_token'` f
-000012a0: 6f75 6e64 2e22 290a 0a20 2020 2064 6566  ound.")..    def
-000012b0: 206c 6f67 696e 2873 656c 6629 3a0a 2020   login(self):.  
-000012c0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-000012d0: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
-000012e0: 7428 7365 6c66 2e6c 6f67 696e 5f75 726c  t(self.login_url
-000012f0: 2c20 6461 7461 3d73 656c 662e 6c6f 6769  , data=self.logi
-00001300: 6e5f 7061 796c 6f61 6429 0a0a 2020 2020  n_payload)..    
-00001310: 2020 2020 6966 2072 6573 706f 6e73 652e      if response.
-00001320: 7374 6174 7573 5f63 6f64 6520 3d3d 2032  status_code == 2
-00001330: 3030 3a0a 2020 2020 2020 2020 2020 2020  00:.            
-00001340: 7072 696e 7428 6622 486f 6d65 6261 7365  print(f"Homebase
-00001350: 204c 6f67 696e 2053 7563 6365 7373 6675   Login Successfu
-00001360: 6c2e 2053 7461 7475 7320 436f 6465 3a20  l. Status Code: 
-00001370: 7b72 6573 706f 6e73 652e 7374 6174 7573  {response.status
-00001380: 5f63 6f64 657d 2229 0a20 2020 2020 2020  _code}").       
-00001390: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000013a0: 2020 2070 7269 6e74 2866 2248 6f6d 6562     print(f"Homeb
-000013b0: 6173 6520 4c6f 6769 6e20 6661 696c 6564  ase Login failed
-000013c0: 2e20 5374 6174 7573 2043 6f64 653a 207b  . Status Code: {
-000013d0: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
-000013e0: 636f 6465 7d22 290a 0a20 2020 2064 6566  code}")..    def
-000013f0: 2067 6574 5f73 6368 6564 756c 655f 726f   get_schedule_ro
-00001400: 7574 6528 7365 6c66 293a 0a20 2020 2020  ute(self):.     
-00001410: 2020 2072 6f75 7465 203d 2066 227b 7365     route = f"{se
-00001420: 6c66 2e62 6173 655f 7363 6865 6475 6c65  lf.base_schedule
-00001430: 5f75 726c 7d65 6e64 5f64 6174 653d 7b73  _url}end_date={s
-00001440: 656c 662e 656e 645f 6461 7465 2e74 6f5f  elf.end_date.to_
-00001450: 6461 7465 5f73 7472 696e 6728 297d 2673  date_string()}&s
-00001460: 7461 7274 5f64 6174 653d 7b73 656c 662e  tart_date={self.
-00001470: 7374 6172 745f 6461 7465 2e74 6f5f 6461  start_date.to_da
-00001480: 7465 5f73 7472 696e 6728 297d 220a 2020  te_string()}".  
-00001490: 2020 2020 2020 7072 696e 7428 726f 7574        print(rout
-000014a0: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
-000014b0: 6e20 726f 7574 650a 0a20 2020 2064 6566  n route..    def
-000014c0: 2067 6574 5f63 616c 656e 6461 725f 6a73   get_calendar_js
-000014d0: 6f6e 2873 656c 6629 3a0a 2020 2020 2020  on(self):.      
-000014e0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-000014f0: 662e 636c 6965 6e74 2e67 6574 2873 656c  f.client.get(sel
-00001500: 662e 6765 745f 7363 6865 6475 6c65 5f72  f.get_schedule_r
-00001510: 6f75 7465 2829 290a 0a20 2020 2020 2020  oute())..       
-00001520: 2069 6620 7265 7370 6f6e 7365 2e73 7461   if response.sta
-00001530: 7475 735f 636f 6465 203d 3d20 3230 303a  tus_code == 200:
-00001540: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00001550: 7572 6e20 7265 7370 6f6e 7365 2e74 6578  urn response.tex
-00001560: 740a 2020 2020 2020 2020 656c 7365 3a0a  t.        else:.
-00001570: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00001580: 7428 6622 4661 696c 6564 2074 6f20 7265  t(f"Failed to re
-00001590: 7472 6965 7665 2074 6865 2070 6167 652e  trieve the page.
-000015a0: 2053 7461 7475 7320 436f 6465 3a20 7b72   Status Code: {r
-000015b0: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
-000015c0: 6f64 657d 2229 0a0a 2020 2020 6465 6620  ode}")..    def 
-000015d0: 6765 745f 656d 706c 6f79 6565 5f69 6428  get_employee_id(
-000015e0: 7365 6c66 293a 0a20 2020 2020 2020 2066  self):.        f
-000015f0: 6f72 205f 2069 6e20 7365 6c66 2e63 616c  or _ in self.cal
-00001600: 656e 6461 725f 6a73 6f6e 5b22 696e 636c  endar_json["incl
-00001610: 7564 6564 225d 3a0a 2020 2020 2020 2020  uded"]:.        
-00001620: 2020 2020 6966 205f 5b22 7479 7065 225d      if _["type"]
-00001630: 203d 3d20 2275 7365 7222 2061 6e64 2028   == "user" and (
-00001640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001650: 2073 7472 285f 5b22 6174 7472 6962 7574   str(_["attribut
-00001660: 6573 225d 5b22 6669 7273 744e 616d 6522  es"]["firstName"
-00001670: 5d29 2e6c 6f77 6572 2829 0a20 2020 2020  ]).lower().     
-00001680: 2020 2020 2020 2020 2020 203d 3d20 7365             == se
-00001690: 6c66 2e65 6d70 6c6f 7965 655f 6669 7273  lf.employee_firs
-000016a0: 745f 6e61 6d65 2e6c 6f77 6572 2829 0a20  t_name.lower(). 
-000016b0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-000016c0: 6e64 2073 7472 285f 5b22 6174 7472 6962  nd str(_["attrib
-000016d0: 7574 6573 225d 5b22 6c61 7374 4e61 6d65  utes"]["lastName
-000016e0: 225d 292e 6c6f 7765 7228 290a 2020 2020  "]).lower().    
-000016f0: 2020 2020 2020 2020 2020 2020 3d3d 2073              == s
-00001700: 656c 662e 656d 706c 6f79 6565 5f6c 6173  elf.employee_las
-00001710: 745f 6e61 6d65 2e6c 6f77 6572 2829 0a20  t_name.lower(). 
-00001720: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-00001730: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00001740: 7475 726e 205f 5b22 6964 225d 0a0a 2020  turn _["id"]..  
-00001750: 2020 6465 6620 6765 745f 656d 706c 6f79    def get_employ
-00001760: 6565 5f6a 6f62 7328 7365 6c66 293a 0a20  ee_jobs(self):. 
-00001770: 2020 2020 2020 2072 6574 7572 6e20 5b0a         return [.
-00001780: 2020 2020 2020 2020 2020 2020 5f5b 2269              _["i
-00001790: 6422 5d0a 2020 2020 2020 2020 2020 2020  d"].            
-000017a0: 666f 7220 5f20 696e 2073 656c 662e 6361  for _ in self.ca
-000017b0: 6c65 6e64 6172 5f6a 736f 6e5b 2269 6e63  lendar_json["inc
-000017c0: 6c75 6465 6422 5d0a 2020 2020 2020 2020  luded"].        
-000017d0: 2020 2020 6966 205f 5b22 7479 7065 225d      if _["type"]
-000017e0: 203d 3d20 226a 6f62 220a 2020 2020 2020   == "job".      
-000017f0: 2020 2020 2020 616e 6420 5f5b 2272 656c        and _["rel
-00001800: 6174 696f 6e73 6869 7073 225d 5b22 7573  ationships"]["us
-00001810: 6572 225d 5b22 6461 7461 225d 5b22 6964  er"]["data"]["id
-00001820: 225d 203d 3d20 7365 6c66 2e65 6d70 6c6f  "] == self.emplo
-00001830: 7965 655f 6964 0a20 2020 2020 2020 205d  yee_id.        ]
-00001840: 0a0a 2020 2020 6465 6620 6765 745f 656d  ..    def get_em
-00001850: 706c 6f79 6565 5f73 6869 6674 7328 7365  ployee_shifts(se
-00001860: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-00001870: 7572 6e20 280a 2020 2020 2020 2020 2020  urn (.          
-00001880: 2020 5f0a 2020 2020 2020 2020 2020 2020    _.            
-00001890: 666f 7220 5f20 696e 2073 656c 662e 6361  for _ in self.ca
-000018a0: 6c65 6e64 6172 5f6a 736f 6e5b 2269 6e63  lendar_json["inc
-000018b0: 6c75 6465 6422 5d0a 2020 2020 2020 2020  luded"].        
-000018c0: 2020 2020 6966 205f 5b22 7479 7065 225d      if _["type"]
-000018d0: 203d 3d20 2273 6869 6674 220a 2020 2020   == "shift".    
-000018e0: 2020 2020 2020 2020 616e 6420 5f5b 2272          and _["r
-000018f0: 656c 6174 696f 6e73 6869 7073 225d 5b22  elationships"]["
-00001900: 6f77 6e65 7222 5d5b 2264 6174 6122 5d5b  owner"]["data"][
-00001910: 2269 6422 5d20 696e 2073 656c 662e 656d  "id"] in self.em
-00001920: 706c 6f79 6565 5f6a 6f62 730a 2020 2020  ployee_jobs.    
-00001930: 2020 2020 290a 0a20 2020 2064 6566 2069      )..    def i
-00001940: 6e69 7469 616c 697a 655f 6461 7465 5f72  nitialize_date_r
-00001950: 616e 6765 2873 656c 662c 2073 7461 7274  ange(self, start
-00001960: 5f64 6174 652c 2065 6e64 5f64 6174 6529  _date, end_date)
-00001970: 3a0a 2020 2020 2020 2020 6966 2073 7461  :.        if sta
-00001980: 7274 5f64 6174 6520 3d3d 2022 746f 6461  rt_date == "toda
-00001990: 7922 3a0a 2020 2020 2020 2020 2020 2020  y":.            
-000019a0: 7374 6172 7420 3d20 7065 6e64 756c 756d  start = pendulum
-000019b0: 2e6e 6f77 2829 2e73 7461 7274 5f6f 6628  .now().start_of(
-000019c0: 2264 6179 2229 0a20 2020 2020 2020 2065  "day").        e
-000019d0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000019e0: 2073 7461 7274 203d 2070 656e 6475 6c75   start = pendulu
-000019f0: 6d2e 7061 7273 6528 7374 6172 745f 6461  m.parse(start_da
-00001a00: 7465 292e 7374 6172 745f 6f66 2822 6461  te).start_of("da
-00001a10: 7922 290a 2020 2020 2020 2020 6966 2065  y").        if e
-00001a20: 6e64 5f64 6174 6520 3d3d 2022 746f 6461  nd_date == "toda
-00001a30: 7922 3a0a 2020 2020 2020 2020 2020 2020  y":.            
-00001a40: 656e 6420 3d20 7065 6e64 756c 756d 2e6e  end = pendulum.n
-00001a50: 6f77 2829 2e65 6e64 5f6f 6628 2264 6179  ow().end_of("day
-00001a60: 2229 0a20 2020 2020 2020 2065 6c73 653a  ").        else:
-00001a70: 0a20 2020 2020 2020 2020 2020 2065 6e64  .            end
-00001a80: 203d 2070 656e 6475 6c75 6d2e 7061 7273   = pendulum.pars
-00001a90: 6528 656e 645f 6461 7465 292e 656e 645f  e(end_date).end_
-00001aa0: 6f66 2822 6461 7922 290a 0a20 2020 2020  of("day")..     
-00001ab0: 2020 2069 6620 4c4f 4f4b 4148 4541 443a     if LOOKAHEAD:
-00001ac0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
-00001ad0: 7274 203d 2073 7461 7274 2e73 7461 7274  rt = start.start
-00001ae0: 5f6f 6628 2277 6565 6b22 290a 2020 2020  _of("week").    
-00001af0: 2020 2020 2020 2020 656e 6420 3d20 656e          end = en
-00001b00: 642e 6164 6428 6461 7973 3d4c 4f4f 4b41  d.add(days=LOOKA
-00001b10: 4845 4144 5f44 4159 5329 2e65 6e64 5f6f  HEAD_DAYS).end_o
-00001b20: 6628 2277 6565 6b22 290a 0a20 2020 2020  f("week")..     
-00001b30: 2020 2072 6574 7572 6e20 7374 6172 742c     return start,
-00001b40: 2065 6e64 0a0a 2020 2020 6465 6620 6669   end..    def fi
-00001b50: 6c74 6572 5f73 6869 6674 735f 6279 5f64  lter_shifts_by_d
-00001b60: 6174 6528 7365 6c66 293a 0a20 2020 2020  ate(self):.     
-00001b70: 2020 2072 6574 7572 6e20 280a 2020 2020     return (.    
-00001b80: 2020 2020 2020 2020 5f0a 2020 2020 2020          _.      
-00001b90: 2020 2020 2020 666f 7220 5f20 696e 2073        for _ in s
-00001ba0: 656c 662e 656d 706c 6f79 6565 5f73 6869  elf.employee_shi
-00001bb0: 6674 730a 2020 2020 2020 2020 2020 2020  fts.            
-00001bc0: 6966 2073 656c 662e 7374 6172 745f 6461  if self.start_da
-00001bd0: 7465 0a20 2020 2020 2020 2020 2020 203c  te.            <
-00001be0: 3d20 7065 6e64 756c 756d 2e70 6172 7365  = pendulum.parse
-00001bf0: 285f 5b22 6174 7472 6962 7574 6573 225d  (_["attributes"]
-00001c00: 5b22 7374 6172 7441 7422 5d29 0a20 2020  ["startAt"]).   
-00001c10: 2020 2020 2020 2020 203c 3d20 7365 6c66           <= self
-00001c20: 2e65 6e64 5f64 6174 650a 2020 2020 2020  .end_date.      
-00001c30: 2020 290a 0a20 2020 2064 6566 2067 6574    )..    def get
-00001c40: 5f65 6d70 6c6f 7965 655f 7368 6966 7473  _employee_shifts
-00001c50: 5f6a 736f 6e28 7365 6c66 293a 0a20 2020  _json(self):.   
-00001c60: 2020 2020 2073 6869 6674 7320 3d20 5b5d       shifts = []
-00001c70: 0a0a 2020 2020 2020 2020 666f 7220 5f20  ..        for _ 
-00001c80: 696e 2073 656c 662e 656d 706c 6f79 6565  in self.employee
-00001c90: 5f73 6869 6674 735f 696e 5f72 616e 6765  _shifts_in_range
-00001ca0: 3a0a 2020 2020 2020 2020 2020 2020 7368  :.            sh
-00001cb0: 6966 7420 3d20 7b0a 2020 2020 2020 2020  ift = {.        
-00001cc0: 2020 2020 2020 2020 2273 6869 6674 4964          "shiftId
-00001cd0: 223a 205f 5b22 6964 225d 2c0a 2020 2020  ": _["id"],.    
-00001ce0: 2020 2020 2020 2020 2020 2020 2266 6972              "fir
-00001cf0: 7374 4e61 6d65 223a 2073 656c 662e 656d  stName": self.em
-00001d00: 706c 6f79 6565 5f66 6972 7374 5f6e 616d  ployee_first_nam
-00001d10: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00001d20: 2020 2022 6c61 7374 4e61 6d65 223a 2073     "lastName": s
-00001d30: 656c 662e 656d 706c 6f79 6565 5f6c 6173  elf.employee_las
-00001d40: 745f 6e61 6d65 2c0a 2020 2020 2020 2020  t_name,.        
-00001d50: 2020 2020 2020 2020 226a 6f62 526f 6c65          "jobRole
-00001d60: 223a 205f 5b22 6174 7472 6962 7574 6573  ": _["attributes
-00001d70: 225d 5b22 726f 6c65 4e61 6d65 225d 2c0a  "]["roleName"],.
-00001d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001d90: 2273 6869 6674 4461 7465 223a 2070 656e  "shiftDate": pen
-00001da0: 6475 6c75 6d2e 7061 7273 6528 0a20 2020  dulum.parse(.   
-00001db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001dc0: 205f 5b22 6174 7472 6962 7574 6573 225d   _["attributes"]
-00001dd0: 5b22 7374 6172 7441 7422 5d0a 2020 2020  ["startAt"].    
-00001de0: 2020 2020 2020 2020 2020 2020 292e 746f              ).to
-00001df0: 5f64 6174 655f 7374 7269 6e67 2829 2c0a  _date_string(),.
-00001e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e10: 2273 7461 7274 5469 6d65 223a 2070 656e  "startTime": pen
-00001e20: 6475 6c75 6d2e 7061 7273 6528 0a20 2020  dulum.parse(.   
-00001e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e40: 205f 5b22 6174 7472 6962 7574 6573 225d   _["attributes"]
-00001e50: 5b22 7374 6172 7441 7422 5d0a 2020 2020  ["startAt"].    
-00001e60: 2020 2020 2020 2020 2020 2020 292e 746f              ).to
-00001e70: 5f74 696d 655f 7374 7269 6e67 2829 2c0a  _time_string(),.
-00001e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e90: 2265 6e64 5469 6d65 223a 2070 656e 6475  "endTime": pendu
-00001ea0: 6c75 6d2e 7061 7273 6528 5f5b 2261 7474  lum.parse(_["att
-00001eb0: 7269 6275 7465 7322 5d5b 2265 6e64 4174  ributes"]["endAt
-00001ec0: 225d 292e 746f 5f74 696d 655f 7374 7269  "]).to_time_stri
-00001ed0: 6e67 2829 2c0a 2020 2020 2020 2020 2020  ng(),.          
-00001ee0: 2020 7d0a 0a20 2020 2020 2020 2020 2020    }..           
-00001ef0: 2073 6869 6674 732e 6170 7065 6e64 2873   shifts.append(s
-00001f00: 6869 6674 290a 0a20 2020 2020 2020 2072  hift)..        r
-00001f10: 6574 7572 6e20 6a73 6f6e 2e64 756d 7073  eturn json.dumps
-00001f20: 2873 6869 6674 7329 0a0a 0a63 6c61 7373  (shifts)...class
-00001f30: 2048 6f6d 6562 6173 6543 616c 656e 6461   HomebaseCalenda
-00001f40: 7253 796e 633a 0a20 2020 2064 6566 205f  rSync:.    def _
-00001f50: 5f69 6e69 745f 5f28 7365 6c66 2920 2d3e  _init__(self) ->
-00001f60: 204e 6f6e 653a 0a20 2020 2020 2020 2063   None:.        c
-00001f70: 6f6e 6669 672e 4d45 5441 203d 204d 6574  onfig.META = Met
-00001f80: 6164 6174 612e 6d65 7461 6461 7461 5f73  adata.metadata_s
-00001f90: 696e 676c 6574 6f6e 5f66 6163 746f 7279  ingleton_factory
-00001fa0: 2829 0a20 2020 2020 2020 2063 6f6e 6669  ().        confi
-00001fb0: 672e 4d45 5441 2e63 6865 636b 5f66 6f72  g.META.check_for
-00001fc0: 5f63 6c69 656e 745f 7365 6372 6574 5f61  _client_secret_a
-00001fd0: 6e64 5f69 6d70 6f72 7428 290a 2020 2020  nd_import().    
-00001fe0: 2020 2020 636f 6e66 6967 2e47 4f4f 474c      config.GOOGL
-00001ff0: 4520 3d20 476f 6f67 6c65 436c 6965 6e74  E = GoogleClient
-00002000: 2829 0a20 2020 2020 2020 2073 6574 7570  ().        setup
-00002010: 5f64 6174 6162 6173 6528 290a 2020 2020  _database().    
-00002020: 2020 2020 7365 6c66 2e73 6372 6170 6572      self.scraper
-00002030: 203d 2048 6f6d 6562 6173 6553 6368 6564   = HomebaseSched
-00002040: 756c 6553 6372 6170 6572 280a 2020 2020  uleScraper(.    
-00002050: 2020 2020 2020 2020 484f 4d45 4241 5345          HOMEBASE
-00002060: 5f55 5345 524e 414d 452c 0a20 2020 2020  _USERNAME,.     
-00002070: 2020 2020 2020 2048 4f4d 4542 4153 455f         HOMEBASE_
-00002080: 5041 5353 574f 5244 2c0a 2020 2020 2020  PASSWORD,.      
-00002090: 2020 2020 2020 454d 504c 4f59 4545 5f46        EMPLOYEE_F
-000020a0: 4952 5354 4e41 4d45 2c0a 2020 2020 2020  IRSTNAME,.      
-000020b0: 2020 2020 2020 454d 504c 4f59 4545 5f4c        EMPLOYEE_L
-000020c0: 4153 544e 414d 452c 0a20 2020 2020 2020  ASTNAME,.       
-000020d0: 2020 2020 2053 5441 5254 5f44 4154 452c       START_DATE,
-000020e0: 0a20 2020 2020 2020 2020 2020 2045 4e44  .            END
-000020f0: 5f44 4154 452c 0a20 2020 2020 2020 2029  _DATE,.        )
-00002100: 0a20 2020 2020 2020 2073 656c 662e 7072  .        self.pr
-00002110: 696d 6172 795f 6361 6c65 6e64 6172 203d  imary_calendar =
-00002120: 2063 6f6e 6669 672e 474f 4f47 4c45 2e67   config.GOOGLE.g
-00002130: 6574 5f70 7269 6d61 7279 5f63 616c 656e  et_primary_calen
-00002140: 6461 7228 290a 2020 2020 2020 2020 7365  dar().        se
-00002150: 6c66 2e70 7269 6d61 7279 5f63 616c 656e  lf.primary_calen
-00002160: 6461 725f 6576 656e 7473 203d 2063 6f6e  dar_events = con
-00002170: 6669 672e 474f 4f47 4c45 2e67 6574 5f63  fig.GOOGLE.get_c
-00002180: 616c 656e 6461 725f 6576 656e 7473 280a  alendar_events(.
-00002190: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000021a0: 2e70 7269 6d61 7279 5f63 616c 656e 6461  .primary_calenda
-000021b0: 725b 2269 6422 5d0a 2020 2020 2020 2020  r["id"].        
-000021c0: 290a 2020 2020 2020 2020 7365 6c66 2e72  ).        self.r
-000021d0: 656d 6f74 655f 686f 6d65 6261 7365 5f73  emote_homebase_s
-000021e0: 6869 6674 7320 3d20 6a73 6f6e 2e6c 6f61  hifts = json.loa
-000021f0: 6473 280a 2020 2020 2020 2020 2020 2020  ds(.            
-00002200: 7365 6c66 2e73 6372 6170 6572 2e67 6574  self.scraper.get
-00002210: 5f65 6d70 6c6f 7965 655f 7368 6966 7473  _employee_shifts
-00002220: 5f6a 736f 6e28 290a 2020 2020 2020 2020  _json().        
-00002230: 290a 0a20 2020 2064 6566 205f 5f63 616c  )..    def __cal
-00002240: 6c5f 5f28 7365 6c66 293a 0a20 2020 2020  l__(self):.     
-00002250: 2020 2073 656c 662e 7570 6461 7465 5f65     self.update_e
-00002260: 7665 6e74 735f 6462 5f66 726f 6d5f 7265  vents_db_from_re
-00002270: 6d6f 7465 2829 0a20 2020 2020 2020 2073  mote().        s
-00002280: 656c 662e 6164 645f 686f 6d65 6261 7365  elf.add_homebase
-00002290: 5f73 6869 6674 7328 290a 2020 2020 2020  _shifts().      
-000022a0: 2020 636f 6e66 6967 2e44 422e 636c 6f73    config.DB.clos
-000022b0: 6528 290a 0a20 2020 2064 6566 2067 6574  e()..    def get
-000022c0: 5f65 7665 6e74 5f68 6173 6828 7365 6c66  _event_hash(self
-000022d0: 2c20 6576 656e 743a 2064 6963 7429 202d  , event: dict) -
-000022e0: 3e20 7374 723a 0a20 2020 2020 2020 2065  > str:.        e
-000022f0: 7665 6e74 5f73 7472 203d 206a 736f 6e2e  vent_str = json.
-00002300: 6475 6d70 7328 6576 656e 742c 2073 6f72  dumps(event, sor
-00002310: 745f 6b65 7973 3d54 7275 6529 0a20 2020  t_keys=True).   
-00002320: 2020 2020 2072 6574 7572 6e20 6861 7368       return hash
-00002330: 6c69 622e 7368 6135 3132 2865 7665 6e74  lib.sha512(event
-00002340: 5f73 7472 2e65 6e63 6f64 6528 2275 7466  _str.encode("utf
-00002350: 2d38 2229 292e 6865 7864 6967 6573 7428  -8")).hexdigest(
-00002360: 290a 0a20 2020 2064 6566 2075 7064 6174  )..    def updat
-00002370: 655f 6576 656e 7473 5f64 625f 6672 6f6d  e_events_db_from
-00002380: 5f72 656d 6f74 6528 7365 6c66 293a 0a20  _remote(self):. 
-00002390: 2020 2020 2020 2063 6f6e 6e65 6374 5f64         connect_d
-000023a0: 6174 6162 6173 6528 290a 2020 2020 2020  atabase().      
-000023b0: 2020 7265 6d6f 7465 5f65 7665 6e74 7320    remote_events 
-000023c0: 3d20 7365 7428 290a 0a20 2020 2020 2020  = set()..       
-000023d0: 2066 6f72 2065 7665 6e74 2069 6e20 7365   for event in se
-000023e0: 6c66 2e70 7269 6d61 7279 5f63 616c 656e  lf.primary_calen
-000023f0: 6461 725f 6576 656e 7473 3a0a 2020 2020  dar_events:.    
-00002400: 2020 2020 2020 2020 6576 656e 745f 6964          event_id
-00002410: 203d 2065 7665 6e74 5b22 6964 225d 0a20   = event["id"]. 
-00002420: 2020 2020 2020 2020 2020 2065 7665 6e74             event
-00002430: 5f68 6173 6820 3d20 7365 6c66 2e67 6574  _hash = self.get
-00002440: 5f65 7665 6e74 5f68 6173 6828 6576 656e  _event_hash(even
-00002450: 7429 0a20 2020 2020 2020 2020 2020 2072  t).            r
-00002460: 656d 6f74 655f 6576 656e 7473 2e61 6464  emote_events.add
-00002470: 2865 7665 6e74 5f69 6429 0a20 2020 2020  (event_id).     
-00002480: 2020 2020 2020 2066 726f 6d5f 686f 6d65         from_home
-00002490: 6261 7365 203d 2030 2020 2320 302f 3120  base = 0  # 0/1 
-000024a0: 2d20 4661 6c73 652f 5472 7565 0a20 2020  - False/True.   
-000024b0: 2020 2020 2020 2020 2068 6f6d 6562 6173           homebas
-000024c0: 655f 7368 6966 745f 6964 203d 204e 6f6e  e_shift_id = Non
-000024d0: 650a 0a20 2020 2020 2020 2020 2020 2068  e..            h
-000024e0: 6f6d 6562 6173 655f 6576 656e 7420 3d20  omebase_event = 
-000024f0: 6576 656e 742e 6765 7428 2273 6f75 7263  event.get("sourc
-00002500: 6522 290a 2020 2020 2020 2020 2020 2020  e").            
-00002510: 6966 2068 6f6d 6562 6173 655f 6576 656e  if homebase_even
-00002520: 743a 0a20 2020 2020 2020 2020 2020 2020  t:.             
-00002530: 2020 2073 6869 6674 5f69 645f 736f 7572     shift_id_sour
-00002540: 6365 203d 2068 6f6d 6562 6173 655f 6576  ce = homebase_ev
-00002550: 656e 745b 2274 6974 6c65 225d 2e73 706c  ent["title"].spl
-00002560: 6974 2822 2d22 290a 0a20 2020 2020 2020  it("-")..       
-00002570: 2020 2020 2020 2020 2069 6620 6c65 6e28           if len(
-00002580: 7368 6966 745f 6964 5f73 6f75 7263 6529  shift_id_source)
-00002590: 203e 2031 2061 6e64 2073 6869 6674 5f69   > 1 and shift_i
-000025a0: 645f 736f 7572 6365 5b30 5d20 3d3d 2022  d_source[0] == "
-000025b0: 686f 6d65 6261 7365 5368 6966 7449 6422  homebaseShiftId"
-000025c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000025d0: 2020 2020 2020 686f 6d65 6261 7365 5f73        homebase_s
-000025e0: 6869 6674 5f69 6420 3d20 7368 6966 745f  hift_id = shift_
-000025f0: 6964 5f73 6f75 7263 655b 315d 0a20 2020  id_source[1].   
-00002600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002610: 2066 726f 6d5f 686f 6d65 6261 7365 203d   from_homebase =
-00002620: 2031 0a0a 2020 2020 2020 2020 2020 2020   1..            
-00002630: 636f 6e66 6967 2e44 425f 4355 5253 4f52  config.DB_CURSOR
-00002640: 2e65 7865 6375 7465 280a 2020 2020 2020  .execute(.      
-00002650: 2020 2020 2020 2020 2020 2253 454c 4543            "SELEC
-00002660: 5420 6861 7368 2046 524f 4d20 6576 656e  T hash FROM even
-00002670: 7473 2057 4845 5245 2065 7665 6e74 5f69  ts WHERE event_i
-00002680: 6420 3d20 3f22 2c20 2865 7665 6e74 5f69  d = ?", (event_i
-00002690: 642c 290a 2020 2020 2020 2020 2020 2020  d,).            
-000026a0: 290a 2020 2020 2020 2020 2020 2020 726f  ).            ro
-000026b0: 7720 3d20 636f 6e66 6967 2e44 425f 4355  w = config.DB_CU
-000026c0: 5253 4f52 2e66 6574 6368 6f6e 6528 290a  RSOR.fetchone().
-000026d0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000026e0: 726f 7720 6973 204e 6f6e 653a 0a20 2020  row is None:.   
-000026f0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00002700: 6669 672e 4442 5f43 5552 534f 522e 6578  fig.DB_CURSOR.ex
-00002710: 6563 7574 6528 0a20 2020 2020 2020 2020  ecute(.         
-00002720: 2020 2020 2020 2020 2020 2022 494e 5345             "INSE
-00002730: 5254 2049 4e54 4f20 6576 656e 7473 2028  RT INTO events (
-00002740: 6576 656e 745f 6964 2c20 6861 7368 2c20  event_id, hash, 
-00002750: 6672 6f6d 5f68 6f6d 6562 6173 652c 2068  from_homebase, h
-00002760: 6f6d 6562 6173 655f 7368 6966 745f 6964  omebase_shift_id
-00002770: 2920 5641 4c55 4553 2028 3f2c 203f 2c20  ) VALUES (?, ?, 
-00002780: 3f2c 203f 2922 2c0a 2020 2020 2020 2020  ?, ?)",.        
-00002790: 2020 2020 2020 2020 2020 2020 2865 7665              (eve
-000027a0: 6e74 5f69 642c 2065 7665 6e74 5f68 6173  nt_id, event_has
-000027b0: 682c 2066 726f 6d5f 686f 6d65 6261 7365  h, from_homebase
-000027c0: 2c20 686f 6d65 6261 7365 5f73 6869 6674  , homebase_shift
-000027d0: 5f69 6429 2c0a 2020 2020 2020 2020 2020  _id),.          
-000027e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000027f0: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-00002800: 6622 4e65 7720 6576 656e 7420 6164 6465  f"New event adde
-00002810: 643a 207b 6576 656e 745f 6964 7d22 290a  d: {event_id}").
-00002820: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00002830: 2072 6f77 5b30 5d20 213d 2065 7665 6e74   row[0] != event
-00002840: 5f68 6173 683a 0a20 2020 2020 2020 2020  _hash:.         
-00002850: 2020 2020 2020 2063 6f6e 6669 672e 4442         config.DB
-00002860: 5f43 5552 534f 522e 6578 6563 7574 6528  _CURSOR.execute(
-00002870: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002880: 2020 2020 2022 5550 4441 5445 2065 7665       "UPDATE eve
-00002890: 6e74 7320 5345 5420 6861 7368 203d 203f  nts SET hash = ?
-000028a0: 2057 4845 5245 2065 7665 6e74 5f69 6420   WHERE event_id 
-000028b0: 3d20 3f22 2c0a 2020 2020 2020 2020 2020  = ?",.          
-000028c0: 2020 2020 2020 2020 2020 2865 7665 6e74            (event
-000028d0: 5f68 6173 682c 2065 7665 6e74 5f69 6429  _hash, event_id)
-000028e0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000028f0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00002900: 2020 2020 7072 696e 7428 6622 4576 656e      print(f"Even
-00002910: 7420 7570 6461 7465 643a 207b 6576 656e  t updated: {even
-00002920: 745f 6964 7d22 290a 2020 2020 2020 2020  t_id}").        
-00002930: 2020 2020 636f 6e66 6967 2e44 422e 636f      config.DB.co
-00002940: 6d6d 6974 2829 0a0a 2020 2020 2020 2020  mmit()..        
-00002950: 2320 5072 756e 6520 4c6f 6361 6c20 4576  # Prune Local Ev
-00002960: 656e 7473 2074 6f20 6d61 7463 6820 7265  ents to match re
-00002970: 6d6f 7465 0a20 2020 2020 2020 2063 6f6e  mote.        con
-00002980: 6669 672e 4442 5f43 5552 534f 522e 6578  fig.DB_CURSOR.ex
-00002990: 6563 7574 6528 2253 454c 4543 5420 6576  ecute("SELECT ev
-000029a0: 656e 745f 6964 2046 524f 4d20 6576 656e  ent_id FROM even
-000029b0: 7473 2229 0a20 2020 2020 2020 206c 6f63  ts").        loc
-000029c0: 616c 5f65 7665 6e74 7320 3d20 7b72 6f77  al_events = {row
-000029d0: 5b30 5d20 666f 7220 726f 7720 696e 2063  [0] for row in c
-000029e0: 6f6e 6669 672e 4442 5f43 5552 534f 522e  onfig.DB_CURSOR.
-000029f0: 6665 7463 6861 6c6c 2829 7d0a 2020 2020  fetchall()}.    
-00002a00: 2020 2020 6576 656e 7473 5f74 6f5f 6465      events_to_de
-00002a10: 6c65 7465 203d 206c 6f63 616c 5f65 7665  lete = local_eve
-00002a20: 6e74 7320 2d20 7265 6d6f 7465 5f65 7665  nts - remote_eve
-00002a30: 6e74 730a 2020 2020 2020 2020 666f 7220  nts.        for 
-00002a40: 6576 656e 745f 6964 2069 6e20 6576 656e  event_id in even
-00002a50: 7473 5f74 6f5f 6465 6c65 7465 3a0a 2020  ts_to_delete:.  
-00002a60: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-00002a70: 2e44 425f 4355 5253 4f52 2e65 7865 6375  .DB_CURSOR.execu
-00002a80: 7465 280a 2020 2020 2020 2020 2020 2020  te(.            
-00002a90: 2020 2020 2244 454c 4554 4520 4652 4f4d      "DELETE FROM
-00002aa0: 2065 7665 6e74 7320 5748 4552 4520 6576   events WHERE ev
-00002ab0: 656e 745f 6964 203d 203f 222c 2028 6576  ent_id = ?", (ev
-00002ac0: 656e 745f 6964 2c29 0a20 2020 2020 2020  ent_id,).       
-00002ad0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00002ae0: 2020 2070 7269 6e74 2866 2245 7665 6e74     print(f"Event
-00002af0: 2064 656c 6574 6564 3a20 7b65 7665 6e74   deleted: {event
-00002b00: 5f69 647d 2229 0a0a 2020 2020 2020 2020  _id}")..        
-00002b10: 636f 6e66 6967 2e44 422e 636f 6d6d 6974  config.DB.commit
-00002b20: 2829 0a0a 2020 2020 6465 6620 6765 745f  ()..    def get_
-00002b30: 686f 6d65 6261 7365 5f65 7665 6e74 7328  homebase_events(
-00002b40: 7365 6c66 2920 2d3e 2073 6574 3a0a 2020  self) -> set:.  
-00002b50: 2020 2020 2020 686f 6d65 6261 7365 5f65        homebase_e
-00002b60: 7665 6e74 7320 3d20 7365 7428 290a 0a20  vents = set().. 
-00002b70: 2020 2020 2020 2066 6f72 205f 2069 6e20         for _ in 
-00002b80: 7365 6c66 2e70 7269 6d61 7279 5f63 616c  self.primary_cal
-00002b90: 656e 6461 725f 6576 656e 7473 3a0a 2020  endar_events:.  
-00002ba0: 2020 2020 2020 2020 2020 6966 205f 2e67            if _.g
-00002bb0: 6574 2822 736f 7572 6365 2229 3a0a 2020  et("source"):.  
-00002bc0: 2020 2020 2020 2020 2020 2020 2020 7368                sh
-00002bd0: 6966 745f 6964 5f73 6f75 7263 6520 3d20  ift_id_source = 
-00002be0: 5f5b 2273 6f75 7263 6522 5d5b 2274 6974  _["source"]["tit
-00002bf0: 6c65 225d 2e73 706c 6974 2822 2d22 290a  le"].split("-").
-00002c00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002c10: 2069 6620 6c65 6e28 7368 6966 745f 6964   if len(shift_id
-00002c20: 5f73 6f75 7263 6529 203e 2031 2061 6e64  _source) > 1 and
-00002c30: 2073 6869 6674 5f69 645f 736f 7572 6365   shift_id_source
-00002c40: 5b30 5d20 3d3d 2022 686f 6d65 6261 7365  [0] == "homebase
-00002c50: 5368 6966 7449 6422 3a0a 2020 2020 2020  ShiftId":.      
-00002c60: 2020 2020 2020 2020 2020 2020 2020 686f                ho
-00002c70: 6d65 6261 7365 5f65 7665 6e74 732e 6164  mebase_events.ad
-00002c80: 6428 7368 6966 745f 6964 5f73 6f75 7263  d(shift_id_sourc
-00002c90: 655b 315d 290a 2020 2020 2020 2020 7265  e[1]).        re
-00002ca0: 7475 726e 2068 6f6d 6562 6173 655f 6576  turn homebase_ev
-00002cb0: 656e 7473 0a0a 2020 2020 6465 6620 6164  ents..    def ad
-00002cc0: 645f 686f 6d65 6261 7365 5f73 6869 6674  d_homebase_shift
-00002cd0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-00002ce0: 2063 6f6e 6e65 6374 5f64 6174 6162 6173   connect_databas
-00002cf0: 6528 290a 2020 2020 2020 2020 7265 6d6f  e().        remo
-00002d00: 7465 5f73 6869 6674 7320 3d20 7b5f 5b22  te_shifts = {_["
-00002d10: 7368 6966 7449 6422 5d20 666f 7220 5f20  shiftId"] for _ 
-00002d20: 696e 2073 656c 662e 7265 6d6f 7465 5f68  in self.remote_h
-00002d30: 6f6d 6562 6173 655f 7368 6966 7473 7d0a  omebase_shifts}.
-00002d40: 2020 2020 2020 2020 686f 6d65 6261 7365          homebase
-00002d50: 5f65 7665 6e74 7320 3d20 7365 6c66 2e67  _events = self.g
-00002d60: 6574 5f68 6f6d 6562 6173 655f 6576 656e  et_homebase_even
-00002d70: 7473 2829 0a0a 2020 2020 2020 2020 666f  ts()..        fo
-00002d80: 7220 7368 6966 7420 696e 2073 656c 662e  r shift in self.
-00002d90: 7265 6d6f 7465 5f68 6f6d 6562 6173 655f  remote_homebase_
-00002da0: 7368 6966 7473 3a0a 2020 2020 2020 2020  shifts:.        
-00002db0: 2020 2020 7368 6966 745f 6861 7368 203d      shift_hash =
-00002dc0: 2073 656c 662e 6765 745f 6576 656e 745f   self.get_event_
-00002dd0: 6861 7368 2873 6869 6674 290a 2020 2020  hash(shift).    
-00002de0: 2020 2020 2020 2020 636f 6e66 6967 2e44          config.D
-00002df0: 425f 4355 5253 4f52 2e65 7865 6375 7465  B_CURSOR.execute
-00002e00: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00002e10: 2020 2253 454c 4543 5420 6861 7368 2046    "SELECT hash F
-00002e20: 524f 4d20 7368 6966 7473 2057 4845 5245  ROM shifts WHERE
-00002e30: 2068 6f6d 6562 6173 655f 7368 6966 745f   homebase_shift_
-00002e40: 6964 203d 203f 222c 0a20 2020 2020 2020  id = ?",.       
-00002e50: 2020 2020 2020 2020 2028 7368 6966 745b           (shift[
-00002e60: 2273 6869 6674 4964 225d 2c29 2c0a 2020  "shiftId"],),.  
-00002e70: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00002e80: 2020 2020 2020 2020 726f 7720 3d20 636f          row = co
-00002e90: 6e66 6967 2e44 425f 4355 5253 4f52 2e66  nfig.DB_CURSOR.f
-00002ea0: 6574 6368 6f6e 6528 290a 0a20 2020 2020  etchone()..     
-00002eb0: 2020 2020 2020 206c 6f63 616c 5f74 696d         local_tim
-00002ec0: 6520 3d20 7065 6e64 756c 756d 2e6e 6f77  e = pendulum.now
-00002ed0: 2829 0a20 2020 2020 2020 2020 2020 2073  ().            s
-00002ee0: 7461 7274 203d 2070 656e 6475 6c75 6d2e  tart = pendulum.
-00002ef0: 7061 7273 6528 0a20 2020 2020 2020 2020  parse(.         
-00002f00: 2020 2020 2020 2066 227b 7368 6966 745b         f"{shift[
-00002f10: 2273 6869 6674 4461 7465 225d 7d20 7b73  "shiftDate"]} {s
-00002f20: 6869 6674 5b22 7374 6172 7454 696d 6522  hift["startTime"
-00002f30: 5d7d 222c 0a20 2020 2020 2020 2020 2020  ]}",.           
-00002f40: 2020 2020 2074 7a3d 6c6f 6361 6c5f 7469       tz=local_ti
-00002f50: 6d65 2e74 696d 657a 6f6e 655f 6e61 6d65  me.timezone_name
-00002f60: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-00002f70: 2020 2020 2020 2020 2020 2020 656e 6420              end 
-00002f80: 3d20 7065 6e64 756c 756d 2e70 6172 7365  = pendulum.parse
-00002f90: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00002fa0: 2020 6622 7b73 6869 6674 5b22 7368 6966    f"{shift["shif
-00002fb0: 7444 6174 6522 5d7d 207b 7368 6966 745b  tDate"]} {shift[
-00002fc0: 2265 6e64 5469 6d65 225d 7d22 2c20 747a  "endTime"]}", tz
-00002fd0: 3d6c 6f63 616c 5f74 696d 652e 7469 6d65  =local_time.time
-00002fe0: 7a6f 6e65 5f6e 616d 650a 2020 2020 2020  zone_name.      
-00002ff0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00003000: 2020 2020 6576 656e 7420 3d20 7b0a 2020      event = {.  
-00003010: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00003020: 756d 6d61 7279 223a 2066 2248 6f6d 6562  ummary": f"Homeb
-00003030: 6173 6520 2d20 7b73 6869 6674 5b22 6a6f  ase - {shift["jo
-00003040: 6252 6f6c 6522 5d7d 222c 0a20 2020 2020  bRole"]}",.     
-00003050: 2020 2020 2020 2020 2020 2022 6465 7363             "desc
-00003060: 7269 7074 696f 6e22 3a20 6622 7b73 6869  ription": f"{shi
-00003070: 6674 5b22 6669 7273 744e 616d 6522 5d7d  ft["firstName"]}
-00003080: 207b 7368 6966 745b 226c 6173 744e 616d   {shift["lastNam
-00003090: 6522 5d7d 222c 0a20 2020 2020 2020 2020  e"]}",.         
-000030a0: 2020 2020 2020 2022 7374 6172 7422 3a20         "start": 
-000030b0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-000030c0: 2020 2020 2020 2264 6174 6554 696d 6522        "dateTime"
-000030d0: 3a20 7374 6172 742e 746f 5f69 736f 3836  : start.to_iso86
-000030e0: 3031 5f73 7472 696e 6728 292c 0a20 2020  01_string(),.   
-000030f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003100: 2022 7469 6d65 5a6f 6e65 223a 206c 6f63   "timeZone": loc
-00003110: 616c 5f74 696d 652e 7469 6d65 7a6f 6e65  al_time.timezone
-00003120: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-00003130: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
-00003140: 2020 2020 2020 2020 2020 2265 6e64 223a            "end":
-00003150: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00003160: 2020 2020 2020 2022 6461 7465 5469 6d65         "dateTime
-00003170: 223a 2065 6e64 2e74 6f5f 6973 6f38 3630  ": end.to_iso860
-00003180: 315f 7374 7269 6e67 2829 2c0a 2020 2020  1_string(),.    
-00003190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000031a0: 2274 696d 655a 6f6e 6522 3a20 6c6f 6361  "timeZone": loca
-000031b0: 6c5f 7469 6d65 2e74 696d 657a 6f6e 655f  l_time.timezone_
-000031c0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-000031d0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-000031e0: 2020 2020 2020 2020 2022 736f 7572 6365           "source
-000031f0: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
-00003200: 2020 2020 2020 2020 2022 7469 746c 6522           "title"
-00003210: 3a20 6622 686f 6d65 6261 7365 5368 6966  : f"homebaseShif
-00003220: 7449 642d 7b73 6869 6674 5b22 7368 6966  tId-{shift["shif
-00003230: 7449 6422 5d7d 222c 0a20 2020 2020 2020  tId"]}",.       
-00003240: 2020 2020 2020 2020 2020 2020 2022 7572               "ur
-00003250: 6c22 3a20 2268 7474 7073 3a2f 2f61 7070  l": "https://app
-00003260: 2e6a 6f69 6e68 6f6d 6562 6173 652e 636f  .joinhomebase.co
-00003270: 6d2f 222c 0a20 2020 2020 2020 2020 2020  m/",.           
-00003280: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00003290: 2020 2020 7d0a 0a20 2020 2020 2020 2020      }..         
-000032a0: 2020 2069 6620 726f 7720 6973 204e 6f6e     if row is Non
-000032b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000032c0: 2020 2063 6f6e 6669 672e 4442 5f43 5552     config.DB_CUR
-000032d0: 534f 522e 6578 6563 7574 6528 0a20 2020  SOR.execute(.   
-000032e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000032f0: 2022 494e 5345 5254 2049 4e54 4f20 7368   "INSERT INTO sh
-00003300: 6966 7473 2028 686f 6d65 6261 7365 5f73  ifts (homebase_s
-00003310: 6869 6674 5f69 642c 2068 6173 6829 2056  hift_id, hash) V
-00003320: 414c 5545 5320 283f 2c20 3f29 222c 0a20  ALUES (?, ?)",. 
-00003330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003340: 2020 2028 7368 6966 745b 2273 6869 6674     (shift["shift
-00003350: 4964 225d 2c20 7368 6966 745f 6861 7368  Id"], shift_hash
-00003360: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00003370: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00003380: 2020 2020 2070 7269 6e74 2866 224e 6577       print(f"New
-00003390: 2073 6869 6674 2061 6464 6564 3a20 7b73   shift added: {s
-000033a0: 6869 6674 5f68 6173 687d 2229 0a20 2020  hift_hash}").   
-000033b0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-000033c0: 6669 672e 4442 2e63 6f6d 6d69 7428 290a  fig.DB.commit().
-000033d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000033e0: 2063 6f6e 6669 672e 4442 5f43 5552 534f   config.DB_CURSO
-000033f0: 522e 6578 6563 7574 6528 0a20 2020 2020  R.execute(.     
-00003400: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00003410: 5345 4c45 4354 2068 6173 6820 4652 4f4d  SELECT hash FROM
-00003420: 2065 7665 6e74 7320 5748 4552 4520 686f   events WHERE ho
-00003430: 6d65 6261 7365 5f73 6869 6674 5f69 6420  mebase_shift_id 
-00003440: 3d20 3f22 2c0a 2020 2020 2020 2020 2020  = ?",.          
-00003450: 2020 2020 2020 2020 2020 2873 6869 6674            (shift
-00003460: 5b22 7368 6966 7449 6422 5d2c 292c 0a20  ["shiftId"],),. 
-00003470: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00003480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003490: 2072 6f77 203d 2063 6f6e 6669 672e 4442   row = config.DB
-000034a0: 5f43 5552 534f 522e 6665 7463 686f 6e65  _CURSOR.fetchone
-000034b0: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-000034c0: 2020 2020 6966 2072 6f77 2069 7320 4e6f      if row is No
-000034d0: 6e65 2061 6e64 2073 6869 6674 5b22 7368  ne and shift["sh
-000034e0: 6966 7449 6422 5d20 6e6f 7420 696e 2068  iftId"] not in h
-000034f0: 6f6d 6562 6173 655f 6576 656e 7473 3a0a  omebase_events:.
-00003500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003510: 2020 2020 636f 6e66 6967 2e47 4f4f 474c      config.GOOGL
-00003520: 452e 6372 6561 7465 5f6e 6577 5f65 7665  E.create_new_eve
-00003530: 6e74 2873 656c 662e 7072 696d 6172 795f  nt(self.primary_
-00003540: 6361 6c65 6e64 6172 5b22 6964 225d 2c20  calendar["id"], 
-00003550: 6576 656e 7429 0a0a 2020 2020 2020 2020  event)..        
-00003560: 2020 2020 656c 6966 2072 6f77 5b30 5d20      elif row[0] 
-00003570: 213d 2073 6869 6674 5f68 6173 683a 0a20  != shift_hash:. 
-00003580: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00003590: 6f6e 6669 672e 4442 5f43 5552 534f 522e  onfig.DB_CURSOR.
-000035a0: 6578 6563 7574 6528 0a20 2020 2020 2020  execute(.       
-000035b0: 2020 2020 2020 2020 2020 2020 2022 5550               "UP
-000035c0: 4441 5445 2073 6869 6674 7320 5345 5420  DATE shifts SET 
-000035d0: 6861 7368 203d 203f 2057 4845 5245 2068  hash = ? WHERE h
-000035e0: 6f6d 6562 6173 655f 7368 6966 745f 6964  omebase_shift_id
-000035f0: 203d 203f 222c 0a20 2020 2020 2020 2020   = ?",.         
-00003600: 2020 2020 2020 2020 2020 2028 7368 6966             (shif
-00003610: 745f 6861 7368 2c20 7368 6966 745b 2273  t_hash, shift["s
-00003620: 6869 6674 4964 225d 292c 0a20 2020 2020  hiftId"]),.     
-00003630: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00003640: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00003650: 6e74 2866 2253 6869 6674 2075 7064 6174  nt(f"Shift updat
-00003660: 6564 3a20 7b73 6869 6674 5f68 6173 687d  ed: {shift_hash}
-00003670: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00003680: 2020 2023 2054 4f44 4f3a 2066 6f72 2043     # TODO: for C
-00003690: 5255 4420 6f70 6572 6174 696f 6e73 2c20  RUD operations, 
-000036a0: 7468 6973 2069 7320 7768 6572 6520 696e  this is where in
-000036b0: 7465 6772 6174 696f 6e20 636f 6465 2066  tegration code f
-000036c0: 6f72 2055 5044 4154 4553 2074 6f0a 2020  or UPDATES to.  
-000036d0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000036e0: 544f 444f 2020 686f 6d65 6261 7365 2773  TODO  homebase's
-000036f0: 2073 6869 6674 2074 696d 6573 2077 6f75   shift times wou
-00003700: 6c64 2062 6520 7072 6f63 6573 7365 642e  ld be processed.
-00003710: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003720: 2063 6f6e 6669 672e 4442 2e63 6f6d 6d69   config.DB.commi
-00003730: 7428 290a 2020 2020 2020 2020 2020 2020  t().            
-00003740: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00003750: 2020 2020 2020 6966 2073 6869 6674 5b22        if shift["
-00003760: 7368 6966 7449 6422 5d20 6e6f 7420 696e  shiftId"] not in
-00003770: 2068 6f6d 6562 6173 655f 6576 656e 7473   homebase_events
-00003780: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00003790: 2020 2020 2020 636f 6e66 6967 2e47 4f4f        config.GOO
-000037a0: 474c 452e 6372 6561 7465 5f6e 6577 5f65  GLE.create_new_e
-000037b0: 7665 6e74 2873 656c 662e 7072 696d 6172  vent(self.primar
-000037c0: 795f 6361 6c65 6e64 6172 5b22 6964 225d  y_calendar["id"]
-000037d0: 2c20 6576 656e 7429 0a0a 2020 2020 2020  , event)..      
-000037e0: 2020 2020 2020 2320 5072 756e 6520 4c6f        # Prune Lo
-000037f0: 6361 6c20 4576 656e 7473 2074 6f20 6d61  cal Events to ma
-00003800: 7463 6820 7265 6d6f 7465 0a20 2020 2020  tch remote.     
-00003810: 2020 2020 2020 2063 6f6e 6669 672e 4442         config.DB
-00003820: 5f43 5552 534f 522e 6578 6563 7574 6528  _CURSOR.execute(
-00003830: 2253 454c 4543 5420 686f 6d65 6261 7365  "SELECT homebase
-00003840: 5f73 6869 6674 5f69 6420 4652 4f4d 2073  _shift_id FROM s
-00003850: 6869 6674 7322 290a 2020 2020 2020 2020  hifts").        
-00003860: 2020 2020 6c6f 6361 6c5f 7368 6966 7473      local_shifts
-00003870: 203d 207b 726f 775b 305d 2066 6f72 2072   = {row[0] for r
-00003880: 6f77 2069 6e20 636f 6e66 6967 2e44 425f  ow in config.DB_
-00003890: 4355 5253 4f52 2e66 6574 6368 616c 6c28  CURSOR.fetchall(
-000038a0: 297d 0a20 2020 2020 2020 2020 2020 2073  )}.            s
-000038b0: 6869 6674 735f 746f 5f64 656c 6574 6520  hifts_to_delete 
-000038c0: 3d20 6c6f 6361 6c5f 7368 6966 7473 202d  = local_shifts -
-000038d0: 2072 656d 6f74 655f 7368 6966 7473 0a20   remote_shifts. 
-000038e0: 2020 2020 2020 2020 2020 2066 6f72 2065             for e
-000038f0: 7665 6e74 5f69 6420 696e 2073 6869 6674  vent_id in shift
-00003900: 735f 746f 5f64 656c 6574 653a 0a20 2020  s_to_delete:.   
-00003910: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
-00003920: 6669 672e 4442 5f43 5552 534f 522e 6578  fig.DB_CURSOR.ex
-00003930: 6563 7574 6528 0a20 2020 2020 2020 2020  ecute(.         
-00003940: 2020 2020 2020 2020 2020 2022 4445 4c45             "DELE
-00003950: 5445 2046 524f 4d20 7368 6966 7473 2057  TE FROM shifts W
-00003960: 4845 5245 2068 6f6d 6562 6173 655f 7368  HERE homebase_sh
-00003970: 6966 745f 6964 203d 203f 222c 2028 6576  ift_id = ?", (ev
-00003980: 656e 745f 6964 2c29 0a20 2020 2020 2020  ent_id,).       
-00003990: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000039a0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-000039b0: 2866 2253 6869 6674 2064 656c 6574 6564  (f"Shift deleted
-000039c0: 3a20 7b65 7665 6e74 5f69 647d 2229 0a0a  : {event_id}")..
-000039d0: 2020 2020 2020 2020 636f 6e66 6967 2e44          config.D
-000039e0: 422e 636f 6d6d 6974 2829 0a20 2020 2020  B.commit().     
-000039f0: 2020 2073 656c 662e 7570 6461 7465 5f65     self.update_e
-00003a00: 7665 6e74 735f 6462 5f66 726f 6d5f 7265  vents_db_from_re
-00003a10: 6d6f 7465 2829 0a0a 0a64 6566 206d 6169  mote()...def mai
-00003a20: 6e28 293a 0a20 2020 2073 796e 6320 3d20  n():.    sync = 
-00003a30: 486f 6d65 6261 7365 4361 6c65 6e64 6172  HomebaseCalendar
-00003a40: 5379 6e63 2829 0a20 2020 2073 796e 6328  Sync().    sync(
-00003a50: 290a 0a0a 6966 205f 5f6e 616d 655f 5f20  )...if __name__ 
-00003a60: 3d3d 2022 5f5f 6d61 696e 5f5f 223a 0a20  == "__main__":. 
-00003a70: 2020 206d 6169 6e28 290a 6060 600a 0a3d     main().```..=
-00003a80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00003a90: 3d3d 3d0a 0a63 6f6d 706c 6574 6520 6d79  ===..complete my
-00003aa0: 2073 6574 7570 2e70 7920 6669 6c65 2077   setup.py file w
-00003ab0: 6974 6820 616e 2065 6e74 7279 706f 696e  ith an entrypoin
-00003ac0: 7420 6f6e 2060 6465 6620 6d61 696e 6020  t on `def main` 
-00003ad0: 616e 6420 7573 6520 7477 696e 6520 616e  and use twine an
-00003ae0: 6420 6b65 7972 696e 6720 666f 7220 6465  d keyring for de
-00003af0: 706c 6f79 6d65 6e74 0a                   ployment.
+00000000: 696d 706f 7274 206f 730a 696d 706f 7274  import os.import
+00000010: 206a 736f 6e0a 696d 706f 7274 2068 7474   json.import htt
+00000020: 7078 0a66 726f 6d20 6273 3420 696d 706f  px.from bs4 impo
+00000030: 7274 2042 6561 7574 6966 756c 536f 7570  rt BeautifulSoup
+00000040: 0a69 6d70 6f72 7420 7065 6e64 756c 756d  .import pendulum
+00000050: 0a66 726f 6d20 7061 7468 6c69 6220 696d  .from pathlib im
+00000060: 706f 7274 2050 6174 680a 6672 6f6d 2064  port Path.from d
+00000070: 6f74 656e 7620 696d 706f 7274 206c 6f61  otenv import loa
+00000080: 645f 646f 7465 6e76 0a66 726f 6d20 7269  d_dotenv.from ri
+00000090: 6368 2069 6d70 6f72 7420 7072 696e 740a  ch import print.
+000000a0: 696d 706f 7274 2068 6173 686c 6962 0a0a  import hashlib..
+000000b0: 6672 6f6d 202e 2069 6d70 6f72 7420 636f  from . import co
+000000c0: 6e66 6967 0a66 726f 6d20 2e64 622e 6d6f  nfig.from .db.mo
+000000d0: 6465 6c73 2069 6d70 6f72 7420 7365 7475  dels import setu
+000000e0: 705f 6461 7461 6261 7365 2c20 636f 6e6e  p_database, conn
+000000f0: 6563 745f 6461 7461 6261 7365 0a66 726f  ect_database.fro
+00000100: 6d20 2e67 6f6f 676c 655f 636c 6965 6e74  m .google_client
+00000110: 2e61 7574 6820 696d 706f 7274 204d 6574  .auth import Met
+00000120: 6164 6174 610a 6672 6f6d 202e 676f 6f67  adata.from .goog
+00000130: 6c65 5f63 6c69 656e 742e 676f 6f67 6c65  le_client.google
+00000140: 5f63 6c69 656e 7420 696d 706f 7274 2047  _client import G
+00000150: 6f6f 676c 6543 6c69 656e 740a 0a44 4f54  oogleClient..DOT
+00000160: 454e 565f 4241 5345 5f44 4952 203d 2050  ENV_BASE_DIR = P
+00000170: 6174 6828 5f5f 6669 6c65 5f5f 292e 7061  ath(__file__).pa
+00000180: 7265 6e74 2e70 6172 656e 742e 7061 7265  rent.parent.pare
+00000190: 6e74 0a6c 6f61 645f 646f 7465 6e76 2850  nt.load_dotenv(P
+000001a0: 6174 6828 444f 5445 4e56 5f42 4153 455f  ath(DOTENV_BASE_
+000001b0: 4449 522c 2022 2e65 6e76 2229 290a 0a48  DIR, ".env"))..H
+000001c0: 4f4d 4542 4153 455f 5553 4552 4e41 4d45  OMEBASE_USERNAME
+000001d0: 203d 206f 732e 656e 7669 726f 6e5b 2243   = os.environ["C
+000001e0: 435f 484f 4d45 4241 5345 5f55 5345 524e  C_HOMEBASE_USERN
+000001f0: 414d 4522 5d0a 484f 4d45 4241 5345 5f50  AME"].HOMEBASE_P
+00000200: 4153 5357 4f52 4420 3d20 6f73 2e65 6e76  ASSWORD = os.env
+00000210: 6972 6f6e 5b22 4343 5f48 4f4d 4542 4153  iron["CC_HOMEBAS
+00000220: 455f 5041 5353 574f 5244 225d 0a45 4d50  E_PASSWORD"].EMP
+00000230: 4c4f 5945 455f 4649 5253 544e 414d 4520  LOYEE_FIRSTNAME 
+00000240: 3d20 6f73 2e65 6e76 6972 6f6e 5b22 4343  = os.environ["CC
+00000250: 5f48 4f4d 4542 4153 455f 454d 504c 4f59  _HOMEBASE_EMPLOY
+00000260: 4545 5f46 4952 5354 4e41 4d45 225d 0a45  EE_FIRSTNAME"].E
+00000270: 4d50 4c4f 5945 455f 4c41 5354 4e41 4d45  MPLOYEE_LASTNAME
+00000280: 203d 206f 732e 656e 7669 726f 6e5b 2243   = os.environ["C
+00000290: 435f 484f 4d45 4241 5345 5f45 4d50 4c4f  C_HOMEBASE_EMPLO
+000002a0: 5945 455f 4c41 5354 4e41 4d45 225d 0a53  YEE_LASTNAME"].S
+000002b0: 5441 5254 5f44 4154 4520 3d20 6f73 2e65  TART_DATE = os.e
+000002c0: 6e76 6972 6f6e 5b22 4343 5f48 4f4d 4542  nviron["CC_HOMEB
+000002d0: 4153 455f 5354 4152 545f 4441 5445 225d  ASE_START_DATE"]
+000002e0: 0a45 4e44 5f44 4154 4520 3d20 6f73 2e65  .END_DATE = os.e
+000002f0: 6e76 6972 6f6e 5b22 4343 5f48 4f4d 4542  nviron["CC_HOMEB
+00000300: 4153 455f 454e 445f 4441 5445 225d 0a4c  ASE_END_DATE"].L
+00000310: 4f4f 4b41 4845 4144 203d 206f 732e 656e  OOKAHEAD = os.en
+00000320: 7669 726f 6e5b 2243 435f 484f 4d45 4241  viron["CC_HOMEBA
+00000330: 5345 5f4c 4f4f 4b41 4845 4144 225d 0a4c  SE_LOOKAHEAD"].L
+00000340: 4f4f 4b41 4845 4144 203d 204c 4f4f 4b41  OOKAHEAD = LOOKA
+00000350: 4845 4144 2e6c 6f77 6572 2829 2069 6e20  HEAD.lower() in 
+00000360: 5b22 7472 7565 222c 2022 3122 2c20 2274  ["true", "1", "t
+00000370: 222c 2022 7922 2c20 2279 6573 225d 0a4c  ", "y", "yes"].L
+00000380: 4f4f 4b41 4845 4144 5f44 4159 5320 3d20  OOKAHEAD_DAYS = 
+00000390: 6f73 2e65 6e76 6972 6f6e 5b22 4343 5f48  os.environ["CC_H
+000003a0: 4f4d 4542 4153 455f 4441 5953 5f4c 4f4f  OMEBASE_DAYS_LOO
+000003b0: 4b41 4845 4144 225d 0a4c 4f4f 4b41 4845  KAHEAD"].LOOKAHE
+000003c0: 4144 5f44 4159 5320 3d20 696e 7428 4c4f  AD_DAYS = int(LO
+000003d0: 4f4b 4148 4541 445f 4441 5953 290a 0a0a  OKAHEAD_DAYS)...
+000003e0: 636c 6173 7320 486f 6d65 6261 7365 5363  class HomebaseSc
+000003f0: 6865 6475 6c65 5363 7261 7065 723a 0a20  heduleScraper:. 
+00000400: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00000410: 0a20 2020 2020 2020 2073 656c 662c 2075  .        self, u
+00000420: 7365 726e 616d 652c 2070 6173 7377 6f72  sername, passwor
+00000430: 642c 2066 6972 7374 5f6e 616d 652c 206c  d, first_name, l
+00000440: 6173 745f 6e61 6d65 2c20 7374 6172 745f  ast_name, start_
+00000450: 6461 7465 2c20 656e 645f 6461 7465 0a20  date, end_date. 
+00000460: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+00000470: 2020 2020 2020 7365 6c66 2e75 7365 726e        self.usern
+00000480: 616d 6520 3d20 7573 6572 6e61 6d65 0a20  ame = username. 
+00000490: 2020 2020 2020 2073 656c 662e 7061 7373         self.pass
+000004a0: 776f 7264 203d 2070 6173 7377 6f72 640a  word = password.
+000004b0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+000004c0: 7274 5f64 6174 652c 2073 656c 662e 656e  rt_date, self.en
+000004d0: 645f 6461 7465 203d 2073 656c 662e 696e  d_date = self.in
+000004e0: 6974 6961 6c69 7a65 5f64 6174 655f 7261  itialize_date_ra
+000004f0: 6e67 6528 0a20 2020 2020 2020 2020 2020  nge(.           
+00000500: 2073 7461 7274 5f64 6174 652c 2065 6e64   start_date, end
+00000510: 5f64 6174 650a 2020 2020 2020 2020 290a  _date.        ).
+00000520: 2020 2020 2020 2020 7365 6c66 2e6c 6f67          self.log
+00000530: 696e 5f75 726c 203d 2022 6874 7470 733a  in_url = "https:
+00000540: 2f2f 6170 702e 6a6f 696e 686f 6d65 6261  //app.joinhomeba
+00000550: 7365 2e63 6f6d 2f61 6363 6f75 6e74 732f  se.com/accounts/
+00000560: 7369 676e 2d69 6e22 0a20 2020 2020 2020  sign-in".       
+00000570: 2073 656c 662e 6261 7365 5f73 6368 6564   self.base_sched
+00000580: 756c 655f 7572 6c20 3d20 280a 2020 2020  ule_url = (.    
+00000590: 2020 2020 2020 2020 2268 7474 7073 3a2f          "https:/
+000005a0: 2f61 7070 2e6a 6f69 6e68 6f6d 6562 6173  /app.joinhomebas
+000005b0: 652e 636f 6d2f 6170 692f 6665 2f73 6368  e.com/api/fe/sch
+000005c0: 6564 756c 655f 6275 696c 6465 722f 7363  edule_builder/sc
+000005d0: 6865 6475 6c65 3f22 0a20 2020 2020 2020  hedule?".       
+000005e0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+000005f0: 636c 6965 6e74 203d 2068 7474 7078 2e43  client = httpx.C
+00000600: 6c69 656e 7428 290a 2020 2020 2020 2020  lient().        
+00000610: 7365 6c66 2e6c 6f67 696e 5f70 6179 6c6f  self.login_paylo
+00000620: 6164 203d 207b 0a20 2020 2020 2020 2020  ad = {.         
+00000630: 2020 2022 6175 7468 656e 7469 6369 7479     "authenticity
+00000640: 5f74 6f6b 656e 223a 2073 656c 662e 6765  _token": self.ge
+00000650: 745f 6175 7468 656e 7469 6369 7479 5f74  t_authenticity_t
+00000660: 6f6b 656e 2829 2c0a 2020 2020 2020 2020  oken(),.        
+00000670: 2020 2020 2261 6363 6f75 6e74 5b6c 6f67      "account[log
+00000680: 696e 5d22 3a20 7573 6572 6e61 6d65 2c0a  in]": username,.
+00000690: 2020 2020 2020 2020 2020 2020 2261 6363              "acc
+000006a0: 6f75 6e74 5b70 6173 7377 6f72 645d 223a  ount[password]":
+000006b0: 2070 6173 7377 6f72 642c 0a20 2020 2020   password,.     
+000006c0: 2020 2020 2020 2022 6163 636f 756e 745b         "account[
+000006d0: 7265 6d65 6d62 6572 5f6d 655d 223a 2030  remember_me]": 0
+000006e0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+000006f0: 2020 2020 7365 6c66 2e6c 6f67 696e 2829      self.login()
+00000700: 0a20 2020 2020 2020 2073 656c 662e 6361  .        self.ca
+00000710: 6c65 6e64 6172 5f6a 736f 6e20 3d20 6a73  lendar_json = js
+00000720: 6f6e 2e6c 6f61 6473 2873 656c 662e 6765  on.loads(self.ge
+00000730: 745f 6361 6c65 6e64 6172 5f6a 736f 6e28  t_calendar_json(
+00000740: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+00000750: 656d 706c 6f79 6565 5f66 6972 7374 5f6e  employee_first_n
+00000760: 616d 6520 3d20 6669 7273 745f 6e61 6d65  ame = first_name
+00000770: 0a20 2020 2020 2020 2073 656c 662e 656d  .        self.em
+00000780: 706c 6f79 6565 5f6c 6173 745f 6e61 6d65  ployee_last_name
+00000790: 203d 206c 6173 745f 6e61 6d65 0a20 2020   = last_name.   
+000007a0: 2020 2020 2073 656c 662e 656d 706c 6f79       self.employ
+000007b0: 6565 5f69 6420 3d20 7365 6c66 2e67 6574  ee_id = self.get
+000007c0: 5f65 6d70 6c6f 7965 655f 6964 2829 0a20  _employee_id(). 
+000007d0: 2020 2020 2020 2073 656c 662e 656d 706c         self.empl
+000007e0: 6f79 6565 5f6a 6f62 7320 3d20 7365 6c66  oyee_jobs = self
+000007f0: 2e67 6574 5f65 6d70 6c6f 7965 655f 6a6f  .get_employee_jo
+00000800: 6273 2829 0a20 2020 2020 2020 2073 656c  bs().        sel
+00000810: 662e 656d 706c 6f79 6565 5f73 6869 6674  f.employee_shift
+00000820: 7320 3d20 7365 6c66 2e67 6574 5f65 6d70  s = self.get_emp
+00000830: 6c6f 7965 655f 7368 6966 7473 2829 0a20  loyee_shifts(). 
+00000840: 2020 2020 2020 2073 656c 662e 656d 706c         self.empl
+00000850: 6f79 6565 5f73 6869 6674 735f 696e 5f72  oyee_shifts_in_r
+00000860: 616e 6765 203d 2073 656c 662e 6669 6c74  ange = self.filt
+00000870: 6572 5f73 6869 6674 735f 6279 5f64 6174  er_shifts_by_dat
+00000880: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
+00000890: 2e63 6c6f 7365 2829 0a0a 2020 2020 6465  .close()..    de
+000008a0: 6620 636c 6f73 6528 7365 6c66 293a 0a20  f close(self):. 
+000008b0: 2020 2020 2020 2073 656c 662e 636c 6965         self.clie
+000008c0: 6e74 2e63 6c6f 7365 2829 0a0a 2020 2020  nt.close()..    
+000008d0: 6465 6620 6765 745f 6c6f 6769 6e5f 666f  def get_login_fo
+000008e0: 726d 2873 656c 6629 3a0a 2020 2020 2020  rm(self):.      
+000008f0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+00000900: 662e 636c 6965 6e74 2e67 6574 2873 656c  f.client.get(sel
+00000910: 662e 6c6f 6769 6e5f 7572 6c29 0a0a 2020  f.login_url)..  
+00000920: 2020 2020 2020 6966 2072 6573 706f 6e73        if respons
+00000930: 652e 7374 6174 7573 5f63 6f64 6520 3d3d  e.status_code ==
+00000940: 2032 3030 3a0a 2020 2020 2020 2020 2020   200:.          
+00000950: 2020 6874 6d6c 5f63 6f6e 7465 6e74 203d    html_content =
+00000960: 2042 6561 7574 6966 756c 536f 7570 2872   BeautifulSoup(r
+00000970: 6573 706f 6e73 652e 7465 7874 2c20 2268  esponse.text, "h
+00000980: 746d 6c2e 7061 7273 6572 2229 0a0a 2020  tml.parser")..  
+00000990: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000009a0: 2068 746d 6c5f 636f 6e74 656e 742e 6669   html_content.fi
+000009b0: 6e64 2822 666f 726d 222c 206d 6574 686f  nd("form", metho
+000009c0: 643d 2270 6f73 7422 290a 2020 2020 2020  d="post").      
+000009d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+000009e0: 2020 2020 7072 696e 7428 6622 4661 696c      print(f"Fail
+000009f0: 6564 2074 6f20 7265 7472 6965 7665 2074  ed to retrieve t
+00000a00: 6865 2070 6167 652e 2053 7461 7475 7320  he page. Status 
+00000a10: 436f 6465 3a20 7b72 6573 706f 6e73 652e  Code: {response.
+00000a20: 7374 6174 7573 5f63 6f64 657d 2229 0a0a  status_code}")..
+00000a30: 2020 2020 6465 6620 6765 745f 6175 7468      def get_auth
+00000a40: 656e 7469 6369 7479 5f74 6f6b 656e 2873  enticity_token(s
+00000a50: 656c 6629 3a0a 2020 2020 2020 2020 6c6f  elf):.        lo
+00000a60: 6769 6e5f 666f 726d 203d 2073 656c 662e  gin_form = self.
+00000a70: 6765 745f 6c6f 6769 6e5f 666f 726d 2829  get_login_form()
+00000a80: 0a20 2020 2020 2020 2069 6620 6c6f 6769  .        if logi
+00000a90: 6e5f 666f 726d 3a0a 2020 2020 2020 2020  n_form:.        
+00000aa0: 2020 2020 696e 7075 745f 656c 656d 656e      input_elemen
+00000ab0: 7420 3d20 6c6f 6769 6e5f 666f 726d 2e66  t = login_form.f
+00000ac0: 696e 6428 0a20 2020 2020 2020 2020 2020  ind(.           
+00000ad0: 2020 2020 2022 696e 7075 7422 2c20 6174       "input", at
+00000ae0: 7472 733d 7b22 6e61 6d65 223a 2022 6175  trs={"name": "au
+00000af0: 7468 656e 7469 6369 7479 5f74 6f6b 656e  thenticity_token
+00000b00: 222c 2022 7479 7065 223a 2022 6869 6464  ", "type": "hidd
+00000b10: 656e 227d 0a20 2020 2020 2020 2020 2020  en"}.           
+00000b20: 2029 0a20 2020 2020 2020 2020 2020 2072   ).            r
+00000b30: 6574 7572 6e20 696e 7075 745f 656c 656d  eturn input_elem
+00000b40: 656e 742e 6765 7428 2276 616c 7565 2229  ent.get("value")
+00000b50: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00000b60: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00000b70: 2822 4e6f 2069 6e70 7574 2065 6c65 6d65  ("No input eleme
+00000b80: 6e74 2077 6974 6820 606e 616d 653d 2761  nt with `name='a
+00000b90: 7574 6865 6e74 6963 6974 795f 746f 6b65  uthenticity_toke
+00000ba0: 6e27 6020 666f 756e 642e 2229 0a0a 2020  n'` found.")..  
+00000bb0: 2020 6465 6620 6c6f 6769 6e28 7365 6c66    def login(self
+00000bc0: 293a 0a20 2020 2020 2020 2072 6573 706f  ):.        respo
+00000bd0: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+00000be0: 742e 706f 7374 2873 656c 662e 6c6f 6769  t.post(self.logi
+00000bf0: 6e5f 7572 6c2c 2064 6174 613d 7365 6c66  n_url, data=self
+00000c00: 2e6c 6f67 696e 5f70 6179 6c6f 6164 290a  .login_payload).
+00000c10: 0a20 2020 2020 2020 2069 6620 7265 7370  .        if resp
+00000c20: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00000c30: 203d 3d20 3230 303a 0a20 2020 2020 2020   == 200:.       
+00000c40: 2020 2020 2070 7269 6e74 2866 2248 6f6d       print(f"Hom
+00000c50: 6562 6173 6520 4c6f 6769 6e20 5375 6363  ebase Login Succ
+00000c60: 6573 7366 756c 2e20 5374 6174 7573 2043  essful. Status C
+00000c70: 6f64 653a 207b 7265 7370 6f6e 7365 2e73  ode: {response.s
+00000c80: 7461 7475 735f 636f 6465 7d22 290a 2020  tatus_code}").  
+00000c90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00000ca0: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
+00000cb0: 486f 6d65 6261 7365 204c 6f67 696e 2066  Homebase Login f
+00000cc0: 6169 6c65 642e 2053 7461 7475 7320 436f  ailed. Status Co
+00000cd0: 6465 3a20 7b72 6573 706f 6e73 652e 7374  de: {response.st
+00000ce0: 6174 7573 5f63 6f64 657d 2229 0a0a 2020  atus_code}")..  
+00000cf0: 2020 6465 6620 6765 745f 7363 6865 6475    def get_schedu
+00000d00: 6c65 5f72 6f75 7465 2873 656c 6629 3a0a  le_route(self):.
+00000d10: 2020 2020 2020 2020 726f 7574 6520 3d20          route = 
+00000d20: 6622 7b73 656c 662e 6261 7365 5f73 6368  f"{self.base_sch
+00000d30: 6564 756c 655f 7572 6c7d 656e 645f 6461  edule_url}end_da
+00000d40: 7465 3d7b 7365 6c66 2e65 6e64 5f64 6174  te={self.end_dat
+00000d50: 652e 746f 5f64 6174 655f 7374 7269 6e67  e.to_date_string
+00000d60: 2829 7d26 7374 6172 745f 6461 7465 3d7b  ()}&start_date={
+00000d70: 7365 6c66 2e73 7461 7274 5f64 6174 652e  self.start_date.
+00000d80: 746f 5f64 6174 655f 7374 7269 6e67 2829  to_date_string()
+00000d90: 7d22 0a20 2020 2020 2020 2070 7269 6e74  }".        print
+00000da0: 2872 6f75 7465 290a 2020 2020 2020 2020  (route).        
+00000db0: 7265 7475 726e 2072 6f75 7465 0a0a 2020  return route..  
+00000dc0: 2020 6465 6620 6765 745f 6361 6c65 6e64    def get_calend
+00000dd0: 6172 5f6a 736f 6e28 7365 6c66 293a 0a20  ar_json(self):. 
+00000de0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00000df0: 3d20 7365 6c66 2e63 6c69 656e 742e 6765  = self.client.ge
+00000e00: 7428 7365 6c66 2e67 6574 5f73 6368 6564  t(self.get_sched
+00000e10: 756c 655f 726f 7574 6528 2929 0a0a 2020  ule_route())..  
+00000e20: 2020 2020 2020 6966 2072 6573 706f 6e73        if respons
+00000e30: 652e 7374 6174 7573 5f63 6f64 6520 3d3d  e.status_code ==
+00000e40: 2032 3030 3a0a 2020 2020 2020 2020 2020   200:.          
+00000e50: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+00000e60: 652e 7465 7874 0a20 2020 2020 2020 2065  e.text.        e
+00000e70: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+00000e80: 2070 7269 6e74 2866 2246 6169 6c65 6420   print(f"Failed 
+00000e90: 746f 2072 6574 7269 6576 6520 7468 6520  to retrieve the 
+00000ea0: 7061 6765 2e20 5374 6174 7573 2043 6f64  page. Status Cod
+00000eb0: 653a 207b 7265 7370 6f6e 7365 2e73 7461  e: {response.sta
+00000ec0: 7475 735f 636f 6465 7d22 290a 0a20 2020  tus_code}")..   
+00000ed0: 2064 6566 2067 6574 5f65 6d70 6c6f 7965   def get_employe
+00000ee0: 655f 6964 2873 656c 6629 3a0a 2020 2020  e_id(self):.    
+00000ef0: 2020 2020 666f 7220 5f20 696e 2073 656c      for _ in sel
+00000f00: 662e 6361 6c65 6e64 6172 5f6a 736f 6e5b  f.calendar_json[
+00000f10: 2269 6e63 6c75 6465 6422 5d3a 0a20 2020  "included"]:.   
+00000f20: 2020 2020 2020 2020 2069 6620 5f5b 2274           if _["t
+00000f30: 7970 6522 5d20 3d3d 2022 7573 6572 2220  ype"] == "user" 
+00000f40: 616e 6420 280a 2020 2020 2020 2020 2020  and (.          
+00000f50: 2020 2020 2020 7374 7228 5f5b 2261 7474        str(_["att
+00000f60: 7269 6275 7465 7322 5d5b 2266 6972 7374  ributes"]["first
+00000f70: 4e61 6d65 225d 292e 6c6f 7765 7228 290a  Name"]).lower().
+00000f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000f90: 3d3d 2073 656c 662e 656d 706c 6f79 6565  == self.employee
+00000fa0: 5f66 6972 7374 5f6e 616d 652e 6c6f 7765  _first_name.lowe
+00000fb0: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
+00000fc0: 2020 2020 616e 6420 7374 7228 5f5b 2261      and str(_["a
+00000fd0: 7474 7269 6275 7465 7322 5d5b 226c 6173  ttributes"]["las
+00000fe0: 744e 616d 6522 5d29 2e6c 6f77 6572 2829  tName"]).lower()
+00000ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001000: 203d 3d20 7365 6c66 2e65 6d70 6c6f 7965   == self.employe
+00001010: 655f 6c61 7374 5f6e 616d 652e 6c6f 7765  e_last_name.lowe
+00001020: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
+00001030: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00001040: 2020 2072 6574 7572 6e20 5f5b 2269 6422     return _["id"
+00001050: 5d0a 0a20 2020 2064 6566 2067 6574 5f65  ]..    def get_e
+00001060: 6d70 6c6f 7965 655f 6a6f 6273 2873 656c  mployee_jobs(sel
+00001070: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+00001080: 726e 205b 0a20 2020 2020 2020 2020 2020  rn [.           
+00001090: 205f 5b22 6964 225d 0a20 2020 2020 2020   _["id"].       
+000010a0: 2020 2020 2066 6f72 205f 2069 6e20 7365       for _ in se
+000010b0: 6c66 2e63 616c 656e 6461 725f 6a73 6f6e  lf.calendar_json
+000010c0: 5b22 696e 636c 7564 6564 225d 0a20 2020  ["included"].   
+000010d0: 2020 2020 2020 2020 2069 6620 5f5b 2274           if _["t
+000010e0: 7970 6522 5d20 3d3d 2022 6a6f 6222 0a20  ype"] == "job". 
+000010f0: 2020 2020 2020 2020 2020 2061 6e64 205f             and _
+00001100: 5b22 7265 6c61 7469 6f6e 7368 6970 7322  ["relationships"
+00001110: 5d5b 2275 7365 7222 5d5b 2264 6174 6122  ]["user"]["data"
+00001120: 5d5b 2269 6422 5d20 3d3d 2073 656c 662e  ]["id"] == self.
+00001130: 656d 706c 6f79 6565 5f69 640a 2020 2020  employee_id.    
+00001140: 2020 2020 5d0a 0a20 2020 2064 6566 2067      ]..    def g
+00001150: 6574 5f65 6d70 6c6f 7965 655f 7368 6966  et_employee_shif
+00001160: 7473 2873 656c 6629 3a0a 2020 2020 2020  ts(self):.      
+00001170: 2020 7265 7475 726e 2028 0a20 2020 2020    return (.     
+00001180: 2020 2020 2020 205f 0a20 2020 2020 2020         _.       
+00001190: 2020 2020 2066 6f72 205f 2069 6e20 7365       for _ in se
+000011a0: 6c66 2e63 616c 656e 6461 725f 6a73 6f6e  lf.calendar_json
+000011b0: 5b22 696e 636c 7564 6564 225d 0a20 2020  ["included"].   
+000011c0: 2020 2020 2020 2020 2069 6620 5f5b 2274           if _["t
+000011d0: 7970 6522 5d20 3d3d 2022 7368 6966 7422  ype"] == "shift"
+000011e0: 0a20 2020 2020 2020 2020 2020 2061 6e64  .            and
+000011f0: 205f 5b22 7265 6c61 7469 6f6e 7368 6970   _["relationship
+00001200: 7322 5d5b 226f 776e 6572 225d 5b22 6461  s"]["owner"]["da
+00001210: 7461 225d 5b22 6964 225d 2069 6e20 7365  ta"]["id"] in se
+00001220: 6c66 2e65 6d70 6c6f 7965 655f 6a6f 6273  lf.employee_jobs
+00001230: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00001240: 6465 6620 696e 6974 6961 6c69 7a65 5f64  def initialize_d
+00001250: 6174 655f 7261 6e67 6528 7365 6c66 2c20  ate_range(self, 
+00001260: 7374 6172 745f 6461 7465 2c20 656e 645f  start_date, end_
+00001270: 6461 7465 293a 0a20 2020 2020 2020 2069  date):.        i
+00001280: 6620 7374 6172 745f 6461 7465 203d 3d20  f start_date == 
+00001290: 2274 6f64 6179 223a 0a20 2020 2020 2020  "today":.       
+000012a0: 2020 2020 2073 7461 7274 203d 2070 656e       start = pen
+000012b0: 6475 6c75 6d2e 6e6f 7728 292e 7374 6172  dulum.now().star
+000012c0: 745f 6f66 2822 6461 7922 290a 2020 2020  t_of("day").    
+000012d0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000012e0: 2020 2020 2020 7374 6172 7420 3d20 7065        start = pe
+000012f0: 6e64 756c 756d 2e70 6172 7365 2873 7461  ndulum.parse(sta
+00001300: 7274 5f64 6174 6529 2e73 7461 7274 5f6f  rt_date).start_o
+00001310: 6628 2264 6179 2229 0a20 2020 2020 2020  f("day").       
+00001320: 2069 6620 656e 645f 6461 7465 203d 3d20   if end_date == 
+00001330: 2274 6f64 6179 223a 0a20 2020 2020 2020  "today":.       
+00001340: 2020 2020 2065 6e64 203d 2070 656e 6475       end = pendu
+00001350: 6c75 6d2e 6e6f 7728 292e 656e 645f 6f66  lum.now().end_of
+00001360: 2822 6461 7922 290a 2020 2020 2020 2020  ("day").        
+00001370: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00001380: 2020 656e 6420 3d20 7065 6e64 756c 756d    end = pendulum
+00001390: 2e70 6172 7365 2865 6e64 5f64 6174 6529  .parse(end_date)
+000013a0: 2e65 6e64 5f6f 6628 2264 6179 2229 0a0a  .end_of("day")..
+000013b0: 2020 2020 2020 2020 6966 204c 4f4f 4b41          if LOOKA
+000013c0: 4845 4144 3a0a 2020 2020 2020 2020 2020  HEAD:.          
+000013d0: 2020 7374 6172 7420 3d20 7374 6172 742e    start = start.
+000013e0: 7374 6172 745f 6f66 2822 7765 656b 2229  start_of("week")
+000013f0: 0a20 2020 2020 2020 2020 2020 2065 6e64  .            end
+00001400: 203d 2065 6e64 2e61 6464 2864 6179 733d   = end.add(days=
+00001410: 4c4f 4f4b 4148 4541 445f 4441 5953 292e  LOOKAHEAD_DAYS).
+00001420: 656e 645f 6f66 2822 7765 656b 2229 0a0a  end_of("week")..
+00001430: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00001440: 7461 7274 2c20 656e 640a 0a20 2020 2064  tart, end..    d
+00001450: 6566 2066 696c 7465 725f 7368 6966 7473  ef filter_shifts
+00001460: 5f62 795f 6461 7465 2873 656c 6629 3a0a  _by_date(self):.
+00001470: 2020 2020 2020 2020 7265 7475 726e 2028          return (
+00001480: 0a20 2020 2020 2020 2020 2020 205f 0a20  .            _. 
+00001490: 2020 2020 2020 2020 2020 2066 6f72 205f             for _
+000014a0: 2069 6e20 7365 6c66 2e65 6d70 6c6f 7965   in self.employe
+000014b0: 655f 7368 6966 7473 0a20 2020 2020 2020  e_shifts.       
+000014c0: 2020 2020 2069 6620 7365 6c66 2e73 7461       if self.sta
+000014d0: 7274 5f64 6174 650a 2020 2020 2020 2020  rt_date.        
+000014e0: 2020 2020 3c3d 2070 656e 6475 6c75 6d2e      <= pendulum.
+000014f0: 7061 7273 6528 5f5b 2261 7474 7269 6275  parse(_["attribu
+00001500: 7465 7322 5d5b 2273 7461 7274 4174 225d  tes"]["startAt"]
+00001510: 290a 2020 2020 2020 2020 2020 2020 3c3d  ).            <=
+00001520: 2073 656c 662e 656e 645f 6461 7465 0a20   self.end_date. 
+00001530: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
+00001540: 6620 6765 745f 656d 706c 6f79 6565 5f73  f get_employee_s
+00001550: 6869 6674 735f 6a73 6f6e 2873 656c 6629  hifts_json(self)
+00001560: 3a0a 2020 2020 2020 2020 7368 6966 7473  :.        shifts
+00001570: 203d 205b 5d0a 0a20 2020 2020 2020 2066   = []..        f
+00001580: 6f72 205f 2069 6e20 7365 6c66 2e65 6d70  or _ in self.emp
+00001590: 6c6f 7965 655f 7368 6966 7473 5f69 6e5f  loyee_shifts_in_
+000015a0: 7261 6e67 653a 0a20 2020 2020 2020 2020  range:.         
+000015b0: 2020 2073 6869 6674 203d 207b 0a20 2020     shift = {.   
+000015c0: 2020 2020 2020 2020 2020 2020 2022 7368               "sh
+000015d0: 6966 7449 6422 3a20 5f5b 2269 6422 5d2c  iftId": _["id"],
+000015e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000015f0: 2022 6669 7273 744e 616d 6522 3a20 7365   "firstName": se
+00001600: 6c66 2e65 6d70 6c6f 7965 655f 6669 7273  lf.employee_firs
+00001610: 745f 6e61 6d65 2c0a 2020 2020 2020 2020  t_name,.        
+00001620: 2020 2020 2020 2020 226c 6173 744e 616d          "lastNam
+00001630: 6522 3a20 7365 6c66 2e65 6d70 6c6f 7965  e": self.employe
+00001640: 655f 6c61 7374 5f6e 616d 652c 0a20 2020  e_last_name,.   
+00001650: 2020 2020 2020 2020 2020 2020 2022 6a6f               "jo
+00001660: 6252 6f6c 6522 3a20 5f5b 2261 7474 7269  bRole": _["attri
+00001670: 6275 7465 7322 5d5b 2272 6f6c 654e 616d  butes"]["roleNam
+00001680: 6522 5d2c 0a20 2020 2020 2020 2020 2020  e"],.           
+00001690: 2020 2020 2022 7368 6966 7444 6174 6522       "shiftDate"
+000016a0: 3a20 7065 6e64 756c 756d 2e70 6172 7365  : pendulum.parse
+000016b0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000016c0: 2020 2020 2020 5f5b 2261 7474 7269 6275        _["attribu
+000016d0: 7465 7322 5d5b 2273 7461 7274 4174 225d  tes"]["startAt"]
+000016e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000016f0: 2029 2e74 6f5f 6461 7465 5f73 7472 696e   ).to_date_strin
+00001700: 6728 292c 0a20 2020 2020 2020 2020 2020  g(),.           
+00001710: 2020 2020 2022 7374 6172 7454 696d 6522       "startTime"
+00001720: 3a20 7065 6e64 756c 756d 2e70 6172 7365  : pendulum.parse
+00001730: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00001740: 2020 2020 2020 5f5b 2261 7474 7269 6275        _["attribu
+00001750: 7465 7322 5d5b 2273 7461 7274 4174 225d  tes"]["startAt"]
+00001760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001770: 2029 2e74 6f5f 7469 6d65 5f73 7472 696e   ).to_time_strin
+00001780: 6728 292c 0a20 2020 2020 2020 2020 2020  g(),.           
+00001790: 2020 2020 2022 656e 6454 696d 6522 3a20       "endTime": 
+000017a0: 7065 6e64 756c 756d 2e70 6172 7365 285f  pendulum.parse(_
+000017b0: 5b22 6174 7472 6962 7574 6573 225d 5b22  ["attributes"]["
+000017c0: 656e 6441 7422 5d29 2e74 6f5f 7469 6d65  endAt"]).to_time
+000017d0: 5f73 7472 696e 6728 292c 0a20 2020 2020  _string(),.     
+000017e0: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
+000017f0: 2020 2020 2020 7368 6966 7473 2e61 7070        shifts.app
+00001800: 656e 6428 7368 6966 7429 0a0a 2020 2020  end(shift)..    
+00001810: 2020 2020 7265 7475 726e 206a 736f 6e2e      return json.
+00001820: 6475 6d70 7328 7368 6966 7473 290a 0a0a  dumps(shifts)...
+00001830: 636c 6173 7320 486f 6d65 6261 7365 4361  class HomebaseCa
+00001840: 6c65 6e64 6172 5379 6e63 3a0a 2020 2020  lendarSync:.    
+00001850: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00001860: 6629 202d 3e20 4e6f 6e65 3a0a 2020 2020  f) -> None:.    
+00001870: 2020 2020 636f 6e66 6967 2e4d 4554 4120      config.META 
+00001880: 3d20 4d65 7461 6461 7461 2e6d 6574 6164  = Metadata.metad
+00001890: 6174 615f 7369 6e67 6c65 746f 6e5f 6661  ata_singleton_fa
+000018a0: 6374 6f72 7928 290a 2020 2020 2020 2020  ctory().        
+000018b0: 636f 6e66 6967 2e4d 4554 412e 6368 6563  config.META.chec
+000018c0: 6b5f 666f 725f 636c 6965 6e74 5f73 6563  k_for_client_sec
+000018d0: 7265 745f 616e 645f 696d 706f 7274 2829  ret_and_import()
+000018e0: 0a20 2020 2020 2020 2063 6f6e 6669 672e  .        config.
+000018f0: 474f 4f47 4c45 203d 2047 6f6f 676c 6543  GOOGLE = GoogleC
+00001900: 6c69 656e 7428 290a 2020 2020 2020 2020  lient().        
+00001910: 7365 7475 705f 6461 7461 6261 7365 2829  setup_database()
+00001920: 0a20 2020 2020 2020 2073 656c 662e 7363  .        self.sc
+00001930: 7261 7065 7220 3d20 486f 6d65 6261 7365  raper = Homebase
+00001940: 5363 6865 6475 6c65 5363 7261 7065 7228  ScheduleScraper(
+00001950: 0a20 2020 2020 2020 2020 2020 2048 4f4d  .            HOM
+00001960: 4542 4153 455f 5553 4552 4e41 4d45 2c0a  EBASE_USERNAME,.
+00001970: 2020 2020 2020 2020 2020 2020 484f 4d45              HOME
+00001980: 4241 5345 5f50 4153 5357 4f52 442c 0a20  BASE_PASSWORD,. 
+00001990: 2020 2020 2020 2020 2020 2045 4d50 4c4f             EMPLO
+000019a0: 5945 455f 4649 5253 544e 414d 452c 0a20  YEE_FIRSTNAME,. 
+000019b0: 2020 2020 2020 2020 2020 2045 4d50 4c4f             EMPLO
+000019c0: 5945 455f 4c41 5354 4e41 4d45 2c0a 2020  YEE_LASTNAME,.  
+000019d0: 2020 2020 2020 2020 2020 5354 4152 545f            START_
+000019e0: 4441 5445 2c0a 2020 2020 2020 2020 2020  DATE,.          
+000019f0: 2020 454e 445f 4441 5445 2c0a 2020 2020    END_DATE,.    
+00001a00: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00001a10: 6c66 2e70 7269 6d61 7279 5f63 616c 656e  lf.primary_calen
+00001a20: 6461 7220 3d20 636f 6e66 6967 2e47 4f4f  dar = config.GOO
+00001a30: 474c 452e 6765 745f 7072 696d 6172 795f  GLE.get_primary_
+00001a40: 6361 6c65 6e64 6172 2829 0a20 2020 2020  calendar().     
+00001a50: 2020 2073 656c 662e 7072 696d 6172 795f     self.primary_
+00001a60: 6361 6c65 6e64 6172 5f65 7665 6e74 7320  calendar_events 
+00001a70: 3d20 636f 6e66 6967 2e47 4f4f 474c 452e  = config.GOOGLE.
+00001a80: 6765 745f 6361 6c65 6e64 6172 5f65 7665  get_calendar_eve
+00001a90: 6e74 7328 0a20 2020 2020 2020 2020 2020  nts(.           
+00001aa0: 2073 656c 662e 7072 696d 6172 795f 6361   self.primary_ca
+00001ab0: 6c65 6e64 6172 5b22 6964 225d 0a20 2020  lendar["id"].   
+00001ac0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+00001ad0: 656c 662e 7265 6d6f 7465 5f68 6f6d 6562  elf.remote_homeb
+00001ae0: 6173 655f 7368 6966 7473 203d 206a 736f  ase_shifts = jso
+00001af0: 6e2e 6c6f 6164 7328 0a20 2020 2020 2020  n.loads(.       
+00001b00: 2020 2020 2073 656c 662e 7363 7261 7065       self.scrape
+00001b10: 722e 6765 745f 656d 706c 6f79 6565 5f73  r.get_employee_s
+00001b20: 6869 6674 735f 6a73 6f6e 2829 0a20 2020  hifts_json().   
+00001b30: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00001b40: 5f5f 6361 6c6c 5f5f 2873 656c 6629 3a0a  __call__(self):.
+00001b50: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
+00001b60: 6174 655f 6576 656e 7473 5f64 625f 6672  ate_events_db_fr
+00001b70: 6f6d 5f72 656d 6f74 6528 290a 2020 2020  om_remote().    
+00001b80: 2020 2020 7365 6c66 2e61 6464 5f68 6f6d      self.add_hom
+00001b90: 6562 6173 655f 7368 6966 7473 2829 0a20  ebase_shifts(). 
+00001ba0: 2020 2020 2020 2063 6f6e 6669 672e 4442         config.DB
+00001bb0: 2e63 6c6f 7365 2829 0a0a 2020 2020 6465  .close()..    de
+00001bc0: 6620 6765 745f 6576 656e 745f 6861 7368  f get_event_hash
+00001bd0: 2873 656c 662c 2065 7665 6e74 3a20 6469  (self, event: di
+00001be0: 6374 2920 2d3e 2073 7472 3a0a 2020 2020  ct) -> str:.    
+00001bf0: 2020 2020 6576 656e 745f 7374 7220 3d20      event_str = 
+00001c00: 6a73 6f6e 2e64 756d 7073 2865 7665 6e74  json.dumps(event
+00001c10: 2c20 736f 7274 5f6b 6579 733d 5472 7565  , sort_keys=True
+00001c20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00001c30: 2068 6173 686c 6962 2e73 6861 3531 3228   hashlib.sha512(
+00001c40: 6576 656e 745f 7374 722e 656e 636f 6465  event_str.encode
+00001c50: 2822 7574 662d 3822 2929 2e68 6578 6469  ("utf-8")).hexdi
+00001c60: 6765 7374 2829 0a0a 2020 2020 6465 6620  gest()..    def 
+00001c70: 7570 6461 7465 5f65 7665 6e74 735f 6462  update_events_db
+00001c80: 5f66 726f 6d5f 7265 6d6f 7465 2873 656c  _from_remote(sel
+00001c90: 6629 3a0a 2020 2020 2020 2020 636f 6e6e  f):.        conn
+00001ca0: 6563 745f 6461 7461 6261 7365 2829 0a20  ect_database(). 
+00001cb0: 2020 2020 2020 2072 656d 6f74 655f 6576         remote_ev
+00001cc0: 656e 7473 203d 2073 6574 2829 0a0a 2020  ents = set()..  
+00001cd0: 2020 2020 2020 666f 7220 6576 656e 7420        for event 
+00001ce0: 696e 2073 656c 662e 7072 696d 6172 795f  in self.primary_
+00001cf0: 6361 6c65 6e64 6172 5f65 7665 6e74 733a  calendar_events:
+00001d00: 0a20 2020 2020 2020 2020 2020 2065 7665  .            eve
+00001d10: 6e74 5f69 6420 3d20 6576 656e 745b 2269  nt_id = event["i
+00001d20: 6422 5d0a 2020 2020 2020 2020 2020 2020  d"].            
+00001d30: 6576 656e 745f 6861 7368 203d 2073 656c  event_hash = sel
+00001d40: 662e 6765 745f 6576 656e 745f 6861 7368  f.get_event_hash
+00001d50: 2865 7665 6e74 290a 2020 2020 2020 2020  (event).        
+00001d60: 2020 2020 7265 6d6f 7465 5f65 7665 6e74      remote_event
+00001d70: 732e 6164 6428 6576 656e 745f 6964 290a  s.add(event_id).
+00001d80: 2020 2020 2020 2020 2020 2020 6672 6f6d              from
+00001d90: 5f68 6f6d 6562 6173 6520 3d20 3020 2023  _homebase = 0  #
+00001da0: 2030 2f31 202d 2046 616c 7365 2f54 7275   0/1 - False/Tru
+00001db0: 650a 2020 2020 2020 2020 2020 2020 686f  e.            ho
+00001dc0: 6d65 6261 7365 5f73 6869 6674 5f69 6420  mebase_shift_id 
+00001dd0: 3d20 4e6f 6e65 0a0a 2020 2020 2020 2020  = None..        
+00001de0: 2020 2020 686f 6d65 6261 7365 5f65 7665      homebase_eve
+00001df0: 6e74 203d 2065 7665 6e74 2e67 6574 2822  nt = event.get("
+00001e00: 736f 7572 6365 2229 0a20 2020 2020 2020  source").       
+00001e10: 2020 2020 2069 6620 686f 6d65 6261 7365       if homebase
+00001e20: 5f65 7665 6e74 3a0a 2020 2020 2020 2020  _event:.        
+00001e30: 2020 2020 2020 2020 7368 6966 745f 6964          shift_id
+00001e40: 5f73 6f75 7263 6520 3d20 686f 6d65 6261  _source = homeba
+00001e50: 7365 5f65 7665 6e74 5b22 7469 746c 6522  se_event["title"
+00001e60: 5d2e 7370 6c69 7428 222d 2229 0a0a 2020  ].split("-")..  
+00001e70: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00001e80: 206c 656e 2873 6869 6674 5f69 645f 736f   len(shift_id_so
+00001e90: 7572 6365 2920 3e20 3120 616e 6420 7368  urce) > 1 and sh
+00001ea0: 6966 745f 6964 5f73 6f75 7263 655b 305d  ift_id_source[0]
+00001eb0: 203d 3d20 2268 6f6d 6562 6173 6553 6869   == "homebaseShi
+00001ec0: 6674 4964 223a 0a20 2020 2020 2020 2020  ftId":.         
+00001ed0: 2020 2020 2020 2020 2020 2068 6f6d 6562             homeb
+00001ee0: 6173 655f 7368 6966 745f 6964 203d 2073  ase_shift_id = s
+00001ef0: 6869 6674 5f69 645f 736f 7572 6365 5b31  hift_id_source[1
+00001f00: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00001f10: 2020 2020 2020 6672 6f6d 5f68 6f6d 6562        from_homeb
+00001f20: 6173 6520 3d20 310a 0a20 2020 2020 2020  ase = 1..       
+00001f30: 2020 2020 2063 6f6e 6669 672e 4442 5f43       config.DB_C
+00001f40: 5552 534f 522e 6578 6563 7574 6528 0a20  URSOR.execute(. 
+00001f50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00001f60: 5345 4c45 4354 2068 6173 6820 4652 4f4d  SELECT hash FROM
+00001f70: 2065 7665 6e74 7320 5748 4552 4520 6576   events WHERE ev
+00001f80: 656e 745f 6964 203d 203f 222c 2028 6576  ent_id = ?", (ev
+00001f90: 656e 745f 6964 2c29 0a20 2020 2020 2020  ent_id,).       
+00001fa0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00001fb0: 2020 2072 6f77 203d 2063 6f6e 6669 672e     row = config.
+00001fc0: 4442 5f43 5552 534f 522e 6665 7463 686f  DB_CURSOR.fetcho
+00001fd0: 6e65 2829 0a0a 2020 2020 2020 2020 2020  ne()..          
+00001fe0: 2020 6966 2072 6f77 2069 7320 4e6f 6e65    if row is None
+00001ff0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002000: 2020 636f 6e66 6967 2e44 425f 4355 5253    config.DB_CURS
+00002010: 4f52 2e65 7865 6375 7465 280a 2020 2020  OR.execute(.    
+00002020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002030: 2249 4e53 4552 5420 494e 544f 2065 7665  "INSERT INTO eve
+00002040: 6e74 7320 2865 7665 6e74 5f69 642c 2068  nts (event_id, h
+00002050: 6173 682c 2066 726f 6d5f 686f 6d65 6261  ash, from_homeba
+00002060: 7365 2c20 686f 6d65 6261 7365 5f73 6869  se, homebase_shi
+00002070: 6674 5f69 6429 2056 414c 5545 5320 283f  ft_id) VALUES (?
+00002080: 2c20 3f2c 203f 2c20 3f29 222c 0a20 2020  , ?, ?, ?)",.   
+00002090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000020a0: 2028 6576 656e 745f 6964 2c20 6576 656e   (event_id, even
+000020b0: 745f 6861 7368 2c20 6672 6f6d 5f68 6f6d  t_hash, from_hom
+000020c0: 6562 6173 652c 2068 6f6d 6562 6173 655f  ebase, homebase_
+000020d0: 7368 6966 745f 6964 292c 0a20 2020 2020  shift_id),.     
+000020e0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+000020f0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+00002100: 7269 6e74 2866 224e 6577 2065 7665 6e74  rint(f"New event
+00002110: 2061 6464 6564 3a20 7b65 7665 6e74 5f69   added: {event_i
+00002120: 647d 2229 0a20 2020 2020 2020 2020 2020  d}").           
+00002130: 2065 6c69 6620 726f 775b 305d 2021 3d20   elif row[0] != 
+00002140: 6576 656e 745f 6861 7368 3a0a 2020 2020  event_hash:.    
+00002150: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+00002160: 6967 2e44 425f 4355 5253 4f52 2e65 7865  ig.DB_CURSOR.exe
+00002170: 6375 7465 280a 2020 2020 2020 2020 2020  cute(.          
+00002180: 2020 2020 2020 2020 2020 2255 5044 4154            "UPDAT
+00002190: 4520 6576 656e 7473 2053 4554 2068 6173  E events SET has
+000021a0: 6820 3d20 3f20 5748 4552 4520 6576 656e  h = ? WHERE even
+000021b0: 745f 6964 203d 203f 222c 0a20 2020 2020  t_id = ?",.     
+000021c0: 2020 2020 2020 2020 2020 2020 2020 2028                 (
+000021d0: 6576 656e 745f 6861 7368 2c20 6576 656e  event_hash, even
+000021e0: 745f 6964 292c 0a20 2020 2020 2020 2020  t_id),.         
+000021f0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00002200: 2020 2020 2020 2020 2070 7269 6e74 2866           print(f
+00002210: 2245 7665 6e74 2075 7064 6174 6564 3a20  "Event updated: 
+00002220: 7b65 7665 6e74 5f69 647d 2229 0a20 2020  {event_id}").   
+00002230: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
+00002240: 4442 2e63 6f6d 6d69 7428 290a 0a20 2020  DB.commit()..   
+00002250: 2020 2020 2023 2050 7275 6e65 204c 6f63       # Prune Loc
+00002260: 616c 2045 7665 6e74 7320 746f 206d 6174  al Events to mat
+00002270: 6368 2072 656d 6f74 650a 2020 2020 2020  ch remote.      
+00002280: 2020 636f 6e66 6967 2e44 425f 4355 5253    config.DB_CURS
+00002290: 4f52 2e65 7865 6375 7465 2822 5345 4c45  OR.execute("SELE
+000022a0: 4354 2065 7665 6e74 5f69 6420 4652 4f4d  CT event_id FROM
+000022b0: 2065 7665 6e74 7322 290a 2020 2020 2020   events").      
+000022c0: 2020 6c6f 6361 6c5f 6576 656e 7473 203d    local_events =
+000022d0: 207b 726f 775b 305d 2066 6f72 2072 6f77   {row[0] for row
+000022e0: 2069 6e20 636f 6e66 6967 2e44 425f 4355   in config.DB_CU
+000022f0: 5253 4f52 2e66 6574 6368 616c 6c28 297d  RSOR.fetchall()}
+00002300: 0a20 2020 2020 2020 2065 7665 6e74 735f  .        events_
+00002310: 746f 5f64 656c 6574 6520 3d20 6c6f 6361  to_delete = loca
+00002320: 6c5f 6576 656e 7473 202d 2072 656d 6f74  l_events - remot
+00002330: 655f 6576 656e 7473 0a20 2020 2020 2020  e_events.       
+00002340: 2066 6f72 2065 7665 6e74 5f69 6420 696e   for event_id in
+00002350: 2065 7665 6e74 735f 746f 5f64 656c 6574   events_to_delet
+00002360: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
+00002370: 6f6e 6669 672e 4442 5f43 5552 534f 522e  onfig.DB_CURSOR.
+00002380: 6578 6563 7574 6528 0a20 2020 2020 2020  execute(.       
+00002390: 2020 2020 2020 2020 2022 4445 4c45 5445           "DELETE
+000023a0: 2046 524f 4d20 6576 656e 7473 2057 4845   FROM events WHE
+000023b0: 5245 2065 7665 6e74 5f69 6420 3d20 3f22  RE event_id = ?"
+000023c0: 2c20 2865 7665 6e74 5f69 642c 290a 2020  , (event_id,).  
+000023d0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+000023e0: 2020 2020 2020 2020 7072 696e 7428 6622          print(f"
+000023f0: 4576 656e 7420 6465 6c65 7465 643a 207b  Event deleted: {
+00002400: 6576 656e 745f 6964 7d22 290a 0a20 2020  event_id}")..   
+00002410: 2020 2020 2063 6f6e 6669 672e 4442 2e63       config.DB.c
+00002420: 6f6d 6d69 7428 290a 0a20 2020 2064 6566  ommit()..    def
+00002430: 2067 6574 5f68 6f6d 6562 6173 655f 6576   get_homebase_ev
+00002440: 656e 7473 2873 656c 6629 202d 3e20 7365  ents(self) -> se
+00002450: 743a 0a20 2020 2020 2020 2068 6f6d 6562  t:.        homeb
+00002460: 6173 655f 6576 656e 7473 203d 2073 6574  ase_events = set
+00002470: 2829 0a0a 2020 2020 2020 2020 666f 7220  ()..        for 
+00002480: 5f20 696e 2073 656c 662e 7072 696d 6172  _ in self.primar
+00002490: 795f 6361 6c65 6e64 6172 5f65 7665 6e74  y_calendar_event
+000024a0: 733a 0a20 2020 2020 2020 2020 2020 2069  s:.            i
+000024b0: 6620 5f2e 6765 7428 2273 6f75 7263 6522  f _.get("source"
+000024c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+000024d0: 2020 2073 6869 6674 5f69 645f 736f 7572     shift_id_sour
+000024e0: 6365 203d 205f 5b22 736f 7572 6365 225d  ce = _["source"]
+000024f0: 5b22 7469 746c 6522 5d2e 7370 6c69 7428  ["title"].split(
+00002500: 222d 2229 0a0a 2020 2020 2020 2020 2020  "-")..          
+00002510: 2020 2020 2020 6966 206c 656e 2873 6869        if len(shi
+00002520: 6674 5f69 645f 736f 7572 6365 2920 3e20  ft_id_source) > 
+00002530: 3120 616e 6420 7368 6966 745f 6964 5f73  1 and shift_id_s
+00002540: 6f75 7263 655b 305d 203d 3d20 2268 6f6d  ource[0] == "hom
+00002550: 6562 6173 6553 6869 6674 4964 223a 0a20  ebaseShiftId":. 
+00002560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002570: 2020 2068 6f6d 6562 6173 655f 6576 656e     homebase_even
+00002580: 7473 2e61 6464 2873 6869 6674 5f69 645f  ts.add(shift_id_
+00002590: 736f 7572 6365 5b31 5d29 0a20 2020 2020  source[1]).     
+000025a0: 2020 2072 6574 7572 6e20 686f 6d65 6261     return homeba
+000025b0: 7365 5f65 7665 6e74 730a 0a20 2020 2064  se_events..    d
+000025c0: 6566 2061 6464 5f68 6f6d 6562 6173 655f  ef add_homebase_
+000025d0: 7368 6966 7473 2873 656c 6629 3a0a 2020  shifts(self):.  
+000025e0: 2020 2020 2020 636f 6e6e 6563 745f 6461        connect_da
+000025f0: 7461 6261 7365 2829 0a20 2020 2020 2020  tabase().       
+00002600: 2072 656d 6f74 655f 7368 6966 7473 203d   remote_shifts =
+00002610: 207b 5f5b 2273 6869 6674 4964 225d 2066   {_["shiftId"] f
+00002620: 6f72 205f 2069 6e20 7365 6c66 2e72 656d  or _ in self.rem
+00002630: 6f74 655f 686f 6d65 6261 7365 5f73 6869  ote_homebase_shi
+00002640: 6674 737d 0a20 2020 2020 2020 2068 6f6d  fts}.        hom
+00002650: 6562 6173 655f 6576 656e 7473 203d 2073  ebase_events = s
+00002660: 656c 662e 6765 745f 686f 6d65 6261 7365  elf.get_homebase
+00002670: 5f65 7665 6e74 7328 290a 0a20 2020 2020  _events()..     
+00002680: 2020 2066 6f72 2073 6869 6674 2069 6e20     for shift in 
+00002690: 7365 6c66 2e72 656d 6f74 655f 686f 6d65  self.remote_home
+000026a0: 6261 7365 5f73 6869 6674 733a 0a20 2020  base_shifts:.   
+000026b0: 2020 2020 2020 2020 2073 6869 6674 5f68           shift_h
+000026c0: 6173 6820 3d20 7365 6c66 2e67 6574 5f65  ash = self.get_e
+000026d0: 7665 6e74 5f68 6173 6828 7368 6966 7429  vent_hash(shift)
+000026e0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+000026f0: 6669 672e 4442 5f43 5552 534f 522e 6578  fig.DB_CURSOR.ex
+00002700: 6563 7574 6528 0a20 2020 2020 2020 2020  ecute(.         
+00002710: 2020 2020 2020 2022 5345 4c45 4354 2068         "SELECT h
+00002720: 6173 6820 4652 4f4d 2073 6869 6674 7320  ash FROM shifts 
+00002730: 5748 4552 4520 686f 6d65 6261 7365 5f73  WHERE homebase_s
+00002740: 6869 6674 5f69 6420 3d20 3f22 2c0a 2020  hift_id = ?",.  
+00002750: 2020 2020 2020 2020 2020 2020 2020 2873                (s
+00002760: 6869 6674 5b22 7368 6966 7449 6422 5d2c  hift["shiftId"],
+00002770: 292c 0a20 2020 2020 2020 2020 2020 2029  ),.            )
+00002780: 0a20 2020 2020 2020 2020 2020 2072 6f77  .            row
+00002790: 203d 2063 6f6e 6669 672e 4442 5f43 5552   = config.DB_CUR
+000027a0: 534f 522e 6665 7463 686f 6e65 2829 0a0a  SOR.fetchone()..
+000027b0: 2020 2020 2020 2020 2020 2020 6c6f 6361              loca
+000027c0: 6c5f 7469 6d65 203d 2070 656e 6475 6c75  l_time = pendulu
+000027d0: 6d2e 6e6f 7728 290a 2020 2020 2020 2020  m.now().        
+000027e0: 2020 2020 7374 6172 7420 3d20 7065 6e64      start = pend
+000027f0: 756c 756d 2e70 6172 7365 280a 2020 2020  ulum.parse(.    
+00002800: 2020 2020 2020 2020 2020 2020 6622 7b73              f"{s
+00002810: 6869 6674 5b22 7368 6966 7444 6174 6522  hift["shiftDate"
+00002820: 5d7d 207b 7368 6966 745b 2273 7461 7274  ]} {shift["start
+00002830: 5469 6d65 225d 7d22 2c0a 2020 2020 2020  Time"]}",.      
+00002840: 2020 2020 2020 2020 2020 747a 3d6c 6f63            tz=loc
+00002850: 616c 5f74 696d 652e 7469 6d65 7a6f 6e65  al_time.timezone
+00002860: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
+00002870: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00002880: 2065 6e64 203d 2070 656e 6475 6c75 6d2e   end = pendulum.
+00002890: 7061 7273 6528 0a20 2020 2020 2020 2020  parse(.         
+000028a0: 2020 2020 2020 2066 227b 7368 6966 745b         f"{shift[
+000028b0: 2273 6869 6674 4461 7465 225d 7d20 7b73  "shiftDate"]} {s
+000028c0: 6869 6674 5b22 656e 6454 696d 6522 5d7d  hift["endTime"]}
+000028d0: 222c 2074 7a3d 6c6f 6361 6c5f 7469 6d65  ", tz=local_time
+000028e0: 2e74 696d 657a 6f6e 655f 6e61 6d65 0a20  .timezone_name. 
+000028f0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00002900: 2020 2020 2020 2020 2065 7665 6e74 203d           event =
+00002910: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00002920: 2020 2022 7375 6d6d 6172 7922 3a20 6622     "summary": f"
+00002930: 486f 6d65 6261 7365 202d 207b 7368 6966  Homebase - {shif
+00002940: 745b 226a 6f62 526f 6c65 225d 7d22 2c0a  t["jobRole"]}",.
+00002950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002960: 2264 6573 6372 6970 7469 6f6e 223a 2066  "description": f
+00002970: 227b 7368 6966 745b 2266 6972 7374 4e61  "{shift["firstNa
+00002980: 6d65 225d 7d20 7b73 6869 6674 5b22 6c61  me"]} {shift["la
+00002990: 7374 4e61 6d65 225d 7d22 2c0a 2020 2020  stName"]}",.    
+000029a0: 2020 2020 2020 2020 2020 2020 2273 7461              "sta
+000029b0: 7274 223a 207b 0a20 2020 2020 2020 2020  rt": {.         
+000029c0: 2020 2020 2020 2020 2020 2022 6461 7465             "date
+000029d0: 5469 6d65 223a 2073 7461 7274 2e74 6f5f  Time": start.to_
+000029e0: 6973 6f38 3630 315f 7374 7269 6e67 2829  iso8601_string()
+000029f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00002a00: 2020 2020 2020 2274 696d 655a 6f6e 6522        "timeZone"
+00002a10: 3a20 6c6f 6361 6c5f 7469 6d65 2e74 696d  : local_time.tim
+00002a20: 657a 6f6e 655f 6e61 6d65 2c0a 2020 2020  ezone_name,.    
+00002a30: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00002a40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00002a50: 656e 6422 3a20 7b0a 2020 2020 2020 2020  end": {.        
+00002a60: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
+00002a70: 6554 696d 6522 3a20 656e 642e 746f 5f69  eTime": end.to_i
+00002a80: 736f 3836 3031 5f73 7472 696e 6728 292c  so8601_string(),
+00002a90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002aa0: 2020 2020 2022 7469 6d65 5a6f 6e65 223a       "timeZone":
+00002ab0: 206c 6f63 616c 5f74 696d 652e 7469 6d65   local_time.time
+00002ac0: 7a6f 6e65 5f6e 616d 652c 0a20 2020 2020  zone_name,.     
+00002ad0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
+00002ae0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
+00002af0: 6f75 7263 6522 3a20 7b0a 2020 2020 2020  ource": {.      
+00002b00: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00002b10: 6974 6c65 223a 2066 2268 6f6d 6562 6173  itle": f"homebas
+00002b20: 6553 6869 6674 4964 2d7b 7368 6966 745b  eShiftId-{shift[
+00002b30: 2273 6869 6674 4964 225d 7d22 2c0a 2020  "shiftId"]}",.  
+00002b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002b50: 2020 2275 726c 223a 2022 6874 7470 733a    "url": "https:
+00002b60: 2f2f 6170 702e 6a6f 696e 686f 6d65 6261  //app.joinhomeba
+00002b70: 7365 2e63 6f6d 2f22 2c0a 2020 2020 2020  se.com/",.      
+00002b80: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+00002b90: 2020 2020 2020 2020 207d 0a0a 2020 2020           }..    
+00002ba0: 2020 2020 2020 2020 6966 2072 6f77 2069          if row i
+00002bb0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00002bc0: 2020 2020 2020 2020 636f 6e66 6967 2e44          config.D
+00002bd0: 425f 4355 5253 4f52 2e65 7865 6375 7465  B_CURSOR.execute
+00002be0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00002bf0: 2020 2020 2020 2249 4e53 4552 5420 494e        "INSERT IN
+00002c00: 544f 2073 6869 6674 7320 2868 6f6d 6562  TO shifts (homeb
+00002c10: 6173 655f 7368 6966 745f 6964 2c20 6861  ase_shift_id, ha
+00002c20: 7368 2920 5641 4c55 4553 2028 3f2c 203f  sh) VALUES (?, ?
+00002c30: 2922 2c0a 2020 2020 2020 2020 2020 2020  )",.            
+00002c40: 2020 2020 2020 2020 2873 6869 6674 5b22          (shift["
+00002c50: 7368 6966 7449 6422 5d2c 2073 6869 6674  shiftId"], shift
+00002c60: 5f68 6173 6829 2c0a 2020 2020 2020 2020  _hash),.        
+00002c70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00002c80: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00002c90: 6622 4e65 7720 7368 6966 7420 6164 6465  f"New shift adde
+00002ca0: 643a 207b 7368 6966 745f 6861 7368 7d22  d: {shift_hash}"
+00002cb0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00002cc0: 2020 636f 6e66 6967 2e44 422e 636f 6d6d    config.DB.comm
+00002cd0: 6974 2829 0a0a 2020 2020 2020 2020 2020  it()..          
+00002ce0: 2020 2020 2020 636f 6e66 6967 2e44 425f        config.DB_
+00002cf0: 4355 5253 4f52 2e65 7865 6375 7465 280a  CURSOR.execute(.
+00002d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002d10: 2020 2020 2253 454c 4543 5420 6861 7368      "SELECT hash
+00002d20: 2046 524f 4d20 6576 656e 7473 2057 4845   FROM events WHE
+00002d30: 5245 2068 6f6d 6562 6173 655f 7368 6966  RE homebase_shif
+00002d40: 745f 6964 203d 203f 222c 0a20 2020 2020  t_id = ?",.     
+00002d50: 2020 2020 2020 2020 2020 2020 2020 2028                 (
+00002d60: 7368 6966 745b 2273 6869 6674 4964 225d  shift["shiftId"]
+00002d70: 2c29 2c0a 2020 2020 2020 2020 2020 2020  ,),.            
+00002d80: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00002d90: 2020 2020 2020 726f 7720 3d20 636f 6e66        row = conf
+00002da0: 6967 2e44 425f 4355 5253 4f52 2e66 6574  ig.DB_CURSOR.fet
+00002db0: 6368 6f6e 6528 290a 0a20 2020 2020 2020  chone()..       
+00002dc0: 2020 2020 2020 2020 2069 6620 726f 7720           if row 
+00002dd0: 6973 204e 6f6e 6520 616e 6420 7368 6966  is None and shif
+00002de0: 745b 2273 6869 6674 4964 225d 206e 6f74  t["shiftId"] not
+00002df0: 2069 6e20 686f 6d65 6261 7365 5f65 7665   in homebase_eve
+00002e00: 6e74 733a 0a20 2020 2020 2020 2020 2020  nts:.           
+00002e10: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
+00002e20: 474f 4f47 4c45 2e63 7265 6174 655f 6e65  GOOGLE.create_ne
+00002e30: 775f 6576 656e 7428 7365 6c66 2e70 7269  w_event(self.pri
+00002e40: 6d61 7279 5f63 616c 656e 6461 725b 2269  mary_calendar["i
+00002e50: 6422 5d2c 2065 7665 6e74 290a 0a20 2020  d"], event)..   
+00002e60: 2020 2020 2020 2020 2065 6c69 6620 726f           elif ro
+00002e70: 775b 305d 2021 3d20 7368 6966 745f 6861  w[0] != shift_ha
+00002e80: 7368 3a0a 2020 2020 2020 2020 2020 2020  sh:.            
+00002e90: 2020 2020 636f 6e66 6967 2e44 425f 4355      config.DB_CU
+00002ea0: 5253 4f52 2e65 7865 6375 7465 280a 2020  RSOR.execute(.  
+00002eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ec0: 2020 2255 5044 4154 4520 7368 6966 7473    "UPDATE shifts
+00002ed0: 2053 4554 2068 6173 6820 3d20 3f20 5748   SET hash = ? WH
+00002ee0: 4552 4520 686f 6d65 6261 7365 5f73 6869  ERE homebase_shi
+00002ef0: 6674 5f69 6420 3d20 3f22 2c0a 2020 2020  ft_id = ?",.    
+00002f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f10: 2873 6869 6674 5f68 6173 682c 2073 6869  (shift_hash, shi
+00002f20: 6674 5b22 7368 6966 7449 6422 5d29 2c0a  ft["shiftId"]),.
+00002f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002f40: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00002f50: 2020 7072 696e 7428 6622 5368 6966 7420    print(f"Shift 
+00002f60: 7570 6461 7465 643a 207b 7368 6966 745f  updated: {shift_
+00002f70: 6861 7368 7d22 290a 2020 2020 2020 2020  hash}").        
+00002f80: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00002f90: 666f 7220 4352 5544 206f 7065 7261 7469  for CRUD operati
+00002fa0: 6f6e 732c 2074 6869 7320 6973 2077 6865  ons, this is whe
+00002fb0: 7265 2069 6e74 6567 7261 7469 6f6e 2063  re integration c
+00002fc0: 6f64 6520 666f 7220 5550 4441 5445 5320  ode for UPDATES 
+00002fd0: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
+00002fe0: 2020 2023 2054 4f44 4f20 2068 6f6d 6562     # TODO  homeb
+00002ff0: 6173 6527 7320 7368 6966 7420 7469 6d65  ase's shift time
+00003000: 7320 776f 756c 6420 6265 2070 726f 6365  s would be proce
+00003010: 7373 6564 2e0a 2020 2020 2020 2020 2020  ssed..          
+00003020: 2020 2020 2020 636f 6e66 6967 2e44 422e        config.DB.
+00003030: 636f 6d6d 6974 2829 0a20 2020 2020 2020  commit().       
+00003040: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00003050: 2020 2020 2020 2020 2020 2069 6620 7368             if sh
+00003060: 6966 745b 2273 6869 6674 4964 225d 206e  ift["shiftId"] n
+00003070: 6f74 2069 6e20 686f 6d65 6261 7365 5f65  ot in homebase_e
+00003080: 7665 6e74 733a 0a20 2020 2020 2020 2020  vents:.         
+00003090: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+000030a0: 672e 474f 4f47 4c45 2e63 7265 6174 655f  g.GOOGLE.create_
+000030b0: 6e65 775f 6576 656e 7428 7365 6c66 2e70  new_event(self.p
+000030c0: 7269 6d61 7279 5f63 616c 656e 6461 725b  rimary_calendar[
+000030d0: 2269 6422 5d2c 2065 7665 6e74 290a 0a20  "id"], event).. 
+000030e0: 2020 2020 2020 2020 2020 2023 2050 7275             # Pru
+000030f0: 6e65 204c 6f63 616c 2045 7665 6e74 7320  ne Local Events 
+00003100: 746f 206d 6174 6368 2072 656d 6f74 650a  to match remote.
+00003110: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+00003120: 6967 2e44 425f 4355 5253 4f52 2e65 7865  ig.DB_CURSOR.exe
+00003130: 6375 7465 2822 5345 4c45 4354 2068 6f6d  cute("SELECT hom
+00003140: 6562 6173 655f 7368 6966 745f 6964 2046  ebase_shift_id F
+00003150: 524f 4d20 7368 6966 7473 2229 0a20 2020  ROM shifts").   
+00003160: 2020 2020 2020 2020 206c 6f63 616c 5f73           local_s
+00003170: 6869 6674 7320 3d20 7b72 6f77 5b30 5d20  hifts = {row[0] 
+00003180: 666f 7220 726f 7720 696e 2063 6f6e 6669  for row in confi
+00003190: 672e 4442 5f43 5552 534f 522e 6665 7463  g.DB_CURSOR.fetc
+000031a0: 6861 6c6c 2829 7d0a 2020 2020 2020 2020  hall()}.        
+000031b0: 2020 2020 7368 6966 7473 5f74 6f5f 6465      shifts_to_de
+000031c0: 6c65 7465 203d 206c 6f63 616c 5f73 6869  lete = local_shi
+000031d0: 6674 7320 2d20 7265 6d6f 7465 5f73 6869  fts - remote_shi
+000031e0: 6674 730a 2020 2020 2020 2020 2020 2020  fts.            
+000031f0: 666f 7220 6576 656e 745f 6964 2069 6e20  for event_id in 
+00003200: 7368 6966 7473 5f74 6f5f 6465 6c65 7465  shifts_to_delete
+00003210: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00003220: 2020 636f 6e66 6967 2e44 425f 4355 5253    config.DB_CURS
+00003230: 4f52 2e65 7865 6375 7465 280a 2020 2020  OR.execute(.    
+00003240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00003250: 2244 454c 4554 4520 4652 4f4d 2073 6869  "DELETE FROM shi
+00003260: 6674 7320 5748 4552 4520 686f 6d65 6261  fts WHERE homeba
+00003270: 7365 5f73 6869 6674 5f69 6420 3d20 3f22  se_shift_id = ?"
+00003280: 2c20 2865 7665 6e74 5f69 642c 290a 2020  , (event_id,).  
+00003290: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+000032a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000032b0: 7072 696e 7428 6622 5368 6966 7420 6465  print(f"Shift de
+000032c0: 6c65 7465 643a 207b 6576 656e 745f 6964  leted: {event_id
+000032d0: 7d22 290a 0a20 2020 2020 2020 2063 6f6e  }")..        con
+000032e0: 6669 672e 4442 2e63 6f6d 6d69 7428 290a  fig.DB.commit().
+000032f0: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
+00003300: 6174 655f 6576 656e 7473 5f64 625f 6672  ate_events_db_fr
+00003310: 6f6d 5f72 656d 6f74 6528 290a 0a0a 6465  om_remote()...de
+00003320: 6620 6d61 696e 2829 3a0a 2020 2020 7379  f main():.    sy
+00003330: 6e63 203d 2048 6f6d 6562 6173 6543 616c  nc = HomebaseCal
+00003340: 656e 6461 7253 796e 6328 290a 2020 2020  endarSync().    
+00003350: 7379 6e63 2829 0a0a 0a69 6620 5f5f 6e61  sync()...if __na
+00003360: 6d65 5f5f 203d 3d20 225f 5f6d 6169 6e5f  me__ == "__main_
+00003370: 5f22 3a0a 2020 2020 6d61 696e 2829 0a    _":.    main().
```

### Comparing `homebase_calendar_sync-0.1.0/setup.py` & `homebase_calendar_sync-0.1.1/setup.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 from setuptools import setup, find_packages
 
 from setuptools import setup, find_packages
 
 setup(
     name='homebase_calendar_sync',
-    version='0.1.0',
+    version='0.1.1',
     author='David Midlo',
     author_email='dmidlo@gmail.com',
     description='A simple web scraper that reads gethomebase.com\'s schedule and updates Google Calendar.',
     long_description=open('README.md').read(),
     long_description_content_type='text/markdown',
     url='https://github.com/dmidlo/homebase_calendar_sync',  # Update this to your project's URL
     packages=find_packages(where='src'),
```

### Comparing `homebase_calendar_sync-0.1.0/src/homebase_calendar_sync.egg-info/requires.txt` & `homebase_calendar_sync-0.1.1/src/homebase_calendar_sync.egg-info/requires.txt`

 * *Files identical despite different names*

